---
title: 计算机网络MOOC
date: 2023/5/1 16:00:25
categories:
- 计算机基础
---

## 第一章

### 因特网发展的三个阶段

<img src="E:\typora img\image-20221117102953528.png" alt="image-20221117102953528" style="zoom: 67%;" />

### ISP

<img src="E:\typora img\image-20221117103120389.png" alt="image-20221117103120389" style="zoom:67%;" />



### 互联网标准制定

<img src="E:\typora img\image-20220923193359464.png" alt="image-20220923193359464" style="zoom:67%;" />





### 常用的性能指标

<img src="E:\typora img\image-20220913204558578.png" alt="image-20220913204558578" style="zoom: 67%;" />



- ##### 速率

  > 现实生活中的“宽带”
  >
  > 因为ISP提供的线路带宽使用的单位是bit，而一般下载软件显示的是字节（1字节＝8比特），所以要通过换算，才能得实际值。
  >
  > 理论上：2M（即2Mb/s）宽带理论速率是：256KB/s（即2048Kb/s），实际速率大约为80--200KB/s；

  ![image-20220915093907863](E:\typora img\image-20220915093907863.png)

  

- 带宽--发送速率，数据率

  ![image-20220923193822220](E:\typora img\image-20220923193822220.png)





- 吞吐量

  实际数据量

  <img src="E:\typora img\image-20220913211017777.png" alt="image-20220913211017777" style="zoom:67%;" />

  <img src="E:\typora img\image-20220915102810753.png" alt="image-20220915102810753" style="zoom:67%;" />

- 时延

  - 指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。

  - 组成

    <img src="E:\typora img\image-20220913211302189.png" alt="image-20220913211302189" style="zoom:67%;" />

    <img src="E:\typora img\image-20220913211405574.png" alt="image-20220913211405574" style="zoom:67%;" />

    <img src="E:\typora img\image-20220913211528742.png" alt="image-20220913211528742" style="zoom: 50%;" />

    信道速率

    <img src="E:\typora img\image-20220913211617635.png" alt="image-20220913211617635" style="zoom:50%;" />

    注意:

    > 以下说法是错误的：
    > “在高速链路（或高带宽链路）上，比特会传送得更快些”。
  >
    > 总时延  = 处理时延 + 排队时延 + 发送时延 + 传播时延
  >
    > 上述方法只是提高了数据的发送速率，减少了传播时延。

    <img src="E:\typora img\image-20220913212738488.png" alt="image-20220913212738488" style="zoom: 67%;" />

  - 时延与网络利用率

    <img src="E:\typora img\image-20220913212835573.png" alt="image-20220913212835573" style="zoom: 67%;" />

    例子：假定网络的利用率达到了90%。试估算一下现在的网络时延是它的最小值的多少倍？
  
    > D=D0/(1-U)=D0/(1-90%)=10D0;是最小值的10倍;
    >
    > 注：网络时延最小值为网络空闲时的时延D0




- 时延带宽积--链路上的比特数目

  <img src="E:\typora img\image-20220913212303725.png" alt="image-20220913212303725" style="zoom: 67%;" />

**第三章20.假定1km长的CSMA/CD网络的数据率为1Gbit/s。设信号在网络上的传输速率为200000km/s.求能够使用此协议的最短帧长。**

答：对于1km电缆，单程传播时间为1/200000=5us，来回路程传播时间为10us，为了能够按照CSMA/CD工作，最小帧的发射时间不能小于10us，以1GB/s速率工作，10us可以发送的比特数等于10\*10^-6\*10^9=10^4s，因此最短帧是10000位或1250字节长

**最短帧长相当于链路上的比特数目**



- 往返时间RTT

  - 表示从发送方发送完数据，到发送方收到来自接收方的确认总共经历的时间。

  <img src="E:\typora img\image-20220913212539960.png" alt="image-20220913212539960" style="zoom:67%;" />

  



### 协议与服务

<img src="E:\typora img\image-20220914150912615.png" alt="image-20220914150912615" style="zoom: 67%;" />

- 实体 (entity) ：表示任何可发送或接收信息的硬件或软件进程。

  > 比如说软件进程，网卡

- 协议：控制两个对等实体进行通信的规则的集合。

  > 对等实体指的是在同一层（对等层）上的实体如上图的A与F就是对等实体。
  >
  > 控制应用层通信的就是HTPP协议等。

  - 三要素

    > 语法：确定通信双方"如何讲"，定义了数据格式，编码和信号电平等。
    >
    > 语义：确定通信双方"讲什么"，定义了用于协调同步和差错处理等控制信息。
    >
    > 同步：确定通信双方"讲话的次序"，定义了速度匹配和排序等。

  - 协议与服务

    <img src="E:\typora img\image-20220914153141106.png" alt="image-20220914153141106" style="zoom:67%;" />

    > 二者是相互依存的。（注意最底层物理层的不同之处。）
    >
    > 要实现本层协议，需要使用下层所提供的服务（通过服务原语获得）
    >
    > 在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。

    所以协议是“水平的”，服务是“垂直的”，实体看得见相邻下层所提供的服务，但并不知道实现该服务的具体协议。也就是说，下面的协议对上面的实体是"透明"的。

- SDU

  > 层与层之间交换的数据的单位称为**服务数据单元** SDU 

- PDU

  > 对等层次之间传送的数据包称为该层的**协议数据单元**。

- 服务访问点

  > 在同一系统中相邻两层的实体交换信息的逻辑接口，用于区分不同的服务类型。
  
  - 数据链路层的服务访问点为帧的“类型”字段。
  - 网络层的服务访问点为IP数据报首部中的“协议字段”。运输层的服务访问点为“端口号”。







### 计算机网络体系结构

![image-20231006153941570](../images/image-20231006153941570.png)

![image-20231006154014303](../images/image-20231006154014303.png)

<img src="E:\typora img\image-20220914162928366.png" alt="image-20220914162928366" style="zoom: 50%;" />





### 复用和分用

> 一般来说，应用层会有比较多的进程同时在运行，同时和外部网络有数据的交互，就好比一条道路有多个车道有车辆在行驶。
>
> 可是在底层，数据传输是串行的，也就是单车道。
>
> 当多车道的车要经过单车道，采取的方法是在单车道入口设立卡子，每个车道的车在卡子前排队，依次通过卡子进入单车道。
>
> 排队的过程就是复用（多 → 一），反之就是分用或者叫解复用（一 → 多）





## 第二章

#### 物理层基本概念

- 作用

  > 在连接各种计算机的传输媒体上传输数据比特流。
  >
  > 注意：传输媒体不属于计算机网络体系结构（网络体系结构：网络各层及其协议的集合），相当于第0层即物理层的下一层。

- 特点

  - 机械特性

    > 指明传输媒体的各种规格

  - 电气特性

    > 指明接口电缆上的电压范围

  - 功能特性

    > 指明接口电缆各条信号线（电压范围）的作用

  - 过程特性

    > 指明每种功能的事件发生顺序



#### 传输媒体的种类

<img src="E:\typora img\image-20220918102206140.png" alt="image-20220918102206140" style="zoom: 67%;" />

#### 信道复用技术

目的：

> 为了通过共享信道,最大限度提高信道利用率。

- 频分复用

  > 用户**同时**占用**不同的频带**资源并行通信

- 时分复用

  > 用户**分时**占用**相同的频带**资源并行通信

- 波分复用

  > 与频分复用一样，只是传输数据的**介质变为光波**

- 码分复用

  > 用户**同时**占用**相同的频带**进行通信

  - 码片：每个比特时间划分为m个更短的时间片，称为码片（Chip）

    > 某个站要发送比特1，则发送它自己的m比特码片序列
    >
    > 某个站要发送比特0，则发送它自己的m比特码片序列的反码。

  - 码片向量

    > 根据码片序列生成。1→1，0→-1
    >
    > 假设码片序列为110
    >
    > 则码片向量为（1，1，-1）

  - 规格化内积

    <img src="E:\typora img\image-20220920111446605.png" alt="image-20220920111446605" style="zoom: 67%;" />

    > 右式中的Ai，Bi指的是码片向量

    ![image-20220920111732057](E:\typora img\image-20220920111732057.png)

    生活中的例子

    <img src="E:\typora img\image-20220920111832249.png" alt="image-20220920111832249" style="zoom:67%;" />

    <img src="E:\typora img\image-20220920111905155.png" alt="image-20220920111905155" style="zoom:50%;" />

  规格化内积得到（1，-1，1）对应的码片序列就是101，即手机A收到比特串101.





#### 码元率与数据率

奈式准则得到最高码元速率（波特率）为20000码元/秒，码元的振幅分为16个等级，即信号状态数（可调制出的不同基本波形或码元数量）为16，则一个码元可携带的比特数量为log216=4，所以最高数据率为20000*4比特/秒。

<img src="E:\typora img\image-20221120194830348.png" alt="image-20221120194830348" style="zoom:67%;" />





#### 奈式准则和香农公式

![image-20220920112420614](E:\typora img\image-20220920112420614.png)

##### 计算

```
极限信息传输速率==码元传输速率（波特率）*码元携带的比特数
码元携带的比特数：1og2n //n为码元的振幅或者信号状态数（可调制出的不同基本波形或码元数量）
频率＝传播速率/波长
频带宽度=最高频率-最低频率
```

**第三章16.数据率为10Mb/s的以太网在物理媒体上的码元传输速率是多少码元/秒？**
答：码元传输速率即为波特率，以太网使用曼彻斯特编码，这就意味着发送的每一位都有两个信号周期（一个码元携带0.5个比特），因此波特率是数据率的两倍，即20M码元/秒





## 第三章

### 数据链路层

##### 目的

<img src="E:\typora img\image-20221121103738315.png" alt="image-20221121103738315" style="zoom:80%;" />

**数据链路层做成可靠的链路层有哪些优点和缺点。**

> 可靠的链路层的优点和缺点取决于所应用的环境：对于干扰严重的信道，可靠的链路层可以将重传范围约束在局部链路，防止全网络的传输效率受损；对于优质信道，采用可靠的链路层会增大资源开销，影响传输效率。



- 透明传输
  - 添加帧首部和帧尾部：帧定界符，为了区分比特流中的帧
  
  - 区分载荷中的数据与帧定界符和控制符：ESC（控制符）+FLAG（帧定界符）
  
    <img src="E:\typora img\image-20220924133355678.png" alt="image-20220924133355678" style="zoom:50%;" />
    
    > 字符填充法：在字符前加上转义字符ESC（11100000）
    >
    > 零比特填充法：每五个连续比特1后面插入一个比特0



- 差错控制
  
  目的：为了检测比特在传输过程中是否产生误码（比特差错）。
  
  如何检测：
  
  - 奇偶校验
  
  <img src="E:\typora img\image-20221121104553471.png" alt="image-20221121104553471" style="zoom: 80%;" />
  
  - CRC（循环冗余校验）
  
    <img src="E:\typora img\image-20220924135839068.png" alt="image-20220924135839068" style="zoom: 80%;" />
  
    
  
    
  
    <img src="E:\typora img\image-20220924135854287.png" alt="image-20220924135854287" style="zoom: 80%;" />



- 可靠传输

  > 保证接收方能够正确收到发送方发送的所有数据。·

  - 传输中出现的差错

    - 误码：比特错误。

    - 丢失：路由器的输入队列满时，会主动丢弃数据分组，亦或是接收方收到了重复的数据分组时。

    - 乱序：数据分组通过不同的路由路径，导致到达接收方的时间不同。

    - 重复：数据分组通过的路由路径堵塞，导致发送方没有及时收到确认分组，亦或是确认分组在传输的过程

      中丢失，发送方就会超时重发。 

  - 机制

    - 否认机制：当接收方收到数据并进行差错检测后，如果发现出现数据误码，就向发送方发送否认分组，以让发送方重发数据。
  - 超时重发机制：发送方发送数据后，就开始计时RTO，如果超过RTO时间还没有接收到确认/否认分组，就自动重发对应的数据分组。
    
    - 滑动窗口机制：发送窗口和接收窗口的大小决定了一次能够发送或接收数据分组的最大数量，并且只有成功发送或接收窗口大小的数据分组，才能够滑动窗口，即才能够发送或接收下一次的数据分组。
  

  
- 传输协议
  
  - 停止-等待传输协议
  
      > 使用超时重发机制，每次只发送一个数据分组。
  >
      > 并使用1bit来标记分组序号来防止数据重复差错。
  
      <img src="E:\typora img\image-20220924135602244.png" alt="image-20220924135602244" style="zoom: 67%;" />
  
  - 回退N帧协议
  
      > 使用滑动窗口机制。
  >
      > 发送方发送数据分组的个数取决于发送窗口的大小。
      >
      > 接收方接收数据分组的个数默认为1，即接收窗口的大小默认为1。
      >
      > 假设传输数据0，1，2，3，4，数据分组2出错，
      >
      > 那么发送方就要回退到第2帧，重新发送数据分组2，3，4。
  
    - 选择重传协议
  
      > 使用滑动窗口机制。
  >
      > 发送窗口和接收窗口大小一致。
      >
      > 假设传输数据0，1，2，3，4，数据分组2出错，
      >
      > 那么发送方只需要重新发送数据分组2。
  
  ​    

### 以太网

##### 集线器共享式以太网


<img src="E:\typora img\image-20221121125017133.png" alt="image-20221121125017133" style="zoom: 67%;" />



<img src="E:\typora img\image-20221121125038156.png" alt="image-20221121125038156" style="zoom:67%;" />



##### 交换机交换式以太网

> 交换机自学习
>
> A→B
>
> 从A发出的帧到达交换机后，交换记录下该帧的源MAC地址即主机A的MAC地址和帧到达的交换机接口，并在交换机的记录表中查找帧中的目的MAC地址，从而精确转发或者盲目转发。
>

<img src="E:\typora img\image-20221121123350885.png" alt="image-20221121123350885" style="zoom: 67%;" />



<img src="E:\typora img\image-20221121123637951.png" alt="image-20221121123637951" style="zoom: 67%;" />



<img src="E:\typora img\image-20221121124516325.png" alt="image-20221121124516325" style="zoom: 67%;" />





##### 集线器，交换机与带宽

https://blog.csdn.net/grady1234/article/details/44804423

> 集线器是”共享总线“，只有一条车道，一般是各主机平分带宽。
>
> 交换机是一条公路，有N条车道（取决于交换机的端口数量），所以各主机是独享带宽。
>
> 但是当只有一个车道是可以访问外网时，访问外网时又会变为各主机平分带宽。







### PPP--宽带连接

#### 帧格式

<img src="E:\typora img\image-20221123142507857.png" alt="image-20221123142507857" style="zoom: 80%;" />

#### 透明传输

<img src="E:\typora img\image-20221123143056117.png" alt="image-20221123143056117" style="zoom:80%;" />



<img src="E:\typora img\image-20221123143136837.png" alt="image-20221123143136837" style="zoom:80%;" />



PPP协议的主要特点是什么？为什么PPP不使用帧的编号？PPP适用于什么情况？为什么PPP协议不能使数据链路层实现可靠传输？

> 答：
>
> 简单，提供不可靠的数据报服务，检错，无纠错;
>
> 
>
> PPP不采用序号和确认机制是出于以下的考虑：
>
> 第一， 若使用能够实现可靠传输的数据链路层协议，开销就要增大。在数据链路层出现差错的概率不大时，使用比较简单的PPP协议较为合理。
>
> 第二，数据链路层的可靠传输并不能保证网络层的传输也是可靠的。
>
> 第三， PPP协议有帧检验序列FCS字段，可以检错，所以可以保证无差错接受。
>
> 
>
> PPP适用于点到点线路并且线路质量不差的传输中，例如用户拨号连接上网。
>
> 
>
> 因为PPP不使用序号和确认机制，所以无法实现可靠传输。









## 第四章

网络数量=2^网络号

可分配地址=2^主机号-2





### 分类编址

IP地址=网络号+主机号

可分配给主机的地址=2^x-2  （x为主机号位数；-2：网络地址+广播地址）

<img src="E:\typora img\image-20220929214342955.png" alt="image-20220929214342955" style="zoom: 67%;" />



- A类地址

  <img src="E:\typora img\image-20220929214835663.png" alt="image-20220929214835663" style="zoom:67%;" />

  ​	本地环回地址：通常是指127.0.0.1，不属于任何一个有类别地址类。一般都会用来检查本地网络协议、基本数据接 口等是否正常的。

  ​	[本地环回地址详解及与localhost，0.0.0.0区别](https://blog.csdn.net/u010783226/article/details/119382949)

  > 总结
  >
  > - 127.0.0.1 是回环地址。localhost是域名，但默认等于 127.0.0.1。
  >
  > - ping 回环地址和 ping 本机地址，是一样的，走的是lo0 "假网卡"，都会经过网络层和数据链路层等逻辑，最后在快要出网卡前狠狠拐了个弯， 将数据插入到一个链表后就软中断通知 ksoftirqd 来进行收数据的逻辑，压根就不出网络。所以断网了也能 ping 通回环地址。
  >
  >
  > - 如果服务器 listen 的是 0.0.0.0，那么此时用127.0.0.1和本机地址都可以访问到服务。、

  

- B类地址

  <img src="E:\typora img\image-20220929220023850.png" alt="image-20220929220023850" style="zoom:67%;" />





- C类地址

  <img src="E:\typora img\image-20220929220352145.png" alt="image-20220929220352145" style="zoom:67%;" />





- D类和E类

  ![image-20220929220439484](E:\typora img\image-20220929220439484.png)



#### 例子

![image-20220929220652096](E:\typora img\image-20220929220652096.png)



#### 特殊ipv4地址

<img src="E:\typora img\image-20220929220724192.png" alt="image-20220929220724192" style="zoom: 67%;" />



### 划分子网

IP地址=网络号+子网号+主机号

网络地址=网络号+子网号

网络地址=IP地址&子网掩码（因为子网掩码的主机号全0，所以&运算后的结果只保留了网络号和子网号。）

#### 由来

当局域网从只有一个子网1到拥有三个子网时：

<img src="E:\typora img\image-20220929222609025.png" alt="image-20220929222609025" style="zoom:50%;" />

通过借助主机号的比特来区分子网。

但是有一个问题就是如何知道主机号中的哪些比特是用来区分子网的？

所以出现了子网掩码

注：这时候的

<img src="E:\typora img\image-20220929223227955.png" alt="image-20220929223227955" style="zoom:67%;" />

​				

​					



#### 例子

<img src="E:\typora img\image-20220929223627374.png" alt="image-20220929223627374" style="zoom:67%;" />

<img src="E:\typora img\image-20220929223854504.png" alt="image-20220929223854504" style="zoom:67%;" />

​				划分出的子网数量为2^1=2个 （1为子网号位数）



### 无分类编址--CIDR

#### 			定义

<img src="E:\typora img\image-20220930101726406.png" alt="image-20220930101726406" style="zoom:50%;" />

#### 			斜线记法

<img src="E:\typora img\image-20220930101653789.png" alt="image-20220930101653789" style="zoom: 50%;" />

#### 			星号记法

​			网络前缀的后面加一个星号 * 的表示方法，如00001010 00*，在星号 * 之前是网络前缀，而星号 * 表示 IP 地址中的主机号，可以是任意值。





#### 好处

​	<img src="E:\typora img\image-20220930102420468.png" alt="image-20220930102420468" style="zoom: 67%;" />

​		动态分配地址，有效利用ipv4地址

> ​      分配网络前缀时应先分配地址数较多的前缀。

​	<img src="E:\typora img\image-20220930102439160.png" alt="image-20220930102439160" style="zoom:80%;" />

​	减少路由信息所占的网络资源，原本需要记录5个路由信息，使用无分类编址只需要记录其共同前缀作为网络地址即可得到聚合地址块。



#### 子网划分

- 定长子网掩码

  <img src="E:\typora img\image-20221001151101365.png" alt="image-20221001151101365" style="zoom: 50%;" />

- 不定长子网掩码

  先根据主机数量+网络设备数量确定出主机号，从而确立出子网掩码。
  







### ip地址与mac地址

<img src="E:\typora img\image-20221025104225445.png" alt="image-20221025104225445" style="zoom: 80%;" />

为什么需要两个地址，如果只有一个地址可以吗？

不可以。因为如果只有mac地址，那么路由器就需要记录所有主机的mac地址，这需要巨大的路由存储空间以及通信资源。而如果只有ip地址，那么数据就不能到达目的主机，因为只知道主机在哪一个网络理里，而不知道主机具体在网络的哪里，ip地址就像小区号，mac地址就像门牌号，只知道小区号是找不到对方的。





### ip数据报

##### 发送过程

主机A向主机B发送IP数据包

1. 主机A需要判断主机B与其是否在同一个网络中，若在同一个网络中可以直接交付，若不在同一个网络中，则需要路由器来间接交付。

2. 假设是间接交付。那么主机A该将IP数据报发给哪一个路由器呢？答案是默认网关，即网络管理员设置的主机A所在以太网用来转发的默认路由器。

3. 主机A将IP数据报转发给默认网关后，网关（即路由器）怎么知道该转发给哪个以太网呢？答案是根据路由表。

   ![image-20221123194349859](E:\typora img\image-20221123194349859.png)

   网关将IP数据报的目标地址（即主机B的IP地址）与路由表中的子网掩码相与后得到主机B的网络地址，再查找路由表中是否有该目的网络，如果找到就按照下一跳将IP数据报转发出去。



<img src="E:\typora img\image-20221025114844358.png" alt="image-20221025114844358" style="zoom:80%;" />

##### 格式

<img src="E:\typora img\image-20221123193136721.png" alt="image-20221123193136721" style="zoom:80%;" />





<img src="E:\typora img\image-20221123193048060.png" alt="image-20221123193048060" style="zoom:80%;" />







### VPN--虚拟专用网

<img src="E:\typora img\image-20221123173248014.png" alt="image-20221123173248014" style="zoom: 80%;" />





### NAT--网络地址转换

##### 内网转外网

<img src="E:\typora img\image-20221123173626593.png" alt="image-20221123173626593" style="zoom:80%;" />

<img src="E:\typora img\image-20221123173654820.png" alt="image-20221123173654820" style="zoom:80%;" />

##### 内网转端口

<img src="E:\typora img\image-20221123174210026.png" alt="image-20221123174210026" style="zoom:80%;" />





### IPV6

<img src="E:\typora img\image-20221123180012945.png" alt="image-20221123180012945" style="zoom:80%;" />









## 第五章

#### 端口号

<img src="E:\typora img\image-20221123223516713.png" alt="image-20221123223516713" style="zoom:80%;" />



#### UDP和TCP数据报格式

<img src="E:\typora img\image-20221123223117231.png" alt="image-20221123223117231" style="zoom:80%;" />



#### TCP连接

![image-20221123224240643](E:\typora img\image-20221123224240643.png)

序号：指的是发送的数据载荷的第一个字节的序号。

确认号：指的是已经成功接受到序号至（确认号-1）的数据，希望对方发送的数据是从确认号开始的。

ACK：1表示成功接收，只有设置为1，确认号才是有效的。



